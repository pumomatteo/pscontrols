{"version":3,"file":"loaderManager.js","sources":["../../../src/managers/loaderManager.ts"],"sourcesContent":["import { puma } from \"../ui/vr\";\nimport { UtilityManager } from \"./utilityManager\";\n\nexport class LoaderManager\n{\n\tstatic show(element?: string | HTMLElement | JQuery, transparency = true, tag?: any | null, text?: string | null)\n\t{\n\t\tthis.addCss();\n\t\tif (tag == null)\n\t\t\ttag = \"vrLoadingTemp\";\n\n\t\t//#region Loader\telement\n\t\tlet loaderElement: HTMLElement | null = null;\n\t\tif (element == null)\n\t\t\tloaderElement = document.body;\n\t\telse if (typeof (element) == \"string\")\n\t\t{\n\t\t\tif (!element.startsWith(\"#\"))\n\t\t\t\telement = \"#\" + element;\n\t\t\tloaderElement = puma(element)[0];\n\t\t}\n\t\telse\n\t\t\tloaderElement = puma(element)[0];\n\n\t\tif (loaderElement == null)\n\t\t\tloaderElement = document.body;\n\n\t\tif (puma(loaderElement).css(\"position\") != \"absolute\")\n\t\t\tpuma(loaderElement).css(\"position\", \"relative\");\n\t\t//#endregion\n\n\t\t//#region Transparency\n\t\tlet opacity = \"0.5\";\n\t\tif (!transparency)\n\t\t\topacity = \"1\";\n\t\t//#endregion\n\n\t\t//#region Width/Height\n\t\tlet elementWidth = puma(loaderElement).outerWidth();\n\t\tlet elementHeight = puma(loaderElement).outerHeight();\n\n\t\tlet loaderWidthNumber = elementHeight;\n\t\tif (loaderWidthNumber > 80)\n\t\t\tloaderWidthNumber = 80;\n\t\tlet loaderHeightNumber = elementHeight;\n\t\tif (loaderHeightNumber > 80)\n\t\t\tloaderHeightNumber = 80;\n\t\t//#endregion\n\n\t\t//#region Background\n\t\tlet zIndex: number = 2500000;\n\t\tzIndex = String((puma(loaderElement).css(\"z-index\"))).vrGetNumericPart() + 1;\n\t\tif (loaderElement == document.body)\n\t\t\tzIndex = 99999999;\n\n\t\tlet backgroundWidth = elementWidth + \"px\";\n\t\tlet backgroundHeight = elementHeight + \"px\";\n\n\t\tlet background: HTMLDivElement = document.createElement(\"div\");\n\t\tbackground.setAttribute(\"id\", \"loaderManager_background\");\n\t\tbackground.setAttribute(\"class\", \"loaderManager_background\");\n\t\tbackground.setAttribute(\"style\", \"position:\tabsolute; left: \" + loaderElement!.scrollLeft\n\t\t\t+ \"px; top: \" + loaderElement!.scrollTop + \"px;\tz-index: \" + zIndex.toString()\n\t\t\t+ \"; background-color: #FFF; opacity: \" + opacity + \"; width: \" + backgroundWidth + \"; height: \" + backgroundHeight + \";\");\n\t\tbackground.setAttribute(\"tag\", tag);\n\t\tpuma(background).vrAppendToPuma(loaderElement);\n\t\t//#endregion\n\n\t\t//#region Loader\n\t\tlet loaderLeftPosition = \"Calc(50% - \" + (loaderWidthNumber / 2 - loaderElement!.scrollLeft) + \"px)\";\n\t\tlet loaderTopPosition = \"Calc(50% - \" + (loaderWidthNumber / 2 - loaderElement!.scrollTop) + \"px)\";\n\t\tlet loaderWidth = loaderWidthNumber + \"px\";\n\t\tlet loaderHeight = loaderHeightNumber + \"px\";\n\n\t\tlet textLabel = \"\";\n\t\tif (text != null && text != \"\") \n\t\t{\n\t\t\tlet labelWidth = UtilityManager.textWidth(text) + 20;\n\t\t\tlet css = \"position: absolute; background-color: #51B3E1; color: #FFF; padding: 4px; font-weight: 600; border-radius: 10px; padding-left: 10px; padding-right: 10px;\";\n\t\t\ttextLabel = \"<label style='width: \" + (labelWidth - 7) + \"px; left: Calc(50% - \" + (labelWidth / 2) + \"px);\" + css + \"'>\" + text + \"</label>\"\n\t\t}\n\n\t\tpuma(`\n\t\t\t<div class='loaderManager_loader' tag='` + tag + `' style='display: inline-block; z-index: 99999999; \n\t\t\tposition: absolute; left: ` + loaderLeftPosition + `; top: ` + loaderTopPosition + `; width: ` + loaderWidth + `; \n\t\t\theight: ` + loaderHeight + `;'>\n\t\t\t\t${textLabel}\n\t\t\t\t<div class='loaderManager_step' style='left: 8px; animation: loaderManager_loader1 0.6s infinite;'></div>\n\t\t\t\t<div class='loaderManager_step' style='left: 8px; animation: loaderManager_loader2 0.6s infinite;'></div>\n\t\t\t\t<div class='loaderManager_step' style='left: 32px; animation: loaderManager_loader2 0.6s infinite;'></div>\n\t\t\t\t<div class='loaderManager_step' style='left: 56px; animation: loaderManager_loader3 0.6s infinite;'></div>\n\t\t\t</div>\n\t\t`).vrAppendToPuma(loaderElement);\n\t\t//#endregion\n\t}\n\n\tstatic hide(tag?: any)\n\t{\n\t\tif (tag == null)\n\t\t{\n\t\t\tpuma(\"#loaderManager_background[tag='vrLoadingTemp']\").remove();\n\t\t\tpuma(\".loaderManager_loader[tag='vrLoadingTemp']\").remove();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpuma(\".loaderManager_background[tag='\" + tag + \"']\").remove();\n\t\t\tpuma(\".loaderManager_loader[tag='\" + tag + \"']\").remove();\n\t\t}\n\t}\n\n\tprivate static addCss()\n\t{\n\t\tif (puma(\"head\").find(\"style[id='vr_loader']\")[0] == null)\n\t\t{\n\t\t\tthis.addCssBase(`\n                @keyframes loaderManager_loader1 {\n                  0% {\n                    transform: scale(0);\n                  }\n                  100% {\n                    transform: scale(1);\n                  }\n                }\n\n                @keyframes loaderManager_loader3 {\n                  0% {\n                    transform: scale(1);\n                  }\n                  100% {\n                    transform: scale(0);\n                  }\n                }\n\n                @keyframes loaderManager_loader2 {\n                  0% {\n                    transform: translate(0, 0);\n                  }\n                  100% {\n                    transform: translate(24px, 0);\n                  }\n                }\n\n\t\t\t\t.loaderManager_step {\n\t\t\t\t\tbackground: #51B3E1;\n\t\t\t\t\tposition: absolute; \n\t\t\t\t\ttop: Calc(50% - 6.5px); \n\t\t\t\t\twidth: 13px; \n\t\t\t\t\theight: 13px; \n\t\t\t\t\tborder-radius: 50%; \n\t\t\t\t\tanimation-timing-function: cubic-bezier(0, 1, 1, 0);\n\t\t\t\t\tz-index: 999999999;\n\t\t\t\t}\n            `);\n\t\t}\n\t}\n\n\tprivate static addCssBase(cssRules: string)\n\t{\n\t\tpuma(\"<style id='vr_loader'>\" + cssRules + \"</style>\").vrAppendToPuma(\"head\");\n\t}\n}"],"names":[],"mappings":"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"}
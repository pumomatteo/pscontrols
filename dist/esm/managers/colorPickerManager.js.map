{"version":3,"file":"colorPickerManager.js","sources":["../../../src/managers/colorPickerManager.ts"],"sourcesContent":["/**\n * jscolor - JavaScript Color Picker\n *\n * @link    http://jscolor.com\n * @license For open source use: GPLv3\n *          For commercial use: JSColor Commercial License\n * @author  Jan Odvarko - East Desire\n *\n * See usage examples at http://jscolor.com/examples/\n */\n\nexport class ColorPickerManager\n{\n\tconstructor(){}\n}\n\n(function (global, factory)\n{\n\n\t'use strict';\n\n\tif (typeof module === 'object' && typeof module.exports === 'object')\n\t{\n\t\t// Export jscolor as a module\n\t\tmodule.exports = global!.document ?\n\t\t\tfactory(global) :\n\t\t\tfunction (win: any)\n\t\t\t{\n\t\t\t\tif (!win.document)\n\t\t\t\t{\n\t\t\t\t\tthrow new Error('jscolor needs a window with document');\n\t\t\t\t}\n\t\t\t\treturn factory(win);\n\t\t\t}\n\t\treturn;\n\t}\n\n\t// Default use (no module export)\n\tfactory(global);\n\n})(typeof window !== 'undefined' ? window : this, function (window: any)\n{ // BEGIN factory\n\n\t// BEGIN jscolor code\n\n\n\t'use strict';\n\n\n\tvar jscolor = (function ()\n\t{ // BEGIN jscolor\n\n\t\tvar jsc: any = {\n\n\n\t\t\tinitialized: false,\n\n\t\t\tinstances: [], // created instances of jscolor\n\n\t\t\treadyQueue: [], // functions waiting to be called after init\n\n\n\t\t\tregister: function ()\n\t\t\t{\n\t\t\t\tif (typeof window !== 'undefined' && window.document)\n\t\t\t\t{\n\t\t\t\t\twindow.document.addEventListener('DOMContentLoaded', jsc.pub.init, false);\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\tinstallBySelector: function (selector: any, rootNode: any)\n\t\t\t{\n\t\t\t\trootNode = rootNode ? jsc.node(rootNode) : window.document;\n\t\t\t\tif (!rootNode)\n\t\t\t\t{\n\t\t\t\t\tthrow new Error('Missing root node');\n\t\t\t\t}\n\n\t\t\t\tvar elms = rootNode.querySelectorAll(selector);\n\n\t\t\t\t// for backward compatibility with DEPRECATED installation/configuration using className\n\t\t\t\tvar matchClass = new RegExp('(^|\\\\s)(' + jsc.pub.lookupClass + ')(\\\\s*(\\\\{[^}]*\\\\})|\\\\s|$)', 'i');\n\n\t\t\t\tfor (var i = 0; i < elms.length; i += 1)\n\t\t\t\t{\n\n\t\t\t\t\tif (elms[i].jscolor && elms[i].jscolor instanceof jsc.pub)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue; // jscolor already installed on this element\n\t\t\t\t\t}\n\n\t\t\t\t\tif (elms[i].type !== undefined && elms[i].type.toLowerCase() == 'color' && jsc.isColorAttrSupported)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue; // skips inputs of type 'color' if supported by the browser\n\t\t\t\t\t}\n\n\t\t\t\t\tvar dataOpts, m;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t(dataOpts = jsc.getDataAttr(elms[i], 'jscolor')) !== null ||\n\t\t\t\t\t\t(elms[i].className && (m = elms[i].className.match(matchClass))) // installation using className (DEPRECATED)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar targetElm = elms[i];\n\n\t\t\t\t\t\tvar optsStr = '';\n\t\t\t\t\t\tif (dataOpts !== null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toptsStr = dataOpts;\n\n\t\t\t\t\t\t} else if (m)\n\t\t\t\t\t\t{ // installation using className (DEPRECATED)\n\t\t\t\t\t\t\tconsole.warn('Installation using class name is DEPRECATED. Use data-jscolor=\"\" attribute instead.' + jsc.docsRef);\n\t\t\t\t\t\t\tif (m[4])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\toptsStr = m[4];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar opts = null;\n\t\t\t\t\t\tif (optsStr.trim())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\topts = jsc.parseOptionsStr(optsStr);\n\t\t\t\t\t\t\t} catch (e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconsole.warn(e + '\\n' + optsStr);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnew jsc.pub(targetElm, opts);\n\t\t\t\t\t\t} catch (e)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconsole.warn(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\tparseOptionsStr: function (str: any)\n\t\t\t{\n\t\t\t\tvar opts = null;\n\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\topts = JSON.parse(str);\n\n\t\t\t\t} catch (eParse)\n\t\t\t\t{\n\t\t\t\t\tif (!jsc.pub.looseJSON)\n\t\t\t\t\t{\n\t\t\t\t\t\tthrow new Error('Could not parse jscolor options as JSON: ' + eParse);\n\t\t\t\t\t} else\n\t\t\t\t\t{\n\t\t\t\t\t\t// loose JSON syntax is enabled -> try to evaluate the options string as JavaScript object\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\topts = (new Function('var opts = (' + str + '); return typeof opts === \"object\" ? opts : {};'))();\n\t\t\t\t\t\t} catch (eEval)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthrow new Error('Could not evaluate jscolor options: ' + eEval);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn opts;\n\t\t\t},\n\n\n\t\t\tgetInstances: function ()\n\t\t\t{\n\t\t\t\tvar inst: any = [];\n\t\t\t\tfor (var i = 0; i < jsc.instances.length; i += 1)\n\t\t\t\t{\n\t\t\t\t\t// if the targetElement still exists, the instance is considered \"alive\"\n\t\t\t\t\tif (jsc.instances[i] && jsc.instances[i].targetElement)\n\t\t\t\t\t{\n\t\t\t\t\t\tinst.push(jsc.instances[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn inst;\n\t\t\t},\n\n\n\t\t\tcreateEl: function (tagName: any)\n\t\t\t{\n\t\t\t\tvar el = window.document.createElement(tagName);\n\t\t\t\tjsc.setData(el, 'gui', true);\n\t\t\t\treturn el;\n\t\t\t},\n\n\n\t\t\tnode: function (nodeOrSelector: any)\n\t\t\t{\n\t\t\t\tif (!nodeOrSelector)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (typeof nodeOrSelector === 'string')\n\t\t\t\t{\n\t\t\t\t\t// query selector\n\t\t\t\t\tvar sel = nodeOrSelector;\n\t\t\t\t\tvar el = null;\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tel = window.document.querySelector(sel);\n\t\t\t\t\t} catch (e)\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.warn(e);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tif (!el)\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.warn('No element matches the selector: %s', sel);\n\t\t\t\t\t}\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\n\t\t\t\tif (jsc.isNode(nodeOrSelector))\n\t\t\t\t{\n\t\t\t\t\t// DOM node\n\t\t\t\t\treturn nodeOrSelector;\n\t\t\t\t}\n\n\t\t\t\tconsole.warn('Invalid node of type %s: %s', typeof nodeOrSelector, nodeOrSelector);\n\t\t\t\treturn null;\n\t\t\t},\n\n\n\t\t\t// See https://stackoverflow.com/questions/384286/\n\t\t\tisNode: function (val: any)\n\t\t\t{\n\t\t\t\tif (typeof Node === 'object')\n\t\t\t\t{\n\t\t\t\t\treturn val instanceof Node;\n\t\t\t\t}\n\t\t\t\treturn val && typeof val === 'object' && typeof val.nodeType === 'number' && typeof val.nodeName === 'string';\n\t\t\t},\n\n\n\t\t\tnodeName: function (node: any)\n\t\t\t{\n\t\t\t\tif (node && node.nodeName)\n\t\t\t\t{\n\t\t\t\t\treturn node.nodeName.toLowerCase();\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\n\n\t\t\tremoveChildren: function (node: any)\n\t\t\t{\n\t\t\t\twhile (node.firstChild)\n\t\t\t\t{\n\t\t\t\t\tnode.removeChild(node.firstChild);\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\tisTextInput: function (el: any)\n\t\t\t{\n\t\t\t\treturn el && jsc.nodeName(el) === 'input' && el.type.toLowerCase() === 'text';\n\t\t\t},\n\n\n\t\t\tisButton: function (el: any)\n\t\t\t{\n\t\t\t\tif (!el)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar n = jsc.nodeName(el);\n\t\t\t\treturn (\n\t\t\t\t\t(n === 'button') ||\n\t\t\t\t\t(n === 'input' && ['button', 'submit', 'reset'].indexOf(el.type.toLowerCase()) > -1)\n\t\t\t\t);\n\t\t\t},\n\n\n\t\t\tisButtonEmpty: function (el: any)\n\t\t\t{\n\t\t\t\tswitch (jsc.nodeName(el))\n\t\t\t\t{\n\t\t\t\t\tcase 'input': return (!el.value || el.value.trim() === '');\n\t\t\t\t\tcase 'button': return (el.textContent.trim() === '');\n\t\t\t\t}\n\t\t\t\treturn null; // could not determine element's text\n\t\t\t},\n\n\n\t\t\t// See https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n\t\t\tisPassiveEventSupported: (function ()\n\t\t\t{\n\t\t\t\tvar supported = false;\n\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tvar opts = Object.defineProperty({}, 'passive', {\n\t\t\t\t\t\tget: function () { supported = true; }\n\t\t\t\t\t});\n\t\t\t\t\twindow.addEventListener('testPassive', null, opts);\n\t\t\t\t\twindow.removeEventListener('testPassive', null, opts);\n\t\t\t\t} catch (e) { }\n\n\t\t\t\treturn supported;\n\t\t\t})(),\n\n\n\t\t\tisColorAttrSupported: (function ()\n\t\t\t{\n\t\t\t\tvar elm = window.document.createElement('input');\n\t\t\t\tif (elm.setAttribute)\n\t\t\t\t{\n\t\t\t\t\telm.setAttribute('type', 'color');\n\t\t\t\t\tif (elm.type.toLowerCase() == 'color')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t})(),\n\n\n\t\t\tdataProp: '_data_jscolor',\n\n\n\t\t\t// usage:\n\t\t\t//   setData(obj, prop, value)\n\t\t\t//   setData(obj, {prop:value, ...})\n\t\t\t//\n\t\t\tsetData: function ()\n\t\t\t{\n\t\t\t\tvar obj = arguments[0];\n\n\t\t\t\tif (arguments.length === 3)\n\t\t\t\t{\n\t\t\t\t\t// setting a single property\n\t\t\t\t\tvar data = obj.hasOwnProperty(jsc.dataProp) ? obj[jsc.dataProp] : (obj[jsc.dataProp] = {});\n\t\t\t\t\tvar prop = arguments[1];\n\t\t\t\t\tvar value = arguments[2];\n\n\t\t\t\t\tdata[prop] = value;\n\t\t\t\t\treturn true;\n\n\t\t\t\t} else if (arguments.length === 2 && typeof arguments[1] === 'object')\n\t\t\t\t{\n\t\t\t\t\t// setting multiple properties\n\t\t\t\t\tvar data = obj.hasOwnProperty(jsc.dataProp) ? obj[jsc.dataProp] : (obj[jsc.dataProp] = {});\n\t\t\t\t\tvar map: any = arguments[1];\n\n\t\t\t\t\tfor (var prop1 in map)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (map.hasOwnProperty(prop1))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdata[prop1] = map[prop1];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tthrow new Error('Invalid arguments');\n\t\t\t},\n\n\n\t\t\t// usage:\n\t\t\t//   removeData(obj, prop, [prop...])\n\t\t\t//\n\t\t\tremoveData: function ()\n\t\t\t{\n\t\t\t\tvar obj = arguments[0];\n\t\t\t\tif (!obj.hasOwnProperty(jsc.dataProp))\n\t\t\t\t{\n\t\t\t\t\treturn true; // data object does not exist\n\t\t\t\t}\n\t\t\t\tfor (var i = 1; i < arguments.length; i += 1)\n\t\t\t\t{\n\t\t\t\t\tvar prop = arguments[i];\n\t\t\t\t\tdelete obj[jsc.dataProp][prop];\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\n\n\t\t\tgetData: function (obj: any, prop: any, setDefault: any)\n\t\t\t{\n\t\t\t\tif (!obj.hasOwnProperty(jsc.dataProp))\n\t\t\t\t{\n\t\t\t\t\t// data object does not exist\n\t\t\t\t\tif (setDefault !== undefined)\n\t\t\t\t\t{\n\t\t\t\t\t\tobj[jsc.dataProp] = {}; // create data object\n\t\t\t\t\t} else\n\t\t\t\t\t{\n\t\t\t\t\t\treturn undefined; // no value to return\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar data = obj[jsc.dataProp];\n\n\t\t\t\tif (!data.hasOwnProperty(prop) && setDefault !== undefined)\n\t\t\t\t{\n\t\t\t\t\tdata[prop] = setDefault;\n\t\t\t\t}\n\t\t\t\treturn data[prop];\n\t\t\t},\n\n\n\t\t\tgetDataAttr: function (el: any, name: any)\n\t\t\t{\n\t\t\t\tvar attrName = 'data-' + name;\n\t\t\t\tvar attrValue = el.getAttribute(attrName);\n\t\t\t\treturn attrValue;\n\t\t\t},\n\n\n\t\t\tsetDataAttr: function (el: any, name: any, value: any)\n\t\t\t{\n\t\t\t\tvar attrName = 'data-' + name;\n\t\t\t\tel.setAttribute(attrName, value);\n\t\t\t},\n\n\n\t\t\t_attachedGroupEvents: {},\n\n\n\t\t\tattachGroupEvent: function (groupName: any, el: any, evnt: any, func: any)\n\t\t\t{\n\t\t\t\tif (!jsc._attachedGroupEvents.hasOwnProperty(groupName))\n\t\t\t\t{\n\t\t\t\t\tjsc._attachedGroupEvents[groupName] = [];\n\t\t\t\t}\n\t\t\t\tjsc._attachedGroupEvents[groupName].push([el, evnt, func]);\n\t\t\t\tel.addEventListener(evnt, func, false);\n\t\t\t},\n\n\n\t\t\tdetachGroupEvents: function (groupName: any)\n\t\t\t{\n\t\t\t\tif (jsc._attachedGroupEvents.hasOwnProperty(groupName))\n\t\t\t\t{\n\t\t\t\t\tfor (var i = 0; i < jsc._attachedGroupEvents[groupName].length; i += 1)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar evt = jsc._attachedGroupEvents[groupName][i];\n\t\t\t\t\t\tevt[0].removeEventListener(evt[1], evt[2], false);\n\t\t\t\t\t}\n\t\t\t\t\tdelete jsc._attachedGroupEvents[groupName];\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\tpreventDefault: function (e: any)\n\t\t\t{\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\t\te.returnValue = false;\n\t\t\t},\n\n\n\t\t\tcaptureTarget: function (target: any)\n\t\t\t{\n\t\t\t\t// IE\n\t\t\t\tif (target.setCapture)\n\t\t\t\t{\n\t\t\t\t\tjsc._capturedTarget = target;\n\t\t\t\t\tjsc._capturedTarget.setCapture();\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\treleaseTarget: function ()\n\t\t\t{\n\t\t\t\t// IE\n\t\t\t\tif (jsc._capturedTarget)\n\t\t\t\t{\n\t\t\t\t\tjsc._capturedTarget.releaseCapture();\n\t\t\t\t\tjsc._capturedTarget = null;\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\ttriggerEvent: function (el: any, eventName: any, bubbles: any, cancelable: any)\n\t\t\t{\n\t\t\t\tif (!el)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar ev = null;\n\n\t\t\t\tif (typeof Event === 'function')\n\t\t\t\t{\n\t\t\t\t\tev = new Event(eventName, {\n\t\t\t\t\t\tbubbles: bubbles,\n\t\t\t\t\t\tcancelable: cancelable\n\t\t\t\t\t});\n\t\t\t\t} else\n\t\t\t\t{\n\t\t\t\t\t// IE\n\t\t\t\t\tev = window.document.createEvent('Event');\n\t\t\t\t\tev.initEvent(eventName, bubbles, cancelable);\n\t\t\t\t}\n\n\t\t\t\tif (!ev)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// so that we know that the event was triggered internally\n\t\t\t\tjsc.setData(ev, 'internal', true);\n\n\t\t\t\tel.dispatchEvent(ev);\n\t\t\t\treturn true;\n\t\t\t},\n\n\n\t\t\ttriggerInputEvent: function (el: any, eventName: any, bubbles: any, cancelable: any)\n\t\t\t{\n\t\t\t\tif (!el)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (jsc.isTextInput(el))\n\t\t\t\t{\n\t\t\t\t\tjsc.triggerEvent(el, eventName, bubbles, cancelable);\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\teventKey: function (ev: any)\n\t\t\t{\n\t\t\t\tvar keys: any = {\n\t\t\t\t\t9: 'Tab',\n\t\t\t\t\t13: 'Enter',\n\t\t\t\t\t27: 'Escape',\n\t\t\t\t};\n\t\t\t\tif (typeof ev.code === 'string')\n\t\t\t\t{\n\t\t\t\t\treturn ev.code;\n\t\t\t\t} else if (ev.keyCode !== undefined && keys.hasOwnProperty(ev.keyCode))\n\t\t\t\t{\n\t\t\t\t\treturn keys[ev.keyCode];\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t},\n\n\n\t\t\tstrList: function (str: any)\n\t\t\t{\n\t\t\t\tif (!str)\n\t\t\t\t{\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\t\t\t\treturn str.replace(/^\\s+|\\s+$/g, '').split(/\\s+/);\n\t\t\t},\n\n\n\t\t\t// The className parameter (str) can only contain a single class name\n\t\t\thasClass: function (elm: any, className: any)\n\t\t\t{\n\t\t\t\tif (!className)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (elm.classList !== undefined)\n\t\t\t\t{\n\t\t\t\t\treturn elm.classList.contains(className);\n\t\t\t\t}\n\t\t\t\t// polyfill\n\t\t\t\treturn -1 != (' ' + elm.className.replace(/\\s+/g, ' ') + ' ').indexOf(' ' + className + ' ');\n\t\t\t},\n\n\n\t\t\t// The className parameter (str) can contain multiple class names separated by whitespace\n\t\t\taddClass: function (elm: any, className: any)\n\t\t\t{\n\t\t\t\tvar classNames = jsc.strList(className);\n\n\t\t\t\tif (elm.classList !== undefined)\n\t\t\t\t{\n\t\t\t\t\tfor (var i = 0; i < classNames.length; i += 1)\n\t\t\t\t\t{\n\t\t\t\t\t\telm.classList.add(classNames[i]);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// polyfill\n\t\t\t\tfor (var i = 0; i < classNames.length; i += 1)\n\t\t\t\t{\n\t\t\t\t\tif (!jsc.hasClass(elm, classNames[i]))\n\t\t\t\t\t{\n\t\t\t\t\t\telm.className += (elm.className ? ' ' : '') + classNames[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t// The className parameter (str) can contain multiple class names separated by whitespace\n\t\t\tremoveClass: function (elm: any, className: any)\n\t\t\t{\n\t\t\t\tvar classNames = jsc.strList(className);\n\n\t\t\t\tif (elm.classList !== undefined)\n\t\t\t\t{\n\t\t\t\t\tfor (var i = 0; i < classNames.length; i += 1)\n\t\t\t\t\t{\n\t\t\t\t\t\telm.classList.remove(classNames[i]);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// polyfill\n\t\t\t\tfor (var i = 0; i < classNames.length; i += 1)\n\t\t\t\t{\n\t\t\t\t\tvar repl = new RegExp(\n\t\t\t\t\t\t'^\\\\s*' + classNames[i] + '\\\\s*|' +\n\t\t\t\t\t\t'\\\\s*' + classNames[i] + '\\\\s*$|' +\n\t\t\t\t\t\t'\\\\s+' + classNames[i] + '(\\\\s+)',\n\t\t\t\t\t\t'g'\n\t\t\t\t\t);\n\t\t\t\t\telm.className = elm.className.replace(repl, '$1');\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\tgetCompStyle: function (elm: any)\n\t\t\t{\n\t\t\t\tvar compStyle = window.getComputedStyle ? window.getComputedStyle(elm) : elm.currentStyle;\n\n\t\t\t\t// Note: In Firefox, getComputedStyle returns null in a hidden iframe,\n\t\t\t\t// that's why we need to check if the returned value is non-empty\n\t\t\t\tif (!compStyle)\n\t\t\t\t{\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\t\t\t\treturn compStyle;\n\t\t\t},\n\n\n\t\t\t// Note:\n\t\t\t//   Setting a property to NULL reverts it to the state before it was first set\n\t\t\t//   with the 'reversible' flag enabled\n\t\t\t//\n\t\t\tsetStyle: function (elm: any, styles: any, important: any, reversible: any)\n\t\t\t{\n\t\t\t\t// using '' for standard priority (IE10 apparently doesn't like value undefined)\n\t\t\t\tvar priority = important ? 'important' : '';\n\t\t\t\tvar origStyle = null;\n\n\t\t\t\tfor (var prop in styles)\n\t\t\t\t{\n\t\t\t\t\tif (styles.hasOwnProperty(prop))\n\t\t\t\t\t{\n\t\t\t\t\t\tvar setVal = null;\n\n\t\t\t\t\t\tif (styles[prop] === null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// reverting a property value\n\n\t\t\t\t\t\t\tif (!origStyle)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t// get the original style object, but dont't try to create it if it doesn't exist\n\t\t\t\t\t\t\t\torigStyle = jsc.getData(elm, 'origStyle');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (origStyle && origStyle.hasOwnProperty(prop))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t// we have property's original value -> use it\n\t\t\t\t\t\t\t\tsetVal = origStyle[prop];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// setting a property value\n\n\t\t\t\t\t\t\tif (reversible)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (!origStyle)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t// get the original style object and if it doesn't exist, create it\n\t\t\t\t\t\t\t\t\torigStyle = jsc.getData(elm, 'origStyle', {});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!origStyle.hasOwnProperty(prop))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t// original property value not yet stored -> store it\n\t\t\t\t\t\t\t\t\torigStyle[prop] = elm.style[prop];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetVal = styles[prop];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (setVal !== null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\telm.style.setProperty(prop, setVal, priority);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\thexColor: function (r: any, g: any, b: any)\n\t\t\t{\n\t\t\t\treturn '#' + (\n\t\t\t\t\t('0' + Math.round(r).toString(16)).substr(-2) +\n\t\t\t\t\t('0' + Math.round(g).toString(16)).substr(-2) +\n\t\t\t\t\t('0' + Math.round(b).toString(16)).substr(-2)\n\t\t\t\t).toUpperCase();\n\t\t\t},\n\n\n\t\t\thexaColor: function (r: any, g: any, b: any, a: any)\n\t\t\t{\n\t\t\t\treturn '#' + (\n\t\t\t\t\t('0' + Math.round(r).toString(16)).substr(-2) +\n\t\t\t\t\t('0' + Math.round(g).toString(16)).substr(-2) +\n\t\t\t\t\t('0' + Math.round(b).toString(16)).substr(-2) +\n\t\t\t\t\t('0' + Math.round(a * 255).toString(16)).substr(-2)\n\t\t\t\t).toUpperCase();\n\t\t\t},\n\n\n\t\t\trgbColor: function (r: any, g: any, b: any)\n\t\t\t{\n\t\t\t\treturn 'rgb(' +\n\t\t\t\t\tMath.round(r) + ',' +\n\t\t\t\t\tMath.round(g) + ',' +\n\t\t\t\t\tMath.round(b) +\n\t\t\t\t\t')';\n\t\t\t},\n\n\n\t\t\trgbaColor: function (r: any, g: any, b: any, a: any)\n\t\t\t{\n\t\t\t\treturn 'rgba(' +\n\t\t\t\t\tMath.round(r) + ',' +\n\t\t\t\t\tMath.round(g) + ',' +\n\t\t\t\t\tMath.round(b) + ',' +\n\t\t\t\t\t(Math.round((a === undefined || a === null ? 1 : a) * 100) / 100) +\n\t\t\t\t\t')';\n\t\t\t},\n\n\n\t\t\tlinearGradient: (function ()\n\t\t\t{\n\n\t\t\t\tfunction getFuncName()\n\t\t\t\t{\n\t\t\t\t\tvar stdName = 'linear-gradient';\n\t\t\t\t\tvar prefixes = ['', '-webkit-', '-moz-', '-o-', '-ms-'];\n\t\t\t\t\tvar helper = window.document.createElement('div');\n\n\t\t\t\t\tfor (var i = 0; i < prefixes.length; i += 1)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar tryFunc = prefixes[i] + stdName;\n\t\t\t\t\t\tvar tryVal = tryFunc + '(to right, rgba(0,0,0,0), rgba(0,0,0,0))';\n\n\t\t\t\t\t\thelper.style.background = tryVal;\n\t\t\t\t\t\tif (helper.style.background)\n\t\t\t\t\t\t{ // CSS background successfully set -> function name is supported\n\t\t\t\t\t\t\treturn tryFunc;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn stdName; // fallback to standard 'linear-gradient' without vendor prefix\n\t\t\t\t}\n\n\t\t\t\tvar funcName = getFuncName();\n\n\t\t\t\treturn function ()\n\t\t\t\t{\n\t\t\t\t\treturn funcName + '(' + Array.prototype.join.call(arguments, ', ') + ')';\n\t\t\t\t};\n\n\t\t\t})(),\n\n\n\t\t\tsetBorderRadius: function (elm: any, value: any)\n\t\t\t{\n\t\t\t\tjsc.setStyle(elm, { 'border-radius': value || '0' });\n\t\t\t},\n\n\n\t\t\tsetBoxShadow: function (elm: any, value: any)\n\t\t\t{\n\t\t\t\tjsc.setStyle(elm, { 'box-shadow': value || 'none' });\n\t\t\t},\n\n\n\t\t\tgetElementPos: function (e: any, relativeToViewport: any)\n\t\t\t{\n\t\t\t\tvar x = 0, y = 0;\n\t\t\t\tvar rect = e.getBoundingClientRect();\n\t\t\t\tx = rect.left;\n\t\t\t\ty = rect.top;\n\t\t\t\tif (!relativeToViewport)\n\t\t\t\t{\n\t\t\t\t\tvar viewPos = jsc.getViewPos();\n\t\t\t\t\tx += viewPos[0];\n\t\t\t\t\ty += viewPos[1];\n\t\t\t\t}\n\t\t\t\treturn [x, y];\n\t\t\t},\n\n\n\t\t\tgetElementSize: function (e: any)\n\t\t\t{\n\t\t\t\treturn [e.offsetWidth, e.offsetHeight];\n\t\t\t},\n\n\n\t\t\t// get pointer's X/Y coordinates relative to viewport\n\t\t\tgetAbsPointerPos: function (e: any)\n\t\t\t{\n\t\t\t\tvar x = 0, y = 0;\n\t\t\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length)\n\t\t\t\t{\n\t\t\t\t\t// touch devices\n\t\t\t\t\tx = e.changedTouches[0].clientX;\n\t\t\t\t\ty = e.changedTouches[0].clientY;\n\t\t\t\t} else if (typeof e.clientX === 'number')\n\t\t\t\t{\n\t\t\t\t\tx = e.clientX;\n\t\t\t\t\ty = e.clientY;\n\t\t\t\t}\n\t\t\t\treturn { x: x, y: y };\n\t\t\t},\n\n\n\t\t\t// get pointer's X/Y coordinates relative to target element\n\t\t\tgetRelPointerPos: function (e: any)\n\t\t\t{\n\t\t\t\tvar target = e.target || e.srcElement;\n\t\t\t\tvar targetRect = target.getBoundingClientRect();\n\n\t\t\t\tvar x = 0, y = 0;\n\n\t\t\t\tvar clientX = 0, clientY = 0;\n\t\t\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length)\n\t\t\t\t{\n\t\t\t\t\t// touch devices\n\t\t\t\t\tclientX = e.changedTouches[0].clientX;\n\t\t\t\t\tclientY = e.changedTouches[0].clientY;\n\t\t\t\t} else if (typeof e.clientX === 'number')\n\t\t\t\t{\n\t\t\t\t\tclientX = e.clientX;\n\t\t\t\t\tclientY = e.clientY;\n\t\t\t\t}\n\n\t\t\t\tx = clientX - targetRect.left;\n\t\t\t\ty = clientY - targetRect.top;\n\t\t\t\treturn { x: x, y: y };\n\t\t\t},\n\n\n\t\t\tgetViewPos: function ()\n\t\t\t{\n\t\t\t\tvar doc = window.document.documentElement;\n\t\t\t\treturn [\n\t\t\t\t\t(window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0),\n\t\t\t\t\t(window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\n\t\t\t\t];\n\t\t\t},\n\n\n\t\t\tgetViewSize: function ()\n\t\t\t{\n\t\t\t\tvar doc = window.document.documentElement;\n\t\t\t\treturn [\n\t\t\t\t\t(window.innerWidth || doc.clientWidth),\n\t\t\t\t\t(window.innerHeight || doc.clientHeight),\n\t\t\t\t];\n\t\t\t},\n\n\n\t\t\t// r: 0-255\n\t\t\t// g: 0-255\n\t\t\t// b: 0-255\n\t\t\t//\n\t\t\t// returns: [ 0-360, 0-100, 0-100 ]\n\t\t\t//\n\t\t\tRGB_HSV: function (r: any, g: any, b: any)\n\t\t\t{\n\t\t\t\tr /= 255;\n\t\t\t\tg /= 255;\n\t\t\t\tb /= 255;\n\t\t\t\tvar n = Math.min(Math.min(r, g), b);\n\t\t\t\tvar v = Math.max(Math.max(r, g), b);\n\t\t\t\tvar m = v - n;\n\t\t\t\tif (m === 0) { return [null, 0, 100 * v]; }\n\t\t\t\tvar h = r === n ? 3 + (b - g) / m : (g === n ? 5 + (r - b) / m : 1 + (g - r) / m);\n\t\t\t\treturn [\n\t\t\t\t\t60 * (h === 6 ? 0 : h),\n\t\t\t\t\t100 * (m / v),\n\t\t\t\t\t100 * v\n\t\t\t\t];\n\t\t\t},\n\n\n\t\t\t// h: 0-360\n\t\t\t// s: 0-100\n\t\t\t// v: 0-100\n\t\t\t//\n\t\t\t// returns: [ 0-255, 0-255, 0-255 ]\n\t\t\t//\n\t\t\tHSV_RGB: function (h: any, s: any, v: any)\n\t\t\t{\n\t\t\t\tvar u = 255 * (v / 100);\n\n\t\t\t\tif (h === null)\n\t\t\t\t{\n\t\t\t\t\treturn [u, u, u];\n\t\t\t\t}\n\n\t\t\t\th /= 60;\n\t\t\t\ts /= 100;\n\n\t\t\t\tvar i = Math.floor(h);\n\t\t\t\tvar f = i % 2 ? h - i : 1 - (h - i);\n\t\t\t\tvar m = u * (1 - s);\n\t\t\t\tvar n = u * (1 - s * f);\n\t\t\t\tswitch (i)\n\t\t\t\t{\n\t\t\t\t\tcase 6:\n\t\t\t\t\tcase 0: return [u, n, m];\n\t\t\t\t\tcase 1: return [n, u, m];\n\t\t\t\t\tcase 2: return [m, u, n];\n\t\t\t\t\tcase 3: return [m, n, u];\n\t\t\t\t\tcase 4: return [n, m, u];\n\t\t\t\t\tcase 5: return [u, m, n];\n\t\t\t\t}\n\t\t\t\treturn u;\n\t\t\t},\n\n\n\t\t\tparseColorString: function (str: any)\n\t\t\t{\n\t\t\t\tvar ret: any = {\n\t\t\t\t\trgba: null,\n\t\t\t\t\tformat: null // 'hex' | 'hexa' | 'rgb' | 'rgba'\n\t\t\t\t};\n\n\t\t\t\tvar m;\n\n\t\t\t\tif (m = str.match(/^\\W*([0-9A-F]{3,8})\\W*$/i))\n\t\t\t\t{\n\t\t\t\t\t// HEX notation\n\n\t\t\t\t\tif (m[1].length === 8)\n\t\t\t\t\t{\n\t\t\t\t\t\t// 8-char notation (= with alpha)\n\t\t\t\t\t\tret.format = 'hexa';\n\t\t\t\t\t\tret.rgba = [\n\t\t\t\t\t\t\tparseInt(m[1].substr(0, 2), 16),\n\t\t\t\t\t\t\tparseInt(m[1].substr(2, 2), 16),\n\t\t\t\t\t\t\tparseInt(m[1].substr(4, 2), 16),\n\t\t\t\t\t\t\tparseInt(m[1].substr(6, 2), 16) / 255\n\t\t\t\t\t\t];\n\n\t\t\t\t\t} else if (m[1].length === 6)\n\t\t\t\t\t{\n\t\t\t\t\t\t// 6-char notation\n\t\t\t\t\t\tret.format = 'hex';\n\t\t\t\t\t\tret.rgba = [\n\t\t\t\t\t\t\tparseInt(m[1].substr(0, 2), 16),\n\t\t\t\t\t\t\tparseInt(m[1].substr(2, 2), 16),\n\t\t\t\t\t\t\tparseInt(m[1].substr(4, 2), 16),\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t];\n\n\t\t\t\t\t} else if (m[1].length === 3)\n\t\t\t\t\t{\n\t\t\t\t\t\t// 3-char notation\n\t\t\t\t\t\tret.format = 'hex';\n\t\t\t\t\t\tret.rgba = [\n\t\t\t\t\t\t\tparseInt(m[1].charAt(0) + m[1].charAt(0), 16),\n\t\t\t\t\t\t\tparseInt(m[1].charAt(1) + m[1].charAt(1), 16),\n\t\t\t\t\t\t\tparseInt(m[1].charAt(2) + m[1].charAt(2), 16),\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t];\n\n\t\t\t\t\t} else\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\n\t\t\t\tif (m = str.match(/^\\W*rgba?\\(([^)]*)\\)\\W*$/i))\n\t\t\t\t{\n\t\t\t\t\t// rgb(...) or rgba(...) notation\n\n\t\t\t\t\tvar par = m[1].split(',');\n\t\t\t\t\tvar re = /^\\s*(\\d+|\\d*\\.\\d+|\\d+\\.\\d*)\\s*$/;\n\t\t\t\t\tvar mR, mG, mB, mA;\n\t\t\t\t\tif (\n\t\t\t\t\t\tpar.length >= 3 &&\n\t\t\t\t\t\t(mR = par[0].match(re)) &&\n\t\t\t\t\t\t(mG = par[1].match(re)) &&\n\t\t\t\t\t\t(mB = par[2].match(re))\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tret.format = 'rgb';\n\t\t\t\t\t\tret.rgba = [\n\t\t\t\t\t\t\tparseFloat(mR[1]) || 0,\n\t\t\t\t\t\t\tparseFloat(mG[1]) || 0,\n\t\t\t\t\t\t\tparseFloat(mB[1]) || 0,\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t];\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tpar.length >= 4 &&\n\t\t\t\t\t\t\t(mA = par[3].match(re))\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tret.format = 'rgba';\n\t\t\t\t\t\t\tret.rgba[3] = parseFloat(mA[1]) || 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn ret;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\n\t\t\tparsePaletteValue: function (mixed: any)\n\t\t\t{\n\t\t\t\tvar vals = [];\n\n\t\t\t\tif (typeof mixed === 'string')\n\t\t\t\t{ // input is a string of space separated color values\n\t\t\t\t\t// rgb() and rgba() may contain spaces too, so let's find all color values by regex\n\t\t\t\t\t(mixed as any).replace(/#[0-9A-F]{3}([0-9A-F]{3})?|rgba?\\(([^)]*)\\)/ig, function (val: any)\n\t\t\t\t\t{\n\t\t\t\t\t\tvals.push(val);\n\t\t\t\t\t});\n\t\t\t\t} else if (Array.isArray(mixed))\n\t\t\t\t{ // input is an array of color values\n\t\t\t\t\tvals = mixed;\n\t\t\t\t}\n\n\t\t\t\t// convert all values into uniform color format\n\n\t\t\t\tvar colors = [];\n\n\t\t\t\tfor (var i = 0; i < vals.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar color = jsc.parseColorString(vals[i]);\n\t\t\t\t\tif (color)\n\t\t\t\t\t{\n\t\t\t\t\t\tcolors.push(color);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn colors;\n\t\t\t},\n\n\n\t\t\tcontainsTranparentColor: function (colors: any)\n\t\t\t{\n\t\t\t\tfor (var i = 0; i < colors.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar a = colors[i].rgba[3];\n\t\t\t\t\tif (a !== null && a < 1.0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\n\n\t\t\tisAlphaFormat: function (format: any)\n\t\t\t{\n\t\t\t\tswitch (format.toLowerCase())\n\t\t\t\t{\n\t\t\t\t\tcase 'hexa':\n\t\t\t\t\tcase 'rgba':\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\n\n\t\t\t// Canvas scaling for retina displays\n\t\t\t//\n\t\t\t// adapted from https://www.html5rocks.com/en/tutorials/canvas/hidpi/\n\t\t\t//\n\t\t\tscaleCanvasForHighDPR: function (canvas: any)\n\t\t\t{\n\t\t\t\tvar dpr = window.devicePixelRatio || 1;\n\t\t\t\tcanvas.width *= dpr;\n\t\t\t\tcanvas.height *= dpr;\n\t\t\t\tvar ctx = canvas.getContext('2d');\n\t\t\t\tctx.scale(dpr, dpr);\n\t\t\t},\n\n\n\t\t\tgenColorPreviewCanvas: function (color: any, separatorPos: any, specWidth: any, scaleForHighDPR: any)\n\t\t\t{\n\n\t\t\t\tvar sepW = Math.round(jsc.pub.previewSeparator.length);\n\t\t\t\tvar sqSize = jsc.pub.chessboardSize;\n\t\t\t\tvar sqColor1 = jsc.pub.chessboardColor1;\n\t\t\t\tvar sqColor2 = jsc.pub.chessboardColor2;\n\n\t\t\t\tvar cWidth = specWidth ? specWidth : sqSize * 2;\n\t\t\t\tvar cHeight = sqSize * 2;\n\n\t\t\t\tvar canvas = jsc.createEl('canvas');\n\t\t\t\tvar ctx = canvas.getContext('2d');\n\n\t\t\t\tcanvas.width = cWidth;\n\t\t\t\tcanvas.height = cHeight;\n\t\t\t\tif (scaleForHighDPR)\n\t\t\t\t{\n\t\t\t\t\tjsc.scaleCanvasForHighDPR(canvas);\n\t\t\t\t}\n\n\t\t\t\t// transparency chessboard - background\n\t\t\t\tctx.fillStyle = sqColor1;\n\t\t\t\tctx.fillRect(0, 0, cWidth, cHeight);\n\n\t\t\t\t// transparency chessboard - squares\n\t\t\t\tctx.fillStyle = sqColor2;\n\t\t\t\tfor (var x = 0; x < cWidth; x += sqSize * 2)\n\t\t\t\t{\n\t\t\t\t\tctx.fillRect(x, 0, sqSize, sqSize);\n\t\t\t\t\tctx.fillRect(x + sqSize, sqSize, sqSize, sqSize);\n\t\t\t\t}\n\n\t\t\t\tif (color)\n\t\t\t\t{\n\t\t\t\t\t// actual color in foreground\n\t\t\t\t\tctx.fillStyle = color;\n\t\t\t\t\tctx.fillRect(0, 0, cWidth, cHeight);\n\t\t\t\t}\n\n\t\t\t\tvar start = null;\n\t\t\t\tswitch (separatorPos)\n\t\t\t\t{\n\t\t\t\t\tcase 'left':\n\t\t\t\t\t\tstart = 0;\n\t\t\t\t\t\tctx.clearRect(0, 0, sepW / 2, cHeight);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'right':\n\t\t\t\t\t\tstart = cWidth - sepW;\n\t\t\t\t\t\tctx.clearRect(cWidth - (sepW / 2), 0, sepW / 2, cHeight);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (start !== null)\n\t\t\t\t{\n\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\tfor (var i = 0; i < jsc.pub.previewSeparator.length; i += 1)\n\t\t\t\t\t{\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.strokeStyle = jsc.pub.previewSeparator[i];\n\t\t\t\t\t\tctx.moveTo(0.5 + start + i, 0);\n\t\t\t\t\t\tctx.lineTo(0.5 + start + i, cHeight);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tcanvas: canvas,\n\t\t\t\t\twidth: cWidth,\n\t\t\t\t\theight: cHeight,\n\t\t\t\t};\n\t\t\t},\n\n\n\t\t\t// if position or width is not set => fill the entire element (0%-100%)\n\t\t\tgenColorPreviewGradient: function (color: any, position: any, width: any)\n\t\t\t{\n\t\t\t\tvar params = [];\n\n\t\t\t\tif (position && width)\n\t\t\t\t{\n\t\t\t\t\tparams = [\n\t\t\t\t\t\t'to ' + ({ 'left': 'right', 'right': 'left' } as any)[position],\n\t\t\t\t\t\tcolor + ' 0%',\n\t\t\t\t\t\tcolor + ' ' + width + 'px',\n\t\t\t\t\t\t'rgba(0,0,0,0) ' + (width + 1) + 'px',\n\t\t\t\t\t\t'rgba(0,0,0,0) 100%',\n\t\t\t\t\t];\n\t\t\t\t} else\n\t\t\t\t{\n\t\t\t\t\tparams = [\n\t\t\t\t\t\t'to right',\n\t\t\t\t\t\tcolor + ' 0%',\n\t\t\t\t\t\tcolor + ' 100%',\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn jsc.linearGradient.apply(this, params);\n\t\t\t},\n\n\n\t\t\tredrawPosition: function ()\n\t\t\t{\n\n\t\t\t\tif (!jsc.picker || !jsc.picker.owner)\n\t\t\t\t{\n\t\t\t\t\treturn; // picker is not shown\n\t\t\t\t}\n\n\t\t\t\tvar thisObj = jsc.picker.owner;\n\n\t\t\t\tvar tp, vp;\n\n\t\t\t\tif (thisObj.fixed)\n\t\t\t\t{\n\t\t\t\t\t// Fixed elements are positioned relative to viewport,\n\t\t\t\t\t// therefore we can ignore the scroll offset\n\t\t\t\t\ttp = jsc.getElementPos(thisObj.targetElement, true); // target pos\n\t\t\t\t\tvp = [0, 0]; // view pos\n\t\t\t\t} else\n\t\t\t\t{\n\t\t\t\t\ttp = jsc.getElementPos(thisObj.targetElement); // target pos\n\t\t\t\t\tvp = jsc.getViewPos(); // view pos\n\t\t\t\t}\n\n\t\t\t\tvar ts = jsc.getElementSize(thisObj.targetElement); // target size\n\t\t\t\tvar vs = jsc.getViewSize(); // view size\n\t\t\t\tvar pd = jsc.getPickerDims(thisObj);\n\t\t\t\tvar ps = [pd.borderW, pd.borderH]; // picker outer size\n\t\t\t\tvar a, b, c;\n\t\t\t\tswitch (thisObj.position.toLowerCase())\n\t\t\t\t{\n\t\t\t\t\tcase 'left': a = 1; b = 0; c = -1; break;\n\t\t\t\t\tcase 'right': a = 1; b = 0; c = 1; break;\n\t\t\t\t\tcase 'top': a = 0; b = 1; c = -1; break;\n\t\t\t\t\tdefault: a = 0; b = 1; c = 1; break;\n\t\t\t\t}\n\t\t\t\tvar l = (ts[b] + ps[b]) / 2;\n\n\t\t\t\t// compute picker position\n\t\t\t\tif (!thisObj.smartPosition)\n\t\t\t\t{\n\t\t\t\t\tvar pp = [\n\t\t\t\t\t\ttp[a],\n\t\t\t\t\t\ttp[b] + ts[b] - l + l * c\n\t\t\t\t\t];\n\t\t\t\t} else\n\t\t\t\t{\n\t\t\t\t\tvar pp = [\n\t\t\t\t\t\t-vp[a] + tp[a] + ps[a] > vs[a] ?\n\t\t\t\t\t\t\t(-vp[a] + tp[a] + ts[a] / 2 > vs[a] / 2 && tp[a] + ts[a] - ps[a] >= 0 ? tp[a] + ts[a] - ps[a] : tp[a]) :\n\t\t\t\t\t\t\ttp[a],\n\t\t\t\t\t\t-vp[b] + tp[b] + ts[b] + ps[b] - l + l * c > vs[b] ?\n\t\t\t\t\t\t\t(-vp[b] + tp[b] + ts[b] / 2 > vs[b] / 2 && tp[b] + ts[b] - l - l * c >= 0 ? tp[b] + ts[b] - l - l * c : tp[b] + ts[b] - l + l * c) :\n\t\t\t\t\t\t\t(tp[b] + ts[b] - l + l * c >= 0 ? tp[b] + ts[b] - l + l * c : tp[b] + ts[b] - l - l * c)\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\tvar x = pp[a];\n\t\t\t\tvar y = pp[b];\n\t\t\t\tvar positionValue = thisObj.fixed ? 'fixed' : 'absolute';\n\t\t\t\tvar contractShadow =\n\t\t\t\t\t(pp[0] + ps[0] > tp[0] || pp[0] < tp[0] + ts[0]) &&\n\t\t\t\t\t(pp[1] + ps[1] < tp[1] + ts[1]);\n\n\t\t\t\tjsc._drawPosition(thisObj, x, y, positionValue, contractShadow);\n\t\t\t},\n\n\n\t\t\t_drawPosition: function (thisObj: any, x: any, y: any, positionValue: any, contractShadow: any)\n\t\t\t{\n\t\t\t\tvar vShadow = contractShadow ? 0 : thisObj.shadowBlur; // px\n\n\t\t\t\tjsc.picker.wrap.style.position = positionValue;\n\t\t\t\tjsc.picker.wrap.style.left = x + 'px';\n\t\t\t\tjsc.picker.wrap.style.top = y + 'px';\n\n\t\t\t\tjsc.setBoxShadow(\n\t\t\t\t\tjsc.picker.boxS,\n\t\t\t\t\tthisObj.shadow ?\n\t\t\t\t\t\tnew jsc.BoxShadow(0, vShadow, thisObj.shadowBlur, 0, thisObj.shadowColor) :\n\t\t\t\t\t\tnull);\n\t\t\t},\n\n\n\t\t\tgetPickerDims: function (thisObj: any)\n\t\t\t{\n\t\t\t\tvar w = 2 * thisObj.controlBorderWidth + thisObj.width;\n\t\t\t\tvar h = 2 * thisObj.controlBorderWidth + thisObj.height;\n\n\t\t\t\tvar sliderSpace = 2 * thisObj.controlBorderWidth + 2 * jsc.getControlPadding(thisObj) + thisObj.sliderSize;\n\n\t\t\t\tif (jsc.getSliderChannel(thisObj))\n\t\t\t\t{\n\t\t\t\t\tw += sliderSpace;\n\t\t\t\t}\n\t\t\t\tif (thisObj.hasAlphaChannel())\n\t\t\t\t{\n\t\t\t\t\tw += sliderSpace;\n\t\t\t\t}\n\n\t\t\t\tvar pal = jsc.getPaletteDims(thisObj, w);\n\n\t\t\t\tif (pal.height)\n\t\t\t\t{\n\t\t\t\t\th += pal.height + thisObj.padding;\n\t\t\t\t}\n\t\t\t\tif (thisObj.closeButton)\n\t\t\t\t{\n\t\t\t\t\th += 2 * thisObj.controlBorderWidth + thisObj.padding + thisObj.buttonHeight;\n\t\t\t\t}\n\n\t\t\t\tvar pW = w + (2 * thisObj.padding);\n\t\t\t\tvar pH = h + (2 * thisObj.padding);\n\n\t\t\t\treturn {\n\t\t\t\t\tcontentW: w,\n\t\t\t\t\tcontentH: h,\n\t\t\t\t\tpaddedW: pW,\n\t\t\t\t\tpaddedH: pH,\n\t\t\t\t\tborderW: pW + (2 * thisObj.borderWidth),\n\t\t\t\t\tborderH: pH + (2 * thisObj.borderWidth),\n\t\t\t\t\tpalette: pal,\n\t\t\t\t};\n\t\t\t},\n\n\n\t\t\tgetPaletteDims: function (thisObj: any, width: any)\n\t\t\t{\n\t\t\t\tvar cols = 0, rows = 0, cellW = 0, cellH = 0, height = 0;\n\t\t\t\tvar sampleCount = thisObj._palette ? thisObj._palette.length : 0;\n\n\t\t\t\tif (sampleCount)\n\t\t\t\t{\n\t\t\t\t\tcols = thisObj.paletteCols;\n\t\t\t\t\trows = cols > 0 ? Math.ceil(sampleCount / cols) : 0;\n\n\t\t\t\t\t// color sample's dimensions (includes border)\n\t\t\t\t\tcellW = Math.max(1, Math.floor((width - ((cols - 1) * thisObj.paletteSpacing)) / cols));\n\t\t\t\t\tcellH = thisObj.paletteHeight ? Math.min(thisObj.paletteHeight, cellW) : cellW;\n\t\t\t\t}\n\n\t\t\t\tif (rows)\n\t\t\t\t{\n\t\t\t\t\theight =\n\t\t\t\t\t\trows * cellH +\n\t\t\t\t\t\t(rows - 1) * thisObj.paletteSpacing;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tcols: cols,\n\t\t\t\t\trows: rows,\n\t\t\t\t\tcellW: cellW,\n\t\t\t\t\tcellH: cellH,\n\t\t\t\t\twidth: width,\n\t\t\t\t\theight: height,\n\t\t\t\t};\n\t\t\t},\n\n\n\t\t\tgetControlPadding: function (thisObj: any)\n\t\t\t{\n\t\t\t\treturn Math.max(\n\t\t\t\t\tthisObj.padding / 2,\n\t\t\t\t\t(2 * thisObj.pointerBorderWidth + thisObj.pointerThickness) - thisObj.controlBorderWidth\n\t\t\t\t);\n\t\t\t},\n\n\n\t\t\tgetPadYChannel: function (thisObj: any)\n\t\t\t{\n\t\t\t\tswitch (thisObj.mode.charAt(1).toLowerCase())\n\t\t\t\t{\n\t\t\t\t\tcase 'v': return 'v';\n\t\t\t\t}\n\t\t\t\treturn 's';\n\t\t\t},\n\n\n\t\t\tgetSliderChannel: function (thisObj: any)\n\t\t\t{\n\t\t\t\tif (thisObj.mode.length > 2)\n\t\t\t\t{\n\t\t\t\t\tswitch (thisObj.mode.charAt(2).toLowerCase())\n\t\t\t\t\t{\n\t\t\t\t\t\tcase 's': return 's';\n\t\t\t\t\t\tcase 'v': return 'v';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t},\n\n\n\t\t\t// calls function specified in picker's property\n\t\t\ttriggerCallback: function (thisObj: any, prop: any)\n\t\t\t{\n\t\t\t\tif (!thisObj[prop])\n\t\t\t\t{\n\t\t\t\t\treturn; // callback func not specified\n\t\t\t\t}\n\t\t\t\tvar callback = null;\n\n\t\t\t\tif (typeof thisObj[prop] === 'string')\n\t\t\t\t{\n\t\t\t\t\t// string with code\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tcallback = new Function(thisObj[prop]);\n\t\t\t\t\t} catch (e)\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t}\n\t\t\t\t} else\n\t\t\t\t{\n\t\t\t\t\t// function\n\t\t\t\t\tcallback = thisObj[prop];\n\t\t\t\t}\n\n\t\t\t\tif (callback)\n\t\t\t\t{\n\t\t\t\t\tcallback.call(thisObj);\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t// Triggers a color change related event(s) on all picker instances.\n\t\t\t// It is possible to specify multiple events separated with a space.\n\t\t\ttriggerGlobal: function (eventNames: any)\n\t\t\t{\n\t\t\t\tvar inst = jsc.getInstances();\n\t\t\t\tfor (var i = 0; i < inst.length; i += 1)\n\t\t\t\t{\n\t\t\t\t\tinst[i].trigger(eventNames);\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t_pointerMoveEvent: {\n\t\t\t\tmouse: 'mousemove',\n\t\t\t\ttouch: 'touchmove'\n\t\t\t},\n\t\t\t_pointerEndEvent: {\n\t\t\t\tmouse: 'mouseup',\n\t\t\t\ttouch: 'touchend'\n\t\t\t},\n\n\n\t\t\t_pointerOrigin: null,\n\t\t\t_capturedTarget: null,\n\n\n\t\t\tonDocumentKeyUp: function (e: any)\n\t\t\t{\n\t\t\t\tif (['Tab', 'Escape'].indexOf(jsc.eventKey(e)) !== -1)\n\t\t\t\t{\n\t\t\t\t\tif (jsc.picker && jsc.picker.owner)\n\t\t\t\t\t{\n\t\t\t\t\t\tjsc.picker.owner.tryHide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\tonWindowResize: function (e: any)\n\t\t\t{\n\t\t\t\tjsc.redrawPosition();\n\t\t\t},\n\n\n\t\t\tonWindowScroll: function (e: any)\n\t\t\t{\n\t\t\t\tjsc.redrawPosition();\n\t\t\t},\n\n\n\t\t\tonParentScroll: function (e: any)\n\t\t\t{\n\t\t\t\t// hide the picker when one of the parent elements is scrolled\n\t\t\t\tif (jsc.picker && jsc.picker.owner)\n\t\t\t\t{\n\t\t\t\t\tjsc.picker.owner.tryHide();\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\tonDocumentMouseDown: function (e: any)\n\t\t\t{\n\t\t\t\tvar target = e.target || e.srcElement;\n\n\t\t\t\tif (target.jscolor && target.jscolor instanceof jsc.pub)\n\t\t\t\t{ // clicked targetElement -> show picker\n\t\t\t\t\tif (target.jscolor.showOnClick && !target.disabled)\n\t\t\t\t\t{\n\t\t\t\t\t\ttarget.jscolor.show();\n\t\t\t\t\t}\n\t\t\t\t} else if (jsc.getData(target, 'gui'))\n\t\t\t\t{ // clicked jscolor's GUI element\n\t\t\t\t\tvar control = jsc.getData(target, 'control');\n\t\t\t\t\tif (control)\n\t\t\t\t\t{\n\t\t\t\t\t\t// jscolor's control\n\t\t\t\t\t\tjsc.onControlPointerStart(e, target, jsc.getData(target, 'control'), 'mouse');\n\t\t\t\t\t}\n\t\t\t\t} else\n\t\t\t\t{\n\t\t\t\t\t// mouse is outside the picker's controls -> hide the color picker!\n\t\t\t\t\tif (jsc.picker && jsc.picker.owner)\n\t\t\t\t\t{\n\t\t\t\t\t\tjsc.picker.owner.tryHide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\tonPickerTouchStart: function (e: any)\n\t\t\t{\n\t\t\t\tvar target = e.target || e.srcElement;\n\n\t\t\t\tif (jsc.getData(target, 'control'))\n\t\t\t\t{\n\t\t\t\t\tjsc.onControlPointerStart(e, target, jsc.getData(target, 'control'), 'touch');\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\tonControlPointerStart: function (e: any, target: any, controlName: any, pointerType: any)\n\t\t\t{\n\t\t\t\tvar thisObj = jsc.getData(target, 'instance');\n\n\t\t\t\tjsc.preventDefault(e);\n\t\t\t\tjsc.captureTarget(target);\n\n\t\t\t\tvar registerDragEvents = function (doc: any, offset: any)\n\t\t\t\t{\n\t\t\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerMoveEvent[pointerType],\n\t\t\t\t\t\tjsc.onDocumentPointerMove(e, target, controlName, pointerType, offset));\n\t\t\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerEndEvent[pointerType],\n\t\t\t\t\t\tjsc.onDocumentPointerEnd(e, target, controlName, pointerType));\n\t\t\t\t};\n\n\t\t\t\tregisterDragEvents(window.document, [0, 0]);\n\n\t\t\t\tif (window.parent && window.frameElement)\n\t\t\t\t{\n\t\t\t\t\tvar rect = window.frameElement.getBoundingClientRect();\n\t\t\t\t\tvar ofs = [-rect.left, -rect.top];\n\t\t\t\t\tregisterDragEvents(window.parent.window.document, ofs);\n\t\t\t\t}\n\n\t\t\t\tvar abs = jsc.getAbsPointerPos(e);\n\t\t\t\tvar rel = jsc.getRelPointerPos(e);\n\t\t\t\tjsc._pointerOrigin = {\n\t\t\t\t\tx: abs.x - rel.x,\n\t\t\t\t\ty: abs.y - rel.y\n\t\t\t\t};\n\n\t\t\t\tswitch (controlName)\n\t\t\t\t{\n\t\t\t\t\tcase 'pad':\n\t\t\t\t\t\t// if the value slider is at the bottom, move it up\n\t\t\t\t\t\tif (jsc.getSliderChannel(thisObj) === 'v' && thisObj.channels.v === 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthisObj.fromHSVA(null, null, 100, null);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tjsc.setPad(thisObj, e, 0, 0);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'sld':\n\t\t\t\t\t\tjsc.setSld(thisObj, e, 0);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'asld':\n\t\t\t\t\t\tjsc.setASld(thisObj, e, 0);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthisObj.trigger('input');\n\t\t\t},\n\n\n\t\t\tonDocumentPointerMove: function (e: any, target: any, controlName: any, pointerType: any, offset: any)\n\t\t\t{\n\t\t\t\treturn function (e: any)\n\t\t\t\t{\n\t\t\t\t\tvar thisObj = jsc.getData(target, 'instance');\n\t\t\t\t\tswitch (controlName)\n\t\t\t\t\t{\n\t\t\t\t\t\tcase 'pad':\n\t\t\t\t\t\t\tjsc.setPad(thisObj, e, offset[0], offset[1]);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'sld':\n\t\t\t\t\t\t\tjsc.setSld(thisObj, e, offset[1]);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'asld':\n\t\t\t\t\t\t\tjsc.setASld(thisObj, e, offset[1]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tthisObj.trigger('input');\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\tonDocumentPointerEnd: function (e: any, target: any, controlName: any, pointerType: any)\n\t\t\t{\n\t\t\t\treturn function (e: any)\n\t\t\t\t{\n\t\t\t\t\tvar thisObj = jsc.getData(target, 'instance');\n\t\t\t\t\tjsc.detachGroupEvents('drag');\n\t\t\t\t\tjsc.releaseTarget();\n\n\t\t\t\t\t// Always trigger changes AFTER detaching outstanding mouse handlers,\n\t\t\t\t\t// in case some color change that occured in user-defined onChange/onInput handler\n\t\t\t\t\t// intruded into current mouse events\n\t\t\t\t\tthisObj.trigger('input');\n\t\t\t\t\tthisObj.trigger('change');\n\t\t\t\t};\n\t\t\t},\n\n\n\t\t\tonPaletteSampleClick: function (e: any)\n\t\t\t{\n\t\t\t\tvar target = e.currentTarget;\n\t\t\t\tvar thisObj = jsc.getData(target, 'instance');\n\t\t\t\tvar color = jsc.getData(target, 'color');\n\n\t\t\t\t// when format is flexible, use the original format of this color sample\n\t\t\t\tif (thisObj.format.toLowerCase() === 'any')\n\t\t\t\t{\n\t\t\t\t\tthisObj._setFormat(color.format); // adapt format\n\t\t\t\t\tif (!jsc.isAlphaFormat(thisObj.getFormat()))\n\t\t\t\t\t{\n\t\t\t\t\t\tcolor.rgba[3] = 1.0; // when switching to a format that doesn't support alpha, set full opacity\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if this color doesn't specify alpha, use alpha of 1.0 (if applicable)\n\t\t\t\tif (color.rgba[3] === null)\n\t\t\t\t{\n\t\t\t\t\tif (thisObj.paletteSetsAlpha === true || (thisObj.paletteSetsAlpha === 'auto' && thisObj._paletteHasTransparency))\n\t\t\t\t\t{\n\t\t\t\t\t\tcolor.rgba[3] = 1.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthisObj.fromRGBA.apply(thisObj, color.rgba);\n\n\t\t\t\tthisObj.trigger('input');\n\t\t\t\tthisObj.trigger('change');\n\n\t\t\t\tif (thisObj.hideOnPaletteClick)\n\t\t\t\t{\n\t\t\t\t\tthisObj.hide();\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\tsetPad: function (thisObj: any, e: any, ofsX: any, ofsY: any)\n\t\t\t{\n\t\t\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\n\t\t\t\tvar x = ofsX + pointerAbs.x - jsc._pointerOrigin.x - thisObj.padding - thisObj.controlBorderWidth;\n\t\t\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.controlBorderWidth;\n\n\t\t\t\tvar xVal = x * (360 / (thisObj.width - 1));\n\t\t\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\n\n\t\t\t\tswitch (jsc.getPadYChannel(thisObj))\n\t\t\t\t{\n\t\t\t\t\tcase 's': thisObj.fromHSVA(xVal, yVal, null, null); break;\n\t\t\t\t\tcase 'v': thisObj.fromHSVA(xVal, null, yVal, null); break;\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\tsetSld: function (thisObj: any, e: any, ofsY: any)\n\t\t\t{\n\t\t\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\n\t\t\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.controlBorderWidth;\n\t\t\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\n\n\t\t\t\tswitch (jsc.getSliderChannel(thisObj))\n\t\t\t\t{\n\t\t\t\t\tcase 's': thisObj.fromHSVA(null, yVal, null, null); break;\n\t\t\t\t\tcase 'v': thisObj.fromHSVA(null, null, yVal, null); break;\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\tsetASld: function (thisObj: any, e: any, ofsY: any)\n\t\t\t{\n\t\t\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\n\t\t\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.controlBorderWidth;\n\t\t\t\tvar yVal = 1.0 - (y * (1.0 / (thisObj.height - 1)));\n\n\t\t\t\tif (yVal < 1.0)\n\t\t\t\t{\n\t\t\t\t\t// if format is flexible and the current format doesn't support alpha, switch to a suitable one\n\t\t\t\t\tvar fmt = thisObj.getFormat();\n\t\t\t\t\tif (thisObj.format.toLowerCase() === 'any' && !jsc.isAlphaFormat(fmt))\n\t\t\t\t\t{\n\t\t\t\t\t\tthisObj._setFormat(fmt === 'hex' ? 'hexa' : 'rgba');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthisObj.fromHSVA(null, null, null, yVal);\n\t\t\t},\n\n\n\t\t\tcreatePadCanvas: function ()\n\t\t\t{\n\n\t\t\t\tvar ret: any = {\n\t\t\t\t\telm: null,\n\t\t\t\t\tdraw: null\n\t\t\t\t};\n\n\t\t\t\tvar canvas = jsc.createEl('canvas');\n\t\t\t\tvar ctx = canvas.getContext('2d');\n\n\t\t\t\tvar drawFunc = function (width: any, height: any, type: any)\n\t\t\t\t{\n\t\t\t\t\tcanvas.width = width;\n\t\t\t\t\tcanvas.height = height;\n\n\t\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\t\t\t\tvar hGrad = ctx.createLinearGradient(0, 0, canvas.width, 0);\n\t\t\t\t\thGrad.addColorStop(0 / 6, '#F00');\n\t\t\t\t\thGrad.addColorStop(1 / 6, '#FF0');\n\t\t\t\t\thGrad.addColorStop(2 / 6, '#0F0');\n\t\t\t\t\thGrad.addColorStop(3 / 6, '#0FF');\n\t\t\t\t\thGrad.addColorStop(4 / 6, '#00F');\n\t\t\t\t\thGrad.addColorStop(5 / 6, '#F0F');\n\t\t\t\t\thGrad.addColorStop(6 / 6, '#F00');\n\n\t\t\t\t\tctx.fillStyle = hGrad;\n\t\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\n\n\t\t\t\t\tvar vGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);\n\t\t\t\t\tswitch (type.toLowerCase())\n\t\t\t\t\t{\n\t\t\t\t\t\tcase 's':\n\t\t\t\t\t\t\tvGrad.addColorStop(0, 'rgba(255,255,255,0)');\n\t\t\t\t\t\t\tvGrad.addColorStop(1, 'rgba(255,255,255,1)');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'v':\n\t\t\t\t\t\t\tvGrad.addColorStop(0, 'rgba(0,0,0,0)');\n\t\t\t\t\t\t\tvGrad.addColorStop(1, 'rgba(0,0,0,1)');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tctx.fillStyle = vGrad;\n\t\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\n\t\t\t\t};\n\n\t\t\t\tret.elm = canvas;\n\t\t\t\tret.draw = drawFunc;\n\n\t\t\t\treturn ret;\n\t\t\t},\n\n\n\t\t\tcreateSliderGradient: function ()\n\t\t\t{\n\n\t\t\t\tvar ret: any = {\n\t\t\t\t\telm: null,\n\t\t\t\t\tdraw: null\n\t\t\t\t};\n\n\t\t\t\tvar canvas = jsc.createEl('canvas');\n\t\t\t\tvar ctx = canvas.getContext('2d');\n\n\t\t\t\tvar drawFunc = function (width: any, height: any, color1: any, color2: any)\n\t\t\t\t{\n\t\t\t\t\tcanvas.width = width;\n\t\t\t\t\tcanvas.height = height;\n\n\t\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\t\t\t\tvar grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\n\t\t\t\t\tgrad.addColorStop(0, color1);\n\t\t\t\t\tgrad.addColorStop(1, color2);\n\n\t\t\t\t\tctx.fillStyle = grad;\n\t\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\n\t\t\t\t};\n\n\t\t\t\tret.elm = canvas;\n\t\t\t\tret.draw = drawFunc;\n\n\t\t\t\treturn ret;\n\t\t\t},\n\n\n\t\t\tcreateASliderGradient: function ()\n\t\t\t{\n\n\t\t\t\tvar ret: any = {\n\t\t\t\t\telm: null,\n\t\t\t\t\tdraw: null\n\t\t\t\t};\n\n\t\t\t\tvar canvas = jsc.createEl('canvas');\n\t\t\t\tvar ctx = canvas.getContext('2d');\n\n\t\t\t\tvar drawFunc = function (width: any, height: any, color: any)\n\t\t\t\t{\n\t\t\t\t\tcanvas.width = width;\n\t\t\t\t\tcanvas.height = height;\n\n\t\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\t\t\t\tvar sqSize = canvas.width / 2;\n\t\t\t\t\tvar sqColor1 = jsc.pub.chessboardColor1;\n\t\t\t\t\tvar sqColor2 = jsc.pub.chessboardColor2;\n\n\t\t\t\t\t// dark gray background\n\t\t\t\t\tctx.fillStyle = sqColor1;\n\t\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\n\n\t\t\t\t\tif (sqSize > 0)\n\t\t\t\t\t{ // to avoid infinite loop\n\t\t\t\t\t\tfor (var y = 0; y < canvas.height; y += sqSize * 2)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// light gray squares\n\t\t\t\t\t\t\tctx.fillStyle = sqColor2;\n\t\t\t\t\t\t\tctx.fillRect(0, y, sqSize, sqSize);\n\t\t\t\t\t\t\tctx.fillRect(sqSize, y + sqSize, sqSize, sqSize);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\n\t\t\t\t\tgrad.addColorStop(0, color);\n\t\t\t\t\tgrad.addColorStop(1, 'rgba(0,0,0,0)');\n\n\t\t\t\t\tctx.fillStyle = grad;\n\t\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\n\t\t\t\t};\n\n\t\t\t\tret.elm = canvas;\n\t\t\t\tret.draw = drawFunc;\n\n\t\t\t\treturn ret;\n\t\t\t},\n\n\n\t\t\tBoxShadow: (function ()\n\t\t\t{\n\t\t\t\tvar BoxShadow: any = function (hShadow: any, vShadow: any, blur: any, spread: any, color: any, inset: any)\n\t\t\t\t{\n\t\t\t\t\thShadow = hShadow;\n\t\t\t\t\tvShadow = vShadow;\n\t\t\t\t\tblur = blur;\n\t\t\t\t\tspread = spread;\n\t\t\t\t\tcolor = color;\n\t\t\t\t\tinset = !!inset;\n\t\t\t\t};\n\n\t\t\t\tBoxShadow.prototype.toString = function ()\n\t\t\t\t{\n\t\t\t\t\tvar vals = [\n\t\t\t\t\t\tMath.round(this.hShadow) + 'px',\n\t\t\t\t\t\tMath.round(this.vShadow) + 'px',\n\t\t\t\t\t\tMath.round(this.blur) + 'px',\n\t\t\t\t\t\tMath.round(this.spread) + 'px',\n\t\t\t\t\t\tthis.color\n\t\t\t\t\t];\n\t\t\t\t\tif (this.inset)\n\t\t\t\t\t{\n\t\t\t\t\t\tvals.push('inset');\n\t\t\t\t\t}\n\t\t\t\t\treturn vals.join(' ');\n\t\t\t\t};\n\n\t\t\t\treturn BoxShadow;\n\t\t\t})(),\n\n\n\t\t\tflags: {\n\t\t\t\tleaveValue: 1 << 0,\n\t\t\t\tleaveAlpha: 1 << 1,\n\t\t\t\tleavePreview: 1 << 2,\n\t\t\t},\n\n\n\t\t\tenumOpts: {\n\t\t\t\tformat: ['auto', 'any', 'hex', 'hexa', 'rgb', 'rgba'],\n\t\t\t\tpreviewPosition: ['left', 'right'],\n\t\t\t\tmode: ['hsv', 'hvs', 'hs', 'hv'],\n\t\t\t\tposition: ['left', 'right', 'top', 'bottom'],\n\t\t\t\talphaChannel: ['auto', true, false],\n\t\t\t\tpaletteSetsAlpha: ['auto', true, false],\n\t\t\t},\n\n\n\t\t\tdeprecatedOpts: {\n\t\t\t\t// <old_option>: <new_option>  (<new_option> can be null)\n\t\t\t\t'styleElement': 'previewElement',\n\t\t\t\t'onFineChange': 'onInput',\n\t\t\t\t'overwriteImportant': 'forceStyle',\n\t\t\t\t'closable': 'closeButton',\n\t\t\t\t'insetWidth': 'controlBorderWidth',\n\t\t\t\t'insetColor': 'controlBorderColor',\n\t\t\t\t'refine': null,\n\t\t\t},\n\n\n\t\t\tdocsRef: ' ' + 'See https://jscolor.com/docs/',\n\n\n\t\t\t//\n\t\t\t// Usage:\n\t\t\t// var myPicker = new JSColor(<targetElement> [, <options>])\n\t\t\t//\n\t\t\t// (constructor is accessible via both 'jscolor' and 'JSColor' name)\n\t\t\t//\n\n\t\t\tpub: function (targetElement: any, opts: any)\n\t\t\t{\n\n\t\t\t\tvar THIS = this;\n\n\t\t\t\tif (!opts)\n\t\t\t\t{\n\t\t\t\t\topts = {};\n\t\t\t\t}\n\n\t\t\t\tthis.channels = {\n\t\t\t\t\tr: 255, // red [0-255]\n\t\t\t\t\tg: 255, // green [0-255]\n\t\t\t\t\tb: 255, // blue [0-255]\n\t\t\t\t\th: 0, // hue [0-360]\n\t\t\t\t\ts: 0, // saturation [0-100]\n\t\t\t\t\tv: 100, // value (brightness) [0-100]\n\t\t\t\t\ta: 1.0, // alpha (opacity) [0.0 - 1.0]\n\t\t\t\t};\n\n\t\t\t\t// General options\n\t\t\t\t//\n\t\t\t\tthis.format = 'auto'; // 'auto' | 'any' | 'hex' | 'hexa' | 'rgb' | 'rgba' - Format of the input/output value\n\t\t\t\tthis.value = undefined; // INITIAL color value in any supported format. To change it later, use method fromString(), fromHSVA(), fromRGBA() or channel()\n\t\t\t\tthis.alpha = undefined; // INITIAL alpha value. To change it later, call method channel('A', <value>)\n\t\t\t\tthis.random = false; // whether to randomize the initial color. Either true | false, or an array of ranges: [minV, maxV, minS, maxS, minH, maxH, minA, maxA]\n\t\t\t\tthis.onChange = undefined; // called when color changes. Value can be either a function or a string with JS code.\n\t\t\t\tthis.onInput = undefined; // called repeatedly as the color is being changed, e.g. while dragging a slider. Value can be either a function or a string with JS code.\n\t\t\t\tthis.valueElement = undefined; // element that will be used to display and input the color value\n\t\t\t\tthis.alphaElement = undefined; // element that will be used to display and input the alpha (opacity) value\n\t\t\t\tthis.previewElement = undefined; // element that will preview the picked color using CSS background\n\t\t\t\tthis.previewPosition = 'left'; // 'left' | 'right' - position of the color preview in previewElement\n\t\t\t\tthis.previewSize = 32; // (px) width of the color preview displayed in previewElement\n\t\t\t\tthis.previewPadding = 8; // (px) space between color preview and content of the previewElement\n\t\t\t\tthis.required = true; // whether the associated text input must always contain a color value. If false, the input can be left empty.\n\t\t\t\tthis.hash = true; // whether to prefix the HEX color code with # symbol (only applicable for HEX format)\n\t\t\t\tthis.uppercase = true; // whether to show the HEX color code in upper case (only applicable for HEX format)\n\t\t\t\tthis.forceStyle = true; // whether to overwrite CSS style of the previewElement using !important flag\n\n\t\t\t\t// Color Picker options\n\t\t\t\t//\n\t\t\t\tthis.width = 181; // width of the color spectrum (in px)\n\t\t\t\tthis.height = 101; // height of the color spectrum (in px)\n\t\t\t\tthis.mode = 'HSV'; // 'HSV' | 'HVS' | 'HS' | 'HV' - layout of the color picker controls\n\t\t\t\tthis.alphaChannel = 'auto'; // 'auto' | true | false - if alpha channel is enabled, the alpha slider will be visible. If 'auto', it will be determined according to color format\n\t\t\t\tthis.position = 'bottom'; // 'left' | 'right' | 'top' | 'bottom' - position relative to the target element\n\t\t\t\tthis.smartPosition = true; // automatically change picker position when there is not enough space for it\n\t\t\t\tthis.showOnClick = true; // whether to show the picker when user clicks its target element\n\t\t\t\tthis.hideOnLeave = true; // whether to automatically hide the picker when user leaves its target element (e.g. upon clicking the document)\n\t\t\t\tthis.palette = []; // colors to be displayed in the palette, specified as an array or a string of space separated color values (in any supported format)\n\t\t\t\tthis.paletteCols = 10; // number of columns in the palette\n\t\t\t\tthis.paletteSetsAlpha = 'auto'; // 'auto' | true | false - if true, palette colors that don't specify alpha will set alpha to 1.0\n\t\t\t\tthis.paletteHeight = 16; // maximum height (px) of a row in the palette\n\t\t\t\tthis.paletteSpacing = 4; // distance (px) between color samples in the palette\n\t\t\t\tthis.hideOnPaletteClick = false; // when set to true, clicking the palette will also hide the color picker\n\t\t\t\tthis.sliderSize = 16; // px\n\t\t\t\tthis.crossSize = 8; // px\n\t\t\t\tthis.closeButton = false; // whether to display the Close button\n\t\t\t\tthis.closeText = 'Close';\n\t\t\t\tthis.buttonColor = 'rgba(0,0,0,1)'; // CSS color\n\t\t\t\tthis.buttonHeight = 18; // px\n\t\t\t\tthis.padding = 12; // px\n\t\t\t\tthis.backgroundColor = 'rgba(255,255,255,1)'; // CSS color\n\t\t\t\tthis.borderWidth = 1; // px\n\t\t\t\tthis.borderColor = 'rgba(187,187,187,1)'; // CSS color\n\t\t\t\tthis.borderRadius = 8; // px\n\t\t\t\tthis.controlBorderWidth = 1; // px\n\t\t\t\tthis.controlBorderColor = 'rgba(187,187,187,1)'; // CSS color\n\t\t\t\tthis.shadow = true; // whether to display a shadow\n\t\t\t\tthis.shadowBlur = 15; // px\n\t\t\t\tthis.shadowColor = 'rgba(0,0,0,0.2)'; // CSS color\n\t\t\t\tthis.pointerColor = 'rgba(76,76,76,1)'; // CSS color\n\t\t\t\tthis.pointerBorderWidth = 1; // px\n\t\t\t\tthis.pointerBorderColor = 'rgba(255,255,255,1)'; // CSS color\n\t\t\t\tthis.pointerThickness = 2; // px\n\t\t\t\tthis.zIndex = 5000;\n\t\t\t\tthis.container = undefined; // where to append the color picker (BODY element by default)\n\n\t\t\t\t// Experimental\n\t\t\t\t//\n\t\t\t\tthis.minS = 0; // min allowed saturation (0 - 100)\n\t\t\t\tthis.maxS = 100; // max allowed saturation (0 - 100)\n\t\t\t\tthis.minV = 0; // min allowed value (brightness) (0 - 100)\n\t\t\t\tthis.maxV = 100; // max allowed value (brightness) (0 - 100)\n\t\t\t\tthis.minA = 0.0; // min allowed alpha (opacity) (0.0 - 1.0)\n\t\t\t\tthis.maxA = 1.0; // max allowed alpha (opacity) (0.0 - 1.0)\n\n\n\t\t\t\t// Getter: option(name)\n\t\t\t\t// Setter: option(name, value)\n\t\t\t\t//         option({name:value, ...})\n\t\t\t\t//\n\t\t\t\tthis.option = function ()\n\t\t\t\t{\n\t\t\t\t\tif (!arguments.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tthrow new Error('No option specified');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (arguments.length === 1 && typeof arguments[0] === 'string')\n\t\t\t\t\t{\n\t\t\t\t\t\t// getting a single option\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn getOption(arguments[0]);\n\t\t\t\t\t\t} catch (e)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconsole.warn(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t} else if (arguments.length >= 2 && typeof arguments[0] === 'string')\n\t\t\t\t\t{\n\t\t\t\t\t\t// setting a single option\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!setOption(arguments[0], arguments[1]))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconsole.warn(e);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.redraw(); // immediately redraws the picker, if it's displayed\n\t\t\t\t\t\tthis.exposeColor(); // in case some preview-related or format-related option was changed\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t} else if (arguments.length === 1 && typeof arguments[0] === 'object')\n\t\t\t\t\t{\n\t\t\t\t\t\t// setting multiple options\n\t\t\t\t\t\tvar opts = arguments[0];\n\t\t\t\t\t\tvar success = true;\n\t\t\t\t\t\tfor (var opt in opts)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (opts.hasOwnProperty(opt))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (!setOption(opt, opts[opt]))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tsuccess = false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} catch (e)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconsole.warn(e);\n\t\t\t\t\t\t\t\t\tsuccess = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.redraw(); // immediately redraws the picker, if it's displayed\n\t\t\t\t\t\tthis.exposeColor(); // in case some preview-related or format-related option was changed\n\t\t\t\t\t\treturn success;\n\t\t\t\t\t}\n\n\t\t\t\t\tthrow new Error('Invalid arguments');\n\t\t\t\t}\n\n\n\t\t\t\t// Getter: channel(name)\n\t\t\t\t// Setter: channel(name, value)\n\t\t\t\t//\n\t\t\t\tthis.channel = function (name: any, value: any)\n\t\t\t\t{\n\t\t\t\t\tif (typeof name !== 'string')\n\t\t\t\t\t{\n\t\t\t\t\t\tthrow new Error('Invalid value for channel name: ' + name);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (value === undefined)\n\t\t\t\t\t{\n\t\t\t\t\t\t// getting channel value\n\t\t\t\t\t\tif (!this.channels.hasOwnProperty(name.toLowerCase()))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconsole.warn('Getting unknown channel: ' + name);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn this.channels[name.toLowerCase()];\n\n\t\t\t\t\t} else\n\t\t\t\t\t{\n\t\t\t\t\t\t// setting channel value\n\t\t\t\t\t\tvar res = false;\n\t\t\t\t\t\tswitch (name.toLowerCase())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcase 'r': res = this.fromRGBA(value, null, null, null); break;\n\t\t\t\t\t\t\tcase 'g': res = this.fromRGBA(null, value, null, null); break;\n\t\t\t\t\t\t\tcase 'b': res = this.fromRGBA(null, null, value, null); break;\n\t\t\t\t\t\t\tcase 'h': res = this.fromHSVA(value, null, null, null); break;\n\t\t\t\t\t\t\tcase 's': res = this.fromHSVA(null, value, null, null); break;\n\t\t\t\t\t\t\tcase 'v': res = this.fromHSVA(null, null, value, null); break;\n\t\t\t\t\t\t\tcase 'a': res = this.fromHSVA(null, null, null, value); break;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tconsole.warn('Setting unknown channel: ' + name);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (res)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.redraw(); // immediately redraws the picker, if it's displayed\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\n\t\t\t\t// Triggers given input event(s) by:\n\t\t\t\t// - executing on<Event> callback specified as picker's option\n\t\t\t\t// - triggering standard DOM event listeners attached to the value element\n\t\t\t\t//\n\t\t\t\t// It is possible to specify multiple events separated with a space.\n\t\t\t\t//\n\t\t\t\tthis.trigger = function (eventNames: any)\n\t\t\t\t{\n\t\t\t\t\tvar evs = jsc.strList(eventNames);\n\t\t\t\t\tfor (var i = 0; i < evs.length; i += 1)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar ev = evs[i].toLowerCase();\n\n\t\t\t\t\t\t// trigger a callback\n\t\t\t\t\t\tvar callbackProp = null;\n\t\t\t\t\t\tswitch (ev)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcase 'input': callbackProp = 'onInput'; break;\n\t\t\t\t\t\t\tcase 'change': callbackProp = 'onChange'; break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (callbackProp)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tjsc.triggerCallback(this, callbackProp);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// trigger standard DOM event listeners on the value element\n\t\t\t\t\t\tjsc.triggerInputEvent(this.valueElement, ev, true, true);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\n\t\t\t\t// h: 0-360\n\t\t\t\t// s: 0-100\n\t\t\t\t// v: 0-100\n\t\t\t\t// a: 0.0-1.0\n\t\t\t\t//\n\t\t\t\tthis.fromHSVA = function (h: any, s: any, v: any, a: any, flags: any)\n\t\t\t\t{ // null = don't change\n\t\t\t\t\tif (h === undefined) { h = null; }\n\t\t\t\t\tif (s === undefined) { s = null; }\n\t\t\t\t\tif (v === undefined) { v = null; }\n\t\t\t\t\tif (a === undefined) { a = null; }\n\n\t\t\t\t\tif (h !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (isNaN(h)) { return false; }\n\t\t\t\t\t\tthis.channels.h = Math.max(0, Math.min(360, h));\n\t\t\t\t\t}\n\t\t\t\t\tif (s !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (isNaN(s)) { return false; }\n\t\t\t\t\t\tthis.channels.s = Math.max(0, Math.min(100, this.maxS, s), this.minS);\n\t\t\t\t\t}\n\t\t\t\t\tif (v !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (isNaN(v)) { return false; }\n\t\t\t\t\t\tthis.channels.v = Math.max(0, Math.min(100, this.maxV, v), this.minV);\n\t\t\t\t\t}\n\t\t\t\t\tif (a !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (isNaN(a)) { return false; }\n\t\t\t\t\t\tthis.channels.a = this.hasAlphaChannel() ?\n\t\t\t\t\t\t\tMath.max(0, Math.min(1, this.maxA, a), this.minA) :\n\t\t\t\t\t\t\t1.0; // if alpha channel is disabled, the color should stay 100% opaque\n\t\t\t\t\t}\n\n\t\t\t\t\tvar rgb = jsc.HSV_RGB(\n\t\t\t\t\t\tthis.channels.h,\n\t\t\t\t\t\tthis.channels.s,\n\t\t\t\t\t\tthis.channels.v\n\t\t\t\t\t);\n\t\t\t\t\tthis.channels.r = rgb[0];\n\t\t\t\t\tthis.channels.g = rgb[1];\n\t\t\t\t\tthis.channels.b = rgb[2];\n\n\t\t\t\t\tthis.exposeColor(flags);\n\t\t\t\t\treturn true;\n\t\t\t\t};\n\n\n\t\t\t\t// r: 0-255\n\t\t\t\t// g: 0-255\n\t\t\t\t// b: 0-255\n\t\t\t\t// a: 0.0-1.0\n\t\t\t\t//\n\t\t\t\tthis.fromRGBA = function (r: any, g: any, b: any, a: any, flags: any)\n\t\t\t\t{ // null = don't change\n\t\t\t\t\tif (r === undefined) { r = null; }\n\t\t\t\t\tif (g === undefined) { g = null; }\n\t\t\t\t\tif (b === undefined) { b = null; }\n\t\t\t\t\tif (a === undefined) { a = null; }\n\n\t\t\t\t\tif (r !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (isNaN(r)) { return false; }\n\t\t\t\t\t\tr = Math.max(0, Math.min(255, r));\n\t\t\t\t\t}\n\t\t\t\t\tif (g !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (isNaN(g)) { return false; }\n\t\t\t\t\t\tg = Math.max(0, Math.min(255, g));\n\t\t\t\t\t}\n\t\t\t\t\tif (b !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (isNaN(b)) { return false; }\n\t\t\t\t\t\tb = Math.max(0, Math.min(255, b));\n\t\t\t\t\t}\n\t\t\t\t\tif (a !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (isNaN(a)) { return false; }\n\t\t\t\t\t\tthis.channels.a = this.hasAlphaChannel() ?\n\t\t\t\t\t\t\tMath.max(0, Math.min(1, this.maxA, a), this.minA) :\n\t\t\t\t\t\t\t1.0; // if alpha channel is disabled, the color should stay 100% opaque\n\t\t\t\t\t}\n\n\t\t\t\t\tvar hsv = jsc.RGB_HSV(\n\t\t\t\t\t\tr === null ? this.channels.r : r,\n\t\t\t\t\t\tg === null ? this.channels.g : g,\n\t\t\t\t\t\tb === null ? this.channels.b : b\n\t\t\t\t\t);\n\t\t\t\t\tif (hsv[0] !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.channels.h = Math.max(0, Math.min(360, hsv[0]));\n\t\t\t\t\t}\n\t\t\t\t\tif (hsv[2] !== 0)\n\t\t\t\t\t{ // fully black color stays black through entire saturation range, so let's not change saturation\n\t\t\t\t\t\tthis.channels.s = Math.max(0, this.minS, Math.min(100, this.maxS, hsv[1]));\n\t\t\t\t\t}\n\t\t\t\t\tthis.channels.v = Math.max(0, this.minV, Math.min(100, this.maxV, hsv[2]));\n\n\t\t\t\t\t// update RGB according to final HSV, as some values might be trimmed\n\t\t\t\t\tvar rgb = jsc.HSV_RGB(this.channels.h, this.channels.s, this.channels.v);\n\t\t\t\t\tthis.channels.r = rgb[0];\n\t\t\t\t\tthis.channels.g = rgb[1];\n\t\t\t\t\tthis.channels.b = rgb[2];\n\n\t\t\t\t\tthis.exposeColor(flags);\n\t\t\t\t\treturn true;\n\t\t\t\t};\n\n\n\t\t\t\t// DEPRECATED. Use .fromHSVA() instead\n\t\t\t\t//\n\t\t\t\tthis.fromHSV = function (h: any, s: any, v: any, flags: any)\n\t\t\t\t{\n\t\t\t\t\tconsole.warn('fromHSV() method is DEPRECATED. Using fromHSVA() instead.' + jsc.docsRef);\n\t\t\t\t\treturn this.fromHSVA(h, s, v, null, flags);\n\t\t\t\t};\n\n\n\t\t\t\t// DEPRECATED. Use .fromRGBA() instead\n\t\t\t\t//\n\t\t\t\tthis.fromRGB = function (r: any, g: any, b: any, flags: any)\n\t\t\t\t{\n\t\t\t\t\tconsole.warn('fromRGB() method is DEPRECATED. Using fromRGBA() instead.' + jsc.docsRef);\n\t\t\t\t\treturn this.fromRGBA(r, g, b, null, flags);\n\t\t\t\t};\n\n\n\t\t\t\tthis.fromString = function (str: any, flags: any)\n\t\t\t\t{\n\t\t\t\t\tif (!this.required && str.trim() === '')\n\t\t\t\t\t{\n\t\t\t\t\t\t// setting empty string to an optional color input\n\t\t\t\t\t\tthis.setPreviewElementBg(null);\n\t\t\t\t\t\tthis.setValueElementValue('');\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar color = jsc.parseColorString(str);\n\t\t\t\t\tif (!color)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false; // could not parse\n\t\t\t\t\t}\n\t\t\t\t\tif (this.format.toLowerCase() === 'any')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._setFormat(color.format); // adapt format\n\t\t\t\t\t\tif (!jsc.isAlphaFormat(this.getFormat()))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcolor.rgba[3] = 1.0; // when switching to a format that doesn't support alpha, set full opacity\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.fromRGBA(\n\t\t\t\t\t\tcolor.rgba[0],\n\t\t\t\t\t\tcolor.rgba[1],\n\t\t\t\t\t\tcolor.rgba[2],\n\t\t\t\t\t\tcolor.rgba[3],\n\t\t\t\t\t\tflags\n\t\t\t\t\t);\n\t\t\t\t\treturn true;\n\t\t\t\t};\n\n\n\t\t\t\tthis.randomize = function (minV: any, maxV: any, minS: any, maxS: any, minH: any, maxH: any, minA: any, maxA: any)\n\t\t\t\t{\n\t\t\t\t\tif (minV === undefined) { minV = 0; }\n\t\t\t\t\tif (maxV === undefined) { maxV = 100; }\n\t\t\t\t\tif (minS === undefined) { minS = 0; }\n\t\t\t\t\tif (maxS === undefined) { maxS = 100; }\n\t\t\t\t\tif (minH === undefined) { minH = 0; }\n\t\t\t\t\tif (maxH === undefined) { maxH = 359; }\n\t\t\t\t\tif (minA === undefined) { minA = 1; }\n\t\t\t\t\tif (maxA === undefined) { maxA = 1; }\n\n\t\t\t\t\tthis.fromHSVA(\n\t\t\t\t\t\tminH + Math.floor(Math.random() * (maxH - minH + 1)),\n\t\t\t\t\t\tminS + Math.floor(Math.random() * (maxS - minS + 1)),\n\t\t\t\t\t\tminV + Math.floor(Math.random() * (maxV - minV + 1)),\n\t\t\t\t\t\t((100 * minA) + Math.floor(Math.random() * (100 * (maxA - minA) + 1))) / 100\n\t\t\t\t\t);\n\t\t\t\t};\n\n\n\t\t\t\tthis.toString = function (format: any)\n\t\t\t\t{\n\t\t\t\t\tif (format === undefined)\n\t\t\t\t\t{\n\t\t\t\t\t\tformat = this.getFormat(); // format not specified -> use the current format\n\t\t\t\t\t}\n\t\t\t\t\tswitch (format.toLowerCase())\n\t\t\t\t\t{\n\t\t\t\t\t\tcase 'hex': return this.toHEXString();\n\t\t\t\t\t\tcase 'hexa': return this.toHEXAString();\n\t\t\t\t\t\tcase 'rgb': return this.toRGBString();\n\t\t\t\t\t\tcase 'rgba': return this.toRGBAString();\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t};\n\n\n\t\t\t\tthis.toHEXString = function ()\n\t\t\t\t{\n\t\t\t\t\treturn jsc.hexColor(\n\t\t\t\t\t\tthis.channels.r,\n\t\t\t\t\t\tthis.channels.g,\n\t\t\t\t\t\tthis.channels.b\n\t\t\t\t\t);\n\t\t\t\t};\n\n\n\t\t\t\tthis.toHEXAString = function ()\n\t\t\t\t{\n\t\t\t\t\treturn jsc.hexaColor(\n\t\t\t\t\t\tthis.channels.r,\n\t\t\t\t\t\tthis.channels.g,\n\t\t\t\t\t\tthis.channels.b,\n\t\t\t\t\t\tthis.channels.a\n\t\t\t\t\t);\n\t\t\t\t};\n\n\n\t\t\t\tthis.toRGBString = function ()\n\t\t\t\t{\n\t\t\t\t\treturn jsc.rgbColor(\n\t\t\t\t\t\tthis.channels.r,\n\t\t\t\t\t\tthis.channels.g,\n\t\t\t\t\t\tthis.channels.b\n\t\t\t\t\t);\n\t\t\t\t};\n\n\n\t\t\t\tthis.toRGBAString = function ()\n\t\t\t\t{\n\t\t\t\t\treturn jsc.rgbaColor(\n\t\t\t\t\t\tthis.channels.r,\n\t\t\t\t\t\tthis.channels.g,\n\t\t\t\t\t\tthis.channels.b,\n\t\t\t\t\t\tthis.channels.a\n\t\t\t\t\t);\n\t\t\t\t};\n\n\n\t\t\t\tthis.toGrayscale = function ()\n\t\t\t\t{\n\t\t\t\t\treturn (\n\t\t\t\t\t\t0.213 * this.channels.r +\n\t\t\t\t\t\t0.715 * this.channels.g +\n\t\t\t\t\t\t0.072 * this.channels.b\n\t\t\t\t\t);\n\t\t\t\t};\n\n\n\t\t\t\tthis.toCanvas = function ()\n\t\t\t\t{\n\t\t\t\t\treturn jsc.genColorPreviewCanvas(this.toRGBAString()).canvas;\n\t\t\t\t};\n\n\n\t\t\t\tthis.toDataURL = function ()\n\t\t\t\t{\n\t\t\t\t\treturn this.toCanvas().toDataURL();\n\t\t\t\t};\n\n\n\t\t\t\tthis.toBackground = function ()\n\t\t\t\t{\n\t\t\t\t\treturn jsc.pub.background(this.toRGBAString());\n\t\t\t\t};\n\n\n\t\t\t\tthis.isLight = function ()\n\t\t\t\t{\n\t\t\t\t\treturn this.toGrayscale() > 255 / 2;\n\t\t\t\t};\n\n\n\t\t\t\tthis.hide = function ()\n\t\t\t\t{\n\t\t\t\t\tif (isPickerOwner())\n\t\t\t\t\t{\n\t\t\t\t\t\tdetachPicker();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\n\t\t\t\tthis.show = function ()\n\t\t\t\t{\n\t\t\t\t\tdrawPicker();\n\t\t\t\t};\n\n\n\t\t\t\tthis.redraw = function ()\n\t\t\t\t{\n\t\t\t\t\tif (isPickerOwner())\n\t\t\t\t\t{\n\t\t\t\t\t\tdrawPicker();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\n\t\t\t\tthis.getFormat = function ()\n\t\t\t\t{\n\t\t\t\t\treturn this._currentFormat;\n\t\t\t\t};\n\n\n\t\t\t\tthis._setFormat = function (format: any)\n\t\t\t\t{\n\t\t\t\t\tthis._currentFormat = format.toLowerCase();\n\t\t\t\t};\n\n\n\t\t\t\tthis.hasAlphaChannel = function ()\n\t\t\t\t{\n\t\t\t\t\tif (this.alphaChannel === 'auto')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tthis.format.toLowerCase() === 'any' || // format can change on the fly (e.g. from hex to rgba), so let's consider the alpha channel enabled\n\t\t\t\t\t\t\tjsc.isAlphaFormat(this.getFormat()) || // the current format supports alpha channel\n\t\t\t\t\t\t\tthis.alpha !== undefined || // initial alpha value is set, so we're working with alpha channel\n\t\t\t\t\t\t\tthis.alphaElement !== undefined // the alpha value is redirected, so we're working with alpha channel\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.alphaChannel; // the alpha channel is explicitly set\n\t\t\t\t};\n\n\n\t\t\t\tthis.processValueInput = function (str: any)\n\t\t\t\t{\n\t\t\t\t\tif (!this.fromString(str))\n\t\t\t\t\t{\n\t\t\t\t\t\t// could not parse the color value - let's just expose the current color\n\t\t\t\t\t\tthis.exposeColor();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\n\t\t\t\tthis.processAlphaInput = function (str: any)\n\t\t\t\t{\n\t\t\t\t\tif (!this.fromHSVA(null, null, null, parseFloat(str)))\n\t\t\t\t\t{\n\t\t\t\t\t\t// could not parse the alpha value - let's just expose the current color\n\t\t\t\t\t\tthis.exposeColor();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\n\t\t\t\tthis.exposeColor = function (flags: any)\n\t\t\t\t{\n\t\t\t\t\tvar colorStr = this.toString();\n\t\t\t\t\tvar fmt = this.getFormat();\n\n\t\t\t\t\t// reflect current color in data- attribute\n\t\t\t\t\tjsc.setDataAttr(this.targetElement, 'current-color', colorStr);\n\n\t\t\t\t\tif (!(flags & jsc.flags.leaveValue) && this.valueElement)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (fmt === 'hex' || fmt === 'hexa')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!this.uppercase) { colorStr = colorStr.toLowerCase(); }\n\t\t\t\t\t\t\tif (!this.hash) { colorStr = colorStr.replace(/^#/, ''); }\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setValueElementValue(colorStr);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!(flags & jsc.flags.leaveAlpha) && this.alphaElement)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar alphaVal = Math.round(this.channels.a * 100) / 100;\n\t\t\t\t\t\tthis.setAlphaElementValue(alphaVal);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!(flags & jsc.flags.leavePreview) && this.previewElement)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar previewPos = null; // 'left' | 'right' (null -> fill the entire element)\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tjsc.isTextInput(this.previewElement) || // text input\n\t\t\t\t\t\t\t(jsc.isButton(this.previewElement) && !jsc.isButtonEmpty(this.previewElement)) // button with text\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpreviewPos = this.previewPosition;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.setPreviewElementBg(this.toRGBAString());\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isPickerOwner())\n\t\t\t\t\t{\n\t\t\t\t\t\tredrawPad();\n\t\t\t\t\t\tredrawSld();\n\t\t\t\t\t\tredrawASld();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\n\t\t\t\tthis.setPreviewElementBg = function (color: any)\n\t\t\t\t{\n\t\t\t\t\tif (!this.previewElement)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar position = null; // color preview position:  null | 'left' | 'right'\n\t\t\t\t\tvar width = null; // color preview width:  px | null = fill the entire element\n\t\t\t\t\tif (\n\t\t\t\t\t\tjsc.isTextInput(this.previewElement) || // text input\n\t\t\t\t\t\t(jsc.isButton(this.previewElement) && !jsc.isButtonEmpty(this.previewElement)) // button with text\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tposition = this.previewPosition;\n\t\t\t\t\t\twidth = this.previewSize;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar backgrounds: any[] = [];\n\n\t\t\t\t\tif (!color)\n\t\t\t\t\t{\n\t\t\t\t\t\t// there is no color preview to display -> let's remove any previous background image\n\t\t\t\t\t\tbackgrounds.push({\n\t\t\t\t\t\t\timage: 'none',\n\t\t\t\t\t\t\tposition: 'left top',\n\t\t\t\t\t\t\tsize: 'auto',\n\t\t\t\t\t\t\trepeat: 'no-repeat',\n\t\t\t\t\t\t\torigin: 'padding-box',\n\t\t\t\t\t\t});\n\t\t\t\t\t} else\n\t\t\t\t\t{\n\t\t\t\t\t\t// CSS gradient for background color preview\n\t\t\t\t\t\tbackgrounds.push({\n\t\t\t\t\t\t\timage: jsc.genColorPreviewGradient(\n\t\t\t\t\t\t\t\tcolor,\n\t\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\t\twidth ? width - jsc.pub.previewSeparator.length : null\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tposition: 'left top',\n\t\t\t\t\t\t\tsize: 'auto',\n\t\t\t\t\t\t\trepeat: position ? 'repeat-y' : 'repeat',\n\t\t\t\t\t\t\torigin: 'padding-box',\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// data URL of generated PNG image with a gray transparency chessboard\n\t\t\t\t\t\tvar preview = jsc.genColorPreviewCanvas(\n\t\t\t\t\t\t\t'rgba(0,0,0,0)',\n\t\t\t\t\t\t\tposition ? ({ 'left': 'right', 'right': 'left' } as any)[position] : null,\n\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbackgrounds.push({\n\t\t\t\t\t\t\timage: 'url(\\'' + preview.canvas.toDataURL() + '\\')',\n\t\t\t\t\t\t\tposition: (position || 'left') + ' top',\n\t\t\t\t\t\t\tsize: preview.width + 'px ' + preview.height + 'px',\n\t\t\t\t\t\t\trepeat: position ? 'repeat-y' : 'repeat',\n\t\t\t\t\t\t\torigin: 'padding-box',\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tvar bg = {\n\t\t\t\t\t\timage: [],\n\t\t\t\t\t\tposition: [],\n\t\t\t\t\t\tsize: [],\n\t\t\t\t\t\trepeat: [],\n\t\t\t\t\t\torigin: [],\n\t\t\t\t\t};\n\t\t\t\t\tfor (var i = 0; i < backgrounds.length; i += 1)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet background: any = backgrounds[i];\n\t\t\t\t\t\t(bg.image as any).push(background.image);\n\t\t\t\t\t\t(bg.position as any).push(background.position);\n\t\t\t\t\t\t(bg.size as any).push(background.size);\n\t\t\t\t\t\t(bg.repeat as any).push(background.repeat);\n\t\t\t\t\t\t(bg.origin as any).push(background.origin);\n\t\t\t\t\t}\n\n\t\t\t\t\t// set previewElement's background-images\n\t\t\t\t\tvar sty = {\n\t\t\t\t\t\t'background-image': bg.image.join(', '),\n\t\t\t\t\t\t'background-position': bg.position.join(', '),\n\t\t\t\t\t\t'background-size': bg.size.join(', '),\n\t\t\t\t\t\t'background-repeat': bg.repeat.join(', '),\n\t\t\t\t\t\t'background-origin': bg.origin.join(', '),\n\t\t\t\t\t};\n\t\t\t\t\tjsc.setStyle(this.previewElement, sty, this.forceStyle);\n\n\n\t\t\t\t\t// set/restore previewElement's padding\n\t\t\t\t\tvar padding: any = {\n\t\t\t\t\t\tleft: null,\n\t\t\t\t\t\tright: null,\n\t\t\t\t\t};\n\t\t\t\t\tif (position)\n\t\t\t\t\t{\n\t\t\t\t\t\tpadding[position] = (this.previewSize + this.previewPadding) + 'px';\n\t\t\t\t\t}\n\n\t\t\t\t\tvar sty2: any = {\n\t\t\t\t\t\t'padding-left': padding.left,\n\t\t\t\t\t\t'padding-right': padding.right,\n\t\t\t\t\t};\n\t\t\t\t\tjsc.setStyle(this.previewElement, sty2, this.forceStyle, true);\n\t\t\t\t};\n\n\n\t\t\t\tthis.setValueElementValue = function (str: any)\n\t\t\t\t{\n\t\t\t\t\tif (this.valueElement)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (jsc.nodeName(this.valueElement) === 'input')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.valueElement.value = str;\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.valueElement.innerHTML = str;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\n\t\t\t\tthis.setAlphaElementValue = function (str: any)\n\t\t\t\t{\n\t\t\t\t\tif (this.alphaElement)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (jsc.nodeName(this.alphaElement) === 'input')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.alphaElement.value = str;\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.alphaElement.innerHTML = str;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\n\t\t\t\tthis._processParentElementsInDOM = function ()\n\t\t\t\t{\n\t\t\t\t\tif (this._parentElementsProcessed) { return; }\n\t\t\t\t\tthis._parentElementsProcessed = true;\n\n\t\t\t\t\tvar elm = this.targetElement;\n\t\t\t\t\tdo\n\t\t\t\t\t{\n\t\t\t\t\t\t// If the target element or one of its parent nodes has fixed position,\n\t\t\t\t\t\t// then use fixed positioning instead\n\t\t\t\t\t\tvar compStyle = jsc.getCompStyle(elm);\n\t\t\t\t\t\tif (compStyle.position && compStyle.position.toLowerCase() === 'fixed')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fixed = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (elm !== this.targetElement)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Ensure to attach onParentScroll only once to each parent element\n\t\t\t\t\t\t\t// (multiple targetElements can share the same parent nodes)\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t// Note: It's not just offsetParents that can be scrollable,\n\t\t\t\t\t\t\t// that's why we loop through all parent nodes\n\t\t\t\t\t\t\tif (!jsc.getData(elm, 'hasScrollListener'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telm.addEventListener('scroll', jsc.onParentScroll, false);\n\t\t\t\t\t\t\t\tjsc.setData(elm, 'hasScrollListener', true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} while ((elm = elm.parentNode) && jsc.nodeName(elm) !== 'body');\n\t\t\t\t};\n\n\n\t\t\t\tthis.tryHide = function ()\n\t\t\t\t{\n\t\t\t\t\tif (this.hideOnLeave)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\n\t\t\t\tthis.set__palette = function (val: any)\n\t\t\t\t{\n\t\t\t\t\tthis.palette = val;\n\t\t\t\t\tthis._palette = jsc.parsePaletteValue(val);\n\t\t\t\t\tthis._paletteHasTransparency = jsc.containsTranparentColor(this._palette);\n\t\t\t\t};\n\n\n\t\t\t\tfunction setOption(option?: any, value?: any)\n\t\t\t\t{\n\t\t\t\t\tif (typeof option !== 'string')\n\t\t\t\t\t{\n\t\t\t\t\t\tthrow new Error('Invalid value for option name: ' + option);\n\t\t\t\t\t}\n\n\t\t\t\t\t// enum option\n\t\t\t\t\tif (jsc.enumOpts.hasOwnProperty(option))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (typeof value === 'string')\n\t\t\t\t\t\t{ // enum string values are case insensitive\n\t\t\t\t\t\t\tvalue = value.toLowerCase();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (jsc.enumOpts[option].indexOf(value) === -1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthrow new Error('Option \\'' + option + '\\' has invalid value: ' + value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// deprecated option\n\t\t\t\t\tif (jsc.deprecatedOpts.hasOwnProperty(option))\n\t\t\t\t\t{\n\t\t\t\t\t\tvar oldOpt = option;\n\t\t\t\t\t\tvar newOpt = jsc.deprecatedOpts[option];\n\t\t\t\t\t\tif (newOpt)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// if we have a new name for this option, let's log a warning and use the new name\n\t\t\t\t\t\t\tconsole.warn('Option \\'%s\\' is DEPRECATED, using \\'%s\\' instead.' + jsc.docsRef, oldOpt, newOpt);\n\t\t\t\t\t\t\toption = newOpt;\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// new name not available for the option\n\t\t\t\t\t\t\tthrow new Error('Option \\'' + option + '\\' is DEPRECATED');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar setter = 'set__' + option;\n\n\t\t\t\t\tif (typeof THIS[setter] === 'function')\n\t\t\t\t\t{ // a setter exists for this option\n\t\t\t\t\t\tTHIS[setter](value);\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t} else if (option in THIS)\n\t\t\t\t\t{ // option exists as a property\n\t\t\t\t\t\tTHIS[option] = value;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tthrow new Error('Unrecognized configuration option: ' + option);\n\t\t\t\t}\n\n\n\t\t\t\tfunction getOption(option?: any)\n\t\t\t\t{\n\t\t\t\t\tif (typeof option !== 'string')\n\t\t\t\t\t{\n\t\t\t\t\t\tthrow new Error('Invalid value for option name: ' + option);\n\t\t\t\t\t}\n\n\t\t\t\t\t// deprecated option\n\t\t\t\t\tif (jsc.deprecatedOpts.hasOwnProperty(option))\n\t\t\t\t\t{\n\t\t\t\t\t\tvar oldOpt = option;\n\t\t\t\t\t\tvar newOpt = jsc.deprecatedOpts[option];\n\t\t\t\t\t\tif (newOpt)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// if we have a new name for this option, let's log a warning and use the new name\n\t\t\t\t\t\t\tconsole.warn('Option \\'%s\\' is DEPRECATED, using \\'%s\\' instead.' + jsc.docsRef, oldOpt, newOpt);\n\t\t\t\t\t\t\toption = newOpt;\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// new name not available for the option\n\t\t\t\t\t\t\tthrow new Error('Option \\'' + option + '\\' is DEPRECATED');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar getter = 'get__' + option;\n\n\t\t\t\t\t// if (typeof THIS[getter] === 'function')\n\t\t\t\t\t// { // a getter exists for this option\n\t\t\t\t\t// \treturn THIS[getter](value);\n\n\t\t\t\t\t// } else if (option in THIS)\n\t\t\t\t\t// { // option exists as a property\n\t\t\t\t\t// \treturn THIS[option];\n\t\t\t\t\t// }\n\n\t\t\t\t\tthrow new Error('Unrecognized configuration option: ' + option);\n\t\t\t\t}\n\n\n\t\t\t\tfunction detachPicker()\n\t\t\t\t{\n\t\t\t\t\tjsc.removeClass(THIS.targetElement, jsc.pub.activeClassName);\n\t\t\t\t\tjsc.picker.wrap.parentNode.removeChild(jsc.picker.wrap);\n\t\t\t\t\tdelete jsc.picker.owner;\n\t\t\t\t}\n\n\n\t\t\t\tfunction drawPicker()\n\t\t\t\t{\n\n\t\t\t\t\t// At this point, when drawing the picker, we know what the parent elements are\n\t\t\t\t\t// and we can do all related DOM operations, such as registering events on them\n\t\t\t\t\t// or checking their positioning\n\t\t\t\t\tTHIS._processParentElementsInDOM();\n\n\t\t\t\t\tif (!jsc.picker)\n\t\t\t\t\t{\n\t\t\t\t\t\tjsc.picker = {\n\t\t\t\t\t\t\towner: null, // owner picker instance\n\t\t\t\t\t\t\twrap: jsc.createEl('div'),\n\t\t\t\t\t\t\tbox: jsc.createEl('div'),\n\t\t\t\t\t\t\tboxS: jsc.createEl('div'), // shadow area\n\t\t\t\t\t\t\tboxB: jsc.createEl('div'), // border\n\t\t\t\t\t\t\tpad: jsc.createEl('div'),\n\t\t\t\t\t\t\tpadB: jsc.createEl('div'), // border\n\t\t\t\t\t\t\tpadM: jsc.createEl('div'), // mouse/touch area\n\t\t\t\t\t\t\tpadCanvas: jsc.createPadCanvas(),\n\t\t\t\t\t\t\tcross: jsc.createEl('div'),\n\t\t\t\t\t\t\tcrossBY: jsc.createEl('div'), // border Y\n\t\t\t\t\t\t\tcrossBX: jsc.createEl('div'), // border X\n\t\t\t\t\t\t\tcrossLY: jsc.createEl('div'), // line Y\n\t\t\t\t\t\t\tcrossLX: jsc.createEl('div'), // line X\n\t\t\t\t\t\t\tsld: jsc.createEl('div'), // slider\n\t\t\t\t\t\t\tsldB: jsc.createEl('div'), // border\n\t\t\t\t\t\t\tsldM: jsc.createEl('div'), // mouse/touch area\n\t\t\t\t\t\t\tsldGrad: jsc.createSliderGradient(),\n\t\t\t\t\t\t\tsldPtrS: jsc.createEl('div'), // slider pointer spacer\n\t\t\t\t\t\t\tsldPtrIB: jsc.createEl('div'), // slider pointer inner border\n\t\t\t\t\t\t\tsldPtrMB: jsc.createEl('div'), // slider pointer middle border\n\t\t\t\t\t\t\tsldPtrOB: jsc.createEl('div'), // slider pointer outer border\n\t\t\t\t\t\t\tasld: jsc.createEl('div'), // alpha slider\n\t\t\t\t\t\t\tasldB: jsc.createEl('div'), // border\n\t\t\t\t\t\t\tasldM: jsc.createEl('div'), // mouse/touch area\n\t\t\t\t\t\t\tasldGrad: jsc.createASliderGradient(),\n\t\t\t\t\t\t\tasldPtrS: jsc.createEl('div'), // slider pointer spacer\n\t\t\t\t\t\t\tasldPtrIB: jsc.createEl('div'), // slider pointer inner border\n\t\t\t\t\t\t\tasldPtrMB: jsc.createEl('div'), // slider pointer middle border\n\t\t\t\t\t\t\tasldPtrOB: jsc.createEl('div'), // slider pointer outer border\n\t\t\t\t\t\t\tpal: jsc.createEl('div'), // palette\n\t\t\t\t\t\t\tbtn: jsc.createEl('div'),\n\t\t\t\t\t\t\tbtnT: jsc.createEl('span'), // text\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tjsc.picker.pad.appendChild(jsc.picker.padCanvas.elm);\n\t\t\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.pad);\n\t\t\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBY);\n\t\t\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBX);\n\t\t\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLY);\n\t\t\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLX);\n\t\t\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.cross);\n\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padB);\n\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padM);\n\n\t\t\t\t\t\tjsc.picker.sld.appendChild(jsc.picker.sldGrad.elm);\n\t\t\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sld);\n\t\t\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sldPtrOB);\n\t\t\t\t\t\tjsc.picker.sldPtrOB.appendChild(jsc.picker.sldPtrMB);\n\t\t\t\t\t\tjsc.picker.sldPtrMB.appendChild(jsc.picker.sldPtrIB);\n\t\t\t\t\t\tjsc.picker.sldPtrIB.appendChild(jsc.picker.sldPtrS);\n\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldB);\n\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldM);\n\n\t\t\t\t\t\tjsc.picker.asld.appendChild(jsc.picker.asldGrad.elm);\n\t\t\t\t\t\tjsc.picker.asldB.appendChild(jsc.picker.asld);\n\t\t\t\t\t\tjsc.picker.asldB.appendChild(jsc.picker.asldPtrOB);\n\t\t\t\t\t\tjsc.picker.asldPtrOB.appendChild(jsc.picker.asldPtrMB);\n\t\t\t\t\t\tjsc.picker.asldPtrMB.appendChild(jsc.picker.asldPtrIB);\n\t\t\t\t\t\tjsc.picker.asldPtrIB.appendChild(jsc.picker.asldPtrS);\n\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.asldB);\n\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.asldM);\n\n\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.pal);\n\n\t\t\t\t\t\tjsc.picker.btn.appendChild(jsc.picker.btnT);\n\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.btn);\n\n\t\t\t\t\t\tjsc.picker.boxB.appendChild(jsc.picker.box);\n\t\t\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxS);\n\t\t\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxB);\n\n\t\t\t\t\t\tjsc.picker.wrap.addEventListener('touchstart', jsc.onPickerTouchStart,\n\t\t\t\t\t\t\tjsc.isPassiveEventSupported ? { passive: false } : false);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar p = jsc.picker;\n\n\t\t\t\t\tvar displaySlider = !!jsc.getSliderChannel(THIS);\n\t\t\t\t\tvar displayAlphaSlider = THIS.hasAlphaChannel();\n\t\t\t\t\tvar pickerDims = jsc.getPickerDims(THIS);\n\t\t\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\n\t\t\t\t\tvar controlPadding = jsc.getControlPadding(THIS);\n\t\t\t\t\tvar borderRadius = Math.min(\n\t\t\t\t\t\tTHIS.borderRadius,\n\t\t\t\t\t\tMath.round(THIS.padding * Math.PI)); // px\n\t\t\t\t\tvar padCursor = 'crosshair';\n\n\t\t\t\t\t// wrap\n\t\t\t\t\tp.wrap.className = 'jscolor-picker-wrap';\n\t\t\t\t\tp.wrap.style.clear = 'both';\n\t\t\t\t\tp.wrap.style.width = pickerDims.borderW + 'px';\n\t\t\t\t\tp.wrap.style.height = pickerDims.borderH + 'px';\n\t\t\t\t\tp.wrap.style.zIndex = THIS.zIndex;\n\n\t\t\t\t\t// picker\n\t\t\t\t\tp.box.className = 'jscolor-picker';\n\t\t\t\t\tp.box.style.width = pickerDims.paddedW + 'px';\n\t\t\t\t\tp.box.style.height = pickerDims.paddedH + 'px';\n\t\t\t\t\tp.box.style.position = 'relative';\n\n\t\t\t\t\t// picker shadow\n\t\t\t\t\tp.boxS.className = 'jscolor-picker-shadow';\n\t\t\t\t\tp.boxS.style.position = 'absolute';\n\t\t\t\t\tp.boxS.style.left = '0';\n\t\t\t\t\tp.boxS.style.top = '0';\n\t\t\t\t\tp.boxS.style.width = '100%';\n\t\t\t\t\tp.boxS.style.height = '100%';\n\t\t\t\t\tjsc.setBorderRadius(p.boxS, borderRadius + 'px');\n\n\t\t\t\t\t// picker border\n\t\t\t\t\tp.boxB.className = 'jscolor-picker-border';\n\t\t\t\t\tp.boxB.style.position = 'relative';\n\t\t\t\t\tp.boxB.style.border = THIS.borderWidth + 'px solid';\n\t\t\t\t\tp.boxB.style.borderColor = THIS.borderColor;\n\t\t\t\t\tp.boxB.style.background = THIS.backgroundColor;\n\t\t\t\t\tjsc.setBorderRadius(p.boxB, borderRadius + 'px');\n\n\t\t\t\t\t// IE hack:\n\t\t\t\t\t// If the element is transparent, IE will trigger the event on the elements under it,\n\t\t\t\t\t// e.g. on Canvas or on elements with border\n\t\t\t\t\tp.padM.style.background = 'rgba(255,0,0,.2)';\n\t\t\t\t\tp.sldM.style.background = 'rgba(0,255,0,.2)';\n\t\t\t\t\tp.asldM.style.background = 'rgba(0,0,255,.2)';\n\n\t\t\t\t\tp.padM.style.opacity =\n\t\t\t\t\t\tp.sldM.style.opacity =\n\t\t\t\t\t\tp.asldM.style.opacity =\n\t\t\t\t\t\t'0';\n\n\t\t\t\t\t// pad\n\t\t\t\t\tp.pad.style.position = 'relative';\n\t\t\t\t\tp.pad.style.width = THIS.width + 'px';\n\t\t\t\t\tp.pad.style.height = THIS.height + 'px';\n\n\t\t\t\t\t// pad - color spectrum (HSV and HVS)\n\t\t\t\t\tp.padCanvas.draw(THIS.width, THIS.height, jsc.getPadYChannel(THIS));\n\n\t\t\t\t\t// pad border\n\t\t\t\t\tp.padB.style.position = 'absolute';\n\t\t\t\t\tp.padB.style.left = THIS.padding + 'px';\n\t\t\t\t\tp.padB.style.top = THIS.padding + 'px';\n\t\t\t\t\tp.padB.style.border = THIS.controlBorderWidth + 'px solid';\n\t\t\t\t\tp.padB.style.borderColor = THIS.controlBorderColor;\n\n\t\t\t\t\t// pad mouse area\n\t\t\t\t\tp.padM.style.position = 'absolute';\n\t\t\t\t\tp.padM.style.left = 0 + 'px';\n\t\t\t\t\tp.padM.style.top = 0 + 'px';\n\t\t\t\t\tp.padM.style.width = (THIS.padding + 2 * THIS.controlBorderWidth + THIS.width + controlPadding) + 'px';\n\t\t\t\t\tp.padM.style.height = (2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height) + 'px';\n\t\t\t\t\tp.padM.style.cursor = padCursor;\n\t\t\t\t\tjsc.setData(p.padM, {\n\t\t\t\t\t\tinstance: THIS,\n\t\t\t\t\t\tcontrol: 'pad',\n\t\t\t\t\t})\n\n\t\t\t\t\t// pad cross\n\t\t\t\t\tp.cross.style.position = 'absolute';\n\t\t\t\t\tp.cross.style.left =\n\t\t\t\t\t\tp.cross.style.top =\n\t\t\t\t\t\t'0';\n\t\t\t\t\tp.cross.style.width =\n\t\t\t\t\t\tp.cross.style.height =\n\t\t\t\t\t\tcrossOuterSize + 'px';\n\n\t\t\t\t\t// pad cross border Y and X\n\t\t\t\t\tp.crossBY.style.position =\n\t\t\t\t\t\tp.crossBX.style.position =\n\t\t\t\t\t\t'absolute';\n\t\t\t\t\tp.crossBY.style.background =\n\t\t\t\t\t\tp.crossBX.style.background =\n\t\t\t\t\t\tTHIS.pointerBorderColor;\n\t\t\t\t\tp.crossBY.style.width =\n\t\t\t\t\t\tp.crossBX.style.height =\n\t\t\t\t\t\t(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\n\t\t\t\t\tp.crossBY.style.height =\n\t\t\t\t\t\tp.crossBX.style.width =\n\t\t\t\t\t\tcrossOuterSize + 'px';\n\t\t\t\t\tp.crossBY.style.left =\n\t\t\t\t\t\tp.crossBX.style.top =\n\t\t\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2) - THIS.pointerBorderWidth) + 'px';\n\t\t\t\t\tp.crossBY.style.top =\n\t\t\t\t\t\tp.crossBX.style.left =\n\t\t\t\t\t\t'0';\n\n\t\t\t\t\t// pad cross line Y and X\n\t\t\t\t\tp.crossLY.style.position =\n\t\t\t\t\t\tp.crossLX.style.position =\n\t\t\t\t\t\t'absolute';\n\t\t\t\t\tp.crossLY.style.background =\n\t\t\t\t\t\tp.crossLX.style.background =\n\t\t\t\t\t\tTHIS.pointerColor;\n\t\t\t\t\tp.crossLY.style.height =\n\t\t\t\t\t\tp.crossLX.style.width =\n\t\t\t\t\t\t(crossOuterSize - 2 * THIS.pointerBorderWidth) + 'px';\n\t\t\t\t\tp.crossLY.style.width =\n\t\t\t\t\t\tp.crossLX.style.height =\n\t\t\t\t\t\tTHIS.pointerThickness + 'px';\n\t\t\t\t\tp.crossLY.style.left =\n\t\t\t\t\t\tp.crossLX.style.top =\n\t\t\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2)) + 'px';\n\t\t\t\t\tp.crossLY.style.top =\n\t\t\t\t\t\tp.crossLX.style.left =\n\t\t\t\t\t\tTHIS.pointerBorderWidth + 'px';\n\n\n\t\t\t\t\t// slider\n\t\t\t\t\tp.sld.style.overflow = 'hidden';\n\t\t\t\t\tp.sld.style.width = THIS.sliderSize + 'px';\n\t\t\t\t\tp.sld.style.height = THIS.height + 'px';\n\n\t\t\t\t\t// slider gradient\n\t\t\t\t\tp.sldGrad.draw(THIS.sliderSize, THIS.height, '#000', '#000');\n\n\t\t\t\t\t// slider border\n\t\t\t\t\tp.sldB.style.display = displaySlider ? 'block' : 'none';\n\t\t\t\t\tp.sldB.style.position = 'absolute';\n\t\t\t\t\tp.sldB.style.left = (THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + 2 * controlPadding) + 'px';\n\t\t\t\t\tp.sldB.style.top = THIS.padding + 'px';\n\t\t\t\t\tp.sldB.style.border = THIS.controlBorderWidth + 'px solid';\n\t\t\t\t\tp.sldB.style.borderColor = THIS.controlBorderColor;\n\n\t\t\t\t\t// slider mouse area\n\t\t\t\t\tp.sldM.style.display = displaySlider ? 'block' : 'none';\n\t\t\t\t\tp.sldM.style.position = 'absolute';\n\t\t\t\t\tp.sldM.style.left = (THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + controlPadding) + 'px';\n\t\t\t\t\tp.sldM.style.top = 0 + 'px';\n\t\t\t\t\tp.sldM.style.width = (\n\t\t\t\t\t\t(THIS.sliderSize + 2 * controlPadding + 2 * THIS.controlBorderWidth) +\n\t\t\t\t\t\t(displayAlphaSlider ? 0 : Math.max(0, THIS.padding - controlPadding)) // remaining padding to the right edge\n\t\t\t\t\t) + 'px';\n\t\t\t\t\tp.sldM.style.height = (2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height) + 'px';\n\t\t\t\t\tp.sldM.style.cursor = 'default';\n\t\t\t\t\tjsc.setData(p.sldM, {\n\t\t\t\t\t\tinstance: THIS,\n\t\t\t\t\t\tcontrol: 'sld',\n\t\t\t\t\t});\n\n\t\t\t\t\t// slider pointer inner and outer border\n\t\t\t\t\tp.sldPtrIB.style.border =\n\t\t\t\t\t\tp.sldPtrOB.style.border =\n\t\t\t\t\t\tTHIS.pointerBorderWidth + 'px solid ' + THIS.pointerBorderColor;\n\n\t\t\t\t\t// slider pointer outer border\n\t\t\t\t\tp.sldPtrOB.style.position = 'absolute';\n\t\t\t\t\tp.sldPtrOB.style.left = -(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\n\t\t\t\t\tp.sldPtrOB.style.top = '0';\n\n\t\t\t\t\t// slider pointer middle border\n\t\t\t\t\tp.sldPtrMB.style.border = THIS.pointerThickness + 'px solid ' + THIS.pointerColor;\n\n\t\t\t\t\t// slider pointer spacer\n\t\t\t\t\tp.sldPtrS.style.width = THIS.sliderSize + 'px';\n\t\t\t\t\tp.sldPtrS.style.height = jsc.pub.sliderInnerSpace + 'px';\n\n\n\t\t\t\t\t// alpha slider\n\t\t\t\t\tp.asld.style.overflow = 'hidden';\n\t\t\t\t\tp.asld.style.width = THIS.sliderSize + 'px';\n\t\t\t\t\tp.asld.style.height = THIS.height + 'px';\n\n\t\t\t\t\t// alpha slider gradient\n\t\t\t\t\tp.asldGrad.draw(THIS.sliderSize, THIS.height, '#000');\n\n\t\t\t\t\t// alpha slider border\n\t\t\t\t\tp.asldB.style.display = displayAlphaSlider ? 'block' : 'none';\n\t\t\t\t\tp.asldB.style.position = 'absolute';\n\t\t\t\t\tp.asldB.style.left = (\n\t\t\t\t\t\t(THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + controlPadding) +\n\t\t\t\t\t\t(displaySlider ? (THIS.sliderSize + 3 * controlPadding + 2 * THIS.controlBorderWidth) : 0)\n\t\t\t\t\t) + 'px';\n\t\t\t\t\tp.asldB.style.top = THIS.padding + 'px';\n\t\t\t\t\tp.asldB.style.border = THIS.controlBorderWidth + 'px solid';\n\t\t\t\t\tp.asldB.style.borderColor = THIS.controlBorderColor;\n\n\t\t\t\t\t// alpha slider mouse area\n\t\t\t\t\tp.asldM.style.display = displayAlphaSlider ? 'block' : 'none';\n\t\t\t\t\tp.asldM.style.position = 'absolute';\n\t\t\t\t\tp.asldM.style.left = (\n\t\t\t\t\t\t(THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + controlPadding) +\n\t\t\t\t\t\t(displaySlider ? (THIS.sliderSize + 2 * controlPadding + 2 * THIS.controlBorderWidth) : 0)\n\t\t\t\t\t) + 'px';\n\t\t\t\t\tp.asldM.style.top = 0 + 'px';\n\t\t\t\t\tp.asldM.style.width = (\n\t\t\t\t\t\t(THIS.sliderSize + 2 * controlPadding + 2 * THIS.controlBorderWidth) +\n\t\t\t\t\t\tMath.max(0, THIS.padding - controlPadding) // remaining padding to the right edge\n\t\t\t\t\t) + 'px';\n\t\t\t\t\tp.asldM.style.height = (2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height) + 'px';\n\t\t\t\t\tp.asldM.style.cursor = 'default';\n\t\t\t\t\tjsc.setData(p.asldM, {\n\t\t\t\t\t\tinstance: THIS,\n\t\t\t\t\t\tcontrol: 'asld',\n\t\t\t\t\t})\n\n\t\t\t\t\t// alpha slider pointer inner and outer border\n\t\t\t\t\tp.asldPtrIB.style.border =\n\t\t\t\t\t\tp.asldPtrOB.style.border =\n\t\t\t\t\t\tTHIS.pointerBorderWidth + 'px solid ' + THIS.pointerBorderColor;\n\n\t\t\t\t\t// alpha slider pointer outer border\n\t\t\t\t\tp.asldPtrOB.style.position = 'absolute';\n\t\t\t\t\tp.asldPtrOB.style.left = -(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\n\t\t\t\t\tp.asldPtrOB.style.top = '0';\n\n\t\t\t\t\t// alpha slider pointer middle border\n\t\t\t\t\tp.asldPtrMB.style.border = THIS.pointerThickness + 'px solid ' + THIS.pointerColor;\n\n\t\t\t\t\t// alpha slider pointer spacer\n\t\t\t\t\tp.asldPtrS.style.width = THIS.sliderSize + 'px';\n\t\t\t\t\tp.asldPtrS.style.height = jsc.pub.sliderInnerSpace + 'px';\n\n\n\t\t\t\t\t// palette\n\t\t\t\t\tp.pal.className = 'jscolor-palette';\n\t\t\t\t\tp.pal.style.display = pickerDims.palette.rows ? 'block' : 'none';\n\t\t\t\t\tp.pal.style.position = 'absolute';\n\t\t\t\t\tp.pal.style.left = THIS.padding + 'px';\n\t\t\t\t\tp.pal.style.top = (2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height) + 'px';\n\n\t\t\t\t\t// palette's color samples\n\n\t\t\t\t\tp.pal.innerHTML = '';\n\n\t\t\t\t\tvar chessboard = jsc.genColorPreviewCanvas('rgba(0,0,0,0)');\n\n\t\t\t\t\tvar si = 0; // color sample's index\n\t\t\t\t\tfor (var r = 0; r < pickerDims.palette.rows; r++)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (var c = 0; c < pickerDims.palette.cols && si < THIS._palette.length; c++, si++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar sampleColor = THIS._palette[si];\n\t\t\t\t\t\t\tvar sampleCssColor = jsc.rgbaColor.apply(null, sampleColor.rgba);\n\n\t\t\t\t\t\t\tvar sc = jsc.createEl('div'); // color sample's color\n\t\t\t\t\t\t\tsc.style.width = (pickerDims.palette.cellW - 2 * THIS.controlBorderWidth) + 'px';\n\t\t\t\t\t\t\tsc.style.height = (pickerDims.palette.cellH - 2 * THIS.controlBorderWidth) + 'px';\n\t\t\t\t\t\t\tsc.style.backgroundColor = sampleCssColor;\n\n\t\t\t\t\t\t\tvar sw = jsc.createEl('div'); // color sample's wrap\n\t\t\t\t\t\t\tsw.className = 'jscolor-palette-sample';\n\t\t\t\t\t\t\tsw.style.display = 'block';\n\t\t\t\t\t\t\tsw.style.position = 'absolute';\n\t\t\t\t\t\t\tsw.style.left = (\n\t\t\t\t\t\t\t\tpickerDims.palette.cols <= 1 ? 0 :\n\t\t\t\t\t\t\t\t\tMath.round(10 * (c * ((pickerDims.contentW - pickerDims.palette.cellW) / (pickerDims.palette.cols - 1)))) / 10\n\t\t\t\t\t\t\t) + 'px';\n\t\t\t\t\t\t\tsw.style.top = (r * (pickerDims.palette.cellH + THIS.paletteSpacing)) + 'px';\n\t\t\t\t\t\t\tsw.style.border = THIS.controlBorderWidth + 'px solid';\n\t\t\t\t\t\t\tsw.style.borderColor = THIS.controlBorderColor;\n\t\t\t\t\t\t\tsw.style.cursor = 'pointer';\n\t\t\t\t\t\t\tif (sampleColor.rgba[3] !== null && sampleColor.rgba[3] < 1.0)\n\t\t\t\t\t\t\t{ // only create chessboard background if the sample has transparency\n\t\t\t\t\t\t\t\tsw.style.backgroundImage = 'url(\\'' + chessboard.canvas.toDataURL() + '\\')';\n\t\t\t\t\t\t\t\tsw.style.backgroundRepeat = 'repeat';\n\t\t\t\t\t\t\t\tsw.style.backgroundPosition = 'center center';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tjsc.setData(sw, {\n\t\t\t\t\t\t\t\tinstance: THIS,\n\t\t\t\t\t\t\t\tcontrol: 'palette-sample',\n\t\t\t\t\t\t\t\tcolor: sampleColor,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tsw.addEventListener('click', jsc.onPaletteSampleClick, false);\n\t\t\t\t\t\t\tsw.appendChild(sc);\n\t\t\t\t\t\t\tp.pal.appendChild(sw);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t\t// the Close button\n\t\t\t\t\tfunction setBtnBorder()\n\t\t\t\t\t{\n\t\t\t\t\t\tvar insetColors = THIS.controlBorderColor.split(/\\s+/);\n\t\t\t\t\t\tvar outsetColor = insetColors.length < 2 ? insetColors[0] : insetColors[1] + ' ' + insetColors[0] + ' ' + insetColors[0] + ' ' + insetColors[1];\n\t\t\t\t\t\tp.btn.style.borderColor = outsetColor;\n\t\t\t\t\t}\n\t\t\t\t\tvar btnPadding = 15; // px\n\t\t\t\t\tp.btn.className = 'jscolor-btn-close';\n\t\t\t\t\tp.btn.style.display = THIS.closeButton ? 'block' : 'none';\n\t\t\t\t\tp.btn.style.position = 'absolute';\n\t\t\t\t\tp.btn.style.left = THIS.padding + 'px';\n\t\t\t\t\tp.btn.style.bottom = THIS.padding + 'px';\n\t\t\t\t\tp.btn.style.padding = '0 ' + btnPadding + 'px';\n\t\t\t\t\tp.btn.style.maxWidth = (pickerDims.contentW - 2 * THIS.controlBorderWidth - 2 * btnPadding) + 'px';\n\t\t\t\t\tp.btn.style.overflow = 'hidden';\n\t\t\t\t\tp.btn.style.height = THIS.buttonHeight + 'px';\n\t\t\t\t\tp.btn.style.whiteSpace = 'nowrap';\n\t\t\t\t\tp.btn.style.border = THIS.controlBorderWidth + 'px solid';\n\t\t\t\t\tsetBtnBorder();\n\t\t\t\t\tp.btn.style.color = THIS.buttonColor;\n\t\t\t\t\tp.btn.style.font = '12px sans-serif';\n\t\t\t\t\tp.btn.style.textAlign = 'center';\n\t\t\t\t\tp.btn.style.cursor = 'pointer';\n\t\t\t\t\tp.btn.onmousedown = function ()\n\t\t\t\t\t{\n\t\t\t\t\t\tTHIS.hide();\n\t\t\t\t\t};\n\t\t\t\t\tp.btnT.style.lineHeight = THIS.buttonHeight + 'px';\n\t\t\t\t\tp.btnT.innerHTML = '';\n\t\t\t\t\tp.btnT.appendChild(window.document.createTextNode(THIS.closeText));\n\n\t\t\t\t\t// reposition the pointers\n\t\t\t\t\tredrawPad();\n\t\t\t\t\tredrawSld();\n\t\t\t\t\tredrawASld();\n\n\t\t\t\t\t// If we are changing the owner without first closing the picker,\n\t\t\t\t\t// make sure to first deal with the old owner\n\t\t\t\t\tif (jsc.picker.owner && jsc.picker.owner !== THIS)\n\t\t\t\t\t{\n\t\t\t\t\t\tjsc.removeClass(jsc.picker.owner.targetElement, jsc.pub.activeClassName);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Set a new picker owner\n\t\t\t\t\tjsc.picker.owner = THIS;\n\n\t\t\t\t\t// The redrawPosition() method needs picker.owner to be set, that's why we call it here,\n\t\t\t\t\t// after setting the owner\n\t\t\t\t\tif (THIS.container === window.document.body)\n\t\t\t\t\t{\n\t\t\t\t\t\tjsc.redrawPosition();\n\t\t\t\t\t} else\n\t\t\t\t\t{\n\t\t\t\t\t\tjsc._drawPosition(THIS, 0, 0, 'relative', false);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (p.wrap.parentNode !== THIS.container)\n\t\t\t\t\t{\n\t\t\t\t\t\tTHIS.container.appendChild(p.wrap);\n\t\t\t\t\t}\n\n\t\t\t\t\tjsc.addClass(THIS.targetElement, jsc.pub.activeClassName);\n\t\t\t\t}\n\n\n\t\t\t\tfunction redrawPad()\n\t\t\t\t{\n\t\t\t\t\t// redraw the pad pointer\n\t\t\t\t\tvar yChannel = jsc.getPadYChannel(THIS);\n\t\t\t\t\tvar x = Math.round((THIS.channels.h / 360) * (THIS.width - 1));\n\t\t\t\t\tvar y = Math.round((1 - THIS.channels[yChannel] / 100) * (THIS.height - 1));\n\t\t\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\n\t\t\t\t\tvar ofs = -Math.floor(crossOuterSize / 2);\n\t\t\t\t\tjsc.picker.cross.style.left = (x + ofs) + 'px';\n\t\t\t\t\tjsc.picker.cross.style.top = (y + ofs) + 'px';\n\n\t\t\t\t\t// redraw the slider\n\t\t\t\t\tswitch (jsc.getSliderChannel(THIS))\n\t\t\t\t\t{\n\t\t\t\t\t\tcase 's':\n\t\t\t\t\t\t\tvar rgb1 = jsc.HSV_RGB(THIS.channels.h, 100, THIS.channels.v);\n\t\t\t\t\t\t\tvar rgb2 = jsc.HSV_RGB(THIS.channels.h, 0, THIS.channels.v);\n\t\t\t\t\t\t\tvar color1 = 'rgb(' +\n\t\t\t\t\t\t\t\tMath.round(rgb1[0]) + ',' +\n\t\t\t\t\t\t\t\tMath.round(rgb1[1]) + ',' +\n\t\t\t\t\t\t\t\tMath.round(rgb1[2]) + ')';\n\t\t\t\t\t\t\tvar color2 = 'rgb(' +\n\t\t\t\t\t\t\t\tMath.round(rgb2[0]) + ',' +\n\t\t\t\t\t\t\t\tMath.round(rgb2[1]) + ',' +\n\t\t\t\t\t\t\t\tMath.round(rgb2[2]) + ')';\n\t\t\t\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'v':\n\t\t\t\t\t\t\tvar rgb = jsc.HSV_RGB(THIS.channels.h, THIS.channels.s, 100);\n\t\t\t\t\t\t\tvar color1 = 'rgb(' +\n\t\t\t\t\t\t\t\tMath.round(rgb[0]) + ',' +\n\t\t\t\t\t\t\t\tMath.round(rgb[1]) + ',' +\n\t\t\t\t\t\t\t\tMath.round(rgb[2]) + ')';\n\t\t\t\t\t\t\tvar color2 = '#000';\n\t\t\t\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\t// redraw the alpha slider\n\t\t\t\t\tjsc.picker.asldGrad.draw(THIS.sliderSize, THIS.height, THIS.toHEXString());\n\t\t\t\t}\n\n\n\t\t\t\tfunction redrawSld()\n\t\t\t\t{\n\t\t\t\t\tvar sldChannel = jsc.getSliderChannel(THIS);\n\t\t\t\t\tif (sldChannel)\n\t\t\t\t\t{\n\t\t\t\t\t\t// redraw the slider pointer\n\t\t\t\t\t\tvar y = Math.round((1 - THIS.channels[sldChannel] / 100) * (THIS.height - 1));\n\t\t\t\t\t\tjsc.picker.sldPtrOB.style.top = (y - (2 * THIS.pointerBorderWidth + THIS.pointerThickness) - Math.floor(jsc.pub.sliderInnerSpace / 2)) + 'px';\n\t\t\t\t\t}\n\n\t\t\t\t\t// redraw the alpha slider\n\t\t\t\t\tjsc.picker.asldGrad.draw(THIS.sliderSize, THIS.height, THIS.toHEXString());\n\t\t\t\t}\n\n\n\t\t\t\tfunction redrawASld()\n\t\t\t\t{\n\t\t\t\t\tvar y = Math.round((1 - THIS.channels.a) * (THIS.height - 1));\n\t\t\t\t\tjsc.picker.asldPtrOB.style.top = (y - (2 * THIS.pointerBorderWidth + THIS.pointerThickness) - Math.floor(jsc.pub.sliderInnerSpace / 2)) + 'px';\n\t\t\t\t}\n\n\n\t\t\t\tfunction isPickerOwner()\n\t\t\t\t{\n\t\t\t\t\treturn jsc.picker && jsc.picker.owner === THIS;\n\t\t\t\t}\n\n\n\t\t\t\tfunction onValueKeyDown(ev: any)\n\t\t\t\t{\n\t\t\t\t\tif (jsc.eventKey(ev) === 'Enter')\n\t\t\t\t\t{\n\t\t\t\t\t\tif (THIS.valueElement)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tTHIS.processValueInput(THIS.valueElement.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tTHIS.tryHide();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\tfunction onAlphaKeyDown(ev: any)\n\t\t\t\t{\n\t\t\t\t\tif (jsc.eventKey(ev) === 'Enter')\n\t\t\t\t\t{\n\t\t\t\t\t\tif (THIS.alphaElement)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tTHIS.processAlphaInput(THIS.alphaElement.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tTHIS.tryHide();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\tfunction onValueChange(ev: any)\n\t\t\t\t{\n\t\t\t\t\tif (jsc.getData(ev, 'internal'))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn; // skip if the event was internally triggered by jscolor\n\t\t\t\t\t}\n\n\t\t\t\t\tvar oldVal = THIS.valueElement.value;\n\n\t\t\t\t\tTHIS.processValueInput(THIS.valueElement.value); // this might change the value\n\n\t\t\t\t\tjsc.triggerCallback(THIS, 'onChange');\n\n\t\t\t\t\tif (THIS.valueElement.value !== oldVal)\n\t\t\t\t\t{\n\t\t\t\t\t\t// value was additionally changed -> let's trigger the change event again, even though it was natively dispatched\n\t\t\t\t\t\tjsc.triggerInputEvent(THIS.valueElement, 'change', true, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\tfunction onAlphaChange(ev: any)\n\t\t\t\t{\n\t\t\t\t\tif (jsc.getData(ev, 'internal'))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn; // skip if the event was internally triggered by jscolor\n\t\t\t\t\t}\n\n\t\t\t\t\tvar oldVal = THIS.alphaElement.value;\n\n\t\t\t\t\tTHIS.processAlphaInput(THIS.alphaElement.value); // this might change the value\n\n\t\t\t\t\tjsc.triggerCallback(THIS, 'onChange');\n\n\t\t\t\t\t// triggering valueElement's onChange (because changing alpha changes the entire color, e.g. with rgba format)\n\t\t\t\t\tjsc.triggerInputEvent(THIS.valueElement, 'change', true, true);\n\n\t\t\t\t\tif (THIS.alphaElement.value !== oldVal)\n\t\t\t\t\t{\n\t\t\t\t\t\t// value was additionally changed -> let's trigger the change event again, even though it was natively dispatched\n\t\t\t\t\t\tjsc.triggerInputEvent(THIS.alphaElement, 'change', true, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\tfunction onValueInput(ev: any)\n\t\t\t\t{\n\t\t\t\t\tif (jsc.getData(ev, 'internal'))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn; // skip if the event was internally triggered by jscolor\n\t\t\t\t\t}\n\n\t\t\t\t\tif (THIS.valueElement)\n\t\t\t\t\t{\n\t\t\t\t\t\tTHIS.fromString(THIS.valueElement.value, jsc.flags.leaveValue);\n\t\t\t\t\t}\n\n\t\t\t\t\tjsc.triggerCallback(THIS, 'onInput');\n\n\t\t\t\t\t// triggering valueElement's onInput\n\t\t\t\t\t// (not needed, it was dispatched normally by the browser)\n\t\t\t\t}\n\n\n\t\t\t\tfunction onAlphaInput(ev: any)\n\t\t\t\t{\n\t\t\t\t\tif (jsc.getData(ev, 'internal'))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn; // skip if the event was internally triggered by jscolor\n\t\t\t\t\t}\n\n\t\t\t\t\tif (THIS.alphaElement)\n\t\t\t\t\t{\n\t\t\t\t\t\tTHIS.fromHSVA(null, null, null, parseFloat(THIS.alphaElement.value), jsc.flags.leaveAlpha);\n\t\t\t\t\t}\n\n\t\t\t\t\tjsc.triggerCallback(THIS, 'onInput');\n\n\t\t\t\t\t// triggering valueElement's onInput (because changing alpha changes the entire color, e.g. with rgba format)\n\t\t\t\t\tjsc.triggerInputEvent(THIS.valueElement, 'input', true, true);\n\t\t\t\t}\n\n\n\t\t\t\t// let's process the DEPRECATED 'options' property (this will be later removed)\n\t\t\t\tif (jsc.pub.options)\n\t\t\t\t{\n\t\t\t\t\t// let's set custom default options, if specified\n\t\t\t\t\tfor (var opt in jsc.pub.options)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (jsc.pub.options.hasOwnProperty(opt))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetOption(opt, jsc.pub.options[opt]);\n\t\t\t\t\t\t\t} catch (e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconsole.warn(e);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\t// let's apply configuration presets\n\t\t\t\t//\n\t\t\t\tvar presetsArr = [];\n\n\t\t\t\tif (opts.preset)\n\t\t\t\t{\n\t\t\t\t\tif (typeof opts.preset === 'string')\n\t\t\t\t\t{\n\t\t\t\t\t\tpresetsArr = opts.preset.split(/\\s+/);\n\t\t\t\t\t} else if (Array.isArray(opts.preset))\n\t\t\t\t\t{\n\t\t\t\t\t\tpresetsArr = opts.preset.slice(); // slice() to clone\n\t\t\t\t\t} else\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.warn('Unrecognized preset value');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// always use the 'default' preset. If it's not listed, append it to the end.\n\t\t\t\tif (presetsArr.indexOf('default') === -1)\n\t\t\t\t{\n\t\t\t\t\tpresetsArr.push('default');\n\t\t\t\t}\n\n\t\t\t\t// let's apply the presets in reverse order, so that should there be any overlapping options,\n\t\t\t\t// the formerly listed preset will override the latter\n\t\t\t\tfor (var i = presetsArr.length - 1; i >= 0; i -= 1)\n\t\t\t\t{\n\t\t\t\t\tvar pres = presetsArr[i];\n\t\t\t\t\tif (!pres)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue; // preset is empty string\n\t\t\t\t\t}\n\t\t\t\t\tif (!jsc.pub.presets.hasOwnProperty(pres))\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.warn('Unknown preset: %s', pres);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tfor (var opt in jsc.pub.presets[pres])\n\t\t\t\t\t{\n\t\t\t\t\t\tif (jsc.pub.presets[pres].hasOwnProperty(opt))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetOption(opt, jsc.pub.presets[pres][opt]);\n\t\t\t\t\t\t\t} catch (e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconsole.warn(e);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\t// let's set specific options for this color picker\n\t\t\t\tvar nonProperties = [\n\t\t\t\t\t// these options won't be set as instance properties\n\t\t\t\t\t'preset',\n\t\t\t\t];\n\t\t\t\tfor (var opt in opts)\n\t\t\t\t{\n\t\t\t\t\tif (opts.hasOwnProperty(opt))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (nonProperties.indexOf(opt) === -1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetOption(opt, opts[opt]);\n\t\t\t\t\t\t\t} catch (e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconsole.warn(e);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\t//\n\t\t\t\t// Install the color picker on chosen element(s)\n\t\t\t\t//\n\n\n\t\t\t\t// Determine picker's container element\n\t\t\t\tif (this.container === undefined)\n\t\t\t\t{\n\t\t\t\t\tthis.container = window.document.body; // default container is BODY element\n\n\t\t\t\t} else\n\t\t\t\t{ // explicitly set to custom element\n\t\t\t\t\tthis.container = jsc.node(this.container);\n\t\t\t\t}\n\n\t\t\t\tif (!this.container)\n\t\t\t\t{\n\t\t\t\t\tthrow new Error('Cannot instantiate color picker without a container element');\n\t\t\t\t}\n\n\n\t\t\t\t// Fetch the target element\n\t\t\t\tthis.targetElement = jsc.node(targetElement);\n\n\t\t\t\tif (!this.targetElement)\n\t\t\t\t{\n\t\t\t\t\t// temporarily customized error message to help with migrating from versions prior to 2.2\n\t\t\t\t\tif (typeof targetElement === 'string' && /^[a-zA-Z][\\w:.-]*$/.test(targetElement))\n\t\t\t\t\t{\n\t\t\t\t\t\t// targetElement looks like valid ID\n\t\t\t\t\t\tvar possiblyId = targetElement;\n\t\t\t\t\t\tthrow new Error('If \\'' + possiblyId + '\\' is supposed to be an ID, please use \\'#' + possiblyId + '\\' or any valid CSS selector.');\n\t\t\t\t\t}\n\n\t\t\t\t\tthrow new Error('Cannot instantiate color picker without a target element');\n\t\t\t\t}\n\n\t\t\t\tif (this.targetElement.jscolor && this.targetElement.jscolor instanceof jsc.pub)\n\t\t\t\t{\n\t\t\t\t\tthrow new Error('Color picker already installed on this element');\n\t\t\t\t}\n\n\n\t\t\t\t// link this instance with the target element\n\t\t\t\tthis.targetElement.jscolor = this;\n\t\t\t\tjsc.addClass(this.targetElement, jsc.pub.className);\n\n\t\t\t\t// register this instance\n\t\t\t\tjsc.instances.push(this);\n\n\n\t\t\t\t// if target is BUTTON\n\t\t\t\tif (jsc.isButton(this.targetElement))\n\t\t\t\t{\n\n\t\t\t\t\tif (this.targetElement.type.toLowerCase() !== 'button')\n\t\t\t\t\t{\n\t\t\t\t\t\t// on buttons, always force type to be 'button', e.g. in situations the target <button> has no type\n\t\t\t\t\t\t// and thus defaults to 'submit' and would submit the form when clicked\n\t\t\t\t\t\tthis.targetElement.type = 'button';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (jsc.isButtonEmpty(this.targetElement))\n\t\t\t\t\t{ // empty button\n\t\t\t\t\t\t// it is important to clear element's contents first.\n\t\t\t\t\t\t// if we're re-instantiating color pickers on DOM that has been modified by changing page's innerHTML,\n\t\t\t\t\t\t// we would keep adding more non-breaking spaces to element's content (because element's contents survive\n\t\t\t\t\t\t// innerHTML changes, but picker instances don't)\n\t\t\t\t\t\tjsc.removeChildren(this.targetElement);\n\n\t\t\t\t\t\t// let's insert a non-breaking space\n\t\t\t\t\t\tthis.targetElement.appendChild(window.document.createTextNode('\\xa0'));\n\n\t\t\t\t\t\t// set min-width = previewSize, if not already greater\n\t\t\t\t\t\tvar compStyle = jsc.getCompStyle(this.targetElement);\n\t\t\t\t\t\tvar currMinWidth = parseFloat(compStyle['min-width']) || 0;\n\t\t\t\t\t\tif (currMinWidth < this.previewSize)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tjsc.setStyle(this.targetElement, {\n\t\t\t\t\t\t\t\t'min-width': this.previewSize + 'px',\n\t\t\t\t\t\t\t}, this.forceStyle);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Determine the value element\n\t\t\t\tif (this.valueElement === undefined)\n\t\t\t\t{\n\t\t\t\t\tif (jsc.isTextInput(this.targetElement))\n\t\t\t\t\t{\n\t\t\t\t\t\t// for text inputs, default valueElement is targetElement\n\t\t\t\t\t\tthis.valueElement = this.targetElement;\n\t\t\t\t\t} else\n\t\t\t\t\t{\n\t\t\t\t\t\t// leave it undefined\n\t\t\t\t\t}\n\n\t\t\t\t} else if (this.valueElement === null)\n\t\t\t\t{ // explicitly set to null\n\t\t\t\t\t// leave it null\n\n\t\t\t\t} else\n\t\t\t\t{ // explicitly set to custom element\n\t\t\t\t\tthis.valueElement = jsc.node(this.valueElement);\n\t\t\t\t}\n\n\t\t\t\t// Determine the alpha element\n\t\t\t\tif (this.alphaElement)\n\t\t\t\t{\n\t\t\t\t\tthis.alphaElement = jsc.node(this.alphaElement);\n\t\t\t\t}\n\n\t\t\t\t// Determine the preview element\n\t\t\t\tif (this.previewElement === undefined)\n\t\t\t\t{\n\t\t\t\t\tthis.previewElement = this.targetElement; // default previewElement is targetElement\n\n\t\t\t\t} else if (this.previewElement === null)\n\t\t\t\t{ // explicitly set to null\n\t\t\t\t\t// leave it null\n\n\t\t\t\t} else\n\t\t\t\t{ // explicitly set to custom element\n\t\t\t\t\tthis.previewElement = jsc.node(this.previewElement);\n\t\t\t\t}\n\n\t\t\t\t// valueElement\n\t\t\t\tif (this.valueElement && jsc.isTextInput(this.valueElement))\n\t\t\t\t{\n\n\t\t\t\t\t// If the value element has onInput event already set, we need to detach it and attach AFTER our listener.\n\t\t\t\t\t// otherwise the picker instance would still contain the old color when accessed from the onInput handler.\n\t\t\t\t\tvar valueElementOrigEvents = {\n\t\t\t\t\t\tonInput: this.valueElement.oninput\n\t\t\t\t\t};\n\t\t\t\t\tthis.valueElement.oninput = null;\n\n\t\t\t\t\tthis.valueElement.addEventListener('keydown', onValueKeyDown, false);\n\t\t\t\t\tthis.valueElement.addEventListener('change', onValueChange, false);\n\t\t\t\t\tthis.valueElement.addEventListener('input', onValueInput, false);\n\t\t\t\t\t// the original event listener must be attached AFTER our handler (to let it first set picker's color)\n\t\t\t\t\tif (valueElementOrigEvents.onInput)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.valueElement.addEventListener('input', valueElementOrigEvents.onInput, false);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.valueElement.setAttribute('autocomplete', 'off');\n\t\t\t\t\tthis.valueElement.setAttribute('autocorrect', 'off');\n\t\t\t\t\tthis.valueElement.setAttribute('autocapitalize', 'off');\n\t\t\t\t\tthis.valueElement.setAttribute('spellcheck', false);\n\t\t\t\t}\n\n\t\t\t\t// alphaElement\n\t\t\t\tif (this.alphaElement && jsc.isTextInput(this.alphaElement))\n\t\t\t\t{\n\t\t\t\t\tthis.alphaElement.addEventListener('keydown', onAlphaKeyDown, false);\n\t\t\t\t\tthis.alphaElement.addEventListener('change', onAlphaChange, false);\n\t\t\t\t\tthis.alphaElement.addEventListener('input', onAlphaInput, false);\n\n\t\t\t\t\tthis.alphaElement.setAttribute('autocomplete', 'off');\n\t\t\t\t\tthis.alphaElement.setAttribute('autocorrect', 'off');\n\t\t\t\t\tthis.alphaElement.setAttribute('autocapitalize', 'off');\n\t\t\t\t\tthis.alphaElement.setAttribute('spellcheck', false);\n\t\t\t\t}\n\n\t\t\t\t// determine initial color value\n\t\t\t\t//\n\t\t\t\tvar initValue = 'FFFFFF';\n\n\t\t\t\tif (this.value !== undefined)\n\t\t\t\t{\n\t\t\t\t\tinitValue = this.value; // get initial color from the 'value' property\n\t\t\t\t} else if (this.valueElement && this.valueElement.value !== undefined)\n\t\t\t\t{\n\t\t\t\t\tinitValue = this.valueElement.value; // get initial color from valueElement's value\n\t\t\t\t}\n\n\t\t\t\t// determine initial alpha value\n\t\t\t\t//\n\t\t\t\tvar initAlpha = undefined;\n\n\t\t\t\tif (this.alpha !== undefined)\n\t\t\t\t{\n\t\t\t\t\tinitAlpha = ('' + this.alpha); // get initial alpha value from the 'alpha' property\n\t\t\t\t} else if (this.alphaElement && this.alphaElement.value !== undefined)\n\t\t\t\t{\n\t\t\t\t\tinitAlpha = this.alphaElement.value; // get initial color from alphaElement's value\n\t\t\t\t}\n\n\t\t\t\t// determine current format based on the initial color value\n\t\t\t\t//\n\t\t\t\tthis._currentFormat = null;\n\n\t\t\t\tif (['auto', 'any'].indexOf(this.format.toLowerCase()) > -1)\n\t\t\t\t{\n\t\t\t\t\t// format is 'auto' or 'any' -> let's auto-detect current format\n\t\t\t\t\tvar color = jsc.parseColorString(initValue);\n\t\t\t\t\tthis._currentFormat = color ? color.format : 'hex';\n\t\t\t\t} else\n\t\t\t\t{\n\t\t\t\t\t// format is specified\n\t\t\t\t\tthis._currentFormat = this.format.toLowerCase();\n\t\t\t\t}\n\n\n\t\t\t\t// let's parse the initial color value and expose color's preview\n\t\t\t\tthis.processValueInput(initValue);\n\n\t\t\t\t// let's also parse and expose the initial alpha value, if any\n\t\t\t\t//\n\t\t\t\t// Note: If the initial color value contains alpha value in it (e.g. in rgba format),\n\t\t\t\t// this will overwrite it. So we should only process alpha input if there was initial\n\t\t\t\t// alpha explicitly set, otherwise we could needlessly lose initial value's alpha\n\t\t\t\tif (initAlpha !== undefined)\n\t\t\t\t{\n\t\t\t\t\tthis.processAlphaInput(initAlpha);\n\t\t\t\t}\n\n\t\t\t\tif (this.random)\n\t\t\t\t{\n\t\t\t\t\t// randomize the initial color value\n\t\t\t\t\tthis.randomize.apply(this, Array.isArray(this.random) ? this.random : []);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\n\t\t//================================\n\t\t// Public properties and methods\n\t\t//================================\n\n\t\t//\n\t\t// These will be publicly available via jscolor.<name> and JSColor.<name>\n\t\t//\n\n\n\t\t// class that will be set to elements having jscolor installed on them\n\t\tjsc.pub.className = 'jscolor';\n\n\n\t\t// class that will be set to elements having jscolor active on them\n\t\tjsc.pub.activeClassName = 'jscolor-active';\n\n\n\t\t// whether to try to parse the options string by evaluating it using 'new Function()'\n\t\t// in case it could not be parsed with JSON.parse()\n\t\tjsc.pub.looseJSON = true;\n\n\n\t\t// presets\n\t\tjsc.pub.presets = {};\n\n\t\t// built-in presets\n\t\tjsc.pub.presets['default'] = {}; // baseline for customization\n\n\t\tjsc.pub.presets['light'] = { // default color scheme\n\t\t\tbackgroundColor: 'rgba(255,255,255,1)',\n\t\t\tcontrolBorderColor: 'rgba(187,187,187,1)',\n\t\t\tbuttonColor: 'rgba(0,0,0,1)',\n\t\t};\n\t\tjsc.pub.presets['dark'] = {\n\t\t\tbackgroundColor: 'rgba(51,51,51,1)',\n\t\t\tcontrolBorderColor: 'rgba(153,153,153,1)',\n\t\t\tbuttonColor: 'rgba(240,240,240,1)',\n\t\t};\n\n\t\tjsc.pub.presets['small'] = { width: 101, height: 101, padding: 10, sliderSize: 14, paletteCols: 8 };\n\t\tjsc.pub.presets['medium'] = { width: 181, height: 101, padding: 12, sliderSize: 16, paletteCols: 10 }; // default size\n\t\tjsc.pub.presets['large'] = { width: 271, height: 151, padding: 12, sliderSize: 24, paletteCols: 15 };\n\n\t\tjsc.pub.presets['thin'] = { borderWidth: 1, controlBorderWidth: 1, pointerBorderWidth: 1 }; // default thickness\n\t\tjsc.pub.presets['thick'] = { borderWidth: 2, controlBorderWidth: 2, pointerBorderWidth: 2 };\n\n\n\t\t// size of space in the sliders\n\t\tjsc.pub.sliderInnerSpace = 3; // px\n\n\t\t// transparency chessboard\n\t\tjsc.pub.chessboardSize = 8; // px\n\t\tjsc.pub.chessboardColor1 = '#666666';\n\t\tjsc.pub.chessboardColor2 = '#999999';\n\n\t\t// preview separator\n\t\tjsc.pub.previewSeparator = ['rgba(255,255,255,.65)', 'rgba(128,128,128,.65)'];\n\n\n\t\t// Initializes jscolor\n\t\tjsc.pub.init = function ()\n\t\t{\n\t\t\tif (jsc.initialized)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// attach some necessary handlers\n\t\t\twindow.document.addEventListener('mousedown', jsc.onDocumentMouseDown, false);\n\t\t\twindow.document.addEventListener('keyup', jsc.onDocumentKeyUp, false);\n\t\t\twindow.addEventListener('resize', jsc.onWindowResize, false);\n\t\t\twindow.addEventListener('scroll', jsc.onWindowScroll, false);\n\n\t\t\t// install jscolor on current DOM\n\t\t\tjsc.pub.install();\n\n\t\t\tjsc.initialized = true;\n\n\t\t\t// call functions waiting in the queue\n\t\t\twhile (jsc.readyQueue.length)\n\t\t\t{\n\t\t\t\tvar func = jsc.readyQueue.shift();\n\t\t\t\tfunc();\n\t\t\t}\n\t\t};\n\n\n\t\t// Installs jscolor on current DOM tree\n\t\tjsc.pub.install = function (rootNode: any)\n\t\t{\n\t\t\tvar success = true;\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tjsc.installBySelector('[data-jscolor]', rootNode);\n\t\t\t} catch (e)\n\t\t\t{\n\t\t\t\tsuccess = false;\n\t\t\t\tconsole.warn(e);\n\t\t\t}\n\n\t\t\t// for backward compatibility with DEPRECATED installation using class name\n\t\t\tif (jsc.pub.lookupClass)\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tjsc.installBySelector(\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t'input.' + jsc.pub.lookupClass + ', ' +\n\t\t\t\t\t\t\t'button.' + jsc.pub.lookupClass\n\t\t\t\t\t\t),\n\t\t\t\t\t\trootNode\n\t\t\t\t\t);\n\t\t\t\t} catch (e) { }\n\t\t\t}\n\n\t\t\treturn success;\n\t\t};\n\n\n\t\t// Registers function to be called as soon as jscolor is initialized (or immediately, if it already is).\n\t\t//\n\t\tjsc.pub.ready = function (func: any)\n\t\t{\n\t\t\tif (typeof func !== 'function')\n\t\t\t{\n\t\t\t\tconsole.warn('Passed value is not a function');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (jsc.initialized)\n\t\t\t{\n\t\t\t\tfunc();\n\t\t\t} else\n\t\t\t{\n\t\t\t\tjsc.readyQueue.push(func);\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\n\n\t\t// Triggers given input event(s) (e.g. 'input' or 'change') on all color pickers.\n\t\t//\n\t\t// It is possible to specify multiple events separated with a space.\n\t\t// If called before jscolor is initialized, then the events will be triggered after initialization.\n\t\t//\n\t\tjsc.pub.trigger = function (eventNames: any)\n\t\t{\n\t\t\tvar triggerNow = function ()\n\t\t\t{\n\t\t\t\tjsc.triggerGlobal(eventNames);\n\t\t\t};\n\n\t\t\tif (jsc.initialized)\n\t\t\t{\n\t\t\t\ttriggerNow();\n\t\t\t} else\n\t\t\t{\n\t\t\t\tjsc.pub.ready(triggerNow);\n\t\t\t}\n\t\t};\n\n\n\t\t// Hides current color picker box\n\t\tjsc.pub.hide = function ()\n\t\t{\n\t\t\tif (jsc.picker && jsc.picker.owner)\n\t\t\t{\n\t\t\t\tjsc.picker.owner.hide();\n\t\t\t}\n\t\t};\n\n\n\t\t// Returns a data URL of a gray chessboard image that indicates transparency\n\t\tjsc.pub.chessboard = function (color: any)\n\t\t{\n\t\t\tif (!color)\n\t\t\t{\n\t\t\t\tcolor = 'rgba(0,0,0,0)';\n\t\t\t}\n\t\t\tvar preview = jsc.genColorPreviewCanvas(color);\n\t\t\treturn preview.canvas.toDataURL();\n\t\t};\n\n\n\t\t// Returns a data URL of a gray chessboard image that indicates transparency\n\t\tjsc.pub.background = function (color: any)\n\t\t{\n\t\t\tvar backgrounds = [];\n\n\t\t\t// CSS gradient for background color preview\n\t\t\tbackgrounds.push(jsc.genColorPreviewGradient(color));\n\n\t\t\t// data URL of generated PNG image with a gray transparency chessboard\n\t\t\tvar preview = jsc.genColorPreviewCanvas();\n\t\t\tbackgrounds.push([\n\t\t\t\t'url(\\'' + preview.canvas.toDataURL() + '\\')',\n\t\t\t\t'left top',\n\t\t\t\t'repeat',\n\t\t\t].join(' '));\n\n\t\t\treturn backgrounds.join(', ');\n\t\t};\n\n\n\t\t//\n\t\t// DEPRECATED properties and methods\n\t\t//\n\n\n\t\t// DEPRECATED. Use jscolor.presets.default instead.\n\t\t//\n\t\t// Custom default options for all color pickers, e.g. { hash: true, width: 300 }\n\t\tjsc.pub.options = {};\n\n\n\t\t// DEPRECATED. Use data-jscolor attribute instead, which installs jscolor on given element.\n\t\t//\n\t\t// By default, we'll search for all elements with class=\"jscolor\" and install a color picker on them.\n\t\t//\n\t\t// You can change what class name will be looked for by setting the property jscolor.lookupClass\n\t\t// anywhere in your HTML document. To completely disable the automatic lookup, set it to null.\n\t\t//\n\t\tjsc.pub.lookupClass = 'jscolor';\n\n\n\t\t// DEPRECATED. Use data-jscolor attribute instead, which installs jscolor on given element.\n\t\t//\n\t\t// Install jscolor on all elements that have the specified class name\n\t\tjsc.pub.installByClassName = function ()\n\t\t{\n\t\t\tconsole.error('jscolor.installByClassName() is DEPRECATED. Use data-jscolor=\"\" attribute instead of a class name.' + jsc.docsRef);\n\t\t\treturn false;\n\t\t};\n\n\n\t\tjsc.register();\n\n\n\t\treturn jsc.pub;\n\n\n\t})(); // END jscolor\n\n\n\tif (typeof window.jscolor === 'undefined')\n\t{\n\t\twindow.jscolor = window.JSColor = jscolor;\n\t}\n\n\n\t// END jscolor code\n\n\treturn jscolor;\n\n}); // END factory"],"names":["window","e","opts","opt","i","color","compStyle"],"mappings":"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"}
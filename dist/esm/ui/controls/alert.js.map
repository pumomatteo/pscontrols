{"version":3,"file":"alert.js","sources":["../../../../src/ui/controls/alert.ts"],"sourcesContent":["import { createWindow, ButtonModeEnum, WindowFooterItemTypeEnum, TextAlignEnum, puma } from \"../vr\";\nimport { Window } from \"./window\";\nimport { VrControlsEvent } from \"../common\";\nimport { Button } from \"./button\";\n\n//#region Options\nexport class AlertOptions {\n    textOkButton?: string;\n    content?: string;\n    title?: string;\n    width?: number | string;\n    height?: number | string;\n    textAlign?: TextAlignEnum;\n    css?: string;\n    cssContainer?: string;\n\n    onContentLoaded?(e: ContentAlertLoadedEvent): void;\n}\n//#endregion\n\n//#region Control\nexport class Alert {\n    private _window: Window;\n    private _options: AlertOptions;\n\n    constructor(text?: string | null, options?: AlertOptions | null) {\n        //#region Options\n        if (options == null)\n            options = new AlertOptions();\n\n        if (options.textOkButton == null) options.textOkButton = \"Ok\";\n        if (options.width == null) options.width = 300;\n        if (options.height == null) options.height = 120;\n        if (options.textAlign == null) options.textAlign = TextAlignEnum.Center;\n        //#endregion\n\n        this._options = options;\n\n        //#region Content\n        let content = \"\";\n        if (options.content == null && text == null) options.content = \"<div></div>\";\n        if (options.content != null)\n            content = options.content;\n        else if (text != null)\n            content = text;\n        //#endregion\n\n        //#region Text align\n        let textAlign = \"\";\n        switch (options.textAlign) {\n            case TextAlignEnum.Left: textAlign = \"text-align: left;\"; break;\n            case TextAlignEnum.Center: textAlign = \"text-align: center;\"; break;\n            case TextAlignEnum.Right: textAlign = \"text-align: right;\"; break;\n        }\n        //#endregion\n\n        this._window = createWindow(\n            {\n                addToControlList: false,\n                closeable: false,\n                title: options.title,\n                width: options.width,\n                height: options.height,\n                removeOnClose: true,\n                content: \"<div class='contentContainer'>\" + content + \"</div>\",\n                cssContainer: \"height: auto !important;\",\n                css: \"height: auto !important;\" + textAlign,\n                footer:\n                    [\n                        { type: WindowFooterItemTypeEnum.Ok, text: options.textOkButton, value: \"ok\", cssContainer: \"width: 100%;\", css: \"width: 100%;\", mode: ButtonModeEnum.Primary, onClick: () => this.close() }\n                    ],\n                onContentLoaded: (e) => this.onContentLoaded(puma(e.sender.element()).find(\".contentContainer\")[0])\n            });\n\n        if (options.cssContainer != null)\n            this._window.container().style.cssText += options.cssContainer + \";\";\n\n        if (options.css != null)\n            this._window.element().style.cssText += options.css + \";\";\n\n        puma(this._window.element()).addClass(\"vrAlert\");\n        puma(this._window.container()).addClass(\"vrAlertContainer\");\n        window.setTimeout(() => puma(this._window.footerItem<Button>(\"ok\")!.element()).focus());\n    }\n\n    open(): Promise<any> {\n        let promise = new Promise((okCallback?: Function) => {\n            this._window.open(\n                [\n                    {\n                        value: \"ok\", callback: () => {\n                            if (okCallback != null)\n                                okCallback();\n                        }\n                    }\n                ]\n            )\n        });\n        return promise;\n    }\n\n    close(): void {\n        this._window.close();\n        puma(this._window.container()).remove();\n        puma(this._window.background()).remove();\n    }\n\n    private getOptions(): AlertOptions {\n        return this._options;\n    }\n\n    private onContentLoaded(contentElement: HTMLElement): void {\n        let options = this.getOptions();\n        if (options.onContentLoaded != null) {\n            let contentLoadedEvent = new ContentAlertLoadedEvent();\n            contentLoadedEvent.sender = this;\n            contentLoadedEvent.contentElement = contentElement;\n            options.onContentLoaded(contentLoadedEvent);\n        }\n    }\n}\n//#endregion\n\n//#region Events\nclass ContentAlertLoadedEvent extends VrControlsEvent {\n    sender: Alert;\n    contentElement: HTMLElement;\n}\n//#endregion"],"names":[],"mappings":"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"}
{"version":3,"file":"treeView.js","sources":["../../../../src/ui/controls/treeView.ts"],"sourcesContent":["import { ControlManager } from \"../../../src/managers/controlManager\";\nimport { UtilityManager } from \"../../../src/managers/utilityManager\";\nimport { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\nimport { alert, ButtonModeEnum, ControlPositionEnum, confirm, ControlTypeEnum, createButton, createLabel, createSeparator, createTextBox, DateModeEnum, div, hideLoader, icon, IconClassicLight, IconClass, notify, OrientationEnum, puma, shadowRoot, showLoader, span, TextAlignEnum, TreeModeEnum, TreeViewAlignEnum, TreeViewColumn, TreeViewColumnTypeEnum, TreeViewContextMenuItem, TreeViewFilterSettings, TreeViewItem, TreeViewItemExtraCell, TreeViewNumericTypeEnum, TreeViewToolbarClickEvent, TreeViewToolbarItem, TreeViewToolbarItemType, createSplitButton, TreeViewToolbarSwitchEvent, createSwitch, TreeViewToolbarSwitchSettings, createDatePicker, createComboBox, createCheckBox, createButtonGroup, SelectionModeEnum, IconClassicSolid, NumberFormatSettings, addCssStyle, UpdateRowRebindSettings } from \"../vr\";\nimport { Button } from \"./button\";\nimport { ComboBoxOptions } from \"./comboBox\";\nimport { DatePickerOptions } from \"./datePicker\";\nimport { Label } from \"./label\";\nimport { TextBox, TextBoxOptions } from \"./textbox\";\n\n//#region Options\nexport class TreeViewOptions extends VrControlOptions\n{\n\tcheckboxes?: boolean;\n\ttreeMode?: TreeModeEnum;\n\tdatasource?: any[];\n\trebind?: TreeViewRebindRequest;\n\tdataSourceFieldId?: string;\n\tfilter?: boolean | TreeViewFilterSettings;\n\tshowLink?: boolean;\n\ttitle?: string;\n\trightClickForContextMenu?: boolean;\n\tleftClickForContextMenu?: boolean;\n\tparentClickable?: boolean;\n\tcontextMenuItems?: TreeViewContextMenuItem[];\n\tshowEditButton?: boolean;\n\tdraggable?: boolean;\n\tselectable?: boolean;\n\talternateColor?: boolean;\n\tspaceBetweenGroups?: boolean;\n\trowHeight?: number;\n\trowLine?: number;\n\texport?: boolean | TreeViewExportSettings;\n\tcolumns?: TreeViewColumn[];\n\ttoolbar?: TreeViewToolbarItem[];\n\n\ttemplate?: (e: TreeViewTemplateEvent) => void | string;\n\tonBeforeSelect?(e: TreeViewChangingEvent): void;\n\tonAfterSelect?(e: TreeViewChangeEvent): void;\n\tonDoubleClick?(e: TreeViewDoubleClickEvent): void;\n\tonEdit?(e: TreeViewEditEvent): void;\n\tonDragStart?(e: TreeViewDragStartEvent): void;\n\tonDragMove?(e: TreeViewDragMoveEvent): void;\n\tonDragEnd?(e: TreeViewDragEndEvent): void;\n}\n//#endregion\n\n//#region Control\nexport class TreeView extends VrControl\n{\n\tprivate _items: any[];\n\tprivate _dictionaryValueLi: Map<string, HTMLElement[]>;\n\tprivate _dictionaryLiValue: Map<HTMLElement, string>;\n\tprivate _checkedValues: string[];\n\tprivate _isChecked: boolean;\n\tprivate _tempCheckedValue: string | null;\n\tprivate _value?: string[] | null;\n\tprivate _divContextMenu: HTMLElement;\n\tprivate _dataItemContextMenu: any;\n\tprivate _actualDraggedItem: TreeViewItem | null;\n\tprivate _lblTitle: Label;\n\tprivate _tempRebindInfo: TempRebindInfo | null;\n\tprivate _divContent: HTMLElement;\n\tprivate _divHeaderSpace: HTMLElement;\n\tprivate _divTitle: HTMLElement;\n\tprivate _divToolbar: HTMLElement;\n\tprivate _timeoutClick: number;\n\tprivate _txtSearchFilter: TextBox;\n\n\tconstructor(element: HTMLElement, options?: TreeViewOptions | null)\n\t{\n\t\t//#region Options\n\t\tif (options == null)\n\t\t\toptions = new TreeViewOptions();\n\n\t\tif (options.checkboxes == null) options.checkboxes = false;\n\t\tif (options.treeMode == null) options.treeMode = TreeModeEnum.AllExpanded;\n\t\tif (options.showLink == null) options.showLink = true;\n\t\tif (options.rightClickForContextMenu == null) options.rightClickForContextMenu = false;\n\t\tif (options.leftClickForContextMenu == null) options.leftClickForContextMenu = false;\n\t\tif (options.parentClickable == null) options.parentClickable = false;\n\t\tif (options.contextMenuItems == null) options.contextMenuItems = [];\n\t\tif (options.showEditButton == null) options.showEditButton = false;\n\t\tif (options.onEdit != null) options.showEditButton = true;\n\t\tif (options.draggable == null) options.draggable = false;\n\t\tif (options.onDragStart != null || options.onDragMove != null || options.onDragEnd != null) options.draggable = true;\n\t\tif (options.alternateColor == null) options.alternateColor = false;\n\t\tif (options.spaceBetweenGroups == null) options.spaceBetweenGroups = false;\n\t\tif (options.rowLine != null && options.rowLine > 1 && options.rowHeight == null) options.rowHeight = 20 * options.rowLine;\n\t\tif (options.rowLine == 1) options.rowLine = undefined;\n\t\tif (options.rowHeight == null) options.rowHeight = 27;\n\t\tif (options.selectable == null) options.selectable = true;\n\t\tif (options.dataSourceFieldId == null) options.dataSourceFieldId = \"id\";\n\n\t\tif (options.export == null) options.export = false;\n\t\tif (options.export !== false && options.title == null) options.title = \"\";\n\t\tif (options.export === true) options.export = new TreeViewExportSettings();\n\n\t\tif (options.filter == null) options.filter = false;\n\t\tif (options.filter === true) options.filter = new TreeViewFilterSettings();\n\t\tif (options.filter !== false)\n\t\t\tif (options.filter.onlyParents == null) options.filter.onlyParents = false;\n\t\t//#endregion\n\n\t\tsuper(element, options, ControlTypeEnum.TreeView);\n\t\tthis.element().style.cssText += \"height: 100%;\";\n\t\tthis._checkedValues = [];\n\n\t\t//#region Title\n\t\tif (options.columns != null && options.title == null) options.title = \"\";\n\t\tif (options.title != null || options.columns != null || options.export !== false)\n\t\t{\n\t\t\tthis._divTitle = puma(\"<div style='position: relative; display: flex;' class='vrTreeView_divTitle'></div>\")[0];\n\t\t\tpuma(this.element()).vrPrependPuma(this._divTitle);\n\n\t\t\tcreateButton({\n\t\t\t\ttext: \"Excel\",\n\t\t\t\ticon: IconClassicLight.FileExcel,\n\t\t\t\tcss: \"height: 24px;\",\n\t\t\t\tcolorSettings: { background: \"#008a00\", textColor: \"#FFF\" },\n\t\t\t\tcssContainer: \"position: absolute; z-index: 9; top: 3px; left: 5px;\",\n\t\t\t\tvisible: options.export !== false,\n\t\t\t\tonClick: (e) =>\n\t\t\t\t{\n\t\t\t\t\tthis.excelExport();\n\t\t\t\t}\n\t\t\t}, this._divTitle)\n\n\t\t\tif (options.title != null)\n\t\t\t{\n\t\t\t\tthis._lblTitle = createLabel({\n\t\t\t\t\ttext: options.title,\n\t\t\t\t\tcss: \"padding: 5px; height: 19px; border-radius: unset; width: Calc(100% - 10px);\",\n\t\t\t\t\tcolorSettings: { background: \"#e3f1fa\", textColor: \"#000\" },\n\t\t\t\t\talign: TextAlignEnum.Center,\n\t\t\t\t\twidth: \"Calc(100% - \" + this.widthColumns() + \"px)\",\n\t\t\t\t\tcssContainer: \"display: block !important; height: 29px;\"\n\t\t\t\t}, this._divTitle);\n\t\t\t}\n\n\t\t\tif (options.columns != null)\n\t\t\t{\n\t\t\t\tfor (let column of options.columns)\n\t\t\t\t{\n\t\t\t\t\tlet width = (column.width != null) ? column.width : 100;\n\t\t\t\t\tlet divColumn = div(this._divTitle, { css: \"width: \" + width + \"px;\", class: \"vrTreeViewColumn\", attributes: [{ name: \"field\", value: column.field }] });\n\n\t\t\t\t\tcreateLabel({\n\t\t\t\t\t\ttext: (column.title != null) ? column.title : \"\",\n\t\t\t\t\t\tcssContainer: \"padding-left: 5px; padding-right: 5px;\"\n\t\t\t\t\t}, divColumn)\n\t\t\t\t}\n\n\t\t\t\tthis._divHeaderSpace = div(this._divTitle, { css: \"background-color: #e3f1fa; width: 17px; display: none;\" })\n\t\t\t}\n\t\t}\n\t\t//#endregion\n\n\t\t//#region Toolbar\n\t\tif (options.toolbar != null)\n\t\t{\n\t\t\tthis._divToolbar = puma(\"<div id='\" + element.id + \"Toolbar' class='treeView_divToolbar'></div>\").vrPrependToPuma(this.element())[0] as HTMLDivElement;\n\n\t\t\tfor (let toolbarItem of options.toolbar)\n\t\t\t\tthis.addToolbarItem(toolbarItem);\n\t\t}\n\t\t//#endregion\n\n\t\t//#region Filter\n\t\tlet timeout = 0;\n\t\tthis._txtSearchFilter = createTextBox(\n\t\t\t{\n\t\t\t\twidth: \"100%\",\n\t\t\t\ticon: IconClassicLight.Search,\n\t\t\t\tplaceholder: \"Cerca...\",\n\t\t\t\tclass: \"vrTreeViewFilter\",\n\t\t\t\tvisible: options.filter !== false,\n\t\t\t\tcssContainer: \"margin-top: 1px;\",\n\t\t\t\tonKeyDown: (e) =>\n\t\t\t\t{\n\t\t\t\t\tthis.limitInputByDataSource(e.sender.element() as HTMLInputElement, e);\n\t\t\t\t},\n\t\t\t\tonKeyUp: (e) =>\n\t\t\t\t{\n\t\t\t\t\tthis.limitInputByDataSource(e.sender.element() as HTMLInputElement, e);\n\t\t\t\t\tclearTimeout(timeout);\n\t\t\t\t\ttimeout = window.setTimeout(() => \n\t\t\t\t\t{\n\t\t\t\t\t\tlet text: string = e.sender.value();\n\t\t\t\t\t\tthis.filter(text);\n\t\t\t\t\t}, 200);\n\t\t\t\t}\n\t\t\t}, this.element());\n\t\t//#endregion\n\n\t\tlet titleHeight = (options.title != null) ? 29 : 0;\n\t\tlet filterHeight = (options.filter !== false) ? 27 : 0;\n\t\tlet toolbarHeight = (options.toolbar != null) ? 34 : 0;\n\t\tthis._divContent = div(this.element(), { css: \"display: flex; height: Calc(100% - \" + (titleHeight + filterHeight + toolbarHeight) + \"px);\", class: \"vrTreeViewDivContent\" })\n\n\t\tif (options.rowHeight != 27)\n\t\t{\n\t\t\taddCssStyle(`\n\t\t\t\t#` + this.element().id + ` .vrTreeViewLiLink::after {\n\t\t\t\t\ttop: ` + (options.rowHeight / 2) + `px !important;\n\t\t\t\t}\n\t\t\t\t#` + this.element().id + ` .vrTreeViewLiLink:last-child::before {\n\t\t\t\t\theight: ` + ((options.rowHeight / 2) + 1) + `px !important;\n\t\t\t\t}\n\t\t\t\t#` + this.element().id + ` .vrTreeViewLiLink.vrTreeViewLiFirstChild:last-child::before {\n\t\t\t\t\theight: 0px !important;\n\t\t\t\t}\n\t\t\t`);\n\t\t}\n\n\t\t//#region Datasource\n\t\tif (options.datasource != null)\n\t\t\tthis.datasource(options.datasource);\n\t\t//#endregion\n\n\t\t//#region Rebind\n\t\tif (options.rebind != null && options.rebind.rebindAtStartup === true)\n\t\t\tthis.doWebApiCall(options.rebind, TreeViewRequestTypeEnum.Rebind);\n\t\t//#endregion\n\t}\n\n\t//#region Methods\n\tdatasource(items?: any[]): any[]\n\t{\n\t\tif (items != null)\n\t\t{\n\t\t\tthis._items = items;\n\t\t\tif (this.getRootItems().length == 0)\n\t\t\t\tpuma(this.element()).addClass(\"vrTreeViewFlat\");\n\t\t\telse\n\t\t\t\tpuma(this.element()).removeClass(\"vrTreeViewFlat\");\n\n\t\t\t//#region Get info before rebind\n\t\t\tthis._tempRebindInfo = new TempRebindInfo();\n\t\t\tthis._tempRebindInfo.selectedValue = this.value();\n\n\t\t\tlet parentExpandedValueList: string[] = [];\n\t\t\tlet expandedList = puma(this.container()).find(\".vrTreeViewLi .caret-down\");\n\t\t\tfor (let expanded of Array.from(expandedList))\n\t\t\t\tparentExpandedValueList.push((expanded as any).parentElement!.getAttribute(\"value\")!);\n\n\t\t\tthis._tempRebindInfo.parentExpandedValueList = parentExpandedValueList;\n\n\t\t\tlet firstUl = puma(this.container()).find(\".vrTreeViewUl\").first();\n\t\t\tif (firstUl[0] != null)\n\t\t\t\tthis._tempRebindInfo.yPosition = firstUl[0].scrollTop;\n\t\t\t//#endregion\n\n\t\t\tthis.drawDataSource();\n\n\t\t\t//#region Keep info after rebind\n\t\t\tfor (let parentExpandedValue of this._tempRebindInfo!.parentExpandedValueList)\n\t\t\t{\n\t\t\t\tlet li = this._dictionaryValueLi.get(parentExpandedValue);\n\t\t\t\tif (li != null)\n\t\t\t\t{\n\t\t\t\t\tlet divIconExpandCollpase = puma(li).find(\".vrTreeViewDivIconExpand\")[0];\n\t\t\t\t\tif (divIconExpandCollpase != null && puma(divIconExpandCollpase).hasClass(\"caret-right\"))\n\t\t\t\t\t\tpuma(divIconExpandCollpase).click();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this._tempRebindInfo.selectedValue != null && this._tempRebindInfo.selectedValue != \"\" && this._tempRebindInfo.selectedValue.length > 0)\n\t\t\t\tthis.value(this._tempRebindInfo.selectedValue, false);\n\n\t\t\tpuma(this.container()).find(\".vrTreeViewUl\").first().scrollTop(this._tempRebindInfo!.yPosition);\n\t\t\t//#endregion\n\t\t}\n\t\treturn this._items;\n\t}\n\n\trebind(parameters?: any | null, loadingElement?: boolean | HTMLElement | JQuery | string): any\n\t{\n\t\tlet promise = new Promise((callback: Function) =>\n\t\t{\n\t\t\tlet options = this.getOptions();\n\t\t\tif (options.rebind != null)\n\t\t\t{\n\t\t\t\toptions.rebind.otherParameters = undefined;\n\t\t\t\tif (parameters != null)\n\t\t\t\t\toptions.rebind.otherParameters = parameters;\n\n\t\t\t\t(options.rebind as any).tempLoadingElement = loadingElement;\n\n\t\t\t\tthis.doWebApiCall(options.rebind, TreeViewRequestTypeEnum.Rebind, callback);\n\t\t\t}\n\t\t});\n\t\treturn promise;\n\t}\n\n\tupdate()\n\t{\n\t\tthis.datasource(this.datasource());\n\t}\n\n\tprivate drawDataSource(): void\n\t{\n\t\tlet options = this.getOptions();\n\t\tpuma(this._divContent).empty();\n\n\t\tlet items = this.datasource();\n\t\tif (items.length == 1 && items[0] == null)\n\t\t\treturn;\n\n\t\tlet divTreeView = div(this._divContent, { css: \"width: 100%;\" });\n\n\t\tthis._dictionaryValueLi = new Map<string, HTMLElement[]>();\n\t\tthis._dictionaryLiValue = new Map<HTMLElement, string>();\n\t\titems = items.filter(k => k.parentValue == null || k.parentValue == \"0\" || k.parentValue == \"\");\n\t\tthis.drawItems(items, divTreeView);\n\n\t\t//#region Alternate color\n\t\tif (options.alternateColor)\n\t\t{\n\t\t\twindow.setTimeout(() =>\n\t\t\t{\n\t\t\t\tlet odd = true;\n\t\t\t\tfor (let item of Array.from<HTMLElement>(puma(this.container()).find(\".vrTreeViewDivItemContainer\")))\n\t\t\t\t{\n\t\t\t\t\todd = !odd;\n\t\t\t\t\tif (odd)\n\t\t\t\t\t\t$(item).css(\"background-color\", \"#fff\");\n\t\t\t\t\telse\n\t\t\t\t\t\t$(item).css(\"background-color\", \"#f3f3f3\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t//#endregion\n\n\t\tif (this._lblTitle != null)\n\t\t{\n\t\t\tthis._lblTitle.width(\"Calc(100% - \" + (this.widthColumns()) + \"px)\");\n\t\t\tthis._lblTitle.element().style.cssText += \"width: Calc(100% - 10px) !important;\";\n\t\t}\n\n\t\t//Scrollbar\n\t\tthis.manageScrollbar();\n\n\t\t//Filter\n\t\tif (this._txtSearchFilter.value() != null && this._txtSearchFilter.value() != \"\")\n\t\t\tthis.filter(this._txtSearchFilter.value());\n\t}\n\n\tprivate manageScrollbar()\n\t{\n\t\tlet options = this.getOptions();\n\t\tif (puma(this.container()).find(\".vrTreeViewUl\").first().vrHasScrollBar())\n\t\t{\n\t\t\tif (options.columns != null)\n\t\t\t{\n\t\t\t\tpuma(this._divHeaderSpace).show();\n\n\t\t\t\tif (this._lblTitle != null)\n\t\t\t\t\tthis._lblTitle.width(\"Calc(100% - \" + (this.widthColumns() + 17) + \"px)\");\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tpuma(this._divHeaderSpace).hide();\n\t}\n\n\tprivate drawItems(items: any[], elementToAppend: HTMLElement): void\n\t{\n\t\tlet options = this.getOptions();\n\t\tif (items.length == 0)\n\t\t\treturn;\n\n\t\tlet ul = puma(\"<ul class='vrTreeViewUl' style='height: 100%; overflow-y: auto;'></ul>\").vrAppendToPuma(elementToAppend);\n\t\tlet i = 0;\n\t\tfor (let item of items)\n\t\t{\n\t\t\tif (item.value == null)\n\t\t\t\titem.value = item.text;\n\n\t\t\tlet liClassShowLink = (options.showLink) ? \"vrTreeViewLiLink\" : \"\";\n\t\t\tlet li = puma(\"<li class='vrTreeViewLi \" + liClassShowLink + \"' tabindex='-1' parentValue='\" + item.parentValue + \"' value='\" + item.value + \"'></li>\").vrAppendToPuma(ul);\n\n\t\t\tthis._dictionaryLiValue.set(li[0], item.value);\n\t\t\tif (this._dictionaryValueLi.has(item.value))\n\t\t\t{\n\t\t\t\tlet actualLiList = this._dictionaryValueLi.get(item.value)!;\n\t\t\t\tactualLiList.push(li[0]);\n\t\t\t\tthis._dictionaryValueLi.set(item.value, actualLiList);\n\t\t\t}\n\t\t\telse\n\t\t\t\tthis._dictionaryValueLi.set(item.value, [li[0]]);\n\n\t\t\t//#region Tree mode\n\t\t\tif (options.treeMode == TreeModeEnum.AllCollapsed)\n\t\t\t{\n\t\t\t\tif (item.parentValue != null && item.parentValue != \"0\")\n\t\t\t\t\tpuma(li).closest(\".vrTreeViewUl\").hide();\n\t\t\t}\n\t\t\telse if (options.treeMode == TreeModeEnum.OnlyFirstLevelExpanded)\n\t\t\t{\n\t\t\t\tif (puma(li).parents(\".vrTreeViewUl\").length > 2)\n\t\t\t\t\tpuma(li).closest(\".vrTreeViewUl\").hide();\n\t\t\t}\n\t\t\t//#endregion\n\n\t\t\tlet children = this.getOnlyChildrenItems(item);\n\t\t\tif (children.length > 0)\n\t\t\t{\n\t\t\t\tif (options.spaceBetweenGroups && i > 0)\n\t\t\t\t\tli[0].style.cssText += \"margin-top: 20px;\";\n\n\t\t\t\t//#region Icon expand/collapse\n\t\t\t\tlet iconClassForDiv = \"\";\n\t\t\t\tlet iconClass = IconClassicLight.CaretRight;\n\t\t\t\tif (options.treeMode == TreeModeEnum.AllCollapsed)\n\t\t\t\t{\n\t\t\t\t\tif (item.parentValue != null)\n\t\t\t\t\t{\n\t\t\t\t\t\ticonClass = IconClassicLight.CaretRight;\n\t\t\t\t\t\ticonClassForDiv = \"caret-right\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (options.treeMode == TreeModeEnum.OnlyFirstLevelExpanded)\n\t\t\t\t{\n\t\t\t\t\tif (puma(li).parents(\".vrTreeViewUl\").length == 1)\n\t\t\t\t\t{\n\t\t\t\t\t\ticonClass = IconClassicLight.CaretDown;\n\t\t\t\t\t\ticonClassForDiv = \"caret-down\";\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\ticonClass = IconClassicLight.CaretRight;\n\t\t\t\t\t\ticonClassForDiv = \"caret-right\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ticonClass = IconClassicLight.CaretDown;\n\t\t\t\t\ticonClassForDiv = \"caret-down\";\n\t\t\t\t}\n\n\t\t\t\tlet divIcon = puma(\"<div class='vrTreeViewDivIconExpand \" + iconClassForDiv + \"' style='height: \" + options.rowHeight + \"px;'></div>\").vrAppendToPuma(li);\n\t\t\t\tpuma(UtilityManager.createIcon(iconClass)).vrAppendToPuma(divIcon);\n\t\t\t\tpuma(divIcon).click((e: any) =>\n\t\t\t\t{\n\t\t\t\t\tpuma(e.currentTarget).children(\"i\").removeClass(IconClassicLight.CaretRight + \" \" + IconClassicLight.CaretDown);\n\t\t\t\t\tpuma(e.currentTarget).removeClass(\"caret-right caret-down\");\n\n\t\t\t\t\tlet ulChildren = puma(e.currentTarget).siblings(\".vrTreeViewUl\");\n\t\t\t\t\tif (ulChildren.first().is(\":visible\"))\n\t\t\t\t\t{\n\t\t\t\t\t\tulChildren.hide();\n\t\t\t\t\t\tpuma(e.currentTarget).children(\"i\").addClass(IconClassicLight.CaretRight);\n\t\t\t\t\t\tpuma(e.currentTarget).addClass(\"caret-right\");\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tulChildren.show();\n\t\t\t\t\t\tpuma(e.currentTarget).children(\"i\").addClass(IconClassicLight.CaretDown);\n\t\t\t\t\t\tpuma(e.currentTarget).addClass(\"caret-down\");\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.manageScrollbar();\n\t\t\t\t});\n\t\t\t\t//#endregion\n\t\t\t}\n\n\t\t\tlet treeViewDivItemContainer = puma(\"<div class='vrTreeViewDivItemContainer' style='height: \" + options.rowHeight + \"px;'></div>\").vrAppendToPuma(li);\n\t\t\tif (options.checkboxes)\n\t\t\t{\n\t\t\t\tlet checkBox = puma(\"<input type='checkbox' class='vrCheckBox'></input>\").vrAppendToPuma(treeViewDivItemContainer);\n\t\t\t\tpuma(checkBox).click((e: JQuery.ClickEvent) =>\n\t\t\t\t{\n\t\t\t\t\tlet isChecked = e.currentTarget.checked;\n\t\t\t\t\tlet value = this._dictionaryLiValue.get(puma(e.currentTarget).closest(\"li\")[0])!;\n\n\t\t\t\t\tif (isChecked)\n\t\t\t\t\t\tthis._checkedValues.push(value);\n\t\t\t\t\telse\n\t\t\t\t\t\tthis._checkedValues.vrDelete(value);\n\n\t\t\t\t\tlet targetItem = this.datasource().filter(k => k.value == value)[0];\n\t\t\t\t\tif (targetItem != null && this.getOnlyChildrenItems(targetItem).length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet childrenItems = this.getAllChildrenItems(targetItem);\n\t\t\t\t\t\tif (e.currentTarget.checked)\n\t\t\t\t\t\t\tthis._checkedValues.vrPushRange(childrenItems.map(k => k.value));\n\n\t\t\t\t\t\tlet childrenCheckboxes = this.getChildrenCheckboxElements<JQuery>(targetItem, false);\n\t\t\t\t\t\tpuma(childrenCheckboxes).prop(\"checked\", e.currentTarget.checked);\n\n\t\t\t\t\t\tfor (let childItem of childrenItems)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!e.currentTarget.checked)\n\t\t\t\t\t\t\t\tthis._checkedValues.vrDelete(childItem.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//#endregion\n\n\t\t\t\t\tthis._isChecked = e.currentTarget.checked;\n\n\t\t\t\t\tif (!this._isChecked)\n\t\t\t\t\t\tthis._checkedValues.vrDelete(item.value);\n\n\t\t\t\t\t//#region Other checkboxes same value\n\t\t\t\t\tlet comboItemTexts: HTMLSpanElement[] = [];\n\t\t\t\t\tlet liList = this._dictionaryValueLi.get(item.value)!;\n\t\t\t\t\tfor (let li of liList)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet comboItemText = puma(li).find(\".vrTreeViewItemText\")[0];\n\t\t\t\t\t\tcomboItemTexts.push(comboItemText);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let comboItemText of comboItemTexts)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet checkBox = puma(comboItemText).siblings(\"input\");\n\t\t\t\t\t\tpuma(checkBox).prop(\"checked\", this._isChecked);\n\t\t\t\t\t\tcheckBox[0].checked = this._isChecked;\n\t\t\t\t\t\tpuma(checkBox).removeClass(\"indeterminateVrCheckbox\");\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let otherItem of this.datasource().filter(k => k.value == item.value))\n\t\t\t\t\t{\n\t\t\t\t\t\tlet parentChecked = this.manageCheckParent(otherItem);\n\t\t\t\t\t\tif (!parentChecked && otherItem.parentValue != null)\n\t\t\t\t\t\t\tthis._checkedValues.vrDelete(otherItem.parentValue);\n\t\t\t\t\t\telse if (parentChecked && otherItem.parentValue != null && !this._checkedValues.includes(otherItem.parentValue))\n\t\t\t\t\t\t\tthis._checkedValues.push(otherItem.parentValue);\n\t\t\t\t\t}\n\t\t\t\t\t//#endregion\n\n\t\t\t\t\tlet parentChecked = this.manageCheckParent(item);\n\t\t\t\t\tif (!parentChecked && item.parentValue != null)\n\t\t\t\t\t\tthis._checkedValues.vrDelete(item.parentValue);\n\t\t\t\t\telse if (parentChecked && item.parentValue != null && !this._checkedValues.includes(item.parentValue))\n\t\t\t\t\t\tthis._checkedValues.push(item.parentValue);\n\n\t\t\t\t\tthis._tempCheckedValue = item.value;\n\t\t\t\t\tthis._checkedValues = this._checkedValues.vrDistinct();\n\t\t\t\t\tthis.value(this._checkedValues);\n\t\t\t\t\tthis._tempCheckedValue = null;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tlet classIfCheckbox = (options.checkboxes) ? \"vrTreeViewItemTextCheckbox\" : \"\";\n\n\t\t\tlet spanTreeItemTextContainer = puma(\"<span class='vrTreeViewItemTextContainer'></span>\").vrAppendToPuma(treeViewDivItemContainer);\n\t\t\tspanTreeItemTextContainer[0].style.cssText += \"width: Calc(100% - \" + (this.widthColumns() + 1) + \"px);\";\n\n\t\t\tlet treeViewItemText = puma(\"<span title='\" + item.text + \"' text='\" + item.text.replace(/'/g, \"&#39;\") + \"' class='vrTreeViewItemText \" + classIfCheckbox + \"'></span>\").vrAppendToPuma(spanTreeItemTextContainer);\n\n\t\t\t//#region Text\n\t\t\tif (options.template == null)\n\t\t\t{\n\t\t\t\tlet iconText = \"\";\n\t\t\t\tif (item.icon != null)\n\t\t\t\t\ticonText = \"<i class='\" + item.icon + \"' style='margin-right: 5px;'></i>\";\n\n\t\t\t\tlet rowText = item.text.replace(/'/g, \"&#39;\");\n\t\t\t\tlet styleRow = \"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: inline-block;\";\n\t\t\t\tif (options.rowLine != null && options.rowLine > 1)\n\t\t\t\t\tstyleRow = \"display: -webkit-inline-box; overflow: hidden; -webkit-line-clamp: \" + options.rowLine + \"; -webkit-box-orient: vertical;white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;\";\n\n\t\t\t\trowText = iconText + \"<span class='vrTreeViewSpanValue' style='\" + styleRow + \"'>\" + rowText + \"</span>\";\n\t\t\t\tpuma(rowText).vrAppendToPuma(treeViewItemText);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet templateEvent = new TreeViewTemplateEvent();\n\t\t\t\ttemplateEvent.sender = this;\n\t\t\t\ttemplateEvent.dataItem = item;\n\t\t\t\ttemplateEvent.container = treeViewItemText[0];\n\n\t\t\t\tlet templateResult = options.template(templateEvent);\n\t\t\t\tif (typeof (templateResult) == \"string\")\n\t\t\t\t{\n\t\t\t\t\tlet rowText = templateResult;\n\t\t\t\t\tif (item.icon != null)\n\t\t\t\t\t\trowText = \"<i class='\" + item.icon + \"' style='margin-right: 5px;'></i>\" + rowText;\n\n\t\t\t\t\tlet styleRow = \"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: inline-block;\";\n\t\t\t\t\tif (options.rowLine != null && options.rowLine > 1)\n\t\t\t\t\t\tstyleRow = \"display: -webkit-inline-box; overflow: hidden; -webkit-line-clamp: \" + options.rowLine + \"; -webkit-box-orient: vertical;white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;\";\n\n\t\t\t\t\trowText = \"<span style='\" + styleRow + \"'>\" + rowText + \"</span>\";\n\t\t\t\t\tpuma(rowText).vrAppendToPuma(treeViewItemText);\n\t\t\t\t}\n\t\t\t}\n\t\t\t//#endregion\n\n\t\t\tif (item.bold === true)\n\t\t\t\ttreeViewItemText[0].style.cssText += \"font-weight: 600;\";\n\n\t\t\tif (options.showEditButton)\n\t\t\t{\n\t\t\t\tcreateButton({\n\t\t\t\t\ticon: IconClassicLight.Edit,\n\t\t\t\t\tcssContainer: \"margin-right: 5px;\",\n\t\t\t\t\tcss: \"background: none; border: none;\",\n\t\t\t\t\tonClick: (e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (options.onEdit != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet event = new TreeViewEditEvent();\n\t\t\t\t\t\t\tevent.sender = this;\n\t\t\t\t\t\t\tevent.text = item.text;\n\t\t\t\t\t\t\tevent.value = item.value;\n\t\t\t\t\t\t\tevent.dataItem = item;\n\t\t\t\t\t\t\toptions.onEdit(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, treeViewItemText, ControlPositionEnum.Before);\n\t\t\t}\n\n\t\t\t//#region Click\n\t\t\tif (options.selectable)\n\t\t\t{\n\t\t\t\tpuma(treeViewItemText).on(\"mousedown\", (e: JQuery.MouseDownEvent) =>\n\t\t\t\t{\n\t\t\t\t\tswitch (e.button)\n\t\t\t\t\t{\n\t\t\t\t\t\tcase 0: // Left\n\t\t\t\t\t\tcase 1: // Middle\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet value = this._dictionaryLiValue.get(puma(e.currentTarget).closest(\"li\")[0]);\n\t\t\t\t\t\t\t\tlet item = this.datasource().filter(k => k.value == value)[0];\n\t\t\t\t\t\t\t\tif (item != null && (options.parentClickable || !this.getRootValues().includes(item.value))) \n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (!options.checkboxes)\n\t\t\t\t\t\t\t\t\t\tthis.value(item.value);\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\tpuma(e.currentTarget).siblings(\".vrCheckBox\").click();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (options.leftClickForContextMenu)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.showContextMenu(item, e.clientX, puma(e.currentTarget).parent().offset().top + puma(e.currentTarget).parent().height());\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2: // Right\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (options.rightClickForContextMenu)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.showContextMenu(item, e.clientX, puma(e.currentTarget).parent().offset().top + puma(e.currentTarget).parent().height());\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (options.onDoubleClick != null)\n\t\t\t{\n\t\t\t\tpuma(treeViewItemText).on(\"dblclick\", (e: JQuery.DoubleClickEvent) =>\n\t\t\t\t{\n\t\t\t\t\tlet event = new TreeViewDoubleClickEvent();\n\t\t\t\t\tevent.sender = this;\n\t\t\t\t\tevent.text = item.text;\n\t\t\t\t\tevent.value = item.value;\n\t\t\t\t\tevent.dataItem = item;\n\t\t\t\t\toptions.onDoubleClick!(event);\n\t\t\t\t});\n\t\t\t}\n\t\t\t//#endregion\n\n\t\t\t//#region Ellipsis for context menu\n\t\t\tif (options.contextMenuItems!.length > 0 && !options.rightClickForContextMenu && !options.leftClickForContextMenu)\n\t\t\t{\n\t\t\t\tlet btnContextMenu: Button | null = null;\n\t\t\t\tpuma(treeViewDivItemContainer).on(\"mouseenter\", (e: JQuery.MouseEnterEvent) => \n\t\t\t\t{\n\t\t\t\t\tbtnContextMenu = createButton({\n\t\t\t\t\t\ticon: IconClassicSolid.EllipsisVertical,\n\t\t\t\t\t\tcss: \"background: none; border: none;\",\n\t\t\t\t\t\tcssContainer: \"margin-left: 10px; margin-top: 2px; height: 17px;\",\n\t\t\t\t\t\twidth: 25,\n\t\t\t\t\t\tclass: \"vrTreeViewBtnContextMenu\",\n\t\t\t\t\t\tonClick: (e) => \n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpuma(treeViewDivItemContainer).addClass(\"hover\");\n\t\t\t\t\t\t\tthis.showContextMenu(item, puma(e.sender.container()).offset().left, puma(e.sender.container()).offset().top + puma(e.sender.container()).height())\n\t\t\t\t\t\t}\n\t\t\t\t\t}, treeViewItemText);\n\t\t\t\t});\n\n\t\t\t\tpuma(treeViewDivItemContainer).on(\"mouseleave\", (e: JQuery.MouseEnterEvent) => \n\t\t\t\t{\n\t\t\t\t\tif (!puma(treeViewDivItemContainer).hasClass(\"hover\") && btnContextMenu != null)\n\t\t\t\t\t\t$(btnContextMenu.container()).remove();\n\t\t\t\t});\n\t\t\t}\n\t\t\t//#endregion\n\n\t\t\tif (options.columns != null)\n\t\t\t{\n\t\t\t\tlet dataItemId = item[options.dataSourceFieldId!];\n\t\t\t\tlet rowId = \"row\" + i + \"_\" + dataItemId;\n\n\t\t\t\t//#region Columns\n\t\t\t\tfor (let column of options.columns)\n\t\t\t\t{\n\t\t\t\t\tif (column.hidden)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tlet width = (column.width != null) ? column.width : 100;\n\t\t\t\t\twidth -= 10; // Padding\n\t\t\t\t\tlet divItem = div(treeViewDivItemContainer, { class: \"vrTreeViewColumnItem\", css: \"height: \" + options.rowHeight + \"px; width: \" + width + \"px;\" })\n\n\t\t\t\t\tlet field = column.field;\n\t\t\t\t\tpuma(divItem).attr(\"field\", field);\n\n\t\t\t\t\tlet textHTML = (item as any)[field];\n\t\t\t\t\tif (textHTML == null)\n\t\t\t\t\t\ttextHTML = \"\";\n\n\t\t\t\t\tif (column.type == null) column.type = TreeViewColumnTypeEnum.String;\n\n\t\t\t\t\tlet textAlign = TreeViewAlignEnum.Left;\n\t\t\t\t\tswitch (column.type)\n\t\t\t\t\t{\n\t\t\t\t\t\t//#region Number, Currency, Percentage & Duration\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Number:\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet decimalDigits = (column.decimalDigits != null) ? column.decimalDigits : 0;\n\t\t\t\t\t\t\t\ttextAlign = TreeViewAlignEnum.Right;\n\n\t\t\t\t\t\t\t\tif (column.cellSettings == null) column.cellSettings = new TreeViewCellSettings();\n\t\t\t\t\t\t\t\tif (column.cellSettings.zeroIfNull == null) column.cellSettings.zeroIfNull = false;\n\n\t\t\t\t\t\t\t\tif (textHTML === \"\" && column.cellSettings.zeroIfNull === false)\n\t\t\t\t\t\t\t\t\ttextHTML = \"\";\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlet formatSettings = new NumberFormatSettings();\n\t\t\t\t\t\t\t\t\tformatSettings.useGrouping = column.milesSeparator;\n\t\t\t\t\t\t\t\t\tformatSettings.minimumFractionDigits = decimalDigits;\n\t\t\t\t\t\t\t\t\tformatSettings.maximumFractionDigits = decimalDigits;\n\t\t\t\t\t\t\t\t\ttextHTML = Number(textHTML).vrToNumberString(formatSettings);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Currency:\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet decimalDigits = (column.decimalDigits != null) ? column.decimalDigits : 2;\n\t\t\t\t\t\t\t\ttextAlign = TreeViewAlignEnum.Right;\n\n\t\t\t\t\t\t\t\tif (column.cellSettings == null) column.cellSettings = new TreeViewCellSettings();\n\t\t\t\t\t\t\t\tif (column.cellSettings.zeroIfNull == null) column.cellSettings.zeroIfNull = false;\n\n\t\t\t\t\t\t\t\tif (textHTML === \"\" && column.cellSettings.zeroIfNull === false)\n\t\t\t\t\t\t\t\t\ttextHTML = \"\";\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlet formatSettings = new NumberFormatSettings();\n\t\t\t\t\t\t\t\t\tformatSettings.minimumFractionDigits = decimalDigits;\n\t\t\t\t\t\t\t\t\tformatSettings.maximumFractionDigits = decimalDigits;\n\t\t\t\t\t\t\t\t\ttextHTML = Number(textHTML).vrToCurrencyString(formatSettings);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Percentage:\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet decimalDigits = (column.decimalDigits != null) ? column.decimalDigits : 2;\n\t\t\t\t\t\t\t\ttextAlign = TreeViewAlignEnum.Right;\n\n\t\t\t\t\t\t\t\tif (column.cellSettings == null) column.cellSettings = new TreeViewCellSettings();\n\t\t\t\t\t\t\t\tif (column.cellSettings.zeroIfNull == null) column.cellSettings.zeroIfNull = false;\n\n\t\t\t\t\t\t\t\tif (textHTML === \"\" && column.cellSettings.zeroIfNull === false)\n\t\t\t\t\t\t\t\t\ttextHTML = \"\";\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlet formatSettings = new NumberFormatSettings();\n\t\t\t\t\t\t\t\t\tformatSettings.minimumFractionDigits = decimalDigits;\n\t\t\t\t\t\t\t\t\tformatSettings.maximumFractionDigits = decimalDigits;\n\t\t\t\t\t\t\t\t\ttextHTML = (Number(textHTML) / 100).vrToPercentageString(formatSettings);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Duration:\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (column.cellSettings == null) column.cellSettings = new TreeViewCellSettings();\n\t\t\t\t\t\t\t\tif (column.cellSettings.zeroIfNull == null) column.cellSettings.zeroIfNull = false;\n\n\t\t\t\t\t\t\t\tif (textHTML === \"\" && column.cellSettings.zeroIfNull === false)\n\t\t\t\t\t\t\t\t\ttextHTML = \"\";\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlet hours: number = Math.trunc(Number(textHTML) / 60);\n\t\t\t\t\t\t\t\t\tlet hoursString = String(hours);\n\t\t\t\t\t\t\t\t\tif (hours < 10)\n\t\t\t\t\t\t\t\t\t\thoursString = \"0\" + hoursString;\n\n\t\t\t\t\t\t\t\t\tlet minutes: number = Math.trunc(Number(textHTML) % 60);\n\t\t\t\t\t\t\t\t\tlet minutesString = String(minutes);\n\t\t\t\t\t\t\t\t\tif (minutes < 10)\n\t\t\t\t\t\t\t\t\t\tminutesString = \"0\" + minutesString;\n\n\t\t\t\t\t\t\t\t\ttextAlign = TreeViewAlignEnum.Center;\n\t\t\t\t\t\t\t\t\ttextHTML = hoursString + \":\" + minutesString;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t//#endregion\n\n\t\t\t\t\t\t//#region Date, Time, DateTime\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Date:\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.DateTime:\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Time:\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttextAlign = TreeViewAlignEnum.Center;\n\t\t\t\t\t\t\t\tif (column.type == TreeViewColumnTypeEnum.Date)\n\t\t\t\t\t\t\t\t\ttextHTML = (textHTML == \"\") ? \"\" : new Date(textHTML).vrToItalyString(DateModeEnum.Date);\n\t\t\t\t\t\t\t\telse if (column.type == TreeViewColumnTypeEnum.DateTime)\n\t\t\t\t\t\t\t\t\ttextHTML = (textHTML == \"\") ? \"\" : new Date(textHTML).vrToItalyString(DateModeEnum.DateTime, column.showSeconds);\n\t\t\t\t\t\t\t\telse if (column.type == TreeViewColumnTypeEnum.Time)\n\t\t\t\t\t\t\t\t\ttextHTML = (textHTML == \"\") ? \"\" : new Date(textHTML).vrToItalyString(DateModeEnum.Time, column.showSeconds);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t//#endregion\n\n\t\t\t\t\t\t//#region Checkbox\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Checkbox:\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Boolean:\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet checked = (item[field] != null && Boolean(item[field]) == true) ? \"checked='checked'\" : \"\";\n\n\t\t\t\t\t\t\t\ttextAlign = TreeViewAlignEnum.Center;\n\t\t\t\t\t\t\t\ttextHTML = \"<input \" + checked + \" disabled='disabled' dataItemId='\" + dataItemId + \"' id='\" + rowId + \"_\" + column.field + \"' class='vrCheckBox' type='checkbox'></input>\"\n\t\t\t\t\t\t\t\t\t+ \"<label class='vrLabel vrCheckBoxLabel' for='\" + rowId + \"_\" + column.field + \"'></label>\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t//#endregion\n\n\t\t\t\t\t\t//#region Color\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Color:\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttextAlign = TreeViewAlignEnum.Center;\n\t\t\t\t\t\t\t\tif (textHTML.isNotNullOrEmpty())\n\t\t\t\t\t\t\t\t\ttextHTML = \"<i class='\" + IconClassicLight.Circle + \"' style='width: 20px; height: 20px; color: \" + textHTML + \"; display: inline-flex; align-items: center;'></i>\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t//#endregion\n\t\t\t\t\t}\n\n\t\t\t\t\tdivItem.innerHTML = textHTML;\n\n\t\t\t\t\t//#region Color\n\t\t\t\t\tif (column.cellSettings != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (column.cellSettings.backgroundColor != null)\n\t\t\t\t\t\t\tpuma(divItem).css(\"background-color\", column.cellSettings.backgroundColor);\n\n\t\t\t\t\t\tif (column.cellSettings.color != null)\n\t\t\t\t\t\t\tpuma(divItem).css(\"color\", column.cellSettings.color);\n\n\t\t\t\t\t\tif (column.cellSettings.css != null)\n\t\t\t\t\t\t\tdivItem.style.cssText += column.cellSettings.css;\n\t\t\t\t\t}\n\t\t\t\t\t//#endregion\n\n\t\t\t\t\t//#region Text align\n\t\t\t\t\tif (column.cellSettings != null)\n\t\t\t\t\t\ttextAlign = (column.cellSettings.textAlign != null) ? column.cellSettings.textAlign : textAlign;\n\n\t\t\t\t\tpuma(divItem).css(\"text-align\", textAlign);\n\t\t\t\t\t//#endregion\n\n\t\t\t\t\t//#region Bold\n\t\t\t\t\tif ((children.length > 0 && column.boldRoot === true) || column.bold === true)\n\t\t\t\t\t\tpuma(divItem).css(\"font-weight\", \"500\");\n\t\t\t\t\t//#endregion\n\t\t\t\t}\n\t\t\t\t//#endregion\n\t\t\t}\n\n\t\t\t//#region Right click Context menu\n\t\t\tif (options.rightClickForContextMenu || options.leftClickForContextMenu)\n\t\t\t{\n\t\t\t\tpuma(treeViewDivItemContainer).on(\"contextmenu\", (e: JQuery.ContextMenuEvent) => \n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t}\n\t\t\t//#endregion\n\n\t\t\t//#region Draggable\n\t\t\tif (options.draggable)\n\t\t\t{\n\t\t\t\tpuma(treeViewDivItemContainer).attr(\"draggable\", \"true\");\n\t\t\t\tpuma(treeViewDivItemContainer).on(\"dragstart\", (e: JQuery.DragStartEvent) =>\n\t\t\t\t{\n\t\t\t\t\twindow.clearTimeout(this._timeoutClick);\n\t\t\t\t\tthis._actualDraggedItem = item;\n\n\t\t\t\t\t//#region Drag Start Event\n\t\t\t\t\tif (options.onDragStart != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet dragStartEvent = new TreeViewDragStartEvent();\n\t\t\t\t\t\tdragStartEvent.sender = this;\n\t\t\t\t\t\tdragStartEvent.target = puma(e.target).closest(\"li\")[0];\n\t\t\t\t\t\tdragStartEvent.source = item;\n\t\t\t\t\t\toptions.onDragStart(dragStartEvent);\n\n\t\t\t\t\t\tif (dragStartEvent.isDefaultPrevented())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//#endregion\n\n\t\t\t\t\tpuma(e.target).closest(\"li\").addClass(\"vrTreeViewDragStart\");\n\t\t\t\t});\n\n\t\t\t\tpuma(treeViewDivItemContainer).on(\"dragover\", (e: JQuery.DragOverEvent) =>\n\t\t\t\t{\n\t\t\t\t\t//#region Drag Move Event\n\t\t\t\t\tif (options.onDragMove != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet destination = this.datasource().filter(k => k.value == puma(e.target).closest(\"li\").attr(\"value\"))[0];\n\t\t\t\t\t\tlet li = puma(e.target).closest(\"li\")[0];\n\n\t\t\t\t\t\tlet dragMoveEvent = new TreeViewDragMoveEvent();\n\t\t\t\t\t\tdragMoveEvent.sender = this;\n\t\t\t\t\t\tdragMoveEvent.target = li;\n\t\t\t\t\t\tdragMoveEvent.source = item;\n\t\t\t\t\t\tdragMoveEvent.destination = destination;\n\t\t\t\t\t\toptions.onDragMove(dragMoveEvent);\n\n\t\t\t\t\t\tif (dragMoveEvent.isDefaultPrevented())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//#endregion\n\n\t\t\t\t\tpuma(e.target).closest(\".vrTreeViewDivItemContainer\").addClass(\"vrTreeViewDragOver\");\n\t\t\t\t\te.preventDefault();\n\t\t\t\t});\n\n\t\t\t\tpuma(treeViewDivItemContainer).on(\"dragleave\", (e: JQuery.DragLeaveEvent) =>\n\t\t\t\t{\n\t\t\t\t\tpuma(e.target).closest(\".vrTreeViewDivItemContainer\").removeClass(\"vrTreeViewDragOver\");\n\t\t\t\t\te.preventDefault();\n\t\t\t\t});\n\n\t\t\t\tpuma(treeViewDivItemContainer).on(\"drop\", (e: JQuery.DropEvent) =>\n\t\t\t\t{\n\t\t\t\t\t//#region Drag End Event\n\t\t\t\t\tif (options.onDragEnd != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet destination = this.datasource().filter(k => k.value == puma(e.target).closest(\"li\").attr(\"value\"))[0];\n\t\t\t\t\t\tlet liDestination = puma(e.target).closest(\"li\")[0];\n\t\t\t\t\t\tlet ul = puma(liDestination).find(\"ul\");\n\t\t\t\t\t\tul.remove();\n\n\t\t\t\t\t\tlet dragMoveEvent = new TreeViewDragEndEvent();\n\t\t\t\t\t\tdragMoveEvent.sender = this;\n\t\t\t\t\t\tdragMoveEvent.target = li;\n\t\t\t\t\t\tdragMoveEvent.source = this._actualDraggedItem!;\n\t\t\t\t\t\tdragMoveEvent.destination = destination;\n\t\t\t\t\t\toptions.onDragEnd(dragMoveEvent);\n\n\t\t\t\t\t\tif (dragMoveEvent.isDefaultPrevented())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet liSource = this._dictionaryValueLi.get(this._actualDraggedItem!.value);\n\t\t\t\t\t\tpuma(liSource).remove();\n\n\t\t\t\t\t\tlet childrenItems = this.getOnlyChildrenItems(destination);\n\t\t\t\t\t\tthis._actualDraggedItem!.parentValue = destination.value;\n\t\t\t\t\t\tchildrenItems.push(this._actualDraggedItem!);\n\n\t\t\t\t\t\tthis.drawItems(childrenItems, liDestination);\n\t\t\t\t\t\tpuma(liDestination).find(\"ul\").show();\n\t\t\t\t\t}\n\t\t\t\t\t//#endregion\n\n\t\t\t\t\tthis._actualDraggedItem = null;\n\t\t\t\t\tpuma(this.container()).find(\".vrTreeViewDragOver\").removeClass(\"vrTreeViewDragOver\");\n\t\t\t\t\tpuma(this.container()).find(\".vrTreeViewDragStart\").removeClass(\"vrTreeViewDragStart\");\n\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t}\n\t\t\t//#endregion\n\n\t\t\tif (children.length > 0)\n\t\t\t\tthis.drawItems(this.getOnlyChildrenItems(item), li);\n\n\t\t\ti++;\n\t\t}\n\n\t\tlet firstLiChild = puma(this.container()).find(\".vrTreeViewUl\").first().find(\".vrTreeViewLiLink\").first();\n\t\tfirstLiChild.addClass(\"vrTreeViewLiFirstChild\");\n\t}\n\n\tprivate getOnlyChildrenItems(parentItem: TreeViewItem): TreeViewItem[]\n\t{\n\t\treturn this.datasource().filter(k => k.parentValue != null && k.parentValue == parentItem.value);\n\t}\n\n\tgetRootItems(): TreeViewItem[]\n\t{\n\t\tlet parentItems: TreeViewItem[] = [];\n\t\tfor (let item of this.datasource())\n\t\t{\n\t\t\tif (item == null)\n\t\t\t\tcontinue;\n\n\t\t\tlet parentValue = item.parentValue;\n\t\t\twhile (parentValue != null)\n\t\t\t{\n\t\t\t\tlet parentItem = this.datasource().filter(k => k.value == parentValue)[0];\n\t\t\t\tif (!parentItems.includes(parentItem))\n\t\t\t\t\tparentItems.push(parentItem);\n\n\t\t\t\tparentValue = (parentItem != null) ? parentItem.parentValue : undefined;\n\t\t\t\tif (parentItem != null && parentValue == parentItem.value)\n\t\t\t\t\tparentValue = undefined;\n\t\t\t}\n\t\t}\n\t\treturn parentItems;\n\t}\n\tgetRootValues(): string[]\n\t{\n\t\treturn this.getRootItems().filter(k => k != null).map(k => k.value);\n\t}\n\n\tprivate getAllChildrenItems(parentItem: TreeViewItem): TreeViewItem[]\n\t{\n\t\treturn this.getDataChildrenItems(parentItem);\n\t}\n\n\tprivate getAllChildrenValues(parentItem: TreeViewItem): string[]\n\t{\n\t\treturn this.getAllChildrenItems(parentItem).map(k => k.value);\n\t}\n\n\tprivate getDataChildrenItems(parentItem?: TreeViewItem | null): TreeViewItem[]\n\t{\n\t\tlet dataItems = (parentItem == null) ? this.datasource() : this.getOnlyChildrenItems(parentItem);\n\t\tlet items: TreeViewItem[] = [];\n\t\tfor (let dataElement of dataItems)\n\t\t{\n\t\t\titems.push(dataElement);\n\t\t\tif (this.getOnlyChildrenItems(dataElement).length > 0)\n\t\t\t\titems.vrPushRange(this.getDataChildrenItems(dataElement));\n\t\t}\n\t\treturn items;\n\t}\n\n\tprivate getChildrenCheckboxElements<T extends HTMLInputElement[] | JQuery>(parentItem: TreeViewItem, checked = false, arrayMode = false): T\n\t{\n\t\tlet liParent = this._dictionaryValueLi.get(parentItem.value);\n\t\tlet parentComboItemText = puma(liParent).find(\".vrTreeViewItemText\")[0];\n\t\tlet parentCheckbox = puma(parentComboItemText).siblings(\"input\");\n\n\t\tlet childrenCheckboxElements = puma(parentCheckbox).parent().parent().find(\"input\" + ((checked) ? \":checked\" : \"\"));\n\t\tif (puma(childrenCheckboxElements[0]).siblings(\".vrTreeViewItemText\").html() == parentItem.text)\n\t\t\tchildrenCheckboxElements.splice(0, 1);\n\n\t\tif (arrayMode)\n\t\t\tchildrenCheckboxElements = Array.from<HTMLInputElement>(childrenCheckboxElements);\n\n\t\treturn childrenCheckboxElements as T;\n\t}\n\n\tgetCheckedItems(): TreeViewItem[]\n\t{\n\t\tlet items = this.datasource().filter(k => this._checkedValues.includes(k.value));\n\t\treturn items.vrDistinctBy(k => k.value);\n\t}\n\n\tgetCheckedValues(): string[]\n\t{\n\t\treturn this._checkedValues.vrDistinct();\n\t}\n\n\tgetSelectedItem<T extends TreeViewItem>(): T\n\t{\n\t\treturn this.datasource().filter(k => k.value == this.value())[0] as T;\n\t}\n\n\tprivate getParentItem(childItem: TreeViewItem): TreeViewItem | null\n\t{\n\t\tif (childItem.parentValue != null)\n\t\t\treturn this.datasource().filter(k => k.value == childItem.parentValue)[0];\n\t\treturn null;\n\t}\n\n\tprivate manageCheckParent(item: TreeViewItem): boolean | void\n\t{\n\t\tlet parentItem = this.getParentItem(item);\n\t\tif (parentItem != null)\n\t\t{\n\t\t\tlet children = this.getChildrenCheckboxElements<HTMLInputElement[]>(parentItem, true, true);\n\t\t\tlet tempCheckedElements = children.filter(k => k != null && k.checked);\n\n\t\t\tlet liParent = this._dictionaryValueLi.get(parentItem.value)!;\n\t\t\tlet parentInputElement = puma(liParent).find(\"input\")[0];\n\t\t\tif (parentInputElement != null)\n\t\t\t{\n\t\t\t\tpuma(parentInputElement).removeClass(\"indeterminateVrCheckbox\");\n\t\t\t\tparentInputElement.checked = false;\n\n\t\t\t\tif (this.getAllChildrenItems(parentItem).length == tempCheckedElements.length)\n\t\t\t\t{\n\t\t\t\t\tparentInputElement.checked = true;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse if (tempCheckedElements.length == 0)\n\t\t\t\t{\n\t\t\t\t\tparentInputElement.checked = false;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpuma(parentInputElement).addClass(\"indeterminateVrCheckbox\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tprivate limitInputByDataSource(element: HTMLInputElement, e: any): void\n\t{\n\t\tlet filtered = this.getFilteredArrayByInputText(element.value);\n\t\tif (filtered.length == 0)\n\t\t{\n\t\t\tlet newText = element.value;\n\t\t\telement.value = newText.substring(0, newText.length - 1);\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t}\n\n\tprivate getFilteredArrayByInputText(value: string): TreeViewItem[]\n\t{\n\t\tvalue = value.toLowerCase();\n\t\tlet filteredArray: TreeViewItem[] = [];\n\t\tlet arrayWhereSearch = this.datasource().map(k => String(k.text).toLowerCase());\n\t\tarrayWhereSearch!.forEach((k, index) => \n\t\t{\n\t\t\tif (k.indexOf(value) != -1)\n\t\t\t\tfilteredArray.push(this.datasource()[index]);\n\t\t});\n\t\treturn filteredArray;\n\t}\n\n\tprivate filter(text: string): void\n\t{\n\t\tlet options = this.getOptions();\n\n\t\tlet element = this._txtSearchFilter.element();\n\t\tlet selectionStart = (element as HTMLInputElement).selectionStart;\n\t\tlet selectionEnd = (element as HTMLInputElement).selectionEnd;\n\n\t\tif (text == \"\")\n\t\t\tpuma(this.element()).find(\"li\").show();\n\t\telse if (!(selectionStart == 0 && selectionEnd == (element as HTMLInputElement).value.length))\n\t\t{\n\t\t\tpuma(this.element()).find(\"li\").hide();\n\n\t\t\tlet items = this.getFilteredArrayByInputText(text);\n\t\t\tlet values = items.map(k => k.value);\n\t\t\tlet texts = items.map(k => k.text);\n\n\t\t\tfor (let item of items)\n\t\t\t{\n\t\t\t\tlet parentValue = item.parentValue;\n\t\t\t\twhile (parentValue != null)\n\t\t\t\t{\n\t\t\t\t\tlet parentItem = this.datasource().filter(k => k.value == parentValue)[0];\n\t\t\t\t\tif (!values.includes(parentValue))\n\t\t\t\t\t{\n\t\t\t\t\t\tvalues.push(parentValue);\n\t\t\t\t\t\ttexts.push((parentItem != null) ? parentItem.text : \"\");\n\t\t\t\t\t}\n\t\t\t\t\tparentValue = (parentItem != null) ? parentItem.parentValue : undefined;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!(options.filter as TreeViewFilterSettings).onlyParents)\n\t\t\t{\n\t\t\t\t//#region Filter all\n\t\t\t\tfor (let comboItemText of Array.from<HTMLSpanElement>(puma(this.element()).find(\".vrTreeViewItemText\")))\n\t\t\t\t{\n\t\t\t\t\tif (texts.includes(puma(comboItemText).attr(\"text\")))\n\t\t\t\t\t{\n\t\t\t\t\t\tpuma(comboItemText).closest(\".vrTreeViewLi\").show();\n\t\t\t\t\t\tpuma(comboItemText).closest(\".vrTreeViewLi\").closest(\".vrTreeViewUl\").show();\n\n\t\t\t\t\t\tpuma(comboItemText).closest(\".vrTreeViewLi\").find(\".vrTreeViewDivIconExpand\").removeClass(\"caret-right caret-down\");\n\t\t\t\t\t\tpuma(comboItemText).closest(\".vrTreeViewLi\").find(\".vrTreeViewDivIconExpand\").children(\"i\").removeClass(IconClassicLight.CaretRight + \" \" + IconClassicLight.CaretDown);\n\t\t\t\t\t\tpuma(comboItemText).closest(\".vrTreeViewLi\").find(\".vrTreeViewDivIconExpand\").addClass(\"caret-down\");\n\t\t\t\t\t\tpuma(comboItemText).closest(\".vrTreeViewLi\").find(\".vrTreeViewDivIconExpand\").children(\"i\").addClass(IconClassicLight.CaretDown);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//#endregion\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t//#region Filter only parents\n\t\t\t\tfor (let li of Array.from<HTMLLIElement>(puma(this.element()).find(\".vrTreeViewLi\")))\n\t\t\t\t{\n\t\t\t\t\tlet value = puma(li).attr(\"value\");\n\t\t\t\t\tif (this.isParent(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tlet text = puma(li).find(\".vrTreeViewItemText\").attr(\"text\");\n\t\t\t\t\t\tif (texts.includes(text))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpuma(li).show();\n\t\t\t\t\t\t\tpuma(li).find(\"ul\").show();\n\t\t\t\t\t\t\tpuma(li).find(\"li\").show();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//#endregion\n\t\t\t}\n\t\t}\n\t}\n\n\tisParent(value: string)\n\t{\n\t\treturn this.getRootValues().includes(value);\n\t}\n\n\tfocus()\n\t{\n\t\tlet options = this.getOptions();\n\t\tif (options.filter !== false && puma(this.element()).find(\".vrTreeViewFilter\")[0] != null)\n\t\t\tpuma(this.element()).find(\".vrTreeViewFilter\").focus();\n\t}\n\n\tvalue<T extends string | string[] | number>(value?: TreeViewItem | string | number | string[] | number[] | null, triggerChange: boolean = true): T | null\n\t{\n\t\tif (value === null)\n\t\t{\n\t\t\tthis.clear();\n\t\t\treturn null;\n\t\t}\n\n\t\tlet options = this.getOptions();\n\t\tif (value != null)\n\t\t{\n\t\t\tif (!options.checkboxes)\n\t\t\t\tpuma(this.element()).find(\".vrTreeViewSelectedComboValue\").removeClass(\"vrTreeViewSelectedComboValue\");\n\n\t\t\tif (typeof (value) == \"string\" || typeof (value) == \"number\")\n\t\t\t\tvalue = [String(value)];\n\n\t\t\tlet comboItem = null;\n\t\t\tif (Array.isArray(value))\n\t\t\t{\n\t\t\t\tvalue = value.vrDistinct();\n\t\t\t\tvalue = value.vrToStringArrayList();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcomboItem = new TreeViewItem();\n\t\t\t\tcomboItem.text = value.text;\n\t\t\t\tcomboItem.value = value.value;\n\t\t\t\tvalue = [comboItem.value];\n\t\t\t}\n\n\t\t\tlet prevValue = UtilityManager.duplicate(this._value);\n\t\t\tthis._value = [];\n\t\t\tfor (let singleValue of value)\n\t\t\t{\n\t\t\t\tlet singleItem = this.datasource().filter(k => k.value == singleValue)[0];\n\t\t\t\tif (singleItem != null)\n\t\t\t\t\tthis._value.push(singleItem.value);\n\t\t\t}\n\n\t\t\tthis._checkedValues = value;\n\t\t\tpuma(puma(this.container()).find(\".vrTreeViewLi[value='\" + value + \"'] .vrTreeViewDivItemContainer\")[0]).addClass(\"vrTreeViewSelectedComboValue\");\n\n\t\t\tif (triggerChange)\n\t\t\t{\n\t\t\t\tlet changingEvent = new TreeViewChangingEvent();\n\t\t\t\tif (options.onBeforeSelect != null)\n\t\t\t\t{\n\t\t\t\t\tlet isParent = this.isParent(this._value[0]);\n\t\t\t\t\tlet parentItem = null;\n\t\t\t\t\tif (isParent)\n\t\t\t\t\t\tparentItem = this.datasource().filter(k => k.value == value)[0];\n\n\t\t\t\t\tchangingEvent.sender = this;\n\t\t\t\t\tchangingEvent.previousValue = prevValue;\n\t\t\t\t\tchangingEvent.previousCheckedValues = prevValue;\n\t\t\t\t\tchangingEvent.value = this._value[0];\n\t\t\t\t\tchangingEvent.childrenValues = (isParent) ? this.getAllChildrenValues(parentItem!) : [];\n\t\t\t\t\tchangingEvent.checked = this._isChecked;\n\t\t\t\t\tchangingEvent.isParent = isParent;\n\t\t\t\t\toptions.onBeforeSelect(changingEvent);\n\t\t\t\t}\n\n\t\t\t\tif (!changingEvent.isDefaultPrevented())\n\t\t\t\t\tthis.change();\n\t\t\t\telse\n\t\t\t\t\tthis._value = prevValue;\n\t\t\t}\n\t\t}\n\n\t\tif (this._value == null)\n\t\t\treturn null;\n\t\telse if (options.checkboxes === true)\n\t\t\treturn this._value as T;\n\t\telse\n\t\t\treturn this._value[0] as T;\n\t}\n\n\ttitle(title?: string)\n\t{\n\t\tif (title != null)\n\t\t{\n\t\t\tif (this._lblTitle != null)\n\t\t\t\tthis._lblTitle.value(title);\n\t\t}\n\t\treturn (this._lblTitle != null) ? this._lblTitle.value() : \"\";\n\t}\n\n\tclear(triggerChange = false): void\n\t{\n\t\tlet options = this.getOptions();\n\t\tpuma(this.element()).find(\".vrTreeViewSelectedComboValue\").removeClass(\"vrTreeViewSelectedComboValue\");\n\t\tthis.unCheckAll(false);\n\n\t\tpuma(this.element()).find(\"li\").show();\n\n\t\tthis._value = null;\n\t\tif (options.filter !== false && puma(this.element()).find(\".vrTreeViewFilter\")[0] != null)\n\t\t\tpuma(this.element()).find(\".vrTreeViewFilter\")[0].value = \"\";\n\n\t\tif (triggerChange)\n\t\t\tthis.change();\n\t}\n\n\tclearItems(): void\n\t{\n\t\tthis._items = [];\n\t\tthis.clear();\n\t\tpuma(this.element()).find(\".vrTreeViewUl\").remove();\n\t}\n\n\texcelExport()\n\t{\n\t\tlet options = this.getOptions();\n\t\tif (typeof (options.export) == \"boolean\")\n\t\t\toptions.export = new TreeViewExportSettings();\n\n\t\tlet exportSettings = options.export as TreeViewExportSettings;\n\n\t\tif (exportSettings.numericValueTypeEnum == null) exportSettings.numericValueTypeEnum = TreeViewNumericTypeEnum.Default;\n\t\tif (exportSettings.decimalDigits == null)\n\t\t{\n\t\t\tif (exportSettings.numericValueTypeEnum == TreeViewNumericTypeEnum.Currency\n\t\t\t\t|| exportSettings.numericValueTypeEnum == TreeViewNumericTypeEnum.Percentage)\n\t\t\t\texportSettings.decimalDigits = 2;\n\t\t\telse\n\t\t\t\texportSettings.decimalDigits = 0;\n\t\t}\n\n\t\t//#region Generate Excel\n\t\tlet generateExcelRequest = new GenerateExcelRequest();\n\n\t\tlet dataSource: TreeViewItem[] = [];\n\t\tif (options.columns != null)\n\t\t{\n\t\t\tfor (let data of this.datasource())\n\t\t\t{\n\t\t\t\tlet extraCells: TreeViewItemExtraCell[] = [];\n\t\t\t\tfor (let column of options.columns)\n\t\t\t\t{\n\t\t\t\t\tlet extraCell: TreeViewItemExtraCell = UtilityManager.duplicate(column);\n\n\t\t\t\t\tlet textHTML = data[column.field];\n\t\t\t\t\tswitch (column.type)\n\t\t\t\t\t{\n\t\t\t\t\t\t//#region Date, DateTime, Time\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Date:\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.DateTime:\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Time:\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (column.type == TreeViewColumnTypeEnum.Date || column.type == TreeViewColumnTypeEnum.DateTime || column.type == TreeViewColumnTypeEnum.Time)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (column.type == TreeViewColumnTypeEnum.Date)\n\t\t\t\t\t\t\t\t\t\ttextHTML = (textHTML == \"\") ? \"\" : new Date(new Date(textHTML)).vrToItalyString(DateModeEnum.Date);\n\t\t\t\t\t\t\t\t\telse if (column.type == TreeViewColumnTypeEnum.DateTime)\n\t\t\t\t\t\t\t\t\t\ttextHTML = (textHTML == \"\") ? \"\" : new Date(new Date(textHTML)).vrToItalyString(DateModeEnum.DateTime, column.showSeconds);\n\t\t\t\t\t\t\t\t\telse if (column.type == TreeViewColumnTypeEnum.Time)\n\t\t\t\t\t\t\t\t\t\ttextHTML = (textHTML == \"\") ? \"\" : new Date(new Date(textHTML)).vrToItalyString(DateModeEnum.Time, column.showSeconds);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t//#endregion\n\n\t\t\t\t\t\t//#region CheckBox\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Checkbox:\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Boolean:\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttextHTML = (data[column.field] == true) ? \"true\" : \"false\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t//#endregion\n\t\t\t\t\t}\n\n\t\t\t\t\textraCell.value = textHTML;\n\t\t\t\t\textraCells.push(extraCell);\n\t\t\t\t}\n\n\t\t\t\tdata.extraCells = extraCells;\n\t\t\t\tdataSource.push(data);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tdataSource = this.datasource();\n\n\t\tgenerateExcelRequest.datasource = dataSource;\n\t\tgenerateExcelRequest.title = options.title;\n\t\tgenerateExcelRequest.sheetName = exportSettings.sheetName;\n\t\tgenerateExcelRequest.fileName = (exportSettings.fileName != null) ? exportSettings.fileName : (\"excel_\" + new Date().vrToItalyString().replace(/\\//g, \"\"));\n\t\tgenerateExcelRequest.AuthKey = \"10(P9m+U3a@Mtt-Oeo\";\n\t\tgenerateExcelRequest.numericValueTypeEnum = exportSettings.numericValueTypeEnum;\n\t\tgenerateExcelRequest.decimalDigits = exportSettings.decimalDigits;\n\t\tlet jsonString = JSON.stringify(generateExcelRequest);\n\n\t\t//#region Multipart\n\t\tlet formDataMultipart = null;\n\t\tformDataMultipart = new FormData();\n\t\tformDataMultipart.append(\"file\", new Blob([jsonString], { type: \"application/json\" }));\n\t\t//#endregion\n\n\t\tshowLoader();\n\t\t$.ajax(\n\t\t\t{\n\t\t\t\ttype: \"POST\",\n\t\t\t\tbeforeSend: (xhr: any) =>\n\t\t\t\t{\n\t\t\t\t\t//#region Header parameters\n\t\t\t\t\txhr.setRequestHeader(\"Accept-Language\", \"it\");\n\t\t\t\t\txhr.setRequestHeader(\"AuthKey\", \"10(P9m+U3a@Mtt-Oeo\");\n\t\t\t\t\t//#endregion\n\t\t\t\t},\n\t\t\t\tcontentType: false,\n\t\t\t\tdata: formDataMultipart,\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tprocessData: false,\n\t\t\t\tdataType: \"JSON\",\n\t\t\t\turl: \"/api/UtilityWebApi/GenerateExcelTreeView\",\n\t\t\t\tsuccess: (response: GenerateExcelResponse, textStatus: string, jqXHR: JQueryXHR) =>\n\t\t\t\t{\n\t\t\t\t\thideLoader();\n\n\t\t\t\t\tif (response.downloadUrl != null && response.downloadUrl.length > 0)\n\t\t\t\t\t\tlocation.replace(response.downloadUrl);\n\n\t\t\t\t\tif (!(response as any).Success)\n\t\t\t\t\t\talert((response as any).ErrorMessage + \"<br />\" + (response as any).StackTrace, { width: 600, css: \"overflow: auto;\" });\n\t\t\t\t},\n\t\t\t\terror: (response: JQueryXHR, textStatus: string, errorThrown: string) =>\n\t\t\t\t{\n\t\t\t\t\thideLoader();\n\t\t\t\t\talert(\"Errore nell'esportazione Excel. Contattare l'assistenza.\");\n\t\t\t\t}\n\t\t\t});\n\t\t//#endregion\n\t}\n\n\t//#region Columns\n\tcolumn(field: string)\n\t{\n\t\tlet options = this.getOptions();\n\t\tlet column = options.columns!.filter(k => k.field == field)[0];\n\t\tlet columnIndex = options.columns!.indexOf(column);\n\t\treturn options.columns![columnIndex];\n\t}\n\n\tcolumnTitle(field: string, title?: string)\n\t{\n\t\tlet column = this.column(field);\n\t\tif (column != null)\n\t\t{\n\t\t\tif (title != null)\n\t\t\t{\n\t\t\t\tcolumn.title = title;\n\t\t\t\tpuma(this._divTitle).find(\"div.vrTreeViewColumn[field='\" + field + \"']\").find(\"label\").html(title);\n\t\t\t}\n\t\t\treturn column.title;\n\t\t}\n\t\telse\n\t\t\treturn \"\";\n\t}\n\n\tshowColumns(fields: string[], update = true)\n\t{\n\t\tfor (let field of fields)\n\t\t\tthis.showColumn(field, false);\n\n\t\tif (update)\n\t\t\tthis.update();\n\t}\n\n\tshowColumn(field: string, update = true)\n\t{\n\t\tpuma(this._divTitle).find(\"div.vrTreeViewColumn[field='\" + field + \"']\").show();\n\t\tpuma(this._divContent).find(\"div.vrTreeViewDivItemContainer .vrTreeViewColumnItem[field='\" + field + \"']\").show();\n\n\t\tthis.column(field).hidden = false;\n\n\t\tif (update)\n\t\t\tthis.update();\n\t}\n\n\thideColumns(fields: string[], update = true)\n\t{\n\t\tfor (let field of fields)\n\t\t\tthis.hideColumn(field, false);\n\n\t\tif (update)\n\t\t\tthis.update();\n\t}\n\n\thideColumn(field: string, update = true)\n\t{\n\t\tpuma(this._divTitle).find(\"div.vrTreeViewColumn[field='\" + field + \"']\").hide();\n\t\tpuma(this._divContent).find(\"div.vrTreeViewColumnItem[field='\" + field + \"']\").hide();\n\n\t\tthis.column(field).hidden = true;\n\n\t\tif (update)\n\t\t\tthis.update();\n\t}\n\n\tshowOnlyThisColumns(fieldList: string[], update = true)\n\t{\n\t\tlet options = this.getOptions();\n\t\tfor (let column of options.columns!)\n\t\t\tthis.hideColumn(column.field, false);\n\n\t\tfor (let field of fieldList)\n\t\t\tthis.showColumn(field, false);\n\n\t\tif (update)\n\t\t\tthis.update();\n\t}\n\n\tprivate widthColumns()\n\t{\n\t\tlet widthColumns = 0;\n\t\tlet options = this.getOptions();\n\t\tif (options.columns != null)\n\t\t{\n\t\t\tfor (let column of options.columns)\n\t\t\t{\n\t\t\t\tif (column.hidden === true)\n\t\t\t\t\tcontinue;\n\n\t\t\t\twidthColumns += (column.width != null) ? column.width : 100;\n\t\t\t}\n\t\t}\n\t\treturn widthColumns;\n\t}\n\t//#endregion\n\n\t//#region Check\n\tcheckAll(triggerChange = true): void\n\t{\n\t\tthis._checkedValues = this.datasource().map(k => k.value);\n\t\tthis._checkedValues = this._checkedValues.vrDistinct();\n\t\tthis.value(this.datasource().map(k => k.value), triggerChange);\n\t}\n\n\tunCheckAll(triggerChange = true): void\n\t{\n\t\tthis._checkedValues = [];\n\t\tpuma(this.element()).find(\".vrTreeViewSelectedComboValue\").removeClass(\"vrTreeViewSelectedComboValue\");\n\t\tpuma(this.element()).find(\"input\").removeClass(\"indeterminateVrCheckbox\");\n\t\tfor (let input of Array.from<HTMLInputElement>(puma(this.element()).find(\"input\")))\n\t\t{\n\t\t\tpuma(input).prop(\"checked\", false);\n\t\t\tinput.checked = false;\n\t\t}\n\t\tthis.value([], triggerChange);\n\t}\n\t//#endregion\n\n\t//#region Context menu\n\tprivate createContextMenu()\n\t{\n\t\tlet options = this.getOptions();\n\t\tif (options.contextMenuItems!.length == 0)\n\t\t\treturn;\n\n\t\tif (this._divContextMenu == null)\n\t\t\tthis._divContextMenu = div(document.body, { class: \"vrTreeViewContextMenu\", id: this.element().id + \"_divPopup\" });\n\n\t\tfor (let contextMenuItem of options.contextMenuItems!)\n\t\t{\n\t\t\tlet divContextMenuItem = div(this._divContextMenu, { class: \"vrTreeViewContextMenuItem\" });\n\t\t\tif (contextMenuItem.separator === true)\n\t\t\t{\n\t\t\t\tcreateSeparator({\n\t\t\t\t\torientation: OrientationEnum.Horizontal,\n\t\t\t\t\tcssContainer: \"display: flex !important; margin-top: 5px !important; margin-bottom: 5px !important;\"\n\t\t\t\t}, divContextMenuItem);\n\n\t\t\t\tdivContextMenuItem.style.cssText += \"padding-bottom: 0px;\";\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (contextMenuItem.icon != null)\n\t\t\t\ticon(contextMenuItem.icon, divContextMenuItem, { css: \"margin-right: 5px;\" });\n\n\t\t\tcreateLabel({\n\t\t\t\ttext: contextMenuItem.text,\n\t\t\t\tcssContainer: \"cursor: pointer;\",\n\t\t\t\tcss: \"cursor: pointer;\"\n\t\t\t}, divContextMenuItem);\n\n\t\t\tif (contextMenuItem.onClick != null)\n\t\t\t{\n\t\t\t\tpuma(divContextMenuItem).on(\"click\", (e: JQuery.ClickEvent) =>\n\t\t\t\t{\n\t\t\t\t\tif (contextMenuItem.confirmationMessage != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tconfirm(contextMenuItem.confirmationMessage).then(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.clickOnContextMenuItem(contextMenuItem);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.clickOnContextMenuItem(contextMenuItem);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate clickOnContextMenuItem(contextMenuItem: TreeViewContextMenuItem)\n\t{\n\t\tlet event = new TreeViewContextMenuClickEvent();\n\t\tevent.sender = this;\n\t\tevent.text = contextMenuItem.text;\n\t\tevent.value = contextMenuItem.value;\n\t\tevent.dataItem = this._dataItemContextMenu;\n\t\tevent.targets = this._dictionaryValueLi.get(this._dataItemContextMenu.value);\n\t\tcontextMenuItem.onClick!(event);\n\n\t\tthis.closeContextMenu();\n\t}\n\n\tprivate showContextMenu(dataItem: any, leftPosition: number, topPosition: number)\n\t{\n\t\tthis.createContextMenu();\n\n\t\tif (this._divContextMenu != null)\n\t\t{\n\t\t\tthis._dataItemContextMenu = dataItem;\n\t\t\tpuma(this._divContextMenu).show(200);\n\t\t\tpuma(this._divContextMenu).offset({ left: leftPosition, top: topPosition });\n\n\t\t\tlet zIndex = puma(this._divContextMenu).css(\"z-index\") - 1;\n\t\t\tlet background = puma(\"<div class='vrTreeViewBackground' id='vrTreeViewBackground_\" + this.element().id + \"' style='background-color: transparent; display: block; z-index: \" + zIndex + \";'></div>\").vrAppendToPuma(this.container())[0];\n\n\t\t\tpuma(background).click((e: any) => this.closeContextMenu());\n\t\t\tpuma(background).on(\"contextmenu\", (e: JQuery.ContextMenuEvent) =>\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate closeContextMenu()\n\t{\n\t\tif (this._divContextMenu != null)\n\t\t{\n\t\t\tpuma(this.container()).find(\".vrTreeViewDivItemContainer\").removeClass(\"hover\");\n\t\t\tpuma(this.container()).find(\".vrTreeViewBtnContextMenu\").parent().remove();\n\n\t\t\tthis._dataItemContextMenu = null;\n\t\t\tpuma(this._divContextMenu).remove();\n\t\t\t(this._divContextMenu as any) = null;\n\t\t\tpuma(\"#vrTreeViewBackground_\" + this.element().id).remove();\n\t\t}\n\t}\n\t//#endregion\n\n\t//#region Manage rows\n\tupdateRow(dataItem: any, rebind: UpdateRowRebindSettings | boolean = true)\n\t{\n\t\tlet options = this.getOptions();\n\t\tlet dataItemId = dataItem[options.dataSourceFieldId!];\n\n\t\tlet itemDatasource = this.datasource().filter(k => k[options.dataSourceFieldId!] == dataItemId)[0];\n\t\tlet itemDatasourceIndex = this.datasource().indexOf(itemDatasource);\n\t\tif (itemDatasource != null)\n\t\t{\n\t\t\tthis.datasource()[itemDatasourceIndex] = dataItem;\n\t\t\tif (typeof (rebind) == \"boolean\")\n\t\t\t{\n\t\t\t\tif (rebind === true)\n\t\t\t\t\tthis.update();\n\t\t\t}\n\t\t\telse if (rebind.onlyText)\n\t\t\t{\n\t\t\t\tlet li = this._dictionaryValueLi.get(dataItemId)!;\n\t\t\t\tpuma(li).find(\".vrTreeViewSpanValue\")[0].innerHTML = dataItem.text;\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateRows(dataItems: any[], rebind = true)\n\t{\n\t\tfor (let dataItem of dataItems)\n\t\t\tthis.updateRow(dataItem, false);\n\n\t\tif (rebind)\n\t\t\tthis.update();\n\t}\n\n\taddItem(item: TreeViewItem, rebind = true)\n\t{\n\t\tlet parentItem = this.datasource().filter(k => k.value == item.parentValue)[0];\n\t\tif (parentItem != null)\n\t\t{\n\t\t\tlet childrenItems = this.getOnlyChildrenItems(parentItem);\n\t\t\tchildrenItems.push(item);\n\t\t\tthis.datasource().push(item);\n\n\t\t\tlet liDestination = this._dictionaryValueLi.get(parentItem.value)![0];\n\t\t\tthis.manageAddUpdateItem(childrenItems, liDestination, rebind);\n\t\t}\n\t}\n\n\tupdateItem(item: TreeViewItem, rebind = true)\n\t{\n\t\tlet parentItem = this.datasource().filter(k => k.value == item.parentValue)[0];\n\t\tif (parentItem != null)\n\t\t{\n\t\t\tlet childrenItems = this.getOnlyChildrenItems(parentItem);\n\t\t\tchildrenItems.vrDeleteAllBy(k => k.value == item.value);\n\t\t\tchildrenItems.push(item);\n\t\t\tthis.updateRow(item, false);\n\n\t\t\tlet liDestination = this._dictionaryValueLi.get(parentItem.value)![0];\n\t\t\tthis.manageAddUpdateItem(childrenItems, liDestination, rebind);\n\t\t}\n\t}\n\n\tprivate manageAddUpdateItem(childrenItems: TreeViewItem[], liDestination: HTMLElement, rebind = true)\n\t{\n\t\tlet ul = puma(liDestination).find(\"ul\");\n\t\tul.remove();\n\n\t\tthis.drawItems(childrenItems, liDestination);\n\t\tpuma(liDestination).find(\"ul\").show();\n\n\t\tif (rebind)\n\t\t\tthis.rebind();\n\t}\n\n\tdeleteItem(value: number | string)\n\t{\n\t\tthis.datasource().vrDeleteAllBy(k => k.value == value);\n\t}\n\t//#endregion\n\n\t//#region Toolbar\n\tvisibleToolbar(state?: boolean)\n\t{\n\t\tif (state != null)\n\t\t{\n\t\t\tif (state) puma(this._divToolbar).show();\n\t\t\telse puma(this._divToolbar).hide();\n\t\t}\n\t\treturn puma(this._divToolbar).is(\":visible\");\n\t}\n\n\tshowToolbar()\n\t{\n\t\tthis.visibleToolbar(true);\n\t}\n\n\thideToolbar()\n\t{\n\t\tthis.visibleToolbar(false);\n\t}\n\n\ttoolbar()\n\t{\n\t\treturn this._divToolbar;\n\t}\n\n\ttoolbarItem<T extends VrControl>(value: string)\n\t{\n\t\treturn ControlManager.get<T>(\"treeView-\" + value + \"_\" + this.element().id);\n\t}\n\n\tshowToolbarItem<T extends VrControl>(value: string)\n\t{\n\t\tthis.toolbarItem<T>(value).show();\n\t}\n\n\thideToolbarItem<T extends VrControl>(value: string)\n\t{\n\t\tthis.toolbarItem<T>(value).hide();\n\t}\n\n\tenableToolbarItem<T extends VrControl>(value: string)\n\t{\n\t\tthis.toolbarItem<T>(value).enable();\n\t}\n\n\tdisableToolbarItem<T extends VrControl>(value: string)\n\t{\n\t\tthis.toolbarItem<T>(value).disable();\n\t}\n\n\tremoveToolbarItem(value: string)\n\t{\n\t\tlet item = this.toolbarItem(value);\n\t\tpuma(item.container()).remove();\n\t}\n\n\taddToolbarItem(toolbarItem: TreeViewToolbarItem)\n\t{\n\t\tif (toolbarItem.visible == null) toolbarItem.visible = true;\n\t\tif (toolbarItem.type == null) toolbarItem.type = TreeViewToolbarItemType.Custom;\n\n\t\t//#region Toolbar control settings\n\t\tlet text = \"\";\n\t\tlet iconClass: IconClass | undefined = undefined;\n\t\tlet buttonClass = \"\";\n\t\tlet enabled = true;\n\t\tlet vrButton = false;\n\t\tif (toolbarItem.css == null) toolbarItem.css = \"\";\n\t\tif (toolbarItem.cssContainer == null) toolbarItem.cssContainer = \"\";\n\t\tlet toolbarItemValue = (toolbarItem.value == null) ? ((toolbarItem.text != null) ? toolbarItem.text.replace(/[^a-z0-9\\s]/gi, \"\").replace(/[_\\s]/g, \"\") : \"noValue\") : toolbarItem.value;\n\n\t\t//#region Toolbar item type\n\t\tswitch (toolbarItem.type)\n\t\t{\n\t\t\tcase TreeViewToolbarItemType.Custom:\n\t\t\t\t{\n\t\t\t\t\ttext = (toolbarItem.text != null) ? toolbarItem.text : \"\";\n\t\t\t\t\ticonClass = (toolbarItem.icon != null) ? toolbarItem.icon : undefined;\n\t\t\t\t\tbuttonClass = \"treeView-\" + toolbarItemValue;\n\t\t\t\t\tvrButton = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase TreeViewToolbarItemType.SplitButton:\n\t\t\t\t{\n\t\t\t\t\ttext = (toolbarItem.text != null) ? toolbarItem.text : \"\";\n\t\t\t\t\ticonClass = (toolbarItem.icon != null) ? toolbarItem.icon : undefined;\n\t\t\t\t\tvrButton = false;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase TreeViewToolbarItemType.Switch:\n\t\t\tcase TreeViewToolbarItemType.ButtonGroup:\n\t\t\tcase TreeViewToolbarItemType.CheckBox:\n\t\t\tcase TreeViewToolbarItemType.ComboBox:\n\t\t\tcase TreeViewToolbarItemType.DatePicker:\n\t\t\tcase TreeViewToolbarItemType.Label:\n\t\t\tcase TreeViewToolbarItemType.TextBox:\n\t\t\t\t{\n\t\t\t\t\tvrButton = false;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase TreeViewToolbarItemType.Excel:\n\t\t\t\t{\n\t\t\t\t\ttext = (toolbarItem.text != null) ? toolbarItem.text : \"Excel\";\n\t\t\t\t\ticonClass = (toolbarItem.icon != null) ? toolbarItem.icon : IconClassicLight.FileExcel;\n\t\t\t\t\tbuttonClass = (toolbarItem.value != null) ? \"treeView-\" + toolbarItem.value : \"treeView-excel\";\n\t\t\t\t\tvrButton = true;\n\t\t\t\t\ttoolbarItem.backgroundColor = \"#008a00\";\n\t\t\t\t\ttoolbarItem.textColor = \"#FFF\";\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase TreeViewToolbarItemType.Separator:\n\t\t\t\t{\n\t\t\t\t\tbuttonClass = (toolbarItem.value != null) ? \"treeView-\" + toolbarItem.value : \"treeView-separator\";\n\t\t\t\t\tenabled = false;\n\t\t\t\t\tvrButton = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase TreeViewToolbarItemType.Rebind:\n\t\t\t\t{\n\t\t\t\t\ttext = (toolbarItem.text != null) ? toolbarItem.text : \"Aggiorna\";\n\t\t\t\t\ticonClass = (toolbarItem.icon != null) ? toolbarItem.icon : IconClassicLight.Refresh;\n\t\t\t\t\tbuttonClass = (toolbarItem.value != null) ? \"treeView-\" + toolbarItem.value : \"treeView-rebind\";\n\t\t\t\t\tvrButton = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t//#endregion\n\n\t\t//#endregion\n\n\t\tif (vrButton)\n\t\t{\n\t\t\t//#region Create button\n\t\t\tcreateButton(\n\t\t\t\t{\n\t\t\t\t\ticon: iconClass,\n\t\t\t\t\timageUrl: toolbarItem.imageUrl,\n\t\t\t\t\tenable: enabled,\n\t\t\t\t\ttext: text,\n\t\t\t\t\tcolorSettings: { background: toolbarItem.backgroundColor, textColor: toolbarItem.textColor },\n\t\t\t\t\tvisible: toolbarItem.visible,\n\t\t\t\t\tcssContainer: toolbarItem.cssContainer,\n\t\t\t\t\tcss: toolbarItem.css,\n\t\t\t\t\tmode: (toolbarItem.primary === true) ? ButtonModeEnum.Primary : undefined,\n\t\t\t\t\tclassContainer: \"treeView-toolbarItemsContainer \" + ((toolbarItem.classContainer != null) ? toolbarItem.classContainer : \"\"),\n\t\t\t\t\tclass: ((toolbarItem.type == TreeViewToolbarItemType.Separator) ? \"treeView-separator\" : \"\") + \" treeView-toolbarItems \" + buttonClass,\n\t\t\t\t\tbadgeSettings: toolbarItem.badge,\n\t\t\t\t\tonClick: (e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\t//#region Event\n\t\t\t\t\t\tlet toolbarClickEvent = new TreeViewToolbarClickEvent();\n\t\t\t\t\t\ttoolbarClickEvent.sender = e.sender;\n\t\t\t\t\t\ttoolbarClickEvent.type = toolbarItem.type!;\n\t\t\t\t\t\t//#endregion\n\n\t\t\t\t\t\t//#region Confirmation message\n\t\t\t\t\t\tif (toolbarItem.confirmationMessage != null && toolbarItem.confirmationMessage.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconfirm(toolbarItem.confirmationMessage).then(() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\n\t\t\t\t\t\t//#endregion\n\t\t\t\t\t}\n\t\t\t\t}, this._divToolbar, null, buttonClass + \"_\" + this.element().id);\n\t\t\t//#endregion\n\t\t}\n\t\telse\n\t\t{\n\t\t\t//#region SplitButton\n\t\t\tif (toolbarItem.type == TreeViewToolbarItemType.SplitButton)\n\t\t\t{\n\t\t\t\tlet value = (toolbarItem.value != null) ? toolbarItem.value : \"splitButton\";\n\t\t\t\tif (toolbarItem.value == null && toolbarItem.text != null)\n\t\t\t\t\tvalue = toolbarItem.text.replace(/[^a-z0-9\\s]/gi, \"\").replace(/[_\\s]/g, \"\") + \"splitButton\";\n\n\t\t\t\tlet itemClass = \"treeView-\" + value;\n\t\t\t\tcreateSplitButton(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: text,\n\t\t\t\t\t\ticon: iconClass,\n\t\t\t\t\t\timageUrl: toolbarItem.imageUrl,\n\t\t\t\t\t\titems: toolbarItem.splitButtonItems!,\n\t\t\t\t\t\tvisible: toolbarItem.visible,\n\t\t\t\t\t\tcssContainer: toolbarItem.cssContainer + \" vertical-align: top;\",\n\t\t\t\t\t\tcss: toolbarItem.css,\n\t\t\t\t\t\tclassContainer: \"treeView-toolbarItemsContainer \" + ((toolbarItem.classContainer != null) ? toolbarItem.classContainer : \"\"),\n\t\t\t\t\t\tclass: \"treeView-toolbarItems treeView-splitButton \" + itemClass,\n\t\t\t\t\t\tonClick: (toolbarItem.onClick == null) ? undefined : (e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//#region Event\n\t\t\t\t\t\t\tlet toolbarClickEvent = new TreeViewToolbarClickEvent();\n\t\t\t\t\t\t\ttoolbarClickEvent.sender = e.sender;\n\t\t\t\t\t\t\ttoolbarClickEvent.type = toolbarItem.type!;\n\t\t\t\t\t\t\t//#endregion\n\n\t\t\t\t\t\t\t//#region Confirmation message\n\t\t\t\t\t\t\tif (toolbarItem.confirmationMessage != null && toolbarItem.confirmationMessage.length > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconfirm(toolbarItem.confirmationMessage).then(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\n\t\t\t\t\t\t\t//#endregion\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this._divToolbar, null, itemClass + \"_\" + this.element().id);\n\t\t\t}\n\t\t\t//#endregion\n\n\t\t\t//#region ButtonGroup\n\t\t\tif (toolbarItem.type == TreeViewToolbarItemType.ButtonGroup)\n\t\t\t{\n\t\t\t\tlet itemClass = \"treeView-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"buttonGroup\");\n\t\t\t\tcreateButtonGroup(\n\t\t\t\t\t{\n\t\t\t\t\t\tselectionMode: SelectionModeEnum.Single,\n\t\t\t\t\t\titems: toolbarItem.buttonGroupItems!,\n\t\t\t\t\t\tvisible: toolbarItem.visible,\n\t\t\t\t\t\tcssContainer: \"top: -1px; \" + toolbarItem.cssContainer,\n\t\t\t\t\t\tcss: toolbarItem.css,\n\t\t\t\t\t\tclassContainer: \"treeView-toolbarItemsContainer \" + toolbarItem.classContainer,\n\t\t\t\t\t\tclass: \"treeView-toolbarItems treeView-buttonGroup \" + itemClass,\n\t\t\t\t\t\twidth: \"auto\",\n\t\t\t\t\t\tonSelect: (e) => \n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//#region Event\n\t\t\t\t\t\t\tlet toolbarClickEvent = new TreeViewToolbarClickEvent();\n\t\t\t\t\t\t\ttoolbarClickEvent.sender = e.sender;\n\t\t\t\t\t\t\ttoolbarClickEvent.type = toolbarItem.type!;\n\t\t\t\t\t\t\t//#endregion\n\n\t\t\t\t\t\t\t//#region Confirmation message\n\t\t\t\t\t\t\tif (toolbarItem.confirmationMessage != null && toolbarItem.confirmationMessage.length > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconfirm(toolbarItem.confirmationMessage).then(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\n\t\t\t\t\t\t\t//#endregion\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this._divToolbar, null, itemClass + \"_\" + this.element().id);\n\t\t\t}\n\t\t\t//#endregion\n\n\t\t\t//#region CheckBox\n\t\t\tif (toolbarItem.type == TreeViewToolbarItemType.CheckBox)\n\t\t\t{\n\t\t\t\tlet itemClass = \"treeView-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"checkbox\");\n\t\t\t\tcreateCheckBox(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: toolbarItem.text,\n\t\t\t\t\t\tvisible: toolbarItem.visible,\n\t\t\t\t\t\tcssContainer: \"top: 3px; \" + toolbarItem.cssContainer,\n\t\t\t\t\t\tcss: toolbarItem.css,\n\t\t\t\t\t\tclassContainer: \"treeView-toolbarItemsContainer \" + toolbarItem.classContainer,\n\t\t\t\t\t\tclass: \"treeView-toolbarItems treeView-checkBox \" + itemClass,\n\t\t\t\t\t\tonCheck: (e) => \n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//#region Event\n\t\t\t\t\t\t\tlet toolbarClickEvent = new TreeViewToolbarClickEvent();\n\t\t\t\t\t\t\ttoolbarClickEvent.sender = e.sender;\n\t\t\t\t\t\t\ttoolbarClickEvent.type = toolbarItem.type!;\n\t\t\t\t\t\t\t//#endregion\n\n\t\t\t\t\t\t\t//#region Confirmation message\n\t\t\t\t\t\t\tif (toolbarItem.confirmationMessage != null && toolbarItem.confirmationMessage.length > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconfirm(toolbarItem.confirmationMessage).then(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\n\t\t\t\t\t\t\t//#endregion\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this._divToolbar, null, itemClass + \"_\" + this.element().id);\n\t\t\t}\n\t\t\t//#endregion\n\n\t\t\t//#region Label\n\t\t\tif (toolbarItem.type == TreeViewToolbarItemType.Label)\n\t\t\t{\n\t\t\t\tlet itemClass = \"treeView-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"label\");\n\t\t\t\tcreateLabel(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: toolbarItem.text,\n\t\t\t\t\t\tvisible: toolbarItem.visible,\n\t\t\t\t\t\tcssContainer: toolbarItem.cssContainer,\n\t\t\t\t\t\tcss: toolbarItem.css,\n\t\t\t\t\t\tclassContainer: \"treeView-toolbarItemsContainer \" + toolbarItem.classContainer,\n\t\t\t\t\t\tclass: \"treeView-toolbarItems treeView-label \" + itemClass,\n\t\t\t\t\t\tcolorSettings:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbackground: toolbarItem.backgroundColor,\n\t\t\t\t\t\t\ttextColor: toolbarItem.textColor\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonClick: (e) => \n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//#region Event\n\t\t\t\t\t\t\tlet toolbarClickEvent = new TreeViewToolbarClickEvent();\n\t\t\t\t\t\t\ttoolbarClickEvent.sender = e.sender;\n\t\t\t\t\t\t\ttoolbarClickEvent.type = toolbarItem.type!;\n\t\t\t\t\t\t\t//#endregion\n\n\t\t\t\t\t\t\t//#region Confirmation message\n\t\t\t\t\t\t\tif (toolbarItem.confirmationMessage != null && toolbarItem.confirmationMessage.length > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconfirm(toolbarItem.confirmationMessage).then(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\n\t\t\t\t\t\t\t//#endregion\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this._divToolbar, null, itemClass + \"_\" + this.element().id);\n\t\t\t}\n\t\t\t//#endregion\n\n\t\t\t//#region ComboBox\n\t\t\tif (toolbarItem.type == TreeViewToolbarItemType.ComboBox)\n\t\t\t{\n\t\t\t\tlet itemClass = \"treeView-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"comboBox\");\n\n\t\t\t\tif (toolbarItem.comboBoxOptions == null) toolbarItem.comboBoxOptions = new ComboBoxOptions();\n\t\t\t\ttoolbarItem.comboBoxOptions.classContainer = \"treeView-toolbarItemsContainer \" + toolbarItem.comboBoxOptions.classContainer;\n\t\t\t\ttoolbarItem.comboBoxOptions.class = \"treeView-toolbarItems treeView-comboBox \" + itemClass + \" \" + toolbarItem.comboBoxOptions.class;\n\t\t\t\tif (toolbarItem.comboBoxOptions.visible == null) toolbarItem.comboBoxOptions.visible = toolbarItem.visible;\n\t\t\t\tif (toolbarItem.comboBoxOptions.css == null) toolbarItem.comboBoxOptions.css = toolbarItem.css;\n\t\t\t\tif (toolbarItem.comboBoxOptions.cssContainer == null) toolbarItem.comboBoxOptions.cssContainer = toolbarItem.cssContainer + \";\";\n\t\t\t\ttoolbarItem.comboBoxOptions.cssContainer += \"vertical-align: top;\";\n\n\t\t\t\tcreateComboBox(toolbarItem.comboBoxOptions, this._divToolbar, null, itemClass + \"_\" + this.element().id);\n\t\t\t}\n\t\t\t//#endregion\n\n\t\t\t//#region DatePicker\n\t\t\tif (toolbarItem.type == TreeViewToolbarItemType.DatePicker)\n\t\t\t{\n\t\t\t\tlet itemClass = \"treeView-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"datePicker\");\n\n\t\t\t\tif (toolbarItem.datePickerOptions == null) toolbarItem.datePickerOptions = new DatePickerOptions();\n\t\t\t\ttoolbarItem.datePickerOptions.classContainer = \"treeView-toolbarItemsContainer \" + toolbarItem.datePickerOptions.classContainer;\n\t\t\t\ttoolbarItem.datePickerOptions.class = \"treeView-toolbarItems treeView-datePicker \" + itemClass + \" \" + toolbarItem.datePickerOptions.class;\n\t\t\t\tif (toolbarItem.datePickerOptions.visible == null) toolbarItem.datePickerOptions.visible = toolbarItem.visible;\n\t\t\t\tif (toolbarItem.datePickerOptions.css == null) toolbarItem.datePickerOptions.css = toolbarItem.css;\n\t\t\t\tif (toolbarItem.datePickerOptions.cssContainer == null) toolbarItem.datePickerOptions.cssContainer = toolbarItem.cssContainer;\n\t\t\t\ttoolbarItem.datePickerOptions.cssContainer += \"top: -1px; \" + toolbarItem.datePickerOptions.cssContainer;\n\n\t\t\t\tcreateDatePicker(toolbarItem.datePickerOptions, this._divToolbar, null, itemClass + \"_\" + this.element().id);\n\t\t\t}\n\t\t\t//#endregion\n\n\t\t\t//#region TextBox\n\t\t\tif (toolbarItem.type == TreeViewToolbarItemType.TextBox)\n\t\t\t{\n\t\t\t\tlet itemClass = \"treeView-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"textBox\");\n\n\t\t\t\tif (toolbarItem.textBoxOptions == null) toolbarItem.textBoxOptions = new TextBoxOptions();\n\t\t\t\ttoolbarItem.textBoxOptions.classContainer = \"treeView-toolbarItemsContainer \" + toolbarItem.textBoxOptions.classContainer;\n\t\t\t\ttoolbarItem.textBoxOptions.class = \"treeView-toolbarItems treeView-textBox \" + itemClass + \" \" + toolbarItem.textBoxOptions.class;\n\t\t\t\tif (toolbarItem.textBoxOptions.visible == null) toolbarItem.textBoxOptions.visible = toolbarItem.visible;\n\t\t\t\tif (toolbarItem.textBoxOptions.css == null) toolbarItem.textBoxOptions.css = toolbarItem.css;\n\t\t\t\tif (toolbarItem.textBoxOptions.cssContainer == null) toolbarItem.textBoxOptions.cssContainer = toolbarItem.cssContainer;\n\t\t\t\ttoolbarItem.textBoxOptions.cssContainer += \"top: -1px; \" + toolbarItem.textBoxOptions.cssContainer;\n\n\t\t\t\tcreateTextBox(toolbarItem.textBoxOptions, this._divToolbar, null, itemClass + \"_\" + this.element().id);\n\t\t\t}\n\t\t\t//#endregion\n\n\t\t\t//#region Switch\n\t\t\telse if (toolbarItem.type == TreeViewToolbarItemType.Switch)\n\t\t\t{\n\t\t\t\tif (toolbarItem.switchSettings == null)\n\t\t\t\t{\n\t\t\t\t\ttoolbarItem.switchSettings = new TreeViewToolbarSwitchSettings();\n\t\t\t\t\ttoolbarItem.switchSettings.labelOff = \"\";\n\t\t\t\t\ttoolbarItem.switchSettings.labelOn = \"\";\n\t\t\t\t}\n\n\t\t\t\tif (toolbarItem.switchSettings.checked == null) toolbarItem.switchSettings.checked = false;\n\t\t\t\tlet itemClass = \"treeView-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"switch\");\n\t\t\t\tpuma(this._divToolbar).vrAppendPuma(\"<div id='\" + itemClass + \"_\" + this.element().id + \"' class='treeView-toolbarItems-switch'></div>\");\n\t\t\t\tcreateSwitch(\n\t\t\t\t\t{\n\t\t\t\t\t\tlabelOff: toolbarItem.switchSettings!.labelOff,\n\t\t\t\t\t\tlabelOn: toolbarItem.switchSettings!.labelOn,\n\t\t\t\t\t\tchecked: toolbarItem.switchSettings.checked,\n\t\t\t\t\t\tcssContainer: \"top: -2px; \" + toolbarItem.cssContainer,\n\t\t\t\t\t\tcss: toolbarItem.css,\n\t\t\t\t\t\tclassContainer: \"treeView-toolbarItemsContainer \" + toolbarItem.classContainer,\n\t\t\t\t\t\tvisible: toolbarItem.visible,\n\t\t\t\t\t\tonChange: (e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (toolbarItem.switchSettings!.onCheck != null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet tableSwitchEvent = new TreeViewToolbarSwitchEvent();\n\t\t\t\t\t\t\t\ttableSwitchEvent.checked = e.checked;\n\t\t\t\t\t\t\t\ttoolbarItem.switchSettings!.onCheck(tableSwitchEvent);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, null, null, itemClass + \"_\" + this.element().id);\n\t\t\t}\n\t\t\t//#endregion\n\t\t}\n\t}\n\n\tprivate toolbarCustomLogic(toolbarItem: TreeViewToolbarItem, toolbarClickEvent: TreeViewToolbarClickEvent)\n\t{\n\t\tswitch (toolbarItem.type)\n\t\t{\n\t\t\tcase TreeViewToolbarItemType.Rebind:\n\t\t\t\t{\n\t\t\t\t\tthis.rebind();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase TreeViewToolbarItemType.Excel:\n\t\t\t\t{\n\t\t\t\t\tthis.excelExport();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (toolbarItem.onClick != null)\n\t\t\ttoolbarItem.onClick(toolbarClickEvent);\n\t}\n\t//#endregion\n\n\t//#region WebApi\n\tprivate doWebApiCall(request: TreeViewWebApiRequest, requestType: TreeViewRequestTypeEnum, promiseCallback?: Function)\n\t{\n\t\tlet json: any = {};\n\t\tjson.AuthKey = request.authKey;\n\n\t\tif (requestType == TreeViewRequestTypeEnum.Rebind || requestType == TreeViewRequestTypeEnum.Excel)\n\t\t{\n\t\t\tif (requestType == TreeViewRequestTypeEnum.Rebind)\n\t\t\t{\n\t\t\t\tif ((request as TreeViewRebindRequest).itemsPropertyName == null)\n\t\t\t\t\t(request as TreeViewRebindRequest).itemsPropertyName = \"items\";\n\t\t\t}\n\t\t}\n\t\t//#endregion\n\n\t\t//#region Method\n\t\tif (!request.method!.startsWith(\"/api/\"))\n\t\t{\n\t\t\tif (request.method!.startsWith(\"/\"))\n\t\t\t\trequest.method!.substring(1);\n\n\t\t\trequest.method = \"/api/\" + request.method;\n\t\t}\n\t\t//#endregion\n\n\t\t//#region Paramaters\n\t\tif (request.otherParameters != null)\n\t\t{\n\t\t\tlet jsonParameters = Object.getOwnPropertyNames(request.otherParameters);\n\t\t\tfor (let param of jsonParameters)\n\t\t\t\tjson[param] = request.otherParameters[param];\n\t\t}\n\n\t\tif (request.parameters != null)\n\t\t{\n\t\t\tlet parameters = request.parameters();\n\t\t\tlet jsonParameters = Object.getOwnPropertyNames(parameters);\n\t\t\tfor (let param of jsonParameters)\n\t\t\t\tjson[param] = parameters[param];\n\t\t}\n\t\t//#endregion\n\n\t\tlet jsonS = JSON.stringify(json);\n\n\t\tif (typeof (request.loadingElement) == \"boolean\")\n\t\t{\n\t\t\tif (request.loadingElement === false) request.loadingElement = undefined;\n\t\t\telse request.loadingElement = document.body;\n\t\t}\n\t\tshowLoader((request as any).tempLoadingElement != null ? (request as any).tempLoadingElement : request.loadingElement);\n\t\t(request as any).tempLoadingElement = undefined;\n\n\t\t$.ajax({\n\t\t\ttype: \"POST\",\n\t\t\tcontentType: \"application/json\",\n\t\t\tdata: jsonS,\n\t\t\tmethod: \"POST\",\n\t\t\tprocessData: false,\n\t\t\tdataType: \"json\",\n\t\t\turl: request.method,\n\t\t\tsuccess: (response: any, textStatus: string, jqXHR: JQueryXHR) =>\n\t\t\t{\n\t\t\t\thideLoader();\n\n\t\t\t\tif (response != null && (response.Success || response.success))\n\t\t\t\t{\n\t\t\t\t\t//#region Success notification message\n\t\t\t\t\tlet successMessage = request!.successNotificationMessage;\n\t\t\t\t\tsuccessMessage = (successMessage == null) ? false : successMessage;\n\n\t\t\t\t\tif (typeof (successMessage) == \"string\")\n\t\t\t\t\t\tsuccessMessage = successMessage;\n\n\t\t\t\t\tif (typeof (successMessage) == \"string\")\n\t\t\t\t\t\tnotify(successMessage);\n\t\t\t\t\t//#endregion\n\n\t\t\t\t\t//#region Rebind\n\t\t\t\t\tlet rebindAfterSave = request!.rebindGridAfterSave;\n\t\t\t\t\trebindAfterSave = (rebindAfterSave == null) ? false : rebindAfterSave;\n\n\t\t\t\t\tif (rebindAfterSave)\n\t\t\t\t\t\tthis.rebind();\n\t\t\t\t\t//#endregion\n\n\t\t\t\t\tif (request!.callbackBeforeDatasourceChange != null)\n\t\t\t\t\t\trequest!.callbackBeforeDatasourceChange(response);\n\n\t\t\t\t\t//#region Set data source if rebind\n\t\t\t\t\tif (requestType == TreeViewRequestTypeEnum.Rebind && response[(request as TreeViewRebindRequest).itemsPropertyName!] != null)\n\t\t\t\t\t\tthis.datasource(response[(request as TreeViewRebindRequest).itemsPropertyName!]);\n\t\t\t\t\t//#endregion\n\n\t\t\t\t\tif (request!.callback != null)\n\t\t\t\t\t\trequest!.callback(response);\n\n\t\t\t\t\tif (promiseCallback != null)\n\t\t\t\t\t\tpromiseCallback();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet exception = (response.Exception || response.exception);\n\t\t\t\t\tlet exceptionCode = (exception.Code || exception.code);\n\t\t\t\t\tif (response != null && exceptionCode == \"403\")\n\t\t\t\t\t{\n\t\t\t\t\t\tlocation.replace(\"/Default.aspx\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t//#region Error notification message\n\t\t\t\t\tlet errorMessage = request!.errorNotificationMessage;\n\t\t\t\t\terrorMessage = (errorMessage == null) ? true : errorMessage;\n\n\t\t\t\t\tif (errorMessage == true || typeof (errorMessage) == \"string\")\n\t\t\t\t\t\tnotify((typeof (errorMessage) == \"string\") ? errorMessage! : ((response != null) ? (response.ExceptionMessage! || response.exceptionMessage) : \"Errore nel salvataggio\"));\n\t\t\t\t\t//#endregion\n\n\t\t\t\t\t//#region Rebind\n\t\t\t\t\tlet rebindAfterError = request!.rebindGridAfterError;\n\t\t\t\t\trebindAfterError = (rebindAfterError == null) ? false : rebindAfterError;\n\n\t\t\t\t\tif (rebindAfterError)\n\t\t\t\t\t\tthis.rebind();\n\t\t\t\t\t//#endregion\n\n\t\t\t\t\tlet closeWindowAfterError = request!.closeWindowAfterError;\n\t\t\t\t\tcloseWindowAfterError = (closeWindowAfterError == null) ? false : closeWindowAfterError;\n\n\t\t\t\t\tif (request!.errorCallback != null)\n\t\t\t\t\t\trequest!.errorCallback((response != null) ? (response.ExceptionMessage! || response.exceptionMessage) : \"Errore nel salvataggio\");\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: (response: JQueryXHR, textStatus: string, errorThrown: string) =>\n\t\t\t{\n\t\t\t\thideLoader();\n\n\t\t\t\t//#region Error notification message\n\t\t\t\tlet errorMessage = request!.errorNotificationMessage;\n\t\t\t\terrorMessage = (errorMessage == null) ? true : errorMessage;\n\n\t\t\t\tlet message = \"Errore nel salvataggio\";\n\t\t\t\tif (response.responseJSON != null)\n\t\t\t\t\tmessage = (response.responseJSON.errorMessage != null) ? response.responseJSON.errorMessage : ((response.responseJSON.Message || response.responseJSON.message) + \"<br />\" + (response.responseJSON.ExceptionMessage || response.responseJSON.exceptionMessage));\n\t\t\t\telse if (response.responseText != null && response.responseText != \"\")\n\t\t\t\t\tmessage = response.responseText;\n\t\t\t\telse if (response.statusText != null && response.statusText != \"\")\n\t\t\t\t\tmessage = response.statusText;\n\t\t\t\telse\n\t\t\t\t\tmessage = \"Si è verificato un problema\";\n\n\t\t\t\tif (response.status == 401)\n\t\t\t\t\tmessage = \"Auth key errata\";\n\t\t\t\telse if (response.status == 404)\n\t\t\t\t\tmessage = \"Web Api non trovata\";\n\t\t\t\telse if (response.status == 403)\n\t\t\t\t{\n\t\t\t\t\tlocation.replace(\"/Default.aspx\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet finalMessage = \"Errore nel salvataggio\";\n\t\t\t\tif (errorMessage == true || typeof (errorMessage) == \"string\")\n\t\t\t\t{\n\t\t\t\t\tfinalMessage = (errorMessage == true) ? message : errorMessage;\n\t\t\t\t\tnotify(finalMessage);\n\t\t\t\t}\n\t\t\t\t//#endregion\n\n\t\t\t\t//#region Rebind\n\t\t\t\tlet rebindAfterError = request!.rebindGridAfterError;\n\t\t\t\trebindAfterError = (rebindAfterError == null) ? false : rebindAfterError;\n\n\t\t\t\tif (rebindAfterError)\n\t\t\t\t\tthis.rebind();\n\t\t\t\t//#endregion\n\n\t\t\t\tlet closeWindowAfterError = request!.closeWindowAfterError;\n\t\t\t\tcloseWindowAfterError = (closeWindowAfterError == null) ? false : closeWindowAfterError;\n\n\t\t\t\tif (request!.errorCallback != null)\n\t\t\t\t\trequest!.errorCallback(finalMessage);\n\t\t\t}\n\t\t});\n\t}\n\t//#endregion\n\n\t//#region Events\n\tchange(callBack?: Function): void\n\t{\n\t\tlet changeCallBack = this.getOptions().onAfterSelect;\n\t\tif (changeCallBack != null)\n\t\t{\n\t\t\tlet options = this.getOptions();\n\t\t\tlet value = (options.checkboxes && this._tempCheckedValue != null) ? this._tempCheckedValue : this.value<string>()!;\n\n\t\t\tlet isParent = this.isParent(value);\n\t\t\tlet parentItem = null;\n\t\t\tif (isParent)\n\t\t\t\tparentItem = this.datasource().filter(k => k.value == value)[0];\n\n\t\t\tlet changeEvent = new TreeViewChangeEvent();\n\t\t\tchangeEvent.sender = this;\n\t\t\tchangeEvent.value = value;\n\t\t\tchangeEvent.childrenValues = (isParent) ? this.getAllChildrenValues(parentItem!) : [];\n\t\t\tchangeEvent.selectedItem = this.getSelectedItem();\n\t\t\tchangeEvent.checked = this._isChecked;\n\t\t\tchangeEvent.isParent = isParent;\n\t\t\tchangeCallBack!(changeEvent);\n\t\t}\n\n\t\tif (callBack != null)\n\t\t\tcallBack();\n\t}\n\t//#endregion\n\n\tgetOptions()\n\t{\n\t\treturn this.options<TreeViewOptions>();\n\t}\n\t//#endregion\n}\n//#endregion\n\n//#region Classes\nclass TreeViewTemplateEvent\n{\n\tsender: TreeView;\n\tdataItem: any;\n\tcontainer: HTMLElement;\n}\n\nclass TreeViewEvent extends VrControlsEvent\n{\n\tsender: TreeView;\n\tvalue: any;\n\tchildrenValues: string[];\n\tselectedItem?: TreeViewItem;\n\tchecked: boolean;\n\tisParent?: boolean;\n}\n\nclass TreeViewChangeEvent extends TreeViewEvent\n{\n\n}\n\nclass TreeViewChangingEvent extends TreeViewEvent\n{\n\tpreviousValue?: string | null;\n\tpreviousCheckedValues?: string[] | null;\n}\n\nexport class TreeViewContextMenuClickEvent extends VrControlsEvent\n{\n\tsender: TreeView;\n\ttext?: string;\n\tvalue?: string;\n\tdataItem: any;\n\ttargets?: HTMLElement[];\n}\n\nclass TreeViewDoubleClickEvent extends VrControlsEvent\n{\n\tsender: TreeView;\n\ttext?: string;\n\tvalue?: string;\n\tdataItem: any;\n}\n\nclass TreeViewEditEvent extends VrControlsEvent\n{\n\tsender: TreeView;\n\ttext?: string;\n\tvalue?: string;\n\tdataItem: any;\n}\n\nclass TreeViewDragEvent extends VrControlsEvent\n{\n\tsender: TreeView;\n\ttarget: HTMLElement;\n\tsource: TreeViewItem;\n\tdestination?: TreeViewItem;\n}\n\nclass TreeViewDragStartEvent extends TreeViewDragEvent { }\nclass TreeViewDragMoveEvent extends TreeViewDragEvent { }\nclass TreeViewDragEndEvent extends TreeViewDragEvent { }\n\nclass TreeViewExportSettings\n{\n\tfileName?: string;\n\tsheetName?: string;\n\tnumericValueTypeEnum?: TreeViewNumericTypeEnum;\n\tdecimalDigits?: number;\n}\n\nclass TreeViewSumSettings\n{\n\tautoCalc?: boolean;\n}\n\nclass GenerateExcelRequest\n{\n\tpublic sheetName?: string;\n\tpublic fileName: string;\n\tpublic AuthKey: string;\n\tpublic datasource: TreeViewItem[];\n\tpublic numericValueTypeEnum: TreeViewNumericTypeEnum;\n\tpublic decimalDigits: number;\n\tpublic title?: string;\n}\n\nclass GenerateExcelResponse\n{\n\tpublic downloadUrl: string;\n}\n\nclass TempRebindInfo\n{\n\tyPosition: number;\n\tselectedValue: any;\n\tparentExpandedValueList: string[];\n}\n\nexport class TreeViewHeaderAndCellSettings\n{\n\ttextAlign?: TreeViewAlignEnum;\n\tbackgroundColor?: string;\n\tcolor?: string;\n\tcss?: string;\n}\n\nexport class TreeViewHeaderSettings extends TreeViewHeaderAndCellSettings\n{\n\ticon?: IconClass;\n}\n\nexport class TreeViewCellSettings extends TreeViewHeaderAndCellSettings\n{\n\tzeroIfNull?: boolean;\n}\n\nclass TreeViewWebApiRequest\n{\n\tauthKey?: string;\n\tmethod?: string;\n\tsuccessNotificationMessage?: boolean | string;\n\terrorNotificationMessage?: boolean | string;\n\trebindGridAfterSave?: boolean;\n\trebindGridAfterError?: boolean;\n\tcloseWindowAfterError?: boolean;\n\totherParameters?: any;\n\tloadingElement?: boolean | HTMLElement | JQuery | string;\n\n\tcallback?: (response?: any) => void;\n\tcallbackBeforeDatasourceChange?: (response?: any) => void;\n\terrorCallback?: (message?: string) => void;\n\tparameters?: () => any;\n}\n\nclass TreeViewRebindRequest extends TreeViewWebApiRequest\n{\n\titemsPropertyName?: string;\n\trebindAtStartup?: boolean;\n}\n\nenum TreeViewRequestTypeEnum\n{\n\tRebind = 1,\n\tExcel = 3\n}\n//#endregion"],"names":["li","checkBox","parentChecked","item","e","ul","text"],"mappings":"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"}
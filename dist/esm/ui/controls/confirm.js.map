{"version":3,"file":"confirm.js","sources":["../../../../src/ui/controls/confirm.ts"],"sourcesContent":["import { createWindow, ButtonModeEnum, WindowFooterItemTypeEnum, TextAlignEnum, puma } from \"../vr\";\nimport { Window } from \"./window\";\nimport { VrControlsEvent } from \"../common\";\nimport { Button } from \"./button\";\n\n//#region Options\nexport class ConfirmOptions {\n    textOkButton?: string;\n    textCancelButton?: string;\n    content?: string;\n    title?: string;\n    width?: number | string;\n    height?: number | string;\n    textAlign?: TextAlignEnum;\n    css?: string;\n    cssContainer?: string;\n\n    onContentLoaded?(e: ContentConfirmLoadedEvent): void;\n}\n//#endregion\n\n//#region Control\nexport class Confirm {\n    private _window: Window;\n    private _options: ConfirmOptions;\n\n    constructor(text?: string | null, options?: ConfirmOptions | null) {\n        //#region Options\n        if (options == null)\n            options = new ConfirmOptions();\n\n        if (options.textOkButton == null) options.textOkButton = \"Conferma\";\n        if (options.textCancelButton == null) options.textCancelButton = \"Annulla\";\n        if (options.width == null) options.width = 300;\n        if (options.height == null) options.height = 120;\n        if (options.textAlign == null) options.textAlign = TextAlignEnum.Center;\n        //#endregion\n\n        this._options = options;\n\n        //#region Content\n        let content = \"\";\n        if (options.content == null && text == null) options.content = \"<div></div>\";\n        if (options.content != null)\n            content = options.content;\n        else if (text != null)\n            content = text;\n        //#endregion\n\n        //#region Text align\n        let textAlign = \"\";\n        switch (options.textAlign) {\n            case TextAlignEnum.Left: textAlign = \"text-align: left;\"; break;\n            case TextAlignEnum.Center: textAlign = \"text-align: center;\"; break;\n            case TextAlignEnum.Right: textAlign = \"text-align: right;\"; break;\n        }\n        //#endregion\n\n        this._window = createWindow(\n            {\n                addToControlList: false,\n                closeable: false,\n                title: options.title,\n                width: options.width,\n                height: options.height,\n                removeOnClose: true,\n                content: \"<div class='contentContainer'>\" + content + \"</div>\",\n                cssContainer: \"height: auto !important;\",\n                css: \"height: auto !important;\" + textAlign,\n                footer:\n                    [\n                        { type: WindowFooterItemTypeEnum.Custom, text: options.textCancelButton, value: \"close\", cssContainer: \"width: Calc(50% - 5px);\", css: \"width: 100%;\", onClick: () => this.close() },\n                        { type: WindowFooterItemTypeEnum.Custom, text: options.textOkButton, value: \"ok\", cssContainer: \"width: Calc(50% - 5px);\", css: \"width: 100%;\", mode: ButtonModeEnum.Primary }\n                    ],\n                onContentLoaded: (e) => this.onContentLoaded(puma(e.sender.element()).find(\".contentContainer\")[0])\n            });\n\n        if (options.cssContainer != null)\n            this._window.container().style.cssText += options.cssContainer + \";\";\n\n        if (options.css != null)\n            this._window.element().style.cssText += options.css + \";\";\n\n        puma(this._window.element()).addClass(\"vrConfirm\");\n        puma(this._window.container()).addClass(\"vrConfirmContainer\");\n        window.setTimeout(() => puma(this._window.footerItem<Button>(\"ok\")!.element()).focus());\n    }\n\n    open(): Promise<any> {\n        let promise = new Promise((okCallback?: Function, cancelCallback?: Function) => {\n            this._window.open(\n                [\n                    {\n                        value: \"ok\", callback: () => {\n                            if (okCallback != null)\n                                okCallback();\n\n                            this.close();\n                        }\n                    },\n                    {\n                        value: \"close\", callback: () => {\n                            if (cancelCallback != null)\n                                cancelCallback();\n\n                            console.log();\n                        }\n                    }\n                ]\n            )\n        });\n        return promise;\n    }\n\n    close(): void {\n        this._window.close();\n        puma(this._window.container()).remove();\n        puma(this._window.background()).remove();\n    }\n\n    private getOptions(): ConfirmOptions {\n        return this._options;\n    }\n\n    private onContentLoaded(contentElement: HTMLElement): void {\n        let options = this.getOptions();\n        if (options.onContentLoaded != null) {\n            let contentLoadedEvent = new ContentConfirmLoadedEvent();\n            contentLoadedEvent.sender = this;\n            contentLoadedEvent.contentElement = contentElement;\n            options.onContentLoaded(contentLoadedEvent);\n        }\n    }\n}\n//#endregion\n\n//#region Events\nclass ContentConfirmLoadedEvent extends VrControlsEvent {\n    sender: Confirm;\n    contentElement: HTMLElement;\n}\n//#endregion"],"names":[],"mappings":"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"}
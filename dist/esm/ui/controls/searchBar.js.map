{"version":3,"file":"searchBar.js","sources":["../../../../src/ui/controls/searchBar.ts"],"sourcesContent":["import { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\nimport { ControlTypeEnum, createIcon, createTextBox, IconClassicLight, IconClass, puma } from \"../vr\";\nimport { TextBox } from \"./textbox\";\n\n//#region Options\nexport class SearchBarOptions extends VrControlOptions\n{\n\tcollapsed?: boolean;\n\ticon?: IconClass | boolean;\n\tplaceholder?: string;\n\texpandOnClick?: boolean;\n\tcollapseOnBlur?: boolean;\n\n\tonClick?(e: SearchBarClickEvent): void;\n\tonKeyUp?(e: SearchBarKeyUpEvent): void;\n\tonEnterKey?(e: SearchBarEnterKeyEvent): void;\n\tonBlur?(e: SearchBarBlurEvent): void;\n}\n//#endregion\n\n//#region Control\nexport class SearchBar extends VrControl\n{\n\t//#region Variables\n\tprivate _textBox: TextBox;\n\tprivate _previousValue: string;\n\t//#endregion\n\n\tconstructor(element: HTMLElement, options?: SearchBarOptions | null)\n\t{\n\t\t//#region Options\n\t\tif (options == null)\n\t\t\toptions = new SearchBarOptions();\n\n\t\tif (options.expandOnClick == null) options.expandOnClick = true;\n\t\tif (options.collapseOnBlur == null) options.collapseOnBlur = false;\n\t\tif (options.collapsed == null) options.collapsed = false;\n\t\tif (options.placeholder == null) options.placeholder = \"Cerca...\";\n\n\t\tif (options.icon == null) options.icon = true;\n\t\tif (options.icon == true) options.icon = IconClassicLight.Search;\n\t\t//#endregion\n\n\t\tsuper(element, options, ControlTypeEnum.SearchBar);\n\n\t\t//#region Icon\n\t\tif (options.icon !== false)\n\t\t{\n\t\t\tcreateIcon({\n\t\t\t\tvalue: options.icon,\n\t\t\t\tcolor: (options.onClick != null) ? \"#878787\" : \"#CCC\",\n\t\t\t\tonClick: (e) =>\n\t\t\t\t{\n\t\t\t\t\tif (options!.expandOnClick != null)\n\t\t\t\t\t\tthis.expand();\n\n\t\t\t\t\tif (options!.onClick != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet clickEvent = new SearchBarClickEvent();\n\t\t\t\t\t\tclickEvent.sender = this;\n\t\t\t\t\t\tclickEvent.value = this.value();\n\t\t\t\t\t\toptions!.onClick(clickEvent);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this.element())\n\t\t}\n\t\t//#endregion\n\n\t\t//#region TextBox\n\t\tthis._textBox = createTextBox({\n\t\t\tplaceholder: options.placeholder,\n\t\t\twidth: (options.icon !== false) ? \"Calc(100% - 16px)\" : \"100%\",\n\t\t\tonKeyDown: (e) => this._previousValue = this.value(),\n\t\t\tonKeyUp: (e) =>\n\t\t\t{\n\t\t\t\tif (options!.onKeyUp != null)\n\t\t\t\t{\n\t\t\t\t\tlet keyUpEvent = new SearchBarKeyUpEvent();\n\t\t\t\t\tkeyUpEvent.sender = this;\n\t\t\t\t\tkeyUpEvent.value = this.value();\n\t\t\t\t\tkeyUpEvent.previousValue = this._previousValue;\n\t\t\t\t\toptions!.onKeyUp!(keyUpEvent);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonEnterKey: () =>\n\t\t\t{\n\t\t\t\tif (options!.onEnterKey != null)\n\t\t\t\t{\n\t\t\t\t\tlet enterKeyPressEvent = new SearchBarEnterKeyEvent();\n\t\t\t\t\tenterKeyPressEvent.sender = this;\n\t\t\t\t\tenterKeyPressEvent.value = this.value();\n\t\t\t\t\toptions!.onEnterKey(enterKeyPressEvent);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonBlur: (e) =>\n\t\t\t{\n\t\t\t\tif (options!.collapseOnBlur)\n\t\t\t\t\tthis.collapse();\n\n\t\t\t\tif (options!.onBlur != null)\n\t\t\t\t{\n\t\t\t\t\tlet blurEvent = new SearchBarBlurEvent();\n\t\t\t\t\tblurEvent.sender = this;\n\t\t\t\t\tblurEvent.value = this.value();\n\t\t\t\t\toptions!.onBlur(blurEvent);\n\t\t\t\t}\n\t\t\t}\n\t\t}, this.element())\n\t\t//#endregion\n\n\t\t//#region Collapsed\n\t\tif (options.collapsed)\n\t\t\tthis.collapse();\n\t\t//#endregion\n\t}\n\n\t//#region Methods\n\tvalue(text?: string)\n\t{\n\t\treturn this._textBox.value<string>(text);\n\t}\n\n\tclear()\n\t{\n\t\tthis._textBox.clear();\n\t}\n\n\t//#region Collapse/Expand\n\tcollapse()\n\t{\n\t\tthis._textBox.hide();\n\t\tthis.container().style.cssText += \"border-bottom: none;\";\n\t}\n\n\texpand()\n\t{\n\t\tthis._textBox.show();\n\t\tthis._textBox.focus();\n\t\tthis.container().style.cssText += \"border-bottom: solid 1px #d9d9d9;\";\n\t}\n\n\tisCollapsed()\n\t{\n\t\treturn !this._textBox.visible();\n\t}\n\t//#endregion\n\n\tfocus()\n\t{\n\t\tthis._textBox.focus();\n\t}\n\t//#endregion\n}\n//#endregion\n\n//#region Classes\nclass SearchBarEvent extends VrControlsEvent\n{\n\tsender: SearchBar;\n\tvalue: string;\n}\n\nclass SearchBarKeyUpEvent extends SearchBarEvent\n{\n\tpreviousValue: string;\n}\n\nclass SearchBarEnterKeyEvent extends SearchBarEvent\n{\n}\n\nclass SearchBarClickEvent extends SearchBarEvent\n{\n}\n\nclass SearchBarBlurEvent extends SearchBarEvent\n{\n}\n//#endregion"],"names":[],"mappings":"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"}
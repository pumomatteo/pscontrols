{"version":3,"file":"dialog.js","sources":["../../../../src/ui/controls/dialog.ts"],"sourcesContent":["import { createWindow, TextAlignEnum, puma } from \"../vr\";\nimport { Window, WindowFooterItem } from \"./window\";\nimport { VrControlsEvent } from \"../common\";\n\n//#region Options\nexport class DialogOptions {\n    content?: string;\n    title?: string;\n    width?: number;\n    height?: number;\n    textAlign?: TextAlignEnum;\n    footerItems?: WindowFooterItem[];\n    css?: string;\n    cssContainer?: string;\n    hideCloseIcon?: boolean;\n\n    onContentLoaded?(e: ContentDialogLoadedEvent): void;\n    onClose?: () => void;\n}\n//#endregion\n\n//#region Control\nexport class Dialog {\n    private _window: Window;\n    private _options: DialogOptions;\n\n    constructor(text?: string | null, options?: DialogOptions | null) {\n        //#region Options\n        if (options == null)\n            options = new DialogOptions();\n\n        if (options.width == null) options.width = 300;\n        if (options.height == null) options.height = 120;\n        if (options.textAlign == null) options.textAlign = TextAlignEnum.Center;\n        //#endregion\n\n        this._options = options;\n\n        //#region Content\n        let content = \"\";\n        if (options.content == null && text == null) options.content = \"<div></div>\";\n        if (options.content != null)\n            content = options.content;\n        else if (text != null)\n            content = text;\n        //#endregion\n\n        //#region Text align\n        let textAlign = \"\";\n        switch (options.textAlign) {\n            case TextAlignEnum.Left: textAlign = \"text-align: left;\"; break;\n            case TextAlignEnum.Center: textAlign = \"text-align: center;\"; break;\n            case TextAlignEnum.Right: textAlign = \"text-align: right;\"; break;\n        }\n        //#endregion\n\n        //#region Footer items\n        if (options.footerItems != null) {\n            let totalWidth = options.footerItems.filter(k => k.width != null).map(k => k.width).vrSum();\n            let noWidthItems = options.footerItems.filter(k => k.width == null);\n            let widthItems = options.footerItems.filter(k => k.width != null);\n\n            let footerAvailableWidth = (options.width - 10 - (widthItems.length * 5)) - totalWidth;\n            let singleItemWidth = footerAvailableWidth / options.footerItems.length - 5;\n            if (noWidthItems.length > 0)\n                singleItemWidth = footerAvailableWidth / noWidthItems.length - 5;\n\n            for (let footerItem of options.footerItems) {\n                if (footerItem.width == null)\n                    footerItem.width = singleItemWidth;\n            }\n        }\n        //#endregion\n\n        this._window = createWindow(\n            {\n                addToControlList: false,\n                closeable: false,\n                removeOnClose: true,\n                hideCloseIcon: options.hideCloseIcon,\n                title: options.title,\n                width: options.width,\n                height: options.height,\n                content: \"<div class='contentContainer'>\" + content + \"</div>\",\n                cssContainer: \"height: auto !important;\",\n                css: \"height: auto !important;\" + textAlign,\n                footer: options.footerItems,\n                onContentLoaded: (e) => this.onContentLoaded(puma(e.sender.element()).find(\".contentContainer\")[0]),\n                onClose: () => {\n                    if (options!.onClose != null)\n                        options!.onClose();\n                }\n            });\n\n        if (options.cssContainer != null)\n            this._window.container().style.cssText += options.cssContainer + \";\";\n\n        if (options.css != null)\n            this._window.element().style.cssText += options.css + \";\";\n\n        puma(this._window.element()).addClass(\"vrDialog\");\n        puma(this._window.container()).addClass(\"vrDialogContainer\");\n    }\n\n    open(): void {\n        this._window.open();\n    }\n\n    close(): void {\n        this._window.close();\n        puma(this._window.container()).remove();\n        puma(this._window.background()).remove();\n    }\n\n    window() {\n        return this._window;\n    }\n\n    private getOptions(): DialogOptions {\n        return this._options;\n    }\n\n    private onContentLoaded(contentElement: HTMLElement): void {\n        let options = this.getOptions();\n        if (options.onContentLoaded != null) {\n            let contentLoadedEvent = new ContentDialogLoadedEvent();\n            contentLoadedEvent.sender = this;\n            contentLoadedEvent.contentElement = contentElement;\n            options.onContentLoaded(contentLoadedEvent);\n        }\n    }\n}\n//#endregion\n\n//#region Events\nclass ContentDialogLoadedEvent extends VrControlsEvent {\n    sender: Dialog;\n    contentElement: HTMLElement;\n}\n//#endregion"],"names":[],"mappings":"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"}
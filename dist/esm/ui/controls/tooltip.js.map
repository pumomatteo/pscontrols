{"version":3,"file":"tooltip.js","sources":["../../../../src/ui/controls/tooltip.ts"],"sourcesContent":["import { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\nimport { AnimationHideEnum, AnimationShowEnum, ColorSettings, ControlTypeEnum, div, icon, IconClassicLight, IconClass, NotifierOptions, puma, TooltipHideOnEnum, TooltipPositionEnum, TooltipShowOnEnum, TooltipTypeEnum } from \"../vr\";\nimport { Notifier } from \"./notifier\";\n\n//#region Options\nexport class TooltipOptions extends VrControlOptions\n{\n\ttarget?: HTMLElement | JQuery | string;\n\telementToAppend?: HTMLElement | JQuery | string;\n\tcontent?: string;\n\ttype?: TooltipTypeEnum;\n\tposition?: TooltipPositionEnum;\n\thideSettings?: TooltipHideSettings;\n\tshowSettings?: TooltipShowSettings;\n\tcolorSettings?: ColorSettings;\n\tshowOn?: TooltipShowOnEnum;\n\thideOn?: TooltipHideOnEnum;\n\ticon?: IconClass;\n\n\tonShow?: (e: TooltipShowEvent) => void;\n\tonHide?: (e: TooltipHideEvent) => void;\n}\n//#endregion\n\n//#region Control\nexport class Tooltip extends VrControl\n{\n\t//#region Variables\n\tprivate _notifier: Notifier;\n\t//#endregion\n\n\tconstructor(element: HTMLElement, options?: TooltipOptions | null)\n\t{\n\t\t//#region Options\n\t\tif (options == null)\n\t\t\toptions = new TooltipOptions();\n\n\t\tif (options.position == null) options.position = TooltipPositionEnum.BottomCenter;\n\t\tif (options.showOn == null) options.showOn = TooltipShowOnEnum.Hover;\n\t\tif (options.hideOn == null) options.hideOn = TooltipHideOnEnum.Default;\n\t\tif (options.type == null) options.type = TooltipTypeEnum.Default;\n\n\t\tif (options.colorSettings == null) options.colorSettings = new ColorSettings();\n\t\tif (options.colorSettings.background == null) options.colorSettings.background = \"#d9d9d9\";\n\t\tif (options.colorSettings.textColor == null) options.colorSettings.textColor = \"#000\";\n\t\tif (options.colorSettings.border == null) options.colorSettings.border = \"#CCC\";\n\n\t\tif (options.showSettings == null) options.showSettings = new TooltipShowSettings();\n\t\tif (options.showSettings.showAfter == null) options.showSettings.showAfter = 500;\n\t\tif (options.showSettings.animation == null) options.showSettings.animation = AnimationShowEnum.None;\n\n\t\tif (options.hideSettings == null) options.hideSettings = new TooltipHideSettings();\n\t\tif (options.hideSettings.hideAfter == null) options.hideSettings.hideAfter = 600;\n\t\tif (options.hideSettings.animation == null) options.hideSettings.animation = AnimationHideEnum.None;\n\n\t\tif (options.elementToAppend == null) options.elementToAppend = options.target;\n\t\t//#endregion\n\n\t\tsuper(element, options, ControlTypeEnum.Tooltip);\n\n\t\t//#region Show/Hide\n\t\tlet showOn: TooltipShowHideEnum = TooltipShowHideEnum.MouseEnter;\n\t\tlet hideOn: TooltipShowHideEnum = TooltipShowHideEnum.MouseLeave;\n\t\tswitch (options.showOn)\n\t\t{\n\t\t\tcase TooltipShowOnEnum.Hover:\n\t\t\t\t{\n\t\t\t\t\tshowOn = TooltipShowHideEnum.MouseEnter;\n\t\t\t\t\tif (options.hideOn == TooltipHideOnEnum.Default)\n\t\t\t\t\t\thideOn = TooltipShowHideEnum.MouseLeave;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase TooltipShowOnEnum.Click:\n\t\t\t\t{\n\t\t\t\t\tshowOn = TooltipShowHideEnum.Click;\n\t\t\t\t\tif (options.hideOn == TooltipHideOnEnum.Default)\n\t\t\t\t\t\thideOn = TooltipShowHideEnum.Click;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase TooltipShowOnEnum.Focus:\n\t\t\t\t{\n\t\t\t\t\tshowOn = TooltipShowHideEnum.Focus;\n\t\t\t\t\tif (options.hideOn == TooltipHideOnEnum.Default)\n\t\t\t\t\t\thideOn = TooltipShowHideEnum.Blur;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (options.hideOn != TooltipHideOnEnum.Default)\n\t\t{\n\t\t\tswitch (options.hideOn)\n\t\t\t{\n\t\t\t\tcase TooltipHideOnEnum.Leave: hideOn = TooltipShowHideEnum.MouseLeave; break;\n\t\t\t\tcase TooltipHideOnEnum.Click: hideOn = TooltipShowHideEnum.Click; break;\n\t\t\t\tcase TooltipHideOnEnum.Blur: hideOn = TooltipShowHideEnum.Blur; break;\n\t\t\t}\n\t\t}\n\n\t\tif (options.showOn != TooltipShowOnEnum.Never)\n\t\t{\n\t\t\tpuma(this.target()).on(showOn, (e: JQuery.MouseEnterEvent) =>\n\t\t\t{\n\t\t\t\twindow.setTimeout(() => this.show(), options!.showSettings!.showAfter);\n\t\t\t});\n\n\t\t\tpuma(this.target()).on(hideOn, (e: JQuery.MouseLeaveEvent) =>\n\t\t\t{\n\t\t\t\tif (options!.hideOn != TooltipHideOnEnum.Never)\n\t\t\t\t\twindow.setTimeout(() => this.hide(), Number(options!.hideSettings!.hideAfter));\n\t\t\t});\n\n\t\t\tpuma(this.container()).on(hideOn, (e: JQuery.MouseLeaveEvent) =>\n\t\t\t{\n\t\t\t\tif (options!.hideOn != TooltipHideOnEnum.Never)\n\t\t\t\t\twindow.setTimeout(() => this.hide(), Number(options!.hideSettings!.hideAfter));\n\t\t\t});\n\n\t\t\tif (hideOn == TooltipShowHideEnum.Click && options.hideOn != TooltipHideOnEnum.Never)\n\t\t\t\tpuma(document.body).on(\"click\", () => window.setTimeout(() => this.hide(), Number(options!.hideSettings!.hideAfter)));\n\t\t}\n\t\t//#endregion\n\t}\n\n\tshow(content?: any)\n\t{\n\t\tif (this._notifier != null && this._notifier.visible())\n\t\t\treturn;\n\n\t\tlet options = this.getOptions();\n\n\t\t//#region Content\n\t\tif (content != null)\n\t\t\tthis.content(content);\n\n\t\tif (options.content == null)\n\t\t\toptions.content = this.target().innerText;\n\t\t//#endregion\n\n\t\tsuper.show();\n\n\t\t(options.hideSettings as any).autoHide = false;\n\t\tthis._notifier = new Notifier(options.content, options as NotifierOptions);\n\n\t\tpuma(this._notifier.container()).vrAppendToPuma(options.elementToAppend);\n\n\t\t//#region Event\n\t\tif (options.onShow != null)\n\t\t{\n\t\t\tlet showEvent = new TooltipShowEvent();\n\t\t\tshowEvent.sender = this;\n\t\t\tshowEvent.content = this.content()!;\n\t\t\toptions.onShow(showEvent);\n\t\t}\n\t\t//#endregion\n\t}\n\n\thide()\n\t{\n\t\tif (this._notifier == null || !this._notifier.visible())\n\t\t\treturn;\n\n\t\tlet options = this.getOptions();\n\n\t\tsuper.hide();\n\t\tthis._notifier.hide();\n\n\t\t//#region Event\n\t\tif (options.onHide != null)\n\t\t{\n\t\t\tlet hideEvent = new TooltipHideEvent();\n\t\t\thideEvent.sender = this;\n\t\t\thideEvent.content = this.content()!;\n\t\t\toptions.onHide(hideEvent);\n\t\t}\n\t\t//#endregion\n\t}\n\n\tvisible(state?: boolean)\n\t{\n\t\tsuper.visible(state);\n\t\treturn (this._notifier == null) ? false : this._notifier.visible(state);\n\t}\n\n\tcontent(content?: string)\n\t{\n\t\tlet options = this.getOptions();\n\t\tif (content != null)\n\t\t\toptions.content = content;\n\n\t\treturn options.content;\n\t}\n\n\ttarget()\n\t{\n\t\treturn puma(this.getOptions().target)[0] as HTMLElement;\n\t}\n\n\tgetOptions()\n\t{\n\t\treturn this.options<TooltipOptions>();\n\t}\n}\n//#endregion\n\n//#region Classes\nclass TooltipHideSettings\n{\n\tclickToHide?: boolean;\n\thideAfter?: number;\n\tanimation?: AnimationHideEnum;\n}\n\nclass TooltipShowSettings\n{\n\tshowAfter?: number;\n\tanimation?: AnimationShowEnum;\n}\n\nenum TooltipShowHideEnum\n{\n\tClick = \"click\",\n\tFocus = \"focus\",\n\tMouseEnter = \"mouseenter\",\n\tBlur = \"blur\",\n\tMouseLeave = \"mouseleave\"\n}\n\nclass TooltipShowEvent extends VrControlsEvent\n{\n\tsender: Tooltip;\n\tcontent: string;\n}\n\nclass TooltipHideEvent extends VrControlsEvent\n{\n\tsender: Tooltip;\n\tcontent: string;\n}\n//#endregion"],"names":[],"mappings":"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"}
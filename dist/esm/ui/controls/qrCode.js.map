{"version":3,"file":"qrCode.js","sources":["../../../../src/ui/controls/qrCode.ts"],"sourcesContent":["import { Ecc, QrCodeManager } from \"../../../src/managers/qrCodeManager\";\nimport { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\nimport { BorderStyleEnum, ControlTypeEnum, puma } from \"../vr\";\n\n//#region Options\nexport class QrCodeOptions extends VrControlOptions\n{\n\tvalue?: string | number;\n\tcolor?: string;\n\tborder?: boolean | QrCodeBorderSettings;\n\twrap?: boolean;\n\n\tonClick?: (e: QrCodeClickEvent) => void;\n}\n//#endregion\n\n//#region Control\nexport class QrCode extends VrControl\n{\n\t//#region Variables\n\tprivate _value: string | number;\n\tprivate _svg: SVGElement;\n\t//#endregion\n\n\tconstructor(element: HTMLElement, options?: QrCodeOptions | null)\n\t{\n\t\t//#region Options\n\t\tif (options == null)\n\t\t\toptions = new QrCodeOptions();\n\n\t\tif (options.width == null) options.width = 200;\n\t\tif (options.color == null) options.color = \"#000000\";\n\t\tif (options.wrap == null) options.wrap = true;\n\t\tif (options.tabIndex == null) options.tabIndex = -1;\n\n\t\tif (options.border == null) options.border = false;\n\t\tif (options.border === true) options.border = new QrCodeBorderSettings();\n\t\tif (options.border !== false)\n\t\t{\n\t\t\tif (options.border.color == null) options.border.color = options.color;\n\t\t\tif (options.border.size == null) options.border.size = 1;\n\t\t\tif (options.border.style == null) options.border.style = BorderStyleEnum.Solid;\n\t\t}\n\t\t//#endregion\n\n\t\tsuper(element, options, ControlTypeEnum.QrCode);\n\n\t\tif (options.value != null)\n\t\t\tthis.value(options.value);\n\n\t\t//#region Events\n\t\tif (options.onClick != null)\n\t\t{\n\t\t\tthis.element().style.cssText += \"cursor: pointer;\";\n\t\t\tpuma(this.element()).on(\"click\", (e: JQuery.ClickEvent) => \n\t\t\t{\n\t\t\t\tlet clickEvent = new QrCodeClickEvent();\n\t\t\t\tclickEvent.sender = this;\n\t\t\t\tclickEvent.value = this.value();\n\t\t\t\toptions!.onClick!(clickEvent);\n\t\t\t})\n\t\t}\n\t\t//#endregion\n\t}\n\n\t//#region Methods\n\tvalue(value?: string | number)\n\t{\n\t\tif (value != null) \n\t\t{\n\t\t\tif (value === \"\")\n\t\t\t{\n\t\t\t\tthis.clear();\n\t\t\t\treturn \"\";\n\t\t\t}\n\n\t\t\tlet options = this.getOptions();\n\t\t\tpuma(this.element()).empty();\n\n\t\t\tlet qr0: QrCodeManager = QrCodeManager.encodeText(String(value), Ecc.MEDIUM);\n\t\t\tlet svg = qr0.toSvgString(4, options.color!);\n\t\t\tpuma(this.element()).vrAppendPuma(svg);\n\n\t\t\tthis._svg = puma(this.element()).find(\"svg\")[0];\n\n\t\t\tif (!options.wrap)\n\t\t\t\tpuma(this._svg).find(\"rect\")[0].style.cssText += \"fill: transparent;\";\n\n\t\t\tif (options.border !== false)\n\t\t\t{\n\t\t\t\tlet border = options.border as QrCodeBorderSettings;\n\t\t\t\tthis._svg.style.cssText += \"border-style: \" + border.style + \"; border-width: \" + border.size + \"px; border-color: \" + border.color + \";\";\n\t\t\t}\n\n\t\t\tthis._value = value;\n\t\t\tthis.tooltip(String(value));\n\t\t}\n\t\treturn String(this._value);\n\t}\n\n\tsvg()\n\t{\n\t\treturn this._svg;\n\t}\n\n\tclear()\n\t{\n\t\tpuma(this.element()).empty();\n\t\tthis._value = \"\";\n\t\tthis.tooltip(\"\");\n\t}\n\n\tgetOptions()\n\t{\n\t\treturn this.options<QrCodeOptions>();\n\t}\n\t//#endregion\n}\n//#endregion\n\n//#region Classes\nclass QrCodeBorderSettings\n{\n\tsize?: number;\n\tcolor?: string;\n\tstyle?: string | BorderStyleEnum;\n}\n\nclass QrCodeClickEvent extends VrControlsEvent\n{\n\tsender: QrCode;\n\tvalue: string;\n}\n//#endregion"],"names":[],"mappings":";;;AAKO,MAAM,sBAAsB,iBACnC;AAAA,EACC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA;AACD;AAIO,MAAM,eAAe,UAC5B;AAAA;AAAA,EAES;AAAA,EACA;AAAA;AAAA,EAGR,YAAY,SAAsB,SAClC;AAEC,QAAI,WAAW;AACd,gBAAU,IAAI,cAAA;AAEf,QAAI,QAAQ,SAAS,KAAM,SAAQ,QAAQ;AAC3C,QAAI,QAAQ,SAAS,KAAM,SAAQ,QAAQ;AAC3C,QAAI,QAAQ,QAAQ,KAAM,SAAQ,OAAO;AACzC,QAAI,QAAQ,YAAY,KAAM,SAAQ,WAAW;AAEjD,QAAI,QAAQ,UAAU,KAAM,SAAQ,SAAS;AAC7C,QAAI,QAAQ,WAAW,KAAM,SAAQ,SAAS,IAAI,qBAAA;AAClD,QAAI,QAAQ,WAAW,OACvB;AACC,UAAI,QAAQ,OAAO,SAAS,KAAM,SAAQ,OAAO,QAAQ,QAAQ;AACjE,UAAI,QAAQ,OAAO,QAAQ,KAAM,SAAQ,OAAO,OAAO;AACvD,UAAI,QAAQ,OAAO,SAAS,KAAM,SAAQ,OAAO,QAAQ,gBAAgB;AAAA,IAC1E;AAGA,UAAM,SAAS,SAAS,gBAAgB,MAAM;AAE9C,QAAI,QAAQ,SAAS;AACpB,WAAK,MAAM,QAAQ,KAAK;AAGzB,QAAI,QAAQ,WAAW,MACvB;AACC,WAAK,QAAA,EAAU,MAAM,WAAW;AAChC,WAAK,KAAK,QAAA,CAAS,EAAE,GAAG,SAAS,CAAC,MAClC;AACC,YAAI,aAAa,IAAI,iBAAA;AACrB,mBAAW,SAAS;AACpB,mBAAW,QAAQ,KAAK,MAAA;AACxB,gBAAS,QAAS,UAAU;AAAA,MAC7B,CAAC;AAAA,IACF;AAAA,EAED;AAAA;AAAA,EAGA,MAAM,OACN;AACC,QAAI,SAAS,MACb;AACC,UAAI,UAAU,IACd;AACC,aAAK,MAAA;AACL,eAAO;AAAA,MACR;AAEA,UAAI,UAAU,KAAK,WAAA;AACnB,WAAK,KAAK,QAAA,CAAS,EAAE,MAAA;AAErB,UAAI,MAAqB,cAAc,WAAW,OAAO,KAAK,GAAG,IAAI,MAAM;AAC3E,UAAI,MAAM,IAAI,YAAY,GAAG,QAAQ,KAAM;AAC3C,WAAK,KAAK,QAAA,CAAS,EAAE,aAAa,GAAG;AAErC,WAAK,OAAO,KAAK,KAAK,QAAA,CAAS,EAAE,KAAK,KAAK,EAAE,CAAC;AAE9C,UAAI,CAAC,QAAQ;AACZ,aAAK,KAAK,IAAI,EAAE,KAAK,MAAM,EAAE,CAAC,EAAE,MAAM,WAAW;AAElD,UAAI,QAAQ,WAAW,OACvB;AACC,YAAI,SAAS,QAAQ;AACrB,aAAK,KAAK,MAAM,WAAW,mBAAmB,OAAO,QAAQ,qBAAqB,OAAO,OAAO,uBAAuB,OAAO,QAAQ;AAAA,MACvI;AAEA,WAAK,SAAS;AACd,WAAK,QAAQ,OAAO,KAAK,CAAC;AAAA,IAC3B;AACA,WAAO,OAAO,KAAK,MAAM;AAAA,EAC1B;AAAA,EAEA,MACA;AACC,WAAO,KAAK;AAAA,EACb;AAAA,EAEA,QACA;AACC,SAAK,KAAK,QAAA,CAAS,EAAE,MAAA;AACrB,SAAK,SAAS;AACd,SAAK,QAAQ,EAAE;AAAA,EAChB;AAAA,EAEA,aACA;AACC,WAAO,KAAK,QAAA;AAAA,EACb;AAAA;AAED;AAIA,MAAM,qBACN;AAAA,EACC;AAAA,EACA;AAAA,EACA;AACD;AAEA,MAAM,yBAAyB,gBAC/B;AAAA,EACC;AAAA,EACA;AACD;"}
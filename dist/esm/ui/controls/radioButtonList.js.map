{"version":3,"file":"radioButtonList.js","sources":["../../../../src/ui/controls/radioButtonList.ts"],"sourcesContent":["import { UtilityManager } from \"../../../src/managers/utilityManager\";\nimport { VrControlOptions, VrControl, VrControlsEvent } from \"../common\";\nimport { ControlTypeEnum, OrientationEnum, createRadioButton, puma } from \"../vr\";\nimport { RadioButtonCheckEvent, RadioButton } from \"./radioButton\";\n\n//#region Options\nexport class RadioButtonListOptions extends VrControlOptions\n{\n    items?: RadioButtonItem[];\n    orientation?: OrientationEnum;\n    listName?: string;\n    // Gestione validation\n\n    onBeforeSelect?(e: RadioButtonListSelectEvent): void;\n    onSelect?(e: RadioButtonListSelectEvent): void;\n}\n//#endregion\n\n//#region Control\nexport class RadioButtonList extends VrControl\n{\n    private _radioControls: RadioButton[];\n    private _items: RadioButtonItem[];\n\n    constructor(element: HTMLElement, options?: RadioButtonListOptions | null)\n    {\n        //#region Options\n        if (options == null)\n            options = new RadioButtonListOptions();\n\n        if (options.orientation == null) options.orientation = OrientationEnum.Horizontal;\n        if (options.items == null) options.items = [];\n        if (options.listName == null) options.listName = element.id + \"_RadioButtonListName\";\n        //#endregion\n\n        super(element, options, ControlTypeEnum.RadioButtonList);\n        this._radioControls = [];\n\n        this.items(options.items);\n        if (this.value() == \"\")\n            this.clear();\n    }\n\n    //#region Methods\n    items(items?: RadioButtonItem[]): RadioButtonItem[]\n    {\n        let options = this.getOptions();\n        if (items != null)\n        {\n            this._items = items;\n            let i = 0;\n            for (let item of items)\n            {\n                let radioButton = createRadioButton(\n                    {\n                        text: item.text,\n                        value: (item.value == null) ? item.text : String(item.value),\n                        name: options.listName,\n                        checked: item.checked,\n                        tag: item.tag,\n                        cssContainer: (options.orientation == OrientationEnum.Horizontal && i > 0) ? \"margin-left: 10px;\" : ((options.orientation == OrientationEnum.Vertical) ? \"width: 100%\" : \"\"),\n                        onCheck: (e) => \n                        {\n                            if (options!.onBeforeSelect != null)\n                            {\n                                let selectEvent = new RadioButtonListSelectEvent();\n                                selectEvent.sender = this;\n                                selectEvent.value = String(item.value);\n                                options!.onBeforeSelect(selectEvent);\n\n                                if (selectEvent.isDefaultPrevented())\n                                    return;\n                            }\n\n                            if (item.onCheck != null)\n                                item.onCheck(e);\n\n                            if (options!.onSelect != null)\n                            {\n                                let selectEvent = new RadioButtonListSelectEvent();\n                                selectEvent.sender = this;\n                                selectEvent.value = String(item.value);\n                                options!.onSelect(selectEvent);\n                            }\n                        }\n                    }, this.element());\n\n                this._radioControls.push(radioButton);\n                i++;\n            }\n        }\n        return this._items;\n    }\n\n    value(value?: string | number, triggerChange = true): string\n    {\n        if (value != null)\n        {\n            let radioButton = this._radioControls.filter(k => puma(k.element()).attr(\"value\") == String(value))[0];\n            if (radioButton != null)\n                radioButton.checked(true, triggerChange);\n        }\n\n        let checkedRadio = this._radioControls.filter(k => k.checked())[0];\n        if (checkedRadio != null)\n            return puma(checkedRadio.element()).attr(\"value\");\n        else\n            return \"\";\n    }\n\n    valueTag(tag?: any, triggerChange = true)\n    {\n        if (tag != null)\n        {\n            let radioButton = this._radioControls.filter(k => UtilityManager.equals(k.tag(), tag))[0];\n            if (radioButton != null)\n                radioButton.checked(true, triggerChange);\n        }\n\n        let checkedRadio = this._radioControls.filter(k => k.checked())[0];\n        if (checkedRadio != null)\n            return checkedRadio.tag();\n        else\n            return \"\";\n    }\n\n    text(value: string, text?: string): string\n    {\n        let radioButton = this._radioControls.filter(k => puma(k.element()).attr(\"value\") == value)[0];\n        if (radioButton != null)\n            return radioButton.text(text);\n\n        return \"\";\n    }\n\n    clear(triggerChange = false): void\n    {\n        for (let radioButton of this._radioControls)\n            radioButton.checked(false, triggerChange);\n    }\n\n    clearItems()\n    {\n        this._radioControls = [];\n        puma(this.element()).empty();\n    }\n\n    getOptions(): RadioButtonListOptions\n    {\n        return this.options<RadioButtonListOptions>();\n    }\n\n    enable(): void\n    {\n        super.enable();\n        for (let radio of this._radioControls)\n            radio.enable();\n    }\n\n    disable(): void\n    {\n        super.disable();\n        for (let radio of this._radioControls)\n            radio.disable();\n    }\n    //#endregion\n}\n//#endregion\n\n//#region Classes\nclass RadioButtonItem\n{\n    text?: string;\n    value?: string | number;\n    checked?: boolean;\n    tag?: any;\n\n    onCheck?: (e: RadioButtonCheckEvent) => void;\n}\n\nclass RadioButtonListSelectEvent extends VrControlsEvent\n{\n    sender: RadioButtonList;\n    value?: string;\n}\n//#endregion"],"names":[],"mappings":"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"}
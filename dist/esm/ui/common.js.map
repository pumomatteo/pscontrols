{"version":3,"file":"common.js","sources":["../../../src/ui/common.ts"],"sourcesContent":["import { ControlTypeEnum, LabelModeEnum, PositionEnum, createLabel, ControlPositionEnum, TextAlignEnum, PopupSettings, ColorSettings, puma, shadowRoot, PopupDirectionEnum, VrMarginSettings, LabelUnderlineMode } from \"./vr\";\nimport { Label, LabelClickEvent } from \"./controls/label\";\nimport { UtilityManager } from \"../../src/managers/utilityManager\";\n\nexport class VrControl\n{\n    private _element: HTMLElement | HTMLInputElement;\n    _options: VrControlOptions;\n    private _labelOutside: Label;\n    private _typeEnum: ControlTypeEnum;\n    private _tag: any;\n\n    constructor(element?: HTMLElement | HTMLInputElement, options?: VrControlOptions, typeEnum?: ControlTypeEnum)\n    {\n        this._element = element!;\n        this._options = options!;\n        this._typeEnum = typeEnum!;\n\n        //#region MainClass/Container\n        puma(element).wrap(\"<div class='vrControlsContainer'></div>\");\n        puma(element).addClass(\"vr\" + typeEnum);\n        puma(element).addClass(\"vrControls\");\n        puma(this.container()).addClass(\"vr\" + typeEnum + \"Container\");\n        puma(this.container()).attr(\"id\", element!.id + \"Container\");\n        //#endregion\n\n        //#region Label\n        if (options!.label != null)\n        {\n            if (options!.labelSettings == null)\n                options!.labelSettings = new LabelControlsSettings();\n\n            if (options!.labelSettings.mode == null) options!.labelSettings.mode = LabelModeEnum.Primary;\n            if (options!.labelSettings.position == null) options!.labelSettings.position = PositionEnum.Top;\n\n            let labelPosition = options!.labelSettings.position;\n            let controlPositionEnum = (labelPosition == PositionEnum.Top || labelPosition == PositionEnum.Left) ? ControlPositionEnum.Before : ControlPositionEnum.After;\n            let margin = \"\";\n            let top = \"\";\n            if (labelPosition == PositionEnum.Left)\n            {\n                margin = \"margin-right: 5px;\";\n                top = \"top: -1px;\";\n            }\n            else if (labelPosition == PositionEnum.Right)\n            {\n                margin = \"margin-left: 5px;\";\n                top = \"top: -1px;\";\n            }\n            else\n                this.container().style.cssText += \"display: inline-flex; flex-direction: column;\";\n\n            this._labelOutside = createLabel(\n                {\n                    id: options!.labelSettings!.id,\n                    text: options!.label,\n                    mode: options!.labelSettings.mode,\n                    align: options!.labelSettings.textAlign,\n                    width: (labelPosition == PositionEnum.Top || labelPosition == PositionEnum.Bottom) ? \"100%\" : options!.labelSettings.width,\n                    class: options!.labelSettings.class,\n                    fontSize: options!.labelSettings.fontSize,\n                    cssContainer: margin + top + options!.labelSettings.cssContainer,\n                    css: \"white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\" + options!.labelSettings.css,\n                    bold: options!.labelSettings.bold,\n                    tooltip: options!.labelSettings.tooltip,\n                    colorSettings: options!.labelSettings.colorSettings,\n                    tabIndex: -1,\n                    underlineMode: options!.labelSettings.underlineMode,\n                    onClick: options!.labelSettings.onClick\n                }, this.container(), controlPositionEnum);\n        }\n        //#endregion\n\n        //#region Width and Height\n        if (options!.width != null)\n            this.width(options!.width);\n        if (options!.height != null)\n            this.height(options!.height);\n        //#endregion\n\n        //#region Visible/Enable\n        if (options!.visible === false)\n            this.hide();\n        if (options!.enable === false)\n            this.disable();\n        //#endregion\n\n        //#region Id/CSS/Class\n        if (options!.id != null)\n            this.id(options!.id);\n\n        if (options!.css != null)\n            this.css(options!.css);\n        if (options!.cssContainer != null)\n            this.cssContainer(options!.cssContainer);\n        if (options!.class != null)\n            this.class(options!.class);\n        if (options!.classContainer != null)\n            this.classContainer(options!.classContainer);\n        //#endregion\n\n        //#region Other\n        if (options!.margin != null)\n        {\n            if (typeof (options!.margin) == \"number\")\n                this.container().style.cssText += \"margin: \" + options!.margin + \"px;\";\n            else\n            {\n                if (options!.margin.top != null) this.container().style.cssText += \"margin-top: \" + options!.margin.top + \"px;\";\n                if (options!.margin.right != null) this.container().style.cssText += \"margin-right: \" + options!.margin.right + \"px;\";\n                if (options!.margin.bottom != null) this.container().style.cssText += \"margin-bottom: \" + options!.margin.bottom + \"px;\";\n                if (options!.margin.left != null) this.container().style.cssText += \"margin-left: \" + options!.margin.left + \"px;\";\n            }\n        }\n\n        if (options!.addToControlList == null)\n            options!.addToControlList = true;\n        //#endregion\n\n        //#region Tag/Attributes/TabIndex\n        this._tag = options!.tag;\n\n        if (options!.attributes == null) options!.attributes = [];\n        if (options!.uniqueName != null)\n            options!.attributes!.push({ name: \"uniqueName\", value: options!.uniqueName });\n\n        for (let attribute of options!.attributes)\n            this.attribute(attribute.name, attribute.value, attribute.container);\n\n        if (options!.tabIndex == null) options!.tabIndex = 0;\n        this.attribute(\"tabindex\", options!.tabIndex);\n\n        if (options!.shadowRoot !== false)\n        {\n            if (shadowRoot() != null)\n                puma(this.container()).addClass(\"shadowRoot\");\n        }\n        //#endregion\n    }\n\n    controlType(): ControlTypeEnum\n    {\n        return this._typeEnum;\n    }\n\n    id(id?: string)\n    {\n        if (id != null)\n        {\n            this.element().id = id;\n            this.container().id = id + \"Container\";\n        }\n        return this.element().id;\n    }\n\n    tag(tag?: any)\n    {\n        if (tag != null)\n            this._tag = tag;\n\n        if (tag === null)\n            this._tag = null;\n\n        return this._tag;\n    }\n\n    uniqueName(uniqueName?: string)\n    {\n        if (uniqueName != null)\n            this.attribute(\"uniqueName\", uniqueName);\n\n        return puma(this.element()).attr(\"uniqueName\");\n    }\n\n    attribute(name: string, value: any, toContainer = false)\n    {\n        if (!toContainer)\n            puma(this.element()).attr(name, value);\n        else\n            puma(this.container()).attr(name, value);\n    }\n\n    tooltip(tooltip?: string, container = false)\n    {\n        if (tooltip != null)\n        {\n            if (container) puma(this.container()).attr(\"title\", tooltip);\n            else puma(this.element()).attr(\"title\", tooltip);\n        }\n        return (container) ? puma(this.container()).attr(\"title\") : puma(this.element()).attr(\"title\");\n    }\n\n    //#region Element/Container/Options\n    element<T extends HTMLElement>()\n    {\n        return this._element as T;\n    }\n\n    container(): HTMLElement\n    {\n        return puma(this.element()).closest(\".vrControlsContainer\")[0];\n    }\n\n    label(): Label | null\n    {\n        return this._labelOutside;\n    }\n\n    options<T extends VrControlOptions>()\n    {\n        return <T>this._options;\n    }\n    //#endregion\n\n    //#region Popup\n    settingPopup(popup: HTMLElement, popupSettings?: PopupSettings)\n    {\n        //#region Settings\n        if (popupSettings != null)\n        {\n            // Width\n            if (popupSettings.width != null) popup.style.cssText += \"width: \" + this.fixWidthHeightValue(popupSettings.width) + \";\";\n            if (popupSettings.minWidth != null) popup.style.cssText += \"min-width: \" + this.fixWidthHeightValue(popupSettings.minWidth) + \";\";\n            if (popupSettings.maxWidth != null) popup.style.cssText += \"max-width: \" + this.fixWidthHeightValue(popupSettings.maxWidth) + \";\";\n\n            // Height\n            if (popupSettings.height != null) popup.style.cssText += \"height: \" + this.fixWidthHeightValue(popupSettings.height) + \";\";\n            if (popupSettings.minHeight != null) popup.style.cssText += \"min-height: \" + this.fixWidthHeightValue(popupSettings.minHeight) + \";\";\n            if (popupSettings.maxHeight != null) popup.style.cssText += \"max-height: \" + this.fixWidthHeightValue(popupSettings.maxHeight) + \";\";\n\n            // Direction\n            if (popupSettings.direction == null) popupSettings.direction = PopupDirectionEnum.Auto;\n        }\n        //#endregion\n\n        //#region Values\n        let elementTop = this.element().getBoundingClientRect().top;\n        let elementLeft = this.element().getBoundingClientRect().left;\n        let elementWidth = puma(this.element()).outerWidth();\n        let elementHeight = puma(this.element()).outerHeight();\n\n        let popupWidth = puma(popup).outerWidth();\n        let popupHeight = puma(popup).outerHeight();\n        //#endregion\n\n        //#region Right/Left management\n        let positionLeft = 0;\n        if (popupSettings != null && popupSettings.right === true)\n            positionLeft = elementLeft + elementWidth - popupWidth;\n        else\n        {\n            let documentBodyLeft = puma(document.body).offset().left;\n            let documentBodyWidth = puma(document.body).width();\n\n            if ((documentBodyLeft + documentBodyWidth) <= (elementLeft + popupWidth + elementWidth)) // To right\n                positionLeft = elementLeft + elementWidth - popupWidth;\n            else // To left\n                positionLeft = elementLeft;\n        }\n        //#endregion\n\n        //#region Up/Down management\n        if (popupSettings != null && popupSettings.direction != PopupDirectionEnum.Auto)\n        {\n            if (popupSettings.direction == PopupDirectionEnum.Up)\n            {\n                let bottomPosition = window.innerHeight - elementTop;\n                let minBottomPosition = popupHeight;\n                if (bottomPosition < minBottomPosition)\n                {\n                    // Popup too tall for upward positioning, force downward with max-height\n                    let maxHeight = window.innerHeight - elementTop - elementHeight - 10; // 10px margin\n                    popup.style.cssText += \"left: \" + positionLeft + \"px; top: \" + (elementTop + elementHeight) + \"px; max-height: \" + maxHeight + \"px; overflow-y: auto;\";\n                }\n                else\n                    popup.style.cssText += \"left: \" + positionLeft + \"px; bottom: \" + bottomPosition + \"px;\";\n            }\n            else if (popupSettings.direction == PopupDirectionEnum.Down)\n            {\n                let availableHeight = window.innerHeight - elementTop - elementHeight - 10; // 10px margin\n                if (popupHeight > availableHeight)\n                    popup.style.cssText += \"left: \" + positionLeft + \"px; top: \" + (elementTop + elementHeight) + \"px; max-height: \" + availableHeight + \"px; overflow-y: auto;\";\n                else\n                    popup.style.cssText += \"left: \" + positionLeft + \"px; top: \" + (elementTop + elementHeight) + \"px;\";\n            }\n        }\n        else\n        {\n            let documentBodyTop = puma(document.body).offset().top;\n            let documentBodyHeight = puma(document.body).height();\n            if ((documentBodyTop + documentBodyHeight) <= (elementTop + popupHeight + elementHeight)) // To up\n            {\n                let bottomPosition = window.innerHeight - elementTop;\n                let availableHeightUp = elementTop - 10; // Space available above element minus margin\n                \n                if (popupHeight > availableHeightUp)\n                {\n                    // Popup too tall for upward positioning, limit height and add scroll\n                    popup.style.cssText += \"left: \" + positionLeft + \"px; bottom: \" + bottomPosition + \"px; max-height: \" + availableHeightUp + \"px; overflow-y: auto;\";\n                }\n                else\n                    popup.style.cssText += \"left: \" + positionLeft + \"px; bottom: \" + bottomPosition + \"px;\";\n            }\n            else // To down\n            {\n                let availableHeight = window.innerHeight - elementTop - elementHeight - 10; // 10px margin\n                if (popupHeight > availableHeight)\n                    popup.style.cssText += \"left: \" + positionLeft + \"px; top: \" + (elementTop + elementHeight) + \"px; max-height: \" + availableHeight + \"px; overflow-y: auto;\";\n                else\n                    popup.style.cssText += \"left: \" + positionLeft + \"px; top: \" + (elementTop + elementHeight) + \"px;\";\n            }\n        }\n        //#endregion\n\n        if (shadowRoot() != null)\n            popup.style.cssText += \"position: fixed;\";\n    }\n\n    private fixWidthHeightValue(value: string | number)\n    {\n        if (typeof (value) == \"number\")\n            value = value + \"px\";\n        return value;\n    }\n    //#endregion\n\n    //#region Width/Height\n    width(value?: string | number): number\n    {\n        if (value != null)\n        {\n            let options = this.options();\n            let containerJq = puma(this.container());\n            let elementJq = puma(this.element());\n\n            //#region Label width before width assignment\n            let labelWidth = 0;\n            if (options.label != null)\n            {\n                let label = containerJq.find(\".vrLabel\")[0];\n                labelWidth = puma(label).outerWidth(true) + 5; //UtilityManager.textWidth(label.innerHTML);\n            }\n            //#endregion\n\n            containerJq.width(value);\n\n            //#region Width without Label\n            let outer = elementJq.outerWidth(); //UtilityManager.objectWidth(elementJq[0], true);\n            let normal = elementJq.width(); //UtilityManager.objectWidth(elementJq[0]);\n            let diff = outer - normal;\n            if (diff === outer && options.label == null)\n                diff = 0;\n\n            elementJq.width(\"Calc(100% - \" + diff + \"px)\");\n            if (elementJq.hasClass(\"vrEditor\"))\n                elementJq.width(\"100%\");\n            //#endregion\n\n            if (options.label != null)\n            {\n                //#region Width with Label\n                let labelPosition = options.labelSettings!.position;\n                if (labelPosition == PositionEnum.Left || labelPosition == PositionEnum.Right)\n                {\n                    if (options.labelSettings!.width != null)\n                        labelWidth = options.labelSettings!.width;\n\n                    if (typeof (value) === \"string\")\n                        elementJq.width(\"Calc(100% - \" + (diff + labelWidth) + \"px)\");\n                    else if (typeof (value) === \"number\")\n                    {\n                        elementJq.width(value - diff);\n                        containerJq.width(value + labelWidth);\n                    }\n                }\n                else if (elementJq.is(\"button\") || elementJq.is(\"textarea\"))\n                    elementJq.width(\"Calc(100% - 0px)\");\n                //#endregion\n            }\n            else if (elementJq.is(\"button\") || elementJq.is(\"textarea\"))\n                elementJq.width(\"100%\");\n        }\n        return puma(this.element()).width();\n    }\n\n    height(value?: string | number): number\n    {\n        if (value != null)\n        {\n            if (typeof (value) == \"string\")\n            {\n                puma(this.container())[0].style.cssText += \"height: \" + value + \";\";\n                puma(this.element())[0].style.cssText += \"height: \" + value + \";\";\n            }\n            else\n            {\n                puma(this.container()).height(value);\n                puma(this.element()).height(value);\n            }\n        }\n        return puma(this.element()).height();\n    }\n    //#endregion\n\n    //#region Enable/Disable\n    enabled(state?: boolean)\n    {\n        if (state != null)\n        {\n            if (state) this.enable();\n            else this.disable();\n        }\n\n        let disabledAttribute = this.element().getAttribute(\"disabled\");\n        return disabledAttribute == null || disabledAttribute == \"\";\n    }\n\n    enable()\n    {\n        this.element().removeAttribute(\"disabled\");\n    }\n\n    disable()\n    {\n        this.element().setAttribute(\"disabled\", \"disabled\");\n    }\n    //#endregion\n\n    //#region Visible\n    visible(state?: boolean): boolean\n    {\n        if (state != null)\n        {\n            if (state) this.show();\n            else this.hide();\n        }\n        return puma(this.container()).is(\":visible\");\n    }\n\n    show(duration?: number)\n    {\n        puma(this.container()).show(duration);\n        if (puma(this.element()).is(\"button\"))\n            puma(this.element()).css({ \"max-width\": \"100%\" });\n    }\n\n    hide(duration?: number)\n    {\n        puma(this.container()).hide(duration);\n    }\n    //#endregion\n\n    //#region Focus\n    focus()\n    {\n        puma(this.element()).focus();\n    }\n\n    blur()\n    {\n        puma(this.element()).blur();\n    }\n    //#endregion\n\n    //#region Css\n    cssContainer(value: string)\n    {\n        this.container().style.cssText += value;\n    }\n\n    css(value: string)\n    {\n        this.element().style.cssText += value;\n    }\n\n    class(className?: string): string[]\n    {\n        if (className != null)\n            puma(this.element()).addClass(className);\n\n        return this.element().className.split(/\\s+/);\n    }\n\n    classContainer(className?: string): string[]\n    {\n        if (className != null)\n            puma(this.container()).addClass(className);\n\n        return this.container().className.split(/\\s+/);\n    }\n\n    removeClass(className: string)\n    {\n        puma(this.element()).removeClass(className);\n    }\n    //#endregion\n}\n\nexport class VrControlOptions\n{\n    width?: string | number;\n    height?: string | number;\n\n    id?: string;\n    css?: string;\n    cssContainer?: string;\n    class?: string;\n    classContainer?: string;\n\n    margin?: number | VrMarginSettings;\n\n    enable?: boolean;\n    visible?: boolean;\n\n    label?: string;\n    labelSettings?: LabelControlsSettings;\n\n    tag?: any;\n    uniqueName?: string;\n    attributes?: AttributeSettings[];\n    tabIndex?: number;\n    shadowRoot?: boolean;\n    addToControlList?: boolean;\n}\n\nexport class LabelControlsSettings\n{\n    id?: string;\n    mode?: LabelModeEnum;\n    width?: number;\n    class?: string;\n    position?: PositionEnum;\n    fontSize?: number | string;\n    textAlign?: TextAlignEnum;\n    tooltip?: boolean | string;\n    bold?: boolean;\n    css?: string;\n    cssContainer?: string;\n    colorSettings?: ColorSettings;\n    underlineMode?: LabelUnderlineMode | undefined;\n\n    onClick?: (e: LabelClickEvent) => void;\n}\n\nexport class AttributeSettings\n{\n    name: string;\n    value: any;\n    container?: boolean;\n}\n\nexport class VrControlsEvent\n{\n    private _defaultPrevented: boolean = false;\n\n    preventDefault()\n    {\n        this._defaultPrevented = true;\n    }\n\n    isDefaultPrevented()\n    {\n        return this._defaultPrevented;\n    }\n}"],"names":[],"mappings":"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"}
{"version":3,"sources":["webpack://vr/webpack/universalModuleDefinition","webpack://vr/webpack/bootstrap","webpack://vr/./src/ui/vr.ts","webpack://vr/./src/ui/common.ts","webpack://vr/./src/managers/utilityManager.ts","webpack://vr/./src/managers/deviceManager.ts","webpack://vr/./src/managers/controlManager.ts","webpack://vr/./src/ui/controls/datePicker.ts","webpack://vr/./src/ui/controls/textbox.ts","webpack://vr/./src/ui/controls/comboBox.ts","webpack://vr/./src/ui/controls/button.ts","webpack://vr/./src/managers/loaderManager.ts","webpack://vr/./src/ui/controls/buttonGroup.ts","webpack://vr/./src/ui/controls/splitButton.ts","webpack://vr/./src/managers/dictionary.ts","webpack://vr/./src/ui/controls/grid.ts","webpack://vr/./src/managers/printManager.ts","webpack://vr/./src/ui/controls/notifier.ts","webpack://vr/./src/ui/controls/label.ts","webpack://vr/./src/ui/controls/checkbox.ts","webpack://vr/./src/ui/controls/separator.ts","webpack://vr/./src/ui/controls/image.ts","webpack://vr/./src/ui/controls/editor.ts","webpack://vr/./src/ui/controls/window.ts","webpack://vr/./src/ui/controls/confirm.ts","webpack://vr/./src/ui/controls/alert.ts","webpack://vr/./src/ui/controls/dialog.ts","webpack://vr/./src/ui/controls/prompt.ts","webpack://vr/./src/ui/controls/switch.ts","webpack://vr/./src/ui/controls/checkboxList.ts","webpack://vr/./src/ui/controls/radioButton.ts","webpack://vr/./src/ui/controls/radioButtonList.ts","webpack://vr/./src/ui/controls/repeater.ts","webpack://vr/./src/ui/controls/maps.ts","webpack://vr/./src/ui/controls/painter.ts","webpack://vr/./src/ui/controls/calendar.ts","webpack://vr/./src/ui/controls/rating.ts","webpack://vr/./src/ui/controls/groupBox.ts","webpack://vr/./src/ui/controls/pdfViewer.ts","webpack://vr/./src/ui/controls/upload.ts","webpack://vr/./src/ui/controls/paypalButton.ts","webpack://vr/./src/ui/controls/treeView.ts","webpack://vr/./src/ui/controls/scheduler.ts","webpack://vr/./src/ui/controls/qrCode.ts","webpack://vr/./src/managers/qrCodeManager.ts","webpack://vr/./src/ui/controls/multiScheduler.ts","webpack://vr/./src/ui/controls/icon.ts","webpack://vr/./src/ui/controls/colorPicker.ts","webpack://vr/./src/managers/colorPickerManager.ts","webpack://vr/./src/ui/controls/searchBar.ts","webpack://vr/./src/ui/controls/splitter.ts","webpack://vr/./src/ui/controls/autoCompleteBox.ts","webpack://vr/./src/ui/controls/chart.ts","webpack://vr/./src/ui/controls/tabStrip.ts","webpack://vr/./src/ui/controls/tooltip.ts","webpack://vr/./src/ui/controls/speechRecognizer.ts","webpack://vr/./src/ui/controls/div.ts","webpack://vr/./src/ui/controls/legend.ts"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","createLabel","options","container","position","elementId","createControls","ControlTypeEnum","Label","createButton","Button","createButtonGroup","ButtonGroup","createTextBox","TextBox","createNumericTextBox","TextBoxOptions","TextModeEnum","Numeric","createPercentageTextBox","Percentage","createCurrencyTextBox","Currency","createPasswordTextBox","Password","createMultilineTextBox","MultiLine","createCheckBox","CheckBox","createSeparator","Separator","createImage","Image","createDatePicker","DatePicker","createTimePicker","DatePickerOptions","DateModeEnum","Time","createDateTimePicker","DateTime","createMonthPicker","depth","DateDepthEnum","Month","createYearPicker","Year","createComboBox","ComboBox","createDropDown","ComboBoxOptions","ComboBoxTypeEnum","DropDown","createSplitButton","SplitButton","createEditor","Editor","createWindow","Window","createGrid","Grid","createSwitch","Switch","createCheckBoxList","CheckBoxList","createRadioButton","RadioButton","createRadioButtonList","RadioButtonList","createRepeater","Repeater","createMap","Map","createPainter","Painter","createCalendar","Calendar","createRating","Rating","createGroupBox","GroupBox","createPdfViewer","PdfViewer","createPaypalButton","PaypalButton","createUpload","Upload","createTreeView","TreeView","createScheduler","Scheduler","createMultiScheduler","MultiScheduler","createQrCode","QrCode","createIcon","Icon","createColorPicker","ColorPicker","createSearchBar","SearchBar","createSplitter","Splitter","createAutoCompleteBox","AutoCompleteBox","createChart","Chart","createBarChart","ChartOptions","type","ChartTypeEnum","Bar","createHorizontalBarChart","HorizontalBar","createLineChart","Line","createDonutChart","Donut","createPieChart","Pie","createAreaChart","Area","createStackedBarChart","StackedBar","createTabStrip","TabStrip","createTooltip","Tooltip","createSpeechRecognizer","SpeechRecognizer","createLegend","Legend","getControl","controlId","ControlManager","addControl","control","add","controlTypeEnum","definedElementId","VrControlOptions","UtilityManager","createGuid","startsWith","puma","length","element","elementTag","Div","showInput","checkboxes","webService","Combo","Error","is","attr","shadowRoot","document","body","ControlPositionEnum","After","vrAppendPuma","prepend","BrowserTypeEnum","CreatorEnum","IconClassBrands","IconClassSolid","IconClassLight","IconClassRegular","IconClassDuotone","IconClassThin","PositionEnum","OrientationEnum","PopupDirectionEnum","BorderStyleEnum","ButtonModeEnum","SelectionModeEnum","RatingPrecisionEnum","LabelModeEnum","LabelUnderlineMode","TextAlignEnum","TextTransformModeEnum","TextBoxValidationErrorEnum","ErrorModeEnum","ErrorPositionEnum","ErrorHideModeEnum","PaypalEnvironmentEnum","PaypalStyleSizeEnum","PaypalStyleColorEnum","PaypalStyleShapeEnum","PaypalStyleLabelEnum","PaypalStyleLayoutEnum","CheckboxStateEnum","ImagePositionTypeEnum","ImageToolbarTypeEnum","DefaultDayEnum","ComboBoxTreeModeEnum","ChartTitleAlignEnum","ChartTitlePositionEnum","ChartDataLabelsAnchorEnum","ChartDataLabelsTextAlignEnum","ChartDataLabelAlignEnum","ChartLegendPositionEnum","ChartLegendAlignEnum","ChartLegendLabelsAlignEnum","ChartTooltipPositionEnum","ChartTooltipAlignEnum","ChartTooltipYAlignEnum","WindowFooterItemTypeEnum","WindowFooterItemAlignEnum","WindowAutoSizeDirectionEnum","vrEditorItemEnum","vrEditorToolbarModeEnum","TinyMceIconEnum","EditorCustomMenuItemType","EditorSpeechRecognizerModeEnum","EditorSpeechRecognizerPositionEnum","GridCheckboxModeEnum","GridSortDirectionEnum","SortDirectionEnum","GridHeightModeEnum","GridModeEnum","GridAggregateMode","GridAlignEnum","GridColumnTypeEnum","GridLabelUnderlineMode","GridToolbarItemType","GridDateFilterTypeEnum","GridNumberFilterTypeEnum","PdfViewerToolbarAreaEnum","SplitterDirectionEnum","SplitterCollapseDirectionEnum","DayOfWeekEnum","SchedulerViewEnum","SchedulerNavigateActionEnum","NotifierTypeEnum","NotifierPositionEnum","AnimationShowEnum","AnimationHideEnum","TooltipShowOnEnum","TooltipHideOnEnum","TooltipTypeEnum","TooltipPositionEnum","TreeViewToolbarItemType","TreeModeEnum","TreeViewNumericTypeEnum","TreeViewColumnTypeEnum","TreeViewAlignEnum","MapModeEnum","ColorPickerModeEnum","UploadValidationErrorTypeEnum","Color","WebApiModeEnum","DateFormatEnum","KeyEnum","NumberStyleEnum","GroupingModeEnum","RoundingModeEnum","hideNotify","hide","notify","text","Notifier","notifyError","NotifierOptions","notifyWarning","Warning","notifySuccess","Success","notifyInfo","Info","confirm","Confirm","open","alert","Alert","dialog","Dialog","prompt","Prompt","printElement","PrintManager","printHtml","printBytes","base64Bytes","printPdf","path","printImage","isSmartphone","DeviceManager","isTablet","isDesktop","isMobile","isIphoneX","isIphone","browser","isInternetExplorer","isSafari","isChrome","isFirefox","isEdge","isOpera","isVivaldi","isSeamonkey","createDiv","div","settings","classAttribute","idAttribute","css","content","title","class","id","tooltip","vrPrependToPuma","vrAppendToPuma","attributes","attribute","jQuery","fn","extend","vrLabel","vrButton","vrButtonGroup","vrTextBox","vrCheckBox","vrCheckBoxList","vrSeparator","vrImage","vrDatePicker","vrComboBox","vrSplitButton","vrEditor","vrWindow","vrGrid","vrSwitch","vrRadioButton","vrRadioButtonList","vrRepeater","vrMap","Maps","vrPainter","vrCalendar","vrRating","vrGroupBox","vrPdfViewer","vrPaypalButton","vrUpload","vrTreeView","vrScheduler","vrMultiScheduler","vrQrCode","vrIcon","vrColorPicker","vrSearchBar","vrSplitter","vrAutoCompleteBox","vrChart","ChartVr","vrTabStrip","vrTooltip","vrSpeechRecognizer","vrDiv","vrLegend","$","MutationObserver","mutations_list","forEach","mutations","removedNodes","currentValue","currentIndex","listObj","classList","isConnected","removeItems","idElement","replace","remove","e","children","child","observe","subtree","childList","DivSettings","span","SpanSettings","icon","iconClass","fontSize","color","cursor","IconSettings","iframe","VrIframeSettings","width","height","style","cssText","iframeBody","iframeContentDocument","contentDocument","find","includes","loader","LoaderManager","show","on","callback","br","count","hr","guid","hex","Array","keys","map","index","toString","padStart","crypto","getRandomValues","Uint8Array","entries","int","join","VrMarginSettings","showLoader","transparency","tag","undefined","hideLoader","pumo","then","catch","PopupSettings","ColorSettings","DivColorSettings","DivBorderSpecificSettings","DivBorderSettings","ButtonGroupItem","TabStripItem","TextBoxLengthSettings","TextBoxValidationSettings","TextBoxRegexSettings","ComboBoxItem","ComboBoxWebServiceSettings","ComboBoxTemplateEvent","ComboBoxEvent","VrControlsEvent","ComboBoxChangeEvent","ComboBoxChangingEvent","ComboBoxClearEvent","SortByComboSettings","AutoCompleteBoxItem","AutoCompleteBoxItemSettings","AutoCompleteBoxComboSettings","ChartAreaSettings","ChartTitleSettings","ChartFont","ChartDataLabelsSettings","ChartLegendSettings","ChartLegendLabelsSettings","ChartLegendTitleSettings","ChartTooltipSettings","ChartStackedSettings","ChartAspectRatioSettings","ChartLimitSettings","ChartDataSource","ChartParsingSettings","ChartLegendEvent","ChartLegendHoverEvent","ChartLegendLeaveEvent","ChartLegendClickEvent","ChartLabelEvent","ChartLabelHoverEvent","ChartLabelLeaveEvent","ChartLabelClickEvent","ChartAxisFormatterEvent","vrEditorCustomItem","vrEditorCustomMenuItem","vrEditorSpeechRecognizerSettings","vrEditorFontSizeSettings","SpeechRecognizerOptions","GridGroupBySettings","GridSortSettings","GridGroupByItem","GridGroupDisplayValueEvent","GridGroupExpandCollapseEvent","GridGroupEditClickEvent","GridPageSelectedEvent","GridScrollEvent","GridColumn","GridButtonSettings","GridControlsSettings","GridToolbarItem","PdfViewerToolbarSettings","PdfViewerToolbarItem","ToolbarItemOnClickEvent","SplitterCollapsableSettings","SwitchLabelSettings","SwitchLabelSettingsOnClickEvent","SchedulerSaturationInfo","SchedulerSaturationDay","SchedulerSaturationWeek","SchedulerSaturationWeekByResource","SaturationDate","SchedulerSaturationWeekByDate","SaturationResource","SchedulerSaturationFourWeeks","SchedulerResource","SchedulerView","SchedulerSlotElement","SchedulerData","Date","vrDifferenceBetweenDatesInMinutes","start","end","SchedulerAttribute","TreeViewColumn","TreeViewToolbarItem","TreeViewToolbarSwitchSettings","TreeViewToolbarSwitchEvent","TreeViewToolbarClickEvent","isDefaultPrevented","TreeViewItem","TreeViewItemExtraCell","TreeViewContextMenuItem","TreeViewFilterSettings","MapMarker","ColorPickerRgbaValue","pageError","window","onerror","msg","url","lineNo","columnNo","error","event","PageErrorEvent","message","lineNumber","columnNumber","isEquals","item1","item2","equals","isLocalhost","location","hostname","interval","each","timeout","timeoutCallback","addCssStyle","cssRules","addCss","addJsScript","jsRules","addCssFiles","paths","Promise","addJsFiles","openUrl","newTab","openBrowserWindow","size","top","outerHeight","screenY","left","outerWidth","screenX","BrowserWindowSize","BrowserWindowPosition","isValidEmail","email","copyTextToClipboard","navigator","clipboard","writeText","oldSupportCopyTextToClipboard","textAreaTemp","createElement","appendChild","focus","select","execCommand","removeChild","base64ToFile","base64","fileName","base64ToBytes","bytesToBase64","bytes","base64ToBlob","contentType","sliceSize","_shadowRoot2","jqueryVariable","_jqueryVariable","NumberFormatRoundingSettings","NumberFormatSettings","roundingSettings","super","roundingMode","minimumFractionDigits","maximumFractionDigits","dynamicSort","sortOrder","substr","a","b","aProperty","bProperty","toLowerCase","result","dynamicSortMultiple","props","arguments","obj1","obj2","numberOfProperties","internalSortWithoutProperties","array","ascending","sort","diff","tryDate","isNaN","getTime","localeCompare","MIN_VALUE","MAX_VALUE","vrFixDateString","dateString","dateSplitted","split","vrToNumberArrayList","date","vrEquals","firstDate","secondDate","vrGetFirstDayOfMonthByDate","dateToCheck","getFullYear","getMonth","vrGetLastDayOfMonthByDate","vrGetFirstDayOfWeekByDate","day","getDay","getDate","setDate","secondsDifference","Math","abs","vrIsValidDate","vrGetDaysInMonth","vrToWebApiDateTime","month","year","hours","getHours","minutes","getMinutes","seconds","getSeconds","milliSeconds","getMilliseconds","vrToItalyString","showSeconds","dateOptions","hour12","LongWeekDate","weekday","ShortWeekDate","LongDate","hour","minute","second","LongDateTime","vrFormatString","language","Intl","DateTimeFormat","format","vrCapitalize","vrToLongDateString","vrArePeriodsOverlapped","startA","endA","startB","endB","equal","vrAddYears","years","valueOf","setFullYear","vrAddMonths","months","february","februaryDays","newMonth","setMonth","vrAddDays","days","vrAddHours","setTime","vrAddMinutes","vrAddSeconds","vrIsLessThan","checkTime","setHours","vrIsGreaterThan","vrIsEqualsTo","vrIsBetween","millisecondsFirstDate","millisecondsSecondDate","millisecondsDateToCheck","vrDifferenceBetweenDatesInDays","first","vrConvertDateFromClient","dateFromClient","UTC","vrConvertDateFromServer","dateFromServer","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","Number","vrToNumberString","formatSettings","Default","vrFormatNumber","vrToCurrencyString","vrToPercentageString","currency","useGrouping","Auto","HalfAwayFromZero","None","NumberFormat","vrRound","decimals","pow","round","String","charAt","toUpperCase","slice","vrCamelCase","exceptFirst","words","word","stringToReturn","vrKebabCase","match","x","vrSnakeCase","vrSwapCase","swapped","push","vrTitleCase","txt","vrTrunc","useWordBoundary","subString","lastIndexOf","vrGetNumericPart","number","vrToBoolean","vrIsNotNullOrEmpty","vrIsNullOrEmpty","vrRemoveHtml","vrFirst","isArray","vrLast","vrToStringArrayList","vrToCommaSeparatedList","item","substring","vrPushRange","arrayToAdd","vrDelete","indexOf","splice","vrDeleteItem","k","vrDeleteAllBy","callbackfn","itemToDeleteList","filter","itemToDelete","vrSortBy","properties","apply","vrSortAsc","vrSortDesc","vrAny","some","vrMax","reduce","oa","u","max","vrMin","min","vrSum","ty","sum","eval","vrAvg","vrDistinct","Set","vrDistinctBy","arrayResult","arrayMap","has","set","vrGroupBy","groups","val","vrGroupByProperty","array1","array2","array1Length","arr1","concat","arr2","vrDrag","onStart","onEnd","mousedown","emd","startingXPosition","clientX","startingYPosition","clientY","diffX","offset","diffY","mousemove","emm","elementToDrag","onStartEvent","WindowEvent","unbind","preventDefault","mouseup","onEndEvent","vrVisible","state","appendTo","prependTo","toCreate","append","vrPrependPuma","vrBeforePuma","elementJq","before","vrAfterPuma","after","vrInsertBeforePuma","insertBefore","vrInsertAfterPuma","insertAfter","vrHasScrollBar","horizontal","scrollWidth","clientWidth","scrollHeight","clientHeight","typeEnum","_element","_options","_typeEnum","wrap","addClass","label","labelSettings","LabelControlsSettings","Primary","Top","labelPosition","controlPositionEnum","Left","Before","margin","Right","_labelOutside","align","textAlign","Bottom","cssContainer","bold","colorSettings","tabIndex","onClick","visible","enable","disable","classContainer","right","bottom","addToControlList","_tag","uniqueName","toContainer","closest","popup","popupSettings","fixWidthHeightValue","minWidth","maxWidth","minHeight","maxHeight","direction","elementTop","getBoundingClientRect","elementLeft","elementWidth","elementHeight","popupWidth","popupHeight","positionLeft","Up","innerHeight","Down","documentBodyTop","documentBodyHeight","containerJq","labelWidth","hasClass","disabledAttribute","getAttribute","removeAttribute","setAttribute","blur","className","removeClass","_defaultPrevented","setInterval","setTimeout","clearInterval","JSON","parse","stringify","monthName","MonthEnum","January","February","March","April","May","June","July","August","September","October","November","December","callBack","errorCallback","data","request","authKey","formDataMultipart","file","FormData","ajax","async","Async","beforeSend","xhr","setRequestHeader","headerParameters","getOwnPropertyNames","param","method","processData","success","response","Sync","DOMParser","parseFromString","documentElement","textContent","spanTemp","innerHTML","offsetWidth","originalHtmlText","html","htmlCalculated","endsWith","arraybuffer","base64ToArrayBuffer","blob","Blob","URL","createObjectURL","href","download","click","binary_string","atob","len","charCodeAt","buffer","aTag","target","test","pathList","head","getElementsByTagName","rel","when","getScript","promise","done","base64abc","missingOctets","j","getBase64Code","subarray","charCode","base64codes","code","fetch","res","arrayBuffer","buf","File","byteCharacters","byteArrays","byteNumbers","byteArray","doc","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","dragEvent","VrDragSupportEvent","sensibility","VrDragSupportTypeEnum","Both","currentTarget","targetStartingXPosition","targetStartingYPosition","leftMoved","rightMoved","upMoved","downMoved","moved","actualXPosition","actualYPosition","xDiff","yDiff","leftPosition","topPosition","Horizontal","Vertical","dragging","dragEveryEvent","VrDragEveryEvent","dragLeft","dragRight","dragUp","dragDown","dragged","screenResolution","ScreenResolution","screen","devicePixelRatio","getScreenResolution","userAgentData","mobile","userAgent","Firefox","Edge","InternetExplorer","Opera","Vivaldi","Chrome","Safari","Seamonkey","keyword","search","documentMode","agentHas","ApplePaySetupFeature","safari","chrome","_dictionaryControls","delete","Dictionary","VrControl","defaultDay","First","todayLabel","otherMonthDays","Day","nullable","ShortDate","timeInterval","defaultDateMin","defaultDateMax","_currentCursorPosition","pickerIcon","Clock","divPickerIcon","enabled","close","openPopupDatePicker","divPickerTimeIcon","pickerTimeIcon","openPopupTimePicker","_popup","keyup","formatDateInput","Enter","onEnterKey","onKeyUp","DatePickerKeyUpEvent","sender","shiftKey","altKey","ctrlKey","enterKey","backSpaceKey","Backspace","tabKey","Tab","onBlur","DatePickerBlurEvent","selectionStart","onFocus","DatePickerFocusEvent","keydown","cursorStartPosition","ArrowRight","ArrowLeft","ArrowUp","ArrowDown","updateCursorPosition","onKeyDown","DatePickerKeyDownEvent","addEventListener","contains","_justOpened","getOptions","inputText","formatInputDatePicker","formatInputDateTimePicker","formatInputTimePicker","dateSlotWidth","onAfterChange","actualHours","actualMinutes","dateToSelect","settingPopup","onlyFormat","_value","change","toggleClass","splittedDate","getFinalYear","dateToReturn","formatValue","clear","inputTextArray","monthNumber","getMonthNumberByName","parseInt","originalInput","inputTextNumeric","todayYear","todayMonth","today","yearStringToday","todayYearFull","yearString","finalYear","Last","tempMin","tempMax","differenceBetweenMinMax","time","toTimeString","textHours","textMinutes","selected","createTimeLabel","scrollTo","actualYear","actualMonth","actualDays","timeString","todayYear2digits","yearStringFinal","yearFinalString","createTextRange","range","move","setSelectionRange","triggerChange","changingEvent","DatePickerChangingEvent","onBeforeChange","previousValue","setSeconds","WeekDay","WeekRange","firstDayOfWeek","lastDayOfWeek","FourWeeksRange","changeText","changeCallBack","changeEvent","DatePickerChangeEvent","DatePickerEvent","ActualViewEnum","DatePickerKeyUpPressEvent","Text","inputMode","rows","growWithContent","validation","Flashing","minValue","MIN_SAFE_INTEGER","maxValue","MAX_SAFE_INTEGER","minLength","substituteChar","maxLength","regex","checkOnKeyUp","checkOnValue","checkOnKeyDown","checkOnBlur","onlyNumbers","onlyCharacters","onlyUpperCase","onlyLowerCase","Link","Phone","Search","Mail","PasswordViewable","textArea","_numberValue","viewPassword","_passwordViewableIcon","EyeSlash","_originalHeight","_originalMarginBottom","getNumericPart","placeholder","readOnly","imageUrl","_keyDownCanceled","autoSize","validateRegex","validate","TextBoxKeyUpEvent","isNumericTextBox","validForNumeric","_hideErrorMode","OnAction","hideError","RegExp","flags","enterKeyEvent","TextBoxEnterKeyEvent","TextBoxKeyDownEvent","focusin","OnFocus","TextBoxFocusEvent","realValue","TextBoxBlurEvent","pastedValue","originalEvent","clipboardData","getData","onPaste","TextBoxPasteEvent","_oldValue","numericValue","isNegative","zeros","minLengthSettings","padEnd","maxLengthSettings","Stable","heightContainer","Eye","appendText","caretPosition","selectionEnd","hideMode","errorIcon","TriangleExclamation","spanError","hover","Overlay","Solid","toFixed","onChanged","TextBoxChangeEvent","oldValue","TextBoxEvent","TextBoxKeyUpPressEvent","treeMode","AllExpanded","freeText","clearButton","addButton","textEllipsis","checkAll","showCheckAll","items","searchAfterCharsNumber","onlyIcon","_isDivElement","_checkedValues","_openPopupAfterFocus","CaretDown","classPickerIcon","_divPickerIcon","clearIcon","Xmark","divClearIcon","ButtonOptions","Plus","_btnCombo","Center","iconCombo","_allCheckedOnlyIcon","Check","onKeyDownEvent","ComboBoxKeyDownEvent","onEnterKeyEvent","ComboBoxEnterKeyEvent","limitInputByDataSource","Control","onKeyUpEvent","ComboBoxKeyUpEvent","li","_dictionaryValueLi","next","prev","clearTimeout","filteredItems","_items","doAjaxCall","ComboBoxPasteEvent","_focusWithArrows","blurEvent","ComboBoxBlurEvent","onClose","closeEvent","ComboBoxCloseEvent","beforeValue","_openedValue","afterValue","valueInternal","getRootItems","drawDataSource","zIndex","background","_chkCheckAll","onCheck","checked","unCheckAll","_txtSearchFilter","liValue","getFilteredArrayByInputText","newText","itemsToReturn","values","texts","htmlDecode","parentValue","parentItem","comboItemText","from","trim","CaretRight","searchedText","drawItems","elementToAppend","ul","getOnlyChildrenItems","actualLiList","AllCollapsed","OnlyFirstLevelExpanded","parents","iconClassForDiv","divIcon","ulChildren","siblings","comboItem","checkBox","isChecked","targetItem","childrenItems","getAllChildrenItems","childrenCheckboxes","getChildrenCheckboxElements","prop","childItem","_isChecked","comboItemTexts","liList","otherItem","parentChecked","manageCheckParent","_tempCheckedValue","rowText","template","templateEvent","dataItem","classIfCheckbox","getRootValues","onItemDataBound","ComboBoxItemDataBoundEvent","filteredArray","realItems","duplicate","nullableItem","unshift","_typedTextWebService","onlyChildren","childrenValues","getChildrenValues","reloadCombo","sortBy","Asc","field","addItem","itemOrId","foundedItem","removeItem","parentItems","rootValues","getLeafItems","getLeafValues","getLeafTexts","getDataChildrenItems","dataItems","dataElement","arrayMode","liParent","parentComboItemText","parentCheckbox","childrenCheckboxElements","parent","sibling","getParentItem","tempCheckedElements","parentInputElement","selectedItem","getSelectedItem","fromInternal","_callbackAfterValue","hideClearButton","showClearButton","prevValue","singleValue","singleItem","_tempValueWebService","isParent","previousCheckedValues","getAllChildrenValues","writeTextByValue","manageCallbackAfterValue","selectedItems","selectedValues","selectedItemsDistinctedByValue","every","toWriteElements","spanSelectedValues","textWidth","allSelectedMessage","Undefined","getCheckedValues","input","firstItem","onClear","clearEvent","fromSet","typedTextPropertyName","typedValuePropertyName","itemsPropertyName","parameters","jsonParameters","_lastAjaxCallGuid","finalValue","itemSelected","button","buttonVisible","buttonEnabled","iconSettings","textColor","backgroundColor","border","borderColor","badgeColor","badgeBackgroundColor","badgeText","badgeVisible","badgeSettings","badge","badgeClickEvent","ButtonBadgeClickEvent","leftButton","middleButton","rightButton","_mouseDownEvent","mouseDownClicked","onHover","hoverEvent","ButtonHoverEvent","mouseleave","ButtonBlurEvent","spanText","iconPosition","showBadge","Delete","Excel","iconTooltip","iconClassList","iElementString","imagePosition","vrImageUrl","confirmationMessage","internalClick","rejectedConfirm","clickEvent","ButtonClickEvent","clickCallback","onMiddleClick","onRightClick","onRejectedConfirm","ButtonEvent","loaderElement","opacity","backgroundWidth","backgroundHeight","loaderWidth","loaderHeight","loaderWidthNumber","loaderHeightNumber","loaderXPosition","loaderYPosition","addCssBase","ButtonGroupOptions","selectionMode","Single","_btnScrollBack","CaretLeft","leftPos","scrollLeft","animate","_btnScrollForward","_populating","manageScrolling","spanButton","checkbox","iconOrImage","onIconClick","ButtonGroupIconClickEvent","marginLeft","spanItemText","check","changeItem","changeGlobal","onItemAdded","ButtonGroupItemAddedEvent","onItemRemoved","ButtonGroupItemRemovedEvent","showItem","showItems","hideItem","hideItems","spanItem","getItemByIndex","onSelect","ButtonGroupSelectEvent","getSelectedValues","ButtonGroupClickEvent","getItemByValue","updateTooltip","buttonGroupItemText","removeAttr","enableItem","disableItem","ButtonGroupEvent","SplitButtonOptions","hoverMode","modal","showDefault","separator","_itemButtonList","_btnMain","relatedTarget","defaultItem","SplitButtonItem","drawItem","divSeparatorContainerValue","separatorContainer","orientation","divItemContainerValue","divItemContainer","SplitButtonClickEvent","SplitButtonSelectClickEvent","mainButton","empty","itemButton","findIndex","itemVisible","enableItems","itemEnable","disableItems","SplitButtonMainClickEvent","KeyValuePair","_map","asMap","dict","pair","ret","oldKey","newKey","oldItems","GridOptions","dataSourceFieldId","multilineRows","multilineHeader","rowHeight","columns","hideEditButton","pageSize","filterable","alternateRowColors","hoverRowColor","footer","header","resizable","reorderable","largePageSize","excel","rebind","lockable","MultiCheck","serverBinding","GridServerBindSettings","itemCountPropertyName","totalsPropertyName","excelDownloadUrlPropertyName","layoutSettings","GridLayoutSettings","sortable","sortByField","groupable","groupBy","groupByFields","fields","column","GridFooterSettings","maxVisiblePages","showPagination","showPageSize","showSettings","totalElements","_originalHiddenColumnFields","_originalDataSource","_dictionaryFilterConditions","_pageSizeUnlimited","_elementId","_actualLayout","optionsFields","groupByItem","displayField","hidden","layoutList","layoutJson","GridLayoutStructure","filterConditions","sortingInfo","layoutColumns","layoutColumn","GridLayoutColumn","EditButton","fitSpace","locked","_originalOptionsForLayout","getLayoutListRequest","GetLayoutListRequest","gridName","pageName","doWebApiCallLayout","GridLayoutOperationTypeEnum","Get","tableLayoutList","_customLayouts","layoutToLoad","layoutClass","same","_lastIndexAdded","_dictionaryDataValues","_groupByActualValue","_actualPageSize","_actualPageSelected","_serverBindingPagination","GridServerBindPagination","indexFrom","indexTo","_divHeaderContainer","_divHeaderLocked","_divHeader","_spanFitHeaderSpace","divFilters","_divFiltersLocked","_divFilters","_spanFitFilterSpace","divBodyContainer","_divBodyLocked","_divBody","scroll","_divTotals","scrollTop","onScroll","scrollEvent","divTotals","_divTotalsLocked","_showTotals","aggregate","createTotalsFunction","_spanFitTotalsSpace","_divFooter","pageSizeItems","numberValue","update","spbSettingsControl","Gear","Table","saveLayout","footerItems","Close","layoutName","openWindowLayout","changeLayout","openWindowActions","GridActionEnum","ShowHide","Users","GroupBy","Lock","LockUnlock","FitContent","_elementLocked","editButtonColumnsNumber","indexEditButtonColumn","thereAreLockedColumns","tableWidth","columnsWidthOccupied","fitSpaceColumnsNumber","remainingSpace","fitSpaceColumnPercentage","_fitSpaceColumnPercentage","toolbar","_divToolbar","separatorCount","toolbarItem","addToolbarItem","display","thCheckbox","textHTML","SingleCheck","checkAllRows","unCheckAllRows","th","headerSettings","Duration","_isResizing","_isDragging","Desc","removeSort","td","Custom","Checkbox","Boolean","checkboxJq","removeFilter","filterSettings","GridFilterSettings","checkboxFilterSettings","GridCheckboxFilterSettings","updateFilter","applyFilters","dateFilter","Filter","openWindowFiltering","dateFilterRemove","recalculateHeight","numberFilter","numberFilterRemove","_timeoutFilterText","textToSearch","manageFilterTextByColumn","stringFilterSettings","GridStringFilterSettings","filterWebService","_checkedItemsForFiltering","getCheckedItems","cellSettings","decimalDigits","Sum","Average","exportable","_internalOptions","dataSource","rebindAtStartup","doWebApiCall","GridRequestTypeEnum","Rebind","thHeaderList","_columnOptions","columnPosition","GridColumnPosition","draggableColumns","groupByProperty","recalculateWidth","filterWithWebService","keepInfo","loadingElement","tableSearchingInfoList","dic","tableSearchingInfo","GridSearchingInfo","otherParameters","_tempRebindInfo","TempRebindInfo","checkedValues","page","pageSelected","yPosition","tempLoadingElement","clearSelection","itemIdList","specificItemIdListPropertyName","RebindSpecificRows","GridControlData","off","rowId","controlSettings","columnType","tableClickEvent","GridControlsClickEvent","openAutoWindow","controlList","_cellButtons","_cellIcons","_cellCustoms","_cellLabels","_cellImages","manageDataSourceControls","clearFilters","sortingGroupFields","setDataSource","_dataSource","triggerDataBound","_actualSortingInfo","drawTable","manageControls","selectRows","applySorting","firstIndex","lastIndex","defaultRow","visibleColumns","row","dataItemId","rowAdded","groupByIndex","groupByField","cellValue","trOld","trGroupBy","newTr","trGroupByLocked","trOldLocked","cellText","colspan","groupByDisplayText","displayValue","groupByDisplayValueEvent","groupByCaret","childrenRows","getChildrenGroupRows","allRows","onGroupEditClick","onEditClick","Pencil","checkboxContainer","parentGroupRow","parentElement","childRow","dataItemIdNotSplitted","unselectRow","selectRowInternal","collapse","childrenIcon","indexIcon","iconNormal","iconLocked","onGroupExpandCollapse","onExpandCollapse","expandCollapseEvent","groupByDisplayField","editClickEvent","isNewRow","tr","trLocked","isNewRowLocked","isNewCellCheckbox","tdCheckbox","selectRangeShiftKey","isNewCell","tdLocked","isNewCellLocked","char","GridCellSettings","zeroIfNull","buttonSettings","GridTemplateEvent","customCss","buttonClass","isPrimaryButton","spanIcon","spanImage","disabled","buttonText","customSettings","GridCustomSettings","GridIconSettings","iconCustomClass","imageSettings","GridImageSettings","imageCustomClass","GridLabelSettings","underlineOnFocus","underlineMode","Always","noBr","DropDownList","DropDownTree","DropDownTreeCheckboxes","Circle","rowColorProperty","tooltipEvent","GridTooltipEvent","tdGroupBy","tdGroupByLocked","onSelectRow","selectRowEvent","GridSelectRowEvent","rowElement","onRowDataBound","onRowDataBoundEvent","GridOnRowDataBoundEvent","realDataItem","trGroupByNumber","to","onDataBound","onDataBoundEvent","GridOnDataBoundEvent","_responseForServerBinding","numberOfPages","trunc","spanPagination","Backward","BackwardStep","pageToSelect","startingIndex","endIndex","noMore","last","ForwardStep","Forward","pagesText","totalElementTemplateEvent","GridTotalElementTemplateEvent","totalElementsText","realDataItems","ddlPageSize","createTotals","workerTotalsRequest","WorkerTotalsRequest","isGroup","columnOptions","aggregateMode","countZeroInAverage","_workerTotals","postMessage","onmessage","workerTotalsGroupRequest","groupItems","trGroupByList","level","childrenNumber","clonedTr","clone","workerTotalsGroupItem","WorkerTotalsGroupItem","groupValue","_workerTotalsGroup","adjustTrHeight","_deletedItems","totalsGroup","total","totals","tdList","writeTotals","valueFormatted","hoursString","minutesString","itemOriginalDatasource","originalDataSource","itemOriginalDatasourceIndex","itemDatasource","itemDatasourceIndex","addRow","updateRow","addRows","deleteRows","dataItemIdList","itemId","rowElements","GridRow","cells","toSavePurpose","propertyValue","checkboxList","checkboxCheckedList","checkedItems","checkboxChecked","checkedItem","getDeletedItems","headerCheckbox","groupByRows","groupByRow","onSelectAllRows","selectAllRowsEvent","GridSelectAllRowsEvent","onUnselectAllRows","unselectAllRowsEvent","GridUnselectAllRowsEvent","indexes","selectRowByIndex","filteredDataSourceList","selectRow","rowIndex","trSelectedList","minDifferenceTr","finalRowIndex","trSelected","rowIndexSelected","fromCheckboxInput","fromGroupOrRow","fromMethodCall","checkboxGroupList","checkboxToSelect","checkedCheckboxList","manageGroupCheckParent","fromCheckbox","checkBoxParentGroup","numberOfCheckedChildren","getCheckedChildrenGroupRows","onUnselectRow","unselectRowEvent","GridUnselectRowEvent","updateDataSource","thJq","CaretUp","gridSortModeEnum","internalSortBy","sortingFields","internalSortByField","columnIndex","hideColumn","showColumn","fieldList","showCheckboxColumn","hideCheckboxColumn","lockColumn","columnEditButton","columnToMoveIndex","columnToMove","firstColumnField","lastLockedColumn","lastLockedColumnIndex","unlockColumn","fieldAfterEditButton","removeGroups","sortBySettings","addGroups","allFields","realField","removeAllGroups","divBody","childrenGroupRows","GridChildrenGroupRows","childrenList","childrenRow","childrenLevel","groupRows","checkedChildren","_wndActions","closeable","RotateLeft","wndTableActionsContainer","checkBoxElement","newValue","Ok","gridActionEnum","createWindowActions","groupFieldAddedList","groupFieldRemovedList","columnFieldToShowList","columnFieldToHideList","columnFieldToLockList","columnFieldToUnlockList","editTableActions","showColumns","hideColumns","removeFilters","lockedColumns","lockColumns","unlockColumns","clearWindowActions","divContainer","footerItem","backSpace","customFilterProperties","_wndFiltering","Height","labelOff","labelOn","onChange","divSearchIntervals","divSearchSpecific","center","datePickerDateFilterValueFrom","datePickerDateFilterValueTo","datePickerDateTimeFilterValueFrom","datePickerDateTimeFilterValueTo","numericTextBoxFilterValueTo","divFilterDate","GreaterThan","LessThan","EqualsTo","Between","divFilterNumber","divItems","createWindowFiltering","saveWindowFiltering","clearWindowFiltering","dtpFrom","dtpTo","dtpDateTimeFrom","dtpDateTimeTo","ntbFrom","ntbTo","isSearchIntervals","dateFilterSettings","specificValues","numberFilterSettings","take","switchSearch","filterTypeEnum","dateFrom","dateTo","numberFrom","numberTo","valueTag","GridDateFilterSettings","GridNumberFilterSettings","ddlType","clearItems","filterCondition","onOriginalDataSource","valueFilterSettings","keyField","filterButton","valueTooltip","dateFilteredArray","filterValue","specificValue","tooltipValues","filterDateFrom","filterDateTo","tooltipTypeEnum","headerTable","tableHeight","offsetHeight","thList","divResizable","setResizingEvents","pageX","currentColumn","currentColumnWidth","timeoutRecalculateWidthWhileMoving","padding","padLeft","padRight","borderRight","isColumnLocked","headerColumn","filterColumn","totalColumn","indexColumn","col","colWidth","drag","onDragging","draggingColumnPosition","onDragged","toDragColumnPosition","tdJq","tdJqToDrag","updateColumnOptions","fieldToDrag","columnToDrag","indexToDrag","fromIndex","tempColumn","tttt","that","mouseMoveDrag","DragEveryEvent","mouseUpDrag","calculateTotals","group","getTotals","self","aggregateResult","scriptCalculateTotalsWorker","workerTotalsData","getElementById","Worker","newPageSizeItem","buttonSelected","onPageSelected","fixColGroup","minusWidth","getAllItems","colGroup","afterFilter","FitScreen","diffHeight","containerOffset","containerOffsetTop","trLockedList","trList","heightToSet","requestType","promiseCallback","json","AuthKey","deletedValuesPropertyName","valuePropertyName","getDeletedItemValues","gridServerBindingSettings","VrGridServerBindingSettings","filters","fromMap","excelFileName","serverBindingSettings","Save","_actualEditedItem","itemPropertyName","jsonS","dataType","textStatus","jqXHR","successMessage","successNotificationMessage","rebindAfterSave","rebindGridAfterSave","specificItemIdListRequested","specificItems","itemToRemoveIdList","itemsToAddIdList","specificItem","specificItemId","itemToRemoveId","deleteRow","itemToAddId","callbackBeforeDatasourceChange","newDatasource","downloadUrl","_wndAutoWindow","onDataSourceChanged","exception","Exception","exceptionCode","Code","errorMessage","errorNotificationMessage","ExceptionMessage","exceptionMessage","rebindAfterError","rebindGridAfterError","closeWindowAfterError","errorThrown","responseJSON","Message","responseText","statusText","status","finalMessage","toolbarClickEvent","onBeforeClick","Add","deletedItems","deleteRequest","excelExport","ExcelWithHiddenColumns","exportHiddenColumns","headerRow","GridExcelRow","excelCell","GridExcelCell","contentRows","contentRow","itemValue","GridHeaderAndCellSettings","footerRow","generateExcelRequest","GenerateExcelRequest","jsonString","ErrorMessage","StackTrace","visibleToolbar","toolbarItemValue","FileExcel","Refresh","primary","GridToolbarClickEvent","toolbarCustomLogic","splitButtonOptions","splitButtonItems","itemClass","buttonGroupItems","comboBoxOptions","datePickerOptions","textBoxOptions","switchSettings","GridToolbarSwitchSettings","tableSwitchEvent","GridToolbarSwitchEvent","autoWindowSettings","GridAutoWindowSettings","GridAutoWindowOption","titleNew","titleEdit","saveAutoWindow","createControlsAutoWindow","columnsOrdered","autoWindowId","reverse","ddlNullable","expanded","createAutoWindow","onAutoWindowOpen","autoWindowOpenEvent","AutoWindowOpenEvent","editable","columnValue","defaultValue","textBox","datePicker","dateTimePicker","timePicker","dropDownList","dropDownTree","comboBox","numericTextBox","colorPicker","oldItem","txtPassword","saveRequest","save","actualItem","ignoreFactor","_wndLayout","_grdLayout","loadLayout","loadOriginalLayout","clearLayout","createWindowLayout","layoutOperationType","Load","Clear","saveLayoutRequest","SaveLayoutRequest","topSettingsBtnPosition","layoutPropertyName","clearLayoutRequest","ClearLayoutRequest","loadLayoutRequest","LoadLayoutRequest","tableLayout","oldGroupByList","groupRemoved","removeGroup","dictionaryFilterConditions","jsonColumn","optionsColumn","optionsColumnIndex","thHeader","headerTh","filtersTd","totalsTd","colGroupCol","GridWebApiRequest","GridHeaderSettings","GridRebindRequest","GridExcelRequest","GridToolbarDeleteRequest","WorkerTotalsMessageColumnOptions","WorkerTotalsResult","GenerateExcelResponse","GridSortingInfo","GridSaveRequest","DragSupportEvent","LoadLayoutResponse","ClearLayoutResponse","GridLayout","controlElement","printBytesFileImageOrHtml","PrintTypeEnum","Pdf","PrintJsTypeEnum","Html","PrintHtmlOptions","printThis","pageTitle","removeInlineStyles","printDelay","removeScripts","debug","beforePrint","importCSS","importStyle","afterPrint","pathBytesOrId","documentTitle","toLocaleString","headerTitle","printJsOptions","PrintJsOptions","printable","print","jsonData","headerCss","contentCss","repeatHeaderOnEveryPage","repeatHeaderOnEveryPages","Json","gridHeaderStyle","gridStyle","repeatTableHeader","printJS","appendContent","$el","jquery","appendBody","$body","$element","opt","elementSelector","$originalElements","$content","formValues","eq","printContainer","defaults","strFrameName","domain","iframeSrc","printI","src","$iframe","doctypeString","doctype","win","contentWindow","write","setDocType","baseURL","$doc","contents","$head","$base","base","protocol","host","media","outerHTML","loadCSS","pageHtml","copyTagClasses","canvas","canvasId","addBack","cid","$src","getContext","drawImage","isFunction","el","removeInline","selector","removeInlineSelector","beforePrintHandler","matchMedia","addListener","mql","matches","onbeforeprint","attachOnBeforePrintEvent","beforePrintEvent","frames","queryCommandSupported","TopCenter","RightMiddle","hideSettings","NotifierHideSettings","autoHide","clickToHide","duration","animation","SlideUp","NotifierShowSettings","SlideDown","BottomCenter","isOnTarget","prepareNotification","containerToAdd","getContainerToAdd","_container","_arrow","CircleExclamation","customHtml","NotifierCustomHtmlEvent","borderTopArrow","borderBottomArrow","borderLeftArrow","borderRightArrow","offsetLeft","targetOptions","topElement","rightElement","bottomElement","leftElement","TopRight","TopLeft","diffTop","RightTop","RightBottom","LeftMiddle","LeftTop","LeftBottom","BottomRight","BottomLeft","FadeIn","fadeIn","slideDown","NotifierOnClickEvent","FadeOut","fadeOut","slideUp","TargetOptions","offsetTop","marginTop","marginRight","marginBottom","LabelOptions","font","fontFamily","underlineOnHoverClass","underlineCss","OnHover","LabelHoverEvent","linkCss","phoneNumber","customText","formatLinkLabel","mail","LabelClickEvent","CheckBoxOptions","threeState","userWidth","Checked","Unchecked","CheckBoxCheckEvent","stateEnum","checkedBoolean","checkedState","showIcon","SeparatorOptions","marginSettings","MarginSettings","ImageOptions","Original","overlayDescription","alt","Fill","Fit","Stretch","toolbarItems","Download","downloadButton","ImageToolbarClickEvent","deleteButton","customButton","onLeave","imageClickEvent","ImageClickEvent","pathOrBytes","mimeType","prePath","description","EditorOptions","pasteImages","menu","customMenuItems","baseUrl","toolbarMode","Floating","plugins","browserSpellCheck","pasteAsText","replacePtagWithDiv","speechRecognizer","stopAtClick","MenuItems","Popup","showInfoCommands","defaultSize","formatSizeList","menuBar","edit","view","insert","table","tools","defaultItems","customItemValues","customToolItems","divMenuItemTop","_divMenuItem","menubar","menuItem","addMenuItem","_finalTextSpeeched","_speechRecognizer","_wndCommands","_wndTempMessage","isRecording","openWindowTempMessage","onResult","interimResults","parseInput","_txtTempMessage","finalResults","stop","insertTextAtCursor","tinyMCE","suffix","init","readonly","resize","toolbar_mode","paste_data_images","browser_spellcheck","contextmenu","fontsize_formats","content_style","forced_root_block","paste_as_text","setup","editor","customToolItem","ui","registry","image","onAction","EditorItemClickEvent","EditorOnKeyUpEvent","keyCode","realEvent","nextControlId","nextAll","EditorOnKeyDownEvent","_initialized","iframeElement","onInit","EditorOnInitEvent","_divDragFile","onDragEnter","dragEnterEvent","EditorDragEnterEvent","stopPropagation","onDragOver","dragOverEvent","EditorDragOverEvent","eventName","manageDragLeave","manageDrop","_tinyMceControl","_settings","activeEditor","EditorOnFocusEvent","EditorOnBlurEvent","onCommand","EditorOnCommandEvent","command","onSetContent","EditorSetContentEvent","onBeforeResize","EditorOnResizingEvent","onAfterResize","EditorOnResizedEvent","createWindowTempMessage","openWindowCommands","createWindowCommands","interim","replaceAll","findLower","findUpper","findCapitalize","onDragLeave","dragLeaveEvent","EditorDragLeaveEvent","onDrop","files","dataTransfer","dropEvent","EditorDropEvent","tinyMceControl","initialized","setContent","getContent","innerText","insertContent","getBody","trigger","focusInterval","buttonGroupOptions","switchOptions","buttonOptions","separatorOptions","labelOptions","EditorEvent","EditorDragDropEvent","WindowOptions","hideCloseIcon","draggable","removeOnClose","maximized","_additionalCloseCallbacks","_additionalOpenCallbacks","_additionalContentLoadedCallbacks","WindowTitleSettings","cssHeader","spanWindowTitle","spanCloseIcon","onDragStart","dragStartEvent","WindowDragStartEvent","onDragEnd","dragEndEvent","WindowDragEndEvent","addFooterItem","_iframe","callBackFooterItems","maximize","_callbackFooterItems","closeCallBack","maxZindexWindow","_background","_openCloseCallback","onOpen","openEvent","WindowOpenEvent","openCallback","triggerEvents","onBeforeClose","closeBeforeEvent","WindowBeforeCloseEvent","closeCallback","WindowCloseEvent","closeIcon","newWidth","newHeight","_animateAutosize","onContentLoaded","autoSizeIfRequired","load","innerWidth","rightPosition","bottomPosition","WindowFooterItemClickEvent","splitButton","SplitButtonSwitchSettings","switchControl","SplitButtonSwitchEvent","buttonGroup","combo","textbox","onLoadEvent","WindowContentLoadEvent","contentLoaded","curHeight","autoHeight","ConfirmOptions","textOkButton","textCancelButton","_window","okCallback","cancelCallback","console","log","contentElement","contentLoadedEvent","ContentConfirmLoadedEvent","AlertOptions","ContentAlertLoadedEvent","DialogOptions","totalWidth","noWidthItems","widthItems","footerAvailableWidth","singleItemWidth","ContentDialogLoadedEvent","PromptOptions","contentContainer","_textBox","placeHolder","ContentPromptLoadedEvent","SwitchOptions","labelOffText","labelOnText","colorOff","boldOff","checkedProperty","colorOn","boldOn","removeProp","SwitchChangeEvent","SwitchEvent","CheckBoxListOptions","listName","marginBetween","_checkboxControls","onBeforeSelect","selectEvent","CheckBoxListSelectEvent","tagList","RadioButtonOptions","labelContainer","lblRadioButton","RadioButtonCheckEvent","RadioButtonListOptions","_radioControls","radioButton","RadioButtonListSelectEvent","checkedRadio","radio","RepeaterOptions","emptyMessage","internalHeight","datasource","_grid","RepeaterOnRowDataBoundEvent","cell","rebindSpecificRows","updateRows","selectRowsByIndexes","unselectRows","tableSortModeEnum","addFilter","showToolbar","hideToolbar","showToolbarItem","hideToolbarItem","enableToolbarItem","disableToolbarItem","removeToolbarItem","MapsOptions","zoom","maxZoom","marker","latitude","longitude","Light","credits","_internalMarkerList","L","preferCanvas","setView","tileLayer","attribution","tileSize","zoomOffset","addTo","MapPinClickEvent","defaultMarker","latLng","markers","pin","circleMarker","bindPopup","onPinClick","coordinate","_latlng","lat","lng","point","_point","y","openPopup","MapPinHoverEvent","removeLayer","touchZoom","doubleClickZoom","scrollWheelZoom","boxZoom","keyboard","tap","invalidateSize","MapEvent","PainterOptions","imagePath","canvasHeight","canvasWidth","saveSettings","PainterSaveSettings","legendWidth","legendHeight","_image","_ctx","clearRect","_points","draw","_isMoving","getPoint","onMouseMove","PainterMouseMoveEvent","points","onMouseDown","PainterMouseDownEvent","onMouseUp","PainterMouseUpEvent","_color","_size","_pointTag","strokeStyle","lineCap","lineJoin","lineWidth","beginPath","moveTo","lineTo","stroke","Point","pop","pointsToDelete","singlePoint","pointToDelete","legendItems","dataURL","legendCanvas","context","legendItem","textSize","measureText","realHeight","ceil","fillStyle","fillRect","fillText","toDataURL","PainterEvent","CalendarOptions","selectedColor","_tempNavigationDate","monthString","divHeader","_lblNavigation","_actualView","drawMonths","drawYears","drawDecades","drawDays","Decade","todayDay","todayWeek","divToday","weekDays","trWeekDays","weekDay","firstDayOfTheMonth","lastDayOfTheMonth","actualValueDay","actualValue","actualValueMonth","actualValueYear","prevMonthLastDay","dayCount","reachLimit","createTdDay","onFinishedDraw","CalendarFinishedDrawEvent","checkAvailability","onDisableDate","CalendarDisableDateEvent","onDayDraw","CalendarDayDrawEvent","disabledDates","highlightedDates","availableFrom","availableTo","dates","monthIndex","monthAttribute","year2digitsFirst","year2digitsLast","lastYear2Digits","firstYear","lastYear","tdYear","yearAttribute","newYear","firstYearCycle","lastYearCycle","tdDecade","CalendarChangingEvent","CalendarChangeEvent","CalendarEvent","RatingOptions","precision","Full","RatingColorSettings","notSelected","radioName","radioFullId","titleFull","Half","radioHalfId","titleHalf","_lblTotal","RatingSelectEvent","decimalPart","integerPart","checkedInput","firstInput","firstInputId","fistLabel","getComputedStyle","GroupBoxOptions","collapsable","startingCollapsed","startingChecked","scrollable","htmlContent","h1","_btnCollapse","collapsed","expand","_chkCheckbox","onCheckboxClick","checkboxClickEvent","GroupBoxOnCheckboxClickEvent","_contentContainer","onCollapse","GroupBoxOnExpandEvent","GroupBoxOnCollapseEvent","onExpand","expandEvent","unCheck","PdfViewerOptions","scale","textSelection","PdfViewerWindowSettings","navigation","_state","PdfState","createToolbar","_pdfViewerCanvasContainer","canvasContainer","_txtCurrentPage","_currentPage","spanLeftArea","currentPage","pdf","numPages","_lblPagesNumber","spanCenterArea","MagnifyingGlassMinus","MagnifyingGlassPlus","spanRightArea","Print","addToolbarItems","area","toolbarRightArea","toolbarLeftArea","toolbarCenterArea","toolbarArea","elementWhereSearch","areaClass","pdfjsLib","getDocument","internalRender","onContentRendered","OnContentRenderedEvent","pagesNumber","getPage","divCanvasTextContainer","ctx","divTextLayer","viewport","getViewport","render","canvasContext","getTextContent","renderTextLayer","base64bytes","downloadPdfBytes","UploadOptions","webApiSettings","UploadWebApiSettings","multiple","fileList","fileListMaxHeight","dropArea","progressBar","dropAreaText","uploadButton","autoUpload","confirmToRemoveFile","canRemoveFile","uploadContainer","_files","_dicFileXhr","_divDropArea","UploadDragEnterEvent","UploadDragOverEvent","UploadDragLeaveEvent","UploadDropEvent","manageLoadingFiles","labelInput","CloudArrowUp","_inputFile","_divProgressBar","_divFileList","uploadFile","addFiles","divFile","divFileList","initializeProgress","startEvent","UploadStartEvent","filesAdded","showFileIfError","checkMimeType","minSize","minSizeErrorMessage","formatBytes","drawFile","UploadDrawTypeEnum","ErrorValidationMinSize","manageValidationError","MinSize","maxSize","maxSizeErrorMessage","ErrorValidationMaxSize","MaxSize","extensions","isValid","mimeTypes","extension","getMimeTypeFromExtension","extensionsArray","extensionsErrorMessage","ErrorValidationExtensions","Extensions","drawTypeEnum","fileInfo","getFileInfo","underLabel","validationErrorTypeEnum","spanPercentageSpinner","TempLoading","iconSpinner","Spinner","Trash","onAbort","abortEvent","UploadAbortEvent","abort","removeFile","onValidationError","errorEvent","UploadValidationErrorEvent","onRemove","removeEvent","UploadRemoveEvent","getFiles","XMLHttpRequest","parametersEvent","UploadParametersEvent","headerParameter","upload","onProgress","progressEvent","UploadProgressEvent","loaded","updateProgress","percentage","readyState","onSuccess","successEvent","UploadSuccessEvent","fileButtonActionIcon","onError","UploadErrorEvent","uploadFileIcon","formData","send","numFiles","_uploadProgress","fileNumber","tot","curr","units","FilePdf","FileImage","FileWord","FileLines","FileZipper","FileVideo","UploadEvent","UploadDragEvent","UploadLoadEvent","PaypalButtonOptions","PaypalStyle","Gold","Responsive","shape","Rect","tagline","fundingicons","layout","enableStandardCardFields","intent","createOrderRequest","SetupPaymentRequest","approveRequest","ExecutePaymentRequest","setupUrl","clientId","commit","locale","renderButton","paypal","Buttons","createOrder","actions","onBeforePayment","beforePaymentEvent","OnPaypalBeforePaymentEvent","prepareWebApiCall","PaypalWebApiTypeEnum","CreateOrder","headers","token","manageError","SetupError","onApprove","OnApprove","ok","onCancel","cancelEvent","OnPaypalCancelEvent","onRendered","renderedEvent","OnPaypalRenderedEvent","cancelUrl","returnUrl","paymentIdPropertyName","paymentID","payerIdPropertyName","payerID","Result","Response","PaypalWebApiRequest","TreeViewOptions","showLink","rightClickForContextMenu","leftClickForContextMenu","parentClickable","contextMenuItems","showEditButton","onEdit","onDragMove","alternateColor","spaceBetweenGroups","rowLine","selectable","export","TreeViewExportSettings","onlyParents","_divTitle","_lblTitle","widthColumns","divColumn","_divHeaderSpace","titleHeight","filterHeight","toolbarHeight","_divContent","TreeViewRequestTypeEnum","selectedValue","parentExpandedValueList","expandedList","firstUl","parentExpandedValue","divIconExpandCollpase","divTreeView","_dictionaryLiValue","odd","manageScrollbar","liClassShowLink","treeViewDivItemContainer","spanTreeItemTextContainer","treeViewItemText","styleRow","TreeViewTemplateEvent","templateResult","Edit","TreeViewEditEvent","showContextMenu","onDoubleClick","TreeViewDoubleClickEvent","btnContextMenu","EllipsisVertical","divItem","TreeViewCellSettings","milesSeparator","isNotNullOrEmpty","boldRoot","_timeoutClick","_actualDraggedItem","TreeViewDragStartEvent","source","destination","dragMoveEvent","TreeViewDragMoveEvent","liDestination","TreeViewDragEndEvent","liSource","TreeViewChangingEvent","exportSettings","numericValueTypeEnum","extraCells","extraCell","sheetName","_divContextMenu","contextMenuItem","divContextMenuItem","clickOnContextMenuItem","TreeViewContextMenuClickEvent","_dataItemContextMenu","targets","closeContextMenu","createContextMenu","manageAddUpdateItem","onAfterSelect","TreeViewChangeEvent","TreeViewEvent","TreeViewDragEvent","TreeViewHeaderAndCellSettings","SchedulerOptions","startTime","endTime","maxResourcesNumber","SchedulerMaxResourceNumber","views","timeslotIntervalDuration","Monday","daysOfWeekNames","numberOfWorkDays","exportPdf","timeColumn","showHeader","SchedulerEditable","_timeColumnWidth","_saturationData","resources","viewSelected","drawToolbar","drawScheduler","manageSchedulerClick","availabilities","saturation","divToolbar","_dtpSchedulerDate","_actualNavigateAction","PrevDate","NextDate","Today","ChangeDate","_swtGroupByDateResource","Week","groupWeekByDate","_btnExpand","Expand","SchedulerExpandEvent","buttonExpand","buttonCollpase","enterFullScreen","adaptHeight","Collapse","collapseEvent","SchedulerCollapseEvent","exitFullScreen","viewItems","viewTypes","FourWeeks","_btgMenuView","maxResourceNumberBasedOnView","dayView","weekView","fourWeeksView","drawHeader","drawContent","getDivContent","contentFragment","createDocumentFragment","rowHeader","thInterval","createIntervalCombo","resource","resourceText","spanResouceText","divSaturation","saturationVisible","spanSaturationBar","numberOfDays","rowDays","addingDays","dayOfWeek","dayName","dayNumber","colSpan","rowResources","thInterval2","addingDaysForResources","groupedByResource","spanSaturationPercentage","_cmbInterval","parentNode","timeslotInterval","divContent","schedulerOffset","contentHeight","headerHeight","numberOfRows","_slotElementList","realDate","textTime","thTime","endSlot","borderTopClass","borderBottomClass","slotElement","resourceId","nowDate","nowTimeslot","onViewChange","viewChangeEvent","SchedulerViewChangeEvent","previousView","onNavigate","navigateEvent","SchedulerNavigateEvent","action","previousDate","triggerResourceChangeEvent","onResourcesChange","resourcesChangeEvent","SchedulerResourcesChangeEvent","onIntervalChange","intervalChangeEvent","SchedulerIntervalChangeEvent","_datasource","realDatasource","appointment","positioned","daysDifference","newApp","newStart","checkMandatorySchedulerDataFields","appointmentFragment","slotWidthList","slotWidth","dictionaryResourceAppointments","resourceAppointments","appointmentsOverlapped","findOverlappedAppointments","maxOverlapped","apt","slot","slotsOccupied","maxOverlappedSlot","overlappedList","apt2","slot2","adaptDateToTimeslotDuration","SchedulerDateTypeEnum","Start","End","slotFiltered","maxPositionY","finalAppointmentPositionY","occupiedSlotList","goTo","occupiedSlot","positionX","divAppointment","managePropertiesSchedulerData","schedulerOffsetTop","schedulerScrollOffset","schedulerOffsetLeft","slotToMove","slotStartingPosition","slotColumnIndex","slotsss","diffYMouseAppointment","xPositionMouse","yPositionMouse","appointmentYPosition","appointmentHeight","appointmentXPosition","appointmentWidth","appointmentDataSource","appointmentIndex","onMoveStart","onMoving","moveAppointmentEvent","SchedulerMovingEvent","divElement","SchedulerMoveStartEvent","yMovePosition","xMovePosition","onMoveEnd","SchedulerMoveEndEvent","setResizing","divInside","slotToResize","pageY","resizing","divAppointmentHeight","onResizeStart","onResizing","resizingEvent","SchedulerResizingEvent","resizeStartEvent","SchedulerResizeStartEvent","diffToAdd","onResizeEnd","_availabilities","availabilityFragment","totalMinutes","availability","slotForAvailability","positionY","divAvailability","schedulerData","insertAdjacentHTML","appointments","rebindAppointments","rebindAvailabilities","saturationData","manual","_saturationVisible","internalHideSaturation","saturationDay","dayMode","schedulerDate","spanPercentage","manageSaturationPercentage","saturationWeek","weekMode","saturationWeekGroupedByDate","groupedByDate","resourceList","saturationResource","thResource","saturationWeekGroupedByResource","manageWeekDateList","saturationFourWeeks","fourWeeksMode","percentageValue","spanPercentageResource","titleColor","dateList","saturationDate","thWeekDay","hideSaturation","internalShowSaturation","divElementId","onAppointmentClick","clickOnAppointmentEvent","SchedulerAppointmentClickEvent","availabilityDataSource","onAvailabilityClick","clickOnAvailabilityEvent","SchedulerAvailabilityClickEvent","onTimeslotClick","clickOnTimeslotEvent","SchedulerTimeslotClickEvent","resourceName","appointmentSlots","getAppointmentSlots","resAppointment","resAppointmentStart","resAppointmentEnd","overlappedApt","dateType","setMinutes","onlyVisible","autoPrint","html2canvas","pdfWidth","pdfHeight","totalPDFPages","jsPDF","unit","imgData","addImage","addPage","SchedulerEvent","SchedulerClickEvent","SchedulerMoveEvent","SchedulerResizeEvent","SchedulerExpandCollapseEvent","QrCodeOptions","QrCodeBorderSettings","QrCodeClickEvent","svg","QrCodeManager","encodeText","Ecc","MEDIUM","toSvgString","_svg","version","errorCorrectionLevel","dataCodewords","mask","MIN_VERSION","MAX_VERSION","drawFunctionPatterns","allCodewords","addEccAndInterleave","drawCodewords","minPenalty","applyMask","drawFormatBits","penalty","getPenaltyScore","ecl","segs","QrSegment","makeSegments","encodeSegments","seg","makeBytes","minVersion","maxVersion","boostEcl","dataUsedBits","dataCapacityBits","getNumDataCodewords","usedBits","getTotalBits","newEcl","QUARTILE","HIGH","bb","appendBits","modeBits","numChars","numCharCountBits","padByte","getModule","parts","setFunctionModule","drawFinderPattern","alignPatPos","getAlignmentPatternPositions","numAlign","drawAlignmentPattern","drawVersion","formatBits","rem","bits","getBit","floor","dy","dx","dist","xx","yy","isBlack","ver","numBlocks","NUM_ERROR_CORRECTION_BLOCKS","ordinal","blockEccLen","ECC_CODEWORDS_PER_BLOCK","rawCodewords","getNumRawDataModules","numShortBlocks","shortBlockLen","blocks","rsDiv","reedSolomonComputeDivisor","dat","ecc","reedSolomonComputeRemainder","block","vert","invert","runColor","runX","runHistory","PENALTY_N1","finderPenaltyAddHistory","finderPenaltyCountPatterns","PENALTY_N3","finderPenaltyTerminateAndCount","runY","PENALTY_N2","black","PENALTY_N4","step","pos","degree","reedSolomonMultiply","divisor","_","factor","shift","coef","z","core","currentRunColor","currentRunLength","bitData","Mode","BYTE","digits","NUMERIC_REGEX","NUMERIC","ALPHANUMERIC_REGEX","temp","ALPHANUMERIC_CHARSET","ALPHANUMERIC","makeNumeric","makeAlphanumeric","toUtf8ByteArray","assignVal","ECI","ccbits","Infinity","str","encodeURI","LOW","numBitsCharCount","KANJI","MultiSchedulerOptions","showNavigateButtons","maxDatesNumber","_resources","_dates","_dictionaryDateScheduler","divDates","ChevronLeft","MultiSchedulerNavigateEvent","MultiSchedulerNavigateActionEnum","ChevronRight","widthPercentage","lblDate","divTimeslotIntervalDuration","_cmbTimeslotIntervalDuration","divSchedulers","scheduler","fixWidth","drawData","newData","newDataDate","groupingField","datasourceGrouped","keyDate","schedulerDataList","multiSchedulerOffset","divScrollable","IconOptions","cursorPointer","VrIconClickEvent","ColorPickerOptions","Hex","alphaChannel","hexUppercase","hideOnPaletteClick","closeButton","palette","ColorPickerManager","_picker","JSColor","option","shadow","paletteCols","paletteSetsAlpha","closeText","required","uppercase","valueHex","valueRgba","divOpen","Eraser","fromString","toHEXString","fromRGBA","g","toRGBAString","randomize","ColorPickerChangeEvent","ColorPickerEvent","global","BoxShadow","funcName","elm","jsc","jscolor","instances","readyQueue","register","pub","installBySelector","rootNode","node","elms","querySelectorAll","matchClass","lookupClass","dataOpts","isColorAttrSupported","getDataAttr","targetElm","optsStr","warn","docsRef","opts","parseOptionsStr","eParse","looseJSON","Function","eEval","getInstances","inst","targetElement","createEl","tagName","setData","nodeOrSelector","sel","querySelector","isNode","Node","nodeType","nodeName","removeChildren","firstChild","isTextInput","isButton","isButtonEmpty","isPassiveEventSupported","supported","removeEventListener","dataProp","obj","prop1","removeData","setDefault","attrName","setDataAttr","_attachedGroupEvents","attachGroupEvent","groupName","evnt","func","detachGroupEvents","evt","returnValue","captureTarget","setCapture","_capturedTarget","releaseTarget","releaseCapture","triggerEvent","bubbles","cancelable","ev","Event","createEvent","initEvent","dispatchEvent","triggerInputEvent","eventKey","9","13","27","strList","classNames","repl","getCompStyle","compStyle","currentStyle","setStyle","styles","important","reversible","priority","origStyle","setVal","setProperty","hexColor","hexaColor","rgbColor","rgbaColor","linearGradient","prefixes","helper","tryFunc","tryVal","getFuncName","setBorderRadius","setBoxShadow","getElementPos","relativeToViewport","rect","viewPos","getViewPos","getElementSize","getAbsPointerPos","changedTouches","getRelPointerPos","targetRect","srcElement","pageXOffset","clientLeft","pageYOffset","clientTop","getViewSize","RGB_HSV","v","h","HSV_RGB","parseColorString","rgba","mR","mG","mB","mA","par","re","parseFloat","parsePaletteValue","mixed","vals","colors","containsTranparentColor","isAlphaFormat","scaleCanvasForHighDPR","dpr","genColorPreviewCanvas","separatorPos","specWidth","scaleForHighDPR","sepW","previewSeparator","sqSize","chessboardSize","sqColor1","chessboardColor1","sqColor2","chessboardColor2","cWidth","cHeight","genColorPreviewGradient","params","redrawPosition","picker","owner","tp","vp","thisObj","fixed","ts","vs","pd","getPickerDims","ps","borderW","borderH","smartPosition","pp","positionValue","contractShadow","_drawPosition","vShadow","shadowBlur","boxS","shadowColor","w","controlBorderWidth","sliderSpace","getControlPadding","sliderSize","getSliderChannel","hasAlphaChannel","pal","getPaletteDims","buttonHeight","pW","pH","contentW","contentH","paddedW","paddedH","borderWidth","cols","cellW","cellH","sampleCount","_palette","paletteSpacing","paletteHeight","pointerBorderWidth","pointerThickness","getPadYChannel","triggerCallback","triggerGlobal","eventNames","_pointerMoveEvent","mouse","touch","_pointerEndEvent","_pointerOrigin","onDocumentKeyUp","tryHide","onWindowResize","onWindowScroll","onParentScroll","onDocumentMouseDown","showOnClick","onControlPointerStart","onPickerTouchStart","controlName","pointerType","registerDragEvents","onDocumentPointerMove","onDocumentPointerEnd","frameElement","ofs","channels","fromHSVA","setPad","setSld","setASld","onPaletteSampleClick","_setFormat","getFormat","_paletteHasTransparency","ofsX","ofsY","pointerAbs","xVal","yVal","fmt","createPadCanvas","hGrad","createLinearGradient","addColorStop","vGrad","createSliderGradient","color1","color2","grad","createASliderGradient","hShadow","spread","inset","leaveValue","leaveAlpha","leavePreview","enumOpts","previewPosition","deprecatedOpts","THIS","setOption","oldOpt","newOpt","setter","getOption","drawPicker","_processParentElementsInDOM","box","boxB","pad","padB","padM","padCanvas","cross","crossBY","crossBX","crossLY","crossLX","sld","sldB","sldM","sldGrad","sldPtrS","sldPtrIB","sldPtrMB","sldPtrOB","asld","asldB","asldM","asldGrad","asldPtrS","asldPtrIB","asldPtrMB","asldPtrOB","btn","btnT","passive","insetColors","outsetColor","displaySlider","displayAlphaSlider","pickerDims","crossOuterSize","crossSize","controlPadding","borderRadius","PI","controlBorderColor","instance","pointerBorderColor","pointerColor","overflow","sliderInnerSpace","chessboard","si","sampleColor","sampleCssColor","sc","sw","backgroundImage","backgroundRepeat","backgroundPosition","whiteSpace","buttonColor","onmousedown","lineHeight","createTextNode","redrawPad","redrawSld","redrawASld","activeClassName","yChannel","rgb1","rgb2","rgb","sldChannel","isPickerOwner","alpha","random","onInput","valueElement","alphaElement","previewElement","previewSize","previewPadding","hash","forceStyle","hideOnLeave","minS","maxS","minV","maxV","minA","maxA","redraw","exposeColor","channel","evs","callbackProp","hsv","fromHSV","fromRGB","setPreviewElementBg","setValueElementValue","minH","maxH","toHEXAString","toRGBString","toGrayscale","toCanvas","toBackground","isLight","_currentFormat","processValueInput","processAlphaInput","colorStr","alphaVal","setAlphaElementValue","backgrounds","repeat","origin","preview","bg","sty","sty2","_parentElementsProcessed","set__palette","presetsArr","preset","pres","presets","nonProperties","valueElementOrigEvents","oninput","oldVal","initValue","initAlpha","install","ready","triggerNow","installByClassName","SearchBarOptions","expandOnClick","collapseOnBlur","SearchBarClickEvent","_previousValue","keyUpEvent","SearchBarKeyUpEvent","enterKeyPressEvent","SearchBarEnterKeyEvent","SearchBarBlurEvent","SearchBarEvent","SplitterOptions","vrSplitterResizable","_previousDiv","previousElementSibling","_nextDiv","nextElementSibling","onBeforeExpandCollapse","beforeExpandCollapseEvent","SplitterBeforeExpandCollapseEvent","previousDiv","nextDiv","onAfterExpandExpandCollapse","afterExpandCollapseEvent","SplitterAfterExpandCollapseEvent","resizer","prevSibling","nextSibling","prevSiblingHeight","prevSiblingWidth","mouseMoveHandler","userSelect","pointerEvents","mouseUpHandler","removeProperty","beforeResizeEvent","SplitterAfterResizeEvent","SplitterBeforeResizeEvent","SplitterEvent","SplitterExpandCollapseEvent","SplitterResizeEvent","AutoCompleteBoxOptions","itemSettings","deleteIconColor","comboSettings","_spanForWidth","_txtInput","manageInputWidth","valueCombo","manageInput","comboItems","realItem","onItemClick","itemClickEvent","AutoCompleteBoxItemClickEvent","itemAddedEvent","AutoCompleteBoxItemAddedEvent","AutoCompleteBoxItemInfo","focusEvent","AutoCompleteBoxFocusEvent","AutoCompleteBoxBlurEvent","_comboItems","comboItemToSelect","AutoCompleteBoxEvent","showHideDatasetOnLegendClick","responsive","stacked","subTitle","dataLabels","legend","_plugins","ChartPlugin","subtitle","anchor","onDataFormatter","formatter","axisFormatterEvent","listeners","enter","hovered","onLabelHover","leave","onLabelLeave","leaveEvent","onLabelClick","datalabels","labels","onLegendHover","onLegendLeave","chart","config","controllers","doughnut","overrides","onLegendClick","scales","grace","onAxisLabelFormatter","ticks","limit","minX","maxX","minY","maxY","aspectRatio","maintain","_chart","destroy","dataset","areaSettings","above","below","fill","smoothLine","tension","chartData","datasets","maintainAspectRatio","parsing","indexAxis","ChartDataLabels","TabStripOptions","userOnClick","elementIdList","_buttonGroup","showAllItems","hideElement","hideAllItems","visibleItem","selectIndex","itemTooltip","itemText","itemTextByIndex","TooltipOptions","showOn","Hover","hideOn","TooltipShowSettings","showAfter","TooltipHideSettings","hideAfter","TooltipShowHideEnum","MouseEnter","MouseLeave","Click","Focus","Blur","Leave","Never","_notifier","onShow","showEvent","TooltipShowEvent","onHide","hideEvent","TooltipHideEvent","continuous","maxAlternatives","_btnMicrophone","Microphone","SpeechRecognizerClickEvent","speechRecognition","webkitSpeechRecognition","SpeechRecognition","speechGrammarList","webkitSpeechGrammarList","SpeechGrammarList","_recognition","lang","grammars","speechRecognitionList","grammar","addFromString","onresult","resultIndex","results","isFinal","transcript","_allTextFromStart","SpeechRecognizerResultEvent","allTextFromStart","onnomatch","onNoMatch","SpeechRecognizerNoMatchEvent","SpeechRecognizerErrorEvent","onstart","SpeechRecognizerStartEvent","onend","SpeechRecognizerEndEvent","onspeechstart","onSpeechStart","SpeechRecognizerSpeechStartEvent","onspeechend","onSpeechEnd","SpeechRecognizerSpeechEndEvent","onaudiostart","onAudioStart","SpeechRecognizerAudioStartEvent","onaudioend","onAudioEnd","SpeechRecognizerAudioEndEvent","onsoundstart","onSoundStart","SpeechRecognizerSoundStartEvent","onsoundend","onSoundEnd","SpeechRecognizerSoundEndEvent","MicrophoneSlash","SpeechRecognizerEvent","DivOptions","inline","setBorderTop","borderSettings","LegendOptions"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,KAAM,GAAIH,GACS,iBAAZC,QACdA,QAAY,GAAID,IAEhBD,EAAS,GAAIC,IARf,CASGK,MAAM,WACT,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUP,QAGnC,IAAIC,EAASI,EAAiBE,GAAY,CACzCC,EAAGD,EACHE,GAAG,EACHT,QAAS,IAUV,OANAU,EAAQH,GAAUI,KAAKV,EAAOD,QAASC,EAAQA,EAAOD,QAASM,GAG/DL,EAAOQ,GAAI,EAGJR,EAAOD,QA0Df,OArDAM,EAAoBM,EAAIF,EAGxBJ,EAAoBO,EAAIR,EAGxBC,EAAoBQ,EAAI,SAASd,EAASe,EAAMC,GAC3CV,EAAoBW,EAAEjB,EAASe,IAClCG,OAAOC,eAAenB,EAASe,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEV,EAAoBgB,EAAI,SAAStB,GACX,oBAAXuB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAenB,EAASuB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAShC,GAChC,IAAIe,EAASf,GAAUA,EAAO2B,WAC7B,WAAwB,OAAO3B,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAK,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG7B,EAAoBgC,EAAI,GAIjBhC,EAAoBA,EAAoBiC,EAAI,I,uiQCjFrD,sCACA,wCACA,uCACA,iCACA,mCACA,oCACA,sCACA,gCACA,oCACA,kCACA,sCACA,iCACA,iCACA,kCACA,gCACA,iCACA,+BACA,iCACA,wCACA,iCACA,uCACA,sCACA,0CACA,mCACA,+BACA,gCACA,kCACA,mCACA,iCACA,uCACA,mCACA,oCACA,mCACA,iCACA,uCACA,mCACA,oCACA,iCACA,yCACA,+BACA,sCACA,oCACA,mCACA,0CACA,gCACA,uCACA,mCACA,kCACA,2CACA,8BACA,gCACA,iCAIA,SAAgBC,YAAYC,EAA+BC,EAAkDC,EAAuCC,GAGnJ,OADcC,eAAsBC,gBAAgBC,MAAOL,EAAWC,EAAUC,EAAWH,GAI5F,SAAgBO,aAAaP,EAAgCC,EAAkDC,EAAuCC,GAGrJ,OADcC,eAAuBC,gBAAgBG,OAAQP,EAAWC,EAAUC,EAAWH,GAI9F,SAAgBS,kBAAkBT,EAAqCC,EAAkDC,EAAuCC,GAG/J,OADcC,eAA4BC,gBAAgBK,YAAaT,EAAWC,EAAUC,EAAWH,GAIxG,SAAgBW,cAAcX,EAAiCC,EAAkDC,EAAuCC,GAGvJ,OADcC,eAAwBC,gBAAgBO,QAASX,EAAWC,EAAUC,EAAWH,GAIhG,SAAgBa,qBAAqBb,EAAiCC,EAAkDC,EAAuCC,GAI9J,OAFe,MAAXH,IAAiBA,EAAU,IAAI,UAAAc,gBACnCd,EAAQd,KAAO6B,aAAaC,QACrBL,cAAcX,EAASC,EAAWC,EAAUC,GAGpD,SAAgBc,wBAAwBjB,EAAiCC,EAAkDC,EAAuCC,GAIjK,OAFe,MAAXH,IAAiBA,EAAU,IAAI,UAAAc,gBACnCd,EAAQd,KAAO6B,aAAaG,WACrBP,cAAcX,EAASC,EAAWC,EAAUC,GAGpD,SAAgBgB,sBAAsBnB,EAAiCC,EAAkDC,EAAuCC,GAI/J,OAFe,MAAXH,IAAiBA,EAAU,IAAI,UAAAc,gBACnCd,EAAQd,KAAO6B,aAAaK,SACrBT,cAAcX,EAASC,EAAWC,EAAUC,GAGpD,SAAgBkB,sBAAsBrB,EAAiCC,EAAkDC,EAAuCC,GAI/J,OAFe,MAAXH,IAAiBA,EAAU,IAAI,UAAAc,gBACnCd,EAAQd,KAAO6B,aAAaO,SACrBX,cAAcX,EAASC,EAAWC,EAAUC,GAGpD,SAAgBoB,uBAAuBvB,EAAiCC,EAAkDC,EAAuCC,GAIhK,OAFe,MAAXH,IAAiBA,EAAU,IAAI,UAAAc,gBACnCd,EAAQd,KAAO6B,aAAaS,UACrBb,cAAcX,EAASC,EAAWC,EAAUC,GAGpD,SAAgBsB,eAAezB,EAAkCC,EAAkDC,EAAuCC,GAGzJ,OADcC,eAAyBC,gBAAgBqB,SAAUzB,EAAWC,EAAUC,EAAWH,GAIlG,SAAgB2B,gBAAgB3B,EAAmCC,EAAkDC,EAAuCC,GAG3J,OADcC,eAA0BC,gBAAgBuB,UAAW3B,EAAWC,EAAUC,EAAWH,GAIpG,SAAgB6B,YAAY7B,EAA+BC,EAAkDC,EAAuCC,GAGnJ,OADcC,eAAsBC,gBAAgByB,MAAO7B,EAAWC,EAAUC,EAAWH,GAI5F,SAAgB+B,iBAAiB/B,EAAoCC,EAAkDC,EAAuCC,GAG7J,OADcC,eAA2BC,gBAAgB2B,WAAY/B,EAAWC,EAAUC,EAAWH,GAItG,SAAgBiC,iBAAiBjC,EAAoCC,EAAkDC,EAAuCC,GAI7J,OAFe,MAAXH,IAAiBA,EAAU,IAAI,aAAAkC,mBACnClC,EAAQd,KAAOiD,aAAaC,KACrBL,iBAAiB/B,EAASC,EAAWC,EAAUC,GAGvD,SAAgBkC,qBAAqBrC,EAAoCC,EAAkDC,EAAuCC,GAIjK,OAFe,MAAXH,IAAiBA,EAAU,IAAI,aAAAkC,mBACnClC,EAAQd,KAAOiD,aAAaG,SACrBP,iBAAiB/B,EAASC,EAAWC,EAAUC,GAGvD,SAAgBoC,kBAAkBvC,EAAoCC,EAAkDC,EAAuCC,GAI9J,OAFe,MAAXH,IAAiBA,EAAU,IAAI,aAAAkC,mBACnClC,EAAQwC,MAAQC,cAAcC,MACvBX,iBAAiB/B,EAASC,EAAWC,EAAUC,GAGvD,SAAgBwC,iBAAiB3C,EAAoCC,EAAkDC,EAAuCC,GAI7J,OAFe,MAAXH,IAAiBA,EAAU,IAAI,aAAAkC,mBACnClC,EAAQwC,MAAQC,cAAcG,KACvBb,iBAAiB/B,EAASC,EAAWC,EAAUC,GAGvD,SAAgB0C,eAAe7C,EAAkCC,EAAkDC,EAAuCC,GAGzJ,OADcC,eAAyBC,gBAAgByC,SAAU7C,EAAWC,EAAUC,EAAWH,GAIlG,SAAgB+C,eAAe/C,EAAkCC,EAAkDC,EAAuCC,GAIzJ,OAFe,MAAXH,IAAiBA,EAAU,IAAI,WAAAgD,iBACnChD,EAAQd,KAAO+D,iBAAiBC,SACzBL,eAAe7C,EAASC,EAAWC,EAAUC,GAGrD,SAAgBgD,kBAAkBnD,EAAqCC,EAAkDC,EAAuCC,GAG/J,OADcC,eAA4BC,gBAAgB+C,YAAanD,EAAWC,EAAUC,EAAWH,GAIxG,SAAgBqD,aAAarD,EAAgCC,EAAkDC,EAAuCC,GAGrJ,OADcC,eAAuBC,gBAAgBiD,OAAQrD,EAAWC,EAAUC,EAAWH,GAI9F,SAAgBuD,aAAavD,EAAgCC,GAG5D,OADsBG,eAAeC,gBAAgBmD,OAAQvD,EAAW,KAAM,KAAMD,GAIrF,SAAgByD,WAAWzD,EAA8BC,EAAkDC,EAAuCC,GAGjJ,OADcC,eAAqBC,gBAAgBqD,KAAMzD,EAAWC,EAAUC,EAAWH,GAI1F,SAAgB2D,aAAa3D,EAAgCC,EAAkDC,EAAuCC,GAGrJ,OADcC,eAAuBC,gBAAgBuD,OAAQ3D,EAAWC,EAAUC,EAAWH,GAI9F,SAAgB6D,mBAAmB7D,EAAsCC,EAAkDC,EAAuCC,GAGjK,OADcC,eAA6BC,gBAAgByD,aAAc7D,EAAWC,EAAUC,EAAWH,GAI1G,SAAgB+D,kBAAkB/D,EAAqCC,EAAkDC,EAAuCC,GAG/J,OADcC,eAA4BC,gBAAgB2D,YAAa/D,EAAWC,EAAUC,EAAWH,GAGxG,SAAgBiE,sBAAsBjE,EAAyCC,EAAkDC,EAAuCC,GAGvK,OADcC,eAAgCC,gBAAgB6D,gBAAiBjE,EAAWC,EAAUC,EAAWH,GAIhH,SAAgBmE,eAAenE,EAAkCC,EAAkDC,EAAuCC,GAGzJ,OADcC,eAAyBC,gBAAgB+D,SAAUnE,EAAWC,EAAUC,EAAWH,GAIlG,SAAgBqE,UAAUrE,EAA8BC,EAAkDC,EAAuCC,GAGhJ,OADcC,eAAqBC,gBAAgBiE,IAAKrE,EAAWC,EAAUC,EAAWH,GAIzF,SAAgBuE,cAAcvE,EAAiCC,EAAkDC,EAAuCC,GAGvJ,OADcC,eAAwBC,gBAAgBmE,QAASvE,EAAWC,EAAUC,EAAWH,GAIhG,SAAgByE,eAAezE,EAAkCC,EAAkDC,EAAuCC,GAGzJ,OADcC,eAAyBC,gBAAgBqE,SAAUzE,EAAWC,EAAUC,EAAWH,GAIlG,SAAgB2E,aAAa3E,EAAgCC,EAAkDC,EAAuCC,GAGrJ,OADcC,eAAuBC,gBAAgBuE,OAAQ3E,EAAWC,EAAUC,EAAWH,GAI9F,SAAgB6E,eAAe7E,EAAkCC,EAAkDC,EAAuCC,GAGzJ,OADcC,eAAyBC,gBAAgByE,SAAU7E,EAAWC,EAAUC,EAAWH,GAIlG,SAAgB+E,gBAAgB/E,EAAmCC,EAAkDC,EAAuCC,GAG3J,OADcC,eAA0BC,gBAAgB2E,UAAW/E,EAAWC,EAAUC,EAAWH,GAIpG,SAAgBiF,mBAAmBjF,EAAsCC,EAAkDC,EAAuCC,GAGjK,OADcC,eAA6BC,gBAAgB6E,aAAcjF,EAAWC,EAAUC,EAAWH,GAI1G,SAAgBmF,aAAanF,EAAgCC,EAAkDC,EAAuCC,GAGrJ,OADcC,eAAuBC,gBAAgB+E,OAAQnF,EAAWC,EAAUC,EAAWH,GAI9F,SAAgBqF,eAAerF,EAAkCC,EAAkDC,EAAuCC,GAGzJ,OADcC,eAAyBC,gBAAgBiF,SAAUrF,EAAWC,EAAUC,EAAWH,GAIlG,SAAgBuF,gBAAgBvF,EAAmCC,EAAkDC,EAAuCC,GAG3J,OADcC,eAA0BC,gBAAgBmF,UAAWvF,EAAWC,EAAUC,EAAWH,GAIpG,SAAgByF,qBAAqBzF,EAAwCC,EAAkDC,EAAuCC,GAGrK,OADcC,eAA+BC,gBAAgBqF,eAAgBzF,EAAWC,EAAUC,EAAWH,GAI9G,SAAgB2F,aAAa3F,EAAgCC,EAAkDC,EAAuCC,GAGrJ,OADcC,eAAuBC,gBAAgBuF,OAAQ3F,EAAWC,EAAUC,EAAWH,GAI9F,SAAgB6F,WAAW7F,EAA8BC,EAAkDC,EAAuCC,GAGjJ,OADcC,eAAqBC,gBAAgByF,KAAM7F,EAAWC,EAAUC,EAAWH,GAI1F,SAAgB+F,kBAAkB/F,EAAqCC,EAAkDC,EAAuCC,GAG/J,OADcC,eAA4BC,gBAAgB2F,YAAa/F,EAAWC,EAAUC,EAAWH,GAIxG,SAAgBiG,gBAAgBjG,EAAmCC,EAAkDC,EAAuCC,GAG3J,OADcC,eAA0BC,gBAAgB6F,UAAWjG,EAAWC,EAAUC,EAAWH,GAIpG,SAAgBmG,eAAenG,EAAkCC,EAAkDC,EAAuCC,GAGzJ,OADcC,eAAyBC,gBAAgB+F,SAAUnG,EAAWC,EAAUC,EAAWH,GAIlG,SAAgBqG,sBAAsBrG,EAAyCC,EAAkDC,EAAuCC,GAGvK,OADcC,eAAgCC,gBAAgBiG,gBAAiBrG,EAAWC,EAAUC,EAAWH,GAIhH,SAAgBuG,YAAYvG,EAA+BC,EAAkDC,EAAuCC,GAGnJ,OADcC,eAAwBC,gBAAgBmG,MAAOvG,EAAWC,EAAUC,EAAWH,GAI9F,SAAgByG,eAAezG,EAA+BC,EAAkDC,EAAuCC,GAItJ,OAFe,MAAXH,IAAiBA,EAAU,IAAI0G,cACnC1G,EAAQ2G,KAAOC,cAAcC,IACtBN,YAAYvG,EAASC,EAAWC,EAAUC,GAGlD,SAAgB2G,yBAAyB9G,EAA+BC,EAAkDC,EAAuCC,GAIhK,OAFe,MAAXH,IAAiBA,EAAU,IAAI0G,cACnC1G,EAAQ2G,KAAOC,cAAcG,cACtBR,YAAYvG,EAASC,EAAWC,EAAUC,GAGlD,SAAgB6G,gBAAgBhH,EAA+BC,EAAkDC,EAAuCC,GAIvJ,OAFe,MAAXH,IAAiBA,EAAU,IAAI0G,cACnC1G,EAAQ2G,KAAOC,cAAcK,KACtBV,YAAYvG,EAASC,EAAWC,EAAUC,GAGlD,SAAgB+G,iBAAiBlH,EAA+BC,EAAkDC,EAAuCC,GAIxJ,OAFe,MAAXH,IAAiBA,EAAU,IAAI0G,cACnC1G,EAAQ2G,KAAOC,cAAcO,MACtBZ,YAAYvG,EAASC,EAAWC,EAAUC,GAGlD,SAAgBiH,eAAepH,EAA+BC,EAAkDC,EAAuCC,GAItJ,OAFe,MAAXH,IAAiBA,EAAU,IAAI0G,cACnC1G,EAAQ2G,KAAOC,cAAcS,IACtBd,YAAYvG,EAASC,EAAWC,EAAUC,GAGlD,SAAgBmH,gBAAgBtH,EAA+BC,EAAkDC,EAAuCC,GAIvJ,OAFe,MAAXH,IAAiBA,EAAU,IAAI0G,cACnC1G,EAAQ2G,KAAOC,cAAcW,KACtBhB,YAAYvG,EAASC,EAAWC,EAAUC,GAGlD,SAAgBqH,sBAAsBxH,EAA+BC,EAAkDC,EAAuCC,GAI7J,OAFe,MAAXH,IAAiBA,EAAU,IAAI0G,cACnC1G,EAAQ2G,KAAOC,cAAca,WACtBlB,YAAYvG,EAASC,EAAWC,EAAUC,GAGlD,SAAgBuH,eAAe1H,EAAkCC,EAAkDC,EAAuCC,GAGzJ,OADcC,eAAyBC,gBAAgBsH,SAAU1H,EAAWC,EAAUC,EAAWH,GAIlG,SAAgB4H,cAAc5H,GAG7B,OADcI,eAAwBC,gBAAgBwH,QAAS,KAAM,KAAM,KAAM7H,GAIlF,SAAgB8H,uBAAuB9H,EAA0CC,EAAkDC,EAAuCC,GAGzK,OADcC,eAAiCC,gBAAgB0H,iBAAkB9H,EAAWC,EAAUC,EAAWH,GAIlH,SAAgBgI,aAAahI,EAAgCC,EAAkDC,EAAuCC,GAGrJ,OADcC,eAAuBC,gBAAgB4H,OAAQhI,EAAWC,EAAUC,EAAWH,GAI9F,SAAgBkI,WAAgCC,GAE/C,OAAO,iBAAAC,eAAexJ,IAAOuJ,GAG9B,SAAgBE,WAAWC,GAE1B,iBAAAF,eAAeG,IAAID,GAGpB,SAASlI,eAAoCoI,EAAkCvI,EAAkDC,EAAuCuI,EAAkCzI,GAE1L,MAAXA,IACHA,EAAU,IAAI,SAAA0I,kBAEf,IAAIvI,EAAY,QAAU,iBAAAwI,eAAeC,aASzC,GARwB,MAApBH,IAEHtI,EAAYsI,EACPA,EAAiBI,WAAW,OAChCJ,EAAmB,IAAMA,IAIV,MAAbxI,GAAqB6I,KAAKL,GAAkBM,OAAS,EACxD,OAAOD,KAAKL,GAAkB,GAI/B,IAAIO,EAAU,KACVC,EAAa,GAGjB,OAAQT,GAEP,KAAKnI,gBAAgBC,MAAO2I,EAAa,QAAS,MAClD,KAAK5I,gBAAgBG,OAAQyI,EAAa,SAAU,MACpD,KAAK5I,gBAAgBK,YAAauI,EAAa,MAAO,MACtD,KAAK5I,gBAAgBO,QAASqI,EAAa,QAAS,MACpD,KAAK5I,gBAAgBmD,OAAQyF,EAAa,MAAO,MACjD,KAAK5I,gBAAgBqB,SAAUuH,EAAa,QAAS,MACrD,KAAK5I,gBAAgByD,aAAcmF,EAAa,MAAO,MACvD,KAAK5I,gBAAgBuB,UAAWqH,EAAa,OAAQ,MACrD,KAAK5I,gBAAgByB,MAAOmH,EAAa,MAAO,MAChD,KAAK5I,gBAAgB2B,WAAYiH,EAAa,QAAS,MACvD,KAAK5I,gBAAgB+C,YAAa6F,EAAa,MAAO,MACtD,KAAK5I,gBAAgBiD,OAAQ2F,EAAa,WAAY,MACtD,KAAK5I,gBAAgBqD,KAAMuF,EAAa,QAAS,MACjD,KAAK5I,gBAAgBuD,OAAQqF,EAAa,MAAO,MACjD,KAAK5I,gBAAgB2D,YAAaiF,EAAa,QAAS,MACxD,KAAK5I,gBAAgB6D,gBAAiB+E,EAAa,MAAO,MAC1D,KAAK5I,gBAAgB+D,SAAU6E,EAAa,QAAS,MACrD,KAAK5I,gBAAgBiE,IAAK2E,EAAa,MAAO,MAC9C,KAAK5I,gBAAgBmE,QAASyE,EAAa,SAAU,MACrD,KAAK5I,gBAAgBqE,SACrB,KAAKrE,gBAAgBuE,OACrB,KAAKvE,gBAAgByE,SACrB,KAAKzE,gBAAgB2E,UACrB,KAAK3E,gBAAgB6E,aACrB,KAAK7E,gBAAgB+E,OACrB,KAAK/E,gBAAgBiF,SACrB,KAAKjF,gBAAgBmF,UACrB,KAAKnF,gBAAgBqF,eACrB,KAAKrF,gBAAgBuF,OAAQqD,EAAa,MAAO,MACjD,KAAK5I,gBAAgByF,KAAMmD,EAAa,IAAK,MAC7C,KAAK5I,gBAAgB6F,UACrB,KAAK7F,gBAAgB+F,SACrB,KAAK/F,gBAAgBiG,gBAAiB2C,EAAa,MAAO,MAC1D,KAAK5I,gBAAgBmG,MAAOyC,EAAa,SAAU,MACnD,KAAK5I,gBAAgBsH,SACrB,KAAKtH,gBAAgBwH,QACrB,KAAKxH,gBAAgB0H,iBACrB,KAAK1H,gBAAgB6I,IACrB,KAAK7I,gBAAgB4H,OAAQgB,EAAa,MAAO,MACjD,KAAK5I,gBAAgB2F,YAGlBiD,EADgD,MAA5CjJ,EAA+BmJ,YAAmE,IAA7CnJ,EAA+BmJ,UAC3E,QAEA,SAEf,MACD,KAAK9I,gBAAgByC,SAInB,OAFyC,MAApC9C,EAA4Bd,OAA4D,IAA3Cc,EAA4BoJ,YAAkE,MAA1CpJ,EAA4BqJ,aAChIrJ,EAA4Bd,KAAO+D,iBAAiBqG,OAC7CtJ,EAA4Bd,MAEpC,KAAK+D,iBAAiBqG,MAAOL,GAA0D,IAA3CjJ,EAA4BoJ,WAAuB,MAAQ,QAAS,MAChH,KAAKnG,iBAAiBC,SAAU+F,EAAa,OAMjD,GAAiB,MAAbhJ,GAAqBuI,GAAmBnI,gBAAgBmD,QAAUgF,GAAmBnI,gBAAgB2E,WAAawD,GAAmBnI,gBAAgBwH,QACxJmB,EAAUF,KAAK,IAAMG,EAAa,QAAU9I,EAAY,OAAS8I,EAAa,KAAK,OAEpF,CACC,GAAwB,MAApBR,EACH,MAAMc,MAAMf,EAAkB,sDAE1BrI,EAAU0I,WAAW,OACzB1I,EAAY,IAAMA,GAEnB6I,EAAUF,KAAK3I,GAAW,GAK3B,IAAK2I,KAAKE,GAASQ,GAAGP,GACrB,MAAMM,MAAM,gCAAkCpJ,EAAY,0CAA4C8I,GAGrF,SAAdA,GACHH,KAAKE,GAASS,KAAK,eAAgB,OAG/BjB,GAAmBnI,gBAAgBmD,QAAUgF,GAAmBnI,gBAAgBwH,SAAyB,MAAb5H,IAChGA,EAA6B,MAAhByJ,aAAyBA,aAAsCC,SAASC,MAErE,MAAb3J,IAEuB,iBAAf,GAA4BA,EAAU4I,WAAW,OAC3D5I,EAAY,IAAMA,GAEH,MAAZC,IAAkBA,EAAW2J,oBAAoBC,OACjD5J,GAAY2J,oBAAoBC,MACnChB,KAAK7I,GAAW8J,aAAaf,GAE7BF,KAAK7I,GAAW+J,QAAQhB,IAI1B,IAAIV,EAAUQ,KAAKE,GAAS,KAAOR,GAAiBxI,GAEpD,OADAqI,WAAWC,GACJA,EAqQR,IAAYjI,gBA6CAwJ,oBAmLAI,gBAoUAC,YAkBAC,gBAmBAC,eAsZAC,eAuZAC,iBAuZAC,iBAuZAC,cAyZAC,aAQAC,gBAkBAC,mBAOAC,gBAaAC,eA0CAC,kBAgCAC,oBAQAC,cAcAC,mBASAC,cAcAnK,aAeAoK,sBAgCAC,2BASAC,cAOAC,kBAMAC,kBASAC,sBAMAC,oBAQAC,qBAQAC,qBAMAC,qBAUAC,sBAQAC,kBASAC,sBASAC,qBASAC,eAQAhJ,iBAMAiJ,qBA+FAtF,cA6BAuF,oBAOAC,uBAgCAC,0BAOAC,6BASAC,wBAmBAC,wBASAC,qBAeAC,2BAkCAC,yBAMAC,sBAOAC,uBA6GAC,yBAgBAC,0BAMAC,4BAQAC,iBAsDAC,wBAQAC,gBAqFAC,yBAsBAC,+BAMAC,mCAwCAC,qBAOAC,sBAMAC,kBAMAC,mBAMAC,aAMAC,kBAUAC,cAOAC,mBA0BAC,uBAOAC,oBAmBAC,uBAQAC,yBAmKAC,yBAoCAC,sBAMAC,8BAuGAC,cAiBAC,kBA6CAC,4BA8BAC,iBASAC,qBAiBAC,kBAQAC,kBAYAC,kBAQAC,kBASAC,gBASAC,oBA4FAC,wBA0CAC,aAOAC,wBAOAC,uBAeAC,kBAuBAC,YAsBAC,oBAQAC,8BASAC,MA2cAC,eAMAvN,aAWAM,cAOAkN,eAWAC,QAqCPC,gBASOC,iBAOAC,iBAxwJZ,SAAgBC,aAEflH,KAAK,wBAAwBmH,OAG9B,SAAgBC,OAAOC,EAAcnQ,GAGpC,OADe,IAAI,WAAAoQ,SAASD,EAAMnQ,GAInC,SAAgBqQ,YAAYF,EAAcnQ,GAIzC,OAFe,MAAXA,IAAiBA,EAAU,IAAIsQ,iBACf,MAAhBtQ,EAAQ2G,OAAc3G,EAAQ2G,KAAO8H,iBAAiBlF,OACnD,IAAI,WAAA6G,SAASD,EAAMnQ,GAG3B,SAAgBuQ,cAAcJ,EAAcnQ,GAI3C,OAFe,MAAXA,IAAiBA,EAAU,IAAIsQ,iBACf,MAAhBtQ,EAAQ2G,OAAc3G,EAAQ2G,KAAO8H,iBAAiB+B,SACnD,IAAI,WAAAJ,SAASD,EAAMnQ,GAG3B,SAAgByQ,cAAcN,EAAcnQ,GAI3C,OAFe,MAAXA,IAAiBA,EAAU,IAAIsQ,iBACf,MAAhBtQ,EAAQ2G,OAAc3G,EAAQ2G,KAAO8H,iBAAiBiC,SACnD,IAAI,WAAAN,SAASD,EAAMnQ,GAG3B,SAAgB2Q,WAAWR,EAAcnQ,GAIxC,OAFe,MAAXA,IAAiBA,EAAU,IAAIsQ,iBACf,MAAhBtQ,EAAQ2G,OAAc3G,EAAQ2G,KAAO8H,iBAAiBmC,MACnD,IAAI,WAAAR,SAASD,EAAMnQ,GAK3B,SAAgB6Q,QAAQV,EAAsBnQ,GAG7C,OADc,IAAI,UAAA8Q,QAAQX,EAAMnQ,GACjB+Q,OAGhB,SAAgBC,MAAMb,EAAsBnQ,GAG3C,OADY,IAAI,QAAAiR,MAAMd,EAAMnQ,GACf+Q,OAGd,SAAgBG,OAAOf,EAAsBnQ,GAE5C,IAAIkR,EAAS,IAAI,SAAAC,OAAOhB,EAAMnQ,GAE9B,OADAkR,EAAOH,OACAG,EAGR,SAAgBE,OAAOjB,EAAsBnQ,GAG5C,OADa,IAAI,SAAAqR,OAAOlB,EAAMnQ,GAChB+Q,OAKf,SAAgBO,aAAatI,EAAwChJ,GAEpE,eAAAuR,aAAaD,aAAatI,EAAShJ,GAGpC,SAAgBwR,UAAUrR,EAAmBH,GAE5C,eAAAuR,aAAaC,UAAUrR,EAAWH,GAGnC,SAAgByR,WAAWC,EAAqB1R,GAE/C,eAAAuR,aAAaE,WAAWC,EAAa1R,GAGtC,SAAgB2R,SAASC,EAAc5R,GAEtC,eAAAuR,aAAaI,SAASC,EAAM5R,GAG7B,SAAgB6R,WAAWD,EAAc5R,GAExC,eAAAuR,aAAaM,WAAWD,EAAM5R,GAK/B,SAAgB8R,eAEf,OAAO,gBAAAC,cAAcD,eAGtB,SAAgBE,WAEf,OAAO,gBAAAD,cAAcC,WAGtB,SAAgBC,YAEf,OAAO,gBAAAF,cAAcE,YAGtB,SAAgBC,WAEf,OAAO,gBAAAH,cAAcG,WAGtB,SAAgBC,YAEf,OAAO,gBAAAJ,cAAcI,YAGtB,SAAgBC,WAEf,OAAO,gBAAAL,cAAcK,WAGtB,SAAgBC,UAEf,OAAO,gBAAAN,cAAcM,UAGtB,SAAgBC,qBAEf,OAAO,gBAAAP,cAAcO,qBAGtB,SAAgBC,WAEf,OAAO,gBAAAR,cAAcQ,WAGtB,SAAgBC,WAEf,OAAO,gBAAAT,cAAcS,WAGtB,SAAgBC,YAEf,OAAO,gBAAAV,cAAcU,YAGtB,SAAgBC,SAEf,OAAO,gBAAAX,cAAcW,SAGtB,SAAgBC,UAEf,OAAO,gBAAAZ,cAAcY,UAGtB,SAAgBC,YAEf,OAAO,gBAAAb,cAAca,YAGtB,SAAgBC,cAEf,OAAO,gBAAAd,cAAcc,cAiBtB,SAAgBC,UAAU9S,EAA6BC,EAAkDC,GAGxG,OADcE,eAAoBC,gBAAgB6I,IAAKjJ,EAAWC,EAAU,KAAMF,GAInF,SAAgB+S,IAAI9S,EAA2C+S,EAAwBhJ,GAAU,GAEhG,IAAIiJ,EAAiB,GACjBC,EAAc,GACdC,EAAM,GACNC,EAAU,GACVC,EAAQ,GAEI,MAAZL,IAEmB,MAAlBA,EAASM,QACZL,EAAiB,YAAcD,EAASM,MAAQ,KAE9B,MAAfN,EAASO,KACZL,EAAc,SAAWF,EAASO,GAAK,KAEpB,MAAhBP,EAASG,MACZA,EAAM,UAAYH,EAASG,IAAM,KAEV,MAApBH,EAASI,UACZA,EAAUJ,EAASI,SAEI,MAApBJ,EAASQ,UACZH,EAAQ,UAAYL,EAASQ,QAAU,MAGzC,IAAIT,EAAMjK,KAAK,QAAUuK,EAAQ,IAAMJ,EAAiB,IAAMC,EAAc,IAAMC,EAAM,IAAMC,EAAU,UAAU,GAYlH,GAXiB,MAAbnT,IAEuB,iBAAf,GAA4BA,EAAU4I,WAAW,MAAS5I,EAAU4I,WAAW,OACzF5I,EAAY,IAAMA,GAEd+J,EAGJlB,KAAKiK,GAAKU,gBAAgBxT,GAF1B6I,KAAKiK,GAAKW,eAAezT,IAKX,MAAZ+S,GAA2C,MAAvBA,EAASW,WAEhC,IAAK,IAAIC,KAAaZ,EAASW,WAC9B7K,KAAKiK,GAAKtJ,KAAKmK,EAAUtV,KAAMsV,EAAU5U,OAG3C,OAAO+T,EAnhCR,gCAMA,kCAMA,4CAMA,oCAMA,kDAOA,wDAOA,oDAOA,oDAOA,sDAOA,sCAMA,wCAMA,gCAMA,0CAMA,0CAOA,kDAOA,4CAOA,0CAOA,sCAMA,sCAOA,4CAMA,kCAMA,kCAMA,8BAMA,kCAMA,8CAMA,4CAKA,oDAMA,sCAMA,4BAMA,oCAMA,sCAMA,kCAMA,sCAMA,wCAMA,8CAMA,kCAMA,sCAMA,wCAMA,kDAMA,kCAMA,8BAMA,4CAMA,wCAMA,sCAMA,oDAMA,gCAMA,sCAOA,0DAOA,wCAOA,0CAOA,sCAOA,wCAOA,oDAOA,sCAMA,oCAMA,sDAMA,kCAMA,8BAKA,8BAsIAc,OAAOC,GAAGC,OACT,CACCC,QAAS,SAAUhU,GAElB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,QAAA2C,MAAM0I,EAAShJ,IAE3BiU,SAAU,SAAUjU,GAEnB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,SAAA6C,OAAOwI,EAAShJ,IAE5BkU,cAAe,SAAUlU,GAExB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,cAAA+C,YAAYsI,EAAShJ,IAEjCmU,UAAW,SAAUnU,GAEpB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,UAAAiD,QAAQoI,EAAShJ,IAE7BoU,WAAY,SAAUpU,GAErB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,WAAA+D,SAASsH,EAAShJ,IAE9BqU,eAAgB,SAAUrU,GAEzB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,eAAAmG,aAAakF,EAAShJ,IAElCsU,YAAa,SAAUtU,GAEtB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,YAAAiE,UAAUoH,EAAShJ,IAE/BuU,QAAS,SAAUvU,GAElB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,QAAAmE,MAAMkH,EAAShJ,IAE3BwU,aAAc,SAAUxU,GAEvB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,aAAAqE,WAAWgH,EAAShJ,IAEhCyU,WAAY,SAAUzU,GAErB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,WAAAmF,SAASkG,EAAShJ,IAE9B0U,cAAe,SAAU1U,GAExB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,cAAAyF,YAAY4F,EAAShJ,IAEjC2U,SAAU,SAAU3U,GAEnB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,SAAA2F,OAAO0F,EAAShJ,IAE5B4U,SAAU,SAAU5U,GAEnB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,SAAA6F,OAAOwF,EAAShJ,IAE5B6U,OAAQ,SAAU7U,GAEjB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,OAAA+F,KAAKsF,EAAShJ,IAE1B8U,SAAU,SAAU9U,GAEnB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,SAAAiG,OAAOoF,EAAShJ,IAE5B+U,cAAe,SAAU/U,GAExB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,cAAAqG,YAAYgF,EAAShJ,IAEjCgV,kBAAmB,SAAUhV,GAE5B,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,kBAAAuG,gBAAgB8E,EAAShJ,IAErCiV,WAAY,SAAUjV,GAErB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,WAAAyG,SAAS4E,EAAShJ,IAE9BkV,MAAO,SAAUlV,GAEhB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,OAAAwX,KAAKnM,EAAShJ,IAE1BoV,UAAW,SAAUpV,GAEpB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,UAAA6G,QAAQwE,EAAShJ,IAE7BqV,WAAY,SAAUrV,GAErB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,WAAA+G,SAASsE,EAAShJ,IAE9BsV,SAAU,SAAUtV,GAEnB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,SAAAiH,OAAOoE,EAAShJ,IAE5BuV,WAAY,SAAUvV,GAErB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,WAAAmH,SAASkE,EAAShJ,IAE9BwV,YAAa,SAAUxV,GAEtB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,YAAAqH,UAAUgE,EAAShJ,IAE/ByV,eAAgB,SAAUzV,GAEzB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,eAAAuH,aAAa8D,EAAShJ,IAElC0V,SAAU,SAAU1V,GAEnB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,SAAAyH,OAAO4D,EAAShJ,IAE5B2V,WAAY,SAAU3V,GAErB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,WAAA2H,SAAS0D,EAAShJ,IAE9B4V,YAAa,SAAU5V,GAEtB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,YAAA6H,UAAUwD,EAAShJ,IAE/B6V,iBAAkB,SAAU7V,GAE3B,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,iBAAA+H,eAAesD,EAAShJ,IAEpC8V,SAAU,SAAU9V,GAEnB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,SAAAiI,OAAOoD,EAAShJ,IAE5B+V,OAAQ,SAAU/V,GAEjB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,OAAAmI,KAAKkD,EAAShJ,IAE1BgW,cAAe,SAAUhW,GAExB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,cAAAqI,YAAYgD,EAAShJ,IAEjCiW,YAAa,SAAUjW,GAEtB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,YAAAuI,UAAU8C,EAAShJ,IAE/BkW,WAAY,SAAUlW,GAErB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,WAAAyI,SAAS4C,EAAShJ,IAE9BmW,kBAAmB,SAAUnW,GAE5B,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,kBAAA2I,gBAAgB0C,EAAShJ,IAErCoW,QAAS,SAAUpW,GAElB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,QAAA0Y,QAAQrN,EAAShJ,IAE7BsW,WAAY,SAAUtW,GAErB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,WAAAgK,SAASqB,EAAShJ,IAE9BuW,UAAW,SAAUvW,GAEpB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,UAAAkK,QAAQmB,EAAShJ,IAE7BwW,mBAAoB,SAAUxW,GAE7B,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,mBAAAoK,iBAAiBiB,EAAShJ,IAEtCyW,MAAO,SAAUzW,GAEhB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,MAAAuL,IAAIF,EAAShJ,IAEzB0W,SAAU,SAAU1W,GAEnB,IAAIgJ,EAAWrL,KAAa,GAC5B,OAAO,IAAI,SAAAsK,OAAOe,EAAShJ,MAK9B2W,EAAE,KAEgB,IAAIC,iBAAkBC,IAEtCA,EAAeC,QAASC,IAEvBA,EAAUC,aAAaF,QAAQ,CAACG,EAAcC,EAAcC,KAEZ,MAA1CF,EAA6BG,YAE5BH,EAAaI,aAQtB,SAASC,EAAYtO,GAEpB,GAAe,MAAXA,EACJ,CACC,IAEC,GAAkB,MAAdA,EAAQuK,GACZ,CACC,IAAIgE,EAAYvO,EAAQuK,GAAGiE,QAAQ,YAAa,IAAIA,QAAQ,IAAK,IAAIA,QAAQ,IAAK,IAClF,iBAAApP,eAAeqP,OAAOF,GAEtBzO,KAAK,IAAMyO,EAAY,aAAaE,SACpC3O,KAAK,IAAMyO,EAAY,eAAeE,SACtC3O,KAAK,IAAMyO,EAAY,cAAcE,SACrC3O,KAAK,IAAMyO,EAAY,uBAAuBE,SAC9C3O,KAAK,uBAAyByO,GAAWE,UAG3C,MAAOC,IAEP,GAAwB,MAApB1O,EAAQ2O,UAA+C,GAA3B3O,EAAQ2O,SAAS5O,OAChD,OAED,IAAK,IAAI6O,KAAS5O,EAAQ2O,SACzBL,EAAYM,IA/BVN,CAAYL,UAKRY,QAAQlO,SAASC,KAAM,CAAEkO,SAAS,EAAMC,WAAW,MAgC7D,SAAY1X,GAEX,gBACA,kBACA,kBACA,oBACA,sBACA,wBACA,4BACA,gBACA,0BACA,sBACA,4BACA,kBACA,cACA,kBACA,8BACA,4BACA,oCACA,sBACA,YACA,oBACA,sBACA,kBACA,sBACA,wBACA,kBACA,8BACA,sBACA,wBACA,kCACA,kBACA,cACA,4BACA,wBACA,sBACA,oCACA,gBACA,sBACA,oBACA,sCACA,YACA,kBA1CD,CAAYA,gBAAA,QAAAA,kBAAA,QAAAA,gBAAe,KA6C3B,SAAYwJ,GAEX,uBACA,qBACA,mBAJD,CAAYA,oBAAA,QAAAA,sBAAA,QAAAA,oBAAmB,KAS/B,8BAKA,sBAMA,gCAOA,oCAOA,oCAOA,8BASA,wBAMA,oBAMA,sBAOA,sBAQA,kCAKA,4BAKA,8BAKA,0BAKA,8BAOA,kCAKA,0BAKA,4BAKA,0BAKA,4BAKA,0BAKA,wBAKA,8CAKA,0BAKA,0BAKA,4BAKA,sBAKA,wBAKA,4BAKA,gCAKA,SAAYI,GAEX,sCACA,kBACA,kBACA,oBACA,cACA,gBACA,oBACA,wBATD,CAAYA,gBAAA,QAAAA,kBAAA,QAAAA,gBAAe,KAc3B,4BAMA,gBA8CA,MAAM+N,aAUN,SAAgBC,KAAKhY,EAA2C+S,EAAyBhJ,GAAU,GAElG,IAAIiJ,EAAiB,GACjBC,EAAc,GACdC,EAAM,GACNC,EAAU,GACVC,EAAQ,GAEI,MAAZL,IAEmB,MAAlBA,EAASM,QACZL,EAAiB,YAAcD,EAASM,MAAQ,KAE9B,MAAfN,EAASO,KACZL,EAAc,SAAWF,EAASO,GAAK,KAEpB,MAAhBP,EAASG,MACZA,EAAM,UAAYH,EAASG,IAAM,KAEV,MAApBH,EAASI,UACZA,EAAUJ,EAASI,SAEI,MAApBJ,EAASQ,UACZH,EAAQ,UAAYL,EAASQ,QAAU,MAGzC,IAAIyE,EAAOnP,KAAK,SAAWuK,EAAQ,IAAMJ,EAAiB,IAAMC,EAAc,IAAMC,EAAM,IAAMC,EAAU,WAAW,GAYrH,GAXiB,MAAbnT,IAEuB,iBAAf,GAA4BA,EAAU4I,WAAW,MAAS5I,EAAU4I,WAAW,OACzF5I,EAAY,IAAMA,GAEd+J,EAGJlB,KAAKmP,GAAMxE,gBAAgBxT,GAF3B6I,KAAKmP,GAAMvE,eAAezT,IAKZ,MAAZ+S,GAA2C,MAAvBA,EAASW,WAEhC,IAAK,IAAIC,KAAaZ,EAASW,WAC9B7K,KAAKmP,GAAMxO,KAAKmK,EAAUtV,KAAMsV,EAAU5U,OAG5C,OAAOiZ,EA5CR,kBA8CA,MAAMC,cAUN,SAAgBC,KAAKC,EAAsBnY,EAAkD+S,EAAgChJ,GAAU,GAErH,MAAb/J,GAA2C,iBAAf,GAA4BA,EAAU4I,WAAW,MAAS5I,EAAU4I,WAAW,OAC9G5I,EAAY,IAAMA,GAEnB,IAAIgT,EAAiB,GACjBC,EAAc,GACdC,EAAM,GAGM,MAAZH,IAEgB,MAAfA,EAASO,KACZL,EAAc,SAAWF,EAASO,GAAK,KAEpB,MAAhBP,EAASG,MACZA,GAAOH,EAASG,IAAM,KAEE,MAArBH,EAASqF,WAEsB,iBAAtBrF,EAAiB,WAC5BA,EAASqF,SAAWrF,EAASqF,SAAW,MAEzClF,GAAO,cAAgBH,EAASqF,SAAW,KAGtB,MAAlBrF,EAASsF,QACZnF,GAAO,UAAYH,EAASsF,MAAQ,KAEf,MAAlBtF,EAASM,QACZL,GAAkBD,EAASM,OAEL,MAAnBN,EAASuF,SACZpF,GAAO,WAAaH,EAASuF,OAAS,MAIxC,IAAIJ,EAAOrP,KAAK,aAAesP,EAAY,WAAanF,EAAxC,4BACHC,EAAc,YAAcC,EAAM,UAAU,GAUzD,OARiB,MAAblT,IAEE+J,EAGJlB,KAAKqP,GAAM1E,gBAAgBxT,GAF3B6I,KAAKqP,GAAMzE,eAAezT,IAKrBkY,EAhDR,kBAkDA,MAAaK,cAWb,SAAgBC,OAAOxY,EAA0C+S,GAEtC,iBAAf,GAA4B/S,EAAU4I,WAAW,MAAS5I,EAAU4I,WAAW,OACzF5I,EAAY,IAAMA,GAEH,MAAZ+S,IAAkBA,EAAW,IAAI0F,kBACb,MAApB1F,EAASI,UAAiBJ,EAASI,QAAU,IAC3B,MAAlBJ,EAAS2F,QAAe3F,EAAS2F,MAAQ,QACtB,MAAnB3F,EAAS4F,SAAgB5F,EAAS4F,OAAS,QAChB,iBAAnB5F,EAAc,QAAeA,EAAS2F,MAAQ3F,EAAS2F,MAAQ,MAC3C,iBAApB3F,EAAe,SAAeA,EAAS4F,OAAS5F,EAAS4F,OAAS,MAE9E,IAAIH,EAAS3P,KAAK,YAAY4K,eAAezT,GAAW,GACxDwY,EAAOI,MAAMC,SAAW,UAAY9F,EAAS2F,MAAQ,aAAe3F,EAAS4F,OAAS,kBAAoB5F,EAASG,IAEnH,IAAI4F,EAAiC,KACjCC,EAAwBP,EAAOQ,gBAqCnC,GApCAnQ,KAAKkQ,GAAuBE,KAAK,QAAQ/F,IAAI,SAAU,OAC1B,MAAzB6F,IACHD,EAAaC,EAAsBpP,MAEhCoJ,EAASI,QAAQ+F,SAAS,UAAYnG,EAASI,QAAQ+F,SAAS,SAAWnG,EAASI,QAAQ+F,SAAS,UAAYnG,EAASI,QAAQ+F,SAAS,UAE1InG,EAASoG,SAA8B,IAApBpG,EAASoG,WAEP,IAApBpG,EAASoG,SACZpG,EAASoG,OAASX,GAEnB,gBAAAY,cAAcC,MAA0B,IAApBtG,EAASoG,OAAoBX,EAASzF,EAASoG,SAGpEtQ,KAAK2P,GAAQhP,KAAK,MAAOuJ,EAASI,SAClCtK,KAAK2P,GAAQc,GAAG,OAAQ,KAGvBzQ,KAD4B2P,EAAQQ,iBACRC,KAAK,QAAQ/F,IAAI,SAAU,OAE7B,MAAtBH,EAAUwG,UACbxG,EAAUwG,WAEX,gBAAAH,cAAcpJ,WAKfnH,KAAKkK,EAASI,SAASM,eAAeqF,GAEZ,MAAtB/F,EAAUwG,UACbxG,EAAUwG,WAEX,gBAAAH,cAAcpJ,QAGC,MAAZ+C,GAA2C,MAAvBA,EAASW,WAEhC,IAAK,IAAIC,KAAaZ,EAASW,WAC9B7K,KAAK2P,GAAQhP,KAAKmK,EAAUtV,KAAMsV,EAAU5U,OAG9C,OAAOyZ,EAtER,kCAWA,sBA6DA,MAAMC,kBAWN,SAAgBe,GAAGxZ,EAA0CyZ,EAAQ,GAE1C,iBAAf,GAA4BzZ,EAAU4I,WAAW,MAAS5I,EAAU4I,WAAW,OACzF5I,EAAY,IAAMA,GAEnB,IAAK,IAAIlC,EAAI,EAAGA,EAAI2b,EAAO3b,IAC1B+K,KAAK,UAAU4K,eAAezT,GAGhC,SAAgB0Z,GAAG1Z,EAA0CkT,EAAc,GAAII,GAO9E,MAL0B,iBAAf,GAA4BtT,EAAU4I,WAAW,MAAS5I,EAAU4I,WAAW,OACzF5I,EAAY,IAAMA,GAIZ6I,KAAK,QAFU,MAANyK,EAAc,GAAK,QAAUA,EAAK,KAElB,WAAaJ,EAAM,QAAQO,eAAezT,GAAW,GAGtF,SAAgB2Z,OAEf,MAAMC,EAAM,IAAIC,MAAM,KAAKC,QAAQC,IAAIC,GAAS,EAAQC,SAAS,IAAIC,SAAS,EAAG,MAC3Etb,EAAIub,OAAOC,gBAAgB,IAAIC,WAAW,KAIhD,OAHAzb,EAAE,GAAa,GAAPA,EAAE,GAAa,GACvBA,EAAE,GAAa,GAAPA,EAAE,GAAa,IAEhB,IAAIA,EAAE0b,WACXP,IAAI,EAAEC,EAAOO,KAAS,CAAC,EAAG,EAAG,EAAG,IAAIrB,SAASc,GAAS,IAAIJ,EAAIW,GAASX,EAAIW,IAC3EC,KAAK,IA5BR,cASA,cAUA,kBAYA,MAAaC,kBAQb,SAAgBC,WAAW3R,EAAmD4R,GAAe,EAAMC,GAE1E,kBAAb,IAAwB7R,OAAU8R,GAC7C,gBAAAzB,cAAcC,KAAKtQ,EAAS4R,EAAcC,GAG3C,SAAgBE,WAAWF,GAE1B,gBAAAxB,cAAcpJ,KAAK4K,GAKpB,SAAgBG,OAEfnK,QAAQ,qDACNoK,KAAK,IAAMjK,MAAM,oHACjBkK,MAAM,IAAMlK,MAAM,4EAzBrB,0CAQA,8BAMA,8BAOA,kBAOA,SAAY9G,GAEX,0BACA,8CACA,uCACA,4CACA,kCACA,sBACA,8CACA,4CATD,CAAYA,YAAA,QAAAA,cAAA,QAAAA,YAAW,KAkBvB,SAAYC,GAEX,+BACA,iCACA,6BACA,oCACA,mCACA,+BACA,wCACA,+BACA,iCACA,6BACA,mCACA,iCACA,iCAdD,CAAYA,gBAAA,QAAAA,kBAAA,QAAAA,gBAAe,KAmB3B,SAAYC,GAGX,yBACA,yCACA,2CACA,qCACA,qCACA,uCACA,iCACA,kCACA,qCACA,yDACA,yDACA,qCACA,2CACA,uCACA,2DACA,+DACA,oDACA,2CACA,iCACA,kCACA,sBACA,qCAIA,gCACA,kCACA,2CACA,2CACA,2CACA,yCACA,wBACA,gCACA,yCACA,0BACA,mCACA,0BACA,qCACA,0BACA,0BACA,mCACA,wBACA,uCACA,qCACA,wBACA,4BAIA,yCACA,kCACA,yCACA,6CACA,yCACA,2CACA,8BACA,qCACA,qCACA,gDACA,kCACA,qCACA,qCACA,uCACA,iCACA,gDACA,2CACA,qCACA,mCACA,yCACA,qCACA,mCACA,yCACA,6BACA,4BACA,yCACA,yCACA,2CACA,qCACA,8BACA,yCACA,qDACA,uCACA,uCACA,oCACA,mDACA,4BACA,kDACA,4BACA,4BACA,4CACA,6CACA,0BACA,qCACA,4BACA,kCACA,gCACA,yCACA,2CACA,kCACA,uCACA,kCACA,0BACA,oCACA,uCACA,4BAIA,kCACA,6BACA,uCACA,yCACA,gCACA,kCAIA,yBACA,4BACA,kCACA,mDACA,kCACA,8BACA,mCACA,wCACA,8BACA,wBACA,mCAIA,8BACA,2CACA,yCACA,0BACA,qCACA,2CACA,2CACA,qCACA,uCACA,qCACA,yCACA,uCACA,qCACA,qCACA,iCACA,iCACA,6CACA,qCACA,mCACA,uCACA,8BACA,0BACA,iDACA,uCACA,8BACA,uCACA,0CACA,gCACA,yCACA,yCACA,8BAIA,0BACA,4BACA,4BAIA,gCACA,qCACA,gCACA,kCACA,oCACA,+CACA,4BACA,2CACA,qCAIA,4BACA,4BACA,qCACA,0BAIA,wBACA,kCACA,yCAIA,8BACA,6CACA,qCACA,4CACA,qCACA,4CACA,uCACA,8CACA,iCACA,wCACA,0BACA,wDACA,+CACA,0DACA,uCACA,kDACA,qCACA,0BACA,qCACA,+BACA,mCACA,+BACA,6CACA,uDACA,6CACA,yCACA,0BACA,mCACA,6CACA,gDAIA,iDACA,4DACA,0DACA,8BACA,gCACA,uCACA,wBACA,yCACA,gDACA,+BACA,kCACA,4BACA,gCACA,yCACA,yCACA,2CACA,kCACA,sCACA,iDACA,4DACA,iDACA,sCACA,kCACA,4BACA,8BACA,yCACA,2DACA,4BACA,uCAIA,oCAIA,gCACA,oCACA,qDACA,uCACA,8CACA,4BACA,4BACA,8BACA,wBACA,0CACA,+DACA,sCACA,mDACA,0DACA,4BACA,0BACA,qCACA,0BACA,4BACA,kCAIA,kCAIA,0BACA,iCACA,sCACA,6BACA,8BACA,4BACA,mCACA,oDACA,gDACA,8BACA,uCAIA,uCACA,iCACA,kCACA,qDACA,wCACA,sEACA,8BACA,4BACA,mCACA,uCACA,kDACA,yCACA,0BACA,gCACA,8BACA,0BACA,mCACA,+BACA,gCACA,4BACA,yCACA,yCACA,qCACA,0BACA,2CACA,yCACA,wCACA,0BAIA,4BACA,qCACA,8BACA,wBACA,0BACA,4BACA,uCACA,mCACA,oCACA,4BACA,4CACA,qCACA,uCACA,yDACA,4BAIA,uCACA,8BACA,8BACA,mCACA,0BACA,qCACA,qCACA,uCACA,gDACA,yDACA,mCACA,qCACA,mCACA,4CACA,yCACA,4BACA,uCACA,2CACA,iCACA,qCAIA,4BACA,uCACA,8BACA,uCACA,qCACA,qCACA,yCACA,yCAIA,0BACA,iDACA,mCACA,qCACA,8BAIA,4BAhZD,CAAYA,eAAA,QAAAA,iBAAA,QAAAA,eAAc,KAsZ1B,SAAYC,GAGX,yBACA,yCACA,2CACA,qCACA,qCACA,uCACA,iCACA,kCACA,qCACA,yDACA,yDACA,qCACA,2CACA,uCACA,2DACA,+DACA,oDACA,2CACA,iCACA,kCACA,sBACA,qCAIA,gCACA,kCACA,2CACA,2CACA,2CACA,yCACA,wBACA,gCACA,yCACA,0BACA,mCACA,0BACA,qCACA,0BACA,0BACA,mCACA,wBACA,uCACA,qCACA,wBACA,4BAIA,yCACA,kCACA,yCACA,6CACA,yCACA,2CACA,8BACA,qCACA,qCACA,gDACA,kCACA,qCACA,qCACA,uCACA,iCACA,gDACA,2CACA,qCACA,mCACA,yCACA,qCACA,mCACA,yCACA,6BACA,4BACA,yCACA,yCACA,2CACA,qCACA,8BACA,yCACA,qDACA,uCACA,uCACA,oCACA,mDACA,4BACA,kDACA,4BACA,4BACA,4CACA,6CACA,0BACA,qCACA,4BACA,kCACA,gCACA,yCACA,2CACA,kCACA,uCACA,kCACA,0BACA,oCACA,uCACA,4BAIA,kCACA,6BACA,uCACA,yCACA,gCACA,kCAIA,yBACA,4BACA,kCACA,mDACA,kCACA,8BACA,mCACA,wCACA,8BACA,wBACA,mCAIA,8BACA,2CACA,yCACA,0BACA,qCACA,2CACA,2CACA,qCACA,uCACA,qCACA,yCACA,uCACA,qCACA,qCACA,iCACA,iCACA,6CACA,qCACA,mCACA,uCACA,8BACA,0BACA,iDACA,uCACA,8BACA,uCACA,0CACA,gCACA,yCACA,yCACA,8BAIA,0BACA,4BACA,4BAIA,gCACA,qCACA,gCACA,kCACA,oCACA,+CACA,4BACA,2CACA,qCAIA,4BACA,4BACA,qCACA,0BAIA,wBACA,kCACA,yCAIA,8BACA,6CACA,qCACA,4CACA,qCACA,4CACA,uCACA,8CACA,iCACA,wCACA,0BACA,wDACA,+CACA,0DACA,uCACA,kDACA,qCACA,0BACA,qCACA,+BACA,mCACA,+BACA,6CACA,uDACA,6CACA,yCACA,0BACA,mCACA,6CACA,gDAIA,iDACA,4DACA,0DACA,8BACA,gCACA,uCACA,wBACA,yCACA,gDACA,+BACA,kCACA,4BACA,gCACA,yCACA,yCACA,2CACA,kCACA,sCACA,iDACA,4DACA,iDACA,sCACA,kCACA,4BACA,8BACA,yCACA,2DACA,4BACA,uCAIA,oCAIA,gCACA,oCACA,qDACA,uCACA,8CACA,4BACA,4BACA,wBACA,8BACA,0CACA,+DACA,sCACA,mDACA,0DACA,4BACA,0BACA,qCACA,0BACA,4BACA,kCAIA,kCAIA,0BACA,iCACA,sCACA,6BACA,8BACA,4BACA,mCACA,oDACA,gDACA,8BACA,uCAIA,uCACA,iCACA,kCACA,qDACA,wCACA,sEACA,8BACA,4BACA,mCACA,uCACA,kDACA,yCACA,0BACA,gCACA,8BACA,0BACA,mCACA,+BACA,gCACA,4BACA,yCACA,yCACA,qCACA,4BACA,0BACA,2CACA,yCACA,wCACA,0BAIA,4BACA,qCACA,8BACA,wBACA,0BACA,4BACA,uCACA,mCACA,oCACA,4BACA,4CACA,qCACA,uCACA,yDACA,4BAIA,uCACA,8BACA,8BACA,mCACA,0BACA,qCACA,qCACA,uCACA,gDACA,yDACA,mCACA,qCACA,mCACA,4CACA,yCACA,4BACA,uCACA,2CACA,iCACA,qCAIA,4BACA,uCACA,8BACA,uCACA,qCACA,qCACA,yCACA,yCAIA,0BACA,iDACA,mCACA,qCACA,8BAIA,4BAjZD,CAAYA,eAAA,QAAAA,iBAAA,QAAAA,eAAc,KAuZ1B,SAAYC,GAGX,2BACA,2CACA,6CACA,uCACA,uCACA,yCACA,mCACA,oCACA,uCACA,2DACA,2DACA,uCACA,6CACA,yCACA,6DACA,iEACA,sDACA,6CACA,mCACA,oCACA,wBACA,uCAIA,kCACA,oCACA,6CACA,6CACA,6CACA,2CACA,0BACA,kCACA,2CACA,4BACA,qCACA,4BACA,uCACA,4BACA,4BACA,qCACA,0BACA,yCACA,uCACA,0BACA,8BAIA,2CACA,oCACA,2CACA,+CACA,2CACA,6CACA,gCACA,uCACA,uCACA,kDACA,oCACA,uCACA,uCACA,yCACA,mCACA,kDACA,6CACA,uCACA,qCACA,2CACA,uCACA,qCACA,2CACA,+BACA,8BACA,2CACA,2CACA,6CACA,uCACA,gCACA,2CACA,uDACA,yCACA,yCACA,sCACA,qDACA,8BACA,oDACA,8BACA,8BACA,8CACA,+CACA,4BACA,uCACA,8BACA,oCACA,kCACA,2CACA,6CACA,oCACA,yCACA,oCACA,4BACA,sCACA,yCACA,8BAIA,oCACA,+BACA,yCACA,2CACA,kCACA,oCAIA,2BACA,8BACA,oCACA,qDACA,oCACA,gCACA,qCACA,0CACA,gCACA,0BACA,qCAIA,gCACA,6CACA,2CACA,4BACA,uCACA,6CACA,6CACA,uCACA,yCACA,uCACA,2CACA,yCACA,uCACA,uCACA,mCACA,mCACA,+CACA,uCACA,qCACA,yCACA,gCACA,4BACA,mDACA,yCACA,gCACA,yCACA,4CACA,kCACA,2CACA,2CACA,gCAIA,4BACA,8BACA,8BAIA,kCACA,uCACA,kCACA,oCACA,sCACA,iDACA,8BACA,6CACA,uCAIA,8BACA,8BACA,uCACA,4BAIA,0BACA,oCACA,2CAIA,gCACA,+CACA,uCACA,8CACA,uCACA,8CACA,yCACA,gDACA,mCACA,0CACA,4BACA,0DACA,iDACA,4DACA,yCACA,oDACA,uCACA,4BACA,uCACA,iCACA,qCACA,iCACA,+CACA,yDACA,+CACA,2CACA,4BACA,qCACA,+CACA,kDAIA,mDACA,8DACA,4DACA,gCACA,kCACA,yCACA,0BACA,2CACA,kDACA,iCACA,oCACA,8BACA,kCACA,2CACA,2CACA,6CACA,oCACA,wCACA,mDACA,8DACA,mDACA,wCACA,oCACA,8BACA,gCACA,2CACA,6DACA,8BACA,yCAIA,sCAIA,kCACA,sCACA,uDACA,yCACA,gDACA,8BACA,8BACA,0BACA,gCACA,4CACA,iEACA,wCACA,qDACA,4DACA,8BACA,4BACA,uCACA,4BACA,8BACA,oCAIA,oCAIA,4BACA,mCACA,wCACA,+BACA,gCACA,8BACA,qCACA,sDACA,kDACA,gCACA,yCAIA,yCACA,mCACA,oCACA,uDACA,0CACA,wEACA,gCACA,8BACA,qCACA,yCACA,oDACA,2CACA,4BACA,kCACA,gCACA,4BACA,qCACA,iCACA,kCACA,8BACA,2CACA,2CACA,uCACA,8BACA,4BACA,6CACA,2CACA,0CACA,4BAIA,8BACA,uCACA,gCACA,0BACA,4BACA,8BACA,yCACA,qCACA,sCACA,8BACA,8CACA,uCACA,yCACA,2DACA,8BAIA,yCACA,gCACA,gCACA,qCACA,4BACA,uCACA,uCACA,yCACA,kDACA,2DACA,qCACA,uCACA,qCACA,8CACA,2CACA,8BACA,yCACA,6CACA,mCACA,uCAIA,8BACA,yCACA,gCACA,yCACA,uCACA,uCACA,2CACA,2CAIA,4BACA,mDACA,qCACA,uCACA,gCAIA,8BAjZD,CAAYA,iBAAA,QAAAA,mBAAA,QAAAA,iBAAgB,KAuZ5B,SAAYC,GAGX,2BACA,2CACA,6CACA,uCACA,uCACA,yCACA,mCACA,oCACA,uCACA,2DACA,2DACA,uCACA,6CACA,yCACA,6DACA,iEACA,sDACA,6CACA,mCACA,oCACA,wBACA,uCAIA,kCACA,oCACA,6CACA,6CACA,6CACA,2CACA,0BACA,kCACA,2CACA,4BACA,qCACA,4BACA,uCACA,4BACA,4BACA,qCACA,0BACA,yCACA,uCACA,0BACA,8BAIA,2CACA,oCACA,2CACA,+CACA,2CACA,6CACA,gCACA,uCACA,uCACA,kDACA,oCACA,uCACA,uCACA,yCACA,mCACA,kDACA,6CACA,uCACA,qCACA,2CACA,uCACA,qCACA,2CACA,+BACA,8BACA,2CACA,2CACA,6CACA,uCACA,gCACA,2CACA,uDACA,yCACA,yCACA,sCACA,qDACA,8BACA,oDACA,8BACA,8BACA,8CACA,+CACA,4BACA,uCACA,8BACA,oCACA,kCACA,2CACA,6CACA,oCACA,yCACA,oCACA,4BACA,sCACA,yCACA,8BAIA,oCACA,+BACA,yCACA,2CACA,kCACA,oCAIA,2BACA,8BACA,oCACA,qDACA,oCACA,gCACA,qCACA,0CACA,gCACA,0BACA,qCAIA,gCACA,6CACA,2CACA,4BACA,uCACA,6CACA,6CACA,uCACA,yCACA,uCACA,2CACA,yCACA,uCACA,uCACA,mCACA,mCACA,+CACA,uCACA,qCACA,yCACA,gCACA,4BACA,mDACA,yCACA,gCACA,yCACA,4CACA,kCACA,2CACA,2CACA,gCAIA,4BACA,8BACA,8BAIA,kCACA,uCACA,kCACA,oCACA,sCACA,iDACA,8BACA,6CACA,uCAIA,8BACA,8BACA,uCACA,4BAIA,0BACA,oCACA,2CAIA,gCACA,+CACA,uCACA,8CACA,uCACA,8CACA,yCACA,gDACA,mCACA,0CACA,4BACA,0DACA,iDACA,4DACA,yCACA,oDACA,uCACA,4BACA,uCACA,iCACA,qCACA,iCACA,+CACA,yDACA,+CACA,2CACA,4BACA,qCACA,+CACA,kDAIA,mDACA,8DACA,4DACA,gCACA,kCACA,yCACA,0BACA,2CACA,kDACA,iCACA,oCACA,8BACA,kCACA,2CACA,2CACA,6CACA,oCACA,wCACA,mDACA,8DACA,mDACA,wCACA,oCACA,8BACA,gCACA,2CACA,6DACA,8BACA,yCAIA,sCAIA,kCACA,sCACA,uDACA,yCACA,gDACA,8BACA,8BACA,0BACA,gCACA,4CACA,iEACA,wCACA,qDACA,4DACA,8BACA,4BACA,uCACA,4BACA,8BACA,oCAIA,oCAIA,4BACA,mCACA,wCACA,+BACA,gCACA,8BACA,qCACA,sDACA,kDACA,gCACA,yCAIA,yCACA,mCACA,oCACA,uDACA,0CACA,wEACA,gCACA,8BACA,qCACA,yCACA,oDACA,2CACA,4BACA,kCACA,gCACA,4BACA,qCACA,iCACA,kCACA,8BACA,2CACA,2CACA,uCACA,8BACA,4BACA,6CACA,2CACA,0CACA,4BAIA,8BACA,uCACA,gCACA,0BACA,4BACA,8BACA,yCACA,qCACA,sCACA,8BACA,8CACA,uCACA,yCACA,2DACA,8BAIA,yCACA,gCACA,gCACA,qCACA,4BACA,uCACA,uCACA,yCACA,kDACA,2DACA,qCACA,uCACA,qCACA,8CACA,2CACA,8BACA,yCACA,6CACA,mCACA,uCAIA,8BACA,yCACA,gCACA,yCACA,uCACA,uCACA,2CACA,2CAIA,4BACA,mDACA,qCACA,uCACA,gCAIA,8BAjZD,CAAYA,iBAAA,QAAAA,mBAAA,QAAAA,iBAAgB,KAuZ5B,SAAYC,GAGX,wBACA,wCACA,0CACA,oCACA,oCACA,sCACA,gCACA,iCACA,oCACA,wDACA,wDACA,oCACA,0CACA,sCACA,0DACA,8DACA,mDACA,0CACA,gCACA,iCACA,qBACA,oCAIA,+BACA,iCACA,0CACA,0CACA,0CACA,wCACA,uBACA,+BACA,wCACA,yBACA,kCACA,yBACA,oCACA,yBACA,yBACA,kCACA,uBACA,sCACA,oCACA,uBACA,2BAIA,wCACA,iCACA,wCACA,4CACA,wCACA,0CACA,6BACA,oCACA,oCACA,+CACA,iCACA,oCACA,oCACA,sCACA,gCACA,+CACA,0CACA,oCACA,kCACA,wCACA,oCACA,kCACA,wCACA,4BACA,2BACA,wCACA,wCACA,0CACA,oCACA,6BACA,wCACA,oDACA,sCACA,sCACA,mCACA,kDACA,2BACA,iDACA,2BACA,2BACA,2CACA,4CACA,yBACA,oCACA,2BACA,iCACA,+BACA,wCACA,0CACA,iCACA,sCACA,iCACA,yBACA,mCACA,sCACA,2BAIA,iCACA,4BACA,sCACA,wCACA,+BACA,iCAIA,wBACA,2BACA,iCACA,kDACA,iCACA,6BACA,kCACA,uCACA,6BACA,uBACA,kCAIA,6BACA,0CACA,wCACA,yBACA,oCACA,0CACA,0CACA,oCACA,sCACA,oCACA,wCACA,sCACA,oCACA,oCACA,gCACA,gCACA,4CACA,oCACA,kCACA,sCACA,6BACA,yBACA,gDACA,sCACA,6BACA,sCACA,yCACA,+BACA,wCACA,wCACA,6BAIA,yBACA,2BACA,2BAIA,+BACA,oCACA,+BACA,iCACA,mCACA,8CACA,2BACA,0CACA,oCAIA,2BACA,2BACA,oCACA,yBAIA,uBACA,iCACA,wCAIA,6BACA,4CACA,oCACA,2CACA,oCACA,2CACA,sCACA,6CACA,gCACA,uCACA,yBACA,uDACA,8CACA,yDACA,sCACA,iDACA,oCACA,yBACA,oCACA,8BACA,kCACA,8BACA,4CACA,sDACA,4CACA,wCACA,yBACA,kCACA,4CACA,+CAIA,gDACA,2DACA,yDACA,6BACA,+BACA,sCACA,uBACA,wCACA,+CACA,8BACA,iCACA,2BACA,+BACA,wCACA,wCACA,0CACA,iCACA,qCACA,gDACA,2DACA,gDACA,qCACA,iCACA,2BACA,6BACA,wCACA,0DACA,2BACA,sCAIA,mCAIA,+BACA,mCACA,oDACA,sCACA,6CACA,2BACA,2BACA,uBACA,6BACA,yCACA,8DACA,qCACA,kDACA,yDACA,2BACA,yBACA,oCACA,yBACA,2BACA,iCAIA,iCAIA,yBACA,gCACA,qCACA,4BACA,6BACA,2BACA,kCACA,mDACA,+CACA,6BACA,sCAIA,sCACA,gCACA,iCACA,oDACA,uCACA,qEACA,6BACA,2BACA,kCACA,sCACA,iDACA,wCACA,yBACA,+BACA,6BACA,yBACA,kCACA,8BACA,+BACA,2BACA,wCACA,wCACA,oCACA,2BACA,yBACA,0CACA,wCACA,uCACA,yBAIA,2BACA,oCACA,6BACA,uBACA,yBACA,2BACA,sCACA,kCACA,mCACA,2BACA,2CACA,oCACA,sCACA,wDACA,2BAIA,sCACA,6BACA,6BACA,kCACA,yBACA,oCACA,oCACA,sCACA,+CACA,wDACA,kCACA,oCACA,kCACA,2CACA,wCACA,2BACA,sCACA,0CACA,gCACA,oCAIA,2BACA,sCACA,6BACA,sCACA,oCACA,oCACA,wCACA,wCAIA,yBACA,gDACA,kCACA,oCACA,6BAIA,2BAjZD,CAAYA,cAAA,QAAAA,gBAAA,QAAAA,cAAa,KAyZzB,SAAYC,GAEX,mBACA,iBACA,qBACA,uBALD,CAAYA,aAAA,QAAAA,eAAA,QAAAA,aAAY,KAQxB,SAAYC,GAEX,+BACA,2BAHD,CAAYA,gBAAA,QAAAA,kBAAA,QAAAA,gBAAe,KAM3B,MAAayQ,eAAb,oCAYA,SAAYxQ,GAEX,mBACA,eACA,mBAJD,CAAYA,mBAAA,QAAAA,qBAAA,QAAAA,mBAAkB,KAO9B,SAAYC,GAEX,kBACA,kBACA,kBACA,kBACA,gBACA,kBACA,gBARD,CAAYA,gBAAA,QAAAA,kBAAA,QAAAA,gBAAe,KAa3B,SAAYC,GAEX,gCACA,gCACA,8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6BH,iBAA1C,kDAEA,MAAaI,gCAAgC,SAAA7B,iBAA7C,wDAOA,MAAavV,qBAAqB,SAAAgC,kBAAlC,kCA8BA,SAAYoE,GAEX,qBACA,eACA,uBACA,iCACA,uBACA,iCACA,2BACA,2BACA,+BACA,qBACA,0BACA,8BAbD,CAAYA,yBAAA,QAAAA,2BAAA,QAAAA,yBAAwB,KAgBpC,SAAYC,GAEX,mBACA,qBAHD,CAAYA,0BAAA,QAAAA,4BAAA,QAAAA,0BAAyB,KAMrC,SAAYC,GAEX,qBACA,uBAHD,CAAYA,4BAAA,QAAAA,8BAAA,QAAAA,4BAA2B,KAQvC,SAAYC,GAEX,gBACA,cACA,cACA,cACA,kBACA,wBACA,0BACA,0BACA,sBACA,0BACA,wBACA,0BACA,4BACA,8BACA,wBACA,oBACA,0BACA,oBACA,sBACA,cACA,YACA,cACA,gBACA,wBACA,wBACA,mCACA,gBACA,oBACA,oBACA,wBACA,gBACA,gBACA,sBACA,4BACA,cACA,YACA,oBACA,oBACA,wBACA,UACA,wBACA,gCACA,4BACA,wBACA,4BACA,uBACA,8BACA,8BACA,iCACA,8BAnDD,CAAYA,iBAAA,QAAAA,mBAAA,QAAAA,iBAAgB,KAsD5B,SAAYC,GAEX,sBACA,oBACA,wBACA,cALD,CAAYA,wBAAA,QAAAA,0BAAA,QAAAA,wBAAuB,KAQnC,SAAYC,GAEX,0BACA,wBACA,6BACA,+BACA,yBACA,2BACA,yBACA,yBACA,2BACA,kBACA,wBACA,6BACA,+BACA,yBACA,6BACA,gBACA,oBACA,0BACA,cACA,mCACA,mCACA,gBACA,cACA,qBACA,6BACA,cACA,aACA,cACA,0BACA,mBACA,iBACA,wBACA,gBACA,yBACA,aACA,cACA,yBACA,oBACA,gBACA,gBACA,cACA,kBACA,mBACA,kBACA,kBACA,kBACA,2BACA,6BACA,kBACA,0BACA,gBACA,cACA,kBACA,kBACA,kBACA,oBACA,mBACA,qBA3DD,CAAYA,gBAAA,QAAAA,kBAAA,QAAAA,gBAAe,KA8D3B,MAAa4Q,oBAAb,8CASA,MAAaC,wBAAb,sDAcA,SAAY5Q,GAEX,uBACA,6BACA,iCACA,uBACA,iCACA,2BACA,2BACA,+BACA,qBACA,yBAXD,CAAYA,yBAAA,QAAAA,2BAAA,QAAAA,yBAAwB,KAcpC,MAAa6Q,kCAAb,0EAQA,SAAY5Q,GAEX,qBACA,uBAHD,CAAYA,+BAAA,QAAAA,iCAAA,QAAAA,+BAA8B,KAM1C,SAAYC,GAEX,yBACA,6BAHD,CAAYA,mCAAA,QAAAA,qCAAA,QAAAA,mCAAkC,KAM9C,MAAa4Q,0BAAb,0DAQA,MAAaC,gCAAgC,SAAAzV,kBAA7C,wDA0BA,SAAY6E,GAEX,mBACA,iCACA,+BAJD,CAAYA,qBAAA,QAAAA,uBAAA,QAAAA,qBAAoB,KAOhC,SAAYC,GAEX,iBACA,mBAHD,CAAYA,sBAAA,QAAAA,wBAAA,QAAAA,sBAAqB,KAMjC,SAAYC,GAEX,iBACA,mBAHD,CAAYA,kBAAA,QAAAA,oBAAA,QAAAA,kBAAiB,KAM7B,SAAYC,GAEX,6BACA,+BAHD,CAAYA,mBAAA,QAAAA,qBAAA,QAAAA,mBAAkB,KAM9B,SAAYC,GAEX,mBACA,yBAHD,CAAYA,aAAA,QAAAA,eAAA,QAAAA,aAAY,KAMxB,SAAYC,GAEX,yBACA,qBACA,iBACA,iBACA,iBACA,mBAPD,CAAYA,kBAAA,QAAAA,oBAAA,QAAAA,kBAAiB,KAU7B,SAAYC,GAEX,cACA,kBACA,gBAJD,CAAYA,cAAA,QAAAA,gBAAA,QAAAA,cAAa,KAOzB,SAAYC,GAEX,uBACA,uBACA,2BACA,+BACA,2BACA,mBACA,mBACA,2BACA,2BACA,yBACA,wBACA,gCACA,sBACA,sBACA,wBACA,oBACA,oCACA,4BACA,oCACA,wDACA,4CACA,sBAvBD,CAAYA,mBAAA,QAAAA,qBAAA,QAAAA,mBAAkB,KA0B9B,SAAYC,GAEX,uBACA,mBACA,yBAJD,CAAYA,uBAAA,QAAAA,yBAAA,QAAAA,uBAAsB,KAOlC,SAAYC,GAEX,iBACA,uBACA,6BACA,qBACA,uDACA,uBACA,uBACA,iCACA,uBACA,iCACA,4BACA,4BACA,gCACA,sBACA,0BAhBD,CAAYA,oBAAA,QAAAA,sBAAA,QAAAA,oBAAmB,KAmB/B,SAAYC,GAEX,iCACA,2BACA,2BACA,yBALD,CAAYA,uBAAA,QAAAA,yBAAA,QAAAA,uBAAsB,KAQlC,SAAYC,GAEX,iCACA,2BACA,2BACA,yBALD,CAAYA,yBAAA,QAAAA,2BAAA,QAAAA,yBAAwB,KAQpC,MAAakQ,qBAAb,gDAOA,MAAaC,kBAAb,0CAMA,MAAaC,iBAAb,wCASA,MAAaC,4BAAb,8DAQA,MAAaC,8BAAb,kEAYA,MAAaC,yBAAb,wDAWA,MAAaC,8BAA8B,SAAAzC,iBAA3C,oDAMA,MAAa0C,wBAAwB,SAAA1C,iBAArC,wCAQA,MAAa2C,YAAb,8BA0CA,MAAaC,2BAA2B,OAAAC,sBAAxC,8CAUA,MAAaC,iBAAb,wCAoCA,SAAY5Q,GAEX,mBACA,uBACA,qBAJD,CAAYA,yBAAA,QAAAA,2BAAA,QAAAA,yBAAwB,KAOpC,MAAa6Q,0BAAb,0DASA,MAAaC,sBAAb,kDAWA,MAAaC,yBAAb,wDASA,SAAY9Q,GAEX,0BACA,sBAHD,CAAYA,sBAAA,QAAAA,wBAAA,QAAAA,sBAAqB,KAMjC,SAAYC,GAEX,mBACA,qBACA,eACA,mBALD,CAAYA,8BAAA,QAAAA,gCAAA,QAAAA,8BAA6B,KAQzC,MAAa8Q,6BAAb,gEAQA,MAAaC,qBAAb,gDAUA,MAAaC,wCAAwC,SAAApD,iBAArD,wEAQA,MAAaqD,yBAAb,wDAQA,MAAaC,wBAAb,sDASA,MAAaC,yBAAb,wDAMA,MAAaC,mCAAb,4EASA,MAAaC,gBAAb,sCAQA,MAAaC,+BAAb,oEAMA,MAAaC,oBAAb,8CAQA,MAAaC,8BAAb,kEASA,MAAaC,mBAAb,4CAMA,SAAYxR,GAEX,uBACA,uBACA,yBACA,6BACA,2BACA,uBACA,2BARD,CAAYA,cAAA,QAAAA,gBAAA,QAAAA,cAAa,KAWzB,MAAayR,eAAb,oCAMA,SAAYxR,GAEX,iBACA,mBACA,6BAJD,CAAYA,kBAAA,QAAAA,oBAAA,QAAAA,kBAAiB,KAO7B,MAAayR,sBAAb,kDAYA,MAAaC,cAcZ,eAEC,OAAOC,KAAKC,kCAAkC,IAAID,KAAKviB,KAAKyiB,OAAQ,IAAIF,KAAKviB,KAAK0iB,OAhBpF,oCAoBA,MAAaC,oBAAb,8CAMA,SAAY9R,GAEX,2BACA,2BACA,qBACA,+BALD,CAAYA,4BAAA,QAAAA,8BAAA,QAAAA,4BAA2B,KAUvC,MAAa8B,iBAAb,wCAoBA,SAAY7B,GAEX,yBACA,yBACA,mBACA,yBACA,qBAND,CAAYA,iBAAA,QAAAA,mBAAA,QAAAA,iBAAgB,KAS5B,SAAYC,GAEX,oBACA,wBACA,sBACA,0BACA,8BACA,4BACA,4BACA,sBACA,4BACA,0BACA,oBACA,0BACA,8BAdD,CAAYA,qBAAA,QAAAA,uBAAA,QAAAA,qBAAoB,KAiBhC,SAAYC,GAEX,mBACA,yBACA,uBACA,6BALD,CAAYA,kBAAA,QAAAA,oBAAA,QAAAA,kBAAiB,KAQ7B,SAAYC,GAEX,mBACA,yBACA,yBACA,yBALD,CAAYA,kBAAA,QAAAA,oBAAA,QAAAA,kBAAiB,KAY7B,SAAYC,GAEX,qBACA,qBACA,qBACA,qBALD,CAAYA,kBAAA,QAAAA,oBAAA,QAAAA,kBAAiB,KAQ7B,SAAYC,GAEX,yBACA,qBACA,qBACA,mBACA,qBAND,CAAYA,kBAAA,QAAAA,oBAAA,QAAAA,kBAAiB,KAS7B,SAAYC,GAEX,yBACA,yBACA,mBACA,yBACA,qBAND,CAAYA,gBAAA,QAAAA,kBAAA,QAAAA,gBAAe,KAS3B,SAAYC,GAEX,oBACA,wBACA,sBACA,0BACA,8BACA,4BACA,4BACA,sBACA,4BACA,0BACA,oBACA,0BACA,8BAdD,CAAYA,oBAAA,QAAAA,sBAAA,QAAAA,oBAAmB,KAmB/B,MAAauR,gBAAb,sCAkBA,MAAaC,qBAAb,gDA6BA,MAAaC,+BAAb,oEAQA,MAAaC,4BAAb,8DAKA,MAAaC,0BAOZ,iBAEChjB,KAAKijB,oBAAqB,GAT5B,4DAaA,SAAY3R,GAEX,6BACA,qBACA,uBACA,uBACA,iCACA,uBACA,iCACA,2BACA,2BACA,+BACA,sBACA,0BAbD,CAAYA,wBAAA,QAAAA,0BAAA,QAAAA,wBAAuB,KAgBnC,MAAa4R,cAAb,kCAUA,MAAaC,8BAA8BP,gBAA3C,oDAKA,MAAaQ,yBAAb,wDAWA,SAAY7R,GAEX,iCACA,uDACA,mCAJD,CAAYA,aAAA,QAAAA,eAAA,QAAAA,aAAY,KAOxB,SAAYC,GAEX,yBACA,2BACA,+BAJD,CAAYA,wBAAA,QAAAA,0BAAA,QAAAA,wBAAuB,KAOnC,SAAYC,GAEX,uBACA,uBACA,2BACA,+BACA,2BACA,mBACA,mBACA,2BACA,2BACA,yBACA,sBAZD,CAAYA,uBAAA,QAAAA,yBAAA,QAAAA,uBAAsB,KAelC,SAAYC,GAEX,cACA,kBACA,gBAJD,CAAYA,kBAAA,QAAAA,oBAAA,QAAAA,kBAAiB,KAO7B,MAAa2R,wBAAb,sDAOA,MAAaC,WAAb,4BASA,SAAY3R,GAEX,+BACA,iCACA,2BACA,yBACA,kCACA,kDACA,2CACA,+CATD,CAAYA,YAAA,QAAAA,cAAA,QAAAA,YAAW,KAcvB,MAAa4R,sBAqSb,SAAgBC,UAAU3H,GAEzB4H,OAAOC,QAAU,CAACC,EAAqBC,EAAcC,EAAiBC,EAAmBC,KAExF,GAAgB,MAAZlI,EACJ,CACC,IAAImI,EAAQ,IAAIC,eAQhB,OAPAD,EAAME,QAAUP,EAChBK,EAAMJ,IAAMA,EACZI,EAAMG,WAAaN,EACnBG,EAAMI,aAAeN,EACrBE,EAAMD,MAAQA,EACdlI,EAASmI,IAEF,EAER,OAAO,GArTT,kDAQA,SAAYpS,GAEX,YACA,cAHD,CAAYA,oBAAA,QAAAA,sBAAA,QAAAA,oBAAmB,KAQ/B,SAAYC,GAEX,yBACA,yBACA,+BAJD,CAAYA,8BAAA,QAAAA,gCAAA,QAAAA,8BAA6B,KASzC,SAAYC,GAEX,gBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,oBACA,oBACA,oBACA,oBACA,mBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,qBACA,qBACA,qBACA,qBACA,qBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,uBACA,uBACA,uBACA,uBACA,yBACA,0BACA,0BACA,0BACA,0BACA,0BACA,0BACA,0BACA,0BACA,0BACA,2BACA,2BACA,2BACA,2BACA,qBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,uBACA,uBACA,uBACA,uBACA,iBACA,mBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,qBACA,qBACA,qBACA,qBACA,wBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,0BACA,0BACA,0BACA,0BACA,iBACA,mBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,qBACA,qBACA,qBACA,qBACA,mBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,qBACA,qBACA,qBACA,qBACA,kBACA,oBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,sBACA,sBACA,sBACA,sBACA,yBACA,0BACA,0BACA,0BACA,0BACA,0BACA,0BACA,0BACA,0BACA,0BACA,2BACA,2BACA,2BACA,2BACA,oBACA,yBACA,iBACA,mBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,qBACA,qBACA,qBACA,qBACA,mBACA,qBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,uBACA,uBACA,uBACA,uBACA,oBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,sBACA,sBACA,sBACA,sBACA,qBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,uBACA,uBACA,uBACA,uBACA,yBACA,0BACA,0BACA,0BACA,0BACA,0BACA,0BACA,0BACA,0BACA,0BACA,2BACA,2BACA,2BACA,2BACA,oBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,mBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBAC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","file":"vrcontrols.all.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"vr\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vr\"] = factory();\n\telse\n\t\troot[\"vr\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","//#region Import\r\nimport { LabelOptions, Label } from \"./controls/label\";\r\nimport { UtilityManager } from \"../managers/utilityManager\";\r\nimport { DeviceManager } from \"../managers/deviceManager\";\r\nimport { TextBoxOptions, TextBox, TextBoxNumeric, TextBoxPercentage, TextBoxCurrency, TextBoxPassword, TextBoxMultiline } from \"./controls/textbox\";\r\nimport { CheckBoxOptions, CheckBox } from \"./controls/checkbox\";\r\nimport { SeparatorOptions, Separator } from \"./controls/separator\";\r\nimport { ButtonGroup, ButtonGroupClickEvent, ButtonGroupIconClickEvent, ButtonGroupOptions } from \"./controls/buttonGroup\";\r\nimport { ImageOptions, Image } from \"./controls/image\";\r\nimport { DatePickerOptions, DatePicker, TimePicker, DateTimePicker, MonthPicker, YearPicker } from \"./controls/datePicker\";\r\nimport { ComboBoxOptions, ComboBox, DropDown } from \"./controls/comboBox\";\r\nimport { SplitButtonOptions, SplitButton, SplitButtonItem } from \"./controls/splitButton\";\r\nimport { Editor, EditorItemClickEvent, EditorOptions } from \"./controls/editor\";\r\nimport { WindowOptions, Window, WindowEvent } from \"./controls/window\";\r\nimport { ConfirmOptions, Confirm } from \"./controls/confirm\";\r\nimport { AlertOptions, Alert } from \"./controls/alert\";\r\nimport { Dialog, DialogOptions } from \"./controls/dialog\";\r\nimport { Grid, GridOptions, GridHeaderSettings, GridCellSettings, GridCustomSettings, GridIconSettings, GridImageSettings, GridLabelSettings, GridTemplateEvent, GridToolbarDeleteRequest, GridToolbarSwitchSettings, GridToolbarClickEvent, GridControlsSettings } from \"./controls/grid\";\r\nimport { PromptOptions, Prompt } from \"./controls/prompt\";\r\nimport { ControlManager } from \"../managers/controlManager\";\r\nimport { SwitchOptions, Switch } from \"./controls/switch\";\r\nimport { CheckBoxListOptions, CheckBoxList } from \"./controls/checkboxList\";\r\nimport { RadioButton, RadioButtonOptions } from \"./controls/radioButton\";\r\nimport { RadioButtonList, RadioButtonListOptions } from \"./controls/radioButtonList\";\r\nimport { RepeaterOptions, Repeater } from \"./controls/repeater\";\r\nimport { MapsOptions, Maps } from \"./controls/maps\";\r\nimport { AttributeSettings, VrControl, VrControlOptions, VrControlsEvent } from \"./common\";\r\nimport { PainterOptions, Painter } from \"./controls/painter\";\r\nimport { Calendar, CalendarOptions } from \"./controls/calendar\";\r\nimport { RatingOptions, Rating } from \"./controls/rating\";\r\nimport { LoaderManager } from \"../../src/managers/loaderManager\";\r\nimport { GroupBox, GroupBoxOptions } from \"./controls/groupBox\";\r\nimport { PdfViewer, PdfViewerOptions } from \"./controls/pdfViewer\";\r\nimport { Notifier, NotifierCustomHtmlEvent, NotifierHideSettings, NotifierOnClickEvent, NotifierShowSettings } from \"./controls/notifier\";\r\nimport { Upload, UploadOptions } from \"./controls/upload\";\r\nimport { PaypalButton, PaypalButtonOptions } from \"./controls/paypalButton\";\r\nimport { TreeView, TreeViewCellSettings, TreeViewContextMenuClickEvent, TreeViewHeaderSettings, TreeViewOptions } from \"./controls/treeView\";\r\nimport { Scheduler, SchedulerOptions } from \"./controls/scheduler\";\r\nimport { QrCode, QrCodeOptions } from \"./controls/qrCode\";\r\nimport { MultiScheduler, MultiSchedulerOptions } from \"./controls/multiScheduler\";\r\nimport { Icon, IconOptions } from \"./controls/icon\";\r\nimport { ColorPicker, ColorPickerOptions } from \"./controls/colorPicker\";\r\nimport { SearchBar, SearchBarOptions } from \"./controls/searchBar\";\r\nimport { Splitter, SplitterOptions } from \"./controls/splitter\";\r\nimport { AutoCompleteBox, AutoCompleteBoxOptions } from \"./controls/autoCompleteBox\";\r\nimport { AreaChart, BarChart, ChartVr, DonutChart, HorizontalBarChart, LineChart, PieChart, StackedBarChart } from \"./controls/chart\";\r\nimport { PrintFileOptions, PrintHtmlOptions, PrintManager } from \"../../src/managers/printManager\";\r\nimport { TabStrip, TabStripOptions } from \"./controls/tabStrip\";\r\nimport { Tooltip, TooltipOptions } from \"./controls/tooltip\";\r\nimport { SpeechRecognizer, SpeechRecognizerAudioEndEvent, SpeechRecognizerAudioStartEvent, SpeechRecognizerClickEvent, SpeechRecognizerEndEvent, SpeechRecognizerErrorEvent, SpeechRecognizerNoMatchEvent, SpeechRecognizerResultEvent, SpeechRecognizerSoundEndEvent, SpeechRecognizerSoundStartEvent, SpeechRecognizerSpeechEndEvent, SpeechRecognizerSpeechStartEvent, SpeechRecognizerStartEvent } from \"./controls/speechRecognizer\";\r\nimport { Div, DivOptions } from \"./controls/div\";\r\nimport { Button, ButtonBadgeSettings, ButtonOptions } from \"./controls/button\";\r\nimport { Legend, LegendOptions } from \"./controls/legend\";\r\n//#endregion\r\n\r\n//#region Factory\r\nexport function createLabel(options?: LabelOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): Label\r\n{\r\n\tlet control = createControls<Label>(ControlTypeEnum.Label, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createButton(options?: ButtonOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): Button\r\n{\r\n\tlet control = createControls<Button>(ControlTypeEnum.Button, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createButtonGroup(options?: ButtonGroupOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): ButtonGroup\r\n{\r\n\tlet control = createControls<ButtonGroup>(ControlTypeEnum.ButtonGroup, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createTextBox(options?: TextBoxOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): TextBox\r\n{\r\n\tlet control = createControls<TextBox>(ControlTypeEnum.TextBox, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createNumericTextBox(options?: TextBoxOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): TextBoxNumeric\r\n{\r\n\tif (options == null) options = new TextBoxOptions();\r\n\toptions.mode = TextModeEnum.Numeric;\r\n\treturn createTextBox(options, container, position, elementId);\r\n}\r\n\r\nexport function createPercentageTextBox(options?: TextBoxOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): TextBoxPercentage\r\n{\r\n\tif (options == null) options = new TextBoxOptions();\r\n\toptions.mode = TextModeEnum.Percentage;\r\n\treturn createTextBox(options, container, position, elementId);\r\n}\r\n\r\nexport function createCurrencyTextBox(options?: TextBoxOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): TextBoxCurrency\r\n{\r\n\tif (options == null) options = new TextBoxOptions();\r\n\toptions.mode = TextModeEnum.Currency;\r\n\treturn createTextBox(options, container, position, elementId);\r\n}\r\n\r\nexport function createPasswordTextBox(options?: TextBoxOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): TextBoxPassword\r\n{\r\n\tif (options == null) options = new TextBoxOptions();\r\n\toptions.mode = TextModeEnum.Password;\r\n\treturn createTextBox(options, container, position, elementId);\r\n}\r\n\r\nexport function createMultilineTextBox(options?: TextBoxOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): TextBoxMultiline\r\n{\r\n\tif (options == null) options = new TextBoxOptions();\r\n\toptions.mode = TextModeEnum.MultiLine;\r\n\treturn createTextBox(options, container, position, elementId);\r\n}\r\n\r\nexport function createCheckBox(options?: CheckBoxOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): CheckBox\r\n{\r\n\tlet control = createControls<CheckBox>(ControlTypeEnum.CheckBox, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createSeparator(options?: SeparatorOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): Separator\r\n{\r\n\tlet control = createControls<Separator>(ControlTypeEnum.Separator, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createImage(options?: ImageOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): Image\r\n{\r\n\tlet control = createControls<Image>(ControlTypeEnum.Image, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createDatePicker(options?: DatePickerOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): DatePicker\r\n{\r\n\tlet control = createControls<DatePicker>(ControlTypeEnum.DatePicker, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createTimePicker(options?: DatePickerOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): TimePicker\r\n{\r\n\tif (options == null) options = new DatePickerOptions();\r\n\toptions.mode = DateModeEnum.Time;\r\n\treturn createDatePicker(options, container, position, elementId);\r\n}\r\n\r\nexport function createDateTimePicker(options?: DatePickerOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): DateTimePicker\r\n{\r\n\tif (options == null) options = new DatePickerOptions();\r\n\toptions.mode = DateModeEnum.DateTime;\r\n\treturn createDatePicker(options, container, position, elementId);\r\n}\r\n\r\nexport function createMonthPicker(options?: DatePickerOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): MonthPicker\r\n{\r\n\tif (options == null) options = new DatePickerOptions();\r\n\toptions.depth = DateDepthEnum.Month;\r\n\treturn createDatePicker(options, container, position, elementId);\r\n}\r\n\r\nexport function createYearPicker(options?: DatePickerOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): YearPicker\r\n{\r\n\tif (options == null) options = new DatePickerOptions();\r\n\toptions.depth = DateDepthEnum.Year;\r\n\treturn createDatePicker(options, container, position, elementId);\r\n}\r\n\r\nexport function createComboBox(options?: ComboBoxOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): ComboBox\r\n{\r\n\tlet control = createControls<ComboBox>(ControlTypeEnum.ComboBox, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createDropDown(options?: ComboBoxOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): DropDown\r\n{\r\n\tif (options == null) options = new ComboBoxOptions();\r\n\toptions.mode = ComboBoxTypeEnum.DropDown;\r\n\treturn createComboBox(options, container, position, elementId);\r\n}\r\n\r\nexport function createSplitButton(options?: SplitButtonOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): SplitButton\r\n{\r\n\tlet control = createControls<SplitButton>(ControlTypeEnum.SplitButton, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createEditor(options?: EditorOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): Editor\r\n{\r\n\tlet control = createControls<Editor>(ControlTypeEnum.Editor, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createWindow(options?: WindowOptions | null, container?: HTMLElement | JQuery | string | null): Window\r\n{\r\n\tlet control = <Window>createControls(ControlTypeEnum.Window, container, null, null, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createGrid(options?: GridOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): Grid\r\n{\r\n\tlet control = createControls<Grid>(ControlTypeEnum.Grid, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createSwitch(options?: SwitchOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): Switch\r\n{\r\n\tlet control = createControls<Switch>(ControlTypeEnum.Switch, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createCheckBoxList(options?: CheckBoxListOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): CheckBoxList\r\n{\r\n\tlet control = createControls<CheckBoxList>(ControlTypeEnum.CheckBoxList, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createRadioButton(options?: RadioButtonOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): RadioButton\r\n{\r\n\tlet control = createControls<RadioButton>(ControlTypeEnum.RadioButton, container, position, elementId, options);\r\n\treturn control;\r\n}\r\nexport function createRadioButtonList(options?: RadioButtonListOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): RadioButtonList\r\n{\r\n\tlet control = createControls<RadioButtonList>(ControlTypeEnum.RadioButtonList, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createRepeater(options?: RepeaterOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): Repeater\r\n{\r\n\tlet control = createControls<Repeater>(ControlTypeEnum.Repeater, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createMap(options?: MapsOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): Maps\r\n{\r\n\tlet control = createControls<Maps>(ControlTypeEnum.Map, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createPainter(options?: PainterOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): Painter\r\n{\r\n\tlet control = createControls<Painter>(ControlTypeEnum.Painter, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createCalendar(options?: CalendarOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): Calendar\r\n{\r\n\tlet control = createControls<Calendar>(ControlTypeEnum.Calendar, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createRating(options?: RatingOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): Rating\r\n{\r\n\tlet control = createControls<Rating>(ControlTypeEnum.Rating, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createGroupBox(options?: GroupBoxOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): GroupBox\r\n{\r\n\tlet control = createControls<GroupBox>(ControlTypeEnum.GroupBox, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createPdfViewer(options?: PdfViewerOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): PdfViewer\r\n{\r\n\tlet control = createControls<PdfViewer>(ControlTypeEnum.PdfViewer, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createPaypalButton(options?: PaypalButtonOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): PaypalButton\r\n{\r\n\tlet control = createControls<PaypalButton>(ControlTypeEnum.PaypalButton, container, position, elementId, options);;\r\n\treturn control;\r\n}\r\n\r\nexport function createUpload(options?: UploadOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): Upload\r\n{\r\n\tlet control = createControls<Upload>(ControlTypeEnum.Upload, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createTreeView(options?: TreeViewOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): TreeView\r\n{\r\n\tlet control = createControls<TreeView>(ControlTypeEnum.TreeView, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createScheduler(options?: SchedulerOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): Scheduler\r\n{\r\n\tlet control = createControls<Scheduler>(ControlTypeEnum.Scheduler, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createMultiScheduler(options?: MultiSchedulerOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): MultiScheduler\r\n{\r\n\tlet control = createControls<MultiScheduler>(ControlTypeEnum.MultiScheduler, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createQrCode(options?: QrCodeOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): QrCode\r\n{\r\n\tlet control = createControls<QrCode>(ControlTypeEnum.QrCode, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createIcon(options?: IconOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): Icon\r\n{\r\n\tlet control = createControls<Icon>(ControlTypeEnum.Icon, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createColorPicker(options?: ColorPickerOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): ColorPicker\r\n{\r\n\tlet control = createControls<ColorPicker>(ControlTypeEnum.ColorPicker, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createSearchBar(options?: SearchBarOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): SearchBar\r\n{\r\n\tlet control = createControls<SearchBar>(ControlTypeEnum.SearchBar, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createSplitter(options?: SplitterOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): Splitter\r\n{\r\n\tlet control = createControls<Splitter>(ControlTypeEnum.Splitter, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createAutoCompleteBox(options?: AutoCompleteBoxOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): AutoCompleteBox\r\n{\r\n\tlet control = createControls<AutoCompleteBox>(ControlTypeEnum.AutoCompleteBox, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createChart(options?: ChartOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): ChartVr\r\n{\r\n\tlet control = createControls<ChartVr>(ControlTypeEnum.Chart, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createBarChart(options?: ChartOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): BarChart\r\n{\r\n\tif (options == null) options = new ChartOptions();\r\n\toptions.type = ChartTypeEnum.Bar;\r\n\treturn createChart(options, container, position, elementId);\r\n}\r\n\r\nexport function createHorizontalBarChart(options?: ChartOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): HorizontalBarChart\r\n{\r\n\tif (options == null) options = new ChartOptions();\r\n\toptions.type = ChartTypeEnum.HorizontalBar;\r\n\treturn createChart(options, container, position, elementId);\r\n}\r\n\r\nexport function createLineChart(options?: ChartOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): LineChart\r\n{\r\n\tif (options == null) options = new ChartOptions();\r\n\toptions.type = ChartTypeEnum.Line;\r\n\treturn createChart(options, container, position, elementId);\r\n}\r\n\r\nexport function createDonutChart(options?: ChartOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): DonutChart\r\n{\r\n\tif (options == null) options = new ChartOptions();\r\n\toptions.type = ChartTypeEnum.Donut;\r\n\treturn createChart(options, container, position, elementId);\r\n}\r\n\r\nexport function createPieChart(options?: ChartOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): PieChart\r\n{\r\n\tif (options == null) options = new ChartOptions();\r\n\toptions.type = ChartTypeEnum.Pie;\r\n\treturn createChart(options, container, position, elementId);\r\n}\r\n\r\nexport function createAreaChart(options?: ChartOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): AreaChart\r\n{\r\n\tif (options == null) options = new ChartOptions();\r\n\toptions.type = ChartTypeEnum.Area;\r\n\treturn createChart(options, container, position, elementId);\r\n}\r\n\r\nexport function createStackedBarChart(options?: ChartOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): StackedBarChart\r\n{\r\n\tif (options == null) options = new ChartOptions();\r\n\toptions.type = ChartTypeEnum.StackedBar;\r\n\treturn createChart(options, container, position, elementId);\r\n}\r\n\r\nexport function createTabStrip(options?: TabStripOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): TabStrip\r\n{\r\n\tlet control = createControls<TabStrip>(ControlTypeEnum.TabStrip, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createTooltip(options?: TooltipOptions | null): Tooltip\r\n{\r\n\tlet control = createControls<Tooltip>(ControlTypeEnum.Tooltip, null, null, null, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createSpeechRecognizer(options?: SpeechRecognizerOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): SpeechRecognizer\r\n{\r\n\tlet control = createControls<SpeechRecognizer>(ControlTypeEnum.SpeechRecognizer, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function createLegend(options?: LegendOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, elementId?: string | null): Legend\r\n{\r\n\tlet control = createControls<Legend>(ControlTypeEnum.Legend, container, position, elementId, options);\r\n\treturn control;\r\n}\r\n\r\nexport function getControl<T extends VrControl>(controlId: string)\r\n{\r\n\treturn ControlManager.get<T>(controlId);\r\n}\r\n\r\nexport function addControl(control: VrControl)\r\n{\r\n\tControlManager.add(control);\r\n}\r\n\r\nfunction createControls<T extends VrControl>(controlTypeEnum: ControlTypeEnum, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null, definedElementId?: string | null, options?: VrControlOptions | null): T\r\n{\r\n\tif (options == null)\r\n\t\toptions = new VrControlOptions();\r\n\r\n\tlet elementId = \"vrpm_\" + UtilityManager.createGuid();\r\n\tif (definedElementId != null)\r\n\t{\r\n\t\telementId = definedElementId;\r\n\t\tif (!definedElementId.startsWith(\"#\"))\r\n\t\t\tdefinedElementId = \"#\" + definedElementId;\r\n\t}\r\n\r\n\t//#region Already exists\r\n\tif (container != null && puma(definedElementId).length > 0)\r\n\t\treturn puma(definedElementId)[0];\r\n\t//#endregion\r\n\r\n\t//#region Element\r\n\tlet element = null;\r\n\tlet elementTag = \"\";\r\n\r\n\t//#region ControlTypeEnum\r\n\tswitch (controlTypeEnum)\r\n\t{\r\n\t\tcase ControlTypeEnum.Label: elementTag = \"label\"; break;\r\n\t\tcase ControlTypeEnum.Button: elementTag = \"button\"; break;\r\n\t\tcase ControlTypeEnum.ButtonGroup: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.TextBox: elementTag = \"input\"; break;\r\n\t\tcase ControlTypeEnum.Window: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.CheckBox: elementTag = \"input\"; break;\r\n\t\tcase ControlTypeEnum.CheckBoxList: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.Separator: elementTag = \"span\"; break;\r\n\t\tcase ControlTypeEnum.Image: elementTag = \"img\"; break;\r\n\t\tcase ControlTypeEnum.DatePicker: elementTag = \"input\"; break;\r\n\t\tcase ControlTypeEnum.SplitButton: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.Editor: elementTag = \"textarea\"; break;\r\n\t\tcase ControlTypeEnum.Grid: elementTag = \"table\"; break;\r\n\t\tcase ControlTypeEnum.Switch: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.RadioButton: elementTag = \"input\"; break;\r\n\t\tcase ControlTypeEnum.RadioButtonList: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.Repeater: elementTag = \"table\"; break;\r\n\t\tcase ControlTypeEnum.Map: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.Painter: elementTag = \"canvas\"; break;\r\n\t\tcase ControlTypeEnum.Calendar: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.Rating: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.GroupBox: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.PdfViewer: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.PaypalButton: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.Upload: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.TreeView: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.Scheduler: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.MultiScheduler: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.QrCode: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.Icon: elementTag = \"i\"; break;\r\n\t\tcase ControlTypeEnum.SearchBar: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.Splitter: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.AutoCompleteBox: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.Chart: elementTag = \"canvas\"; break;\r\n\t\tcase ControlTypeEnum.TabStrip: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.Tooltip: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.SpeechRecognizer: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.Div: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.Legend: elementTag = \"div\"; break;\r\n\t\tcase ControlTypeEnum.ColorPicker:\r\n\t\t\t{\r\n\t\t\t\tif ((options as ColorPickerOptions).showInput == null || (options as ColorPickerOptions).showInput === true)\r\n\t\t\t\t\telementTag = \"input\";\r\n\t\t\t\telse\r\n\t\t\t\t\telementTag = \"button\";\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase ControlTypeEnum.ComboBox:\r\n\t\t\t{\r\n\t\t\t\tif ((options as ComboBoxOptions).mode == null || (options as ComboBoxOptions).checkboxes === true || (options as ComboBoxOptions).webService != null)\r\n\t\t\t\t\t(options as ComboBoxOptions).mode = ComboBoxTypeEnum.Combo;\r\n\t\t\t\tswitch ((options as ComboBoxOptions).mode)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase ComboBoxTypeEnum.Combo: elementTag = ((options as ComboBoxOptions).checkboxes === true) ? \"div\" : \"input\"; break;\r\n\t\t\t\t\tcase ComboBoxTypeEnum.DropDown: elementTag = \"div\"; break;\r\n\t\t\t\t}\r\n\t\t\t} break;\r\n\t}\r\n\t//#endregion\r\n\r\n\tif (container != null || controlTypeEnum == ControlTypeEnum.Window || controlTypeEnum == ControlTypeEnum.PdfViewer || controlTypeEnum == ControlTypeEnum.Tooltip)\r\n\t\telement = puma(\"<\" + elementTag + \" id='\" + elementId + \"'></\" + elementTag + \">\")[0];\r\n\telse\r\n\t{\r\n\t\tif (definedElementId == null)\r\n\t\t\tthrow Error(controlTypeEnum + \": il container è nullo, ma l'id non è valorizzato!\");\r\n\r\n\t\tif (!elementId.startsWith(\"#\"))\r\n\t\t\telementId = \"#\" + elementId;\r\n\r\n\t\telement = puma(elementId)[0];\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Check element\r\n\tif (!puma(element).is(elementTag))\r\n\t\tthrow Error(\"L'elemento nell'HTML con id: \" + elementId + \" non corrisponde al corretto elemento: \" + elementTag);\r\n\t//#endregion\r\n\r\n\tif (elementTag == \"input\")\r\n\t\tpuma(element).attr(\"autocomplete\", \"off\");\r\n\r\n\t//#region Container\r\n\tif ((controlTypeEnum == ControlTypeEnum.Window || controlTypeEnum == ControlTypeEnum.Tooltip) && container == null)\r\n\t\tcontainer = (shadowRoot() != null) ? (shadowRoot() as any as HTMLElement) : document.body;\r\n\r\n\tif (container != null)\r\n\t{\r\n\t\tif (typeof (container) == \"string\" && !container.startsWith(\"#\"))\r\n\t\t\tcontainer = \"#\" + container;\r\n\r\n\t\tif (position == null) position = ControlPositionEnum.After;\r\n\t\tif (position == ControlPositionEnum.After)\r\n\t\t\tpuma(container).vrAppendPuma(element);\r\n\t\telse\r\n\t\t\tpuma(container).prepend(element);\r\n\t}\r\n\t//#endregion\r\n\r\n\tlet control = puma(element)[\"vr\" + controlTypeEnum](options);\r\n\taddControl(control);\r\n\treturn control as T;\r\n}\r\n\r\njQuery.fn.extend(\r\n\t{\r\n\t\tvrLabel: function (options?: LabelOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Label(element, options);\r\n\t\t},\r\n\t\tvrButton: function (options?: ButtonOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Button(element, options);\r\n\t\t},\r\n\t\tvrButtonGroup: function (options?: ButtonGroupOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new ButtonGroup(element, options);\r\n\t\t},\r\n\t\tvrTextBox: function (options?: TextBoxOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new TextBox(element, options);\r\n\t\t},\r\n\t\tvrCheckBox: function (options?: CheckBoxOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new CheckBox(element, options);\r\n\t\t},\r\n\t\tvrCheckBoxList: function (options?: CheckBoxListOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new CheckBoxList(element, options);\r\n\t\t},\r\n\t\tvrSeparator: function (options?: SeparatorOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Separator(element, options);\r\n\t\t},\r\n\t\tvrImage: function (options?: ImageOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Image(element, options);\r\n\t\t},\r\n\t\tvrDatePicker: function (options?: DatePickerOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new DatePicker(element, options);\r\n\t\t},\r\n\t\tvrComboBox: function (options?: ComboBoxOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new ComboBox(element, options);\r\n\t\t},\r\n\t\tvrSplitButton: function (options?: SplitButtonOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new SplitButton(element, options);\r\n\t\t},\r\n\t\tvrEditor: function (options?: EditorOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Editor(element, options);\r\n\t\t},\r\n\t\tvrWindow: function (options?: WindowOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Window(element, options);\r\n\t\t},\r\n\t\tvrGrid: function (options?: GridOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Grid(element, options);\r\n\t\t},\r\n\t\tvrSwitch: function (options?: SwitchOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Switch(element, options);\r\n\t\t},\r\n\t\tvrRadioButton: function (options?: RadioButtonOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new RadioButton(element, options);\r\n\t\t},\r\n\t\tvrRadioButtonList: function (options?: RadioButtonListOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new RadioButtonList(element, options);\r\n\t\t},\r\n\t\tvrRepeater: function (options?: RepeaterOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Repeater(element, options);\r\n\t\t},\r\n\t\tvrMap: function (options?: MapsOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Maps(element, options);\r\n\t\t},\r\n\t\tvrPainter: function (options?: PainterOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Painter(element, options);\r\n\t\t},\r\n\t\tvrCalendar: function (options?: CalendarOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Calendar(element, options);\r\n\t\t},\r\n\t\tvrRating: function (options?: RatingOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Rating(element, options);\r\n\t\t},\r\n\t\tvrGroupBox: function (options?: GroupBoxOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new GroupBox(element, options);\r\n\t\t},\r\n\t\tvrPdfViewer: function (options?: PdfViewerOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new PdfViewer(element, options);\r\n\t\t},\r\n\t\tvrPaypalButton: function (options?: PaypalButtonOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new PaypalButton(element, options);\r\n\t\t},\r\n\t\tvrUpload: function (options?: UploadOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Upload(element, options);\r\n\t\t},\r\n\t\tvrTreeView: function (options?: TreeViewOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new TreeView(element, options);\r\n\t\t},\r\n\t\tvrScheduler: function (options?: SchedulerOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Scheduler(element, options);\r\n\t\t},\r\n\t\tvrMultiScheduler: function (options?: MultiSchedulerOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new MultiScheduler(element, options);\r\n\t\t},\r\n\t\tvrQrCode: function (options?: QrCodeOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new QrCode(element, options);\r\n\t\t},\r\n\t\tvrIcon: function (options?: IconOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Icon(element, options);\r\n\t\t},\r\n\t\tvrColorPicker: function (options?: ColorPickerOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new ColorPicker(element, options);\r\n\t\t},\r\n\t\tvrSearchBar: function (options?: SearchBarOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new SearchBar(element, options);\r\n\t\t},\r\n\t\tvrSplitter: function (options?: SplitterOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Splitter(element, options);\r\n\t\t},\r\n\t\tvrAutoCompleteBox: function (options?: AutoCompleteBoxOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new AutoCompleteBox(element, options);\r\n\t\t},\r\n\t\tvrChart: function (options?: ChartOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new ChartVr(element, options);\r\n\t\t},\r\n\t\tvrTabStrip: function (options?: TabStripOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new TabStrip(element, options);\r\n\t\t},\r\n\t\tvrTooltip: function (options?: TooltipOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Tooltip(element, options);\r\n\t\t},\r\n\t\tvrSpeechRecognizer: function (options?: SpeechRecognizerOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new SpeechRecognizer(element, options);\r\n\t\t},\r\n\t\tvrDiv: function (options?: DivOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Div(element, options);\r\n\t\t},\r\n\t\tvrLegend: function (options?: LegendOptions | null)\r\n\t\t{\r\n\t\t\tlet element = (this as any)[0];\r\n\t\t\treturn new Legend(element, options);\r\n\t\t}\r\n\t});\r\n\r\n//#region Memory leaks' destroyer\r\n$(() =>\r\n{\r\n\tconst observer = new MutationObserver((mutations_list) =>\r\n\t{\r\n\t\tmutations_list.forEach((mutations) =>\r\n\t\t{\r\n\t\t\tmutations.removedNodes.forEach((currentValue, currentIndex, listObj) =>\r\n\t\t\t{\r\n\t\t\t\tif ((currentValue as HTMLElement).classList != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!currentValue.isConnected)\r\n\t\t\t\t\t\tremoveItems(currentValue);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\tobserver.observe(document.body, { subtree: true, childList: true });\r\n\r\n\tfunction removeItems(element: any)\r\n\t{\r\n\t\tif (element != null)\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tif (element.id != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet idElement = element.id.replace(\"Container\", \"\").replace(\"#\", \"\").replace(\".\", \"\");\r\n\t\t\t\t\tControlManager.remove(idElement);\r\n\r\n\t\t\t\t\tpuma(\"#\" + idElement + \"_divPopup\").remove();\r\n\t\t\t\t\tpuma(\".\" + idElement + \"_wndUtility\").remove();\r\n\t\t\t\t\tpuma(\"#\" + idElement + \"_someStuff\").remove();\r\n\t\t\t\t\tpuma(\"#\" + idElement + \"_someStuffContainer\").remove();\r\n\t\t\t\t\tpuma(\"#vrWindowBackground_\" + idElement).remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (e) { }\r\n\r\n\t\t\tif (element.children == null || element.children.length == 0)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tfor (let child of element.children)\r\n\t\t\t\tremoveItems(child);\r\n\t\t}\r\n\t}\r\n});\r\n//#endregion\r\n\r\nexport enum ControlTypeEnum\r\n{\r\n\tLabel = \"Label\",\r\n\tButton = \"Button\",\r\n\tWindow = \"Window\",\r\n\tTextBox = \"TextBox\",\r\n\tCheckBox = \"CheckBox\",\r\n\tSeparator = \"Separator\",\r\n\tButtonGroup = \"ButtonGroup\",\r\n\tImage = \"Image\",\r\n\tDatePicker = \"DatePicker\",\r\n\tComboBox = \"ComboBox\",\r\n\tSplitButton = \"SplitButton\",\r\n\tEditor = \"Editor\",\r\n\tGrid = \"Grid\",\r\n\tSwitch = \"Switch\",\r\n\tCheckBoxList = \"CheckBoxList\",\r\n\tRadioButton = \"RadioButton\",\r\n\tRadioButtonList = \"RadioButtonList\",\r\n\tRepeater = \"Repeater\",\r\n\tMap = \"Map\",\r\n\tPainter = \"Painter\",\r\n\tCalendar = \"Calendar\",\r\n\tRating = \"Rating\",\r\n\tGroupBox = \"GroupBox\",\r\n\tPdfViewer = \"PdfViewer\",\r\n\tUpload = \"Upload\",\r\n\tPaypalButton = \"PaypalButton\",\r\n\tTreeView = \"TreeView\",\r\n\tScheduler = \"Scheduler\",\r\n\tMultiScheduler = \"MultiScheduler\",\r\n\tQrCode = \"QrCode\",\r\n\tIcon = \"Icon\",\r\n\tColorPicker = \"ColorPicker\",\r\n\tSearchBar = \"SearchBar\",\r\n\tSplitter = \"Splitter\",\r\n\tAutoCompleteBox = \"AutoCompleteBox\",\r\n\tChart = \"Chart\",\r\n\tTabStrip = \"TabStrip\",\r\n\tTooltip = \"Tooltip\",\r\n\tSpeechRecognizer = \"SpeechRecognizer\",\r\n\tDiv = \"Div\",\r\n\tLegend = \"Legend\"\r\n}\r\n\r\nexport enum ControlPositionEnum\r\n{\r\n\tBefore,\r\n\tAfter,\r\n\tNone\r\n}\r\n//#endregion\r\n\r\n//#region Notifications\r\nexport function hideNotify()\r\n{\r\n\tpuma(\".vrNotifierContainer\").hide();\r\n}\r\n\r\nexport function notify(text: string, options?: NotifierOptions): Notifier\r\n{\r\n\tlet notifier = new Notifier(text, options);\r\n\treturn notifier;\r\n}\r\n\r\nexport function notifyError(text: string, options?: NotifierOptions | null): Notifier\r\n{\r\n\tif (options == null) options = new NotifierOptions();\r\n\tif (options.type == null) options.type = NotifierTypeEnum.Error;\r\n\treturn new Notifier(text, options)!;\r\n}\r\n\r\nexport function notifyWarning(text: string, options?: NotifierOptions | null): Notifier\r\n{\r\n\tif (options == null) options = new NotifierOptions();\r\n\tif (options.type == null) options.type = NotifierTypeEnum.Warning;\r\n\treturn new Notifier(text, options)!;\r\n}\r\n\r\nexport function notifySuccess(text: string, options?: NotifierOptions | null): Notifier\r\n{\r\n\tif (options == null) options = new NotifierOptions();\r\n\tif (options.type == null) options.type = NotifierTypeEnum.Success;\r\n\treturn new Notifier(text, options)!;\r\n}\r\n\r\nexport function notifyInfo(text: string, options?: NotifierOptions | null): Notifier\r\n{\r\n\tif (options == null) options = new NotifierOptions();\r\n\tif (options.type == null) options.type = NotifierTypeEnum.Info;\r\n\treturn new Notifier(text, options)!;\r\n}\r\n//#endregion\r\n\r\n//#region Dialog\r\nexport function confirm(text?: string | null, options?: ConfirmOptions | null): Promise<any>\r\n{\r\n\tlet confirm = new Confirm(text, options);\r\n\treturn confirm.open();\r\n}\r\n\r\nexport function alert(text?: string | null, options?: AlertOptions | null): Promise<any>\r\n{\r\n\tlet alert = new Alert(text, options);\r\n\treturn alert.open();\r\n}\r\n\r\nexport function dialog(text?: string | null, options?: DialogOptions | null)\r\n{\r\n\tlet dialog = new Dialog(text, options);\r\n\tdialog.open();\r\n\treturn dialog;\r\n}\r\n\r\nexport function prompt(text?: string | null, options?: PromptOptions | null): Promise<any>\r\n{\r\n\tlet prompt = new Prompt(text, options);\r\n\treturn prompt.open();\r\n}\r\n//#endregion\r\n\r\n//#region Print\r\nexport function printElement(element: string | HTMLElement | JQuery, options?: PrintHtmlOptions)\r\n{\r\n\tPrintManager.printElement(element, options);\r\n}\r\n\r\nexport function printHtml(elementId: string, options?: PrintFileOptions)\r\n{\r\n\tPrintManager.printHtml(elementId, options);\r\n}\r\n\r\nexport function printBytes(base64Bytes: string, options?: PrintFileOptions)\r\n{\r\n\tPrintManager.printBytes(base64Bytes, options);\r\n}\r\n\r\nexport function printPdf(path: string, options?: PrintFileOptions)\r\n{\r\n\tPrintManager.printPdf(path, options);\r\n}\r\n\r\nexport function printImage(path: string, options?: PrintFileOptions)\r\n{\r\n\tPrintManager.printImage(path, options);\r\n}\r\n//#endregion\r\n\r\n//#region Device manager\r\nexport function isSmartphone()\r\n{\r\n\treturn DeviceManager.isSmartphone();\r\n}\r\n\r\nexport function isTablet()\r\n{\r\n\treturn DeviceManager.isTablet();\r\n}\r\n\r\nexport function isDesktop()\r\n{\r\n\treturn DeviceManager.isDesktop();\r\n}\r\n\r\nexport function isMobile()\r\n{\r\n\treturn DeviceManager.isMobile();\r\n}\r\n\r\nexport function isIphoneX()\r\n{\r\n\treturn DeviceManager.isIphoneX();\r\n}\r\n\r\nexport function isIphone()\r\n{\r\n\treturn DeviceManager.isIphone();\r\n}\r\n\r\nexport function browser()\r\n{\r\n\treturn DeviceManager.browser();\r\n}\r\n\r\nexport function isInternetExplorer()\r\n{\r\n\treturn DeviceManager.isInternetExplorer();\r\n}\r\n\r\nexport function isSafari()\r\n{\r\n\treturn DeviceManager.isSafari();\r\n}\r\n\r\nexport function isChrome()\r\n{\r\n\treturn DeviceManager.isChrome();\r\n}\r\n\r\nexport function isFirefox()\r\n{\r\n\treturn DeviceManager.isFirefox();\r\n}\r\n\r\nexport function isEdge()\r\n{\r\n\treturn DeviceManager.isEdge();\r\n}\r\n\r\nexport function isOpera()\r\n{\r\n\treturn DeviceManager.isOpera();\r\n}\r\n\r\nexport function isVivaldi()\r\n{\r\n\treturn DeviceManager.isVivaldi();\r\n}\r\n\r\nexport function isSeamonkey()\r\n{\r\n\treturn DeviceManager.isSeamonkey();\r\n}\r\n\r\nexport enum BrowserTypeEnum\r\n{\r\n\tInternetExplorer = \"InternetExplorer\",\r\n\tSafari = \"Safari\",\r\n\tChrome = \"Chrome\",\r\n\tFirefox = \"Firefox\",\r\n\tEdge = \"Edge\",\r\n\tOpera = \"Opera\",\r\n\tVivaldi = \"Vivaldi\",\r\n\tSeamonkey = \"Seamonkey\"\r\n}\r\n//#endregion\r\n\r\n//#region HtmlElement\r\nexport function createDiv(options?: DivOptions | null, container?: HTMLElement | JQuery | string | null, position?: ControlPositionEnum | null): Div\r\n{\r\n\tlet control = createControls<Div>(ControlTypeEnum.Div, container, position, null, options);\r\n\treturn control;\r\n}\r\n\r\nexport function div(container?: string | HTMLElement | JQuery, settings?: DivSettings, prepend = false): HTMLElement\r\n{\r\n\tlet classAttribute = \"\";\r\n\tlet idAttribute = \"\";\r\n\tlet css = \"\";\r\n\tlet content = \"\";\r\n\tlet title = \"\";\r\n\r\n\tif (settings != null)\r\n\t{\r\n\t\tif (settings.class != null)\r\n\t\t\tclassAttribute = \"class = '\" + settings.class + \"'\";\r\n\r\n\t\tif (settings.id != null)\r\n\t\t\tidAttribute = \"id = '\" + settings.id + \"'\";\r\n\r\n\t\tif (settings.css != null)\r\n\t\t\tcss = \"style='\" + settings.css + \"'\";\r\n\r\n\t\tif (settings.content != null)\r\n\t\t\tcontent = settings.content;\r\n\r\n\t\tif (settings.tooltip != null)\r\n\t\t\ttitle = \"title='\" + settings.tooltip + \"'\";\r\n\t}\r\n\r\n\tlet div = puma(\"<div \" + title + \" \" + classAttribute + \" \" + idAttribute + \" \" + css + \">\" + content + \"</div>\")[0];\r\n\tif (container != null)\r\n\t{\r\n\t\tif (typeof (container) == \"string\" && !container.startsWith(\"#\") && !container.startsWith(\".\"))\r\n\t\t\tcontainer = \"#\" + container;\r\n\r\n\t\tif (!prepend)\r\n\t\t\tpuma(div).vrAppendToPuma(container);\r\n\t\telse\r\n\t\t\tpuma(div).vrPrependToPuma(container);\r\n\t}\r\n\r\n\tif (settings != null && settings.attributes != null)\r\n\t{\r\n\t\tfor (let attribute of settings.attributes)\r\n\t\t\tpuma(div).attr(attribute.name, attribute.value);\r\n\t}\r\n\r\n\treturn div;\r\n}\r\nclass DivSettings\r\n{\r\n\tclass?: string;\r\n\tid?: string;\r\n\tcontent?: string;\r\n\tcss?: string;\r\n\ttooltip?: string;\r\n\tattributes?: AttributeSettings[];\r\n}\r\n\r\nexport function span(container?: string | HTMLElement | JQuery, settings?: SpanSettings, prepend = false): HTMLElement\r\n{\r\n\tlet classAttribute = \"\";\r\n\tlet idAttribute = \"\";\r\n\tlet css = \"\";\r\n\tlet content = \"\";\r\n\tlet title = \"\";\r\n\r\n\tif (settings != null)\r\n\t{\r\n\t\tif (settings.class != null)\r\n\t\t\tclassAttribute = \"class = '\" + settings.class + \"'\";\r\n\r\n\t\tif (settings.id != null)\r\n\t\t\tidAttribute = \"id = '\" + settings.id + \"'\";\r\n\r\n\t\tif (settings.css != null)\r\n\t\t\tcss = \"style='\" + settings.css + \"'\";\r\n\r\n\t\tif (settings.content != null)\r\n\t\t\tcontent = settings.content;\r\n\r\n\t\tif (settings.tooltip != null)\r\n\t\t\ttitle = \"title='\" + settings.tooltip + \"'\";\r\n\t}\r\n\r\n\tlet span = puma(\"<span \" + title + \" \" + classAttribute + \" \" + idAttribute + \" \" + css + \">\" + content + \"</span>\")[0];\r\n\tif (container != null)\r\n\t{\r\n\t\tif (typeof (container) == \"string\" && !container.startsWith(\"#\") && !container.startsWith(\".\"))\r\n\t\t\tcontainer = \"#\" + container;\r\n\r\n\t\tif (!prepend)\r\n\t\t\tpuma(span).vrAppendToPuma(container);\r\n\t\telse\r\n\t\t\tpuma(span).vrPrependToPuma(container);\r\n\t}\r\n\r\n\tif (settings != null && settings.attributes != null)\r\n\t{\r\n\t\tfor (let attribute of settings.attributes)\r\n\t\t\tpuma(span).attr(attribute.name, attribute.value);\r\n\t}\r\n\r\n\treturn span;\r\n}\r\nclass SpanSettings\r\n{\r\n\tclass?: string;\r\n\tid?: string;\r\n\tcontent?: string;\r\n\tcss?: string;\r\n\ttooltip?: string;\r\n\tattributes?: AttributeSettings[];\r\n}\r\n\r\nexport function icon(iconClass: IconClass, container?: string | HTMLElement | JQuery | null, settings?: IconSettings | null, prepend = false): HTMLElement\r\n{\r\n\tif (container != null && typeof (container) == \"string\" && !container.startsWith(\"#\") && !container.startsWith(\".\"))\r\n\t\tcontainer = \"#\" + container;\r\n\r\n\tlet classAttribute = \"\";\r\n\tlet idAttribute = \"\";\r\n\tlet css = \"\";\r\n\r\n\t//#region Settings\r\n\tif (settings != null)\r\n\t{\r\n\t\tif (settings.id != null)\r\n\t\t\tidAttribute = \"id = '\" + settings.id + \"'\";\r\n\r\n\t\tif (settings.css != null)\r\n\t\t\tcss += settings.css + \";\";\r\n\r\n\t\tif (settings.fontSize != null)\r\n\t\t{\r\n\t\t\tif (typeof (settings.fontSize) == \"number\")\r\n\t\t\t\tsettings.fontSize = settings.fontSize + \"px\";\r\n\r\n\t\t\tcss += \"font-size: \" + settings.fontSize + \";\";\r\n\t\t}\r\n\r\n\t\tif (settings.color != null)\r\n\t\t\tcss += \"color: \" + settings.color + \";\";\r\n\r\n\t\tif (settings.class != null)\r\n\t\t\tclassAttribute += settings.class;\r\n\r\n\t\tif (settings.cursor != null)\r\n\t\t\tcss += \"cursor: \" + settings.cursor + \";\";\r\n\t}\r\n\t//#endregion\r\n\r\n\tlet icon = puma(\"<i class='\" + iconClass + \" vrIcon \" + classAttribute + \"' aria-hidden='true'\"\r\n\t\t+ \" id='\" + idAttribute + \"' style='\" + css + \"'></i>\")[0];\r\n\r\n\tif (container != null)\r\n\t{\r\n\t\tif (!prepend)\r\n\t\t\tpuma(icon).vrAppendToPuma(container);\r\n\t\telse\r\n\t\t\tpuma(icon).vrPrependToPuma(container);\r\n\t}\r\n\r\n\treturn icon;\r\n}\r\nexport class IconSettings\r\n{\r\n\tfontSize?: string | number;\r\n\tcss?: string;\r\n\tid?: string;\r\n\tcolor?: string;\r\n\tclass?: string;\r\n\tcursor?: string;\r\n\tposition?: PositionEnum;\r\n}\r\n\r\nexport function iframe(container: string | HTMLElement | JQuery, settings?: VrIframeSettings)\r\n{\r\n\tif (typeof (container) == \"string\" && !container.startsWith(\"#\") && !container.startsWith(\".\"))\r\n\t\tcontainer = \"#\" + container;\r\n\r\n\tif (settings == null) settings = new VrIframeSettings();\r\n\tif (settings.content == null) settings.content = \"\";\r\n\tif (settings.width == null) settings.width = \"100%\";\r\n\tif (settings.height == null) settings.height = \"100%\";\r\n\tif (typeof (settings.width) == \"number\") settings.width = settings.width + \"px\";\r\n\tif (typeof (settings.height) == \"number\") settings.height = settings.height + \"px\";\r\n\r\n\tlet iframe = puma(\"<iframe>\").vrAppendToPuma(container)[0];\r\n\tiframe.style.cssText += \"width: \" + settings.width + \"; height: \" + settings.height + \"; border: none;\" + settings.css;\r\n\r\n\tlet iframeBody: HTMLElement | null = null;\r\n\tlet iframeContentDocument = iframe.contentDocument;\r\n\tpuma(iframeContentDocument).find(\"body\").css(\"margin\", \"0px\");\r\n\tif (iframeContentDocument != null)\r\n\t\tiframeBody = iframeContentDocument.body;\r\n\r\n\tif (settings.content.includes(\".html\") || settings.content.includes(\".php\") || settings.content.includes(\".aspx\") || settings.content.includes(\"http\"))\r\n\t{\r\n\t\tif (settings.loader || settings.loader !== false)\r\n\t\t{\r\n\t\t\tif (settings.loader === true)\r\n\t\t\t\tsettings.loader = iframe;\r\n\r\n\t\t\tLoaderManager.show((settings.loader === false) ? iframe : settings.loader);\r\n\t\t}\r\n\r\n\t\tpuma(iframe).attr(\"src\", settings.content);\r\n\t\tpuma(iframe).on(\"load\", () => \r\n\t\t{\r\n\t\t\tlet iframeContentDocument = iframe!.contentDocument;\r\n\t\t\tpuma(iframeContentDocument).find(\"body\").css(\"margin\", \"0px\");\r\n\r\n\t\t\tif (settings!.callback != null)\r\n\t\t\t\tsettings!.callback();\r\n\r\n\t\t\tLoaderManager.hide();\r\n\t\t});\r\n\t}\r\n\telse\r\n\t{\r\n\t\tpuma(settings.content).vrAppendToPuma(iframeBody);\r\n\r\n\t\tif (settings!.callback != null)\r\n\t\t\tsettings!.callback();\r\n\r\n\t\tLoaderManager.hide();\r\n\t}\r\n\r\n\tif (settings != null && settings.attributes != null)\r\n\t{\r\n\t\tfor (let attribute of settings.attributes)\r\n\t\t\tpuma(iframe).attr(attribute.name, attribute.value);\r\n\t}\r\n\r\n\treturn iframe as HTMLIFrameElement;\r\n}\r\nclass VrIframeSettings\r\n{\r\n\tcontent?: string;\r\n\tloader?: boolean | HTMLElement | JQuery | string;\r\n\tcallback?: Function;\r\n\twidth?: number | string;\r\n\theight?: number | string;\r\n\tcss?: string;\r\n\tattributes?: AttributeSettings[];\r\n}\r\n\r\nexport function br(container: string | HTMLElement | JQuery, count = 1)\r\n{\r\n\tif (typeof (container) == \"string\" && !container.startsWith(\"#\") && !container.startsWith(\".\"))\r\n\t\tcontainer = \"#\" + container;\r\n\r\n\tfor (let i = 0; i < count; i++)\r\n\t\tpuma(\"<br />\").vrAppendToPuma(container);\r\n}\r\n\r\nexport function hr(container: string | HTMLElement | JQuery, css: string = \"\", id?: string): HTMLElement\r\n{\r\n\tif (typeof (container) == \"string\" && !container.startsWith(\"#\") && !container.startsWith(\".\"))\r\n\t\tcontainer = \"#\" + container;\r\n\r\n\tlet idString = (id == null) ? \"\" : \" id='\" + id + \"'\";\r\n\r\n\treturn puma(\"<hr \" + idString + \" style='\" + css + \"' />\").vrAppendToPuma(container)[0];\r\n}\r\n\r\nexport function guid()\r\n{\r\n\tconst hex = [...Array(256).keys()].map(index => (index).toString(16).padStart(2, '0'));\r\n\tconst r = crypto.getRandomValues(new Uint8Array(16));\r\n\tr[6] = (r[6] & 0x0f) | 0x40;\r\n\tr[8] = (r[8] & 0x3f) | 0x80;\r\n\r\n\treturn [...r.entries()]\r\n\t\t.map(([index, int]) => [4, 6, 8, 10].includes(index) ? `-${hex[int]}` : hex[int])\r\n\t\t.join('');\r\n}\r\n\r\nexport class VrMarginSettings\r\n{\r\n\ttop?: number;\r\n\tright?: number;\r\n\tbottom?: number;\r\n\tleft?: number;\r\n}\r\n\r\nexport function showLoader(element?: string | HTMLElement | JQuery | boolean, transparency = true, tag?: any)\r\n{\r\n\tif (typeof (element) == \"boolean\") element = undefined;\r\n\tLoaderManager.show(element, transparency, tag);\r\n}\r\n\r\nexport function hideLoader(tag?: any)\r\n{\r\n\tLoaderManager.hide(tag);\r\n}\r\n//#endregion\r\n\r\n//#region Creator\r\nexport function pumo()\r\n{\r\n\tconfirm(\"Giuri solennemente di non avere buone intenzioni?\")\r\n\t\t.then(() => alert(\"Il signor Matteo Pumo è fiero di presentarti 'I controlli del malandrino'! So che saprai usarli nel modo giusto\"))\r\n\t\t.catch(() => alert(\"Peggio per te, non saprai mai quant'è profonda la tana del bianconiglio\"))\r\n}\r\n\r\nexport enum CreatorEnum\r\n{\r\n\tMatteoPumo = \"MatteoPumo\",\r\n\tMatteoPumoSite = \"https://www.matteopumo.com\",\r\n\tMatteoPumoMail = \"info@matteopumo.com\",\r\n\tVettoreRinascimento = \"VettoreRinascimento\",\r\n\tVettoreMedical = \"VettoreMedical\",\r\n\tYear2020 = \"Year2020\",\r\n\tPureJqueryTypescript = \"PureJqueryTypescript\",\r\n\tFastestControlsEver = \"FastestControlsEver\"\r\n}\r\n//#endregion\r\n\r\n//#region Icons\r\n\r\nexport type IconClass = IconClassSolid | IconClassLight | IconClassRegular | IconClassDuotone | IconClassThin | IconClassBrands | string;\r\n\r\n//#region Icon Brands\r\nexport enum IconClassBrands\r\n{\r\n\tAmazon = \"fa-brands fa-amazon\",\r\n\tAndroid = \"fa-brands fa-android\",\r\n\tApple = \"fa-brands fa-apple\",\r\n\tAppStore = \"fa-brands fa-app-store\",\r\n\tFacebook = \"fa-brands fa-facebook\",\r\n\tGoogle = \"fa-brands fa-google\",\r\n\tGooglePlay = \"fa-brands fa-google-play\",\r\n\tPaypal = \"fa-brands fa-paypal\",\r\n\tTwitter = \"fa-brands fa-twitter\",\r\n\tVimeo = \"fa-brands fa-vimeo\",\r\n\tWhatsapp = \"fa-brands fa-whatsapp\",\r\n\tWindows = \"fa-brands fa-windows\",\r\n\tYoutube = \"fa-brands fa-youtube\",\r\n}\r\n//#endregion\r\n\r\n//#region Icon Solid\r\nexport enum IconClassSolid\r\n{\r\n\t//#region A\r\n\tAdd = \"fa-solid fa-plus\",\r\n\tAddressCard = \"fa-solid fa-address-card\",\r\n\tAlert = \"fa-solid fa-triangle-exclamation\",\r\n\tAngleDown = \"fa-solid fa-angle-down\",\r\n\tAngleLeft = \"fa-solid fa-angle-left\",\r\n\tAngleRight = \"fa-solid fa-angle-right\",\r\n\tAngleUp = \"fa-solid fa-angle-up\",\r\n\tAperture = \"fa-solid fa-aperture\",\r\n\tArrowDown = \"fa-solid fa-arrow-down\",\r\n\tArrowDownShortWide = \"fa-solid fa-arrow-down-short-wide\",\r\n\tArrowDownWideShort = \"fa-solid fa-arrow-down-wide-short\",\r\n\tArrowLeft = \"fa-solid fa-arrow-left\",\r\n\tArrowPointer = \"fa-solid fa-arrow-pointer\",\r\n\tArrowRight = \"fa-solid fa-arrow-right\",\r\n\tArrowRightToBracket = \"fa-solid fa-arrow-right-to-bracket\",\r\n\tArrowRightFromBracket = \"fa-solid fa-arrow-right-from-bracket\",\r\n\tArrowRotateRight = \"fa-solid fa-arrow-rotate-right\",\r\n\tArrowsRotate = \"fa-solid fa-arrows-rotate\",\r\n\tArrowUp = \"fa-solid fa-arrow-up\",\r\n\tAsterisk = \"fa-solid fa-asterisk\",\r\n\tAt = \"fa-solid fa-at\",\r\n\tAttachment = \"fa-solid fa-paperclip\",\r\n\t//#endregion\r\n\r\n\t//#region B\r\n\tBack = \"fa-solid fa-angle-left\",\r\n\tBackward = \"fa-solid fa-backward\",\r\n\tBackwardFast = \"fa-solid fa-backward-fast\",\r\n\tBackwardStep = \"fa-solid fa-backward-step\",\r\n\tBalanceScale = \"fa-solid fa-balance-scale\",\r\n\tBallotCheck = \"fa-solid fa-ballot-check\",\r\n\tBan = \"fa-solid fa-ban\",\r\n\tBarcode = \"fa-solid fa-barcode\",\r\n\tBarcodeScan = \"fa-solid fa-barcode-scan\",\r\n\tBars = \"fa-solid fa-bars\",\r\n\tBarsSort = \"fa-solid fa-bars-sort\",\r\n\tBell = \"fa-solid fa-bell\",\r\n\tBellSlash = \"fa-solid fa-bell-slash\",\r\n\tBolt = \"fa-solid fa-bolt\",\r\n\tBook = \"fa-solid fa-book\",\r\n\tBookOpen = \"fa-solid fa-book-open\",\r\n\tBox = \"fa-solid fa-box\",\r\n\tBoxArchive = \"fa-solid fa-box-archive\",\r\n\tBriefCase = \"fa-solid fa-brief-case\",\r\n\tBug = \"fa-solid fa-bug\",\r\n\tBurger = \"fa-solid fa-bars\",\r\n\t//#endregion\r\n\r\n\t//#region C\r\n\tCakeCandles = \"fa-solid fa-cake-candles\",\r\n\tCalendar = \"fa-solid fa-calendar\",\r\n\tCalendarAlt = \"fa-solid fa-calendar-alt\",\r\n\tCalendarCheck = \"fa-solid fa-calendar-check\",\r\n\tCalendarDay = \"fa-solid fa-calendar-day\",\r\n\tCalendarPlus = \"fa-solid fa-calendar-plus\",\r\n\tCamera = \"fa-solid fa-camera\",\r\n\tCameraAlt = \"fa-solid fa-camera-alt\",\r\n\tCameraWeb = \"fa-solid fa-camera-web\",\r\n\tCameraWebSlash = \"fa-solid fa-camera-web-slash\",\r\n\tCapsules = \"fa-solid fa-capsules\",\r\n\tCaretDown = \"fa-solid fa-caret-down\",\r\n\tCaretLeft = \"fa-solid fa-caret-left\",\r\n\tCaretRight = \"fa-solid fa-caret-right\",\r\n\tCaretUp = \"fa-solid fa-caret-up\",\r\n\tCartCirclePlus = \"fa-solid fa-cart-circle-plus\",\r\n\tCartShopping = \"fa-solid fa-cart-shopping\",\r\n\tChartArea = \"fa-solid fa-chart-area\",\r\n\tChartBar = \"fa-solid fa-chart-bar\",\r\n\tChartColumn = \"fa-solid fa-chart-column\",\r\n\tChartLine = \"fa-solid fa-chart-line\",\r\n\tChartPie = \"fa-solid fa-chart-pie\",\r\n\tChartSimple = \"fa-solid fa-chart-simple\",\r\n\tChat = \"fa-solid fa-comment\",\r\n\tCheck = \"fa-solid fa-check\",\r\n\tChevronDown = \"fa-solid fa-chevron-down\",\r\n\tChevronLeft = \"fa-solid fa-chevron-left\",\r\n\tChevronRight = \"fa-solid fa-chevron-right\",\r\n\tChevronUp = \"fa-solid fa-chevron-up\",\r\n\tCircle = \"fa-solid fa-circle\",\r\n\tCircleCheck = \"fa-solid fa-circle-check\",\r\n\tCircleExclamation = \"fa-solid fa-circle-exclamation\",\r\n\tCircleInfo = \"fa-solid fa-circle-info\",\r\n\tCircleStop = \"fa-solid fa-circle-stop\",\r\n\tClipboard = \"fa-solid fa-clipboard\",\r\n\tClipboardMedical = \"fa-solid fa-clipboard-medical\",\r\n\tClock = \"fa-solid fa-clock\",\r\n\tClockRotateLeft = \"fa-solid fa-clock-rotate-left\",\r\n\tClose = \"fa-solid fa-xmark\",\r\n\tCloud = \"fa-solid fa-cloud\",\r\n\tCloudArrowUp = \"fa-solid fa-cloud-arrow-up\",\r\n\tCloudDownload = \"fa-solid fa-cloud-download\",\r\n\tCode = \"fa-solid fa-code\",\r\n\tCodeMerge = \"fa-solid fa-code-merge\",\r\n\tCoins = \"fa-solid fa-coins\",\r\n\tCollapse = \"fa-solid fa-compress\",\r\n\tComment = \"fa-solid fa-comment\",\r\n\tCommentDots = \"fa-solid fa-comment-dots\",\r\n\tCommentLines = \"fa-solid fa-comment-lines\",\r\n\tComments = \"fa-solid fa-comments\",\r\n\tCommentSms = \"fa-solid fa-comment-sms\",\r\n\tCompress = \"fa-solid fa-compress\",\r\n\tCopy = \"fa-solid fa-copy\",\r\n\tCopyright = \"fa-solid fa-copyright\",\r\n\tCreditCard = \"fa-solid fa-credit-card\",\r\n\tCrown = \"fa-solid fa-crown\",\r\n\t//#endregion\r\n\r\n\t//#region D\r\n\tDatabase = \"fa-solid fa-database\",\r\n\tDelete = \"fa-solid fa-xmark\",\r\n\tDeleteLeft = \"fa-solid fa-delete-left\",\r\n\tDeleteRight = \"fa-solid fa-delete-right\",\r\n\tDesktop = \"fa-solid fa-desktop\",\r\n\tDownload = \"fa-solid fa-download\",\r\n\t//#endregion\r\n\r\n\t//#region E\r\n\tEdit = \"fa-solid fa-pen\",\r\n\tEject = \"fa-solid fa-eject\",\r\n\tEllipsis = \"fa-solid fa-ellipsis\",\r\n\tEllipsisVertical = \"fa-solid fa-ellipsis-vertical\",\r\n\tEnvelope = \"fa-solid fa-envelope\",\r\n\tEraser = \"fa-solid fa-eraser\",\r\n\tEuroSign = \"fa-solid fa-euro-sign\",\r\n\tExclamation = \"fa-solid fa-exclamation\",\r\n\tExpand = \"fa-solid fa-expand\",\r\n\tEye = \"fa-solid fa-eye\",\r\n\tEyeSlash = \"fa-solid fa-eye-slash\",\r\n\t//#endregion\r\n\r\n\t//#region F\r\n\tFamily = \"fa-solid fa-family\",\r\n\tFastBackward = \"fa-solid fa-fast-backward\",\r\n\tFastForward = \"fa-solid fa-fast-forward\",\r\n\tFile = \"fa-solid fa-file\",\r\n\tFileAudio = \"fa-solid fa-file-audio\",\r\n\tFileContract = \"fa-solid fa-file-contract\",\r\n\tFileDownload = \"fa-solid fa-file-download\",\r\n\tFileExcel = \"fa-solid fa-file-excel\",\r\n\tFileExport = \"fa-solid fa-file-export\",\r\n\tFileImage = \"fa-solid fa-file-image\",\r\n\tFileInvoice = \"fa-solid fa-file-invoice\",\r\n\tFileImport = \"fa-solid fa-file-import\",\r\n\tFileLines = \"fa-solid fa-file-lines\",\r\n\tFileMusic = \"fa-solid fa-file-music\",\r\n\tFilePdf = \"fa-solid fa-file-pdf\",\r\n\tFiles = \"fa-solid fa-file-files\",\r\n\tFileSignature = \"fa-solid fa-file-signature\",\r\n\tFileVideo = \"fa-solid fa-file-video\",\r\n\tFileWord = \"fa-solid fa-file-word\",\r\n\tFileZipper = \"fa-solid fa-file-zipper\",\r\n\tFilter = \"fa-solid fa-filter\",\r\n\tFlag = \"fa-solid fa-flag\",\r\n\tFlagSwallowTail = \"fa-solid fa-flag-swallowtail\",\r\n\tFloppyDisk = \"fa-solid fa-floppy-disk\",\r\n\tFolder = \"fa-solid fa-folder\",\r\n\tFolderOpen = \"fa-solid fa-folder-open\",\r\n\tFontAwesome = \"fa-solid  fa-font-awesome\",\r\n\tForward = \"fa-solid fa-forward\",\r\n\tForwardStep = \"fa-solid fa-forward-step\",\r\n\tForwardFast = \"fa-solid fa-forward-fast\",\r\n\tFutbol = \"fa-solid fa-futbol\",\r\n\t//#endregion\r\n\r\n\t//#region G\r\n\tGear = \"fa-solid fa-gear\",\r\n\tGears = \"fa-solid fa-gears\",\r\n\tGlobe = \"fa-solid fa-globe\",\r\n\t//#endregion\r\n\r\n\t//#region H\r\n\tHashtag = \"fa-solid fa-hashtag\",\r\n\tHatWizard = \"fa-solid fa-hat-wizard\",\r\n\tHeadset = \"fa-solid fa-headset\",\r\n\tHospital = \"fa-solid fa-hospital\",\r\n\tHourglass = \"fa-solid fa-hourglass\",\r\n\tHourglassClock = \"fa-solid fa-hourglass-clock\",\r\n\tHouse = \"fa-solid fa-house\",\r\n\tHouseMedical = \"fa-solid fa-house-medical\",\r\n\tHouseUser = \"fa-solid fa-house-user\",\r\n\t//#endregion\r\n\r\n\t//#region I\r\n\tImage = \"fa-solid fa-image\",\r\n\tInbox = \"fa-solid fa-inbox\",\r\n\tInboxFull = \"fa-solid fa-inbox-full\",\r\n\tInfo = \"fa-solid fa-info\",\r\n\t//#endregion\r\n\r\n\t//#region K\r\n\tKey = \"fa-solid fa-key\",\r\n\tKeyboard = \"fa-solid fa-keyboard\",\r\n\tKeySkeleton = \"fa-solid fa-key-skeleton\",\r\n\t//#endregion\r\n\r\n\t//#region L\r\n\tLaptop = \"fa-solid fa-laptop\",\r\n\tLaptopMedical = \"fa-solid fa-laptop-medical\",\r\n\tLevelDown = \"fa-solid fa-level-down\",\r\n\tLevelDownAlt = \"fa-solid fa-level-down-alt\",\r\n\tLevelLeft = \"fa-solid fa-level-left\",\r\n\tLevelLeftAlt = \"fa-solid fa-level-left-alt\",\r\n\tLevelRight = \"fa-solid fa-level-right\",\r\n\tLevelRightAlt = \"fa-solid fa-level-right-alt\",\r\n\tLevelUp = \"fa-solid fa-level-up\",\r\n\tLevelUpAlt = \"fa-solid fa-level-up-alt\",\r\n\tLink = \"fa-solid fa-link\",\r\n\tLinkExternal = \"fa-solid fa-arrow-up-right-from-square\",\r\n\tLinkHorizontal = \"fa-solid fa-link-horizontal\",\r\n\tLinkHorizontalSlash = \"fa-solid fa-link-horizontal-slash\",\r\n\tLinkSimple = \"fa-solid fa-link-simple\",\r\n\tLinkSimpleSlash = \"fa-solid fa-link-simple-slash\",\r\n\tLinkSlash = \"fa-solid fa-link-slash\",\r\n\tList = \"fa-solid fa-list\",\r\n\tListCheck = \"fa-solid fa-list-check\",\r\n\tListOl = \"fa-solid fa-list-ol\",\r\n\tListTree = \"fa-solid fa-list-tree\",\r\n\tListUl = \"fa-solid fa-list-ul\",\r\n\tLocationArrow = \"fa-solid fa-location-arrow\",\r\n\tLocationCrossHairs = \"fa-solid fa-location-crosshairs\",\r\n\tLocationCheck = \"fa-solid fa-location-check\",\r\n\tLocationDot = \"fa-solid fa-location-dot\",\r\n\tLock = \"fa-solid fa-lock\",\r\n\tLockOpen = \"fa-solid fa-lock-open\",\r\n\tLogin = \"fa-solid fa-arrow-right-to-bracket\",\r\n\tLogout = \"fa-solid fa-arrow-right-from-bracket\",\r\n\t//#endregion\r\n\r\n\t//#region M\r\n\tMagnifyingGlass = \"fa-solid fa-magnifying-glass\",\r\n\tMagnifyingGlassMinus = \"fa-solid fa-magnifying-glass-minus\",\r\n\tMagnifyingGlassPlus = \"fa-solid fa-magnifying-glass-plus\",\r\n\tMail = \"fa-solid fa-envelope\",\r\n\tMailbox = \"fa-solid fa-mailbox\",\r\n\tMailOpen = \"fa-solid fa-envelope-open\",\r\n\tMap = \"fa-solid fa-map\",\r\n\tMapLocation = \"fa-solid fa-map-location\",\r\n\tMapLocationDot = \"fa-solid fa-map-location-dot\",\r\n\tMapPin = \"fa-solid fa-map-pin\",\r\n\tMaximize = \"fa-solid fa-maximize\",\r\n\tMerge = \"fa-solid fa-merge\",\r\n\tMessage = \"fa-solid fa-message\",\r\n\tMessageCode = \"fa-solid fa-message-code\",\r\n\tMessageDots = \"fa-solid fa-message-dots\",\r\n\tMessageLines = \"fa-solid fa-message-lines\",\r\n\tMessages = \"fa-solid fa-messages\",\r\n\tMicrophone = \"fa-solid fa-microphone\",\r\n\tMicrophoneLines = \"fa-solid fa-microphone-lines\",\r\n\tMicrophoneLinesSlash = \"fa-solid fa-microphone-lines-slash\",\r\n\tMicrophoneSlash = \"fa-solid fa-microphone-slash\",\r\n\tMicroscope = \"fa-solid fa-microscope\",\r\n\tMinimize = \"fa-solid fa-minimize\",\r\n\tMinus = \"fa-solid fa-minus\",\r\n\tMobile = \"fa-solid fa-mobile\",\r\n\tMobileNotch = \"fa-solid fa-mobile-notch\",\r\n\tMoneyCheckDollarPen = \"fa-solid fa-money-check-dollar-pen\",\r\n\tMusic = \"fa-solid fa-music\",\r\n\tMusicSlash = \"fa-solid fa-music-slash\",\r\n\t//#endregion\r\n\r\n\t//#region Newspaper\r\n\tNewsPaper = \"fa-solid fa-newspaper\",\r\n\t//#endregion\r\n\r\n\t//#region P\r\n\tPalette = \"fa-solid fa-palette\",\r\n\tPaperClip = \"fa-solid fa-paperclip\",\r\n\tPaperClipVertical = \"fa-solid fa-paperclip-vertical\",\r\n\tPaperPlane = \"fa-solid fa-paper-plane\",\r\n\tPaperPlaneTop = \"fa-solid fa-paper-plane-top\",\r\n\tPaste = \"fa-solid fa-paste\",\r\n\tPause = \"fa-solid fa-pause\",\r\n\tPencil = \"fa-solid fa-pencil\",\r\n\tPen = \"fa-solid fa-pen\",\r\n\tPenToSquare = \"fa-solid fa-pen-to-square\",\r\n\tPeopleArrowsLeftRight = \"fa-solid fa-people-arrows-left-right\",\r\n\tPercentage = \"fa-solid fa-percentage\",\r\n\tPersonChalkboard = \"fa-solid fa-person-chalkboard\",\r\n\tPersonMilitaryRifle = \"fa-solid fa-person-military-rifle\",\r\n\tPhone = \"fa-solid fa-phone\",\r\n\tPlay = \"fa-solid fa-play\",\r\n\tPlayPause = \"fa-solid fa-play-pause\",\r\n\tPlus = \"fa-solid fa-plus\",\r\n\tPrint = \"fa-solid fa-print\",\r\n\tPumo = \"fa-solid fa-font-awesome\",\r\n\t//#endregion\r\n\r\n\t//#region Q\r\n\tQuestion = \"fa-solid fa-question\",\r\n\t//#endregion\r\n\r\n\t//#region R\r\n\tRedo = \"fa-solid fa-redo\",\r\n\tRedoAlt = \"fa-solid fa-redo-alt\",\r\n\tRefresh = \"fa-solid fa-arrows-rotate\",\r\n\tRemove = \"fa-solid fa-xmark\",\r\n\tRepeat = \"fa-solid fa-repeat\",\r\n\tReply = \"fa-solid fa-reply\",\r\n\tReplyAll = \"fa-solid fa-reply-all\",\r\n\tRightFromBracket = \"fa-solid fa-right-from-bracket\",\r\n\tRightToBracket = \"fa-solid fa-right-to-bracket\",\r\n\tRotate = \"fa-solid fa-rotate\",\r\n\tRotateLeft = \"fa-solid fa-rotate-left\",\r\n\t//#endregion\r\n\r\n\t//#region S\r\n\tSackDollar = \"fa-solid fa-sack-dollar\",\r\n\tSave = \"fa-solid fa-floppy-disk\",\r\n\tScissors = \"fa-solid fa-scissors\",\r\n\tScrewdriverWrench = \"fa-solid fa-screwdriver-wrench\",\r\n\tSearch = \"fa-solid fa-magnifying-glass\",\r\n\tSensorTriangleExclamation = \"fa-solid fa-sensor-triangle-exclamation\",\r\n\tSettings = \"fa-solid fa-gear\",\r\n\tShare = \"fa-solid fa-share\",\r\n\tShareAll = \"fa-solid fa-share-all\",\r\n\tShareNodes = \"fa-solid fa-share-nodes\",\r\n\tShareFromSquare = \"fa-solid fa-share-from-square\",\r\n\tShieldCheck = \"fa-solid fa-shield-check\",\r\n\tShip = \"fa-solid fa-ship\",\r\n\tSitemap = \"fa-solid fa-sitemap\",\r\n\tSoccer = \"fa-solid fa-futbol\",\r\n\tSort = \"fa-solid fa-sort\",\r\n\tSortDown = \"fa-solid fa-sort-down\",\r\n\tSortUp = \"fa-solid fa-sort-up\",\r\n\tSpinner = \"fa-solid fa-spinner\",\r\n\tSplit = \"fa-solid fa-split\",\r\n\tSquareCheck = \"fa-solid fa-square-check\",\r\n\tSquareMinus = \"fa-solid fa-square-minus\",\r\n\tSquarePen = \"fa-solid fa-square-pen\",\r\n\tStar = \"fa-solid fa-star\",\r\n\tStepBackward = \"fa-solid fa-step-backward\",\r\n\tStepForward = \"fa-solid fa-step-forward\",\r\n\tStethoscope = \"fa-solid fa-stethoscope\",\r\n\tStop = \"fa-solid fa-stop\",\r\n\t//#endregion\r\n\r\n\t//#region T\r\n\tTable = \"fa-solid fa-table\",\r\n\tTableRows = \"fa-solid fa-table-rows\",\r\n\tTablet = \"fa-solid fa-tablet\",\r\n\tTag = \"fa-solid fa-tag\",\r\n\tTags = \"fa-solid fa-tags\",\r\n\tTasks = \"fa-solid fa-tasks\",\r\n\tThumbsDown = \"fa-solid fa-thumbs-down\",\r\n\tThumbsUp = \"fa-solid fa-thumbs-up\",\r\n\tThumbtack = \"fa-solid fa-thumbtack\",\r\n\tTrash = \"fa-solid fa-trash\",\r\n\tTrashCanList = \"fa-solid fa-trash-can-list\",\r\n\tTrashUndo = \"fa-solid fa-trash-undo\",\r\n\tTrashXmark = \"fa-solid fa-trash-xmark\",\r\n\tTriangleExclamation = \"fa-solid fa-triangle-exclamation\",\r\n\tTruck = \"fa-solid fa-truck\",\r\n\t//#endregion\r\n\r\n\t//#region U\r\n\tUndo = \"fa-solid fa-arrow-rotate-left\",\r\n\tUnlock = \"fa-solid fa-unlock\",\r\n\tUpload = \"fa-solid fa-upload\",\r\n\tUsbDrive = \"fa-solid fa-usb-drive\",\r\n\tUser = \"fa-solid fa-user\",\r\n\tUserCheck = \"fa-solid fa-user-check\",\r\n\tUserClock = \"fa-solid fa-user-clock\",\r\n\tUserDoctor = \"fa-solid fa-user-doctor\",\r\n\tUserDoctorHair = \"fa-solid fa-user-doctor-hair\",\r\n\tUserDoctorHairLong = \"fa-solid fa-user-doctor-hair-long\",\r\n\tUserGear = \"fa-solid fa-user-gear\",\r\n\tUserGroup = \"fa-solid fa-user-group\",\r\n\tUserHair = \"fa-solid fa-user-hair\",\r\n\tUserHairLong = \"fa-solid fa-user-hair-long\",\r\n\tUserHeadset = \"fa-solid fa-user-headset\",\r\n\tUsers = \"fa-solid fa-users\",\r\n\tUserSecret = \"fa-solid fa-user-secret\",\r\n\tUsersMedical = \"fa-solid fa-users-medical\",\r\n\tUserTag = \"fa-solid fa-user-tag\",\r\n\tUserXmark = \"fa-solid fa-user-xmark\",\r\n\t//#endregion\r\n\r\n\t//#region V\r\n\tVideo = \"fa-solid fa-video\",\r\n\tVideoSlash = \"fa-solid fa-video-slash\",\r\n\tVolume = \"fa-solid fa-volume\",\r\n\tVolumeHigh = \"fa-solid fa-volume-high\",\r\n\tVolumeLow = \"fa-solid fa-volume-low\",\r\n\tVolumeOff = \"fa-solid fa-volume-off\",\r\n\tVolumeSlash = \"fa-solid fa-volume-slash\",\r\n\tVolumeXmark = \"fa-solid fa-volume-xmark\",\r\n\t//#endregion\r\n\r\n\t//#region W\r\n\tWifi = \"fa-solid fa-wifi\",\r\n\tWifiExclamation = \"fa-solid fa-wifi-exclamation\",\r\n\tWifiFair = \"fa-solid fa-wifi-fair\",\r\n\tWifiSlash = \"fa-solid fa-wifi-slash\",\r\n\tWindow = \"fa-solid fa-window\",\r\n\t//#endregion\r\n\r\n\t//#region X\r\n\tXmark = \"fa-solid fa-xmark\",\r\n\t//#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Icon Light\r\nexport enum IconClassLight\r\n{\r\n\t//#region A\r\n\tAdd = \"fa-light fa-plus\",\r\n\tAddressCard = \"fa-light fa-address-card\",\r\n\tAlert = \"fa-light fa-triangle-exclamation\",\r\n\tAngleDown = \"fa-light fa-angle-down\",\r\n\tAngleLeft = \"fa-light fa-angle-left\",\r\n\tAngleRight = \"fa-light fa-angle-right\",\r\n\tAngleUp = \"fa-light fa-angle-up\",\r\n\tAperture = \"fa-light fa-aperture\",\r\n\tArrowDown = \"fa-light fa-arrow-down\",\r\n\tArrowDownShortWide = \"fa-light fa-arrow-down-short-wide\",\r\n\tArrowDownWideShort = \"fa-light fa-arrow-down-wide-short\",\r\n\tArrowLeft = \"fa-light fa-arrow-left\",\r\n\tArrowPointer = \"fa-light fa-arrow-pointer\",\r\n\tArrowRight = \"fa-light fa-arrow-right\",\r\n\tArrowRightToBracket = \"fa-light fa-arrow-right-to-bracket\",\r\n\tArrowRightFromBracket = \"fa-light fa-arrow-right-from-bracket\",\r\n\tArrowRotateRight = \"fa-light fa-arrow-rotate-right\",\r\n\tArrowsRotate = \"fa-light fa-arrows-rotate\",\r\n\tArrowUp = \"fa-light fa-arrow-up\",\r\n\tAsterisk = \"fa-light fa-asterisk\",\r\n\tAt = \"fa-light fa-at\",\r\n\tAttachment = \"fa-light fa-paperclip\",\r\n\t//#endregion\r\n\r\n\t//#region B\r\n\tBack = \"fa-light fa-angle-left\",\r\n\tBackward = \"fa-light fa-backward\",\r\n\tBackwardFast = \"fa-light fa-backward-fast\",\r\n\tBackwardStep = \"fa-light fa-backward-step\",\r\n\tBalanceScale = \"fa-light fa-balance-scale\",\r\n\tBallotCheck = \"fa-light fa-ballot-check\",\r\n\tBan = \"fa-light fa-ban\",\r\n\tBarcode = \"fa-light fa-barcode\",\r\n\tBarcodeScan = \"fa-light fa-barcode-scan\",\r\n\tBars = \"fa-light fa-bars\",\r\n\tBarsSort = \"fa-light fa-bars-sort\",\r\n\tBell = \"fa-light fa-bell\",\r\n\tBellSlash = \"fa-light fa-bell-slash\",\r\n\tBolt = \"fa-light fa-bolt\",\r\n\tBook = \"fa-light fa-book\",\r\n\tBookOpen = \"fa-light fa-book-open\",\r\n\tBox = \"fa-light fa-box\",\r\n\tBoxArchive = \"fa-light fa-box-archive\",\r\n\tBriefCase = \"fa-light fa-brief-case\",\r\n\tBug = \"fa-light fa-bug\",\r\n\tBurger = \"fa-light fa-bars\",\r\n\t//#endregion\r\n\r\n\t//#region C\r\n\tCakeCandles = \"fa-light fa-cake-candles\",\r\n\tCalendar = \"fa-light fa-calendar\",\r\n\tCalendarAlt = \"fa-light fa-calendar-alt\",\r\n\tCalendarCheck = \"fa-light fa-calendar-check\",\r\n\tCalendarDay = \"fa-light fa-calendar-day\",\r\n\tCalendarPlus = \"fa-light fa-calendar-plus\",\r\n\tCamera = \"fa-light fa-camera\",\r\n\tCameraAlt = \"fa-light fa-camera-alt\",\r\n\tCameraWeb = \"fa-light fa-camera-web\",\r\n\tCameraWebSlash = \"fa-light fa-camera-web-slash\",\r\n\tCapsules = \"fa-light fa-capsules\",\r\n\tCaretDown = \"fa-light fa-caret-down\",\r\n\tCaretLeft = \"fa-light fa-caret-left\",\r\n\tCaretRight = \"fa-light fa-caret-right\",\r\n\tCaretUp = \"fa-light fa-caret-up\",\r\n\tCartCirclePlus = \"fa-light fa-cart-circle-plus\",\r\n\tCartShopping = \"fa-light fa-cart-shopping\",\r\n\tChartArea = \"fa-light fa-chart-area\",\r\n\tChartBar = \"fa-light fa-chart-bar\",\r\n\tChartColumn = \"fa-light fa-chart-column\",\r\n\tChartLine = \"fa-light fa-chart-line\",\r\n\tChartPie = \"fa-light fa-chart-pie\",\r\n\tChartSimple = \"fa-light fa-chart-simple\",\r\n\tChat = \"fa-light fa-comment\",\r\n\tCheck = \"fa-light fa-check\",\r\n\tChevronDown = \"fa-light fa-chevron-down\",\r\n\tChevronLeft = \"fa-light fa-chevron-left\",\r\n\tChevronRight = \"fa-light fa-chevron-right\",\r\n\tChevronUp = \"fa-light fa-chevron-up\",\r\n\tCircle = \"fa-light fa-circle\",\r\n\tCircleCheck = \"fa-light fa-circle-check\",\r\n\tCircleExclamation = \"fa-light fa-circle-exclamation\",\r\n\tCircleInfo = \"fa-light fa-circle-info\",\r\n\tCircleStop = \"fa-light fa-circle-stop\",\r\n\tClipboard = \"fa-light fa-clipboard\",\r\n\tClipboardMedical = \"fa-light fa-clipboard-medical\",\r\n\tClock = \"fa-light fa-clock\",\r\n\tClockRotateLeft = \"fa-light fa-clock-rotate-left\",\r\n\tClose = \"fa-light fa-xmark\",\r\n\tCloud = \"fa-light fa-cloud\",\r\n\tCloudArrowUp = \"fa-light fa-cloud-arrow-up\",\r\n\tCloudDownload = \"fa-light fa-cloud-download\",\r\n\tCode = \"fa-light fa-code\",\r\n\tCodeMerge = \"fa-light fa-code-merge\",\r\n\tCoins = \"fa-light fa-coins\",\r\n\tCollapse = \"fa-light fa-compress\",\r\n\tComment = \"fa-light fa-comment\",\r\n\tCommentDots = \"fa-light fa-comment-dots\",\r\n\tCommentLines = \"fa-light fa-comment-lines\",\r\n\tComments = \"fa-light fa-comments\",\r\n\tCommentSms = \"fa-light fa-comment-sms\",\r\n\tCompress = \"fa-light fa-compress\",\r\n\tCopy = \"fa-light fa-copy\",\r\n\tCopyright = \"fa-light fa-copyright\",\r\n\tCreditCard = \"fa-light fa-credit-card\",\r\n\tCrown = \"fa-light fa-crown\",\r\n\t//#endregion\r\n\r\n\t//#region D\r\n\tDatabase = \"fa-light fa-database\",\r\n\tDelete = \"fa-light fa-xmark\",\r\n\tDeleteLeft = \"fa-light fa-delete-left\",\r\n\tDeleteRight = \"fa-light fa-delete-right\",\r\n\tDesktop = \"fa-light fa-desktop\",\r\n\tDownload = \"fa-light fa-download\",\r\n\t//#endregion\r\n\r\n\t//#region E\r\n\tEdit = \"fa-light fa-pen\",\r\n\tEject = \"fa-light fa-eject\",\r\n\tEllipsis = \"fa-light fa-ellipsis\",\r\n\tEllipsisVertical = \"fa-light fa-ellipsis-vertical\",\r\n\tEnvelope = \"fa-light fa-envelope\",\r\n\tEraser = \"fa-light fa-eraser\",\r\n\tEuroSign = \"fa-light fa-euro-sign\",\r\n\tExclamation = \"fa-light fa-exclamation\",\r\n\tExpand = \"fa-light fa-expand\",\r\n\tEye = \"fa-light fa-eye\",\r\n\tEyeSlash = \"fa-light fa-eye-slash\",\r\n\t//#endregion\r\n\r\n\t//#region F\r\n\tFamily = \"fa-light fa-family\",\r\n\tFastBackward = \"fa-light fa-fast-backward\",\r\n\tFastForward = \"fa-light fa-fast-forward\",\r\n\tFile = \"fa-light fa-file\",\r\n\tFileAudio = \"fa-light fa-file-audio\",\r\n\tFileContract = \"fa-light fa-file-contract\",\r\n\tFileDownload = \"fa-light fa-file-download\",\r\n\tFileExcel = \"fa-light fa-file-excel\",\r\n\tFileExport = \"fa-light fa-file-export\",\r\n\tFileImage = \"fa-light fa-file-image\",\r\n\tFileInvoice = \"fa-light fa-file-invoice\",\r\n\tFileImport = \"fa-light fa-file-import\",\r\n\tFileLines = \"fa-light fa-file-lines\",\r\n\tFileMusic = \"fa-light fa-file-music\",\r\n\tFilePdf = \"fa-light fa-file-pdf\",\r\n\tFiles = \"fa-light fa-file-files\",\r\n\tFileSignature = \"fa-light fa-file-signature\",\r\n\tFileVideo = \"fa-light fa-file-video\",\r\n\tFileWord = \"fa-light fa-file-word\",\r\n\tFileZipper = \"fa-light fa-file-zipper\",\r\n\tFilter = \"fa-light fa-filter\",\r\n\tFlag = \"fa-light fa-flag\",\r\n\tFlagSwallowTail = \"fa-light fa-flag-swallowtail\",\r\n\tFloppyDisk = \"fa-light fa-floppy-disk\",\r\n\tFolder = \"fa-light fa-folder\",\r\n\tFolderOpen = \"fa-light fa-folder-open\",\r\n\tFontAwesome = \"fa-light  fa-font-awesome\",\r\n\tForward = \"fa-light fa-forward\",\r\n\tForwardStep = \"fa-light fa-forward-step\",\r\n\tForwardFast = \"fa-light fa-forward-fast\",\r\n\tFutbol = \"fa-light fa-futbol\",\r\n\t//#endregion\r\n\r\n\t//#region G\r\n\tGear = \"fa-light fa-gear\",\r\n\tGears = \"fa-light fa-gears\",\r\n\tGlobe = \"fa-light fa-globe\",\r\n\t//#endregion\r\n\r\n\t//#region H\r\n\tHashtag = \"fa-light fa-hashtag\",\r\n\tHatWizard = \"fa-light fa-hat-wizard\",\r\n\tHeadset = \"fa-light fa-headset\",\r\n\tHospital = \"fa-light fa-hospital\",\r\n\tHourglass = \"fa-light fa-hourglass\",\r\n\tHourglassClock = \"fa-light fa-hourglass-clock\",\r\n\tHouse = \"fa-light fa-house\",\r\n\tHouseMedical = \"fa-light fa-house-medical\",\r\n\tHouseUser = \"fa-light fa-house-user\",\r\n\t//#endregion\r\n\r\n\t//#region I\r\n\tImage = \"fa-light fa-image\",\r\n\tInbox = \"fa-light fa-inbox\",\r\n\tInboxFull = \"fa-light fa-inbox-full\",\r\n\tInfo = \"fa-light fa-info\",\r\n\t//#endregion\r\n\r\n\t//#region K\r\n\tKey = \"fa-light fa-key\",\r\n\tKeyboard = \"fa-light fa-keyboard\",\r\n\tKeySkeleton = \"fa-light fa-key-skeleton\",\r\n\t//#endregion\r\n\r\n\t//#region L\r\n\tLaptop = \"fa-light fa-laptop\",\r\n\tLaptopMedical = \"fa-light fa-laptop-medical\",\r\n\tLevelDown = \"fa-light fa-level-down\",\r\n\tLevelDownAlt = \"fa-light fa-level-down-alt\",\r\n\tLevelLeft = \"fa-light fa-level-left\",\r\n\tLevelLeftAlt = \"fa-light fa-level-left-alt\",\r\n\tLevelRight = \"fa-light fa-level-right\",\r\n\tLevelRightAlt = \"fa-light fa-level-right-alt\",\r\n\tLevelUp = \"fa-light fa-level-up\",\r\n\tLevelUpAlt = \"fa-light fa-level-up-alt\",\r\n\tLink = \"fa-light fa-link\",\r\n\tLinkExternal = \"fa-light fa-arrow-up-right-from-square\",\r\n\tLinkHorizontal = \"fa-light fa-link-horizontal\",\r\n\tLinkHorizontalSlash = \"fa-light fa-link-horizontal-slash\",\r\n\tLinkSimple = \"fa-light fa-link-simple\",\r\n\tLinkSimpleSlash = \"fa-light fa-link-simple-slash\",\r\n\tLinkSlash = \"fa-light fa-link-slash\",\r\n\tList = \"fa-light fa-list\",\r\n\tListCheck = \"fa-light fa-list-check\",\r\n\tListOl = \"fa-light fa-list-ol\",\r\n\tListTree = \"fa-light fa-list-tree\",\r\n\tListUl = \"fa-light fa-list-ul\",\r\n\tLocationArrow = \"fa-light fa-location-arrow\",\r\n\tLocationCrossHairs = \"fa-light fa-location-crosshairs\",\r\n\tLocationCheck = \"fa-light fa-location-check\",\r\n\tLocationDot = \"fa-light fa-location-dot\",\r\n\tLock = \"fa-light fa-lock\",\r\n\tLockOpen = \"fa-light fa-lock-open\",\r\n\tLogin = \"fa-light fa-arrow-right-to-bracket\",\r\n\tLogout = \"fa-light fa-arrow-right-from-bracket\",\r\n\t//#endregion\r\n\r\n\t//#region M\r\n\tMagnifyingGlass = \"fa-light fa-magnifying-glass\",\r\n\tMagnifyingGlassMinus = \"fa-light fa-magnifying-glass-minus\",\r\n\tMagnifyingGlassPlus = \"fa-light fa-magnifying-glass-plus\",\r\n\tMail = \"fa-light fa-envelope\",\r\n\tMailbox = \"fa-light fa-mailbox\",\r\n\tMailOpen = \"fa-light fa-envelope-open\",\r\n\tMap = \"fa-light fa-map\",\r\n\tMapLocation = \"fa-light fa-map-location\",\r\n\tMapLocationDot = \"fa-light fa-map-location-dot\",\r\n\tMapPin = \"fa-light fa-map-pin\",\r\n\tMaximize = \"fa-light fa-maximize\",\r\n\tMerge = \"fa-light fa-merge\",\r\n\tMessage = \"fa-light fa-message\",\r\n\tMessageCode = \"fa-light fa-message-code\",\r\n\tMessageDots = \"fa-light fa-message-dots\",\r\n\tMessageLines = \"fa-light fa-message-lines\",\r\n\tMessages = \"fa-light fa-messages\",\r\n\tMicrophone = \"fa-light fa-microphone\",\r\n\tMicrophoneLines = \"fa-light fa-microphone-lines\",\r\n\tMicrophoneLinesSlash = \"fa-light fa-microphone-lines-slash\",\r\n\tMicrophoneSlash = \"fa-light fa-microphone-slash\",\r\n\tMicroscope = \"fa-light fa-microscope\",\r\n\tMinimize = \"fa-light fa-minimize\",\r\n\tMinus = \"fa-light fa-minus\",\r\n\tMobile = \"fa-light fa-mobile\",\r\n\tMobileNotch = \"fa-light fa-mobile-notch\",\r\n\tMoneyCheckDollarPen = \"fa-light fa-money-check-dollar-pen\",\r\n\tMusic = \"fa-light fa-music\",\r\n\tMusicSlash = \"fa-light fa-music-slash\",\r\n\t//#endregion\r\n\r\n\t//#region Newspaper\r\n\tNewsPaper = \"fa-light fa-newspaper\",\r\n\t//#endregion\r\n\r\n\t//#region P\r\n\tPalette = \"fa-light fa-palette\",\r\n\tPaperClip = \"fa-light fa-paperclip\",\r\n\tPaperClipVertical = \"fa-light fa-paperclip-vertical\",\r\n\tPaperPlane = \"fa-light fa-paper-plane\",\r\n\tPaperPlaneTop = \"fa-light fa-paper-plane-top\",\r\n\tPaste = \"fa-light fa-paste\",\r\n\tPause = \"fa-light fa-pause\",\r\n\tPen = \"fa-light fa-pen\",\r\n\tPencil = \"fa-light fa-pencil\",\r\n\tPenToSquare = \"fa-light fa-pen-to-square\",\r\n\tPeopleArrowsLeftRight = \"fa-light fa-people-arrows-left-right\",\r\n\tPercentage = \"fa-light fa-percentage\",\r\n\tPersonChalkboard = \"fa-light fa-person-chalkboard\",\r\n\tPersonMilitaryRifle = \"fa-light fa-person-military-rifle\",\r\n\tPhone = \"fa-light fa-phone\",\r\n\tPlay = \"fa-light fa-play\",\r\n\tPlayPause = \"fa-light fa-play-pause\",\r\n\tPlus = \"fa-light fa-plus\",\r\n\tPrint = \"fa-light fa-print\",\r\n\tPumo = \"fa-light fa-font-awesome\",\r\n\t//#endregion\r\n\r\n\t//#region Q\r\n\tQuestion = \"fa-light fa-question\",\r\n\t//#endregion\r\n\r\n\t//#region R\r\n\tRedo = \"fa-light fa-redo\",\r\n\tRedoAlt = \"fa-light fa-redo-alt\",\r\n\tRefresh = \"fa-light fa-arrows-rotate\",\r\n\tRemove = \"fa-light fa-xmark\",\r\n\tRepeat = \"fa-light fa-repeat\",\r\n\tReply = \"fa-light fa-reply\",\r\n\tReplyAll = \"fa-light fa-reply-all\",\r\n\tRightFromBracket = \"fa-light fa-right-from-bracket\",\r\n\tRightToBracket = \"fa-light fa-right-to-bracket\",\r\n\tRotate = \"fa-light fa-rotate\",\r\n\tRotateLeft = \"fa-light fa-rotate-left\",\r\n\t//#endregion\r\n\r\n\t//#region S\r\n\tSackDollar = \"fa-light fa-sack-dollar\",\r\n\tSave = \"fa-light fa-floppy-disk\",\r\n\tScissors = \"fa-light fa-scissors\",\r\n\tScrewdriverWrench = \"fa-light fa-screwdriver-wrench\",\r\n\tSearch = \"fa-light fa-magnifying-glass\",\r\n\tSensorTriangleExclamation = \"fa-light fa-sensor-triangle-exclamation\",\r\n\tSettings = \"fa-light fa-gear\",\r\n\tShare = \"fa-light fa-share\",\r\n\tShareAll = \"fa-light fa-share-all\",\r\n\tShareNodes = \"fa-light fa-share-nodes\",\r\n\tShareFromSquare = \"fa-light fa-share-from-square\",\r\n\tShieldCheck = \"fa-light fa-shield-check\",\r\n\tShip = \"fa-light fa-ship\",\r\n\tSitemap = \"fa-light fa-sitemap\",\r\n\tSoccer = \"fa-light fa-futbol\",\r\n\tSort = \"fa-light fa-sort\",\r\n\tSortDown = \"fa-light fa-sort-down\",\r\n\tSortUp = \"fa-light fa-sort-up\",\r\n\tSpinner = \"fa-light fa-spinner\",\r\n\tSplit = \"fa-light fa-split\",\r\n\tSquareCheck = \"fa-light fa-square-check\",\r\n\tSquareMinus = \"fa-light fa-square-minus\",\r\n\tSquarePen = \"fa-light fa-square-pen\",\r\n\tStamp = \"fa-light fa-stamp\",\r\n\tStar = \"fa-light fa-star\",\r\n\tStepBackward = \"fa-light fa-step-backward\",\r\n\tStepForward = \"fa-light fa-step-forward\",\r\n\tStethoscope = \"fa-light fa-stethoscope\",\r\n\tStop = \"fa-light fa-stop\",\r\n\t//#endregion\r\n\r\n\t//#region T\r\n\tTable = \"fa-light fa-table\",\r\n\tTableRows = \"fa-light fa-table-rows\",\r\n\tTablet = \"fa-light fa-tablet\",\r\n\tTag = \"fa-light fa-tag\",\r\n\tTags = \"fa-light fa-tags\",\r\n\tTasks = \"fa-light fa-tasks\",\r\n\tThumbsDown = \"fa-light fa-thumbs-down\",\r\n\tThumbsUp = \"fa-light fa-thumbs-up\",\r\n\tThumbtack = \"fa-light fa-thumbtack\",\r\n\tTrash = \"fa-light fa-trash\",\r\n\tTrashCanList = \"fa-light fa-trash-can-list\",\r\n\tTrashUndo = \"fa-light fa-trash-undo\",\r\n\tTrashXmark = \"fa-light fa-trash-xmark\",\r\n\tTriangleExclamation = \"fa-light fa-triangle-exclamation\",\r\n\tTruck = \"fa-light fa-truck\",\r\n\t//#endregion\r\n\r\n\t//#region U\r\n\tUndo = \"fa-light fa-arrow-rotate-left\",\r\n\tUnlock = \"fa-light fa-unlock\",\r\n\tUpload = \"fa-light fa-upload\",\r\n\tUsbDrive = \"fa-light fa-usb-drive\",\r\n\tUser = \"fa-light fa-user\",\r\n\tUserCheck = \"fa-light fa-user-check\",\r\n\tUserClock = \"fa-light fa-user-clock\",\r\n\tUserDoctor = \"fa-light fa-user-doctor\",\r\n\tUserDoctorHair = \"fa-light fa-user-doctor-hair\",\r\n\tUserDoctorHairLong = \"fa-light fa-user-doctor-hair-long\",\r\n\tUserGear = \"fa-light fa-user-gear\",\r\n\tUserGroup = \"fa-light fa-user-group\",\r\n\tUserHair = \"fa-light fa-user-hair\",\r\n\tUserHairLong = \"fa-light fa-user-hair-long\",\r\n\tUserHeadset = \"fa-light fa-user-headset\",\r\n\tUsers = \"fa-light fa-users\",\r\n\tUserSecret = \"fa-light fa-user-secret\",\r\n\tUsersMedical = \"fa-light fa-users-medical\",\r\n\tUserTag = \"fa-light fa-user-tag\",\r\n\tUserXmark = \"fa-light fa-user-xmark\",\r\n\t//#endregion\r\n\r\n\t//#region V\r\n\tVideo = \"fa-light fa-video\",\r\n\tVideoSlash = \"fa-light fa-video-slash\",\r\n\tVolume = \"fa-light fa-volume\",\r\n\tVolumeHigh = \"fa-light fa-volume-high\",\r\n\tVolumeLow = \"fa-light fa-volume-low\",\r\n\tVolumeOff = \"fa-light fa-volume-off\",\r\n\tVolumeSlash = \"fa-light fa-volume-slash\",\r\n\tVolumeXmark = \"fa-light fa-volume-xmark\",\r\n\t//#endregion\r\n\r\n\t//#region W\r\n\tWifi = \"fa-light fa-wifi\",\r\n\tWifiExclamation = \"fa-light fa-wifi-exclamation\",\r\n\tWifiFair = \"fa-light fa-wifi-fair\",\r\n\tWifiSlash = \"fa-light fa-wifi-slash\",\r\n\tWindow = \"fa-light fa-window\",\r\n\t//#endregion\r\n\r\n\t//#region X\r\n\tXmark = \"fa-light fa-xmark\",\r\n\t//#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Icon Regular\r\nexport enum IconClassRegular\r\n{\r\n\t//#region A\r\n\tAdd = \"fa-regular fa-plus\",\r\n\tAddressCard = \"fa-regular fa-address-card\",\r\n\tAlert = \"fa-regular fa-triangle-exclamation\",\r\n\tAngleDown = \"fa-regular fa-angle-down\",\r\n\tAngleLeft = \"fa-regular fa-angle-left\",\r\n\tAngleRight = \"fa-regular fa-angle-right\",\r\n\tAngleUp = \"fa-regular fa-angle-up\",\r\n\tAperture = \"fa-regular fa-aperture\",\r\n\tArrowDown = \"fa-regular fa-arrow-down\",\r\n\tArrowDownShortWide = \"fa-regular fa-arrow-down-short-wide\",\r\n\tArrowDownWideShort = \"fa-regular fa-arrow-down-wide-short\",\r\n\tArrowLeft = \"fa-regular fa-arrow-left\",\r\n\tArrowPointer = \"fa-regular fa-arrow-pointer\",\r\n\tArrowRight = \"fa-regular fa-arrow-right\",\r\n\tArrowRightToBracket = \"fa-regular fa-arrow-right-to-bracket\",\r\n\tArrowRightFromBracket = \"fa-regular fa-arrow-right-from-bracket\",\r\n\tArrowRotateRight = \"fa-regular fa-arrow-rotate-right\",\r\n\tArrowsRotate = \"fa-regular fa-arrows-rotate\",\r\n\tArrowUp = \"fa-regular fa-arrow-up\",\r\n\tAsterisk = \"fa-regular fa-asterisk\",\r\n\tAt = \"fa-regular fa-at\",\r\n\tAttachment = \"fa-regular fa-paperclip\",\r\n\t//#endregion\r\n\r\n\t//#region B\r\n\tBack = \"fa-regular fa-angle-left\",\r\n\tBackward = \"fa-regular fa-backward\",\r\n\tBackwardFast = \"fa-regular fa-backward-fast\",\r\n\tBackwardStep = \"fa-regular fa-backward-step\",\r\n\tBalanceScale = \"fa-regular fa-balance-scale\",\r\n\tBallotCheck = \"fa-regular fa-ballot-check\",\r\n\tBan = \"fa-regular fa-ban\",\r\n\tBarcode = \"fa-regular fa-barcode\",\r\n\tBarcodeScan = \"fa-regular fa-barcode-scan\",\r\n\tBars = \"fa-regular fa-bars\",\r\n\tBarsSort = \"fa-regular fa-bars-sort\",\r\n\tBell = \"fa-regular fa-bell\",\r\n\tBellSlash = \"fa-regular fa-bell-slash\",\r\n\tBolt = \"fa-regular fa-bolt\",\r\n\tBook = \"fa-regular fa-book\",\r\n\tBookOpen = \"fa-regular fa-book-open\",\r\n\tBox = \"fa-regular fa-box\",\r\n\tBoxArchive = \"fa-regular fa-box-archive\",\r\n\tBriefCase = \"fa-regular fa-brief-case\",\r\n\tBug = \"fa-regular fa-bug\",\r\n\tBurger = \"fa-regular fa-bars\",\r\n\t//#endregion\r\n\r\n\t//#region C\r\n\tCakeCandles = \"fa-regular fa-cake-candles\",\r\n\tCalendar = \"fa-regular fa-calendar\",\r\n\tCalendarAlt = \"fa-regular fa-calendar-alt\",\r\n\tCalendarCheck = \"fa-regular fa-calendar-check\",\r\n\tCalendarDay = \"fa-regular fa-calendar-day\",\r\n\tCalendarPlus = \"fa-regular fa-calendar-plus\",\r\n\tCamera = \"fa-regular fa-camera\",\r\n\tCameraAlt = \"fa-regular fa-camera-alt\",\r\n\tCameraWeb = \"fa-regular fa-camera-web\",\r\n\tCameraWebSlash = \"fa-regular fa-camera-web-slash\",\r\n\tCapsules = \"fa-regular fa-capsules\",\r\n\tCaretDown = \"fa-regular fa-caret-down\",\r\n\tCaretLeft = \"fa-regular fa-caret-left\",\r\n\tCaretRight = \"fa-regular fa-caret-right\",\r\n\tCaretUp = \"fa-regular fa-caret-up\",\r\n\tCartCirclePlus = \"fa-regular fa-cart-circle-plus\",\r\n\tCartShopping = \"fa-regular fa-cart-shopping\",\r\n\tChartArea = \"fa-regular fa-chart-area\",\r\n\tChartBar = \"fa-regular fa-chart-bar\",\r\n\tChartColumn = \"fa-regular fa-chart-column\",\r\n\tChartLine = \"fa-regular fa-chart-line\",\r\n\tChartPie = \"fa-regular fa-chart-pie\",\r\n\tChartSimple = \"fa-regular fa-chart-simple\",\r\n\tChat = \"fa-regular fa-comment\",\r\n\tCheck = \"fa-regular fa-check\",\r\n\tChevronDown = \"fa-regular fa-chevron-down\",\r\n\tChevronLeft = \"fa-regular fa-chevron-left\",\r\n\tChevronRight = \"fa-regular fa-chevron-right\",\r\n\tChevronUp = \"fa-regular fa-chevron-up\",\r\n\tCircle = \"fa-regular fa-circle\",\r\n\tCircleCheck = \"fa-regular fa-circle-check\",\r\n\tCircleExclamation = \"fa-regular fa-circle-exclamation\",\r\n\tCircleInfo = \"fa-regular fa-circle-info\",\r\n\tCircleStop = \"fa-regular fa-circle-stop\",\r\n\tClipboard = \"fa-regular fa-clipboard\",\r\n\tClipboardMedical = \"fa-regular fa-clipboard-medical\",\r\n\tClock = \"fa-regular fa-clock\",\r\n\tClockRotateLeft = \"fa-regular fa-clock-rotate-left\",\r\n\tClose = \"fa-regular fa-xmark\",\r\n\tCloud = \"fa-regular fa-cloud\",\r\n\tCloudArrowUp = \"fa-regular fa-cloud-arrow-up\",\r\n\tCloudDownload = \"fa-regular fa-cloud-download\",\r\n\tCode = \"fa-regular fa-code\",\r\n\tCodeMerge = \"fa-regular fa-code-merge\",\r\n\tCoins = \"fa-regular fa-coins\",\r\n\tCollapse = \"fa-regular fa-compress\",\r\n\tComment = \"fa-regular fa-comment\",\r\n\tCommentDots = \"fa-regular fa-comment-dots\",\r\n\tCommentLines = \"fa-regular fa-comment-lines\",\r\n\tComments = \"fa-regular fa-comments\",\r\n\tCommentSms = \"fa-regular fa-comment-sms\",\r\n\tCompress = \"fa-regular fa-compress\",\r\n\tCopy = \"fa-regular fa-copy\",\r\n\tCopyright = \"fa-regular fa-copyright\",\r\n\tCreditCard = \"fa-regular fa-credit-card\",\r\n\tCrown = \"fa-regular fa-crown\",\r\n\t//#endregion\r\n\r\n\t//#region D\r\n\tDatabase = \"fa-regular fa-database\",\r\n\tDelete = \"fa-regular fa-xmark\",\r\n\tDeleteLeft = \"fa-regular fa-delete-left\",\r\n\tDeleteRight = \"fa-regular fa-delete-right\",\r\n\tDesktop = \"fa-regular fa-desktop\",\r\n\tDownload = \"fa-regular fa-download\",\r\n\t//#endregion\r\n\r\n\t//#region E\r\n\tEdit = \"fa-regular fa-pen\",\r\n\tEject = \"fa-regular fa-eject\",\r\n\tEllipsis = \"fa-regular fa-ellipsis\",\r\n\tEllipsisVertical = \"fa-regular fa-ellipsis-vertical\",\r\n\tEnvelope = \"fa-regular fa-envelope\",\r\n\tEraser = \"fa-regular fa-eraser\",\r\n\tEuroSign = \"fa-regular fa-euro-sign\",\r\n\tExclamation = \"fa-regular fa-exclamation\",\r\n\tExpand = \"fa-regular fa-expand\",\r\n\tEye = \"fa-regular fa-eye\",\r\n\tEyeSlash = \"fa-regular fa-eye-slash\",\r\n\t//#endregion\r\n\r\n\t//#region F\r\n\tFamily = \"fa-regular fa-family\",\r\n\tFastBackward = \"fa-regular fa-fast-backward\",\r\n\tFastForward = \"fa-regular fa-fast-forward\",\r\n\tFile = \"fa-regular fa-file\",\r\n\tFileAudio = \"fa-regular fa-file-audio\",\r\n\tFileContract = \"fa-regular fa-file-contract\",\r\n\tFileDownload = \"fa-regular fa-file-download\",\r\n\tFileExcel = \"fa-regular fa-file-excel\",\r\n\tFileExport = \"fa-regular fa-file-export\",\r\n\tFileImage = \"fa-regular fa-file-image\",\r\n\tFileInvoice = \"fa-regular fa-file-invoice\",\r\n\tFileImport = \"fa-regular fa-file-import\",\r\n\tFileLines = \"fa-regular fa-file-lines\",\r\n\tFileMusic = \"fa-regular fa-file-music\",\r\n\tFilePdf = \"fa-regular fa-file-pdf\",\r\n\tFiles = \"fa-regular fa-file-files\",\r\n\tFileSignature = \"fa-regular fa-file-signature\",\r\n\tFileVideo = \"fa-regular fa-file-video\",\r\n\tFileWord = \"fa-regular fa-file-word\",\r\n\tFileZipper = \"fa-regular fa-file-zipper\",\r\n\tFilter = \"fa-regular fa-filter\",\r\n\tFlag = \"fa-regular fa-flag\",\r\n\tFlagSwallowTail = \"fa-regular fa-flag-swallowtail\",\r\n\tFloppyDisk = \"fa-regular fa-floppy-disk\",\r\n\tFolder = \"fa-regular fa-folder\",\r\n\tFolderOpen = \"fa-regular fa-folder-open\",\r\n\tFontAwesome = \"fa-regular  fa-font-awesome\",\r\n\tForward = \"fa-regular fa-forward\",\r\n\tForwardStep = \"fa-regular fa-forward-step\",\r\n\tForwardFast = \"fa-regular fa-forward-fast\",\r\n\tFutbol = \"fa-regular fa-futbol\",\r\n\t//#endregion\r\n\r\n\t//#region G\r\n\tGear = \"fa-regular fa-gear\",\r\n\tGears = \"fa-regular fa-gears\",\r\n\tGlobe = \"fa-regular fa-globe\",\r\n\t//#endregion\r\n\r\n\t//#region H\r\n\tHashtag = \"fa-regular fa-hashtag\",\r\n\tHatWizard = \"fa-regular fa-hat-wizard\",\r\n\tHeadset = \"fa-regular fa-headset\",\r\n\tHospital = \"fa-regular fa-hospital\",\r\n\tHourglass = \"fa-regular fa-hourglass\",\r\n\tHourglassClock = \"fa-regular fa-hourglass-clock\",\r\n\tHouse = \"fa-regular fa-house\",\r\n\tHouseMedical = \"fa-regular fa-house-medical\",\r\n\tHouseUser = \"fa-regular fa-house-user\",\r\n\t//#endregion\r\n\r\n\t//#region I\r\n\tImage = \"fa-regular fa-image\",\r\n\tInbox = \"fa-regular fa-inbox\",\r\n\tInboxFull = \"fa-regular fa-inbox-full\",\r\n\tInfo = \"fa-regular fa-info\",\r\n\t//#endregion\r\n\r\n\t//#region K\r\n\tKey = \"fa-regular fa-key\",\r\n\tKeyboard = \"fa-regular fa-keyboard\",\r\n\tKeySkeleton = \"fa-regular fa-key-skeleton\",\r\n\t//#endregion\r\n\r\n\t//#region L\r\n\tLaptop = \"fa-regular fa-laptop\",\r\n\tLaptopMedical = \"fa-regular fa-laptop-medical\",\r\n\tLevelDown = \"fa-regular fa-level-down\",\r\n\tLevelDownAlt = \"fa-regular fa-level-down-alt\",\r\n\tLevelLeft = \"fa-regular fa-level-left\",\r\n\tLevelLeftAlt = \"fa-regular fa-level-left-alt\",\r\n\tLevelRight = \"fa-regular fa-level-right\",\r\n\tLevelRightAlt = \"fa-regular fa-level-right-alt\",\r\n\tLevelUp = \"fa-regular fa-level-up\",\r\n\tLevelUpAlt = \"fa-regular fa-level-up-alt\",\r\n\tLink = \"fa-regular fa-link\",\r\n\tLinkExternal = \"fa-regular fa-arrow-up-right-from-square\",\r\n\tLinkHorizontal = \"fa-regular fa-link-horizontal\",\r\n\tLinkHorizontalSlash = \"fa-regular fa-link-horizontal-slash\",\r\n\tLinkSimple = \"fa-regular fa-link-simple\",\r\n\tLinkSimpleSlash = \"fa-regular fa-link-simple-slash\",\r\n\tLinkSlash = \"fa-regular fa-link-slash\",\r\n\tList = \"fa-regular fa-list\",\r\n\tListCheck = \"fa-regular fa-list-check\",\r\n\tListOl = \"fa-regular fa-list-ol\",\r\n\tListTree = \"fa-regular fa-list-tree\",\r\n\tListUl = \"fa-regular fa-list-ul\",\r\n\tLocationArrow = \"fa-regular fa-location-arrow\",\r\n\tLocationCrossHairs = \"fa-regular fa-location-crosshairs\",\r\n\tLocationCheck = \"fa-regular fa-location-check\",\r\n\tLocationDot = \"fa-regular fa-location-dot\",\r\n\tLock = \"fa-regular fa-lock\",\r\n\tLockOpen = \"fa-regular fa-lock-open\",\r\n\tLogin = \"fa-regular fa-arrow-right-to-bracket\",\r\n\tLogout = \"fa-regular fa-arrow-right-from-bracket\",\r\n\t//#endregion\r\n\r\n\t//#region M\r\n\tMagnifyingGlass = \"fa-regular fa-magnifying-glass\",\r\n\tMagnifyingGlassMinus = \"fa-regular fa-magnifying-glass-minus\",\r\n\tMagnifyingGlassPlus = \"fa-regular fa-magnifying-glass-plus\",\r\n\tMail = \"fa-regular fa-envelope\",\r\n\tMailbox = \"fa-regular fa-mailbox\",\r\n\tMailOpen = \"fa-regular fa-envelope-open\",\r\n\tMap = \"fa-regular fa-map\",\r\n\tMapLocation = \"fa-regular fa-map-location\",\r\n\tMapLocationDot = \"fa-regular fa-map-location-dot\",\r\n\tMapPin = \"fa-regular fa-map-pin\",\r\n\tMaximize = \"fa-regular fa-maximize\",\r\n\tMerge = \"fa-regular fa-merge\",\r\n\tMessage = \"fa-regular fa-message\",\r\n\tMessageCode = \"fa-regular fa-message-code\",\r\n\tMessageDots = \"fa-regular fa-message-dots\",\r\n\tMessageLines = \"fa-regular fa-message-lines\",\r\n\tMessages = \"fa-regular fa-messages\",\r\n\tMicrophone = \"fa-regular fa-microphone\",\r\n\tMicrophoneLines = \"fa-regular fa-microphone-lines\",\r\n\tMicrophoneLinesSlash = \"fa-regular fa-microphone-lines-slash\",\r\n\tMicrophoneSlash = \"fa-regular fa-microphone-slash\",\r\n\tMicroscope = \"fa-regular fa-microscope\",\r\n\tMinimize = \"fa-regular fa-minimize\",\r\n\tMinus = \"fa-regular fa-minus\",\r\n\tMobile = \"fa-regular fa-mobile\",\r\n\tMobileNotch = \"fa-regular fa-mobile-notch\",\r\n\tMoneyCheckDollarPen = \"fa-regular fa-money-check-dollar-pen\",\r\n\tMusic = \"fa-regular fa-music\",\r\n\tMusicSlash = \"fa-regular fa-music-slash\",\r\n\t//#endregion\r\n\r\n\t//#region Newspaper\r\n\tNewsPaper = \"fa-regular fa-newspaper\",\r\n\t//#endregion\r\n\r\n\t//#region P\r\n\tPalette = \"fa-regular fa-palette\",\r\n\tPaperClip = \"fa-regular fa-paperclip\",\r\n\tPaperClipVertical = \"fa-regular fa-paperclip-vertical\",\r\n\tPaperPlane = \"fa-regular fa-paper-plane\",\r\n\tPaperPlaneTop = \"fa-regular fa-paper-plane-top\",\r\n\tPaste = \"fa-regular fa-paste\",\r\n\tPause = \"fa-regular fa-pause\",\r\n\tPen = \"fa-regular fa-pen\",\r\n\tPencil = \"fa-regular fa-pencil\",\r\n\tPenToSquare = \"fa-regular fa-pen-to-square\",\r\n\tPeopleArrowsLeftRight = \"fa-regular fa-people-arrows-left-right\",\r\n\tPercentage = \"fa-regular fa-percentage\",\r\n\tPersonChalkboard = \"fa-regular fa-person-chalkboard\",\r\n\tPersonMilitaryRifle = \"fa-regular fa-person-military-rifle\",\r\n\tPhone = \"fa-regular fa-phone\",\r\n\tPlay = \"fa-regular fa-play\",\r\n\tPlayPause = \"fa-regular fa-play-pause\",\r\n\tPlus = \"fa-regular fa-plus\",\r\n\tPrint = \"fa-regular fa-print\",\r\n\tPumo = \"fa-regular fa-font-awesome\",\r\n\t//#endregion\r\n\r\n\t//#region Q\r\n\tQuestion = \"fa-regular fa-question\",\r\n\t//#endregion\r\n\r\n\t//#region R\r\n\tRedo = \"fa-regular fa-redo\",\r\n\tRedoAlt = \"fa-regular fa-redo-alt\",\r\n\tRefresh = \"fa-regular fa-arrows-rotate\",\r\n\tRemove = \"fa-regular fa-xmark\",\r\n\tRepeat = \"fa-regular fa-repeat\",\r\n\tReply = \"fa-regular fa-reply\",\r\n\tReplyAll = \"fa-regular fa-reply-all\",\r\n\tRightFromBracket = \"fa-regular fa-right-from-bracket\",\r\n\tRightToBracket = \"fa-regular fa-right-to-bracket\",\r\n\tRotate = \"fa-regular fa-rotate\",\r\n\tRotateLeft = \"fa-regular fa-rotate-left\",\r\n\t//#endregion\r\n\r\n\t//#region S\r\n\tSackDollar = \"fa-regular fa-sack-dollar\",\r\n\tSave = \"fa-regular fa-floppy-disk\",\r\n\tScissors = \"fa-regular fa-scissors\",\r\n\tScrewdriverWrench = \"fa-regular fa-screwdriver-wrench\",\r\n\tSearch = \"fa-regular fa-magnifying-glass\",\r\n\tSensorTriangleExclamation = \"fa-regular fa-sensor-triangle-exclamation\",\r\n\tSettings = \"fa-regular fa-gear\",\r\n\tShare = \"fa-regular fa-share\",\r\n\tShareAll = \"fa-regular fa-share-all\",\r\n\tShareNodes = \"fa-regular fa-share-nodes\",\r\n\tShareFromSquare = \"fa-regular fa-share-from-square\",\r\n\tShieldCheck = \"fa-regular fa-shield-check\",\r\n\tShip = \"fa-regular fa-ship\",\r\n\tSitemap = \"fa-regular fa-sitemap\",\r\n\tSoccer = \"fa-regular fa-futbol\",\r\n\tSort = \"fa-regular fa-sort\",\r\n\tSortDown = \"fa-regular fa-sort-down\",\r\n\tSortUp = \"fa-regular fa-sort-up\",\r\n\tSpinner = \"fa-regular fa-spinner\",\r\n\tSplit = \"fa-regular fa-split\",\r\n\tSquareCheck = \"fa-regular fa-square-check\",\r\n\tSquareMinus = \"fa-regular fa-square-minus\",\r\n\tSquarePen = \"fa-regular fa-square-pen\",\r\n\tStamp = \"fa-regular fa-stamp\",\r\n\tStar = \"fa-regular fa-star\",\r\n\tStepBackward = \"fa-regular fa-step-backward\",\r\n\tStepForward = \"fa-regular fa-step-forward\",\r\n\tStethoscope = \"fa-regular fa-stethoscope\",\r\n\tStop = \"fa-regular fa-stop\",\r\n\t//#endregion\r\n\r\n\t//#region T\r\n\tTable = \"fa-regular fa-table\",\r\n\tTableRows = \"fa-regular fa-table-rows\",\r\n\tTablet = \"fa-regular fa-tablet\",\r\n\tTag = \"fa-regular fa-tag\",\r\n\tTags = \"fa-regular fa-tags\",\r\n\tTasks = \"fa-regular fa-tasks\",\r\n\tThumbsDown = \"fa-regular fa-thumbs-down\",\r\n\tThumbsUp = \"fa-regular fa-thumbs-up\",\r\n\tThumbtack = \"fa-regular fa-thumbtack\",\r\n\tTrash = \"fa-regular fa-trash\",\r\n\tTrashCanList = \"fa-regular fa-trash-can-list\",\r\n\tTrashUndo = \"fa-regular fa-trash-undo\",\r\n\tTrashXmark = \"fa-regular fa-trash-xmark\",\r\n\tTriangleExclamation = \"fa-regular fa-triangle-exclamation\",\r\n\tTruck = \"fa-regular fa-truck\",\r\n\t//#endregion\r\n\r\n\t//#region U\r\n\tUndo = \"fa-regular fa-arrow-rotate-left\",\r\n\tUnlock = \"fa-regular fa-unlock\",\r\n\tUpload = \"fa-regular fa-upload\",\r\n\tUsbDrive = \"fa-regular fa-usb-drive\",\r\n\tUser = \"fa-regular fa-user\",\r\n\tUserCheck = \"fa-regular fa-user-check\",\r\n\tUserClock = \"fa-regular fa-user-clock\",\r\n\tUserDoctor = \"fa-regular fa-user-doctor\",\r\n\tUserDoctorHair = \"fa-regular fa-user-doctor-hair\",\r\n\tUserDoctorHairLong = \"fa-regular fa-user-doctor-hair-long\",\r\n\tUserGear = \"fa-regular fa-user-gear\",\r\n\tUserGroup = \"fa-regular fa-user-group\",\r\n\tUserHair = \"fa-regular fa-user-hair\",\r\n\tUserHairLong = \"fa-regular fa-user-hair-long\",\r\n\tUserHeadset = \"fa-regular fa-user-headset\",\r\n\tUsers = \"fa-regular fa-users\",\r\n\tUserSecret = \"fa-regular fa-user-secret\",\r\n\tUsersMedical = \"fa-regular fa-users-medical\",\r\n\tUserTag = \"fa-regular fa-user-tag\",\r\n\tUserXmark = \"fa-regular fa-user-xmark\",\r\n\t//#endregion\r\n\r\n\t//#region V\r\n\tVideo = \"fa-regular fa-video\",\r\n\tVideoSlash = \"fa-regular fa-video-slash\",\r\n\tVolume = \"fa-regular fa-volume\",\r\n\tVolumeHigh = \"fa-regular fa-volume-high\",\r\n\tVolumeLow = \"fa-regular fa-volume-low\",\r\n\tVolumeOff = \"fa-regular fa-volume-off\",\r\n\tVolumeSlash = \"fa-regular fa-volume-slash\",\r\n\tVolumeXmark = \"fa-regular fa-volume-xmark\",\r\n\t//#endregion\r\n\r\n\t//#region W\r\n\tWifi = \"fa-regular fa-wifi\",\r\n\tWifiExclamation = \"fa-regular fa-wifi-exclamation\",\r\n\tWifiFair = \"fa-regular fa-wifi-fair\",\r\n\tWifiSlash = \"fa-regular fa-wifi-slash\",\r\n\tWindow = \"fa-regular fa-window\",\r\n\t//#endregion\r\n\r\n\t//#region X\r\n\tXmark = \"fa-regular fa-xmark\",\r\n\t//#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Icon Duotone\r\nexport enum IconClassDuotone\r\n{\r\n\t//#region A\r\n\tAdd = \"fa-duotone fa-plus\",\r\n\tAddressCard = \"fa-duotone fa-address-card\",\r\n\tAlert = \"fa-duotone fa-triangle-exclamation\",\r\n\tAngleDown = \"fa-duotone fa-angle-down\",\r\n\tAngleLeft = \"fa-duotone fa-angle-left\",\r\n\tAngleRight = \"fa-duotone fa-angle-right\",\r\n\tAngleUp = \"fa-duotone fa-angle-up\",\r\n\tAperture = \"fa-duotone fa-aperture\",\r\n\tArrowDown = \"fa-duotone fa-arrow-down\",\r\n\tArrowDownShortWide = \"fa-duotone fa-arrow-down-short-wide\",\r\n\tArrowDownWideShort = \"fa-duotone fa-arrow-down-wide-short\",\r\n\tArrowLeft = \"fa-duotone fa-arrow-left\",\r\n\tArrowPointer = \"fa-duotone fa-arrow-pointer\",\r\n\tArrowRight = \"fa-duotone fa-arrow-right\",\r\n\tArrowRightToBracket = \"fa-duotone fa-arrow-right-to-bracket\",\r\n\tArrowRightFromBracket = \"fa-duotone fa-arrow-right-from-bracket\",\r\n\tArrowRotateRight = \"fa-duotone fa-arrow-rotate-right\",\r\n\tArrowsRotate = \"fa-duotone fa-arrows-rotate\",\r\n\tArrowUp = \"fa-duotone fa-arrow-up\",\r\n\tAsterisk = \"fa-duotone fa-asterisk\",\r\n\tAt = \"fa-duotone fa-at\",\r\n\tAttachment = \"fa-duotone fa-paperclip\",\r\n\t//#endregion\r\n\r\n\t//#region B\r\n\tBack = \"fa-duotone fa-angle-left\",\r\n\tBackward = \"fa-duotone fa-backward\",\r\n\tBackwardFast = \"fa-duotone fa-backward-fast\",\r\n\tBackwardStep = \"fa-duotone fa-backward-step\",\r\n\tBalanceScale = \"fa-duotone fa-balance-scale\",\r\n\tBallotCheck = \"fa-duotone fa-ballot-check\",\r\n\tBan = \"fa-duotone fa-ban\",\r\n\tBarcode = \"fa-duotone fa-barcode\",\r\n\tBarcodeScan = \"fa-duotone fa-barcode-scan\",\r\n\tBars = \"fa-duotone fa-bars\",\r\n\tBarsSort = \"fa-duotone fa-bars-sort\",\r\n\tBell = \"fa-duotone fa-bell\",\r\n\tBellSlash = \"fa-duotone fa-bell-slash\",\r\n\tBolt = \"fa-duotone fa-bolt\",\r\n\tBook = \"fa-duotone fa-book\",\r\n\tBookOpen = \"fa-duotone fa-book-open\",\r\n\tBox = \"fa-duotone fa-box\",\r\n\tBoxArchive = \"fa-duotone fa-box-archive\",\r\n\tBriefCase = \"fa-duotone fa-brief-case\",\r\n\tBug = \"fa-duotone fa-bug\",\r\n\tBurger = \"fa-duotone fa-bars\",\r\n\t//#endregion\r\n\r\n\t//#region C\r\n\tCakeCandles = \"fa-duotone fa-cake-candles\",\r\n\tCalendar = \"fa-duotone fa-calendar\",\r\n\tCalendarAlt = \"fa-duotone fa-calendar-alt\",\r\n\tCalendarCheck = \"fa-duotone fa-calendar-check\",\r\n\tCalendarDay = \"fa-duotone fa-calendar-day\",\r\n\tCalendarPlus = \"fa-duotone fa-calendar-plus\",\r\n\tCamera = \"fa-duotone fa-camera\",\r\n\tCameraAlt = \"fa-duotone fa-camera-alt\",\r\n\tCameraWeb = \"fa-duotone fa-camera-web\",\r\n\tCameraWebSlash = \"fa-duotone fa-camera-web-slash\",\r\n\tCapsules = \"fa-duotone fa-capsules\",\r\n\tCaretDown = \"fa-duotone fa-caret-down\",\r\n\tCaretLeft = \"fa-duotone fa-caret-left\",\r\n\tCaretRight = \"fa-duotone fa-caret-right\",\r\n\tCaretUp = \"fa-duotone fa-caret-up\",\r\n\tCartCirclePlus = \"fa-duotone fa-cart-circle-plus\",\r\n\tCartShopping = \"fa-duotone fa-cart-shopping\",\r\n\tChartArea = \"fa-duotone fa-chart-area\",\r\n\tChartBar = \"fa-duotone fa-chart-bar\",\r\n\tChartColumn = \"fa-duotone fa-chart-column\",\r\n\tChartLine = \"fa-duotone fa-chart-line\",\r\n\tChartPie = \"fa-duotone fa-chart-pie\",\r\n\tChartSimple = \"fa-duotone fa-chart-simple\",\r\n\tChat = \"fa-duotone fa-comment\",\r\n\tCheck = \"fa-duotone fa-check\",\r\n\tChevronDown = \"fa-duotone fa-chevron-down\",\r\n\tChevronLeft = \"fa-duotone fa-chevron-left\",\r\n\tChevronRight = \"fa-duotone fa-chevron-right\",\r\n\tChevronUp = \"fa-duotone fa-chevron-up\",\r\n\tCircle = \"fa-duotone fa-circle\",\r\n\tCircleCheck = \"fa-duotone fa-circle-check\",\r\n\tCircleExclamation = \"fa-duotone fa-circle-exclamation\",\r\n\tCircleInfo = \"fa-duotone fa-circle-info\",\r\n\tCircleStop = \"fa-duotone fa-circle-stop\",\r\n\tClipboard = \"fa-duotone fa-clipboard\",\r\n\tClipboardMedical = \"fa-duotone fa-clipboard-medical\",\r\n\tClock = \"fa-duotone fa-clock\",\r\n\tClockRotateLeft = \"fa-duotone fa-clock-rotate-left\",\r\n\tClose = \"fa-duotone fa-xmark\",\r\n\tCloud = \"fa-duotone fa-cloud\",\r\n\tCloudArrowUp = \"fa-duotone fa-cloud-arrow-up\",\r\n\tCloudDownload = \"fa-duotone fa-cloud-download\",\r\n\tCode = \"fa-duotone fa-code\",\r\n\tCodeMerge = \"fa-duotone fa-code-merge\",\r\n\tCoins = \"fa-duotone fa-coins\",\r\n\tCollapse = \"fa-duotone fa-compress\",\r\n\tComment = \"fa-duotone fa-comment\",\r\n\tCommentDots = \"fa-duotone fa-comment-dots\",\r\n\tCommentLines = \"fa-duotone fa-comment-lines\",\r\n\tComments = \"fa-duotone fa-comments\",\r\n\tCommentSms = \"fa-duotone fa-comment-sms\",\r\n\tCompress = \"fa-duotone fa-compress\",\r\n\tCopy = \"fa-duotone fa-copy\",\r\n\tCopyright = \"fa-duotone fa-copyright\",\r\n\tCreditCard = \"fa-duotone fa-credit-card\",\r\n\tCrown = \"fa-duotone fa-crown\",\r\n\t//#endregion\r\n\r\n\t//#region D\r\n\tDatabase = \"fa-duotone fa-database\",\r\n\tDelete = \"fa-duotone fa-xmark\",\r\n\tDeleteLeft = \"fa-duotone fa-delete-left\",\r\n\tDeleteRight = \"fa-duotone fa-delete-right\",\r\n\tDesktop = \"fa-duotone fa-desktop\",\r\n\tDownload = \"fa-duotone fa-download\",\r\n\t//#endregion\r\n\r\n\t//#region E\r\n\tEdit = \"fa-duotone fa-pen\",\r\n\tEject = \"fa-duotone fa-eject\",\r\n\tEllipsis = \"fa-duotone fa-ellipsis\",\r\n\tEllipsisVertical = \"fa-duotone fa-ellipsis-vertical\",\r\n\tEnvelope = \"fa-duotone fa-envelope\",\r\n\tEraser = \"fa-duotone fa-eraser\",\r\n\tEuroSign = \"fa-duotone fa-euro-sign\",\r\n\tExclamation = \"fa-duotone fa-exclamation\",\r\n\tExpand = \"fa-duotone fa-expand\",\r\n\tEye = \"fa-duotone fa-eye\",\r\n\tEyeSlash = \"fa-duotone fa-eye-slash\",\r\n\t//#endregion\r\n\r\n\t//#region F\r\n\tFamily = \"fa-duotone fa-family\",\r\n\tFastBackward = \"fa-duotone fa-fast-backward\",\r\n\tFastForward = \"fa-duotone fa-fast-forward\",\r\n\tFile = \"fa-duotone fa-file\",\r\n\tFileAudio = \"fa-duotone fa-file-audio\",\r\n\tFileContract = \"fa-duotone fa-file-contract\",\r\n\tFileDownload = \"fa-duotone fa-file-download\",\r\n\tFileExcel = \"fa-duotone fa-file-excel\",\r\n\tFileExport = \"fa-duotone fa-file-export\",\r\n\tFileImage = \"fa-duotone fa-file-image\",\r\n\tFileInvoice = \"fa-duotone fa-file-invoice\",\r\n\tFileImport = \"fa-duotone fa-file-import\",\r\n\tFileLines = \"fa-duotone fa-file-lines\",\r\n\tFileMusic = \"fa-duotone fa-file-music\",\r\n\tFilePdf = \"fa-duotone fa-file-pdf\",\r\n\tFiles = \"fa-duotone fa-file-files\",\r\n\tFileSignature = \"fa-duotone fa-file-signature\",\r\n\tFileVideo = \"fa-duotone fa-file-video\",\r\n\tFileWord = \"fa-duotone fa-file-word\",\r\n\tFileZipper = \"fa-duotone fa-file-zipper\",\r\n\tFilter = \"fa-duotone fa-filter\",\r\n\tFlag = \"fa-duotone fa-flag\",\r\n\tFlagSwallowTail = \"fa-duotone fa-flag-swallowtail\",\r\n\tFloppyDisk = \"fa-duotone fa-floppy-disk\",\r\n\tFolder = \"fa-duotone fa-folder\",\r\n\tFolderOpen = \"fa-duotone fa-folder-open\",\r\n\tFontAwesome = \"fa-duotone  fa-font-awesome\",\r\n\tForward = \"fa-duotone fa-forward\",\r\n\tForwardStep = \"fa-duotone fa-forward-step\",\r\n\tForwardFast = \"fa-duotone fa-forward-fast\",\r\n\tFutbol = \"fa-duotone fa-futbol\",\r\n\t//#endregion\r\n\r\n\t//#region G\r\n\tGear = \"fa-duotone fa-gear\",\r\n\tGears = \"fa-duotone fa-gears\",\r\n\tGlobe = \"fa-duotone fa-globe\",\r\n\t//#endregion\r\n\r\n\t//#region H\r\n\tHashtag = \"fa-duotone fa-hashtag\",\r\n\tHatWizard = \"fa-duotone fa-hat-wizard\",\r\n\tHeadset = \"fa-duotone fa-headset\",\r\n\tHospital = \"fa-duotone fa-hospital\",\r\n\tHourglass = \"fa-duotone fa-hourglass\",\r\n\tHourglassClock = \"fa-duotone fa-hourglass-clock\",\r\n\tHouse = \"fa-duotone fa-house\",\r\n\tHouseMedical = \"fa-duotone fa-house-medical\",\r\n\tHouseUser = \"fa-duotone fa-house-user\",\r\n\t//#endregion\r\n\r\n\t//#region I\r\n\tImage = \"fa-duotone fa-image\",\r\n\tInbox = \"fa-duotone fa-inbox\",\r\n\tInboxFull = \"fa-duotone fa-inbox-full\",\r\n\tInfo = \"fa-duotone fa-info\",\r\n\t//#endregion\r\n\r\n\t//#region K\r\n\tKey = \"fa-duotone fa-key\",\r\n\tKeyboard = \"fa-duotone fa-keyboard\",\r\n\tKeySkeleton = \"fa-duotone fa-key-skeleton\",\r\n\t//#endregion\r\n\r\n\t//#region L\r\n\tLaptop = \"fa-duotone fa-laptop\",\r\n\tLaptopMedical = \"fa-duotone fa-laptop-medical\",\r\n\tLevelDown = \"fa-duotone fa-level-down\",\r\n\tLevelDownAlt = \"fa-duotone fa-level-down-alt\",\r\n\tLevelLeft = \"fa-duotone fa-level-left\",\r\n\tLevelLeftAlt = \"fa-duotone fa-level-left-alt\",\r\n\tLevelRight = \"fa-duotone fa-level-right\",\r\n\tLevelRightAlt = \"fa-duotone fa-level-right-alt\",\r\n\tLevelUp = \"fa-duotone fa-level-up\",\r\n\tLevelUpAlt = \"fa-duotone fa-level-up-alt\",\r\n\tLink = \"fa-duotone fa-link\",\r\n\tLinkExternal = \"fa-duotone fa-arrow-up-right-from-square\",\r\n\tLinkHorizontal = \"fa-duotone fa-link-horizontal\",\r\n\tLinkHorizontalSlash = \"fa-duotone fa-link-horizontal-slash\",\r\n\tLinkSimple = \"fa-duotone fa-link-simple\",\r\n\tLinkSimpleSlash = \"fa-duotone fa-link-simple-slash\",\r\n\tLinkSlash = \"fa-duotone fa-link-slash\",\r\n\tList = \"fa-duotone fa-list\",\r\n\tListCheck = \"fa-duotone fa-list-check\",\r\n\tListOl = \"fa-duotone fa-list-ol\",\r\n\tListTree = \"fa-duotone fa-list-tree\",\r\n\tListUl = \"fa-duotone fa-list-ul\",\r\n\tLocationArrow = \"fa-duotone fa-location-arrow\",\r\n\tLocationCrossHairs = \"fa-duotone fa-location-crosshairs\",\r\n\tLocationCheck = \"fa-duotone fa-location-check\",\r\n\tLocationDot = \"fa-duotone fa-location-dot\",\r\n\tLock = \"fa-duotone fa-lock\",\r\n\tLockOpen = \"fa-duotone fa-lock-open\",\r\n\tLogin = \"fa-duotone fa-arrow-right-to-bracket\",\r\n\tLogout = \"fa-duotone fa-arrow-right-from-bracket\",\r\n\t//#endregion\r\n\r\n\t//#region M\r\n\tMagnifyingGlass = \"fa-duotone fa-magnifying-glass\",\r\n\tMagnifyingGlassMinus = \"fa-duotone fa-magnifying-glass-minus\",\r\n\tMagnifyingGlassPlus = \"fa-duotone fa-magnifying-glass-plus\",\r\n\tMail = \"fa-duotone fa-envelope\",\r\n\tMailbox = \"fa-duotone fa-mailbox\",\r\n\tMailOpen = \"fa-duotone fa-envelope-open\",\r\n\tMap = \"fa-duotone fa-map\",\r\n\tMapLocation = \"fa-duotone fa-map-location\",\r\n\tMapLocationDot = \"fa-duotone fa-map-location-dot\",\r\n\tMapPin = \"fa-duotone fa-map-pin\",\r\n\tMaximize = \"fa-duotone fa-maximize\",\r\n\tMerge = \"fa-duotone fa-merge\",\r\n\tMessage = \"fa-duotone fa-message\",\r\n\tMessageCode = \"fa-duotone fa-message-code\",\r\n\tMessageDots = \"fa-duotone fa-message-dots\",\r\n\tMessageLines = \"fa-duotone fa-message-lines\",\r\n\tMessages = \"fa-duotone fa-messages\",\r\n\tMicrophone = \"fa-duotone fa-microphone\",\r\n\tMicrophoneLines = \"fa-duotone fa-microphone-lines\",\r\n\tMicrophoneLinesSlash = \"fa-duotone fa-microphone-lines-slash\",\r\n\tMicrophoneSlash = \"fa-duotone fa-microphone-slash\",\r\n\tMicroscope = \"fa-duotone fa-microscope\",\r\n\tMinimize = \"fa-duotone fa-minimize\",\r\n\tMinus = \"fa-duotone fa-minus\",\r\n\tMobile = \"fa-duotone fa-mobile\",\r\n\tMobileNotch = \"fa-duotone fa-mobile-notch\",\r\n\tMoneyCheckDollarPen = \"fa-duotone fa-money-check-dollar-pen\",\r\n\tMusic = \"fa-duotone fa-music\",\r\n\tMusicSlash = \"fa-duotone fa-music-slash\",\r\n\t//#endregion\r\n\r\n\t//#region Newspaper\r\n\tNewsPaper = \"fa-duotone fa-newspaper\",\r\n\t//#endregion\r\n\r\n\t//#region P\r\n\tPalette = \"fa-duotone fa-palette\",\r\n\tPaperClip = \"fa-duotone fa-paperclip\",\r\n\tPaperClipVertical = \"fa-duotone fa-paperclip-vertical\",\r\n\tPaperPlane = \"fa-duotone fa-paper-plane\",\r\n\tPaperPlaneTop = \"fa-duotone fa-paper-plane-top\",\r\n\tPaste = \"fa-duotone fa-paste\",\r\n\tPause = \"fa-duotone fa-pause\",\r\n\tPen = \"fa-duotone fa-pen\",\r\n\tPencil = \"fa-duotone fa-pencil\",\r\n\tPenToSquare = \"fa-duotone fa-pen-to-square\",\r\n\tPeopleArrowsLeftRight = \"fa-duotone fa-people-arrows-left-right\",\r\n\tPercentage = \"fa-duotone fa-percentage\",\r\n\tPersonChalkboard = \"fa-duotone fa-person-chalkboard\",\r\n\tPersonMilitaryRifle = \"fa-duotone fa-person-military-rifle\",\r\n\tPhone = \"fa-duotone fa-phone\",\r\n\tPlay = \"fa-duotone fa-play\",\r\n\tPlayPause = \"fa-duotone fa-play-pause\",\r\n\tPlus = \"fa-duotone fa-plus\",\r\n\tPrint = \"fa-duotone fa-print\",\r\n\tPumo = \"fa-duotone fa-font-awesome\",\r\n\t//#endregion\r\n\r\n\t//#region Q\r\n\tQuestion = \"fa-duotone fa-question\",\r\n\t//#endregion\r\n\r\n\t//#region R\r\n\tRedo = \"fa-duotone fa-redo\",\r\n\tRedoAlt = \"fa-duotone fa-redo-alt\",\r\n\tRefresh = \"fa-duotone fa-arrows-rotate\",\r\n\tRemove = \"fa-duotone fa-xmark\",\r\n\tRepeat = \"fa-duotone fa-repeat\",\r\n\tReply = \"fa-duotone fa-reply\",\r\n\tReplyAll = \"fa-duotone fa-reply-all\",\r\n\tRightFromBracket = \"fa-duotone fa-right-from-bracket\",\r\n\tRightToBracket = \"fa-duotone fa-right-to-bracket\",\r\n\tRotate = \"fa-duotone fa-rotate\",\r\n\tRotateLeft = \"fa-duotone fa-rotate-left\",\r\n\t//#endregion\r\n\r\n\t//#region S\r\n\tSackDollar = \"fa-duotone fa-sack-dollar\",\r\n\tSave = \"fa-duotone fa-floppy-disk\",\r\n\tScissors = \"fa-duotone fa-scissors\",\r\n\tScrewdriverWrench = \"fa-duotone fa-screwdriver-wrench\",\r\n\tSearch = \"fa-duotone fa-magnifying-glass\",\r\n\tSensorTriangleExclamation = \"fa-duotone fa-sensor-triangle-exclamation\",\r\n\tSettings = \"fa-duotone fa-gear\",\r\n\tShare = \"fa-duotone fa-share\",\r\n\tShareAll = \"fa-duotone fa-share-all\",\r\n\tShareNodes = \"fa-duotone fa-share-nodes\",\r\n\tShareFromSquare = \"fa-duotone fa-share-from-square\",\r\n\tShieldCheck = \"fa-duotone fa-shield-check\",\r\n\tShip = \"fa-duotone fa-ship\",\r\n\tSitemap = \"fa-duotone fa-sitemap\",\r\n\tSoccer = \"fa-duotone fa-futbol\",\r\n\tSort = \"fa-duotone fa-sort\",\r\n\tSortDown = \"fa-duotone fa-sort-down\",\r\n\tSortUp = \"fa-duotone fa-sort-up\",\r\n\tSpinner = \"fa-duotone fa-spinner\",\r\n\tSplit = \"fa-duotone fa-split\",\r\n\tSquareCheck = \"fa-duotone fa-square-check\",\r\n\tSquareMinus = \"fa-duotone fa-square-minus\",\r\n\tSquarePen = \"fa-duotone fa-square-pen\",\r\n\tStamp = \"fa-duotone fa-stamp\",\r\n\tStar = \"fa-duotone fa-star\",\r\n\tStepBackward = \"fa-duotone fa-step-backward\",\r\n\tStepForward = \"fa-duotone fa-step-forward\",\r\n\tStethoscope = \"fa-duotone fa-stethoscope\",\r\n\tStop = \"fa-duotone fa-stop\",\r\n\t//#endregion\r\n\r\n\t//#region T\r\n\tTable = \"fa-duotone fa-table\",\r\n\tTableRows = \"fa-duotone fa-table-rows\",\r\n\tTablet = \"fa-duotone fa-tablet\",\r\n\tTag = \"fa-duotone fa-tag\",\r\n\tTags = \"fa-duotone fa-tags\",\r\n\tTasks = \"fa-duotone fa-tasks\",\r\n\tThumbsDown = \"fa-duotone fa-thumbs-down\",\r\n\tThumbsUp = \"fa-duotone fa-thumbs-up\",\r\n\tThumbtack = \"fa-duotone fa-thumbtack\",\r\n\tTrash = \"fa-duotone fa-trash\",\r\n\tTrashCanList = \"fa-duotone fa-trash-can-list\",\r\n\tTrashUndo = \"fa-duotone fa-trash-undo\",\r\n\tTrashXmark = \"fa-duotone fa-trash-xmark\",\r\n\tTriangleExclamation = \"fa-duotone fa-triangle-exclamation\",\r\n\tTruck = \"fa-duotone fa-truck\",\r\n\t//#endregion\r\n\r\n\t//#region U\r\n\tUndo = \"fa-duotone fa-arrow-rotate-left\",\r\n\tUnlock = \"fa-duotone fa-unlock\",\r\n\tUpload = \"fa-duotone fa-upload\",\r\n\tUsbDrive = \"fa-duotone fa-usb-drive\",\r\n\tUser = \"fa-duotone fa-user\",\r\n\tUserCheck = \"fa-duotone fa-user-check\",\r\n\tUserClock = \"fa-duotone fa-user-clock\",\r\n\tUserDoctor = \"fa-duotone fa-user-doctor\",\r\n\tUserDoctorHair = \"fa-duotone fa-user-doctor-hair\",\r\n\tUserDoctorHairLong = \"fa-duotone fa-user-doctor-hair-long\",\r\n\tUserGear = \"fa-duotone fa-user-gear\",\r\n\tUserGroup = \"fa-duotone fa-user-group\",\r\n\tUserHair = \"fa-duotone fa-user-hair\",\r\n\tUserHairLong = \"fa-duotone fa-user-hair-long\",\r\n\tUserHeadset = \"fa-duotone fa-user-headset\",\r\n\tUsers = \"fa-duotone fa-users\",\r\n\tUserSecret = \"fa-duotone fa-user-secret\",\r\n\tUsersMedical = \"fa-duotone fa-users-medical\",\r\n\tUserTag = \"fa-duotone fa-user-tag\",\r\n\tUserXmark = \"fa-duotone fa-user-xmark\",\r\n\t//#endregion\r\n\r\n\t//#region V\r\n\tVideo = \"fa-duotone fa-video\",\r\n\tVideoSlash = \"fa-duotone fa-video-slash\",\r\n\tVolume = \"fa-duotone fa-volume\",\r\n\tVolumeHigh = \"fa-duotone fa-volume-high\",\r\n\tVolumeLow = \"fa-duotone fa-volume-low\",\r\n\tVolumeOff = \"fa-duotone fa-volume-off\",\r\n\tVolumeSlash = \"fa-duotone fa-volume-slash\",\r\n\tVolumeXmark = \"fa-duotone fa-volume-xmark\",\r\n\t//#endregion\r\n\r\n\t//#region W\r\n\tWifi = \"fa-duotone fa-wifi\",\r\n\tWifiExclamation = \"fa-duotone fa-wifi-exclamation\",\r\n\tWifiFair = \"fa-duotone fa-wifi-fair\",\r\n\tWifiSlash = \"fa-duotone fa-wifi-slash\",\r\n\tWindow = \"fa-duotone fa-window\",\r\n\t//#endregion\r\n\r\n\t//#region X\r\n\tXmark = \"fa-duotone fa-xmark\",\r\n\t//#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Icon Thin\r\nexport enum IconClassThin\r\n{\r\n\t//#region A\r\n\tAdd = \"fa-thin fa-plus\",\r\n\tAddressCard = \"fa-thin fa-address-card\",\r\n\tAlert = \"fa-thin fa-triangle-exclamation\",\r\n\tAngleDown = \"fa-thin fa-angle-down\",\r\n\tAngleLeft = \"fa-thin fa-angle-left\",\r\n\tAngleRight = \"fa-thin fa-angle-right\",\r\n\tAngleUp = \"fa-thin fa-angle-up\",\r\n\tAperture = \"fa-thin fa-aperture\",\r\n\tArrowDown = \"fa-thin fa-arrow-down\",\r\n\tArrowDownShortWide = \"fa-thin fa-arrow-down-short-wide\",\r\n\tArrowDownWideShort = \"fa-thin fa-arrow-down-wide-short\",\r\n\tArrowLeft = \"fa-thin fa-arrow-left\",\r\n\tArrowPointer = \"fa-thin fa-arrow-pointer\",\r\n\tArrowRight = \"fa-thin fa-arrow-right\",\r\n\tArrowRightToBracket = \"fa-thin fa-arrow-right-to-bracket\",\r\n\tArrowRightFromBracket = \"fa-thin fa-arrow-right-from-bracket\",\r\n\tArrowRotateRight = \"fa-thin fa-arrow-rotate-right\",\r\n\tArrowsRotate = \"fa-thin fa-arrows-rotate\",\r\n\tArrowUp = \"fa-thin fa-arrow-up\",\r\n\tAsterisk = \"fa-thin fa-asterisk\",\r\n\tAt = \"fa-thin fa-at\",\r\n\tAttachment = \"fa-thin fa-paperclip\",\r\n\t//#endregion\r\n\r\n\t//#region B\r\n\tBack = \"fa-thin fa-angle-left\",\r\n\tBackward = \"fa-thin fa-backward\",\r\n\tBackwardFast = \"fa-thin fa-backward-fast\",\r\n\tBackwardStep = \"fa-thin fa-backward-step\",\r\n\tBalanceScale = \"fa-thin fa-balance-scale\",\r\n\tBallotCheck = \"fa-thin fa-ballot-check\",\r\n\tBan = \"fa-thin fa-ban\",\r\n\tBarcode = \"fa-thin fa-barcode\",\r\n\tBarcodeScan = \"fa-thin fa-barcode-scan\",\r\n\tBars = \"fa-thin fa-bars\",\r\n\tBarsSort = \"fa-thin fa-bars-sort\",\r\n\tBell = \"fa-thin fa-bell\",\r\n\tBellSlash = \"fa-thin fa-bell-slash\",\r\n\tBolt = \"fa-thin fa-bolt\",\r\n\tBook = \"fa-thin fa-book\",\r\n\tBookOpen = \"fa-thin fa-book-open\",\r\n\tBox = \"fa-thin fa-box\",\r\n\tBoxArchive = \"fa-thin fa-box-archive\",\r\n\tBriefCase = \"fa-thin fa-brief-case\",\r\n\tBug = \"fa-thin fa-bug\",\r\n\tBurger = \"fa-thin fa-bars\",\r\n\t//#endregion\r\n\r\n\t//#region C\r\n\tCakeCandles = \"fa-thin fa-cake-candles\",\r\n\tCalendar = \"fa-thin fa-calendar\",\r\n\tCalendarAlt = \"fa-thin fa-calendar-alt\",\r\n\tCalendarCheck = \"fa-thin fa-calendar-check\",\r\n\tCalendarDay = \"fa-thin fa-calendar-day\",\r\n\tCalendarPlus = \"fa-thin fa-calendar-plus\",\r\n\tCamera = \"fa-thin fa-camera\",\r\n\tCameraAlt = \"fa-thin fa-camera-alt\",\r\n\tCameraWeb = \"fa-thin fa-camera-web\",\r\n\tCameraWebSlash = \"fa-thin fa-camera-web-slash\",\r\n\tCapsules = \"fa-thin fa-capsules\",\r\n\tCaretDown = \"fa-thin fa-caret-down\",\r\n\tCaretLeft = \"fa-thin fa-caret-left\",\r\n\tCaretRight = \"fa-thin fa-caret-right\",\r\n\tCaretUp = \"fa-thin fa-caret-up\",\r\n\tCartCirclePlus = \"fa-thin fa-cart-circle-plus\",\r\n\tCartShopping = \"fa-thin fa-cart-shopping\",\r\n\tChartArea = \"fa-thin fa-chart-area\",\r\n\tChartBar = \"fa-thin fa-chart-bar\",\r\n\tChartColumn = \"fa-thin fa-chart-column\",\r\n\tChartLine = \"fa-thin fa-chart-line\",\r\n\tChartPie = \"fa-thin fa-chart-pie\",\r\n\tChartSimple = \"fa-thin fa-chart-simple\",\r\n\tChat = \"fa-thin fa-comment\",\r\n\tCheck = \"fa-thin fa-check\",\r\n\tChevronDown = \"fa-thin fa-chevron-down\",\r\n\tChevronLeft = \"fa-thin fa-chevron-left\",\r\n\tChevronRight = \"fa-thin fa-chevron-right\",\r\n\tChevronUp = \"fa-thin fa-chevron-up\",\r\n\tCircle = \"fa-thin fa-circle\",\r\n\tCircleCheck = \"fa-thin fa-circle-check\",\r\n\tCircleExclamation = \"fa-thin fa-circle-exclamation\",\r\n\tCircleInfo = \"fa-thin fa-circle-info\",\r\n\tCircleStop = \"fa-thin fa-circle-stop\",\r\n\tClipboard = \"fa-thin fa-clipboard\",\r\n\tClipboardMedical = \"fa-thin fa-clipboard-medical\",\r\n\tClock = \"fa-thin fa-clock\",\r\n\tClockRotateLeft = \"fa-thin fa-clock-rotate-left\",\r\n\tClose = \"fa-thin fa-xmark\",\r\n\tCloud = \"fa-thin fa-cloud\",\r\n\tCloudArrowUp = \"fa-thin fa-cloud-arrow-up\",\r\n\tCloudDownload = \"fa-thin fa-cloud-download\",\r\n\tCode = \"fa-thin fa-code\",\r\n\tCodeMerge = \"fa-thin fa-code-merge\",\r\n\tCoins = \"fa-thin fa-coins\",\r\n\tCollapse = \"fa-thin fa-compress\",\r\n\tComment = \"fa-thin fa-comment\",\r\n\tCommentDots = \"fa-thin fa-comment-dots\",\r\n\tCommentLines = \"fa-thin fa-comment-lines\",\r\n\tComments = \"fa-thin fa-comments\",\r\n\tCommentSms = \"fa-thin fa-comment-sms\",\r\n\tCompress = \"fa-thin fa-compress\",\r\n\tCopy = \"fa-thin fa-copy\",\r\n\tCopyright = \"fa-thin fa-copyright\",\r\n\tCreditCard = \"fa-thin fa-credit-card\",\r\n\tCrown = \"fa-thin fa-crown\",\r\n\t//#endregion\r\n\r\n\t//#region D\r\n\tDatabase = \"fa-thin fa-database\",\r\n\tDelete = \"fa-thin fa-xmark\",\r\n\tDeleteLeft = \"fa-thin fa-delete-left\",\r\n\tDeleteRight = \"fa-thin fa-delete-right\",\r\n\tDesktop = \"fa-thin fa-desktop\",\r\n\tDownload = \"fa-thin fa-download\",\r\n\t//#endregion\r\n\r\n\t//#region E\r\n\tEdit = \"fa-thin fa-pen\",\r\n\tEject = \"fa-thin fa-eject\",\r\n\tEllipsis = \"fa-thin fa-ellipsis\",\r\n\tEllipsisVertical = \"fa-thin fa-ellipsis-vertical\",\r\n\tEnvelope = \"fa-thin fa-envelope\",\r\n\tEraser = \"fa-thin fa-eraser\",\r\n\tEuroSign = \"fa-thin fa-euro-sign\",\r\n\tExclamation = \"fa-thin fa-exclamation\",\r\n\tExpand = \"fa-thin fa-expand\",\r\n\tEye = \"fa-thin fa-eye\",\r\n\tEyeSlash = \"fa-thin fa-eye-slash\",\r\n\t//#endregion\r\n\r\n\t//#region F\r\n\tFamily = \"fa-thin fa-family\",\r\n\tFastBackward = \"fa-thin fa-fast-backward\",\r\n\tFastForward = \"fa-thin fa-fast-forward\",\r\n\tFile = \"fa-thin fa-file\",\r\n\tFileAudio = \"fa-thin fa-file-audio\",\r\n\tFileContract = \"fa-thin fa-file-contract\",\r\n\tFileDownload = \"fa-thin fa-file-download\",\r\n\tFileExcel = \"fa-thin fa-file-excel\",\r\n\tFileExport = \"fa-thin fa-file-export\",\r\n\tFileImage = \"fa-thin fa-file-image\",\r\n\tFileInvoice = \"fa-thin fa-file-invoice\",\r\n\tFileImport = \"fa-thin fa-file-import\",\r\n\tFileLines = \"fa-thin fa-file-lines\",\r\n\tFileMusic = \"fa-thin fa-file-music\",\r\n\tFilePdf = \"fa-thin fa-file-pdf\",\r\n\tFiles = \"fa-thin fa-file-files\",\r\n\tFileSignature = \"fa-thin fa-file-signature\",\r\n\tFileVideo = \"fa-thin fa-file-video\",\r\n\tFileWord = \"fa-thin fa-file-word\",\r\n\tFileZipper = \"fa-thin fa-file-zipper\",\r\n\tFilter = \"fa-thin fa-filter\",\r\n\tFlag = \"fa-thin fa-flag\",\r\n\tFlagSwallowTail = \"fa-thin fa-flag-swallowtail\",\r\n\tFloppyDisk = \"fa-thin fa-floppy-disk\",\r\n\tFolder = \"fa-thin fa-folder\",\r\n\tFolderOpen = \"fa-thin fa-folder-open\",\r\n\tFontAwesome = \"fa-thin  fa-font-awesome\",\r\n\tForward = \"fa-thin fa-forward\",\r\n\tForwardStep = \"fa-thin fa-forward-step\",\r\n\tForwardFast = \"fa-thin fa-forward-fast\",\r\n\tFutbol = \"fa-thin fa-futbol\",\r\n\t//#endregion\r\n\r\n\t//#region G\r\n\tGear = \"fa-thin fa-gear\",\r\n\tGears = \"fa-thin fa-gears\",\r\n\tGlobe = \"fa-thin fa-globe\",\r\n\t//#endregion\r\n\r\n\t//#region H\r\n\tHashtag = \"fa-thin fa-hashtag\",\r\n\tHatWizard = \"fa-thin fa-hat-wizard\",\r\n\tHeadset = \"fa-thin fa-headset\",\r\n\tHospital = \"fa-thin fa-hospital\",\r\n\tHourglass = \"fa-thin fa-hourglass\",\r\n\tHourglassClock = \"fa-thin fa-hourglass-clock\",\r\n\tHouse = \"fa-thin fa-house\",\r\n\tHouseMedical = \"fa-thin fa-house-medical\",\r\n\tHouseUser = \"fa-thin fa-house-user\",\r\n\t//#endregion\r\n\r\n\t//#region I\r\n\tImage = \"fa-thin fa-image\",\r\n\tInbox = \"fa-thin fa-inbox\",\r\n\tInboxFull = \"fa-thin fa-inbox-full\",\r\n\tInfo = \"fa-thin fa-info\",\r\n\t//#endregion\r\n\r\n\t//#region K\r\n\tKey = \"fa-thin fa-key\",\r\n\tKeyboard = \"fa-thin fa-keyboard\",\r\n\tKeySkeleton = \"fa-thin fa-key-skeleton\",\r\n\t//#endregion\r\n\r\n\t//#region L\r\n\tLaptop = \"fa-thin fa-laptop\",\r\n\tLaptopMedical = \"fa-thin fa-laptop-medical\",\r\n\tLevelDown = \"fa-thin fa-level-down\",\r\n\tLevelDownAlt = \"fa-thin fa-level-down-alt\",\r\n\tLevelLeft = \"fa-thin fa-level-left\",\r\n\tLevelLeftAlt = \"fa-thin fa-level-left-alt\",\r\n\tLevelRight = \"fa-thin fa-level-right\",\r\n\tLevelRightAlt = \"fa-thin fa-level-right-alt\",\r\n\tLevelUp = \"fa-thin fa-level-up\",\r\n\tLevelUpAlt = \"fa-thin fa-level-up-alt\",\r\n\tLink = \"fa-thin fa-link\",\r\n\tLinkExternal = \"fa-thin fa-arrow-up-right-from-square\",\r\n\tLinkHorizontal = \"fa-thin fa-link-horizontal\",\r\n\tLinkHorizontalSlash = \"fa-thin fa-link-horizontal-slash\",\r\n\tLinkSimple = \"fa-thin fa-link-simple\",\r\n\tLinkSimpleSlash = \"fa-thin fa-link-simple-slash\",\r\n\tLinkSlash = \"fa-thin fa-link-slash\",\r\n\tList = \"fa-thin fa-list\",\r\n\tListCheck = \"fa-thin fa-list-check\",\r\n\tListOl = \"fa-thin fa-list-ol\",\r\n\tListTree = \"fa-thin fa-list-tree\",\r\n\tListUl = \"fa-thin fa-list-ul\",\r\n\tLocationArrow = \"fa-thin fa-location-arrow\",\r\n\tLocationCrossHairs = \"fa-thin fa-location-crosshairs\",\r\n\tLocationCheck = \"fa-thin fa-location-check\",\r\n\tLocationDot = \"fa-thin fa-location-dot\",\r\n\tLock = \"fa-thin fa-lock\",\r\n\tLockOpen = \"fa-thin fa-lock-open\",\r\n\tLogin = \"fa-thin fa-arrow-right-to-bracket\",\r\n\tLogout = \"fa-thin fa-arrow-right-from-bracket\",\r\n\t//#endregion\r\n\r\n\t//#region M\r\n\tMagnifyingGlass = \"fa-thin fa-magnifying-glass\",\r\n\tMagnifyingGlassMinus = \"fa-thin fa-magnifying-glass-minus\",\r\n\tMagnifyingGlassPlus = \"fa-thin fa-magnifying-glass-plus\",\r\n\tMail = \"fa-thin fa-envelope\",\r\n\tMailbox = \"fa-thin fa-mailbox\",\r\n\tMailOpen = \"fa-thin fa-envelope-open\",\r\n\tMap = \"fa-thin fa-map\",\r\n\tMapLocation = \"fa-thin fa-map-location\",\r\n\tMapLocationDot = \"fa-thin fa-map-location-dot\",\r\n\tMapPin = \"fa-thin fa-map-pin\",\r\n\tMaximize = \"fa-thin fa-maximize\",\r\n\tMerge = \"fa-thin fa-merge\",\r\n\tMessage = \"fa-thin fa-message\",\r\n\tMessageCode = \"fa-thin fa-message-code\",\r\n\tMessageDots = \"fa-thin fa-message-dots\",\r\n\tMessageLines = \"fa-thin fa-message-lines\",\r\n\tMessages = \"fa-thin fa-messages\",\r\n\tMicrophone = \"fa-thin fa-microphone\",\r\n\tMicrophoneLines = \"fa-thin fa-microphone-lines\",\r\n\tMicrophoneLinesSlash = \"fa-thin fa-microphone-lines-slash\",\r\n\tMicrophoneSlash = \"fa-thin fa-microphone-slash\",\r\n\tMicroscope = \"fa-thin fa-microscope\",\r\n\tMinimize = \"fa-thin fa-minimize\",\r\n\tMinus = \"fa-thin fa-minus\",\r\n\tMobile = \"fa-thin fa-mobile\",\r\n\tMobileNotch = \"fa-thin fa-mobile-notch\",\r\n\tMoneyCheckDollarPen = \"fa-thin fa-money-check-dollar-pen\",\r\n\tMusic = \"fa-thin fa-music\",\r\n\tMusicSlash = \"fa-thin fa-music-slash\",\r\n\t//#endregion\r\n\r\n\t//#region Newspaper\r\n\tNewsPaper = \"fa-thin fa-newspaper\",\r\n\t//#endregion\r\n\r\n\t//#region P\r\n\tPalette = \"fa-thin fa-palette\",\r\n\tPaperClip = \"fa-thin fa-paperclip\",\r\n\tPaperClipVertical = \"fa-thin fa-paperclip-vertical\",\r\n\tPaperPlane = \"fa-thin fa-paper-plane\",\r\n\tPaperPlaneTop = \"fa-thin fa-paper-plane-top\",\r\n\tPaste = \"fa-thin fa-paste\",\r\n\tPause = \"fa-thin fa-pause\",\r\n\tPen = \"fa-thin fa-pen\",\r\n\tPencil = \"fa-thin fa-pencil\",\r\n\tPenToSquare = \"fa-thin fa-pen-to-square\",\r\n\tPeopleArrowsLeftRight = \"fa-thin fa-people-arrows-left-right\",\r\n\tPercentage = \"fa-thin fa-percentage\",\r\n\tPersonChalkboard = \"fa-thin fa-person-chalkboard\",\r\n\tPersonMilitaryRifle = \"fa-thin fa-person-military-rifle\",\r\n\tPhone = \"fa-thin fa-phone\",\r\n\tPlay = \"fa-thin fa-play\",\r\n\tPlayPause = \"fa-thin fa-play-pause\",\r\n\tPlus = \"fa-thin fa-plus\",\r\n\tPrint = \"fa-thin fa-print\",\r\n\tPumo = \"fa-thin fa-font-awesome\",\r\n\t//#endregion\r\n\r\n\t//#region Q\r\n\tQuestion = \"fa-thin fa-question\",\r\n\t//#endregion\r\n\r\n\t//#region R\r\n\tRedo = \"fa-thin fa-redo\",\r\n\tRedoAlt = \"fa-thin fa-redo-alt\",\r\n\tRefresh = \"fa-thin fa-arrows-rotate\",\r\n\tRemove = \"fa-thin fa-xmark\",\r\n\tRepeat = \"fa-thin fa-repeat\",\r\n\tReply = \"fa-thin fa-reply\",\r\n\tReplyAll = \"fa-thin fa-reply-all\",\r\n\tRightFromBracket = \"fa-thin fa-right-from-bracket\",\r\n\tRightToBracket = \"fa-thin fa-right-to-bracket\",\r\n\tRotate = \"fa-thin fa-rotate\",\r\n\tRotateLeft = \"fa-thin fa-rotate-left\",\r\n\t//#endregion\r\n\r\n\t//#region S\r\n\tSackDollar = \"fa-thin fa-sack-dollar\",\r\n\tSave = \"fa-thin fa-floppy-disk\",\r\n\tScissors = \"fa-thin fa-scissors\",\r\n\tScrewdriverWrench = \"fa-thin fa-screwdriver-wrench\",\r\n\tSearch = \"fa-thin fa-magnifying-glass\",\r\n\tSensorTriangleExclamation = \"fa-thin fa-sensor-triangle-exclamation\",\r\n\tSettings = \"fa-thin fa-gear\",\r\n\tShare = \"fa-thin fa-share\",\r\n\tShareAll = \"fa-thin fa-share-all\",\r\n\tShareNodes = \"fa-thin fa-share-nodes\",\r\n\tShareFromSquare = \"fa-thin fa-share-from-square\",\r\n\tShieldCheck = \"fa-thin fa-shield-check\",\r\n\tShip = \"fa-thin fa-ship\",\r\n\tSitemap = \"fa-thin fa-sitemap\",\r\n\tSoccer = \"fa-thin fa-futbol\",\r\n\tSort = \"fa-thin fa-sort\",\r\n\tSortDown = \"fa-thin fa-sort-down\",\r\n\tSortUp = \"fa-thin fa-sort-up\",\r\n\tSpinner = \"fa-thin fa-spinner\",\r\n\tSplit = \"fa-thin fa-split\",\r\n\tSquareCheck = \"fa-thin fa-square-check\",\r\n\tSquareMinus = \"fa-thin fa-square-minus\",\r\n\tSquarePen = \"fa-thin fa-square-pen\",\r\n\tStamp = \"fa-thin fa-stamp\",\r\n\tStar = \"fa-thin fa-star\",\r\n\tStepBackward = \"fa-thin fa-step-backward\",\r\n\tStepForward = \"fa-thin fa-step-forward\",\r\n\tStethoscope = \"fa-thin fa-stethoscope\",\r\n\tStop = \"fa-thin fa-stop\",\r\n\t//#endregion\r\n\r\n\t//#region T\r\n\tTable = \"fa-thin fa-table\",\r\n\tTableRows = \"fa-thin fa-table-rows\",\r\n\tTablet = \"fa-thin fa-tablet\",\r\n\tTag = \"fa-thin fa-tag\",\r\n\tTags = \"fa-thin fa-tags\",\r\n\tTasks = \"fa-thin fa-tasks\",\r\n\tThumbsDown = \"fa-thin fa-thumbs-down\",\r\n\tThumbsUp = \"fa-thin fa-thumbs-up\",\r\n\tThumbtack = \"fa-thin fa-thumbtack\",\r\n\tTrash = \"fa-thin fa-trash\",\r\n\tTrashCanList = \"fa-thin fa-trash-can-list\",\r\n\tTrashUndo = \"fa-thin fa-trash-undo\",\r\n\tTrashXmark = \"fa-thin fa-trash-xmark\",\r\n\tTriangleExclamation = \"fa-thin fa-triangle-exclamation\",\r\n\tTruck = \"fa-thin fa-truck\",\r\n\t//#endregion\r\n\r\n\t//#region U\r\n\tUndo = \"fa-thin fa-arrow-rotate-left\",\r\n\tUnlock = \"fa-thin fa-unlock\",\r\n\tUpload = \"fa-thin fa-upload\",\r\n\tUsbDrive = \"fa-thin fa-usb-drive\",\r\n\tUser = \"fa-thin fa-user\",\r\n\tUserCheck = \"fa-thin fa-user-check\",\r\n\tUserClock = \"fa-thin fa-user-clock\",\r\n\tUserDoctor = \"fa-thin fa-user-doctor\",\r\n\tUserDoctorHair = \"fa-thin fa-user-doctor-hair\",\r\n\tUserDoctorHairLong = \"fa-thin fa-user-doctor-hair-long\",\r\n\tUserGear = \"fa-thin fa-user-gear\",\r\n\tUserGroup = \"fa-thin fa-user-group\",\r\n\tUserHair = \"fa-thin fa-user-hair\",\r\n\tUserHairLong = \"fa-thin fa-user-hair-long\",\r\n\tUserHeadset = \"fa-thin fa-user-headset\",\r\n\tUsers = \"fa-thin fa-users\",\r\n\tUserSecret = \"fa-thin fa-user-secret\",\r\n\tUsersMedical = \"fa-thin fa-users-medical\",\r\n\tUserTag = \"fa-thin fa-user-tag\",\r\n\tUserXmark = \"fa-thin fa-user-xmark\",\r\n\t//#endregion\r\n\r\n\t//#region V\r\n\tVideo = \"fa-thin fa-video\",\r\n\tVideoSlash = \"fa-thin fa-video-slash\",\r\n\tVolume = \"fa-thin fa-volume\",\r\n\tVolumeHigh = \"fa-thin fa-volume-high\",\r\n\tVolumeLow = \"fa-thin fa-volume-low\",\r\n\tVolumeOff = \"fa-thin fa-volume-off\",\r\n\tVolumeSlash = \"fa-thin fa-volume-slash\",\r\n\tVolumeXmark = \"fa-thin fa-volume-xmark\",\r\n\t//#endregion\r\n\r\n\t//#region W\r\n\tWifi = \"fa-thin fa-wifi\",\r\n\tWifiExclamation = \"fa-thin fa-wifi-exclamation\",\r\n\tWifiFair = \"fa-thin fa-wifi-fair\",\r\n\tWifiSlash = \"fa-thin fa-wifi-slash\",\r\n\tWindow = \"fa-thin fa-window\",\r\n\t//#endregion\r\n\r\n\t//#region X\r\n\tXmark = \"fa-thin fa-xmark\",\r\n\t//#endregion\r\n}\r\n//#endregion\r\n\r\n//#endregion\r\n\r\n//#region Common\r\nexport enum PositionEnum\r\n{\r\n\tLeft,\r\n\tTop,\r\n\tRight,\r\n\tBottom\r\n}\r\n\r\nexport enum OrientationEnum\r\n{\r\n\tHorizontal,\r\n\tVertical\r\n}\r\n\r\nexport class PopupSettings\r\n{\r\n\twidth?: number | string;\r\n\tminWidth?: number | string;\r\n\tmaxWidth?: number | string;\r\n\theight?: number | string;\r\n\tminHeight?: number | string;\r\n\tmaxHeight?: number | string;\r\n\tright?: boolean;\r\n\tdirection?: PopupDirectionEnum;\r\n}\r\n\r\nexport enum PopupDirectionEnum\r\n{\r\n\tAuto,\r\n\tUp,\r\n\tDown\r\n}\r\n\r\nexport enum BorderStyleEnum\r\n{\r\n\tDashed = \"dashed\",\r\n\tDotted = \"dotted\",\r\n\tDouble = \"double\",\r\n\tHidden = \"hidden\",\r\n\tSolid = \"solid\",\r\n\tGroove = \"groove\",\r\n\tRidge = \"ridge\"\r\n}\r\n//#endregion\r\n\r\n//#region Button\r\nexport enum ButtonModeEnum\r\n{\r\n\tDefault = \"vrButtonDefaultMode\",\r\n\tPrimary = \"vrButtonPrimaryMode\",\r\n\tDelete = \"vrButtonDeleteMode\",\r\n\tExcel = \"vrButtonExcelMode\",\r\n\tPrint = \"vrButtonPrintMode\",\r\n\tWarning = \"vrButtonWarningMode\"\r\n}\r\n\r\nexport class ColorSettings\r\n{\r\n\ttextColor?: string;\r\n\tbackground?: string;\r\n\tborder?: string;\r\n}\r\n//#endregion\r\n\r\n//#region Div\r\nexport class DivColorSettings\r\n{\r\n\ttextColor?: string;\r\n\tbackground?: string;\r\n}\r\n\r\nexport class DivBorderSpecificSettings\r\n{\r\n\ttype?: string;\r\n\tsize?: number;\r\n\tcolor?: string;\r\n}\r\n\r\nexport class DivBorderSettings extends DivBorderSpecificSettings\r\n{\r\n\ttop?: boolean | DivBorderSpecificSettings;\r\n\tright?: boolean | DivBorderSpecificSettings;\r\n\tbottom?: boolean | DivBorderSpecificSettings;\r\n\tleft?: boolean | DivBorderSpecificSettings;\r\n}\r\n//#endregion\r\n\r\n//#region ButtonGroup\r\nexport enum SelectionModeEnum\r\n{\r\n\tSingle,\r\n\tMultiple\r\n}\r\n\r\nexport class ButtonGroupItem\r\n{\r\n\tvalue?: string | number;\r\n\ttext?: string;\r\n\ticon?: IconClass;\r\n\timageUrl?: string;\r\n\tselected?: boolean;\r\n\tcss?: string;\r\n\tcolorSettings?: ColorSettings;\r\n\tvisible?: boolean;\r\n\tenable?: boolean;\r\n\ttooltip?: string;\r\n\r\n\tonClick?: (e: ButtonGroupClickEvent) => void;\r\n\tonIconClick?: (e: ButtonGroupIconClickEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region TabStrip\r\nexport class TabStripItem extends ButtonGroupItem\r\n{\r\n\telementId?: string;\r\n}\r\n//#endregion\r\n\r\n//#region Rating\r\nexport enum RatingPrecisionEnum\r\n{\r\n\tHalf,\r\n\tFull\r\n}\r\n//#endregion\r\n\r\n//#region Label\r\nexport enum LabelModeEnum\r\n{\r\n\tDefault,\r\n\tPrimary,\r\n\tError,\r\n\tPhone,\r\n\tMail,\r\n\tLink,\r\n\tCurrency,\r\n\tDate,\r\n\tTime,\r\n\tDateTime\r\n}\r\n\r\nexport enum LabelUnderlineMode\r\n{\r\n\tAlways,\r\n\tNone,\r\n\tOnHover\r\n}\r\n//#endregion\r\n\r\n//#region TextBox\r\nexport enum TextAlignEnum\r\n{\r\n\tLeft = \"left\",\r\n\tCenter = \"center\",\r\n\tRight = \"right\",\r\n\tJustify = \"justify\"\r\n}\r\n\r\nexport class TextBoxLengthSettings\r\n{\r\n\tsubstituteChar?: string;\r\n\tvalue: number;\r\n}\r\n\r\nexport enum TextModeEnum\r\n{\r\n\tText,\r\n\tLink,\r\n\tPhone,\r\n\tSearch,\r\n\tMail,\r\n\tMultiLine,\r\n\tPassword,\r\n\tPasswordViewable,\r\n\tNumeric,\r\n\tPercentage,\r\n\tCurrency\r\n}\r\n\r\nexport enum TextTransformModeEnum\r\n{\r\n\tCapitalize = \"capitalize\",\r\n\tUppercase = \"uppercase\",\r\n\tLowercase = \"lowercase\",\r\n\tDefault = \"none\"\r\n}\r\n\r\nexport class TextBoxValidationSettings\r\n{\r\n\tminValue?: number;\r\n\tmaxValue?: number;\r\n\tminLength?: number | TextBoxLengthSettings;\r\n\tmaxLength?: number | TextBoxLengthSettings;\r\n\tregex?: string | TextBoxRegexSettings;\r\n\terror?: TextBoxValidationErrorEnum;\r\n}\r\n\r\nexport class TextBoxRegexSettings\r\n{\r\n\tvalue?: string;\r\n\tflags?: string;\r\n\tcheckOnValue?: boolean;\r\n\tcheckOnKeyDown?: boolean;\r\n\tcheckOnKeyUp?: boolean;\r\n\tcheckOnBlur?: boolean;\r\n\tonlyNumbers?: boolean;\r\n\tonlyCharacters?: boolean;\r\n\tonlyUpperCase?: boolean;\r\n\tonlyLowerCase?: boolean;\r\n}\r\n\r\nexport enum TextBoxValidationErrorEnum\r\n{\r\n\tFlashing,\r\n\tStable,\r\n\tNone\r\n}\r\n//#endregion\r\n\r\n//#region Error\r\nexport enum ErrorModeEnum\r\n{\r\n\tTooltip,\r\n\tOverlay,\r\n\tSolid\r\n}\r\n\r\nexport enum ErrorPositionEnum\r\n{\r\n\tRight,\r\n\tBottom\r\n}\r\n\r\nexport enum ErrorHideModeEnum\r\n{\r\n\tOnFocus,\r\n\tOnAction,\r\n\tNever\r\n}\r\n//#endregion\r\n\r\n//#region Paypal\r\nexport enum PaypalEnvironmentEnum\r\n{\r\n\tSandbox = \"sandbox\",\r\n\tProduction = \"production\"\r\n}\r\n\r\nexport enum PaypalStyleSizeEnum\r\n{\r\n\tMedium = \"medium\",\r\n\tLarge = \"large\",\r\n\tSmall = \"small\",\r\n\tResponsive = \"responsive\"\r\n}\r\n\r\nexport enum PaypalStyleColorEnum\r\n{\r\n\tGold = \"gold\",\r\n\tBlue = \"blue\",\r\n\tSilver = \"silver\",\r\n\tBlack = \"black\"\r\n}\r\n\r\nexport enum PaypalStyleShapeEnum\r\n{\r\n\tRect = \"rect\",\r\n\tPill = \"pill\"\r\n}\r\n\r\nexport enum PaypalStyleLabelEnum\r\n{\r\n\tCheckout = \"checkout\",\r\n\tCredit = \"credit\",\r\n\tPay = \"pay\",\r\n\tBuyNow = \"buynow\",\r\n\tPaypal = \"paypal\",\r\n\tInstallment = \"installment\"\r\n}\r\n\r\nexport enum PaypalStyleLayoutEnum\r\n{\r\n\tVertical = \"vertical\",\r\n\tHorizontal = \"horizontal\"\r\n}\r\n//#endregion\r\n\r\n//#region CheckBox\r\nexport enum CheckboxStateEnum\r\n{\r\n\tChecked,\r\n\tUnchecked,\r\n\tUndefined\r\n}\r\n//#endregion\r\n\r\n//#region Image\r\nexport enum ImagePositionTypeEnum\r\n{\r\n\tCenter,\r\n\tFit,\r\n\tFill,\r\n\tStretch,\r\n\tOriginal\r\n}\r\n\r\nexport enum ImageToolbarTypeEnum\r\n{\r\n\tDownload,\r\n\tDelete,\r\n\tCustom\r\n}\r\n//#endregion\r\n\r\n//#region DatePicker\r\nexport enum DefaultDayEnum\r\n{\r\n\tFirst,\r\n\tLast\r\n}\r\n//#endregion\r\n\r\n//#region ComboBox\r\nexport enum ComboBoxTypeEnum\r\n{\r\n\tCombo,\r\n\tDropDown\r\n}\r\n\r\nexport enum ComboBoxTreeModeEnum\r\n{\r\n\tAllExpanded,\r\n\tOnlyFirstLevelExpanded,\r\n\tAllCollapsed\r\n}\r\n\r\nexport class ComboBoxItem\r\n{\r\n\ttext: string;\r\n\tvalue: any;\r\n\tparentValue?: any;\r\n}\r\n\r\nexport class ComboBoxWebServiceSettings\r\n{\r\n\tmethod: string;\r\n\tauthKey?: string;\r\n\titemsPropertyName?: string;\r\n\ttypedTextPropertyName?: string;\r\n\ttypedValuePropertyName?: string;\r\n\tsearchAfterCharsNumber?: number;\r\n\tparameters?: () => any;\r\n}\r\n\r\nexport class ComboBoxTemplateEvent\r\n{\r\n\tsender: ComboBox;\r\n\tdataItem: any;\r\n\telement: HTMLElement;\r\n}\r\n\r\nexport class ComboBoxEvent extends VrControlsEvent\r\n{\r\n\tsender: ComboBox;\r\n\tvalue: any;\r\n\ttext: string;\r\n\tchildrenValues: string[];\r\n\tselectedItem?: ComboBoxItem;\r\n\tchecked: boolean;\r\n\tisParent?: boolean;\r\n}\r\n\r\nexport class ComboBoxChangeEvent extends ComboBoxEvent\r\n{\r\n\r\n}\r\n\r\nexport class ComboBoxChangingEvent extends ComboBoxEvent\r\n{\r\n\tpreviousValue?: string | null;\r\n\tpreviousCheckedValues?: string[] | null;\r\n}\r\n\r\nexport class ComboBoxClearEvent extends VrControlsEvent\r\n{\r\n\tsender: ComboBox;\r\n}\r\n\r\nexport class SortByComboSettings\r\n{\r\n\tfield: string;\r\n\tdirection?: SortDirectionEnum;\r\n}\r\n//#endregion\r\n\r\n//#region AutoCompleteBox\r\nexport class AutoCompleteBoxItem\r\n{\r\n\ttext: string;\r\n\tvalue?: string;\r\n\tsettings?: AutoCompleteBoxItemSettings;\r\n}\r\n\r\nexport class AutoCompleteBoxItemSettings\r\n{\r\n\tbackgroundColor?: string;\r\n\ttextColor?: string;\r\n\tdeleteIconColor?: string;\r\n\tborder?: string;\r\n\tbold?: boolean;\r\n\tmaxWidth?: number;\r\n}\r\n\r\nexport class AutoCompleteBoxComboSettings\r\n{\r\n\titems?: ComboBoxItem[];\r\n\tfreeText?: boolean;\r\n\twebService?: ComboBoxWebServiceSettings;\r\n\ttemplate?: (e: any) => string;\r\n\ttreeMode?: ComboBoxTreeModeEnum;\r\n}\r\n//#endregion\r\n\r\n//#region Chart\r\nexport enum ChartTypeEnum\r\n{\r\n\tBar = \"bar\",\r\n\tHorizontalBar = \"horizontalBar\",\r\n\tLine = \"line\",\r\n\tDonut = \"doughnut\",\r\n\tPie = \"pie\",\r\n\tArea = \"area\",\r\n\tStackedBar = \"stackedBar\"\r\n}\r\n\r\nexport class ChartAreaSettings\r\n{\r\n\ttarget?: number | string | boolean | object;\r\n\tabove?: string;\r\n\tbelow?: string;\r\n}\r\n\r\nexport class ChartTitleSettings\r\n{\r\n\talign?: ChartTitleAlignEnum;\r\n\tcolor?: string;\r\n\tfullSize?: boolean;\r\n\tposition?: ChartTitlePositionEnum;\r\n\tfont?: ChartFont;\r\n\tpadding?: number;\r\n\ttext?: string;\r\n}\r\n\r\nexport enum ChartTitleAlignEnum\r\n{\r\n\tStart = \"start\",\r\n\tCenter = \"center\",\r\n\tEnd = \"end\"\r\n}\r\n\r\nexport enum ChartTitlePositionEnum\r\n{\r\n\tTop = \"top\",\r\n\tLeft = \"left\",\r\n\tBottom = \"bottom\",\r\n\tRight = \"right\"\r\n}\r\n\r\nexport class ChartFont\r\n{\r\n\tfamily?: string;\r\n\tsize?: number;\r\n\tstyle?: string;\r\n\tweight?: string;\r\n\tlineHeight?: number | string;\r\n}\r\n\r\nexport class ChartDataLabelsSettings\r\n{\r\n\tcolor?: string;\r\n\tbackgroundColor?: string;\r\n\tborderColor?: string;\r\n\tfont?: ChartFont;\r\n\tanchor?: ChartDataLabelsAnchorEnum;\r\n\talign?: ChartDataLabelAlignEnum;\r\n\toffset?: number;\r\n\topacity?: number;\r\n\tpadding?: number | { top?: number, right?: number, bottom?: number, left?: number };\r\n\ttextAlign?: ChartDataLabelsTextAlignEnum;\r\n\trotation?: number;\r\n}\r\n\r\nexport enum ChartDataLabelsAnchorEnum\r\n{\r\n\tCenter = \"center\",\r\n\tStart = \"start\",\r\n\tEnd = \"end\"\r\n}\r\n\r\nexport enum ChartDataLabelsTextAlignEnum\r\n{\r\n\tCenter = \"center\",\r\n\tStart = \"start\",\r\n\tEnd = \"end\",\r\n\tRight = \"right\",\r\n\tLeft = \"left\",\r\n}\r\n\r\nexport enum ChartDataLabelAlignEnum\r\n{\r\n\tCenter = \"center\",\r\n\tStart = \"start\",\r\n\tEnd = \"end\",\r\n\tRight = \"right\",\r\n\tBottom = \"bottom\",\r\n\tLeft = \"left\",\r\n\tTop = \"top\"\r\n}\r\n\r\nexport class ChartLegendSettings\r\n{\r\n\tposition?: ChartLegendPositionEnum;\r\n\talign?: ChartLegendAlignEnum;\r\n\tlabels?: ChartLegendLabelsSettings;\r\n\ttitle?: ChartLegendTitleSettings;\r\n}\r\n\r\nexport enum ChartLegendPositionEnum\r\n{\r\n\tTop = \"top\",\r\n\tLeft = \"left\",\r\n\tBottom = \"bottom\",\r\n\tRight = \"right\",\r\n\tChartArea = \"chartArea\"\r\n}\r\n\r\nexport enum ChartLegendAlignEnum\r\n{\r\n\tCenter = \"center\",\r\n\tStart = \"start\",\r\n\tEnd = \"end\"\r\n}\r\n\r\nexport class ChartLegendLabelsSettings\r\n{\r\n\tcolor?: string;\r\n\tboxHeight?: number;\r\n\tpadding?: number;\r\n\ttextAlign?: ChartLegendLabelsAlignEnum;\r\n}\r\n\r\nexport enum ChartLegendLabelsAlignEnum\r\n{\r\n\tLeft = \"left\",\r\n\tRight = \"right\",\r\n\tCenter = \"center\"\r\n}\r\n\r\nexport class ChartLegendTitleSettings\r\n{\r\n\tcolor?: string;\r\n\tdisplay?: boolean;\r\n\tpadding?: number;\r\n\ttext?: string;\r\n}\r\n\r\nexport class ChartTooltipSettings\r\n{\r\n\tposition?: ChartTooltipPositionEnum;\r\n\tbackgroundColor?: string;\r\n\ttitleColor?: string;\r\n\ttitleFont?: ChartFont;\r\n\ttitleAlign?: ChartTooltipAlignEnum;\r\n\tbodyColor?: string;\r\n\tbodyFont?: ChartFont;\r\n\tbodyAlign?: ChartTooltipAlignEnum;\r\n\tfooterColor?: string;\r\n\tfooterFont?: ChartFont;\r\n\tfooterAlign?: ChartTooltipAlignEnum;\r\n\tborderColor?: string;\r\n\tborderWidth?: number;\r\n\txAlign?: ChartTooltipAlignEnum;\r\n\tyAlign?: ChartTooltipYAlignEnum;\r\n}\r\n\r\nexport enum ChartTooltipPositionEnum\r\n{\r\n\tAverage = \"average\",\r\n\tNearest = \"nearest\"\r\n}\r\n\r\nexport enum ChartTooltipAlignEnum\r\n{\r\n\tLeft = \"left\",\r\n\tRight = \"right\",\r\n\tCenter = \"center\"\r\n}\r\n\r\nexport enum ChartTooltipYAlignEnum\r\n{\r\n\tTop = \"top\",\r\n\tCenter = \"center\",\r\n\tBottom = \"bottom\"\r\n}\r\n\r\nexport class ChartStackedSettings\r\n{\r\n\tx?: boolean;\r\n\ty?: boolean;\r\n}\r\n\r\nexport class ChartAspectRatioSettings\r\n{\r\n\tmaintain?: boolean;\r\n\tvalue?: number;\r\n}\r\n\r\nexport class ChartLimitSettings\r\n{\r\n\tminX?: number;\r\n\tmaxX?: number;\r\n\tminY?: number;\r\n\tmaxY?: number;\r\n}\r\n\r\nexport class ChartDataSource\r\n{\r\n\tareaSettings?: ChartAreaSettings;\r\n\ttype?: ChartTypeEnum;\r\n\ttitle?: string;\r\n\tbackgroundColor?: string[];\r\n\tborderColor?: string[];\r\n\tborderWidth?: number;\r\n\tlabels?: string[];\r\n\thidden?: boolean;\r\n\torder?: number;\r\n\tfill?: boolean;\r\n\tdata?: any[];\r\n\tparsing?: ChartParsingSettings;\r\n\tsmoothLine?: boolean;\r\n}\r\n\r\nexport class ChartParsingSettings\r\n{\r\n\txAxisKey?: string;\r\n\tyAxisKey?: string;\r\n}\r\n\r\nexport class ChartLegendEvent extends VrControlsEvent\r\n{\r\n\tsender: ChartVr;\r\n\tevent: any;\r\n\tlegendItem: any;\r\n\tlegend: any;\r\n}\r\n\r\nexport class ChartLegendHoverEvent extends ChartLegendEvent { }\r\nexport class ChartLegendLeaveEvent extends ChartLegendEvent { }\r\nexport class ChartLegendClickEvent extends ChartLegendEvent { }\r\n\r\nexport class ChartLabelEvent extends VrControlsEvent\r\n{\r\n\tsender: ChartVr;\r\n\tcontext: any;\r\n}\r\n\r\nexport class ChartLabelHoverEvent extends ChartLabelEvent { }\r\nexport class ChartLabelLeaveEvent extends ChartLabelEvent { }\r\nexport class ChartLabelClickEvent extends ChartLabelEvent { }\r\n\r\nexport class ChartAxisFormatterEvent extends VrControlsEvent\r\n{\r\n\tvalue: any;\r\n\tcontext: any;\r\n\tsender: ChartVr;\r\n}\r\n\r\nexport class ChartOptions extends VrControlOptions\r\n{\r\n\ttype?: ChartTypeEnum;\r\n\tpadding?: number;\r\n\tparsing?: ChartParsingSettings;\r\n\ttitle?: boolean | string | ChartTitleSettings;\r\n\tsubTitle?: boolean | string | ChartTitleSettings;\r\n\tdataLabels?: boolean | ChartDataLabelsSettings;\r\n\tdatasource?: ChartDataSource[];\r\n\tlegend?: boolean | ChartLegendSettings;\r\n\ttooltip?: boolean | ChartTooltipSettings;\r\n\tstacked?: boolean | ChartStackedSettings;\r\n\tlimit?: ChartLimitSettings;\r\n\tshowHideDatasetOnLegendClick?: boolean;\r\n\tresponsive?: boolean;\r\n\taspectRatio?: ChartAspectRatioSettings;\r\n\tscales?: any;\r\n\r\n\tonLegendHover?: (e: ChartLegendHoverEvent) => void;\r\n\tonLegendLeave?: (e: ChartLegendLeaveEvent) => void;\r\n\tonLegendClick?: (e: ChartLegendClickEvent) => void;\r\n\tonLabelHover?: (e: ChartLabelHoverEvent) => void;\r\n\tonLabelLeave?: (e: ChartLabelLeaveEvent) => void;\r\n\tonLabelClick?: (e: ChartLabelClickEvent) => void;\r\n\tonAxisLabelFormatter?: (e: ChartAxisFormatterEvent) => void;\r\n\tonDataFormatter?: (e: ChartAxisFormatterEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Window\r\nexport enum WindowFooterItemTypeEnum\r\n{\r\n\tClose,\r\n\tOk,\r\n\tCustom,\r\n\tSplitButton,\r\n\tSwitch,\r\n\tButtonGroup,\r\n\tCheckBox,\r\n\tComboBox,\r\n\tDatePicker,\r\n\tLabel,\r\n\tTextBox,\r\n\tSeparator\r\n}\r\n\r\nexport enum WindowFooterItemAlignEnum\r\n{\r\n\tLeft,\r\n\tRight\r\n}\r\n\r\nexport enum WindowAutoSizeDirectionEnum\r\n{\r\n\tWidth,\r\n\tHeight\r\n}\r\n//#endregion\r\n\r\n//#region Editor\r\nexport enum vrEditorItemEnum\r\n{\r\n\tSeparator = \"|\",\r\n\tUndo = \"undo\",\r\n\tRedo = \"redo\",\r\n\tBold = \"bold\",\r\n\tItalic = \"italic\",\r\n\tUnderline = \"underline\",\r\n\tFontFamily = \"fontfamily\",\r\n\tFontSelect = \"fontfamily\",\r\n\tFontSize = \"fontsize\",\r\n\tFullScreen = \"fullscreen\",\r\n\tAlignLeft = \"alignleft\",\r\n\tAlignRight = \"alignright\",\r\n\tAlignCenter = \"aligncenter\",\r\n\tAlignJustify = \"alignjustify\",\r\n\tOrderedList = \"numlist\",\r\n\tNumList = \"numlist\",\r\n\tUnorderedList = \"bullist\",\r\n\tBullist = \"bullist\",\r\n\tColorPicker = \"color\",\r\n\tLink = \"link\",\r\n\tCut = \"cut\",\r\n\tCopy = \"copy\",\r\n\tPaste = \"paste\",\r\n\tPasteText = \"pastetext\",\r\n\tSelectAll = \"selectall\",\r\n\tSearchAndReplace = \"searchreplace\",\r\n\tPrint = \"print\",\r\n\tPreview = \"preview\",\r\n\tCodeSource = \"code\",\r\n\tWordCount = \"wordcount\",\r\n\tImage = \"image\",\r\n\tMedia = \"media\",\r\n\tTable = \"inserttable\",\r\n\tInsertTable = \"inserttable\",\r\n\tCell = \"cell\",\r\n\tRow = \"row\",\r\n\tSymbols = \"charmap\",\r\n\tCharMap = \"charmap\",\r\n\tEmoticons = \"emoticons\",\r\n\tHr = \"hr\",\r\n\tPageBreak = \"pagebreak\",\r\n\tStrikeThrough = \"strikethrough\",\r\n\tSuperscript = \"superscript\",\r\n\tSubscript = \"subscript\",\r\n\tFontFormats = \"fontformats\",\r\n\tAlignFormats = \"align\",\r\n\tBlockFormats = \"blockformats\",\r\n\tBackgroundColor = \"backcolor\",\r\n\tClearFormatting = \"removeformat\",\r\n\tRemoveFormat = \"removeformat\"\r\n}\r\n\r\nexport enum vrEditorToolbarModeEnum\r\n{\r\n\tFloating = \"floating\",\r\n\tSliding = \"sliding\",\r\n\tScrolling = \"scrolling\",\r\n\tWrap = \"wrap\"\r\n}\r\n\r\nexport enum TinyMceIconEnum\r\n{\r\n\tCaretDown = \"action-next\",\r\n\tCaretUp = \"action-prev\",\r\n\tAlignCenter = \"align-center\",\r\n\tAlignJustify = \"align-justify\",\r\n\tAlignLeft = \"align-left\",\r\n\tAlignRight = \"align-right\",\r\n\tAlignNone = \"align-none\",\r\n\tArrowLeft = \"arrow-left\",\r\n\tArrowRight = \"arrow-right\",\r\n\tCancel = \"cancel\",\r\n\tCheckMark = \"checkmark\",\r\n\tChevronDown = \"chevron-down\",\r\n\tChevronRight = \"chevron-right\",\r\n\tChevronUp = \"chevron-up\",\r\n\tChevronLeft = \"chevron-left\",\r\n\tClose = \"close\",\r\n\tEdit = \"edit-block\",\r\n\tFullScreen = \"fullscreen\",\r\n\tHome = \"home\",\r\n\tLineHorizontal = \"horizontal-rule\",\r\n\tBurgerHorizontal = \"image-options\",\r\n\tImage = \"image\",\r\n\tInfo = \"info\",\r\n\tTime = \"insert-time\",\r\n\tSymbols = \"insert-character\",\r\n\tLink = \"link\",\r\n\tUrl = \"link\",\r\n\tLock = \"lock\",\r\n\tDocument = \"new-document\",\r\n\tNewTab = \"new-tab\",\r\n\tAlert = \"notice\",\r\n\tParagraph = \"paragraph\",\r\n\tPaste = \"paste\",\r\n\tPasteText = \"paste-text\",\r\n\tAdd = \"plus\",\r\n\tPlus = \"plus\",\r\n\tSettings = \"preferences\",\r\n\tPreview = \"preview\",\r\n\tPrint = \"print\",\r\n\tQuote = \"quote\",\r\n\tRedo = \"redo\",\r\n\tReload = \"reload\",\r\n\tRefresh = \"reload\",\r\n\tRemove = \"remove\",\r\n\tDelete = \"remove\",\r\n\tResize = \"resize\",\r\n\tRotateLeft = \"rotate-left\",\r\n\tRotateRight = \"rotate-right\",\r\n\tSearch = \"search\",\r\n\tSourceCode = \"sourcecode\",\r\n\tTable = \"table\",\r\n\tUndo = \"undo\",\r\n\tUnlink = \"unlink\",\r\n\tUnlock = \"unlock\",\r\n\tUpload = \"upload\",\r\n\tWarning = \"warning\",\r\n\tZoomIn = \"zoom-in\",\r\n\tZoomOut = \"zoom-out\"\r\n}\r\n\r\nexport class vrEditorCustomItem\r\n{\r\n\ticon?: TinyMceIconEnum;\r\n\timageUrl?: string;\r\n\ttext?: string;\r\n\ttooltip?: string;\r\n\tonClick?(e: EditorItemClickEvent): void;\r\n}\r\n\r\nexport class vrEditorCustomMenuItem\r\n{\r\n\ttype: EditorCustomMenuItemType;\r\n\tbuttonOptions?: ButtonOptions;\r\n\tseparatorOptions?: SeparatorOptions;\r\n\tsplitButtonOptions?: SplitButtonOptions;\r\n\tswitchOptions?: SwitchOptions;\r\n\tbuttonGroupOptions?: ButtonGroupOptions;\r\n\tcomboBoxOptions?: ComboBoxOptions;\r\n\tdatePickerOptions?: DatePickerOptions;\r\n\ttextBoxOptions?: TextBoxOptions;\r\n\tlabelOptions?: LabelOptions;\r\n}\r\n\r\nexport enum EditorCustomMenuItemType\r\n{\r\n\tButton,\r\n\tSeparator,\r\n\tSplitButton,\r\n\tSwitch,\r\n\tButtonGroup,\r\n\tCheckBox,\r\n\tComboBox,\r\n\tDatePicker,\r\n\tLabel,\r\n\tTextBox\r\n}\r\n\r\nexport class vrEditorSpeechRecognizerSettings\r\n{\r\n\tstopAtClick: boolean;\r\n\tposition?: EditorSpeechRecognizerPositionEnum;\r\n\tmode?: EditorSpeechRecognizerModeEnum;\r\n\tshowInfoCommands?: boolean;\r\n}\r\n\r\nexport enum EditorSpeechRecognizerModeEnum\r\n{\r\n\tPopup,\r\n\tDirect\r\n}\r\n\r\nexport enum EditorSpeechRecognizerPositionEnum\r\n{\r\n\tMenuBar,\r\n\tMenuItems\r\n}\r\n\r\nexport class vrEditorFontSizeSettings\r\n{\r\n\tdefaultSize?: number;\r\n\tformatSizeList?: number[];\r\n}\r\n//#endregion\r\n\r\n//#region Speech recognizer\r\nexport class SpeechRecognizerOptions extends VrControlOptions\r\n{\r\n\tgrammars?: string[];\r\n\tcontinuous?: boolean;\r\n\tstopAtClick?: boolean;\r\n\tinterimResults?: boolean;\r\n\tlanguage?: string;\r\n\tmaxAlternatives?: number;\r\n\tsize?: number;\r\n\r\n\tonClick?: (e: SpeechRecognizerClickEvent) => void;\r\n\tonNoMatch?: (e: SpeechRecognizerNoMatchEvent) => void;\r\n\tonError?: (e: SpeechRecognizerErrorEvent) => void;\r\n\tonResult?: (e: SpeechRecognizerResultEvent) => void;\r\n\tonStart?: (e: SpeechRecognizerStartEvent) => void;\r\n\tonEnd?: (e: SpeechRecognizerEndEvent) => void;\r\n\tonSpeechStart?: (e: SpeechRecognizerSpeechStartEvent) => void;\r\n\tonSpeechEnd?: (e: SpeechRecognizerSpeechEndEvent) => void;\r\n\tonAudioStart?: (e: SpeechRecognizerAudioStartEvent) => void;\r\n\tonAudioEnd?: (e: SpeechRecognizerAudioEndEvent) => void;\r\n\tonSoundStart?: (e: SpeechRecognizerSoundStartEvent) => void;\r\n\tonSoundEnd?: (e: SpeechRecognizerSoundEndEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Grid\r\nexport enum GridCheckboxModeEnum\r\n{\r\n\tNone,\r\n\tSingleCheck,\r\n\tMultiCheck\r\n}\r\n\r\nexport enum GridSortDirectionEnum\r\n{\r\n\tAsc,\r\n\tDesc\r\n}\r\n\r\nexport enum SortDirectionEnum\r\n{\r\n\tAsc,\r\n\tDesc\r\n}\r\n\r\nexport enum GridHeightModeEnum\r\n{\r\n\tFitScreen,\r\n\tFitContent\r\n}\r\n\r\nexport enum GridModeEnum\r\n{\r\n\tSync,\r\n\tNotSync\r\n}\r\n\r\nexport enum GridAggregateMode\r\n{\r\n\tAverage,\r\n\tCount,\r\n\tMax,\r\n\tMin,\r\n\tSum,\r\n\tNone\r\n}\r\n\r\nexport enum GridAlignEnum\r\n{\r\n\tLeft = \"left\",\r\n\tCenter = \"center\",\r\n\tRight = \"right\"\r\n}\r\n\r\nexport enum GridColumnTypeEnum\r\n{\r\n\tString = 0,\r\n\tNumber = 1,\r\n\tCurrency = 2,\r\n\tPercentage = 3,\r\n\tDuration = 4,\r\n\tDate = 5,\r\n\tTime = 6,\r\n\tDateTime = 7,\r\n\tCheckbox = 8,\r\n\tBoolean = 9,\r\n\tButton = 10,\r\n\tEditButton = 11,\r\n\tLabel = 12,\r\n\tImage = 13,\r\n\tCustom = 14,\r\n\tIcon = 15,\r\n\tDropDownList = 16,\r\n\tComboBox = 17,\r\n\tDropDownTree = 18,\r\n\tDropDownTreeCheckboxes = 19,\r\n\tPasswordViewable = 20,\r\n\tColor = 21\r\n}\r\n\r\nexport enum GridLabelUnderlineMode\r\n{\r\n\tAlways,\r\n\tNone,\r\n\tOnFocus\r\n}\r\n\r\nexport enum GridToolbarItemType\r\n{\r\n\tAdd,\r\n\tDelete,\r\n\tSeparator,\r\n\tExcel,\r\n\tExcelWithHiddenColumns,\r\n\tCustom,\r\n\tRebind,\r\n\tSplitButton,\r\n\tSwitch,\r\n\tButtonGroup,\r\n\tCheckBox,\r\n\tComboBox,\r\n\tDatePicker,\r\n\tLabel,\r\n\tTextBox\r\n}\r\n\r\nexport enum GridDateFilterTypeEnum\r\n{\r\n\tGreaterThan,\r\n\tLessThan,\r\n\tEqualsTo,\r\n\tBetween\r\n}\r\n\r\nexport enum GridNumberFilterTypeEnum\r\n{\r\n\tGreaterThan,\r\n\tLessThan,\r\n\tEqualsTo,\r\n\tBetween\r\n}\r\n\r\nexport class GridGroupBySettings\r\n{\r\n\tsortBy?: GridSortSettings;\r\n\tinternalSortBy?: GridSortSettings;\r\n\tfields: string[] | GridGroupByItem[];\r\n}\r\n\r\nexport class GridSortSettings\r\n{\r\n\tfield: string;\r\n\tdirection?: GridSortDirectionEnum;\r\n}\r\n\r\nexport class GridGroupByItem\r\n{\r\n\tfield: string;\r\n\tdisplayField?: string;\r\n\tdisplayValue?: (e: GridGroupDisplayValueEvent) => string;\r\n\tonExpandCollapse?: (e: GridGroupExpandCollapseEvent) => void;\r\n\tonEditClick?: (e: GridGroupEditClickEvent) => void;\r\n}\r\n\r\nexport class GridGroupDisplayValueEvent\r\n{\r\n\tsender: Grid;\r\n\tdataItem: any;\r\n\tfield: string;\r\n\tdisplayField?: string;\r\n}\r\n\r\nexport class GridGroupExpandCollapseEvent\r\n{\r\n\tsender: Grid;\r\n\tgroupByField: string;\r\n\tchildrenItems: any[];\r\n\tgroupByDisplayField?: string;\r\n\tcollapse: boolean;\r\n\tvalue: any;\r\n\tchildrenRows: HTMLElement[];\r\n\tdisplayValue: any;\r\n}\r\n\r\nexport class GridGroupEditClickEvent\r\n{\r\n\tsender: Grid;\r\n\tgroupByField: string;\r\n\tchildrenItems: any[];\r\n\tgroupByDisplayField?: string;\r\n\tvalue: any;\r\n\tchildrenRows: HTMLElement[];\r\n\tdisplayValue: any;\r\n}\r\n\r\nexport class GridPageSelectedEvent extends VrControlsEvent\r\n{\r\n\tsender: Grid;\r\n\tpageSelected: number;\r\n}\r\n\r\nexport class GridScrollEvent extends VrControlsEvent\r\n{\r\n\tsender: Grid;\r\n\ttarget: HTMLElement;\r\n\tscrollLeft: number;\r\n\tscrollTop: number;\r\n}\r\n\r\nexport class GridColumn\r\n{\r\n\tfield: string;\r\n\ttitle?: string;\r\n\twidth?: number;\r\n\tfitSpace?: boolean;\r\n\ttype?: GridColumnTypeEnum;\r\n\tdecimalDigits?: number;\r\n\tmilesSeparator?: boolean;\r\n\tshowSeconds?: boolean;\r\n\tignoreFactor?: boolean;\r\n\thidden?: boolean;\r\n\tfilterable?: boolean;\r\n\tfilterWebService?: boolean;\r\n\tbold?: boolean;\r\n\taggregate?: boolean | GridAggregateMode;\r\n\tcountZeroInAverage?: boolean;\r\n\tdefaultValue?: any;\r\n\teditable?: boolean;\r\n\texportable?: boolean;\r\n\tlocked?: boolean;\r\n\tcustomFilterProperties?: string[];\r\n\troundingSettings?: NumberFormatRoundingSettings;\r\n\r\n\t//#region DropDownList, ComboBox and DropDownTree\r\n\tdisplayField?: string;\r\n\tdataItems?: any[];\r\n\tddlNullable?: boolean;\r\n\t//#endregion\r\n\r\n\theaderSettings?: GridHeaderSettings;\r\n\tcellSettings?: GridCellSettings;\r\n\r\n\t//#region Controls\r\n\tbuttonSettings?: (templateEvent: GridTemplateEvent) => GridButtonSettings;\r\n\tcustomSettings?: (templateEvent: GridTemplateEvent) => GridCustomSettings | void;\r\n\ticonSettings?: (templateEvent: GridTemplateEvent) => GridIconSettings;\r\n\timageSettings?: (templateEvent: GridTemplateEvent) => GridImageSettings;\r\n\tlabelSettings?: (templateEvent: GridTemplateEvent) => GridLabelSettings;\r\n\t//#endregion\r\n}\r\n\r\nexport class GridButtonSettings extends GridControlsSettings\r\n{\r\n\ttext?: string;\r\n\ticon?: IconClass;\r\n\timageUrl?: string;\r\n\tisPrimaryButton?: boolean;\r\n\tcolor?: string;\r\n\tbackgroundColor?: string;\r\n}\r\n\r\nexport class GridToolbarItem\r\n{\r\n\ttype?: GridToolbarItemType;\r\n\ttext?: string;\r\n\ticon?: IconClass;\r\n\timageUrl?: string;\r\n\tconfirmationMessage?: string;\r\n\tdeleteRequest?: GridToolbarDeleteRequest;\r\n\texcelFileName?: string;\r\n\tbackgroundColor?: string;\r\n\ttextColor?: string;\r\n\tvisible?: boolean;\r\n\tcss?: string;\r\n\tcssContainer?: string;\r\n\tclassContainer?: string;\r\n\tbadge?: ButtonBadgeSettings;\r\n\tprimary?: boolean;\r\n\tenable?: boolean;\r\n\r\n\tsplitButtonItems?: SplitButtonItem[];\r\n\tsplitButtonOptions?: SplitButtonOptions;\r\n\tswitchSettings?: GridToolbarSwitchSettings;\r\n\tbuttonGroupItems?: ButtonGroupItem[];\r\n\tcomboBoxOptions?: ComboBoxOptions;\r\n\tdatePickerOptions?: DatePickerOptions;\r\n\ttextBoxOptions?: TextBoxOptions;\r\n\r\n\t/** Required if type CUSTOM */\r\n\tvalue?: string;\r\n\r\n\tonClick?: (e: GridToolbarClickEvent) => void;\r\n\tonBeforeClick?: (e: GridToolbarClickEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region PdfViewer\r\nexport enum PdfViewerToolbarAreaEnum\r\n{\r\n\tLeft,\r\n\tCenter,\r\n\tRight\r\n}\r\n\r\nexport class PdfViewerToolbarSettings\r\n{\r\n\tnavigation?: boolean;\r\n\tzoom?: boolean;\r\n\tprint?: boolean;\r\n\tdownload?: boolean;\r\n\titems?: PdfViewerToolbarItem[];\r\n}\r\n\r\nexport class PdfViewerToolbarItem\r\n{\r\n\ttext?: string;\r\n\ticon?: IconClass;\r\n\tvalue?: string;\r\n\tarea?: PdfViewerToolbarAreaEnum;\r\n\tcss?: string;\r\n\tcssContainer?: string;\r\n\tonClick?: (e: ToolbarItemOnClickEvent) => void;\r\n}\r\n\r\nexport class ToolbarItemOnClickEvent\r\n{\r\n\tsender: PdfViewer;\r\n\ttext?: string;\r\n\tvalue?: string;\r\n}\r\n//#endregion\r\n\r\n//#region Splitter\r\nexport enum SplitterDirectionEnum\r\n{\r\n\tHorizontal = \"horizontal\",\r\n\tVertical = \"vertical\"\r\n}\r\n\r\nexport enum SplitterCollapseDirectionEnum\r\n{\r\n\tLeft,\r\n\tRight,\r\n\tUp,\r\n\tDown\r\n}\r\n\r\nexport class SplitterCollapsableSettings\r\n{\r\n\tdirection: SplitterCollapseDirectionEnum;\r\n\tcolor?: string;\r\n}\r\n//#endregion\r\n\r\n//#region Switch\r\nexport class SwitchLabelSettings\r\n{\r\n\ttext: string;\r\n\ttooltip?: string;\r\n\tcolor?: string;\r\n\tbold?: boolean;\r\n\tcss?: string;\r\n\tonClick?: (e: SwitchLabelSettingsOnClickEvent) => void;\r\n}\r\n\r\nexport class SwitchLabelSettingsOnClickEvent extends VrControlsEvent\r\n{\r\n\tsender: Switch;\r\n\tchecked: boolean;\r\n}\r\n//#endregion\r\n\r\n//#region Scheduler\r\nexport class SchedulerSaturationInfo\r\n{\r\n\tmanual?: boolean;\r\n\tdayMode?: SchedulerSaturationDay[];\r\n\tweekMode?: SchedulerSaturationWeek;\r\n\tfourWeeksMode?: SchedulerSaturationFourWeeks[];\r\n}\r\n\r\nexport class SchedulerSaturationDay\r\n{\r\n\tresourceId: number;\r\n\tdate?: Date;\r\n\tpercentageValue?: number;\r\n\tcolor?: string;\r\n\tborderColor?: string;\r\n}\r\n\r\nexport class SchedulerSaturationWeek\r\n{\r\n\tgroupedByResource?: SchedulerSaturationWeekByResource[];\r\n\tgroupedByDate?: SchedulerSaturationWeekByDate[];\r\n}\r\n\r\nexport class SchedulerSaturationWeekByResource\r\n{\r\n\tresourceId: number;\r\n\tpercentageValue?: number;\r\n\tdateList?: SaturationDate[];\r\n\tcolor?: string;\r\n\ttitleColor?: string;\r\n}\r\n\r\nexport class SaturationDate\r\n{\r\n\tdate: Date;\r\n\tpercentageValue?: number;\r\n\tcolor?: string;\r\n\tborderColor?: string;\r\n}\r\n\r\nexport class SchedulerSaturationWeekByDate\r\n{\r\n\tdate: Date;\r\n\tresourceList?: SaturationResource[];\r\n}\r\n\r\nexport class SaturationResource\r\n{\r\n\tid: number;\r\n\tpercentageValue?: number;\r\n\tcolor?: string;\r\n\tborderColor?: string;\r\n}\r\n\r\nexport class SchedulerSaturationFourWeeks\r\n{\r\n\tresourceId: number;\r\n\tpercentageValue?: number;\r\n\tdateList?: SaturationDate[];\r\n\tcolor?: string;\r\n\ttitleColor?: string;\r\n}\r\n\r\nexport class SchedulerResource\r\n{\r\n\ttext: string;\r\n\tvalue: string;\r\n}\r\n\r\nexport enum DayOfWeekEnum\r\n{\r\n\tSunday,\r\n\tMonday,\r\n\tTuesday,\r\n\tWednesday,\r\n\tThursday,\r\n\tFriday,\r\n\tSaturday\r\n}\r\n\r\nexport class SchedulerView\r\n{\r\n\ttype: SchedulerViewEnum;\r\n\tselected: boolean;\r\n}\r\n\r\nexport enum SchedulerViewEnum\r\n{\r\n\tDay = 0,\r\n\tWeek = 1,\r\n\tFourWeeks = 2\r\n}\r\n\r\nexport class SchedulerSlotElement\r\n{\r\n\tresourceId: string;\r\n\tstart: Date;\r\n\tend: Date;\r\n\tcolumnPosition: boolean[];\r\n\tattributes: SchedulerAttribute[];\r\n\r\n\tcolumnIndex: number;\r\n\trowIndex: number;\r\n}\r\n\r\nexport class SchedulerData\r\n{\r\n\tid: string;\r\n\tresourceId: string;\r\n\tstart: Date;\r\n\tend: Date;\r\n\tbackgroundColor?: string;\r\n\ttextColor?: string;\r\n\ttext?: string;\r\n\ttooltip?: string;\r\n\tcss?: string;\r\n\tclass?: string;\r\n\tattributes?: SchedulerAttribute[];\r\n\r\n\tget duration(): number\r\n\t{\r\n\t\treturn Date.vrDifferenceBetweenDatesInMinutes(new Date(this.start), new Date(this.end));\r\n\t}\r\n}\r\n\r\nexport class SchedulerAttribute\r\n{\r\n\tkey: string;\r\n\tvalue: string;\r\n}\r\n\r\nexport enum SchedulerNavigateActionEnum\r\n{\r\n\tNextDate = 0,\r\n\tPrevDate = 1,\r\n\tToday = 2,\r\n\tChangeDate = 4\r\n}\r\n//#endregion\r\n\r\n//#region Notifier\r\nexport class NotifierOptions\r\n{\r\n\ttarget?: HTMLElement | JQuery | string;\r\n\ttype?: NotifierTypeEnum;\r\n\tposition?: NotifierPositionEnum;\r\n\thideSettings?: NotifierHideSettings;\r\n\tshowSettings?: NotifierShowSettings;\r\n\tcolorSettings?: ColorSettings;\r\n\tcss?: string;\r\n\tcssContainer?: string;\r\n\tclass?: string;\r\n\twidth?: string | number;\r\n\ticon?: IconClass | boolean;\r\n\tbold?: boolean;\r\n\tfontSize?: number | string;\r\n\r\n\tcustomHtml?: string | ((e: NotifierCustomHtmlEvent) => void);\r\n\tonClick?: (e: NotifierOnClickEvent) => void;\r\n}\r\n\r\nexport enum NotifierTypeEnum\r\n{\r\n\tDefault,\r\n\tSuccess,\r\n\tInfo,\r\n\tWarning,\r\n\tError\r\n}\r\n\r\nexport enum NotifierPositionEnum\r\n{\r\n\tTopLeft = \"TopLeft\",\r\n\tTopCenter = \"TopCenter\",\r\n\tTopRight = \"TopRight\",\r\n\tBottomLeft = \"BottomLeft\",\r\n\tBottomCenter = \"BottomCenter\",\r\n\tBottomRight = \"BottomRight\",\r\n\tRightMiddle = \"RightMiddle\",\r\n\tRightTop = \"RightTop\",\r\n\tRightBottom = \"RightBottom\",\r\n\tLeftBottom = \"LeftBottom\",\r\n\tLeftTop = \"LeftTop\",\r\n\tLeftMiddle = \"LeftMiddle\",\r\n\tMiddleScreen = \"MiddleScreen\"\r\n}\r\n\r\nexport enum AnimationShowEnum\r\n{\r\n\tNone,\r\n\tDefault,\r\n\tFadeIn,\r\n\tSlideDown\r\n}\r\n\r\nexport enum AnimationHideEnum\r\n{\r\n\tNone,\r\n\tDefault,\r\n\tFadeOut,\r\n\tSlideUp\r\n}\r\n\r\n\r\n//#endregion\r\n\r\n//#region Tooltip\r\nexport enum TooltipShowOnEnum\r\n{\r\n\tClick,\r\n\tFocus,\r\n\tHover,\r\n\tNever\r\n}\r\n\r\nexport enum TooltipHideOnEnum\r\n{\r\n\tDefault,\r\n\tNever,\r\n\tClick,\r\n\tBlur,\r\n\tLeave\r\n}\r\n\r\nexport enum TooltipTypeEnum\r\n{\r\n\tDefault,\r\n\tSuccess,\r\n\tInfo,\r\n\tWarning,\r\n\tError\r\n}\r\n\r\nexport enum TooltipPositionEnum\r\n{\r\n\tTopLeft = \"TopLeft\",\r\n\tTopCenter = \"TopCenter\",\r\n\tTopRight = \"TopRight\",\r\n\tBottomLeft = \"BottomLeft\",\r\n\tBottomCenter = \"BottomCenter\",\r\n\tBottomRight = \"BottomRight\",\r\n\tRightMiddle = \"RightMiddle\",\r\n\tRightTop = \"RightTop\",\r\n\tRightBottom = \"RightBottom\",\r\n\tLeftBottom = \"LeftBottom\",\r\n\tLeftTop = \"LeftTop\",\r\n\tLeftMiddle = \"LeftMiddle\",\r\n\tMiddleScreen = \"MiddleScreen\"\r\n}\r\n//#endregion\r\n\r\n//#region TreeView\r\nexport class TreeViewColumn\r\n{\r\n\tfield: string;\r\n\ttitle?: string;\r\n\twidth?: number;\r\n\ttype?: TreeViewColumnTypeEnum;\r\n\tdecimalDigits?: number;\r\n\tshowSeconds?: boolean;\r\n\tignoreFactor?: boolean;\r\n\tbold?: boolean;\r\n\tmilesSeparator?: boolean;\r\n\tboldRoot?: boolean;\r\n\thidden?: boolean;\r\n\r\n\theaderSettings?: TreeViewHeaderSettings;\r\n\tcellSettings?: TreeViewCellSettings;\r\n}\r\n\r\nexport class TreeViewToolbarItem\r\n{\r\n\ttype?: TreeViewToolbarItemType;\r\n\ttext?: string;\r\n\ticon?: IconClass;\r\n\timageUrl?: string;\r\n\tconfirmationMessage?: string;\r\n\tbackgroundColor?: string;\r\n\ttextColor?: string;\r\n\tvisible?: boolean;\r\n\tcss?: string;\r\n\tcssContainer?: string;\r\n\tclassContainer?: string;\r\n\tbadge?: ButtonBadgeSettings;\r\n\tprimary?: boolean;\r\n\r\n\tsplitButtonItems?: SplitButtonItem[];\r\n\tswitchSettings?: TreeViewToolbarSwitchSettings;\r\n\tbuttonGroupItems?: ButtonGroupItem[];\r\n\tcomboBoxOptions?: ComboBoxOptions;\r\n\tdatePickerOptions?: DatePickerOptions;\r\n\ttextBoxOptions?: TextBoxOptions;\r\n\r\n\t/** Required if type CUSTOM */\r\n\tvalue?: string;\r\n\r\n\tonClick?: (e: TreeViewToolbarClickEvent) => void;\r\n}\r\n\r\nexport class TreeViewToolbarSwitchSettings\r\n{\r\n\tlabelOff?: string;\r\n\tlabelOn?: string;\r\n\tchecked?: boolean;\r\n\tonCheck?: (e: TreeViewToolbarSwitchEvent) => void;\r\n}\r\n\r\nexport class TreeViewToolbarSwitchEvent\r\n{\r\n\tchecked: boolean;\r\n}\r\n\r\nexport class TreeViewToolbarClickEvent\r\n{\r\n\tsender: any;\r\n\ttype: TreeViewToolbarItemType;\r\n\tisDefaultPrevented: boolean;\r\n\tdeletedItems?: any[];\r\n\r\n\tpreventDefault()\r\n\t{\r\n\t\tthis.isDefaultPrevented = true;\r\n\t}\r\n}\r\n\r\nexport enum TreeViewToolbarItemType\r\n{\r\n\tSeparator,\r\n\tExcel,\r\n\tCustom,\r\n\tRebind,\r\n\tSplitButton,\r\n\tSwitch,\r\n\tButtonGroup,\r\n\tCheckBox,\r\n\tComboBox,\r\n\tDatePicker,\r\n\tLabel,\r\n\tTextBox\r\n}\r\n\r\nexport class TreeViewItem\r\n{\r\n\ttext: string;\r\n\tvalue: string;\r\n\ticon?: IconClass;\r\n\tparentValue?: string;\r\n\tnumericValue?: number;\r\n\tbold?: boolean;\r\n}\r\n\r\nexport class TreeViewItemExtraCell extends TreeViewColumn\r\n{\r\n\tvalue?: string;\r\n}\r\n\r\nexport class TreeViewContextMenuItem\r\n{\r\n\ttext?: string;\r\n\tvalue?: string;\r\n\ticon?: IconClass;\r\n\tseparator?: boolean;\r\n\tconfirmationMessage?: string;\r\n\r\n\tonClick?: (e: TreeViewContextMenuClickEvent) => void;\r\n}\r\n\r\nexport enum TreeModeEnum\r\n{\r\n\tAllExpanded,\r\n\tOnlyFirstLevelExpanded,\r\n\tAllCollapsed\r\n}\r\n\r\nexport enum TreeViewNumericTypeEnum\r\n{\r\n\tDefault = 0,\r\n\tCurrency = 1,\r\n\tPercentage = 2\r\n}\r\n\r\nexport enum TreeViewColumnTypeEnum\r\n{\r\n\tString = 0,\r\n\tNumber = 1,\r\n\tCurrency = 2,\r\n\tPercentage = 3,\r\n\tDuration = 4,\r\n\tDate = 5,\r\n\tTime = 6,\r\n\tDateTime = 7,\r\n\tCheckbox = 8,\r\n\tBoolean = 9,\r\n\tColor = 21,\r\n}\r\n\r\nexport enum TreeViewAlignEnum\r\n{\r\n\tLeft = \"left\",\r\n\tCenter = \"center\",\r\n\tRight = \"right\"\r\n}\r\n\r\nexport class TreeViewFilterSettings\r\n{\r\n\tonlyParents?: boolean;\r\n}\r\n//#endregion\r\n\r\n//#region Maps\r\nexport class MapMarker\r\n{\r\n\tlatitude: number;\r\n\tlongitude: number;\r\n\ttitle: string;\r\n\topacity: number;\r\n\tdraggable: boolean;\r\n}\r\n\r\nexport enum MapModeEnum\r\n{\r\n\tStreets = \"mapbox/streets-v11\",\r\n\tOutdoors = \"mapbox/outdoors-v11\",\r\n\tLight = \"mapbox/light-v10\",\r\n\tDark = \"mapbox/dark-v10\",\r\n\tSatellite = \"mapbox/satellite-v9\",\r\n\tSatelliteStreets = \"mapbox/satellite-streets-v11\",\r\n\tNavigationDay = \"mapbox/navigation-day-v1\",\r\n\tNavigationNight = \"mapbox/navigation-night-v1\"\r\n}\r\n//#endregion\r\n\r\n//#region Color Picker\r\nexport class ColorPickerRgbaValue\r\n{\r\n\tr: number;\r\n\tg: number;\r\n\tb: number;\r\n\ta?: number;\r\n}\r\n\r\nexport enum ColorPickerModeEnum\r\n{\r\n\tHex = \"hex\",\r\n\tRgba = \"rgba\"\r\n}\r\n//#endregion\r\n\r\n//#region Upload\r\nexport enum UploadValidationErrorTypeEnum\r\n{\r\n\tMinSize,\r\n\tMaxSize,\r\n\tExtensions\r\n}\r\n//#endregion\r\n\r\n//#region Colors\r\nexport enum Color\r\n{\r\n\tred = \"#FF0000\",\r\n\tred50 = \"#ffebee\",\r\n\tred100 = \"#ffcdd2\",\r\n\tred200 = \"#ef9a9a\",\r\n\tred300 = \"#e57373\",\r\n\tred400 = \"#ef5350\",\r\n\tred500 = \"#f44336\",\r\n\tred600 = \"#e53935\",\r\n\tred700 = \"#d32f2f\",\r\n\tred800 = \"#c62828\",\r\n\tred900 = \"#b71c1c\",\r\n\tredA100 = \"#ff8a80\",\r\n\tredA200 = \"#ff5252\",\r\n\tredA400 = \"#ff1744\",\r\n\tredA700 = \"#d50000\",\r\n\tpink50 = \"#fce4ec\",\r\n\tpink100 = \"#f8bbd0\",\r\n\tpink200 = \"#f48fb1\",\r\n\tpink300 = \"#f06292\",\r\n\tpink400 = \"#ec407a\",\r\n\tpink500 = \"#e91e63\",\r\n\tpink600 = \"#d81b60\",\r\n\tpink700 = \"#c2185b\",\r\n\tpink800 = \"#ad1457\",\r\n\tpink900 = \"#880e4f\",\r\n\tpinkA100 = \"#ff80ab\",\r\n\tpinkA200 = \"#ff4081\",\r\n\tpinkA400 = \"#f50057\",\r\n\tpinkA700 = \"#c51162\",\r\n\tpurple50 = \"#f3e5f5\",\r\n\tpurple100 = \"#e1bee7\",\r\n\tpurple200 = \"#ce93d8\",\r\n\tpurple300 = \"#ba68c8\",\r\n\tpurple400 = \"#ab47bc\",\r\n\tpurple500 = \"#9c27b0\",\r\n\tpurple600 = \"#8e24aa\",\r\n\tpurple700 = \"#7b1fa2\",\r\n\tpurple800 = \"#6a1b9a\",\r\n\tpurple900 = \"#4a148c\",\r\n\tpurpleA100 = \"#ea80fc\",\r\n\tpurpleA200 = \"#e040fb\",\r\n\tpurpleA400 = \"#d500f9\",\r\n\tpurpleA700 = \"#aa00ff\",\r\n\tdeepPurple50 = \"#ede7f6\",\r\n\tdeepPurple100 = \"#d1c4e9\",\r\n\tdeepPurple200 = \"#b39ddb\",\r\n\tdeepPurple300 = \"#9575cd\",\r\n\tdeepPurple400 = \"#7e57c2\",\r\n\tdeepPurple500 = \"#673ab7\",\r\n\tdeepPurple600 = \"#5e35b1\",\r\n\tdeepPurple700 = \"#512da8\",\r\n\tdeepPurple800 = \"#4527a0\",\r\n\tdeepPurple900 = \"#311b92\",\r\n\tdeepPurpleA100 = \"#b388ff\",\r\n\tdeepPurpleA200 = \"#7c4dff\",\r\n\tdeepPurpleA400 = \"#651fff\",\r\n\tdeepPurpleA700 = \"#6200ea\",\r\n\tindigo50 = \"#e8eaf6\",\r\n\tindigo100 = \"#c5cae9\",\r\n\tindigo200 = \"#9fa8da\",\r\n\tindigo300 = \"#7986cb\",\r\n\tindigo400 = \"#5c6bc0\",\r\n\tindigo500 = \"#3f51b5\",\r\n\tindigo600 = \"#3949ab\",\r\n\tindigo700 = \"#303f9f\",\r\n\tindigo800 = \"#283593\",\r\n\tindigo900 = \"#1a237e\",\r\n\tindigoA100 = \"#8c9eff\",\r\n\tindigoA200 = \"#536dfe\",\r\n\tindigoA400 = \"#3d5afe\",\r\n\tindigoA700 = \"#304ffe\",\r\n\tblue = \"#0000FF\",\r\n\tblue50 = \"#e3f2fd\",\r\n\tblue100 = \"#bbdefb\",\r\n\tblue200 = \"#90caf9\",\r\n\tblue300 = \"#64b5f6\",\r\n\tblue400 = \"#42a5f5\",\r\n\tblue500 = \"#2196f3\",\r\n\tblue600 = \"#1e88e5\",\r\n\tblue700 = \"#1976d2\",\r\n\tblue800 = \"#1565c0\",\r\n\tblue900 = \"#0d47a1\",\r\n\tblueA100 = \"#82b1ff\",\r\n\tblueA200 = \"#448aff\",\r\n\tblueA400 = \"#2979ff\",\r\n\tblueA700 = \"#2962ff\",\r\n\tlightBlue50 = \"#e1f5fe\",\r\n\tlightBlue100 = \"#b3e5fc\",\r\n\tlightBlue200 = \"#81d4fa\",\r\n\tlightBlue300 = \"#4fc3f7\",\r\n\tlightBlue400 = \"#29b6f6\",\r\n\tlightBlue500 = \"#03a9f4\",\r\n\tlightBlue600 = \"#039be5\",\r\n\tlightBlue700 = \"#0288d1\",\r\n\tlightBlue800 = \"#0277bd\",\r\n\tlightBlue900 = \"#01579b\",\r\n\tlightBlueA100 = \"#80d8ff\",\r\n\tlightBlueA200 = \"#40c4ff\",\r\n\tlightBlueA400 = \"#00b0ff\",\r\n\tlightBlueA700 = \"#0091ea\",\r\n\tcyan = \"#00FFFF\",\r\n\tcyan50 = \"#e0f7fa\",\r\n\tcyan100 = \"#b2ebf2\",\r\n\tcyan200 = \"#80deea\",\r\n\tcyan300 = \"#4dd0e1\",\r\n\tcyan400 = \"#26c6da\",\r\n\tcyan500 = \"#00bcd4\",\r\n\tcyan600 = \"#00acc1\",\r\n\tcyan700 = \"#0097a7\",\r\n\tcyan800 = \"#00838f\",\r\n\tcyan900 = \"#006064\",\r\n\tcyanA100 = \"#84ffff\",\r\n\tcyanA200 = \"#18ffff\",\r\n\tcyanA400 = \"#00e5ff\",\r\n\tcyanA700 = \"#00b8d4\",\r\n\tteal50 = \"#e0f2f1\",\r\n\tteal100 = \"#b2dfdb\",\r\n\tteal200 = \"#80cbc4\",\r\n\tteal300 = \"#4db6ac\",\r\n\tteal400 = \"#26a69a\",\r\n\tteal500 = \"#009688\",\r\n\tteal600 = \"#00897b\",\r\n\tteal700 = \"#00796b\",\r\n\tteal800 = \"#00695c\",\r\n\tteal900 = \"#004d40\",\r\n\ttealA100 = \"#a7ffeb\",\r\n\ttealA200 = \"#64ffda\",\r\n\ttealA400 = \"#1de9b6\",\r\n\ttealA700 = \"#00bfa5\",\r\n\tgreen = \"#00FF00\",\r\n\tgreen50 = \"#e8f5e9\",\r\n\tgreen100 = \"#c8e6c9\",\r\n\tgreen200 = \"#a5d6a7\",\r\n\tgreen300 = \"#81c784\",\r\n\tgreen400 = \"#66bb6a\",\r\n\tgreen500 = \"#4caf50\",\r\n\tgreen600 = \"#43a047\",\r\n\tgreen700 = \"#388e3c\",\r\n\tgreen800 = \"#2e7d32\",\r\n\tgreen900 = \"#1b5e20\",\r\n\tgreenA100 = \"#b9f6ca\",\r\n\tgreenA200 = \"#69f0ae\",\r\n\tgreenA400 = \"#00e676\",\r\n\tgreenA700 = \"#00c853\",\r\n\tlightGreen50 = \"#f1f8e9\",\r\n\tlightGreen100 = \"#dcedc8\",\r\n\tlightGreen200 = \"#c5e1a5\",\r\n\tlightGreen300 = \"#aed581\",\r\n\tlightGreen400 = \"#9ccc65\",\r\n\tlightGreen500 = \"#8bc34a\",\r\n\tlightGreen600 = \"#7cb342\",\r\n\tlightGreen700 = \"#689f38\",\r\n\tlightGreen800 = \"#558b2f\",\r\n\tlightGreen900 = \"#33691e\",\r\n\tlightGreenA100 = \"#ccff90\",\r\n\tlightGreenA200 = \"#b2ff59\",\r\n\tlightGreenA400 = \"#76ff03\",\r\n\tlightGreenA700 = \"#64dd17\",\r\n\tvettore = \"#51B3E1\",\r\n\tvettoreLight = \"#e3f1fa\",\r\n\tpumo = \"#32CD32\",\r\n\tlime50 = \"#f9fbe7\",\r\n\tlime100 = \"#f0f4c3\",\r\n\tlime200 = \"#e6ee9c\",\r\n\tlime300 = \"#dce775\",\r\n\tlime400 = \"#d4e157\",\r\n\tlime500 = \"#cddc39\",\r\n\tlime600 = \"#c0ca33\",\r\n\tlime700 = \"#afb42b\",\r\n\tlime800 = \"#9e9d24\",\r\n\tlime900 = \"#827717\",\r\n\tlimeA100 = \"#f4ff81\",\r\n\tlimeA200 = \"#eeff41\",\r\n\tlimeA400 = \"#c6ff00\",\r\n\tlimeA700 = \"#aeea00\",\r\n\tyellow = \"#FFFF00\",\r\n\tyellow50 = \"#fffde7\",\r\n\tyellow100 = \"#fff9c4\",\r\n\tyellow200 = \"#fff59d\",\r\n\tyellow300 = \"#fff176\",\r\n\tyellow400 = \"#ffee58\",\r\n\tyellow500 = \"#ffeb3b\",\r\n\tyellow600 = \"#fdd835\",\r\n\tyellow700 = \"#fbc02d\",\r\n\tyellow800 = \"#f9a825\",\r\n\tyellow900 = \"#f57f17\",\r\n\tyellowA100 = \"#ffff8d\",\r\n\tyellowA200 = \"#ffff00\",\r\n\tyellowA400 = \"#ffea00\",\r\n\tyellowA700 = \"#ffd600\",\r\n\tamber50 = \"#fff8e1\",\r\n\tamber100 = \"#ffecb3\",\r\n\tamber200 = \"#ffe082\",\r\n\tamber300 = \"#ffd54f\",\r\n\tamber400 = \"#ffca28\",\r\n\tamber500 = \"#ffc107\",\r\n\tamber600 = \"#ffb300\",\r\n\tamber700 = \"#ffa000\",\r\n\tamber800 = \"#ff8f00\",\r\n\tamber900 = \"#ff6f00\",\r\n\tamberA100 = \"#ffe57f\",\r\n\tamberA200 = \"#ffd740\",\r\n\tamberA400 = \"#ffc400\",\r\n\tamberA700 = \"#ffab00\",\r\n\torange50 = \"#fff3e0\",\r\n\torange100 = \"#ffe0b2\",\r\n\torange200 = \"#ffcc80\",\r\n\torange300 = \"#ffb74d\",\r\n\torange400 = \"#ffa726\",\r\n\torange500 = \"#ff9800\",\r\n\torange600 = \"#fb8c00\",\r\n\torange700 = \"#f57c00\",\r\n\torange800 = \"#ef6c00\",\r\n\torange900 = \"#e65100\",\r\n\torangeA100 = \"#ffd180\",\r\n\torangeA200 = \"#ffab40\",\r\n\torangeA400 = \"#ff9100\",\r\n\torangeA700 = \"#ff6d00\",\r\n\tdeepOrange50 = \"#fbe9e7\",\r\n\tdeepOrange100 = \"#ffccbc\",\r\n\tdeepOrange200 = \"#ffab91\",\r\n\tdeepOrange300 = \"#ff8a65\",\r\n\tdeepOrange400 = \"#ff7043\",\r\n\tdeepOrange500 = \"#ff5722\",\r\n\tdeepOrange600 = \"#f4511e\",\r\n\tdeepOrange700 = \"#e64a19\",\r\n\tdeepOrange800 = \"#d84315\",\r\n\tdeepOrange900 = \"#bf360c\",\r\n\tdeepOrangeA100 = \"#ff9e80\",\r\n\tdeepOrangeA200 = \"#ff6e40\",\r\n\tdeepOrangeA400 = \"#ff3d00\",\r\n\tdeepOrangeA700 = \"#dd2c00\",\r\n\tbrown50 = \"#efebe9\",\r\n\tbrown100 = \"#d7ccc8\",\r\n\tbrown200 = \"#bcaaa4\",\r\n\tbrown300 = \"#a1887f\",\r\n\tbrown400 = \"#8d6e63\",\r\n\tbrown500 = \"#795548\",\r\n\tbrown600 = \"#6d4c41\",\r\n\tbrown700 = \"#5d4037\",\r\n\tbrown800 = \"#4e342e\",\r\n\tbrown900 = \"#3e2723\",\r\n\tgrey50 = \"#fafafa\",\r\n\tgrey100 = \"#f5f5f5\",\r\n\tgrey200 = \"#eeeeee\",\r\n\tgrey300 = \"#e0e0e0\",\r\n\tgrey400 = \"#bdbdbd\",\r\n\tgrey500 = \"#9e9e9e\",\r\n\tgrey600 = \"#757575\",\r\n\tgrey700 = \"#616161\",\r\n\tgrey800 = \"#424242\",\r\n\tgrey900 = \"#212121\",\r\n\tblueGrey50 = \"#eceff1\",\r\n\tblueGrey100 = \"#cfd8dc\",\r\n\tblueGrey200 = \"#b0bec5\",\r\n\tblueGrey300 = \"#90a4ae\",\r\n\tblueGrey400 = \"#78909c\",\r\n\tblueGrey500 = \"#607d8b\",\r\n\tblueGrey600 = \"#546e7a\",\r\n\tblueGrey700 = \"#455a64\",\r\n\tblueGrey800 = \"#37474f\",\r\n\tblueGrey900 = \"#263238\"\r\n}\r\n//#endregion\r\n\r\n//#region General/Utility\r\nexport function pageError(callback?: (e: PageErrorEvent) => void)\r\n{\r\n\twindow.onerror = (msg: string | Event, url?: string, lineNo?: number, columnNo?: number, error?: Error) =>\r\n\t{\r\n\t\tif (callback != null)\r\n\t\t{\r\n\t\t\tlet event = new PageErrorEvent();\r\n\t\t\tevent.message = msg;\r\n\t\t\tevent.url = url;\r\n\t\t\tevent.lineNumber = lineNo;\r\n\t\t\tevent.columnNumber = columnNo;\r\n\t\t\tevent.error = error;\r\n\t\t\tcallback(event);\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nclass PageErrorEvent\r\n{\r\n\tpublic message: string | Event;\r\n\tpublic url?: string;\r\n\tpublic lineNumber?: number;\r\n\tpublic columnNumber?: number;\r\n\tpublic error?: Error;\r\n}\r\n\r\nexport function isEquals(item1: any, item2: any)\r\n{\r\n\treturn UtilityManager.equals(item1, item2);\r\n}\r\n\r\nexport function isLocalhost()\r\n{\r\n\treturn (location.hostname.includes(\"localhost\"));\r\n}\r\n\r\nexport function interval(callback: Function, each: number, timeout?: number, timeoutCallback?: Function)\r\n{\r\n\tUtilityManager.interval(callback, each, timeout, timeoutCallback);\r\n}\r\n\r\nexport function addCssStyle(cssRules: string, id?: string)\r\n{\r\n\tUtilityManager.addCssStyle(cssRules, id);\r\n}\r\n\r\nexport function addCss(cssRules: string, id?: string)\r\n{\r\n\taddCssStyle(cssRules, id);\r\n}\r\n\r\nexport function addJsScript(jsRules: string, id?: string)\r\n{\r\n\tUtilityManager.addJsScript(jsRules, id);\r\n}\r\n\r\nexport function addCssFiles(...paths: string[])\r\n{\r\n\tlet promise = new Promise((callback: Function) =>\r\n\t{\r\n\t\tUtilityManager.addCssFiles(...paths).then(() => callback());\r\n\t});\r\n\treturn promise;\r\n}\r\n\r\nexport function addJsFiles(...paths: string[])\r\n{\r\n\tlet promise = new Promise((callback: Function) =>\r\n\t{\r\n\t\tUtilityManager.addJsFiles(...paths).then(() => callback());\r\n\t});\r\n\treturn promise;\r\n}\r\n\r\nexport function openUrl(url: string, name = \"download\", newTab = false)\r\n{\r\n\tUtilityManager.openUrl(url, name, newTab);\r\n}\r\n\r\nexport function openBrowserWindow(url: string, newTab = false, size?: BrowserWindowSize, position?: BrowserWindowPosition)\r\n{\r\n\t//#region Size\r\n\tlet width = 1000;\r\n\tlet height = 700;\r\n\tif (size != null)\r\n\t{\r\n\t\tif (size.width != null) width = size.width;\r\n\t\tif (size.height != null) height = size.height;\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Position\r\n\tlet top = window!.top!.outerHeight / 2 + window!.top!.screenY - (height / 2);\r\n\tlet left = window!.top!.outerWidth / 2 + window!.top!.screenX - (width / 2);\r\n\tif (position != null)\r\n\t{\r\n\t\tif (position.top != null) top = position.top;\r\n\t\tif (position.left != null) left = position.left;\r\n\t}\r\n\t//#endregion\r\n\r\n\twindow.open(url, (newTab) ? \"_blank\" : \"\", (newTab) ? `width=${width}, height=${height}, top=${top}, left=${left}` : \"\");\r\n}\r\n\r\nexport class BrowserWindowSize\r\n{\r\n\theight?: number;\r\n\twidth?: number;\r\n}\r\n\r\nexport class BrowserWindowPosition\r\n{\r\n\tleft?: number;\r\n\ttop?: number;\r\n}\r\n\r\nexport function isValidEmail(email: string)\r\n{\r\n\treturn UtilityManager.isValidEmail(email);\r\n}\r\n\r\nexport function copyTextToClipboard(text: string)\r\n{\r\n\tif (!navigator.clipboard)\r\n\t{\r\n\t\toldSupportCopyTextToClipboard(text);\r\n\t\treturn;\r\n\t}\r\n\tnavigator.clipboard.writeText(text).then(() => notify(\"Copiato!\"));\r\n}\r\n\r\nfunction oldSupportCopyTextToClipboard(text: string)\r\n{\r\n\tlet textAreaTemp = document.createElement(\"textarea\");\r\n\ttextAreaTemp.value = text;\r\n\r\n\t//#region Avoid scrolling to bottom\r\n\ttextAreaTemp.style.top = \"0\";\r\n\ttextAreaTemp.style.left = \"0\";\r\n\ttextAreaTemp.style.position = \"fixed\";\r\n\t//#endregion\r\n\r\n\tdocument.body.appendChild(textAreaTemp);\r\n\ttextAreaTemp.focus();\r\n\ttextAreaTemp.select();\r\n\r\n\ttry { if (document.execCommand('copy')) notify(\"Copiato!\"); }\r\n\tcatch (e) { }\r\n\r\n\tdocument.body.removeChild(textAreaTemp);\r\n}\r\n\r\nexport function base64ToFile(base64: string, fileName: string, options?: FilePropertyBag)\r\n{\r\n\treturn UtilityManager.base64ToFile(base64, fileName, options);\r\n}\r\n\r\nexport function base64ToBytes(base64: string)\r\n{\r\n\treturn UtilityManager.base64ToBytes(base64);\r\n}\r\n\r\nexport function bytesToBase64(bytes: Uint8Array)\r\n{\r\n\treturn UtilityManager.bytesToBase64(bytes);\r\n}\r\n\r\nexport function base64ToBlob(base64: string, contentType = '', sliceSize = 512)\r\n{\r\n\treturn UtilityManager.base64ToBlob(base64, contentType, sliceSize);\r\n}\r\n\r\nexport function shadowRoot(shadowRoot?: ShadowRoot)\r\n{\r\n\tif (shadowRoot != null)\r\n\t\t_shadowRoot2 = shadowRoot;\r\n\r\n\treturn _shadowRoot2;\r\n}\r\n\r\nexport function jqueryVariable(jqueryVariable?: any)\r\n{\r\n\tif (jqueryVariable != null)\r\n\t\t_jqueryVariable = jqueryVariable;\r\n\r\n\treturn _jqueryVariable;\r\n}\r\n\r\nexport enum WebApiModeEnum\r\n{\r\n\tAsync,\r\n\tSync\r\n}\r\n\r\nexport enum DateModeEnum\r\n{\r\n\tDate = 0,\r\n\tDateTime = 1,\r\n\tTime = 2,\r\n\tLongDate = 3,\r\n\tLongDateTime = 4,\r\n\tLongWeekDate = 5,\r\n\tShortWeekDate = 6\r\n}\r\n\r\nexport enum DateDepthEnum\r\n{\r\n\tDay,\r\n\tMonth,\r\n\tYear\r\n}\r\n\r\nexport enum DateFormatEnum\r\n{\r\n\tLongDate,\r\n\tShortDate,\r\n\tWeekDay,\r\n\tWeekRange,\r\n\tFourWeeksRange,\r\n\tMonth,\r\n\tYear\r\n}\r\n\r\nexport enum KeyEnum\r\n{\r\n\tArrowLeft = \"ArrowLeft\", // 37,\r\n\tArrowUp = \"ArrowUp\", // 38\r\n\tArrowRight = \"ArrowRight\", // 39\r\n\tArrowDown = \"ArrowDown\", // 40\r\n\tEnter = \"Enter\", // 13\r\n\tTab = \"Tab\", // 9\r\n\tBackspace = \"Backspace\", // 8,\r\n\tControl = \"Control\" // 17\r\n}\r\n\r\nexport class NumberFormatRoundingSettings\r\n{\r\n\troundingMode?: RoundingModeEnum;\r\n\tminimumFractionDigits?: number;\r\n\tmaximumFractionDigits?: number;\r\n}\r\n\r\nexport class NumberFormatSettings extends NumberFormatRoundingSettings\r\n{\r\n\tconstructor(roundingSettings?: NumberFormatRoundingSettings)\r\n\t{\r\n\t\tsuper();\r\n\t\tif (roundingSettings != null)\r\n\t\t{\r\n\t\t\tthis.roundingMode = roundingSettings.roundingMode;\r\n\t\t\tthis.minimumFractionDigits = roundingSettings.minimumFractionDigits;\r\n\t\t\tthis.maximumFractionDigits = roundingSettings.maximumFractionDigits;\r\n\t\t}\r\n\t}\r\n\r\n\tstyle?: NumberStyleEnum;\r\n\tcurrency?: string;\r\n\tuseGrouping?: GroupingModeEnum | boolean;\r\n}\r\n\r\nenum NumberStyleEnum\r\n{\r\n\tDefault = \"decimal\",\r\n\tDecimal = \"decimal\",\r\n\tCurrency = \"currency\",\r\n\tPercentage = \"percent\",\r\n\tUnit = \"unit\"\r\n}\r\n\r\nexport enum GroupingModeEnum\r\n{\r\n\tAlways = \"always\",\r\n\tAuto = \"auto\",\r\n\tMin2 = \"min2\"\r\n}\r\n\r\nexport enum RoundingModeEnum\r\n{\r\n\tDefault = \"halfExpand\",\r\n\tNone = \"none\",\r\n\tCeil = \"ceil\",\r\n\tFloor = \"floor\",\r\n\tAwayFromZero = \"expand\",\r\n\tExpand = \"expand\",\r\n\tTrunc = \"trunc\",\r\n\r\n\tHalfCeil = \"halfCeil\",\r\n\tHalfFloor = \"halfFloor\",\r\n\tHalfAwayFromZero = \"halfExpand\",\r\n\tHalfExpand = \"halfExpand\",\r\n\tHalfTrunc = \"halfTrunc\",\r\n\tHalfEven = \"halfEven\"\r\n}\r\n//#endregion\r\n\r\n//#region Primitive type extensions\r\ndeclare global\r\n{\r\n\tinterface DateConstructor\r\n\t{\r\n\t\tvrFixDateString(dateString?: Date | string | null): Date;\r\n\t\tvrEquals(firstDate: Date, secondDate: Date): boolean;\r\n\t\tvrGetFirstDayOfMonthByDate(dateToCheck: Date): Date;\r\n\t\tvrGetLastDayOfMonthByDate(dateToCheck: Date): Date;\r\n\t\tvrGetFirstDayOfWeekByDate(dateToCheck: Date): Date;\r\n\t\tvrDifferenceBetweenDatesInMinutes(firstDate: Date, secondDate: Date): number;\r\n\t\tvrIsValidDate(date: any): boolean;\r\n\t\tvrConvertDateFromClient(dateFromClient?: Date | null): Date;\r\n\t\tvrConvertDateFromServer(dateFromServer: Date): Date;\r\n\t\tvrArePeriodsOverlapped(startA: Date, endA: Date, startB: Date, endB: Date, equal?: boolean): boolean;\r\n\t\tvrToWebApiDateTime(date: Date): any;\r\n\t\tvrGetDaysInMonth(date: Date): number;\r\n\t\tvrDifferenceBetweenDatesInDays(firstDate: Date, secondDate: Date): number;\r\n\t\tMIN_VALUE: Date;\r\n\t\tMAX_VALUE: Date;\r\n\t}\r\n\r\n\tinterface Date\r\n\t{\r\n\t\tvrToItalyString(mode?: DateModeEnum, showSeconds?: boolean): string;\r\n\t\tvrFormatString(options: Intl.DateTimeFormatOptions, language?: string[] | string): string;\r\n\t\tvrToLongDateString(): string;\r\n\t\tvrAddYears(years: number): Date;\r\n\t\tvrAddMonths(months: number): Date;\r\n\t\tvrAddDays(days: number): Date;\r\n\t\tvrAddHours(hours: number): Date;\r\n\t\tvrAddMinutes(minutes: number): Date;\r\n\t\tvrAddSeconds(seconds: number): Date;\r\n\t\tvrIsLessThan(date: Date, equals?: boolean, checkTime?: boolean): boolean;\r\n\t\tvrIsGreaterThan(date: Date, equals?: boolean, checkTime?: boolean): boolean;\r\n\t\tvrIsEqualsTo(date: Date, checkTime?: boolean): boolean;\r\n\t\tvrIsBetween(firstDate: Date, secondDate: Date): boolean;\r\n\t}\r\n\r\n\tinterface Number\r\n\t{\r\n\t\tvrToNumberString(formatSettings?: NumberFormatSettings): string;\r\n\t\tvrToCurrencyString(formatSettings?: NumberFormatSettings): string;\r\n\t\tvrToPercentageString(formatSettings?: NumberFormatSettings): string;\r\n\t\tvrRound(decimals: number): number;\r\n\t\tvrFormatNumber(formatSettings: NumberFormatSettings): string;\r\n\t}\r\n\r\n\tinterface String\r\n\t{\r\n\t\tvrCapitalize(): string;\r\n\t\tvrCamelCase(exceptFirst?: boolean): string;\r\n\t\tvrKebabCase(): string;\r\n\t\tvrSnakeCase(): string;\r\n\t\tvrSwapCase(): string;\r\n\t\tvrTitleCase(): string;\r\n\t\tvrTrunc(index: number, useWordBoundary?: boolean): string;\r\n\t\tvrGetNumericPart(): number;\r\n\t\tvrToBoolean(): boolean;\r\n\t\tvrIsNotNullOrEmpty(): boolean;\r\n\t\tvrIsNullOrEmpty(): boolean;\r\n\t\tvrRemoveHtml(): string;\r\n\t}\r\n\r\n\tinterface ArrayConstructor\r\n\t{\r\n\t\tvrEquals(array1: any[], array2: any[]): boolean;\r\n\t}\r\n\r\n\tinterface Array<T>\r\n\t{\r\n\t\tvrFirst(): T;\r\n\t\tvrLast(): T;\r\n\t\tvrDelete(value: any): void;\r\n\t\tvrDeleteItem(item: any, key: string): void;\r\n\t\tvrDeleteAllBy<U>(callbackfn?: (value: T, index: number, array: T[]) => U, thisArg?: any): void;\r\n\t\tvrToNumberArrayList(): number[];\r\n\t\tvrToStringArrayList(): string[];\r\n\t\tvrToCommaSeparatedList(): string;\r\n\t\tvrPushRange(arrayToAdd: any[]): void;\r\n\t\tvrAny<U>(callbackfn: (value: T, index: number, array: T[]) => U, thisArg?: any): boolean;\r\n\t\tvrSum<U>(callbackfn?: (value: T, index: number, array: T[]) => U, thisArg?: any): number;\r\n\t\tvrMax<U>(callbackfn?: (value: T, index: number, array: T[]) => U, thisArg?: any): number;\r\n\t\tvrMin<U>(callbackfn?: (value: T, index: number, array: T[]) => U, thisArg?: any): number;\r\n\t\tvrAvg<U>(callbackfn?: (value: T, index: number, array: T[]) => U, thisArg?: any): number;\r\n\t\tvrDistinct(): T[];\r\n\t\tvrDistinctBy<U>(callbackfn: (value: T, index: number, array: T[]) => U, thisArg?: any): T[];\r\n\t\tvrSortAsc(...properties: string[]): any[];\r\n\t\tvrSortDesc(...properties: string[]): any[];\r\n\t\tvrSortBy(properties: string[], ascending?: boolean): any[];\r\n\t\tvrGroupBy<U>(callbackfn: (value: T, index: number, array: T[]) => U, thisArg?: any): any[];\r\n\t\tvrGroupByProperty(property: string): any[];\r\n\t}\r\n\r\n\tinterface JQuery\r\n\t{\r\n\t\tvrDrag(element?: HTMLElement | string | JQuery): void;\r\n\t\tvrVisible(state?: boolean): boolean;\r\n\t\tvrAppendToPuma(element: any): JQuery;\r\n\t\tvrPrependToPuma(element: any): JQuery;\r\n\t\tvrAppendPuma(element: any): JQuery;\r\n\t\tvrPrependPuma(element: any): JQuery;\r\n\t\tvrAfterPuma(element: any): JQuery;\r\n\t\tvrBeforePuma(element: any): JQuery;\r\n\t\tvrInsertAfterPuma(element: any): JQuery;\r\n\t\tvrInsertBeforePuma(element: any): JQuery;\r\n\t\tvrHasScrollBar(horizontal?: boolean): boolean;\r\n\t}\r\n}\r\n\r\nDate.MIN_VALUE = new Date(-8640000000000000);\r\nDate.MAX_VALUE = new Date(8640000000000000);\r\n\r\nDate.vrFixDateString = function (dateString?: Date | null): Date\r\n{\r\n\tif (dateString != null && !(Object.prototype.toString.call(dateString) === '[object Date]'))\r\n\t{\r\n\t\tlet tempDateString = dateString.toString();\r\n\t\tlet dateSplitted = tempDateString.split(/[^0-9]/).vrToNumberArrayList();\r\n\t\tlet date = new Date(dateSplitted[0], dateSplitted[1] - 1, dateSplitted[2], dateSplitted[3], dateSplitted[4], dateSplitted[5]);\r\n\t\tdateString = new Date(date.toString());\r\n\t}\r\n\treturn dateString!;\r\n}\r\n\r\nDate.vrEquals = function (firstDate: Date, secondDate: Date): boolean\r\n{\r\n\treturn firstDate.getTime() === secondDate.getTime();\r\n}\r\n\r\nDate.vrGetFirstDayOfMonthByDate = function (dateToCheck: Date): Date\r\n{\r\n\tlet date = new Date(dateToCheck);\r\n\treturn new Date(date.getFullYear(), date.getMonth(), 1);\r\n}\r\n\r\nDate.vrGetLastDayOfMonthByDate = function (dateToCheck: Date): Date\r\n{\r\n\tlet date = new Date(dateToCheck);\r\n\treturn new Date(date.getFullYear(), date.getMonth() + 1, 0);\r\n}\r\n\r\nDate.vrGetFirstDayOfWeekByDate = function (dateToCheck: Date): Date\r\n{\r\n\tlet date = new Date(dateToCheck);\r\n\tlet day = date.getDay(),\r\n\t\tdiff = date.getDate() - day + (day == 0 ? -6 : 1); // adjust when day is sunday\r\n\treturn new Date(date.setDate(diff));\r\n}\r\n\r\nDate.vrDifferenceBetweenDatesInMinutes = function (firstDate: Date, secondDate: Date): number\r\n{\r\n\tfirstDate = Date.vrFixDateString(firstDate);\r\n\tsecondDate = Date.vrFixDateString(secondDate);\r\n\r\n\tlet difference = firstDate.getTime() - secondDate.getTime();\r\n\tlet secondsDifference = difference / 1000;\r\n\treturn Math.abs(secondsDifference / 60);\r\n}\r\n\r\nDate.vrIsValidDate = function (date: Date)\r\n{\r\n\treturn date != null && date instanceof Date && !isNaN(date.getTime()) && date.getTime() != new Date(0, 0, 0).getTime();\r\n}\r\n\r\nDate.vrGetDaysInMonth = function (date: Date): number\r\n{\r\n\treturn new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\r\n}\r\n\r\nDate.vrToWebApiDateTime = function (date: Date)\r\n{\r\n\tif (date != null)\r\n\t{\r\n\t\tdate = Date.vrFixDateString(date);\r\n\t\tif (Date.vrIsValidDate(date))\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\tday: date!.getDate(),\r\n\t\t\t\tmonth: date!.getMonth() + 1,\r\n\t\t\t\tyear: date!.getFullYear(),\r\n\t\t\t\thours: date!.getHours(),\r\n\t\t\t\tminutes: date!.getMinutes(),\r\n\t\t\t\tseconds: date!.getSeconds(),\r\n\t\t\t\tmilliSeconds: date!.getMilliseconds()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nDate.prototype.vrToItalyString = function (mode?: DateModeEnum, showSeconds = false): string\r\n{\r\n\tlet dateOptions: any = {};\r\n\tswitch (mode)\r\n\t{\r\n\t\tcase DateModeEnum.Date:\r\n\t\t\t{\r\n\t\t\t\tdateOptions = {\r\n\t\t\t\t\tyear: 'numeric',\r\n\t\t\t\t\tmonth: '2-digit',\r\n\t\t\t\t\tday: '2-digit',\r\n\t\t\t\t\thour12: false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase DateModeEnum.LongWeekDate:\r\n\t\t\t{\r\n\t\t\t\tdateOptions = {\r\n\t\t\t\t\tweekday: 'long',\r\n\t\t\t\t\tyear: 'numeric',\r\n\t\t\t\t\tmonth: '2-digit',\r\n\t\t\t\t\tday: '2-digit',\r\n\t\t\t\t\thour12: false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase DateModeEnum.ShortWeekDate:\r\n\t\t\t{\r\n\t\t\t\tdateOptions = {\r\n\t\t\t\t\tweekday: 'short',\r\n\t\t\t\t\tyear: 'numeric',\r\n\t\t\t\t\tmonth: '2-digit',\r\n\t\t\t\t\tday: '2-digit',\r\n\t\t\t\t\thour12: false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase DateModeEnum.LongDate:\r\n\t\t\t{\r\n\t\t\t\tdateOptions = {\r\n\t\t\t\t\tweekday: 'long',\r\n\t\t\t\t\tyear: 'numeric',\r\n\t\t\t\t\tmonth: 'long',\r\n\t\t\t\t\tday: '2-digit',\r\n\t\t\t\t\thour12: false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase DateModeEnum.DateTime:\r\n\t\t\t{\r\n\t\t\t\tdateOptions = {\r\n\t\t\t\t\tyear: 'numeric',\r\n\t\t\t\t\tmonth: '2-digit',\r\n\t\t\t\t\tday: '2-digit',\r\n\t\t\t\t\thour: \"2-digit\",\r\n\t\t\t\t\tminute: \"2-digit\",\r\n\t\t\t\t\thour12: false\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (showSeconds)\r\n\t\t\t\t\tdateOptions.second = \"2-digit\";\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase DateModeEnum.LongDateTime:\r\n\t\t\t{\r\n\t\t\t\tdateOptions = {\r\n\t\t\t\t\tweekday: 'long',\r\n\t\t\t\t\tyear: 'numeric',\r\n\t\t\t\t\tmonth: '2-digit',\r\n\t\t\t\t\tday: '2-digit',\r\n\t\t\t\t\thour: \"2-digit\",\r\n\t\t\t\t\tminute: \"2-digit\",\r\n\t\t\t\t\thour12: false\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (showSeconds)\r\n\t\t\t\t\tdateOptions.second = \"2-digit\";\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase DateModeEnum.Time:\r\n\t\t\t{\r\n\t\t\t\tdateOptions = {\r\n\t\t\t\t\thour: \"2-digit\",\r\n\t\t\t\t\tminute: \"2-digit\",\r\n\t\t\t\t\thour12: false\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (showSeconds)\r\n\t\t\t\t\tdateOptions.second = \"2-digit\";\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t}\r\n\treturn this.vrFormatString(dateOptions, \"it\");\r\n}\r\n\r\nDate.prototype.vrFormatString = function (options: Intl.DateTimeFormatOptions, language?: string[] | string): string\r\n{\r\n\tlet dateFormatter = new Intl.DateTimeFormat((language == null) ? navigator.language : language, options);\r\n\tlet dateString = dateFormatter.format(this).vrCapitalize();\r\n\treturn dateString;\r\n}\r\n\r\nDate.prototype.vrToLongDateString = function ()\r\n{\r\n\tlet dateOptions: any = {\r\n\t\tweekday: 'long',\r\n\t\tyear: 'numeric',\r\n\t\tmonth: 'long',\r\n\t\tday: '2-digit',\r\n\t\thour12: false\r\n\t}\r\n\tlet dateFormatter = new Intl.DateTimeFormat(/*navigator.language*/\"it\", dateOptions);\r\n\treturn dateFormatter.format(this).vrCapitalize();\r\n}\r\n\r\nDate.vrArePeriodsOverlapped = function (startA: Date, endA: Date, startB: Date, endB: Date, equal = false)\r\n{\r\n\treturn (!equal) ? (startA.getTime() < endB.getTime() && endA.getTime() > startB.getTime()) : (startA.getTime() <= endB.getTime() && endA.getTime() >= startB.getTime());\r\n}\r\n\r\nDate.prototype.vrAddYears = function (years: number): Date\r\n{\r\n\tlet date: Date = new Date(this.valueOf());\r\n\tdate.setFullYear(date.getFullYear() + years);\r\n\treturn date;\r\n}\r\n\r\nDate.prototype.vrAddMonths = function (months: number): Date\r\n{\r\n\tlet february = new Date(this.getFullYear(), 1, 1);\r\n\tlet februaryDays = Date.vrGetDaysInMonth(february);\r\n\r\n\tlet date: Date = new Date(this.valueOf());\r\n\tlet newMonth = date.getMonth() + months;\r\n\tif (newMonth == 1 && date.getDate() > februaryDays) // February\r\n\t\tdate.setDate(februaryDays);\r\n\r\n\tdate.setMonth(newMonth);\r\n\treturn date;\r\n}\r\n\r\nDate.prototype.vrAddDays = function (days: number): Date\r\n{\r\n\tlet date: Date = new Date(this.valueOf());\r\n\tdate.setDate(date.getDate() + days);\r\n\treturn date;\r\n}\r\n\r\nDate.prototype.vrAddHours = function (hours: number): Date\r\n{\r\n\tthis.setTime(this.getTime() + (hours * 60 * 60 * 1000));\r\n\treturn this;\r\n}\r\n\r\nDate.prototype.vrAddMinutes = function (minutes: number): Date\r\n{\r\n\tthis.setTime(this.getTime() + (minutes * 60 * 1000));\r\n\treturn this;\r\n}\r\n\r\nDate.prototype.vrAddSeconds = function (seconds: number): Date\r\n{\r\n\tthis.setTime(this.getTime() + (seconds * 1000));\r\n\treturn this;\r\n}\r\n\r\nDate.prototype.vrIsLessThan = function (date: Date, equals = false, checkTime = true): boolean\r\n{\r\n\tif (!checkTime)\r\n\t{\r\n\t\tthis.setHours(0, 0, 0, 0);\r\n\t\tdate.setHours(0, 0, 0, 0);\r\n\t}\r\n\r\n\tif (equals)\r\n\t\treturn (this.getTime() <= date.getTime());\r\n\telse\r\n\t\treturn (this.getTime() < date.getTime());\r\n}\r\n\r\nDate.prototype.vrIsGreaterThan = function (date: Date, equals = false, checkTime = true): boolean\r\n{\r\n\tif (!checkTime)\r\n\t{\r\n\t\tthis.setHours(0, 0, 0, 0);\r\n\t\tdate.setHours(0, 0, 0, 0);\r\n\t}\r\n\r\n\tif (equals)\r\n\t\treturn (this.getTime() >= date.getTime());\r\n\telse\r\n\t\treturn (this.getTime() > date.getTime());\r\n}\r\n\r\nDate.prototype.vrIsEqualsTo = function (date: Date, checkTime = true): boolean\r\n{\r\n\tif (!checkTime)\r\n\t{\r\n\t\tthis.setHours(0, 0, 0, 0);\r\n\t\tdate.setHours(0, 0, 0, 0);\r\n\t}\r\n\r\n\treturn (this.getTime() == date.getTime());\r\n}\r\n\r\nDate.prototype.vrIsBetween = function (firstDate: Date, secondDate: Date): boolean\r\n{\r\n\tlet millisecondsFirstDate = firstDate.getTime();\r\n\tlet millisecondsSecondDate = secondDate.getTime();\r\n\tlet millisecondsDateToCheck = this.getTime();\r\n\r\n\tif (millisecondsDateToCheck >= millisecondsFirstDate && millisecondsDateToCheck <= millisecondsSecondDate)\r\n\t\treturn true;\r\n\r\n\treturn false;\r\n}\r\n\r\nDate.vrDifferenceBetweenDatesInDays = function (firstDate: Date, secondDate: Date): number\r\n{\r\n\tlet first = this.vrFixDateString(firstDate);\r\n\tlet second = this.vrFixDateString(secondDate);\r\n\r\n\tlet difference = first.getTime() - second.getTime();\r\n\tlet secondsDifference = difference / 1000;\r\n\treturn Math.abs(secondsDifference / 60 / 60 / 24);\r\n}\r\n\r\nDate.vrConvertDateFromClient = function (dateFromClient?: Date | null): Date\r\n{\r\n\tif (dateFromClient != null)\r\n\t{\r\n\t\tdateFromClient = Date.vrFixDateString(dateFromClient);\r\n\t\tlet dateConverted = new Date(Date.UTC(dateFromClient.getFullYear(), dateFromClient.getMonth(), dateFromClient.getDate(), dateFromClient.getHours(), dateFromClient.getMinutes(), dateFromClient.getSeconds()));\r\n\t\treturn dateConverted;\r\n\t}\r\n\telse\r\n\t\treturn dateFromClient!;\r\n}\r\n\r\nDate.vrConvertDateFromServer = function (dateFromServer: Date): Date\r\n{\r\n\tif (dateFromServer != null)\r\n\t{\r\n\t\tdateFromServer = Date.vrFixDateString(dateFromServer);\r\n\t\tlet dateConverted = new Date(dateFromServer.getUTCFullYear(), dateFromServer.getUTCMonth(), dateFromServer.getUTCDate(), dateFromServer.getUTCHours(), dateFromServer.getUTCMinutes(), dateFromServer.getUTCSeconds());\r\n\t\treturn dateConverted;\r\n\t}\r\n\telse\r\n\t\treturn dateFromServer;\r\n}\r\n\r\nNumber.prototype.vrToNumberString = function (formatSettings?: NumberFormatSettings): string\r\n{\r\n\tif (formatSettings == null) formatSettings = new NumberFormatSettings();\r\n\tformatSettings.style = NumberStyleEnum.Default;\r\n\treturn this.vrFormatNumber(formatSettings);\r\n}\r\n\r\nNumber.prototype.vrToCurrencyString = function (formatSettings?: NumberFormatSettings): string\r\n{\r\n\tif (formatSettings == null) formatSettings = new NumberFormatSettings();\r\n\tformatSettings.style = NumberStyleEnum.Currency;\r\n\tif (formatSettings.minimumFractionDigits == null) formatSettings.minimumFractionDigits = 2;\r\n\tif (formatSettings.maximumFractionDigits == null) formatSettings.maximumFractionDigits = 2;\r\n\treturn this.vrFormatNumber(formatSettings);\r\n}\r\n\r\nNumber.prototype.vrToPercentageString = function (formatSettings?: NumberFormatSettings): string\r\n{\r\n\tif (formatSettings == null) formatSettings = new NumberFormatSettings();\r\n\tformatSettings.style = NumberStyleEnum.Percentage;\r\n\tif (formatSettings.minimumFractionDigits == null) formatSettings.minimumFractionDigits = 2;\r\n\tif (formatSettings.maximumFractionDigits == null) formatSettings.maximumFractionDigits = 2;\r\n\treturn this.vrFormatNumber(formatSettings);\r\n}\r\n\r\nNumber.prototype.vrFormatNumber = function (format?: NumberFormatSettings)\r\n{\r\n\tif (format == null) format = new NumberFormatSettings();\r\n\tif (format.style == null) format.style = NumberStyleEnum.Default;\r\n\tif (format.currency == null) format.currency = \"EUR\";\r\n\tif (format.useGrouping == null) format.useGrouping = GroupingModeEnum.Auto;\r\n\r\n\tif (format.roundingMode == null) format.roundingMode = RoundingModeEnum.HalfAwayFromZero;\r\n\tif (format.roundingMode == RoundingModeEnum.None)\r\n\t\tif (format.maximumFractionDigits == null) format.maximumFractionDigits = 8;\r\n\r\n\tconst formatter = new Intl.NumberFormat(\"it-IT\"/*navigator.language*/, format as any);\r\n\treturn formatter.format(Number(this));\r\n}\r\n\r\nNumber.prototype.vrRound = function (decimals: number): number\r\n{\r\n\tlet pow = Math.pow(10, decimals);\r\n\treturn Math.round((this as number) * pow) / pow;\r\n}\r\n\r\nString.prototype.vrCapitalize = function ()\r\n{\r\n\treturn this.charAt(0).toUpperCase() + this.slice(1).toLowerCase();\r\n}\r\n\r\nString.prototype.vrCamelCase = function (exceptFirst?: boolean)\r\n{\r\n\tif (exceptFirst == null) exceptFirst = false;\r\n\r\n\tlet words = this.split(\" \");\r\n\tfor (let word of words)\r\n\t\tword.vrCapitalize();\r\n\r\n\tlet stringToReturn = words.toString().replace(\",\", \"\");\r\n\tif (exceptFirst)\r\n\t\tstringToReturn = stringToReturn[0].toLowerCase() + stringToReturn.substr(1);\r\n\r\n\treturn stringToReturn;\r\n}\r\n\r\nString.prototype.vrKebabCase = function (this)\r\n{\r\n\tif (this.length == 0)\r\n\t\treturn \"\";\r\n\r\n\treturn this\r\n\t\t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g)!\r\n\t\t.map(x => x.toLowerCase())\r\n\t\t.join('-');\r\n}\r\n\r\nString.prototype.vrSnakeCase = function (this)\r\n{\r\n\tif (this.length == 0)\r\n\t\treturn \"\";\r\n\r\n\treturn this\r\n\t\t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g)!\r\n\t\t.map(x => x.toLowerCase())\r\n\t\t.join('_');\r\n}\r\n\r\nString.prototype.vrSwapCase = function (this)\r\n{\r\n\tvar swapped = [];\r\n\tfor (let i = 0; i < this.length; i++)\r\n\t{\r\n\t\tif (this != \" \")\r\n\t\t{\r\n\t\t\tif (this[i] == this[i].toUpperCase())\r\n\t\t\t\tswapped.push(this[i].toLowerCase());\r\n\t\t\telse\r\n\t\t\t\tswapped.push(this[i].toUpperCase());\r\n\t\t}\r\n\t}\r\n\treturn swapped.join(\"\");\r\n}\r\n\r\nString.prototype.vrTitleCase = function (this)\r\n{\r\n\treturn this.replace(/\\w\\S*/g, (txt) => { return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase() });\r\n}\r\n\r\nString.prototype.vrTrunc = function (index: number, useWordBoundary?: boolean)\r\n{\r\n\tif (useWordBoundary == null) useWordBoundary = true;\r\n\r\n\tif (this.length <= index) { return this.valueOf(); }\r\n\tvar subString = this.substr(0, index - 1);\r\n\treturn (useWordBoundary\r\n\t\t? subString.substr(0, subString.lastIndexOf(' '))\r\n\t\t: subString) + \"&hellip;\";\r\n};\r\n\r\nString.prototype.vrGetNumericPart = function (this)\r\n{\r\n\tlet number = 0;\r\n\tif (this.length > 0)\r\n\t\tnumber = Number(this.match(/[\\d\\.\\-]+/))\r\n\r\n\treturn number;\r\n}\r\n\r\nString.prototype.vrToBoolean = function (this)\r\n{\r\n\treturn (this.toLowerCase() === \"true\");\r\n}\r\n\r\nString.prototype.vrIsNotNullOrEmpty = function (this)\r\n{\r\n\treturn this != null && this != \"\";\r\n}\r\n\r\nString.prototype.vrIsNullOrEmpty = function (this)\r\n{\r\n\treturn this == null || this == \"\";\r\n}\r\n\r\nString.prototype.vrRemoveHtml = function (this)\r\n{\r\n\treturn this.replace(/<\\/?[^>]+(>|$)/g, \"\");\r\n}\r\n\r\nArray.prototype.vrFirst = function ()\r\n{\r\n\tif (Array.isArray(this))\r\n\t\treturn (this as any)[0];\r\n\r\n\treturn null;\r\n}\r\n\r\nArray.prototype.vrLast = function ()\r\n{\r\n\tif (Array.isArray(this))\r\n\t\treturn this[this.length - 1];\r\n\r\n\treturn null;\r\n}\r\n\r\nArray.prototype.vrToNumberArrayList = function ()\r\n{\r\n\tif (Array.isArray(this))\r\n\t\treturn this.map((value) => { return Number(value) });\r\n\r\n\treturn [];\r\n}\r\n\r\nArray.prototype.vrToStringArrayList = function ()\r\n{\r\n\tif (Array.isArray(this))\r\n\t\treturn this.map((value) => { return String(value) });\r\n\r\n\treturn [];\r\n}\r\n\r\nArray.prototype.vrToCommaSeparatedList = function ()\r\n{\r\n\tif (Array.isArray(this))\r\n\t{\r\n\t\tlet result = \"\";\r\n\t\tfor (let item of this)\r\n\t\t\tresult += item.toString() + \", \";\r\n\r\n\t\treturn result.substring(0, result.length - 2);\r\n\t}\r\n\telse\r\n\t\treturn \"\";\r\n}\r\n\r\nArray.prototype.vrPushRange = function (arrayToAdd: any[])\r\n{\r\n\tif (Array.isArray(this))\r\n\t{\r\n\t\tfor (let element of arrayToAdd)\r\n\t\t\tthis.push(element);\r\n\t}\r\n}\r\n\r\nArray.prototype.vrDelete = function (value: any)\r\n{\r\n\tif (Array.isArray(this))\r\n\t{\r\n\t\tlet index = this.indexOf(value);\r\n\t\tif (index != -1)\r\n\t\t\tthis.splice(index, 1);\r\n\t}\r\n}\r\n\r\nArray.prototype.vrDeleteItem = function (item: any, key: string)\r\n{\r\n\tif (Array.isArray(this))\r\n\t{\r\n\t\tlet index = this.map(k => k[key]).indexOf(item[key]);\r\n\t\tif (index != -1)\r\n\t\t\tthis.splice(index, 1);\r\n\t}\r\n}\r\n\r\nArray.prototype.vrDeleteAllBy = function (callbackfn: (value: any, index: number, array: any[]) => any)\r\n{\r\n\tif (Array.isArray(this))\r\n\t{\r\n\t\tlet itemToDeleteList = this.filter(callbackfn);\r\n\t\tfor (let itemToDelete of itemToDeleteList)\r\n\t\t{\r\n\t\t\tif (itemToDelete != null)\r\n\t\t\t\tthis.vrDelete(itemToDelete);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction dynamicSort(property: string)\r\n{\r\n\tvar sortOrder = 1;\r\n\tif (property[0] === \"-\")\r\n\t{\r\n\t\tsortOrder = -1;\r\n\t\tproperty = property.substr(1);\r\n\t}\r\n\r\n\treturn function (a: any, b: any)\r\n\t{\r\n\t\tlet aProperty = a[property];\r\n\t\tlet bProperty = b[property];\r\n\r\n\t\tif (typeof (aProperty) == \"string\")\r\n\t\t\taProperty = aProperty.toLowerCase();\r\n\r\n\t\tif (typeof (bProperty) == \"string\")\r\n\t\t\tbProperty = bProperty.toLowerCase();\r\n\r\n\t\tvar result = (aProperty < bProperty) ? -1 : (aProperty > bProperty) ? 1 : 0;\r\n\r\n\t\t//#region Manage Empty & Null\r\n\t\tif ((typeof (aProperty) == \"string\" && aProperty == \"\") || (typeof (bProperty) == \"string\" && bProperty == \"\"))\r\n\t\t\tresult = (aProperty == \"\") ? 1 : -1;\r\n\r\n\t\tif (aProperty == null || bProperty == null)\r\n\t\t\tresult = (sortOrder == 1) ? ((aProperty == null) ? 1 : -1) : ((aProperty == null) ? -1 : 1);\r\n\t\t//#endregion\r\n\r\n\t\treturn result * sortOrder;\r\n\t}\r\n}\r\n\r\nfunction dynamicSortMultiple()\r\n{\r\n\tvar props = arguments;\r\n\treturn function (obj1: any, obj2: any)\r\n\t{\r\n\t\tvar i = 0, result = 0, numberOfProperties = props.length;\r\n\t\twhile (result === 0 && i < numberOfProperties)\r\n\t\t{\r\n\t\t\tresult = dynamicSort(props[i])(obj1, obj2);\r\n\t\t\ti++;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\nArray.prototype.vrSortBy = function (properties: string[], ascending?: boolean)\r\n{\r\n\tif (Array.isArray(this))\r\n\t{\r\n\t\tif (properties != null && properties.length > 0)\r\n\t\t{\r\n\t\t\tif (ascending != null && !ascending)\r\n\t\t\t\tproperties = properties.map(k => { return (!k.startsWith(\"-\")) ? \"-\" + k : k });\r\n\r\n\t\t\tthis.sort(dynamicSortMultiple.apply(null, properties as any));\r\n\t\t}\r\n\t\telse\r\n\t\t\tinternalSortWithoutProperties(this, (ascending == null) ? true : ascending);\r\n\t}\r\n\treturn this;\r\n}\r\n\r\nArray.prototype.vrSortAsc = function (...properties: string[])\r\n{\r\n\treturn this.vrSortBy(properties, true);\r\n}\r\n\r\nArray.prototype.vrSortDesc = function (...properties: string[])\r\n{\r\n\treturn this.vrSortBy(properties, false);\r\n}\r\n\r\nfunction internalSortWithoutProperties(array: any[], ascending: boolean)\r\n{\r\n\tarray.sort((a: any, b: any) => \r\n\t{\r\n\t\tif (ascending)\r\n\t\t{\r\n\t\t\tif (typeof (a) == \"number\")\r\n\t\t\t{\r\n\t\t\t\tconst diff = a - b;\r\n\t\t\t\tif (diff)\r\n\t\t\t\t\treturn diff;\r\n\t\t\t}\r\n\t\t\telse if (typeof (a) == \"string\")\r\n\t\t\t{\r\n\t\t\t\t// Try to catch date\r\n\t\t\t\tlet tryDate = new Date(a);\r\n\t\t\t\tif (!isNaN(tryDate.getTime()))\r\n\t\t\t\t\treturn new Date(a).getTime() - new Date(b).getTime();\r\n\t\t\t\telse\r\n\t\t\t\t\treturn a.localeCompare(b);\r\n\t\t\t}\r\n\t\t\telse if (Object.prototype.toString.call(a) === '[object Date]')\r\n\t\t\t\treturn new Date(a).getTime() - new Date(b).getTime();\r\n\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tif (typeof (b) == \"number\")\r\n\t\t\t{\r\n\t\t\t\tconst diff = b - a;\r\n\t\t\t\tif (diff)\r\n\t\t\t\t\treturn diff;\r\n\t\t\t}\r\n\t\t\telse if (typeof (b) == \"string\")\r\n\t\t\t{\r\n\t\t\t\t// Try to catch date\r\n\t\t\t\tlet tryDate = new Date(b);\r\n\t\t\t\tif (!isNaN(tryDate.getTime()))\r\n\t\t\t\t\treturn new Date(b).getTime() - new Date(a).getTime();\r\n\t\t\t\telse\r\n\t\t\t\t\treturn b.localeCompare(a);\r\n\t\t\t}\r\n\t\t\telse if (Object.prototype.toString.call(b) === '[object Date]')\r\n\t\t\t\treturn new Date(b).getTime() - new Date(a).getTime();\r\n\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t});\r\n}\r\n\r\nArray.prototype.vrAny = function (callbackfn: (value: any, index: number, array: any[]) => any)\r\n{\r\n\tif (Array.isArray(this))\r\n\t\treturn this.some(callbackfn);\r\n\r\n\treturn false;\r\n}\r\n\r\nArray.prototype.vrMax = function (callbackfn?: (value: any, index: number, array: any[]) => any)\r\n{\r\n\tif (Array.isArray(this))\r\n\t{\r\n\t\tif (callbackfn != null)\r\n\t\t{\r\n\t\t\tlet property = callbackfn.toString().split(\".\")[1];\r\n\t\t\treturn this.reduce((oa, u) => Math.max(oa, u[property]), 0);\r\n\t\t}\r\n\t\telse\r\n\t\t\treturn Math.max.apply(null, this);\r\n\t}\r\n\r\n\treturn 0;\r\n};\r\n\r\nArray.prototype.vrMin = function (callbackfn?: (value: any, index: number, array: any[]) => any)\r\n{\r\n\tif (Array.isArray(this))\r\n\t{\r\n\t\tif (callbackfn != null)\r\n\t\t{\r\n\t\t\tlet property = callbackfn.toString().split(\".\")[1];\r\n\t\t\treturn this.reduce((oa, u) => Math.min(oa, u[property]), Number.MAX_VALUE);\r\n\t\t}\r\n\t\telse\r\n\t\t\treturn Math.min.apply(null, this);\r\n\t}\r\n\r\n\treturn 0;\r\n};\r\n\r\nArray.prototype.vrSum = function (callbackfn?: (value: any, index: number, array: any[]) => any)\r\n{\r\n\tif (Array.isArray(this))\r\n\t{\r\n\t\tif (callbackfn == null)\r\n\t\t\treturn this.reduce((ty, u) => ty + u, 0);\r\n\t\telse\r\n\t\t{\r\n\t\t\tlet property = callbackfn.toString().split(\"=>\")[1];\r\n\t\t\tlet sum: number = 0;\r\n\t\t\tthis.forEach(k => sum += eval(property));\r\n\t\t\treturn sum;\r\n\t\t}\r\n\t}\r\n\r\n\treturn 0;\r\n}\r\n\r\nArray.prototype.vrAvg = function (callbackfn?: (value: any, index: number, array: any[]) => any)\r\n{\r\n\tif (Array.isArray(this))\r\n\t{\r\n\t\tif (callbackfn == null)\r\n\t\t\treturn this.vrSum() / this.length;\r\n\t\telse\r\n\t\t{\r\n\t\t\tlet sum = this.vrSum(callbackfn);\r\n\t\t\treturn sum / this.length;\r\n\t\t}\r\n\t}\r\n\r\n\treturn 0;\r\n}\r\n\r\nArray.prototype.vrDistinct = function (this)\r\n{\r\n\tif (Array.isArray(this))\r\n\t\treturn [...new Set(this)];\r\n\r\n\treturn [];\r\n}\r\n\r\nArray.prototype.vrDistinctBy = function (callbackfn: (value: any, index: number, array: any[]) => any)\r\n{\r\n\tif (Array.isArray(this))\r\n\t{\r\n\t\tlet arrayResult: any[] = [];\r\n\t\tlet arrayMap = new Map();\r\n\t\tlet property = callbackfn.toString().split(\".\")[1];\r\n\r\n\t\tfor (let item of this)\r\n\t\t{\r\n\t\t\tlet value: any;\r\n\t\t\tfor (let key in item)\r\n\t\t\t{\r\n\t\t\t\tif (key == property)\r\n\t\t\t\t\tvalue = item[key];\r\n\t\t\t}\r\n\r\n\t\t\tif (!arrayMap.has(value))\r\n\t\t\t{\r\n\t\t\t\tarrayMap.set(value, true);\r\n\t\t\t\tarrayResult.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn arrayResult;\r\n\t}\r\n\treturn [];\r\n}\r\n\r\n/** Deprecated */\r\nArray.prototype.vrGroupBy = function (callbackfn: (value: any, index: number, array: any[]) => any)\r\n{\r\n\tif (Array.isArray(this))\r\n\t{\r\n\t\tlet property = callbackfn.toString().split(\".\")[1];\r\n\t\tif (!callbackfn.toString().includes(\".\"))\r\n\t\t\tproperty = callbackfn.toString().split(\"[\")[1].replace(\"]\", \"\");\r\n\r\n\t\treturn this.reduce(function (groups, item)\r\n\t\t{\r\n\t\t\tconst val = item[property];\r\n\t\t\tgroups[val] = groups[val] || [];\r\n\t\t\tgroups[val].push(item);\r\n\t\t\treturn groups;\r\n\t\t}, {});\r\n\t}\r\n\treturn [];\r\n}\r\n\r\nArray.prototype.vrGroupByProperty = function (property: string)\r\n{\r\n\tif (Array.isArray(this))\r\n\t{\r\n\t\treturn this.reduce(function (groups, item)\r\n\t\t{\r\n\t\t\tconst val = item[property];\r\n\t\t\tgroups[val] = groups[val] || [];\r\n\t\t\tgroups[val].push(item);\r\n\t\t\treturn groups;\r\n\t\t}, {});\r\n\t}\r\n\treturn [];\r\n}\r\n\r\nArray.vrEquals = function (array1: any[], array2: any[]): boolean\r\n{\r\n\tif (Array.isArray(array1) && Array.isArray(array2))\r\n\t{\r\n\t\tlet array1Length = array1.length;\r\n\r\n\t\tif (array1 == null || array2 == null) return false;\r\n\t\tif (array1Length != array2.length) return false;\r\n\r\n\t\tlet arr1 = array1.concat().sort();\r\n\t\tlet arr2 = array2.concat().sort();\r\n\r\n\t\tfor (let i = 0; i < arr1.length; ++i)\r\n\t\t{\r\n\t\t\tif (arr1[i] !== arr2[i])\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\njQuery.prototype.vrDrag = function (element?: HTMLElement | string | JQuery, onStart?: (e: { event: any, left: number, top: number }) => void, onEnd?: (e: { event: any, left: number, top: number }) => void)\r\n{\r\n\tthis.mousedown((emd: JQuery.MouseDownEvent) =>\r\n\t{\r\n\t\tlet startingXPosition = emd.clientX;\r\n\t\tlet startingYPosition = emd.clientY;\r\n\t\tlet diffX = emd.clientX - puma((this as any)[0]).offset().left;\r\n\t\tlet diffY = emd.clientY - puma((this as any)[0]).offset().top;\r\n\r\n\t\tif (diffX <= 5 && diffY <= 5)\r\n\t\t\treturn;\r\n\r\n\t\t// Moving\r\n\t\tpuma(document).mousemove((emm: JQuery.MouseMoveEvent) => \r\n\t\t{\r\n\t\t\tif (!(emm.clientX == startingXPosition && emm.clientY == startingYPosition))\r\n\t\t\t{\r\n\t\t\t\tlet elementToDrag: JQuery = this;\r\n\t\t\t\tif (element != null)\r\n\t\t\t\t\telementToDrag = puma(element);\r\n\r\n\t\t\t\tif (onStart != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet onStartEvent = new WindowEvent() as any;\r\n\t\t\t\t\tonStartEvent.event = emm;\r\n\t\t\t\t\tonStartEvent.left = emm.clientX - diffX;\r\n\t\t\t\t\tonStartEvent.top = emm.clientY;\r\n\t\t\t\t\tonStart(onStartEvent);\r\n\r\n\t\t\t\t\tif (onStartEvent.isDefaultPrevented())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpuma(document).unbind(\"mouseup\");\r\n\t\t\t\t\t\tpuma(document).unbind(\"mousemove\");\r\n\t\t\t\t\t\temm.preventDefault();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telementToDrag.offset({ top: emm.clientY, left: (emm.clientX - diffX) });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Stop moving\r\n\t\tpuma(document).mouseup((emm: JQuery.MouseUpEvent) =>\r\n\t\t{\r\n\t\t\tpuma(document).unbind(\"mouseup\");\r\n\t\t\tpuma(document).unbind(\"mousemove\");\r\n\r\n\t\t\tif (onEnd != null)\r\n\t\t\t{\r\n\t\t\t\tlet onEndEvent: any = {};\r\n\t\t\t\tonEndEvent.event = emm;\r\n\t\t\t\tonEndEvent.left = emm.clientX - (puma((this as any)[0]).width() / 2);\r\n\t\t\t\tonEndEvent.top = emm.clientY;\r\n\t\t\t\tonEnd(onEndEvent);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\njQuery.prototype.vrVisible = function (state?: boolean)\r\n{\r\n\tif (state != null)\r\n\t{\r\n\t\tif (state) this.show();\r\n\t\telse this.hide();\r\n\t}\r\n\treturn this.is(\":visible\");\r\n}\r\n\r\nvar _shadowRoot2: ShadowRoot | null | undefined = null;\r\nvar _jqueryVariable: any = jQuery;\r\n\r\njQuery.prototype.vrAppendToPuma = function (element: any)\r\n{\r\n\tlet container = puma(element);\r\n\treturn this.appendTo(container);\r\n}\r\n\r\njQuery.prototype.vrPrependToPuma = function (element: any)\r\n{\r\n\tlet container = puma(element);\r\n\treturn this.prependTo(container);\r\n}\r\n\r\njQuery.prototype.vrAppendPuma = function (element: any)\r\n{\r\n\tlet toCreate = puma(element);\r\n\treturn this.append(toCreate);\r\n}\r\n\r\njQuery.prototype.vrPrependPuma = function (element: any)\r\n{\r\n\tlet toCreate = puma(element);\r\n\treturn this.prepend(toCreate);\r\n}\r\n\r\njQuery.prototype.vrBeforePuma = function (element: any)\r\n{\r\n\tlet elementJq = puma(element);\r\n\treturn this.before(elementJq);\r\n}\r\n\r\njQuery.prototype.vrAfterPuma = function (element: any)\r\n{\r\n\tlet elementJq = puma(element);\r\n\treturn this.after(elementJq);\r\n}\r\n\r\njQuery.prototype.vrInsertBeforePuma = function (element: any)\r\n{\r\n\tlet elementJq = puma(element);\r\n\treturn this.insertBefore(elementJq);\r\n}\r\n\r\njQuery.prototype.vrInsertAfterPuma = function (element: any)\r\n{\r\n\tlet elementJq = puma(element);\r\n\treturn this.insertAfter(elementJq);\r\n}\r\n\r\njQuery.prototype.vrHasScrollBar = function (horizontal: boolean = false): boolean\r\n{\r\n\tif (this.get(0) == null)\r\n\t\treturn false;\r\n\r\n\tif (!horizontal)\r\n\t\treturn this.get(0).scrollHeight > this.get(0).clientHeight;\r\n\telse\r\n\t\treturn this.get(0).scrollWidth > this.get(0).clientWidth;\r\n}\r\n\r\nexport function puma(element: any)\r\n{\r\n\treturn (shadowRoot() != null && jqueryVariable()(element).length == 0) ? jqueryVariable()(shadowRoot()).find(element) : jqueryVariable()(element);\r\n}\r\n//#endregion","import { ControlTypeEnum, LabelModeEnum, PositionEnum, createLabel, ControlPositionEnum, TextAlignEnum, PopupSettings, ColorSettings, puma, shadowRoot, PopupDirectionEnum, VrMarginSettings } from \"./vr\";\r\nimport { Label, LabelClickEvent } from \"./controls/label\";\r\n\r\nexport class VrControl\r\n{\r\n    private _element: HTMLElement | HTMLInputElement;\r\n    _options: VrControlOptions;\r\n    private _labelOutside: Label;\r\n    private _typeEnum: ControlTypeEnum;\r\n    private _tag: any;\r\n\r\n    constructor(element?: HTMLElement | HTMLInputElement, options?: VrControlOptions, typeEnum?: ControlTypeEnum)\r\n    {\r\n        this._element = element!;\r\n        this._options = options!;\r\n        this._typeEnum = typeEnum!;\r\n\r\n        //#region MainClass/Container\r\n        puma(element).wrap(\"<div class='vrControlsContainer'></div>\");\r\n        puma(element).addClass(\"vr\" + typeEnum);\r\n        puma(element).addClass(\"vrControls\");\r\n        puma(this.container()).addClass(\"vr\" + typeEnum + \"Container\");\r\n        puma(this.container()).attr(\"id\", element!.id + \"Container\");\r\n        //#endregion\r\n\r\n        //#region Label\r\n        if (options!.label != null)\r\n        {\r\n            if (options!.labelSettings == null)\r\n                options!.labelSettings = new LabelControlsSettings();\r\n\r\n            if (options!.labelSettings.mode == null) options!.labelSettings.mode = LabelModeEnum.Primary;\r\n            if (options!.labelSettings.position == null) options!.labelSettings.position = PositionEnum.Top;\r\n\r\n            let labelPosition = options!.labelSettings.position;\r\n            let controlPositionEnum = (labelPosition == PositionEnum.Top || labelPosition == PositionEnum.Left) ? ControlPositionEnum.Before : ControlPositionEnum.After;\r\n            let margin = \"\";\r\n            let top = \"\";\r\n            if (labelPosition == PositionEnum.Left)\r\n            {\r\n                margin = \"margin-right: 5px;\";\r\n                top = \"top: -1px;\";\r\n            }\r\n            else if (labelPosition == PositionEnum.Right)\r\n            {\r\n                margin = \"margin-left: 5px;\";\r\n                top = \"top: -1px;\";\r\n            }\r\n            else\r\n                this.container().style.cssText += \"display: inline-flex; flex-direction: column;\";\r\n\r\n            this._labelOutside = createLabel(\r\n                {\r\n                    id: options!.labelSettings!.id,\r\n                    text: options!.label,\r\n                    mode: options!.labelSettings.mode,\r\n                    align: options!.labelSettings.textAlign,\r\n                    width: (labelPosition == PositionEnum.Top || labelPosition == PositionEnum.Bottom) ? \"100%\" : options!.labelSettings.width,\r\n                    class: options!.labelSettings.class,\r\n                    fontSize: options!.labelSettings.fontSize,\r\n                    cssContainer: margin + top + options!.labelSettings.cssContainer,\r\n                    css: options!.labelSettings.css,\r\n                    bold: options!.labelSettings.bold,\r\n                    tooltip: options!.labelSettings.tooltip,\r\n                    colorSettings: options!.labelSettings.colorSettings,\r\n                    tabIndex: -1,\r\n                    onClick: options!.labelSettings.onClick\r\n                }, this.container(), controlPositionEnum);\r\n        }\r\n        //#endregion\r\n\r\n        //#region Width and Height\r\n        if (options!.width != null)\r\n            this.width(options!.width);\r\n        if (options!.height != null)\r\n            this.height(options!.height);\r\n        //#endregion\r\n\r\n        //#region Visible/Enable\r\n        if (options!.visible === false)\r\n            this.hide();\r\n        if (options!.enable === false)\r\n            this.disable();\r\n        //#endregion\r\n\r\n        //#region Id/CSS/Class\r\n        if (options!.id != null)\r\n            this.id(options!.id);\r\n\r\n        if (options!.css != null)\r\n            this.css(options!.css);\r\n        if (options!.cssContainer != null)\r\n            this.cssContainer(options!.cssContainer);\r\n        if (options!.class != null)\r\n            this.class(options!.class);\r\n        if (options!.classContainer != null)\r\n            this.classContainer(options!.classContainer);\r\n        //#endregion\r\n\r\n        //#region Other\r\n        if (options!.margin != null)\r\n        {\r\n            if (typeof (options!.margin) == \"number\")\r\n                this.container().style.cssText += \"margin: \" + options!.margin + \"px;\";\r\n            else\r\n            {\r\n                if (options!.margin.top != null) this.container().style.cssText += \"margin-top: \" + options!.margin.top + \"px;\";\r\n                if (options!.margin.right != null) this.container().style.cssText += \"margin-right: \" + options!.margin.right + \"px;\";\r\n                if (options!.margin.bottom != null) this.container().style.cssText += \"margin-bottom: \" + options!.margin.bottom + \"px;\";\r\n                if (options!.margin.left != null) this.container().style.cssText += \"margin-left: \" + options!.margin.left + \"px;\";\r\n            }\r\n        }\r\n\r\n        if (options!.addToControlList == null)\r\n            options!.addToControlList = true;\r\n        //#endregion\r\n\r\n        //#region Tag/Attributes/TabIndex\r\n        this._tag = options!.tag;\r\n\r\n        if (options!.attributes == null) options!.attributes = [];\r\n        if (options!.uniqueName != null)\r\n            options!.attributes!.push({ name: \"uniqueName\", value: options!.uniqueName });\r\n\r\n        for (let attribute of options!.attributes)\r\n            this.attribute(attribute.name, attribute.value, attribute.container);\r\n\r\n        if (options!.tabIndex == null) options!.tabIndex = 0;\r\n        this.attribute(\"tabindex\", options!.tabIndex);\r\n\r\n        if (options!.shadowRoot !== false)\r\n        {\r\n            if (shadowRoot() != null)\r\n                puma(this.container()).addClass(\"shadowRoot\");\r\n        }\r\n        //#endregion\r\n    }\r\n\r\n    controlType(): ControlTypeEnum\r\n    {\r\n        return this._typeEnum;\r\n    }\r\n\r\n    id(id?: string)\r\n    {\r\n        if (id != null)\r\n        {\r\n            this.element().id = id;\r\n            this.container().id = id + \"Container\";\r\n        }\r\n        return this.element().id;\r\n    }\r\n\r\n    tag(tag?: any)\r\n    {\r\n        if (tag != null)\r\n            this._tag = tag;\r\n\r\n        if (tag === null)\r\n            this._tag = null;\r\n\r\n        return this._tag;\r\n    }\r\n\r\n    uniqueName(uniqueName?: string)\r\n    {\r\n        if (uniqueName != null)\r\n            this.attribute(\"uniqueName\", uniqueName);\r\n\r\n        return puma(this.element()).attr(\"uniqueName\");\r\n    }\r\n\r\n    attribute(name: string, value: any, toContainer = false)\r\n    {\r\n        if (!toContainer)\r\n            puma(this.element()).attr(name, value);\r\n        else\r\n            puma(this.container()).attr(name, value);\r\n    }\r\n\r\n    tooltip(tooltip?: string, container = false)\r\n    {\r\n        if (tooltip != null)\r\n        {\r\n            if (container) puma(this.container()).attr(\"title\", tooltip);\r\n            else puma(this.element()).attr(\"title\", tooltip);\r\n        }\r\n        return (container) ? puma(this.container()).attr(\"title\") : puma(this.element()).attr(\"title\");\r\n    }\r\n\r\n    //#region Element/Container/Options\r\n    element<T extends HTMLElement>()\r\n    {\r\n        return this._element as T;\r\n    }\r\n\r\n    container(): HTMLElement\r\n    {\r\n        return puma(this.element()).closest(\".vrControlsContainer\")[0];\r\n    }\r\n\r\n    label(): Label | null\r\n    {\r\n        return this._labelOutside;\r\n    }\r\n\r\n    options<T extends VrControlOptions>()\r\n    {\r\n        return <T>this._options;\r\n    }\r\n    //#endregion\r\n\r\n    //#region Popup\r\n    settingPopup(popup: HTMLElement, popupSettings?: PopupSettings)\r\n    {\r\n        //#region Settings\r\n        if (popupSettings != null)\r\n        {\r\n            // Width\r\n            if (popupSettings.width != null) popup.style.cssText += \"width: \" + this.fixWidthHeightValue(popupSettings.width) + \";\";\r\n            if (popupSettings.minWidth != null) popup.style.cssText += \"min-width: \" + this.fixWidthHeightValue(popupSettings.minWidth) + \";\";\r\n            if (popupSettings.maxWidth != null) popup.style.cssText += \"max-width: \" + this.fixWidthHeightValue(popupSettings.maxWidth) + \";\";\r\n\r\n            // Height\r\n            if (popupSettings.height != null) popup.style.cssText += \"height: \" + this.fixWidthHeightValue(popupSettings.height) + \";\";\r\n            if (popupSettings.minHeight != null) popup.style.cssText += \"min-height: \" + this.fixWidthHeightValue(popupSettings.minHeight) + \";\";\r\n            if (popupSettings.maxHeight != null) popup.style.cssText += \"max-height: \" + this.fixWidthHeightValue(popupSettings.maxHeight) + \";\";\r\n\r\n            // Direction\r\n            if (popupSettings.direction == null) popupSettings.direction = PopupDirectionEnum.Auto;\r\n        }\r\n        //#endregion\r\n\r\n        //#region Values\r\n        let elementTop = this.element().getBoundingClientRect().top;\r\n        let elementLeft = this.element().getBoundingClientRect().left;\r\n        let elementWidth = puma(this.element()).outerWidth();\r\n        let elementHeight = puma(this.element()).outerHeight();\r\n\r\n        let popupWidth = puma(popup).outerWidth();\r\n        let popupHeight = puma(popup).outerHeight();\r\n        //#endregion\r\n\r\n        //#region Right/Left management\r\n        let positionLeft = 0;\r\n        if (popupSettings != null && popupSettings.right === true)\r\n            positionLeft = elementLeft + elementWidth - popupWidth;\r\n        else\r\n        {\r\n            let documentBodyLeft = puma(document.body).offset().left;\r\n            let documentBodyWidth = puma(document.body).width();\r\n\r\n            if ((documentBodyLeft + documentBodyWidth) <= (elementLeft + popupWidth + elementWidth)) // To right\r\n                positionLeft = elementLeft + elementWidth - popupWidth;\r\n            else // To left\r\n                positionLeft = elementLeft;\r\n        }\r\n        //#endregion\r\n\r\n        //#region Up/Down management\r\n        if (popupSettings != null && popupSettings.direction != PopupDirectionEnum.Auto)\r\n        {\r\n            if (popupSettings.direction == PopupDirectionEnum.Up)\r\n                popup.style.cssText += \"left: \" + positionLeft + \"px; bottom: \" + (window.innerHeight - elementTop) + \"px;\";\r\n            else if (popupSettings.direction == PopupDirectionEnum.Down)\r\n                popup.style.cssText += \"left: \" + positionLeft + \"px; top: \" + (elementTop + elementHeight) + \"px;\";\r\n        }\r\n        else\r\n        {\r\n            let documentBodyTop = puma(document.body).offset().top;\r\n            let documentBodyHeight = puma(document.body).height();\r\n\r\n            if ((documentBodyTop + documentBodyHeight) <= (elementTop + popupHeight + elementHeight)) // To up\r\n                popup.style.cssText += \"left: \" + positionLeft + \"px; bottom: \" + (window.innerHeight - elementTop) + \"px;\";\r\n            else // To down\r\n                popup.style.cssText += \"left: \" + positionLeft + \"px; top: \" + (elementTop + elementHeight) + \"px;\";\r\n        }\r\n        //#endregion\r\n\r\n        if (shadowRoot() != null)\r\n            popup.style.cssText += \"position: fixed;\";\r\n    }\r\n\r\n    private fixWidthHeightValue(value: string | number)\r\n    {\r\n        if (typeof (value) == \"number\")\r\n            value = value + \"px\";\r\n        return value;\r\n    }\r\n    //#endregion\r\n\r\n    //#region Width/Height\r\n    width(value?: string | number): number\r\n    {\r\n        if (value != null)\r\n        {\r\n            let options = this.options();\r\n            let containerJq = puma(this.container());\r\n            let elementJq = puma(this.element());\r\n\r\n            //#region Label width before width assignment\r\n            let labelWidth = 0;\r\n            if (options.label != null)\r\n            {\r\n                let label = containerJq.find(\".vrLabel\")[0];\r\n                labelWidth = puma(label).outerWidth(true) + 5;\r\n            }\r\n            //#endregion\r\n\r\n            //#region Width without Label\r\n            containerJq.width(value);\r\n            let diff = elementJq.outerWidth() - elementJq.width();\r\n            if (diff === elementJq.outerWidth() && options.label == null)\r\n                diff = 0;\r\n\r\n            elementJq.width(\"Calc(100% - \" + diff + \"px)\");\r\n            if (elementJq.hasClass(\"vrEditor\"))\r\n                elementJq.width(\"100%\");\r\n            //#endregion\r\n\r\n            if (options.label != null)\r\n            {\r\n                //#region Width with Label\r\n                let labelPosition = options.labelSettings!.position;\r\n                if (labelPosition == PositionEnum.Left || labelPosition == PositionEnum.Right)\r\n                {\r\n                    if (options.labelSettings!.width != null)\r\n                        labelWidth = options.labelSettings!.width;\r\n\r\n                    if (typeof (value) === \"string\")\r\n                        elementJq.width(\"Calc(100% - \" + (diff + labelWidth) + \"px)\");\r\n                    else if (typeof (value) === \"number\")\r\n                    {\r\n                        elementJq.width(value - diff);\r\n                        containerJq.width(value + labelWidth);\r\n                    }\r\n                }\r\n                else if (elementJq.is(\"button\") || elementJq.is(\"textarea\"))\r\n                    elementJq.width(\"Calc(100% - 0px)\");\r\n                //#endregion\r\n            }\r\n            else if (elementJq.is(\"button\") || elementJq.is(\"textarea\"))\r\n                elementJq.width(\"100%\");\r\n        }\r\n        return puma(this.element()).width();\r\n    }\r\n\r\n    height(value?: string | number): number\r\n    {\r\n        if (value != null)\r\n        {\r\n            if (typeof (value) == \"string\")\r\n            {\r\n                puma(this.container())[0].style.cssText += \"height: \" + value + \";\";\r\n                puma(this.element())[0].style.cssText += \"height: \" + value + \";\";\r\n            }\r\n            else\r\n            {\r\n                puma(this.container()).height(value);\r\n                puma(this.element()).height(value);\r\n            }\r\n        }\r\n        return puma(this.element()).height();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Enable/Disable\r\n    enabled(state?: boolean)\r\n    {\r\n        if (state != null)\r\n        {\r\n            if (state) this.enable();\r\n            else this.disable();\r\n        }\r\n\r\n        let disabledAttribute = this.element().getAttribute(\"disabled\");\r\n        return disabledAttribute == null || disabledAttribute == \"\";\r\n    }\r\n\r\n    enable()\r\n    {\r\n        this.element().removeAttribute(\"disabled\");\r\n    }\r\n\r\n    disable()\r\n    {\r\n        this.element().setAttribute(\"disabled\", \"disabled\");\r\n    }\r\n    //#endregion\r\n\r\n    //#region Visible\r\n    visible(state?: boolean): boolean\r\n    {\r\n        if (state != null)\r\n        {\r\n            if (state) this.show();\r\n            else this.hide();\r\n        }\r\n        return puma(this.container()).is(\":visible\");\r\n    }\r\n\r\n    show()\r\n    {\r\n        puma(this.container()).show();\r\n        if (puma(this.element()).is(\"button\"))\r\n            puma(this.element()).css({ \"max-width\": \"100%\" });\r\n    }\r\n\r\n    hide()\r\n    {\r\n        puma(this.container()).hide();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Focus\r\n    focus()\r\n    {\r\n        puma(this.element()).focus();\r\n    }\r\n\r\n    blur()\r\n    {\r\n        puma(this.element()).blur();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Css\r\n    cssContainer(value: string)\r\n    {\r\n        this.container().style.cssText += value;\r\n    }\r\n\r\n    css(value: string)\r\n    {\r\n        this.element().style.cssText += value;\r\n    }\r\n\r\n    class(className?: string): string[]\r\n    {\r\n        if (className != null)\r\n            puma(this.element()).addClass(className);\r\n\r\n        return this.element().className.split(/\\s+/);\r\n    }\r\n\r\n    classContainer(className?: string): string[]\r\n    {\r\n        if (className != null)\r\n            puma(this.container()).addClass(className);\r\n\r\n        return this.container().className.split(/\\s+/);\r\n    }\r\n\r\n    removeClass(className: string)\r\n    {\r\n        puma(this.element()).removeClass(className);\r\n    }\r\n    //#endregion\r\n}\r\n\r\nexport class VrControlOptions\r\n{\r\n    width?: string | number;\r\n    height?: string | number;\r\n\r\n    id?: string;\r\n    css?: string;\r\n    cssContainer?: string;\r\n    class?: string;\r\n    classContainer?: string;\r\n\r\n    margin?: number | VrMarginSettings;\r\n\r\n    enable?: boolean;\r\n    visible?: boolean;\r\n\r\n    label?: string;\r\n    labelSettings?: LabelControlsSettings;\r\n\r\n    tag?: any;\r\n    uniqueName?: string;\r\n    attributes?: AttributeSettings[];\r\n    tabIndex?: number;\r\n    shadowRoot?: boolean;\r\n    addToControlList?: boolean;\r\n}\r\n\r\nexport class LabelControlsSettings\r\n{\r\n    id?: string;\r\n    mode?: LabelModeEnum;\r\n    width?: number;\r\n    class?: string;\r\n    position?: PositionEnum;\r\n    fontSize?: number | string;\r\n    textAlign?: TextAlignEnum;\r\n    tooltip?: boolean | string;\r\n    bold?: boolean;\r\n    css?: string;\r\n    cssContainer?: string;\r\n    colorSettings?: ColorSettings;\r\n    onClick?: (e: LabelClickEvent) => void;\r\n}\r\n\r\nexport class AttributeSettings\r\n{\r\n    name: string;\r\n    value: any;\r\n    container?: boolean;\r\n}\r\n\r\nexport class VrControlsEvent\r\n{\r\n    private _defaultPrevented: boolean = false;\r\n\r\n    preventDefault()\r\n    {\r\n        this._defaultPrevented = true;\r\n    }\r\n\r\n    isDefaultPrevented()\r\n    {\r\n        return this._defaultPrevented;\r\n    }\r\n}","import { IconClassLight, jqueryVariable, puma, WebApiModeEnum, span, notifyError, IconClass } from \"../ui/vr\";\r\n\r\nexport class UtilityManager\r\n{\r\n    static createGuid()\r\n    {\r\n        const hex = [...Array(256).keys()].map(index => (index).toString(16).padStart(2, '0'));\r\n        const r = crypto.getRandomValues(new Uint8Array(16));\r\n        r[6] = (r[6] & 0x0f) | 0x40;\r\n        r[8] = (r[8] & 0x3f) | 0x80;\r\n\r\n        return [...r.entries()]\r\n            .map(([index, int]) => [4, 6, 8, 10].includes(index) ? `-${hex[int]}` : hex[int])\r\n            .join('');\r\n    }\r\n\r\n    static interval(callback: Function, each: number, timeout?: number, timeoutCallback?: Function)\r\n    {\r\n        let interval = window.setInterval(() => callback(), each);\r\n        if (timeout != null)\r\n            window.setTimeout(() => \r\n            {\r\n                window.clearInterval(interval);\r\n                if (timeoutCallback != null)\r\n                    timeoutCallback();\r\n            }, timeout);\r\n    }\r\n\r\n    static createIcon(icon: IconClass): HTMLElement\r\n    {\r\n        return puma(\"<i class='\" + icon + \" vrIcon' aria-hidden='true'></i>\")[0];\r\n    }\r\n\r\n    static duplicate(element: any)\r\n    {\r\n        if (element != null)\r\n        {\r\n            let newElement = JSON.parse(JSON.stringify(element));\r\n            return newElement;\r\n        }\r\n    }\r\n\r\n    static equals(item1: any, item2: any) // Only primitive types\r\n    {\r\n        if (item1 == null && item2 == null)\r\n            return true;\r\n        else if (item1 == null || item2 == null)\r\n            return false;\r\n\r\n        if ((Object.prototype.toString.call(item1) === '[object Date]') && (Object.prototype.toString.call(item2) === '[object Date]'))\r\n            return Date.vrEquals(item1, item2);\r\n        else if (typeof (item1) == \"number\" && typeof (item2) == \"number\")\r\n            return Number(item1) == Number(item2);\r\n        else if ((typeof (item1) == \"string\" && typeof (item2) == \"string\") || (typeof (item1) == \"boolean\" && typeof (item2) == \"boolean\"))\r\n            return item1 == item2;\r\n        else\r\n            return item1 == item2;\r\n    }\r\n\r\n    static getMonthNumberByName(monthName: string)\r\n    {\r\n        switch (monthName.toLowerCase())\r\n        {\r\n            case \"gennaio\": return MonthEnum.January;\r\n            case \"febbraio\": return MonthEnum.February;\r\n            case \"marzo\": return MonthEnum.March;\r\n            case \"aprile\": return MonthEnum.April;\r\n            case \"maggio\": return MonthEnum.May;\r\n            case \"giugno\": return MonthEnum.June;\r\n            case \"luglio\": return MonthEnum.July;\r\n            case \"agosto\": return MonthEnum.August;\r\n            case \"settembre\": return MonthEnum.September;\r\n            case \"ottobre\": return MonthEnum.October;\r\n            case \"novembre\": return MonthEnum.November;\r\n            case \"dicembre\": return MonthEnum.December;\r\n            default:\r\n                return -1;\r\n        }\r\n    }\r\n\r\n    static doAjaxCall<T>(settings: AjaxCallSettings, callBack?: (response: T) => void, errorCallback?: () => void)\r\n    {\r\n        let data = undefined;\r\n        if (settings.request != null)\r\n        {\r\n            settings.request[\"authKey\"] = settings.authKey;\r\n            data = JSON.stringify(settings.request);\r\n        }\r\n\r\n        //#region Multipart\r\n        let formDataMultipart = null;\r\n        if (settings.file != null)\r\n        {\r\n            formDataMultipart = new FormData();\r\n            formDataMultipart.append(\"file\", settings.file);\r\n        }\r\n        //#endregion\r\n\r\n        let result: T | null = null;\r\n        jqueryVariable().ajax({\r\n            async: (settings.mode == WebApiModeEnum.Async) ? true : false,\r\n            beforeSend: (xhr: any) =>\r\n            {\r\n                //#region Header parameters\r\n                xhr.setRequestHeader(\"Accept-Language\", \"it\");\r\n                xhr.setRequestHeader(\"AuthKey\", settings.authKey);\r\n                if (settings!.headerParameters != null)\r\n                {\r\n                    let headerParameters = Object.getOwnPropertyNames(settings!.headerParameters);\r\n                    for (let param of headerParameters)\r\n                        xhr.setRequestHeader(param, settings!.headerParameters[param]);\r\n                }\r\n                //#endregion\r\n            },\r\n            contentType: (settings.file != null) ? false : \"application/json\",\r\n            data: (settings.file != null) ? formDataMultipart : data,\r\n            method: \"POST\",\r\n            processData: false,\r\n            url: settings.method,\r\n            success: (response: any) =>\r\n            {\r\n                if (settings!.mode == WebApiModeEnum.Sync)\r\n                    result = response as T;\r\n\r\n                if (callBack != null)\r\n                {\r\n                    response.guid = (settings.request != null) ? settings.request.guid : null;\r\n                    callBack(response);\r\n                }\r\n            },\r\n            error: (response: JQueryXHR) => \r\n            {\r\n                notifyError(\"Errore nella chiamata alla webApi\")\r\n\r\n                if (errorCallback != null)\r\n                    errorCallback();\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n\r\n    static htmlDecode(text: string)\r\n    {\r\n        let doc = new DOMParser().parseFromString(text, \"text/html\");\r\n        return doc.documentElement.textContent;\r\n    }\r\n\r\n    static textWidth(object: HTMLElement | string): number\r\n    {\r\n        let width = 0;\r\n        if (typeof (object) == \"string\")\r\n        {\r\n            let spanTemp = span(document.body);\r\n            spanTemp.id = \"utility_tempSpanTextWidth\";\r\n\r\n            spanTemp.innerHTML = object.replace(/\\s/g, \"&nbsp;\");\r\n            width = spanTemp.offsetWidth;\r\n\r\n            puma(\"#utility_tempSpanTextWidth\").remove();\r\n        }\r\n        else\r\n        {\r\n            // Wrap text into span\r\n            let originalHtmlText = (typeof (object) == \"string\") ? object : puma(object).html();\r\n            let htmlCalculated = \"<span style='display: inline-block; overflow-y: scroll; white-space: nowrap;'>\" + originalHtmlText + \"</span>\";\r\n            puma(object).html(htmlCalculated);\r\n\r\n            // Calculate width\r\n            width = puma(object).find(\"span:first\").width();\r\n\r\n            // Restore original\r\n            puma(object).html(originalHtmlText);\r\n        }\r\n        return width;\r\n    }\r\n\r\n    static downloadPdfBytes(base64Bytes: string, name = \"download.pdf\")\r\n    {\r\n        if (!name.endsWith(\".pdf\"))\r\n            name += \".pdf\";\r\n\r\n        let arraybuffer = this.base64ToArrayBuffer(base64Bytes);\r\n        let blob = new Blob([arraybuffer], { type: \"application/pdf\" });\r\n        let url = URL.createObjectURL(blob);\r\n\r\n        let a = document.createElement(\"a\");\r\n        a.href = url;\r\n        a.download = name;\r\n        a.click();\r\n\r\n        // let url = \"data:application/pdf;base64,\" + base64Bytes;\r\n        // this.openUrl(url, name);\r\n    }\r\n\r\n    private static base64ToArrayBuffer(base64: string): ArrayBuffer\r\n    {\r\n        var binary_string = window.atob(base64.replace(/\\s/g, ''));\r\n        var len = binary_string.length;\r\n        var bytes = new Uint8Array(len);\r\n        for (var i = 0; i < len; i++)\r\n            bytes[i] = binary_string.charCodeAt(i);\r\n\r\n        return bytes.buffer;\r\n    }\r\n\r\n    static openUrl(url: string, name = \"download\", newTab = false)\r\n    {\r\n        let aTag = document.createElement(\"a\");\r\n        aTag.id = \"utility_tempOpeningUrl\";\r\n        aTag.href = url;\r\n        aTag.download = name;\r\n\r\n        if (newTab)\r\n            aTag.target = \"_blank\";\r\n\r\n        aTag.click();\r\n        puma(\"#utility_tempOpeningUrl\").remove();\r\n    }\r\n\r\n    static isValidEmail(email: string)\r\n    {\r\n        const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        return re.test(String(email).toLowerCase());\r\n    }\r\n\r\n    //#region Files/Css/Js\r\n    static addCssStyle(cssRules: string, id?: string)\r\n    {\r\n        if (cssRules != null && cssRules != \"\")\r\n        {\r\n            let idAttribute = (id == null) ? \"\" : \" id='\" + id + \"'\";\r\n            puma(\"<style\" + idAttribute + \">\" + cssRules + \"</style>\").vrAppendToPuma(\"head\");\r\n        }\r\n    }\r\n\r\n    static addCssFiles(...pathList: string[])\r\n    {\r\n        let promise = new Promise((callback: Function) =>\r\n        {\r\n            if (pathList != null && pathList.length > 0)\r\n            {\r\n                let head = document.getElementsByTagName(\"head\")[0];\r\n                for (let path of pathList)\r\n                {\r\n                    let existing = $(\"link[rel='stylesheet']\").filter((k, e) => (e as HTMLLinkElement).href.toLowerCase().startsWith(path.toLowerCase() + \"?\"));\r\n                    if (existing.length == 0)\r\n                    {\r\n                        let css = document.createElement(\"link\");\r\n                        css.href = path;\r\n                        css.type = \"text/css\";\r\n                        css.rel = \"stylesheet\";\r\n                        head.appendChild(css);\r\n                    }\r\n                }\r\n                callback();\r\n            }\r\n        });\r\n        return promise;\r\n    }\r\n\r\n    static addJsScript(jsRules: string, id?: string)\r\n    {\r\n        if (jsRules != null && jsRules != \"\")\r\n        {\r\n            let idAttribute = (id == null) ? \"\" : \" id='\" + id + \"'\";\r\n            puma(\"<script\" + idAttribute + \">\" + jsRules + \"</script>\").vrAppendToPuma(\"head\");\r\n        }\r\n    }\r\n\r\n    static addJsFiles(...pathList: string[])\r\n    {\r\n        let promise = new Promise((callback: Function) =>\r\n        {\r\n            if (pathList != null && pathList.length > 0)\r\n            {\r\n                $.when(...pathList.map(k => $.getScript(k).promise())).done(() =>\r\n                {\r\n                    callback();\r\n                })\r\n            }\r\n        });\r\n        return promise;\r\n    }\r\n    //#endregion\r\n\r\n    static bytesToBase64(bytes: Uint8Array)\r\n    {\r\n        const base64abc = [\r\n            \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\",\r\n            \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\",\r\n            \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\",\r\n            \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\",\r\n            \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"+\", \"/\"\r\n        ];\r\n\r\n        let result = '', i, l = bytes.length;\r\n        for (i = 2; i < l; i += 3)\r\n        {\r\n            result += base64abc[bytes[i - 2] >> 2];\r\n            result += base64abc[((bytes[i - 2] & 0x03) << 4) | (bytes[i - 1] >> 4)];\r\n            result += base64abc[((bytes[i - 1] & 0x0F) << 2) | (bytes[i] >> 6)];\r\n            result += base64abc[bytes[i] & 0x3F];\r\n        }\r\n        if (i === l + 1)\r\n        { // 1 octet yet to write\r\n            result += base64abc[bytes[i - 2] >> 2];\r\n            result += base64abc[(bytes[i - 2] & 0x03) << 4];\r\n            result += \"==\";\r\n        }\r\n        if (i === l)\r\n        { // 2 octets yet to write\r\n            result += base64abc[bytes[i - 2] >> 2];\r\n            result += base64abc[((bytes[i - 2] & 0x03) << 4) | (bytes[i - 1] >> 4)];\r\n            result += base64abc[(bytes[i - 1] & 0x0F) << 2];\r\n            result += \"=\";\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static base64ToBytes(base64: any)\r\n    {\r\n        if (base64.length % 4 !== 0)\r\n        {\r\n            throw new Error(\"Unable to parse base64 string.\");\r\n        }\r\n        const index = base64.indexOf(\"=\");\r\n        if (index !== -1 && index < base64.length - 2)\r\n        {\r\n            throw new Error(\"Unable to parse base64 string.\");\r\n        }\r\n        let missingOctets = base64.endsWith(\"==\") ? 2 : base64.endsWith(\"=\") ? 1 : 0,\r\n            n = base64.length,\r\n            result = new Uint8Array(3 * (n / 4)),\r\n            buffer;\r\n        for (let i = 0, j = 0; i < n; i += 4, j += 3)\r\n        {\r\n            buffer =\r\n                this.getBase64Code(base64.charCodeAt(i)) << 18 |\r\n                this.getBase64Code(base64.charCodeAt(i + 1)) << 12 |\r\n                this.getBase64Code(base64.charCodeAt(i + 2)) << 6 |\r\n                this.getBase64Code(base64.charCodeAt(i + 3));\r\n            result[j] = buffer >> 16;\r\n            result[j + 1] = (buffer >> 8) & 0xFF;\r\n            result[j + 2] = buffer & 0xFF;\r\n        }\r\n        return result.subarray(0, result.length - missingOctets);\r\n    }\r\n\r\n    private static getBase64Code(charCode: any)\r\n    {\r\n        const base64codes = [\r\n            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,\r\n            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,\r\n            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 62, 255, 255, 255, 63,\r\n            52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 255, 255, 255, 0, 255, 255,\r\n            255, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14,\r\n            15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 255, 255, 255, 255, 255,\r\n            255, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,\r\n            41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51\r\n        ];\r\n\r\n        if (charCode >= base64codes.length)\r\n        {\r\n            throw new Error(\"Unable to parse base64 string.\");\r\n        }\r\n        const code = base64codes[charCode];\r\n        if (code === 255)\r\n        {\r\n            throw new Error(\"Unable to parse base64 string.\");\r\n        }\r\n        return code;\r\n    }\r\n\r\n    static base64ToFile(base64: string, fileName: string, options?: FilePropertyBag)\r\n    {\r\n        return (fetch(base64)\r\n            .then(function (res) { return res.arrayBuffer(); })\r\n            .then(function (buf) { return new File([buf], fileName, options); })\r\n        );\r\n    }\r\n\r\n    static base64ToBlob(base64: string, contentType = '', sliceSize = 512)\r\n    {\r\n        const byteCharacters = atob(base64);\r\n        const byteArrays = [];\r\n\r\n        for (let offset = 0; offset < byteCharacters.length; offset += sliceSize)\r\n        {\r\n            const slice = byteCharacters.slice(offset, offset + sliceSize);\r\n            const byteNumbers = new Array(slice.length);\r\n            for (let i = 0; i < slice.length; i++)\r\n                byteNumbers[i] = slice.charCodeAt(i);\r\n\r\n            const byteArray = new Uint8Array(byteNumbers);\r\n            byteArrays.push(byteArray);\r\n        }\r\n\r\n        const blob = new Blob(byteArrays, { type: contentType });\r\n        return blob;\r\n    }\r\n\r\n    static enterFullScreen(target: HTMLElement, errorCallback?: Function)\r\n    {\r\n        try\r\n        {\r\n            let element = target as any;\r\n            let doc = window.document as any;\r\n            if (!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement)\r\n            {\r\n                //#region RequestFullScreen\r\n                if (element.requestFullscreen)\r\n                    element.requestFullscreen();\r\n                else if (element.mozRequestFullScreen) // Firefox\r\n                    element.mozRequestFullScreen();\r\n                else if (element.webkitRequestFullscreen) // Chrome, Safari, Opera\r\n                    element.webkitRequestFullscreen();\r\n                else if (element.msRequestFullscreen) // Edge\r\n                    element.msRequestFullscreen();\r\n                else\r\n                {\r\n                    if (errorCallback != null)\r\n                        errorCallback();\r\n                }\r\n                //#endregion\r\n            }\r\n        }\r\n        catch (e)\r\n        {\r\n            if (errorCallback != null)\r\n                errorCallback();\r\n        }\r\n    }\r\n\r\n    static exitFullScreen()\r\n    {\r\n        try\r\n        {\r\n            let doc = window.document as any;\r\n            if (!(!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement))\r\n            {\r\n                //#region ExitFullScreen\r\n                if (doc.exitFullscreen)\r\n                    doc.exitFullscreen();\r\n                else if (doc.mozCancelFullScreen) // Firefox\r\n                    doc.mozCancelFullScreen();\r\n                else if (doc.webkitExitFullscreen) // Chrome, Safari, Opera\r\n                    doc.webkitExitFullscreen();\r\n                else if (doc.msExitFullscreen) // Edge\r\n                    doc.msExitFullscreen();\r\n                //#endregion\r\n            }\r\n        }\r\n        catch (e) { }\r\n    }\r\n\r\n    //#region Drag\r\n    static drag(element: HTMLElement | JQuery | string, dragEvent?: VrDragSupportEvent)\r\n    {\r\n        if (dragEvent == null) dragEvent = new VrDragSupportEvent();\r\n        if (dragEvent.sensibility == null) dragEvent.sensibility = 50;\r\n        if (dragEvent.typeEnum == null) dragEvent.typeEnum = VrDragSupportTypeEnum.Both;\r\n\r\n        puma(element).on(\"mousedown\", (emd: JQuery.MouseDownEvent) =>\r\n        {\r\n            let startingXPosition = emd.clientX;\r\n            let startingYPosition = emd.clientY;\r\n\r\n            let target = puma(emd.currentTarget);\r\n            let targetStartingXPosition = target.offset().left;\r\n            let targetStartingYPosition = target.offset().top;\r\n\r\n            //#region Moved variables\r\n            let leftMoved = false;\r\n            let rightMoved = false;\r\n            let upMoved = false;\r\n            let downMoved = false;\r\n            let moved = false;\r\n            //#endregion\r\n\r\n            //#region Moving\r\n            puma(document).on(\"mousemove\", (emm: JQuery.MouseMoveEvent) => \r\n            {\r\n                let actualXPosition = emm.clientX;\r\n                let actualYPosition = emm.clientY;\r\n                let xDiff = startingXPosition - actualXPosition;\r\n                let yDiff = startingYPosition - actualYPosition;\r\n\r\n                if (!(emm.clientX == startingXPosition && emm.clientY == startingYPosition))\r\n                {\r\n                    //#region Change position\r\n                    let leftPosition = 0;\r\n                    let topPosition = 0;\r\n                    switch (dragEvent!.typeEnum)\r\n                    {\r\n                        case VrDragSupportTypeEnum.Both:\r\n                            {\r\n                                leftPosition = (emm.clientX - ($(target[0]).width()! / 2));\r\n                                topPosition = emm.clientY;\r\n                            }\r\n                            break;\r\n                        case VrDragSupportTypeEnum.Horizontal:\r\n                            {\r\n                                leftPosition = (emm.clientX - ($(target[0]).width()! / 2));\r\n                                topPosition = targetStartingYPosition;\r\n                            }\r\n                            break;\r\n                        case VrDragSupportTypeEnum.Vertical:\r\n                            {\r\n                                leftPosition = targetStartingXPosition;\r\n                                topPosition = emm.clientY;\r\n                            }\r\n                            break;\r\n                    }\r\n                    target.offset({ top: topPosition, left: leftPosition });\r\n                    //#endregion\r\n\r\n                    //#region Dragging event\r\n                    if (dragEvent!.dragging != null)\r\n                    {\r\n                        let dragEveryEvent = new VrDragEveryEvent();\r\n                        dragEveryEvent.left = target.position().left;\r\n                        dragEveryEvent.top = target.position().top;\r\n                        dragEveryEvent.element = $(element as any)[0];\r\n                        dragEvent!.dragging(dragEveryEvent);\r\n                    }\r\n                    //#endregion\r\n                }\r\n\r\n                //#region Drag direction\r\n                if (Math.abs(xDiff) > Math.abs(yDiff))\r\n                {\r\n                    if (dragEvent == null && xDiff != 0)\r\n                        return;\r\n\r\n                    moved = true;\r\n                    if (xDiff > dragEvent!.sensibility!)\r\n                        leftMoved = true;\r\n                    else if (xDiff < -dragEvent!.sensibility!)\r\n                        rightMoved = true;\r\n                }\r\n                else if (Math.abs(xDiff) < Math.abs(yDiff))\r\n                {\r\n                    if (dragEvent == null && xDiff != 0)\r\n                        return;\r\n\r\n                    moved = true;\r\n                    if (yDiff > dragEvent!.sensibility!)\r\n                        upMoved = true;\r\n                    else if (yDiff < -dragEvent!.sensibility!)\r\n                        downMoved = true;\r\n                }\r\n                //#endregion\r\n            });\r\n            //#endregion\r\n\r\n            //#region Stop moving\r\n            puma(document).mouseup((e: JQuery.MouseUpEvent) =>\r\n            {\r\n                puma(document).unbind(\"mouseup\");\r\n                puma(document).unbind(\"mousemove\");\r\n\r\n                //#region Events\r\n                if (leftMoved && dragEvent!.dragLeft != null)\r\n                    dragEvent!.dragLeft();\r\n\r\n                if (rightMoved && dragEvent!.dragRight != null)\r\n                    dragEvent!.dragRight();\r\n\r\n                if (upMoved && dragEvent!.dragUp != null)\r\n                    dragEvent!.dragUp();\r\n\r\n                if (downMoved && dragEvent!.dragDown != null)\r\n                    dragEvent!.dragDown();\r\n\r\n                if (moved && dragEvent!.dragged != null)\r\n                {\r\n                    let dragEveryEvent = new VrDragEveryEvent();\r\n                    dragEveryEvent.left = target.position().left;\r\n                    dragEveryEvent.top = target.position().top;\r\n                    dragEveryEvent.element = $(element as any)[0];\r\n                    dragEvent!.dragged(dragEveryEvent);\r\n                }\r\n                //#endregion\r\n            });\r\n            //#endregion\r\n        });\r\n    }\r\n    //#endregion\r\n}\r\n\r\nclass AjaxCallSettings\r\n{\r\n    mode: WebApiModeEnum;\r\n    authKey: string;\r\n    method: string;\r\n    request?: any;\r\n    headerParameters?: any;\r\n    file?: string | Blob | File;\r\n}\r\n\r\nenum MonthEnum\r\n{\r\n    January,\r\n    February,\r\n    March,\r\n    April,\r\n    May,\r\n    June,\r\n    July,\r\n    August,\r\n    September,\r\n    October,\r\n    November,\r\n    December\r\n}\r\n\r\nclass VrDragSupportEvent\r\n{\r\n    public sensibility?: number = 50;\r\n    typeEnum?: VrDragSupportTypeEnum;\r\n\r\n    dragLeft?: null | (() => void);\r\n    dragRight?: null | (() => void);\r\n    dragUp?: null | (() => void);\r\n    dragDown?: null | (() => void);\r\n\r\n    dragged?: null | ((e: VrDragEveryEvent) => void);\r\n    dragging?: null | ((e: VrDragEveryEvent) => void);\r\n}\r\n\r\nclass VrDragEveryEvent\r\n{\r\n    left: number;\r\n    top: number;\r\n    element: HTMLElement;\r\n}\r\n\r\nexport enum VrDragSupportTypeEnum\r\n{\r\n    Vertical,\r\n    Horizontal,\r\n    Both\r\n}","import { BrowserTypeEnum } from \"../../src/ui/vr\";\r\n\r\nexport class DeviceManager\r\n{\r\n    //#region Device category\r\n    static getScreenResolution()\r\n    {\r\n        let screenResolution = new ScreenResolution();\r\n        screenResolution.width = window.screen.width * window.devicePixelRatio;\r\n        screenResolution.height = window.screen.height * window.devicePixelRatio;\r\n        return screenResolution;\r\n    }\r\n\r\n    static isSmartphone()\r\n    {\r\n        return (this.getScreenResolution().width < 768);\r\n    }\r\n\r\n    static isTablet()\r\n    {\r\n        let screenResolution = this.getScreenResolution();\r\n        return (screenResolution.width < 1200 && screenResolution.width >= 768);\r\n    }\r\n\r\n    static isDesktop()\r\n    {\r\n        return (this.getScreenResolution().width >= 1200);\r\n    }\r\n\r\n    static isMobile()\r\n    {\r\n        if ((navigator as any).userAgentData != null)\r\n            return (navigator as any).userAgentData.mobile;\r\n\r\n        return this.isSmartphone() || this.isTablet();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Device\r\n    static isIphoneX()\r\n    {\r\n        if (this.isIphone())\r\n        {\r\n            let height = window.screen.height;\r\n            let width = window.screen.width;\r\n            if (height > 800 && width > 370)\r\n                return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    static isIphone()\r\n    {\r\n        return navigator.userAgent.match(/iPhone/i);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Browser\r\n    static browser()\r\n    {\r\n        if (this.isFirefox()) return BrowserTypeEnum.Firefox;\r\n        else if (this.isEdge()) return BrowserTypeEnum.Edge;\r\n        else if (this.isInternetExplorer()) return BrowserTypeEnum.InternetExplorer;\r\n        else if (this.isOpera()) return BrowserTypeEnum.Opera;\r\n        else if (this.isVivaldi()) return BrowserTypeEnum.Vivaldi;\r\n        else if (this.isChrome()) return BrowserTypeEnum.Chrome;\r\n        else if (this.isSafari()) return BrowserTypeEnum.Safari;\r\n        else if (this.isSeamonkey()) return BrowserTypeEnum.Seamonkey;\r\n        else\r\n            return \"Unknown\";\r\n    }\r\n\r\n    private static agentHas(keyword: string)\r\n    {\r\n        return navigator.userAgent.toLowerCase().search(keyword.toLowerCase()) > -1;\r\n    }\r\n\r\n    static isInternetExplorer()\r\n    {\r\n        return !!(document as any).documentMode || this.agentHas(\"MSIE\") || this.agentHas(\"Trident\");\r\n    }\r\n\r\n    static isSafari()\r\n    {\r\n        return (!!(window as any).ApplePaySetupFeature || !!(window as any).safari)\r\n            && this.agentHas(\"Safari\") && !this.agentHas(\"Chrome\") && !this.agentHas(\"CriOS\") && !this.agentHas(\"Chromium\");\r\n    }\r\n\r\n    static isChrome()\r\n    {\r\n        return (this.agentHas(\"CriOS\") || this.agentHas(\"Chrome\") || !!(window as any).chrome)\r\n            && !this.agentHas(\"Chromium\") && !this.agentHas(\"Edg\");\r\n    }\r\n\r\n    static isFirefox()\r\n    {\r\n        return (this.agentHas(\"Firefox\") || this.agentHas(\"FxiOS\") || this.agentHas(\"Focus\")) && !this.agentHas(\"Seamonkey\");\r\n    }\r\n\r\n    static isEdge()\r\n    {\r\n        return this.agentHas(\"Edg\");\r\n    }\r\n\r\n    static isOpera()\r\n    {\r\n        return this.agentHas(\"OPR\") || this.agentHas(\"Opera\");\r\n    }\r\n\r\n    static isVivaldi()\r\n    {\r\n        return this.agentHas(\"Vivaldi\");\r\n    }\r\n\r\n    static isSeamonkey()\r\n    {\r\n        return this.agentHas(\"Seamonkey\");\r\n    }\r\n    //#endregion\r\n}\r\n\r\nclass ScreenResolution\r\n{\r\n    width: number;\r\n    height: number;\r\n}","import { Dictionary } from \"./dictionary\";\r\nimport { VrControl } from \"src/ui/common\";\r\n\r\nexport class ControlManager\r\n{\r\n    private static _dictionaryControls: Dictionary<string, VrControl> = new Dictionary();\r\n\r\n    static add(control: VrControl): void\r\n    {\r\n        if (control.options().addToControlList === true && control.id() != null && control.id() != \"\")\r\n            this._dictionaryControls.set(control.id(), control);\r\n    }\r\n\r\n    static get<T extends VrControl>(controlId: string): T\r\n    {\r\n        return this._dictionaryControls.get(controlId) as T;\r\n    }\r\n\r\n    static remove(controlId: string)\r\n    {\r\n        if (controlId != \"\" && controlId != null)\r\n            this._dictionaryControls.delete(controlId);\r\n    }\r\n}","import { VrControlOptions, VrControl, VrControlsEvent } from \"../common\";\r\nimport { ControlTypeEnum, IconClassLight, IconClass, createLabel, DefaultDayEnum, DateModeEnum, PositionEnum, puma, shadowRoot, DateFormatEnum, KeyEnum, createCalendar, DateDepthEnum, notify, PopupSettings } from \"../vr\";\r\nimport { UtilityManager } from \"../../../src/managers/utilityManager\";\r\n\r\n//#region Options\r\nexport class DatePickerOptions extends VrControlOptions\r\n{\r\n    defaultDay?: DefaultDayEnum;\r\n    mode?: DateModeEnum;\r\n    value?: Date;\r\n    min?: Date;\r\n    max?: Date;\r\n    timeInterval?: number;\r\n    format?: DateFormatEnum;\r\n    todayLabel?: boolean;\r\n    otherMonthDays?: boolean;\r\n    tooltip?: string;\r\n    depth?: DateDepthEnum;\r\n    nullable?: boolean;\r\n    popupSettings?: PopupSettings;\r\n\r\n    onBeforeChange?(e: DatePickerChangingEvent): void;\r\n    onAfterChange?(e: DatePickerChangeEvent): void;\r\n    onKeyUp?(e: DatePickerKeyUpEvent): void;\r\n    onKeyDown?(e: DatePickerKeyDownEvent): void;\r\n    onEnterKey?(): void;\r\n    onFocus?(e: DatePickerFocusEvent): void;\r\n    onBlur?(e: DatePickerBlurEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class DatePicker extends VrControl\r\n{\r\n    private _value: Date | null;\r\n    private _currentCursorPosition: number;\r\n    private _popup: HTMLElement;\r\n    private _justOpened: boolean;\r\n\r\n    constructor(element: HTMLElement, options?: DatePickerOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new DatePickerOptions();\r\n\r\n        if (options.defaultDay == null) options.defaultDay = DefaultDayEnum.First;\r\n        if (options.mode == null) options.mode = DateModeEnum.Date;\r\n        if (options.todayLabel == null) options.todayLabel = true;\r\n        if (options.otherMonthDays == null) options.otherMonthDays = true;\r\n        if (options.depth == null) options.depth = DateDepthEnum.Day;\r\n        if (options.nullable == null) options.nullable = true;\r\n\r\n        if (options.format == null)\r\n        {\r\n            switch (options.depth)\r\n            {\r\n                case DateDepthEnum.Day: options.format = DateFormatEnum.ShortDate; break;\r\n                case DateDepthEnum.Month: options.format = DateFormatEnum.Month; break;\r\n                case DateDepthEnum.Year: options.format = DateFormatEnum.Year; break;\r\n                default:\r\n                    options.format = DateFormatEnum.ShortDate; break;\r\n            }\r\n        }\r\n\r\n        if (options.timeInterval == null)\r\n            options.timeInterval = 15;\r\n\r\n        if (options.mode == DateModeEnum.Time)\r\n        {\r\n            if (options.width == null)\r\n                options.width = 92;\r\n\r\n            if (options.min == null)\r\n            {\r\n                let defaultDateMin = new Date();\r\n                defaultDateMin.setHours(6, 0);\r\n                options.min = defaultDateMin;\r\n            }\r\n\r\n            if (options.max == null)\r\n            {\r\n                let defaultDateMax = new Date();\r\n                defaultDateMax.setHours(23, 15);\r\n                options.max = defaultDateMax;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            if (options.min == null)\r\n            {\r\n                let defaultDateMin = Date.MIN_VALUE;\r\n                defaultDateMin.setHours(6, 0);\r\n                options.min = defaultDateMin;\r\n            }\r\n\r\n            if (options.max == null)\r\n            {\r\n                let defaultDateMax = Date.MAX_VALUE;\r\n                defaultDateMax = defaultDateMax.vrAddDays(-1);\r\n                defaultDateMax.setHours(23, 15);\r\n                options.max = defaultDateMax;\r\n            }\r\n\r\n            if (options.mode == DateModeEnum.DateTime && options.width == null)\r\n                options.width = 180;\r\n        }\r\n        //#endregion\r\n\r\n        super(element, options, ControlTypeEnum.DatePicker);\r\n        this._currentCursorPosition = 0;\r\n\r\n        puma(element).attr(\"type\", \"text\");\r\n\r\n        if (options.label != null && options.labelSettings!.position == PositionEnum.Top)\r\n            this.element().style.cssText += \"padding-left: 0px !important; width: calc(100% - 12px) !important;\";\r\n\r\n        //#region Picker icon\r\n        let pickerIcon = null;\r\n        switch (options.mode)\r\n        {\r\n            case DateModeEnum.Date: pickerIcon = UtilityManager.createIcon(IconClassLight.Calendar); break;\r\n            case DateModeEnum.Time: pickerIcon = UtilityManager.createIcon(IconClassLight.Clock); break;\r\n            case DateModeEnum.DateTime:\r\n                {\r\n                    let divPickerIcon = puma(\"<div class='vrDivPickerDateTimeIcon'></div>\").vrAppendToPuma(this.container())[0];\r\n                    let pickerIcon = UtilityManager.createIcon(IconClassLight.Calendar);\r\n                    puma(divPickerIcon).vrAppendPuma(pickerIcon);\r\n                    puma(divPickerIcon).click(() => \r\n                    {\r\n                        if (!this.enabled())\r\n                            return;\r\n\r\n                        this.close();\r\n                        this.openPopupDatePicker();\r\n                    });\r\n\r\n                    if (options.label != null && options.labelSettings!.position == PositionEnum.Top)\r\n                        divPickerIcon.style.cssText += \"bottom: 1px; top: inherit;\";\r\n\r\n                    let divPickerTimeIcon = puma(\"<div class='vrDivPickerIcon'></div>\").vrAppendToPuma(this.container())[0];\r\n                    let pickerTimeIcon = UtilityManager.createIcon(IconClassLight.Clock);\r\n                    puma(divPickerTimeIcon).vrAppendPuma(pickerTimeIcon);\r\n                    puma(divPickerTimeIcon).click((e: any) => \r\n                    {\r\n                        if (!this.enabled())\r\n                            return;\r\n\r\n                        this.close();\r\n                        this.openPopupTimePicker();\r\n                    });\r\n\r\n                    if (options.label != null && options.labelSettings!.position == PositionEnum.Top)\r\n                        divPickerTimeIcon.style.cssText += \"bottom: 1px; top: inherit;\";\r\n                }\r\n                break;\r\n        }\r\n\r\n        if (pickerIcon != null)\r\n        {\r\n            let divPickerIcon = puma(\"<div class='vrDivPickerIcon'></div>\").vrAppendToPuma(this.container())[0];\r\n            if (options.label != null && options.labelSettings!.position == PositionEnum.Top)\r\n                divPickerIcon.style.cssText += \"bottom: 1px; top: inherit;\";\r\n\r\n            puma(divPickerIcon).vrAppendPuma(pickerIcon);\r\n            puma(divPickerIcon).click(() => \r\n            {\r\n                if (!this.enabled())\r\n                    return;\r\n\r\n                if (puma(this._popup).is(\":visible\"))\r\n                    this.close();\r\n                else\r\n                    this.open();\r\n            });\r\n        }\r\n        //#endregion\r\n\r\n        //#region Tooltip\r\n        if (options.tooltip != null)\r\n            puma(this.element()).attr(\"title\", options.tooltip);\r\n        //#endregion\r\n\r\n        //#region Input events\r\n        puma(this.element()).keyup((e: JQuery.KeyUpEvent) =>\r\n        {\r\n            let value = (e.target as HTMLInputElement).value;\r\n            if (value == \"\")\r\n            {\r\n                this.formatDateInput(value);\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if (e.key == KeyEnum.Enter)\r\n            {\r\n                this.formatDateInput((e.target as HTMLInputElement).value);\r\n\r\n                if (options!.onEnterKey != null)\r\n                    options!.onEnterKey();\r\n            }\r\n            else\r\n            {\r\n                if (options!.onKeyUp != null)\r\n                {\r\n                    let event = new DatePickerKeyUpEvent();\r\n                    event.sender = this;\r\n                    event.text = (e.target as HTMLInputElement).value;\r\n                    event.key = e.key;\r\n                    event.shiftKey = e.shiftKey;\r\n                    event.altKey = e.altKey;\r\n                    event.ctrlKey = e.ctrlKey;\r\n                    event.enterKey = e.key == KeyEnum.Enter;\r\n                    event.backSpaceKey = e.key == KeyEnum.Backspace;\r\n                    event.tabKey = e.key == KeyEnum.Tab;\r\n                    options!.onKeyUp(event);\r\n                }\r\n            }\r\n        });\r\n        puma(this.element()).blur((e: JQuery.BlurEvent) => \r\n        {\r\n            this.formatDateInput((e.target as HTMLInputElement).value);\r\n\r\n            if (options!.onBlur != null)\r\n            {\r\n                let event = new DatePickerBlurEvent();\r\n                event.sender = this;\r\n                options!.onBlur(event);\r\n            }\r\n        });\r\n        puma(this.element()).click((e: JQuery.ClickEvent) => this._currentCursorPosition = (e.target as HTMLInputElement).selectionStart!);\r\n        puma(this.element()).focus((e: JQuery.FocusEvent) => \r\n        {\r\n            (this.element() as HTMLInputElement).select();\r\n\r\n            if (options!.onFocus != null)\r\n            {\r\n                let event = new DatePickerFocusEvent();\r\n                event.sender = this;\r\n                options!.onFocus(event);\r\n            }\r\n        });\r\n        //#endregion\r\n\r\n        //#region Cursor management\r\n        puma(element).keydown((e: JQuery.KeyDownEvent) =>\r\n        {\r\n            let cursorStartPosition = (e.target as HTMLInputElement).selectionStart!;\r\n            if (cursorStartPosition != this._currentCursorPosition)\r\n                this._currentCursorPosition = cursorStartPosition;\r\n\r\n            if (e.key == KeyEnum.ArrowRight)\r\n                this._currentCursorPosition = cursorStartPosition + 1;\r\n            else if (e.key == KeyEnum.ArrowLeft) // Arrow left\r\n                this._currentCursorPosition = cursorStartPosition - 1;\r\n            else if (e.key == KeyEnum.ArrowUp)\r\n            {\r\n                if (this.value() != null)\r\n                {\r\n                    if (this._currentCursorPosition >= 0 && this._currentCursorPosition <= 2)\r\n                        this.value(this.value()!.vrAddDays(1));\r\n                    else if (this._currentCursorPosition >= 3 && this._currentCursorPosition <= 5)\r\n                        this.value(this.value()!.vrAddMonths(1));\r\n                    else if (this._currentCursorPosition >= 6)\r\n                        this.value(this.value()!.vrAddYears(1));\r\n                }\r\n            }\r\n            else if (e.key == KeyEnum.ArrowDown)\r\n            {\r\n                if (this.value() != null)\r\n                {\r\n                    if (this._currentCursorPosition >= 0 && this._currentCursorPosition <= 2)\r\n                        this.value(this.value()!.vrAddDays(-1));\r\n                    else if (this._currentCursorPosition >= 3 && this._currentCursorPosition <= 5)\r\n                        this.value(this.value()!.vrAddMonths(-1));\r\n                    else if (this._currentCursorPosition >= 6)\r\n                        this.value(this.value()!.vrAddYears(-1));\r\n                }\r\n            }\r\n\r\n            if (e.key == KeyEnum.ArrowRight || e.key == KeyEnum.ArrowLeft || e.key == KeyEnum.ArrowUp || e.key == KeyEnum.ArrowDown)\r\n            {\r\n                this.updateCursorPosition();\r\n                e.preventDefault();\r\n            }\r\n\r\n            if (options!.onKeyDown != null)\r\n            {\r\n                let event = new DatePickerKeyDownEvent();\r\n                event.sender = this;\r\n                event.key = e.key;\r\n                event.shiftKey = e.shiftKey;\r\n                event.altKey = e.altKey;\r\n                event.ctrlKey = e.ctrlKey;\r\n                event.enterKey = e.key == KeyEnum.Enter;\r\n                event.backSpaceKey = e.key == KeyEnum.Backspace;\r\n                event.tabKey = e.key == KeyEnum.Tab;\r\n                options!.onKeyDown(event);\r\n            }\r\n        });\r\n        //#endregion\r\n\r\n        //#region Value\r\n        if (options.value != null)\r\n            this.value(options.value, false);\r\n        //#endregion\r\n\r\n        window.addEventListener(\"click\", (e: any) =>\r\n        {\r\n            if (puma(this._popup).is(\":visible\") && !puma(this._popup)[0].contains(e.target) && !puma(this.container())[0].contains(e.target) && !this._justOpened)\r\n                this.close();\r\n        });\r\n\r\n        let baseListener = (shadowRoot() != null) ? shadowRoot() : document;\r\n        baseListener!.addEventListener(\"scroll\", (e) =>\r\n        {\r\n            if (!puma(e.target).hasClass(\"vrDivPickerPopup\") && puma(this._popup).is(\":visible\"))\r\n                this.close();\r\n        }, true);\r\n    }\r\n\r\n    //#region Methods\r\n    close(): void\r\n    {\r\n        puma(this._popup).remove();\r\n        (this._popup as any) = null;\r\n    }\r\n\r\n    open(): void\r\n    {\r\n        if (!this.enabled())\r\n            return;\r\n\r\n        if (this._popup == null)\r\n            this._popup = puma(\"<div class='vrDivPickerPopup vrPopup' id='\" + this.element().id + \"_divPopup'></div>\").vrAppendToPuma((shadowRoot() != null) ? shadowRoot() : document.body)[0];\r\n\r\n        let options = this.getOptions();\r\n        switch (options.mode)\r\n        {\r\n            case DateModeEnum.Date:\r\n            case DateModeEnum.DateTime:\r\n                this.openPopupDatePicker(); break;\r\n            case DateModeEnum.Time: this.openPopupTimePicker(); break;\r\n        }\r\n\r\n        this._justOpened = true;\r\n        window.setTimeout(() => this._justOpened = false, 500);\r\n    }\r\n\r\n    private formatDateInput(inputText: string): void\r\n    {\r\n        let options = this.getOptions();\r\n        switch (options.mode)\r\n        {\r\n            case DateModeEnum.Date: this.formatInputDatePicker(inputText); break;\r\n            case DateModeEnum.DateTime: this.formatInputDateTimePicker(inputText); break;\r\n            case DateModeEnum.Time: this.formatInputTimePicker(inputText); break;\r\n        }\r\n    }\r\n\r\n    //#region DatePicker\r\n    private openPopupDatePicker(): void\r\n    {\r\n        let options = this.getOptions();\r\n\r\n        if (this._popup == null)\r\n            this._popup = puma(\"<div class='vrDivPickerPopup vrPopup' id='\" + this.element().id + \"_divPopup'></div>\").vrAppendToPuma((shadowRoot() != null) ? shadowRoot() : document.body)[0];\r\n\r\n        puma(this._popup).removeClass(\"timePickerPopup\");\r\n        puma(this._popup).addClass(\"datePickerPopup\");\r\n\r\n        createCalendar({\r\n            value: (this.value() != null) ? new Date(this.value()!.toString()) : undefined,\r\n            dateSlotWidth: 30,\r\n            depth: options.depth,\r\n            onAfterChange: (e) =>\r\n            {\r\n                this.close();\r\n                if (e.value != null)\r\n                {\r\n                    let actualHours = (this.value() != null) ? this.value()!.getHours() : ((options.mode == DateModeEnum.DateTime) ? new Date().getHours() : 0);\r\n                    let actualMinutes = (this.value() != null) ? this.value()!.getMinutes() : ((options.mode == DateModeEnum.DateTime) ? new Date().getMinutes() : 0);\r\n\r\n                    let dateToSelect = new Date(e.value.getFullYear(), e.value.getMonth(), e.value.getDate(), actualHours, actualMinutes);\r\n                    this.value(dateToSelect);\r\n                }\r\n            }\r\n        }, this._popup);\r\n\r\n        super.settingPopup(this._popup, options.popupSettings);\r\n    }\r\n\r\n    private formatInputDatePicker(inputText: string, onlyFormat = false): void | Date\r\n    {\r\n        let options = this.getOptions();\r\n        if (inputText == null || inputText == \"\")\r\n        {\r\n            if (!options.nullable)\r\n            {\r\n                UtilityManager.interval(() => puma(this.element()).toggleClass(\"errorInput\"), 200, 800);\r\n                this.value(this.value(), false);\r\n                return;\r\n            }\r\n            {\r\n                this._value = null;\r\n                this.change();\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (this.format() != DateFormatEnum.ShortDate && this.value() != null)\r\n            inputText = this.value()!.vrToItalyString();\r\n\r\n        //#region Slash or Minus\r\n        if (inputText.includes(\"/\") || inputText.includes(\"-\") || inputText.includes(\",\") || inputText.includes(\".\"))\r\n        {\r\n            let splittedDate: string[] = [];\r\n            if (inputText.includes(\"/\"))\r\n                splittedDate = inputText.split(\"/\");\r\n            else if (inputText.includes(\"-\"))\r\n                splittedDate = inputText.split(\"-\");\r\n            else if (inputText.includes(\",\"))\r\n                splittedDate = inputText.split(\",\");\r\n            else if (inputText.includes(\".\"))\r\n                splittedDate = inputText.split(\".\");\r\n\r\n            let day = splittedDate[0];\r\n            if (day == null)\r\n                day = String(-1);\r\n\r\n            let month = splittedDate[1];\r\n            if (month == null)\r\n                month = String(new Date().getMonth());\r\n\r\n            let year = splittedDate[2];\r\n            if (year == null)\r\n                year = String(new Date().getFullYear());\r\n\r\n            year = String(this.getFinalYear(year));\r\n\r\n            let dateToReturn = new Date(Number(year), Number(month) - 1, Number(day));\r\n            if (dateToReturn != null && Date.vrIsValidDate(dateToReturn) && Number(month) >= 1 && Number(month) <= 12\r\n                && (dateToReturn.getMonth() + 1) == Number(month))\r\n            {\r\n                if (this.value() == null || !Date.vrEquals(this.value()!, dateToReturn))\r\n                    this.value(dateToReturn);\r\n                else\r\n                    this.formatValue();\r\n            }\r\n            else\r\n            {\r\n                UtilityManager.interval(() => puma(this.element()).toggleClass(\"errorInput\"), 200, 800);\r\n                this.clear();\r\n            }\r\n            return dateToReturn;\r\n        }\r\n        //#endregion\r\n\r\n        //#region Month and Year\r\n        let inputTextArray = inputText.toLowerCase().split(\" \");\r\n        if (inputTextArray.length > 1)\r\n        {\r\n            let monthNumber = UtilityManager.getMonthNumberByName(inputTextArray[0]);\r\n            if (monthNumber != -1)\r\n            {\r\n                if (inputTextArray[1].length == 2 || inputTextArray[1].length == 4)\r\n                {\r\n                    let year = parseInt(inputTextArray[1]);\r\n                    if (inputTextArray[1].length == 2)\r\n                        year = this.getFinalYear(inputTextArray[1]);\r\n\r\n                    let day = (this.getOptions().defaultDay == DefaultDayEnum.First) ? 1 : Date.vrGetLastDayOfMonthByDate(new Date(new Date().getFullYear(), monthNumber, 1)).getDate();\r\n                    this.value(new Date(year, monthNumber, day));\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        let originalInput = inputText;\r\n        inputText = inputText.replace(/[^\\w\\s]/gi, '');\r\n        inputText = inputText.replace(/\\s/g, '');\r\n        let inputTextNumeric = Number(inputText);\r\n\r\n        let day: number | null = 0;\r\n        let month: number | null = 0;\r\n        let year: number | null = 0;\r\n        let dateToReturn: Date | null = null;\r\n\r\n        let todayYear = new Date().getFullYear();\r\n        let todayMonth = new Date().getMonth();\r\n\r\n        //#region Special\r\n        switch (inputText.toLowerCase())\r\n        {\r\n            case \"oggi\":\r\n                {\r\n                    let today = new Date();\r\n                    today.setHours(0, 0);\r\n                    this.value(today);\r\n                }\r\n                return;\r\n            case \"adesso\": this.value(new Date()); return;\r\n            case \"ieri\": this.value(new Date().vrAddDays(-1)); return;\r\n            case \"domani\": this.value(new Date().vrAddDays(1)); return;\r\n            case \"dopodomani\": this.value(new Date().vrAddDays(2)); return;\r\n            case \"natale\": this.value(new Date(new Date().getFullYear(), 11, 25)); return;\r\n            case \"vettore\": this.value(new Date(2013, 0, 1)); return;\r\n            case \"pumo\": { this.value(new Date(1993, 9, 10)); } return;\r\n            case \"sanvalentino\": this.value(new Date(todayYear, 1, 14)); return;\r\n            case \"fineanno\": this.value(new Date(todayYear, 12, 31)); return;\r\n            case \"inizioanno\": this.value(new Date(todayYear, 1, 1)); return;\r\n        }\r\n        //#endregion\r\n\r\n        //#region Months\r\n        let monthNumber = UtilityManager.getMonthNumberByName(inputText.toLowerCase());\r\n        if (monthNumber != -1)\r\n        {\r\n            this.value(new Date(todayYear, monthNumber, ((this.getOptions().defaultDay == DefaultDayEnum.First) ? 1 : Date.vrGetLastDayOfMonthByDate(new Date(todayYear, monthNumber, 1)).getDate())));\r\n            return;\r\n        }\r\n        //#endregion\r\n\r\n        let yearStringToday = new Date().getFullYear().toString();\r\n        let todayYearFull = parseInt(yearStringToday.substr(0, 2) + \"00\");\r\n\r\n        //#region Normal use\r\n        if (inputText.length == 1 || inputText.length == 2)\r\n        {\r\n            if (originalInput.length == 3)\r\n            {\r\n                let regexForSpecialChars = /^[A-Za-z0-9 ]+$/;\r\n                let hasNotSeparator = regexForSpecialChars.test(originalInput);\r\n                if (!hasNotSeparator)\r\n                {\r\n                    day = Number(originalInput[0]);\r\n                    month = Number(originalInput[2]) - 1;\r\n                    year = todayYear;\r\n                }\r\n            }\r\n            else\r\n            {\r\n                day = Number(inputText);\r\n                month = todayMonth;\r\n                year = todayYear;\r\n            }\r\n        }\r\n        else if (inputText.length == 3)\r\n        {\r\n            day = Number(inputText[0]);\r\n            month = Number(inputText[1] + inputText[2]) - 1;\r\n            if (month > 11)\r\n            {\r\n                day = Number(inputText[0] + inputText[1]);\r\n                month = Number(inputText[2]) - 1;\r\n            }\r\n            year = todayYear;\r\n        }\r\n        else if (inputText.length == 4)\r\n        {\r\n            let yearString = inputText[2] + inputText[3];\r\n            let yearNumber = Number(yearString);\r\n            if (yearNumber <= 12 && (Number(inputText[0] + inputText[1]) <= 31))\r\n            {\r\n                day = Number(inputText[0] + inputText[1]);\r\n                month = Number(inputText[2] + inputText[3]) - 1;\r\n                year = todayYear;\r\n            }\r\n            else\r\n            {\r\n                let finalYear = this.getFinalYear(yearString);\r\n                if (inputTextNumeric >= todayYearFull && inputTextNumeric <= new Date().getFullYear())\r\n                {\r\n                    day = 1;\r\n                    month = 0;\r\n                    year = finalYear;\r\n\r\n                    if (this.getOptions().defaultDay == DefaultDayEnum.Last)\r\n                    {\r\n                        day = 31;\r\n                        month = 11;\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    day = Number(inputText[0]);\r\n                    month = Number(inputText[1]) - 1;\r\n                    year = finalYear;\r\n                }\r\n            }\r\n        }\r\n        else if (inputText.length == 5)\r\n        {\r\n            let yearString = inputText[3] + inputText[4];\r\n            let finalYear = this.getFinalYear(yearString);\r\n\r\n            day = Number(inputText[0]);\r\n            month = Number(inputText[1] + inputText[2]) - 1;\r\n            if (month > 11)\r\n            {\r\n                day = Number(inputText[0] + inputText[1]);\r\n                month = Number(inputText[2]) - 1;\r\n            }\r\n            year = finalYear;\r\n        }\r\n        else if (inputText.length == 6)\r\n        {\r\n            let yearString = inputText[4] + inputText[5];\r\n            let finalYear = this.getFinalYear(yearString);\r\n\r\n            day = Number(inputText[0] + inputText[1]);\r\n            month = Number(inputText[2] + inputText[3]) - 1;\r\n            if (month > 11)\r\n            {\r\n                day = Number(inputText[0]);\r\n                month = Number(inputText[1]) - 1;\r\n                finalYear = Number(inputText[2] + inputText[3] + inputText[4] + inputText[5]);\r\n            }\r\n\r\n            year = finalYear;\r\n        }\r\n        else if (inputText.length == 7)\r\n        {\r\n            let finalYear = Number(inputText[3] + inputText[4] + inputText[5] + inputText[6]);\r\n\r\n            day = Number(inputText[0]);\r\n            month = Number(inputText[1] + inputText[2]) - 1;\r\n            if (month > 11)\r\n            {\r\n                day = Number(inputText[0] + inputText[1]);\r\n                month = Number(inputText[2]) - 1;\r\n            }\r\n\r\n            year = finalYear;\r\n        }\r\n        else if (inputText.length == 8)\r\n        {\r\n            day = Number(inputText[0] + inputText[1]);\r\n            month = Number(inputText[2] + inputText[3]) - 1;\r\n            year = Number(inputText[4] + inputText[5] + inputText[6] + inputText[7]);\r\n        }\r\n        //#endregion\r\n\r\n        dateToReturn = new Date(year, month, day);\r\n        if (onlyFormat)\r\n            return dateToReturn;\r\n\r\n        if (dateToReturn != null && Date.vrIsValidDate(dateToReturn) && Number(month) >= 0 && Number(month) <= 11\r\n            && (dateToReturn.getMonth()) == Number(month))\r\n        {\r\n            if (this.value() == null || !Date.vrEquals(this.value()!, dateToReturn))\r\n                this.value(dateToReturn);\r\n            else\r\n                this.formatValue();\r\n        }\r\n        else\r\n        {\r\n            UtilityManager.interval(() => puma(this.element()).toggleClass(\"errorInput\"), 200, 800);\r\n            this.clear();\r\n        }\r\n    }\r\n    //#endregion\r\n\r\n    //#region TimePicker\r\n    private openPopupTimePicker(): void\r\n    {\r\n        //#region Value\r\n        let value = this.value();\r\n        let hours = (value != null) ? value.getHours() : 0;\r\n        let minutes = (value != null) ? value.getMinutes() : 0;\r\n        //#endregion\r\n\r\n        if (this._popup == null)\r\n            this._popup = puma(\"<div class='vrDivPickerPopup vrPopup' id='\" + this.element().id + \"_divPopup'></div>\").vrAppendToPuma((shadowRoot() != null) ? shadowRoot() : document.body)[0];\r\n\r\n        puma(this._popup).removeClass(\"datePickerPopup\");\r\n        puma(this._popup).addClass(\"timePickerPopup\");\r\n\r\n        super.settingPopup(this._popup, { right: true });\r\n\r\n        let options = this.getOptions();\r\n\r\n        let tempMin = new Date(options.min!);\r\n        let tempMax = new Date(options.max!);\r\n        tempMin.setFullYear(1900, 1, 1);\r\n        tempMax.setFullYear(1900, 1, 1);\r\n\r\n        let differenceBetweenMinMax = Date.vrDifferenceBetweenDatesInMinutes(tempMin, tempMax);\r\n        let interval = Math.round(differenceBetweenMinMax / options.timeInterval!);\r\n\r\n        let topPosition = 0;\r\n        let time = new Date(options.min!);\r\n        for (let i = 0; i < interval; i++)\r\n        {\r\n            let text = time.toTimeString();\r\n            let textHours = Number(text.split(\":\")[0]);\r\n            let textMinutes = Number(text.split(\":\")[1]);\r\n\r\n            let selected = hours == textHours && minutes == textMinutes;\r\n            let label = this.createTimeLabel(text, selected);\r\n            time.vrAddMinutes(options.timeInterval!);\r\n\r\n            //#region Time not included in interval\r\n            if (hours == textHours)\r\n            {\r\n                if (minutes % options.timeInterval! != 0 && minutes > textMinutes && minutes < (textMinutes + options.timeInterval!))\r\n                {\r\n                    selected = true;\r\n                    text = String(hours).padStart(2, \"0\") + \":\" + String(minutes).padStart(2, \"0\");\r\n                    label = this.createTimeLabel(text, selected);\r\n                }\r\n            }\r\n            //#endregion\r\n\r\n            if (selected)\r\n                topPosition = puma(label.element()).offset().top - puma(this._popup).offset().top - (puma(this._popup).height() / 2);\r\n        }\r\n\r\n        if (topPosition < 0) topPosition = 0;\r\n        this._popup.scrollTo(0, topPosition);\r\n    }\r\n\r\n    private createTimeLabel(text: string, selected = false)\r\n    {\r\n        let label = createLabel(\r\n            {\r\n                text: text,\r\n                width: \"Calc(100% - 10px)\",\r\n                onClick: (e) => \r\n                {\r\n                    let value = label.value();\r\n                    let hours = value.split(\":\")[0];\r\n                    let minutes = value.split(\":\")[1];\r\n\r\n                    let actualYear = (this.value() != null) ? this.value()!.getFullYear() : new Date().getFullYear();\r\n                    let actualMonth = (this.value() != null) ? this.value()!.getMonth() : new Date().getMonth();\r\n                    let actualDays = (this.value() != null) ? this.value()!.getDate() : new Date().getDate();\r\n\r\n                    this.close();\r\n                    let dateToSelect = new Date(actualYear, actualMonth, actualDays, Number(hours), Number(minutes));\r\n                    this.value(dateToSelect);\r\n                },\r\n                css: \"cursor: pointer;\",\r\n                cssContainer: \"padding: 5px; padding-top: 2px; cursor: pointer; border-bottom: solid 1px #DCDCDC;\" + ((selected) ? \"background-color: #51B3E1; color: #FFF;\" : \"\")\r\n            }, this._popup);\r\n\r\n        return label;\r\n    }\r\n\r\n    private formatInputTimePicker(inputText: string, onlyFormat = false): void | Date\r\n    {\r\n        let options = this.getOptions();\r\n        if (inputText == null || inputText == \"\")\r\n        {\r\n            if (!options.nullable)\r\n            {\r\n                UtilityManager.interval(() => puma(this.element()).toggleClass(\"errorInput\"), 200, 800);\r\n                this.value(this.value(), false);\r\n                return;\r\n            }\r\n            {\r\n                this._value = null;\r\n                this.change();\r\n                return;\r\n            }\r\n        }\r\n\r\n        inputText = inputText.replace(/[^\\w\\s]/gi, '');\r\n        inputText = inputText.replace(/\\s/g, '');\r\n        let inputTextNumeric = Number(inputText);\r\n\r\n        let today = new Date();\r\n        today.setHours(0, 0);\r\n\r\n        //#region Special\r\n        switch (inputText.toLowerCase())\r\n        {\r\n            case \"adesso\": this.value(new Date()); return;\r\n            case \"pumo\": { this.value(new Date(1993, 9, 10, 10, 10)); } return;\r\n        }\r\n        //#endregion\r\n\r\n        //#region Normal use\r\n        if (inputText.length == 1 || inputText.length == 3)\r\n            inputText = \"0\" + inputText;\r\n\r\n        if (isNaN(inputTextNumeric))\r\n        {\r\n            UtilityManager.interval(() => puma(this.element()).toggleClass(\"errorInput\"), 200, 800);\r\n            this.clear();\r\n            return;\r\n        }\r\n\r\n        let dateToReturn = today;\r\n        if (inputText.length == 2)\r\n            dateToReturn = dateToReturn.vrAddHours(inputTextNumeric);\r\n        else if (inputText.length == 4)\r\n        {\r\n            let hours = Number(inputText[0] + inputText[1]);\r\n            let minutes = Number(inputText[2] + inputText[3]);\r\n            dateToReturn = dateToReturn.vrAddHours(hours).vrAddMinutes(minutes);\r\n        }\r\n\r\n        if (onlyFormat)\r\n            return dateToReturn;\r\n\r\n        this.value(dateToReturn);\r\n        //#endregion\r\n    }\r\n    //#endregion\r\n\r\n    //#region DateTimePicker\r\n    private formatInputDateTimePicker(inputText: string)\r\n    {\r\n        let timeString = inputText.split(\" \")[1];\r\n        let time = this.formatInputTimePicker(timeString, true) as Date;\r\n\r\n        let dateString = inputText.split(\" \")[0];\r\n        let date = this.formatInputDatePicker(dateString, true) as Date;\r\n\r\n        if (date != null)\r\n        {\r\n            date.setHours(time.getHours(), time.getMinutes());\r\n            this.value(date);\r\n        }\r\n    }\r\n    //#endregion\r\n\r\n    //#region Utility\r\n    private getFinalYear(yearString: string): number\r\n    {\r\n        if (yearString.length == 4)\r\n            return Number(yearString);\r\n\r\n        let yearStringToday = new Date().getFullYear().toString();\r\n        let todayYearFull = Number(yearStringToday.substr(0, 2) + \"00\");\r\n        let todayYear2digits = Number(yearStringToday.substr(0, 2));\r\n\r\n        let yearStringFinal = (yearString.length == 1) ? \"0\" + yearString : yearString.substr(0, 2);\r\n\r\n        let inputYear = Number(yearStringFinal);\r\n        let yearFinalString = \"\";\r\n        if (inputYear <= ((new Date().getFullYear() + 10) - todayYearFull))\r\n            yearFinalString = todayYear2digits + yearStringFinal;\r\n        else\r\n            yearFinalString = (todayYear2digits - 1) + yearStringFinal;\r\n\r\n        return Number(yearFinalString);\r\n    }\r\n\r\n    private updateCursorPosition(): void\r\n    {\r\n        if ((this.element() as any).createTextRange)\r\n        {\r\n            var range = (this.element() as any).createTextRange();\r\n            range.move('character', this._currentCursorPosition);\r\n            range.select();\r\n        }\r\n        else\r\n        {\r\n            if ((this.element() as any).selectionStart >= 0)\r\n            {\r\n                (this.element() as any).focus();\r\n                (this.element() as any).setSelectionRange(this._currentCursorPosition, this._currentCursorPosition);\r\n            }\r\n            else\r\n                (this.element() as any).focus();\r\n        }\r\n    }\r\n    //#endregion\r\n\r\n    value(date?: Date | null, triggerChange: boolean = true): Date | null\r\n    {\r\n        let options = this.getOptions();\r\n        if (date === null)\r\n        {\r\n            if (!options.nullable)\r\n            {\r\n                UtilityManager.interval(() => puma(this.element()).toggleClass(\"errorInput\"), 200, 800);\r\n                return this._value;\r\n            }\r\n            else\r\n            {\r\n                this.clear();\r\n                return null;\r\n            }\r\n        }\r\n\r\n        if (date != null)\r\n        {\r\n            if (typeof (date) == \"string\")\r\n                date = Date.vrFixDateString(date);\r\n\r\n            if (date == null)\r\n                throw Error(\"Formato data non valido!\");\r\n\r\n            //#region Check\r\n            if (options.mode == DateModeEnum.Time)\r\n            {\r\n                date.setFullYear(new Date().getFullYear());\r\n                date.setMonth(new Date().getMonth());\r\n                //date.setDate(new Date().getDate());\r\n            }\r\n\r\n            if (options.mode != DateModeEnum.Time)\r\n            {\r\n                if (date.vrIsLessThan(options.min!))\r\n                {\r\n                    notify(\"Data minima consentita: \" + options.min!.vrToItalyString());\r\n                    UtilityManager.interval(() => puma(this.element()).toggleClass(\"errorInput\"), 200, 800);\r\n                    this.clear();\r\n                    return null;\r\n                }\r\n                if (date.vrIsGreaterThan(options.max!))\r\n                {\r\n                    notify(\"Data massima consentita: \" + options.max!.vrToItalyString());\r\n                    UtilityManager.interval(() => puma(this.element()).toggleClass(\"errorInput\"), 200, 800);\r\n                    this.clear();\r\n                    return null;\r\n                }\r\n            }\r\n            //#endregion\r\n\r\n            if (triggerChange)\r\n            {\r\n                let changingEvent = new DatePickerChangingEvent();\r\n                if (options.onBeforeChange != null)\r\n                {\r\n                    changingEvent.sender = this;\r\n                    changingEvent.value = date;\r\n                    changingEvent.previousValue = this._value;\r\n                    options.onBeforeChange(changingEvent);\r\n                }\r\n\r\n                if (!changingEvent.isDefaultPrevented())\r\n                {\r\n                    this._value = new Date(date);\r\n                    this.formatValue();\r\n                    this.change();\r\n                }\r\n            }\r\n            else\r\n            {\r\n                this._value = new Date(date);\r\n                this.formatValue();\r\n            }\r\n        }\r\n\r\n        if (this._value != null)\r\n            this._value.setSeconds(0);\r\n\r\n        if (this.mode() == DateModeEnum.Time && this._value != null)\r\n        {\r\n            let hours = this._value.getHours();\r\n            let minutes = this._value.getMinutes();\r\n            this._value = new Date(1900, 0, 1, hours, minutes);\r\n        }\r\n\r\n        return this._value;\r\n    }\r\n\r\n    private formatValue()\r\n    {\r\n        let options = this.getOptions();\r\n        let element = (this.element() as HTMLInputElement);\r\n\r\n        let dateOptions: Intl.DateTimeFormatOptions = {};\r\n        switch (options.format)\r\n        {\r\n            case DateFormatEnum.ShortDate:\r\n                {\r\n                    dateOptions = {\r\n                        year: 'numeric',\r\n                        month: '2-digit',\r\n                        day: '2-digit',\r\n                        hour12: false\r\n                    }\r\n                }\r\n                break;\r\n            case DateFormatEnum.LongDate:\r\n                {\r\n                    dateOptions = {\r\n                        weekday: 'long',\r\n                        year: 'numeric',\r\n                        month: 'long',\r\n                        day: '2-digit',\r\n                        hour12: false\r\n                    }\r\n                }\r\n                break;\r\n            case DateFormatEnum.WeekDay:\r\n                {\r\n                    dateOptions = {\r\n                        weekday: 'long',\r\n                        year: 'numeric',\r\n                        month: '2-digit',\r\n                        day: '2-digit',\r\n                        hour12: false\r\n                    }\r\n                }\r\n                break;\r\n            case DateFormatEnum.Month:\r\n                {\r\n                    dateOptions = {\r\n                        year: 'numeric',\r\n                        month: 'long',\r\n                    }\r\n                }\r\n                break;\r\n            case DateFormatEnum.Year:\r\n                {\r\n                    dateOptions = {\r\n                        year: 'numeric',\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        let dateFormatter = new Intl.DateTimeFormat(/*navigator.language*/\"it\", dateOptions);\r\n        let dateString = dateFormatter.format(this._value!).vrCapitalize();\r\n\r\n        if (options.format == DateFormatEnum.WeekRange)\r\n        {\r\n            let firstDayOfWeek = Date.vrGetFirstDayOfWeekByDate(this._value!);\r\n            let lastDayOfWeek = firstDayOfWeek.vrAddDays(5);\r\n            dateString = firstDayOfWeek.vrToItalyString() + \" - \" + lastDayOfWeek.vrToItalyString();\r\n        }\r\n        else if (options.format == DateFormatEnum.FourWeeksRange)\r\n        {\r\n            let firstDayOfWeek = Date.vrGetFirstDayOfWeekByDate(this._value!);\r\n            let lastDayOfWeek = firstDayOfWeek.vrAddDays(26);\r\n            dateString = firstDayOfWeek.vrToItalyString() + \" - \" + lastDayOfWeek.vrToItalyString();\r\n        }\r\n\r\n        switch (options.mode)\r\n        {\r\n            case DateModeEnum.Date: element.value = dateString; break;\r\n            case DateModeEnum.Time: element.value = this._value!.toTimeString(); break;\r\n            case DateModeEnum.DateTime: element.value = dateString + \" \" + this._value!.toTimeString(); break;\r\n        }\r\n    }\r\n\r\n    mode(mode?: DateModeEnum)\r\n    {\r\n        let options = this.getOptions();\r\n        if (mode != null)\r\n            options.mode = mode;\r\n\r\n        return options.mode;\r\n    }\r\n\r\n    min(min?: Date)\r\n    {\r\n        let options = this.getOptions();\r\n        if (min != null)\r\n            options.min = min;\r\n\r\n        return options.min;\r\n    }\r\n\r\n    max(max?: Date)\r\n    {\r\n        let options = this.getOptions();\r\n        if (max != null)\r\n            options.max = max;\r\n\r\n        return options.max;\r\n    }\r\n\r\n    format(format?: DateFormatEnum, changeText = true)\r\n    {\r\n        let options = this.getOptions();\r\n        if (format != null)\r\n        {\r\n            options.format = format;\r\n            if (changeText)\r\n                this.value(this.value(), false);\r\n        }\r\n        return options.format;\r\n    }\r\n\r\n    clear(triggerChange = false): void\r\n    {\r\n        this._value = null;\r\n        (this.element() as HTMLInputElement).value = \"\";\r\n\r\n        if (triggerChange)\r\n            this.change();\r\n    }\r\n\r\n    isEmpty()\r\n    {\r\n        return this.value() == null;\r\n    }\r\n\r\n    error()\r\n    {\r\n        puma(this.element()).addClass(\"vrDatePickerError\");\r\n    }\r\n\r\n    hideError()\r\n    {\r\n        puma(this.element()).removeClass(\"vrDatePickerError\");\r\n    }\r\n\r\n    private getOptions(): DatePickerOptions\r\n    {\r\n        return this.options<DatePickerOptions>();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Overrides\r\n    enable(): void\r\n    {\r\n        super.enable();\r\n        puma(this.container()).find(\".vrDivPickerIcon\").removeClass(\"vrDivPickerIconDisable\");\r\n        puma(this.container()).find(\".vrDivPickerDateTimeIcon\").removeClass(\"vrDivPickerIconDisable\");\r\n    }\r\n\r\n    disable(): void\r\n    {\r\n        super.disable();\r\n        puma(this.container()).find(\".vrDivPickerIcon\").addClass(\"vrDivPickerIconDisable\");\r\n        puma(this.container()).find(\".vrDivPickerDateTimeIcon\").addClass(\"vrDivPickerIconDisable\");\r\n    }\r\n    //#endregion\r\n\r\n    //#region Events\r\n    change(): void\r\n    {\r\n        let changeCallBack = this.getOptions().onAfterChange;\r\n        if (changeCallBack != null)\r\n        {\r\n            let changeEvent = new DatePickerChangeEvent();\r\n            changeEvent.sender = this;\r\n            changeEvent.value = this.value();\r\n            changeCallBack(changeEvent);\r\n        }\r\n    }\r\n    //#endregion\r\n}\r\n\r\nexport class TimePicker extends DatePicker { }\r\nexport class DateTimePicker extends DatePicker { }\r\nexport class MonthPicker extends DatePicker { }\r\nexport class YearPicker extends DatePicker { }\r\n//#endregion\r\n\r\n//#region Classes\r\nclass DatePickerEvent extends VrControlsEvent\r\n{\r\n    sender: DatePicker;\r\n    value: Date | null;\r\n}\r\n\r\nclass DatePickerChangeEvent extends DatePickerEvent\r\n{\r\n\r\n}\r\n\r\nclass DatePickerChangingEvent extends DatePickerEvent\r\n{\r\n    previousValue?: Date | null;\r\n}\r\n\r\nexport enum ActualViewEnum\r\n{\r\n    Day,\r\n    Month,\r\n    Year,\r\n    Decade\r\n}\r\n\r\nclass DatePickerFocusEvent extends DatePickerEvent\r\n{\r\n}\r\n\r\nclass DatePickerBlurEvent extends DatePickerEvent\r\n{\r\n}\r\n\r\nclass DatePickerKeyUpPressEvent extends VrControlsEvent\r\n{\r\n    sender: DatePicker;\r\n    text: string;\r\n    key: string;\r\n    shiftKey: boolean;\r\n    altKey: boolean;\r\n    ctrlKey: boolean;\r\n    enterKey: boolean;\r\n    backSpaceKey: boolean;\r\n    tabKey: boolean;\r\n}\r\n\r\nclass DatePickerKeyUpEvent extends DatePickerKeyUpPressEvent\r\n{\r\n}\r\n\r\nclass DatePickerKeyDownEvent extends DatePickerKeyUpPressEvent\r\n{\r\n}\r\n//#endregion","import { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { ControlTypeEnum, TextAlignEnum, TextModeEnum, TextTransformModeEnum, PositionEnum, ErrorModeEnum, ErrorPositionEnum, ErrorHideModeEnum, puma, IconClassLight, IconClass, KeyEnum, icon, TextBoxLengthSettings, NumberFormatRoundingSettings, NumberFormatSettings, RoundingModeEnum, TextBoxValidationSettings, TextBoxValidationErrorEnum, TextBoxRegexSettings } from \"../vr\";\r\nimport { UtilityManager } from \"../../managers/utilityManager\";\r\nimport { DeviceManager } from \"../../../src/managers/deviceManager\";\r\n\r\n//#region Options\r\nexport class TextBoxOptions extends VrControlOptions\r\n{\r\n    value?: string | number;\r\n    placeholder?: string;\r\n    readOnly?: boolean;\r\n    rows?: number;\r\n    decimals?: number;\r\n    zeros?: number;\r\n    align?: TextAlignEnum;\r\n    mode?: TextModeEnum;\r\n    inputMode?: TextTransformModeEnum;\r\n    icon?: IconClass;\r\n    imageUrl?: string;\r\n    bold?: boolean;\r\n    nullable?: boolean;\r\n    growWithContent?: boolean;\r\n    tooltip?: string;\r\n    roundingSettings?: NumberFormatRoundingSettings;\r\n    validation?: TextBoxValidationSettings;\r\n\r\n    onChanged?(e: TextBoxChangeEvent): void;\r\n    onKeyUp?(e: TextBoxKeyUpEvent): void;\r\n    onKeyDown?(e: TextBoxKeyDownEvent): void;\r\n    onEnterKey?(e: TextBoxEnterKeyEvent): void;\r\n    onFocus?(e: TextBoxFocusEvent): void;\r\n    onBlur?(e: TextBoxBlurEvent): void;\r\n    onPaste?(e: TextBoxPasteEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class TextBox extends VrControl\r\n{\r\n    private _numberValue: number | null;\r\n    private _hideErrorMode: ErrorHideModeEnum;\r\n    private _keyDownCanceled: boolean;\r\n    private _originalHeight: number;\r\n    private _oldValue: string | number | null;\r\n    private _originalMarginBottom: number;\r\n    private _passwordViewableIcon: HTMLElement;\r\n\r\n    constructor(element: HTMLElement, options?: TextBoxOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new TextBoxOptions();\r\n\r\n        if (options.mode == null) options.mode = TextModeEnum.Text;\r\n        if (options.inputMode == null) options.inputMode = TextTransformModeEnum.Default;\r\n        if (options.rows == null) options.rows = 2;\r\n        if (options.width == null) options.width = 200;\r\n        if (options.bold == null) options.bold = false;\r\n        if (options.nullable == null) options.nullable = true;\r\n        if (options.growWithContent == null) options.growWithContent = false;\r\n\r\n        if (options.decimals == null) \r\n        {\r\n            if (options.mode == TextModeEnum.Numeric)\r\n                options.decimals = 0;\r\n            else if (options.mode == TextModeEnum.Currency || options.mode == TextModeEnum.Percentage)\r\n                options.decimals = 2;\r\n        }\r\n\r\n        if (options.align == null) \r\n        {\r\n            if (options.mode == TextModeEnum.Numeric || options.mode == TextModeEnum.Percentage || options.mode == TextModeEnum.Currency)\r\n                options.align = TextAlignEnum.Right;\r\n            else\r\n                options.align = TextAlignEnum.Left;\r\n        }\r\n\r\n        //#region Validation\r\n        if (options.validation == null) options.validation = new TextBoxValidationSettings();\r\n        if (options.validation.error == null) options.validation.error = TextBoxValidationErrorEnum.Flashing;\r\n        if (options.validation.minValue == null) options.validation.minValue = Number.MIN_SAFE_INTEGER;\r\n        if (options.validation.maxValue == null) options.validation.maxValue = Number.MAX_SAFE_INTEGER;\r\n\r\n        if (options.validation.minLength == null) options.validation.minLength = new TextBoxLengthSettings();\r\n        if (typeof (options.validation.minLength) == \"number\")\r\n        {\r\n            let minLength = options.validation.minLength;\r\n            options.validation.minLength = new TextBoxLengthSettings();\r\n            options.validation.minLength.value = minLength;\r\n        }\r\n        if (options.validation.minLength.substituteChar == null) options.validation.minLength.substituteChar = \"X\";\r\n\r\n        if (options.validation.maxLength == null) options.validation.maxLength = new TextBoxLengthSettings();\r\n        if (typeof (options.validation.maxLength) == \"number\")\r\n        {\r\n            let maxLength = options.validation.maxLength;\r\n            options.validation.maxLength = new TextBoxLengthSettings();\r\n            options.validation.maxLength.value = maxLength;\r\n        }\r\n\r\n        if (options.validation.regex != null)\r\n        {\r\n            if (typeof (options.validation.regex) == \"string\") \r\n            {\r\n                let value = options.validation.regex;\r\n                options.validation.regex = new TextBoxRegexSettings();\r\n                options.validation.regex.value = value;\r\n            }\r\n\r\n            if (options.validation.regex.checkOnKeyUp == null && options.validation.regex.checkOnValue == null\r\n                && options.validation.regex.checkOnKeyDown == null && options.validation.regex.checkOnBlur == null)\r\n                options.validation.regex.checkOnKeyDown = true;\r\n\r\n            if (options.validation.regex.value == null)\r\n            {\r\n                if (options.validation.regex.onlyNumbers === true)\r\n                    options.validation.regex.value = \"^\\\\d*$\";\r\n                else if (options.validation.regex.onlyCharacters === true)\r\n                    options.validation.regex.value = \"^[a-zA-Z]+$\";\r\n                else if (options.validation.regex.onlyUpperCase === true)\r\n                    options.validation.regex.value = \"^[A-Z]+$\";\r\n                else if (options.validation.regex.onlyLowerCase === true)\r\n                    options.validation.regex.value = \"^[a-z]+$\";\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#region Mode\r\n        switch (options.mode)\r\n        {\r\n            case TextModeEnum.Text: puma(element).attr(\"type\", \"text\"); break;\r\n            case TextModeEnum.Link: puma(element).attr(\"type\", \"url\"); break;\r\n            case TextModeEnum.Phone: puma(element).attr(\"type\", \"tel\"); break;\r\n            case TextModeEnum.Search: puma(element).attr(\"type\", \"search\"); break;\r\n            case TextModeEnum.Mail: puma(element).attr(\"type\", \"email\"); break;\r\n            case TextModeEnum.Password: puma(element).attr(\"type\", \"password\"); break;\r\n            case TextModeEnum.PasswordViewable: puma(element).attr(\"type\", \"text\"); break;\r\n            case TextModeEnum.Numeric:\r\n            case TextModeEnum.Percentage:\r\n            case TextModeEnum.Currency:\r\n                puma(element).attr(\"type\", \"number\");\r\n                break;\r\n            case TextModeEnum.MultiLine:\r\n                {\r\n                    let textArea = document.createElement(\"textarea\");\r\n                    textArea.id = element.id;\r\n                    puma(textArea).addClass(\"vrTextArea\");\r\n                    puma(textArea).attr(\"autocomplete\", \"off\");\r\n\r\n                    //#region Rows for height\r\n                    if (options.height == null)\r\n                        puma(textArea).height(38 + (20 * (options.rows - 1)));\r\n                    //#endregion\r\n\r\n                    textArea.style.cssText += \"-webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;\";\r\n                    textArea.style.cssText += \"border-radius: 4px; border-color: #d9d9d9; font-size: 16px; color: #000; padding: 5px; padding-left: 10px; padding-right: 10px; resize: none;\";\r\n\r\n                    puma(element).vrAfterPuma(textArea);\r\n                    puma(element).hide();\r\n                    element = textArea;\r\n                }\r\n                break;\r\n        }\r\n\r\n        if (!DeviceManager.isMobile() && options.mode != TextModeEnum.Password)\r\n            puma(element).attr(\"type\", \"text\");\r\n\r\n        puma(element).attr(\"autocomplete\", \"off\");\r\n        //#endregion\r\n\r\n        element.style.cssText += \"padding-left: 10px; padding-right: 10px;\";\r\n        super(element, options, ControlTypeEnum.TextBox);\r\n        this._numberValue = null;\r\n\r\n        //#region Password Viewable\r\n        if (options.mode == TextModeEnum.PasswordViewable)\r\n        {\r\n            this.viewPassword(false);\r\n            this._passwordViewableIcon = icon(IconClassLight.EyeSlash, this.container(), { css: \"position: absolute; right: 5px; bottom: 7px; font-size: 14px; opacity: 0.8; cursor: pointer;\" })\r\n            puma(this._passwordViewableIcon).on(\"click\", (e: JQuery.ClickEvent) =>\r\n            {\r\n                this.viewPassword(this.viewPassword());\r\n            });\r\n        }\r\n        //#endregion\r\n\r\n        if (options.height != null && options.mode == TextModeEnum.MultiLine)\r\n            puma(this.element()).height(Number(options.height) - 12);\r\n\r\n        this._originalHeight = puma(this.element()).outerHeight();\r\n        this._originalMarginBottom = puma(this.container()).css(\"margin-bottom\").getNumericPart();\r\n\r\n        //#region Text/Placeholder & Max/Min Length\r\n        if (options.value != null)\r\n            this.value(options.value, false);\r\n        if (options.placeholder != null)\r\n            this.placeholder(options.placeholder);\r\n\r\n        if (options.validation.minLength != null)\r\n            puma(this.element()).attr(\"minlength\", options.validation.minLength.value);\r\n\r\n        if (options.validation.maxLength != null)\r\n            puma(this.element()).attr(\"maxlength\", options.validation.maxLength.value);\r\n        //#endregion\r\n\r\n        //#region Tooltip\r\n        if (options.tooltip != null)\r\n            puma(this.element()).attr(\"title\", options.tooltip);\r\n        //#endregion\r\n\r\n        //#region Enable/Readonly\r\n        if (options.readOnly === true)\r\n            puma(this.element()).attr(\"readonly\", \"readonly\");\r\n\r\n        if (options.readOnly === true || options.enable === false)\r\n            puma(this.element()).attr(\"tabIndex\", \"-1\");\r\n        //#endregion\r\n\r\n        //#region Bold\r\n        if (options.bold === true)\r\n            this.element().style.cssText += \"font-weight: 500;\";\r\n        //#endregion\r\n\r\n        //#region Align and Input mode\r\n        puma(this.element()).css(\"text-align\", options.align);\r\n        puma(this.element()).css(\"text-transform\", options.inputMode);\r\n        //#endregion\r\n\r\n        //#region Icon/ImageUrl\r\n        if (options.icon != null)\r\n        {\r\n            puma(this.element()).vrBeforePuma(\"<i class='\" + options.icon + \"' style='position: absolute; margin-left: 6px; color: #A9A9A9;'></i>\");\r\n            this.element().style.cssText += \"text-indent: 15px;\";\r\n        }\r\n        else if (options.imageUrl != null)\r\n            this.element().style.cssText += \"background-image: url(\" + options.imageUrl + \"); background-position: 4px 5px; background-repeat: no-repeat; text-indent: 13px;\";\r\n\r\n        if (options.mode != TextModeEnum.MultiLine && options.label != null && options.labelSettings!.position == PositionEnum.Top && (options.icon == null || options.imageUrl == null))\r\n            this.element().style.cssText += \"padding-left: 0px !important; width: calc(100% - 12px) !important;\";\r\n        //#endregion\r\n\r\n        //#region Events\r\n        puma(this.element()).keyup((e: JQuery.KeyUpEvent) =>\r\n        {\r\n            if (this._keyDownCanceled)\r\n            {\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            let value = puma(e.currentTarget).val();\r\n            this.autoSize();\r\n\r\n            if (e.key != KeyEnum.Tab)\r\n            {\r\n                let validateRegex = (options!.validation!.regex != null && (options!.validation!.regex as TextBoxRegexSettings).checkOnKeyUp);\r\n                this.validate(value, false, validateRegex);\r\n            }\r\n\r\n            if (options!.onKeyUp != null)\r\n            {\r\n                let event = new TextBoxKeyUpEvent();\r\n                event.sender = this;\r\n                event.value = (this.isNumericTextBox()) ? this._numberValue : value;\r\n                event.key = e.key;\r\n                event.shiftKey = e.shiftKey;\r\n                event.altKey = e.altKey;\r\n                event.ctrlKey = e.ctrlKey;\r\n                event.enterKey = e.key == KeyEnum.Enter;\r\n                event.backSpaceKey = e.key == KeyEnum.Backspace;\r\n                event.tabKey = e.key == KeyEnum.Tab;\r\n\r\n                let validForNumeric = [\",\", \".\", \"-\", \"+\"];\r\n                event.validForNumeric = (!isNaN(Number(e.key)) || validForNumeric.includes(e.key));\r\n                options!.onKeyUp(event);\r\n\r\n                if (event.isDefaultPrevented())\r\n                    e.preventDefault();\r\n            }\r\n        });\r\n\r\n        puma(this.element()).keydown((e: KeyboardEvent) =>\r\n        {\r\n            puma(this.element()).removeClass(\"errorInput\");\r\n            this._keyDownCanceled = false;\r\n            if (this._hideErrorMode == ErrorHideModeEnum.OnAction)\r\n                this.hideError();\r\n\r\n            //#region Check\r\n            if (e.key != KeyEnum.Backspace && e.key != KeyEnum.ArrowRight && e.key != KeyEnum.ArrowLeft\r\n                && e.key != KeyEnum.ArrowUp && e.key != KeyEnum.ArrowDown && e.key != KeyEnum.Tab)\r\n            {\r\n                if (this.isNumericTextBox() && isNaN(Number(e.key)) && e.key != \"-\" && e.key != \".\" && e.key != \",\" && !e.ctrlKey)\r\n                {\r\n                    UtilityManager.interval(() => puma(this.element()).toggleClass(\"errorInput\"), 200, 800, () => puma(this.element()).removeClass(\"errorInput\"));\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n\r\n                if (options!.validation!.regex != null\r\n                    && (options!.validation!.regex as TextBoxRegexSettings).value != null\r\n                    && (options!.validation!.regex as TextBoxRegexSettings).value != \"\"\r\n                    && (options!.validation!.regex as TextBoxRegexSettings).checkOnKeyDown)\r\n                {\r\n                    let regex = new RegExp((options!.validation!.regex as TextBoxRegexSettings).value!, (options!.validation!.regex as TextBoxRegexSettings).flags);\r\n                    if (!regex.test(e.key))\r\n                    {\r\n                        UtilityManager.interval(() => puma(this.element()).toggleClass(\"errorInput\"), 200, 800, () => puma(this.element()).removeClass(\"errorInput\"));\r\n                        e.preventDefault();\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            //#endregion\r\n\r\n            if (options!.onEnterKey != null && e.key == KeyEnum.Enter)\r\n            {\r\n                let enterKeyEvent = new TextBoxEnterKeyEvent();\r\n                enterKeyEvent.sender = this;\r\n                enterKeyEvent.value = this.value();\r\n                options!.onEnterKey(enterKeyEvent);\r\n            }\r\n\r\n            if (options!.onKeyDown != null)\r\n            {\r\n                let event = new TextBoxKeyDownEvent();\r\n                event.sender = this;\r\n                event.key = e.key;\r\n                event.shiftKey = e.shiftKey;\r\n                event.altKey = e.altKey;\r\n                event.ctrlKey = e.ctrlKey;\r\n                event.enterKey = e.key == KeyEnum.Enter;\r\n                event.backSpaceKey = e.key == KeyEnum.Backspace;\r\n                event.tabKey = e.key == KeyEnum.Tab;\r\n\r\n                let value = puma(e.currentTarget).val();\r\n                event.value = (this.isNumericTextBox()) ? this._numberValue : value;\r\n\r\n                let validForNumeric = [\",\", \".\", \"-\", \"+\"];\r\n                event.validForNumeric = (!isNaN(Number(e.key)) || validForNumeric.includes(e.key));\r\n                options!.onKeyDown(event);\r\n\r\n                if (event.isDefaultPrevented())\r\n                {\r\n                    this._keyDownCanceled = true;\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        });\r\n\r\n        puma(this.element()).focusin((e: JQuery.FocusInEvent) =>\r\n        {\r\n            puma(this.element()).removeClass(\"errorInput\");\r\n            if (this._hideErrorMode == ErrorHideModeEnum.OnFocus)\r\n                this.hideError();\r\n\r\n            if (this.isNumericTextBox())\r\n            {\r\n                let value = \"\";\r\n                if (this._numberValue != null)\r\n                    value = this.formatValue(String(this._numberValue));\r\n\r\n                (this.element() as HTMLInputElement).value = value;\r\n                puma(this.element()).select();\r\n            }\r\n\r\n            if (options!.onFocus != null)\r\n            {\r\n                let event = new TextBoxFocusEvent();\r\n                event.sender = this;\r\n                options!.onFocus(event);\r\n            }\r\n        });\r\n\r\n        puma(this.element()).blur((e: JQuery.BlurEvent) =>\r\n        {\r\n            let options = this.getOptions();\r\n\r\n            if (this.isNumericTextBox())\r\n                this.value(this._numberValue);\r\n            else\r\n            {\r\n                let validateRegex = (options!.validation!.regex != null && (options!.validation!.regex as TextBoxRegexSettings).checkOnBlur);\r\n                let realValue = this.validate(undefined, true, validateRegex);\r\n                (this.element() as HTMLInputElement).value = realValue;\r\n            }\r\n\r\n            if (options!.onBlur != null)\r\n            {\r\n                let event = new TextBoxBlurEvent();\r\n                event.sender = this;\r\n                event.target = e.target;\r\n                event.value = this.value();\r\n                options!.onBlur(event);\r\n            }\r\n        });\r\n\r\n        puma(this.element()).on(\"paste\", (e: any) =>\r\n        {\r\n            let pastedValue = e.originalEvent.clipboardData.getData(\"text\");\r\n\r\n            if (options!.onPaste != null)\r\n            {\r\n                let event = new TextBoxPasteEvent();\r\n                event.sender = this;\r\n                event.pastedValue = pastedValue;\r\n                event.value = this.value() + pastedValue;\r\n                options!.onPaste(event);\r\n            }\r\n        })\r\n        //#endregion\r\n    }\r\n\r\n    //#region Methods\r\n\r\n    //#region Text/Placeholder\r\n    value<T extends string | number | null>(value?: string | number | null, triggerChange: boolean = true): T\r\n    {\r\n        let options = this.options<TextBoxOptions>();\r\n\r\n        this._oldValue = (this.isNumericTextBox()) ? this._numberValue : (this.element() as HTMLInputElement).value;\r\n        if (value === null)\r\n        {\r\n            if (options.nullable)\r\n            {\r\n                this._numberValue = null;\r\n                (this.element() as HTMLInputElement).value = \"\";\r\n                return <T>null;\r\n            }\r\n            else if (this.isNumericTextBox())\r\n                value = 0;\r\n        }\r\n\r\n        if (value != null)\r\n        {\r\n            let validateRegex = (options!.validation!.regex != null && (options!.validation!.regex as TextBoxRegexSettings).checkOnValue);\r\n            let realValue = this.validate(String(value), true, validateRegex);\r\n            (this.element() as HTMLInputElement).value = realValue;\r\n            this.autoSize();\r\n\r\n            if (triggerChange)\r\n                this.change();\r\n        }\r\n\r\n        if (this.isNumericTextBox())\r\n            return <T>this._numberValue;\r\n        else\r\n            return <T>(this.element() as HTMLInputElement).value;\r\n    }\r\n\r\n    private validate(value?: string, format = true, validateRegex = false)\r\n    {\r\n        let options = this.getOptions();\r\n        puma(this.element()).removeClass(\"errorInput\");\r\n\r\n        if (value == null) value = String(this.value());\r\n        let realValue = value;\r\n\r\n        let error = false;\r\n        let numericValue: number | null = 0;\r\n        if (this.isNumericTextBox())\r\n        {\r\n            if (value == \"\")\r\n                this._numberValue = null;\r\n            else\r\n            {\r\n                let isNegative = value.startsWith(\"-\");\r\n                numericValue = value.replace(\",\", \".\").vrGetNumericPart();\r\n\r\n                //#region Min/Max value\r\n                if (format && numericValue < options.validation!.minValue!)\r\n                {\r\n                    numericValue = options.validation!.minValue!;\r\n                    error = true;\r\n                }\r\n\r\n                if (numericValue! > options.validation!.maxValue!)\r\n                {\r\n                    numericValue = options.validation!.maxValue!;\r\n                    error = true;\r\n                }\r\n                //#endregion\r\n\r\n                if (isNaN(Number(numericValue)))\r\n                {\r\n                    if (isNegative)\r\n                        numericValue = null;\r\n                    else\r\n                    {\r\n                        numericValue = 0;\r\n                        error = true;\r\n                    }\r\n                }\r\n\r\n                this._numberValue = numericValue;\r\n            }\r\n        }\r\n\r\n        //#region Zeros\r\n        if (options.zeros != null)\r\n            realValue = String(realValue).padStart(options.zeros, \"0\");\r\n        //#endregion\r\n\r\n        //#region Min/Max length\r\n        if (options.validation!.minLength != null)\r\n        {\r\n            let minLengthSettings = (options.validation!.minLength as TextBoxLengthSettings);\r\n            if (format && realValue.length < minLengthSettings.value)\r\n            {\r\n                realValue = realValue.padEnd(minLengthSettings.value, minLengthSettings.substituteChar);\r\n                error = true;\r\n            }\r\n        }\r\n\r\n        if (options.validation!.maxLength != null)\r\n        {\r\n            let maxLengthSettings = (options.validation!.maxLength as TextBoxLengthSettings);\r\n            if (realValue.length > maxLengthSettings.value)\r\n            {\r\n                realValue = realValue.substring(0, maxLengthSettings.value);\r\n                error = true;\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#region Regex\r\n        if (validateRegex\r\n            && (options!.validation!.regex as TextBoxRegexSettings).value != null\r\n            && (options!.validation!.regex as TextBoxRegexSettings).value != \"\"\r\n            && value != \"\" && value != null)\r\n        {\r\n            let regex = new RegExp((options!.validation!.regex as TextBoxRegexSettings).value!, (options!.validation!.regex as TextBoxRegexSettings).flags);\r\n            if (!regex.test(value))\r\n            {\r\n                realValue = \"\";\r\n                error = true;\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        if (this.isNumericTextBox())\r\n            realValue = (format) ? this.formatValue(String(numericValue)) : String(numericValue);\r\n\r\n        if (error)\r\n        {\r\n            switch (options.validation!.error)\r\n            {\r\n                case TextBoxValidationErrorEnum.None: { } break;\r\n                case TextBoxValidationErrorEnum.Flashing: UtilityManager.interval(() => puma(this.element()).toggleClass(\"errorInput\"), 200, 800, () => puma(this.element()).removeClass(\"errorInput\")); break;\r\n                case TextBoxValidationErrorEnum.Stable: puma(this.element()).addClass(\"errorInput\"); break;\r\n            }\r\n        }\r\n        return realValue;\r\n    }\r\n\r\n    placeholder(value?: string): string\r\n    {\r\n        if (value != null)\r\n            (this.element() as HTMLInputElement).placeholder = value;\r\n\r\n        return (this.element() as HTMLInputElement).placeholder;\r\n    }\r\n    //#endregion\r\n\r\n    type(type: TextModeEnum): void\r\n    {\r\n        let options = this.getOptions();\r\n        options.mode = type;\r\n\r\n        if (options.decimals == null) \r\n        {\r\n            if (options.mode == TextModeEnum.Numeric)\r\n                options.decimals = 0;\r\n            else if (options.mode == TextModeEnum.Currency || options.mode == TextModeEnum.Percentage)\r\n                options.decimals = 2;\r\n        }\r\n\r\n        if (options.align == null) \r\n        {\r\n            if (options.mode == TextModeEnum.Numeric || options.mode == TextModeEnum.Percentage || options.mode == TextModeEnum.Currency)\r\n                options.align = TextAlignEnum.Right;\r\n            else\r\n                options.align = TextAlignEnum.Left;\r\n        }\r\n    }\r\n\r\n    getOptions(): TextBoxOptions\r\n    {\r\n        return this.options<TextBoxOptions>();\r\n    }\r\n\r\n    clear(triggerChange = false): void\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.nullable && this.isNumericTextBox())\r\n            this.value(null, false);\r\n        else\r\n        {\r\n            this._numberValue = null;\r\n            (this.element() as HTMLInputElement).value = \"\";\r\n        }\r\n\r\n        if (triggerChange)\r\n            this.change();\r\n    }\r\n\r\n    isEmpty(): boolean\r\n    {\r\n        if (this.isNumericTextBox())\r\n            return this._numberValue == null;\r\n        else\r\n            return (this.element() as HTMLInputElement).value === \"\";\r\n    }\r\n\r\n    private autoSize()\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.growWithContent === true && options.mode == TextModeEnum.MultiLine)\r\n        {\r\n            let heightContainer = this.element().clientHeight;\r\n            if (options.labelSettings != null && (options.labelSettings.position == PositionEnum.Top || options.labelSettings.position == PositionEnum.Bottom))\r\n                heightContainer += puma(this.container()).find(\".vrLabelContainer\").height();\r\n\r\n            this.element().style.height = \"1px\";\r\n            this.container().style.height = heightContainer + \"px\";\r\n            let newHeight = 25 + this.element().scrollHeight;\r\n            if (newHeight > this._originalHeight)\r\n                this.element().style.height = (25 + this.element().scrollHeight) + \"px\";\r\n            else\r\n                this.element().style.height = this._originalHeight + \"px\";\r\n\r\n            this.container().style.height = \"auto\";\r\n        }\r\n    }\r\n\r\n    private isNumericTextBox(): boolean\r\n    {\r\n        let options = this.options<TextBoxOptions>();\r\n        let mode = options.mode;\r\n        return (mode == TextModeEnum.Numeric || mode == TextModeEnum.Percentage || mode == TextModeEnum.Currency);\r\n    }\r\n\r\n    viewPassword(state?: boolean)\r\n    {\r\n        if (state != null)\r\n        {\r\n            puma(this._passwordViewableIcon).removeClass(IconClassLight.EyeSlash);\r\n            puma(this._passwordViewableIcon).removeClass(IconClassLight.Eye);\r\n\r\n            if (state) \r\n            {\r\n                puma(this.element()).removeClass(\"noViewablePassword\");\r\n                puma(this._passwordViewableIcon).addClass(IconClassLight.Eye);\r\n            }\r\n            else \r\n            {\r\n                puma(this.element()).addClass(\"noViewablePassword\");\r\n                puma(this._passwordViewableIcon).addClass(IconClassLight.EyeSlash);\r\n            }\r\n        }\r\n        return this.element().classList.contains(\"noViewablePassword\");\r\n    }\r\n\r\n    //#region Caret\r\n    caretPosition()\r\n    {\r\n        return (this.element() as HTMLInputElement).selectionStart!;\r\n    }\r\n\r\n    insertTextAtCursor(text: string)\r\n    {\r\n        this.appendText(text, this.caretPosition());\r\n    }\r\n\r\n    insertTextAtPosition(text: string, position: number)\r\n    {\r\n        this.appendText(text, position);\r\n    }\r\n\r\n    appendText(text: string, position?: number)\r\n    {\r\n        let element = this.element() as HTMLInputElement;\r\n        if (position == null)\r\n            position = element.value.length;\r\n\r\n        this.value(element.value.substring(0, position)\r\n            + text\r\n            + element.value.substring(element.selectionEnd!, element.value.length));\r\n\r\n        element.selectionStart = this.caretPosition() + text.length;\r\n        element.selectionEnd = this.caretPosition() + text.length;\r\n        this.focus();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Error management\r\n    error(text?: string, mode?: ErrorModeEnum, position?: ErrorPositionEnum, hideMode?: ErrorHideModeEnum): void\r\n    {\r\n        let options = this.options<TextBoxOptions>();\r\n        if (mode == null) mode = ErrorModeEnum.Tooltip;\r\n        if (position == null) position = ErrorPositionEnum.Right;\r\n        if (hideMode == null) hideMode = ErrorHideModeEnum.OnAction;\r\n        if (text == null) text = \"\";\r\n\r\n        if (!(puma(this.element()).hasClass(\"vrTextBoxError\")))\r\n            puma(this.element()).width(puma(this.element()).width() - 4);\r\n\r\n        puma(this.element()).addClass(\"vrTextBoxError\");\r\n        this._hideErrorMode = hideMode;\r\n\r\n        let errorIcon = puma(this.container()).find(\".vrTextBoxErrorIcon\")[0];\r\n        if (errorIcon == null)\r\n            errorIcon = puma(\"<i class='\" + IconClassLight.TriangleExclamation + \" vrTextBoxErrorIcon'></i>\").vrInsertAfterPuma(this.element())[0];\r\n        puma(errorIcon).show();\r\n\r\n        if (mode == ErrorModeEnum.Tooltip)\r\n        {\r\n            //#region Tooltip\r\n            let spanError = puma(\"<span class='vrTextBoxErrorTooltip vrErrorTooltip'>\" + text + \"</span>\").vrAppendToPuma(errorIcon);\r\n            if (position == ErrorPositionEnum.Right)\r\n                puma(spanError).addClass(\"vrTextBoxErrorTooltipRight\");\r\n            else if (position == ErrorPositionEnum.Bottom)\r\n            {\r\n                puma(spanError).addClass(\"vrTextBoxErrorTooltipBottom\");\r\n                puma(errorIcon).hover(() => puma(spanError)[0].style.cssText += \"left: -\" + ((puma(spanError).outerWidth() / 2) - 7) + \"px;\");\r\n            }\r\n            //#endregion\r\n        }\r\n        else if (mode == ErrorModeEnum.Overlay)\r\n        {\r\n            //#region Overlay\r\n            let spanError = puma(this.container()).find(\".vrTextBoxErrorOverlay\")[0];\r\n            if (spanError == null)\r\n                spanError = puma(\"<span class='vrTextBoxErrorOverlay'>\" + text + \"</span>\").vrInsertAfterPuma(this.element())[0];\r\n            puma(spanError).show();\r\n\r\n            if (position == ErrorPositionEnum.Right)\r\n                puma(spanError).addClass(\"vrTextBoxErrorOverlayRight\");\r\n            else if (position == ErrorPositionEnum.Bottom)\r\n            {\r\n                let labelWidth = (options.label != null && (options.labelSettings!.position == PositionEnum.Left || options.labelSettings!.position == PositionEnum.Right)) ? puma(this.label()).width() : 0;\r\n                puma(spanError).addClass(\"vrTextBoxErrorOverlayBottom\");\r\n                puma(spanError)[0].style.cssText += \"left: Calc(50% - \" + ((puma(spanError).width() / 2) - (labelWidth / 2)) + \"px);\";\r\n            }\r\n\r\n            puma(spanError).html(text);\r\n            //#endregion\r\n        }\r\n        else if (mode == ErrorModeEnum.Solid)\r\n        {\r\n            //#region Solid\r\n            let spanError = puma(this.container()).find(\".vrTextBoxErrorSolid\")[0];\r\n            if (spanError == null)\r\n                spanError = puma(\"<span class='vrTextBoxErrorSolid'>\" + text + \"</span>\").vrInsertAfterPuma(this.element())[0];\r\n            puma(spanError).show();\r\n\r\n            position = ErrorPositionEnum.Bottom;\r\n            puma(spanError).addClass(\"vrTextBoxErrorSolidBottom\");\r\n            puma(spanError).html(text);\r\n\r\n            let labelWidth = (options.label != null && (options.labelSettings!.position == PositionEnum.Left || options.labelSettings!.position == PositionEnum.Right)) ? puma(this.label()).width() : 0;\r\n            puma(spanError)[0].style.cssText += \"left: Calc(50% - \" + ((puma(spanError).width() / 2) - (labelWidth / 2)) + \"px);\";\r\n            puma(this.container())[0].style.cssText += \"margin-bottom: \" + (puma(spanError).height() + 20) + \"px;\";\r\n            //#endregion\r\n        }\r\n    }\r\n\r\n    hideError(): void\r\n    {\r\n        if (puma(this.element()).hasClass(\"vrTextBoxError\"))\r\n        {\r\n            puma(this.element()).removeClass(\"vrTextBoxError\");\r\n            puma(this.element()).width(puma(this.element()).width() + 4);\r\n            puma(this.container()).find(\".vrTextBoxErrorIcon\").hide();\r\n            puma(this.container()).find(\".vrTextBoxErrorTooltip\").hide();\r\n            puma(this.container()).find(\".vrTextBoxErrorOverlay\").hide();\r\n            puma(this.container()).find(\".vrTextBoxErrorSolid\").hide();\r\n            puma(this.container()).css({ \"margin-bottom\": this._originalMarginBottom + \"px\" });\r\n        }\r\n    }\r\n\r\n    hasError()\r\n    {\r\n        return (puma(this.element()).hasClass(\"vrTextBoxError\"));\r\n    }\r\n\r\n    private formatValue(value: string)\r\n    {\r\n        let options = this.getOptions();\r\n\r\n        let decimals = options.decimals;\r\n        let formatSettings = new NumberFormatSettings(options.roundingSettings);\r\n        formatSettings.minimumFractionDigits = decimals;\r\n        formatSettings.maximumFractionDigits = decimals;\r\n\r\n        if (options.roundingSettings != null)\r\n        {\r\n            if (options.roundingSettings.minimumFractionDigits != null) formatSettings.minimumFractionDigits = options.roundingSettings.minimumFractionDigits;\r\n            if (options.roundingSettings.maximumFractionDigits != null) formatSettings.maximumFractionDigits = options.roundingSettings.maximumFractionDigits\r\n\r\n            if (options.roundingSettings.roundingMode == RoundingModeEnum.None)\r\n            {\r\n                if (options.roundingSettings.maximumFractionDigits == null)\r\n                    formatSettings.maximumFractionDigits = 8;\r\n            }\r\n        }\r\n\r\n        switch (options.mode)\r\n        {\r\n            case TextModeEnum.Numeric: value = Number(value).toFixed(decimals); break;\r\n            case TextModeEnum.Currency: value = Number(value).vrToCurrencyString(formatSettings); break;\r\n            case TextModeEnum.Percentage: value = (Number(value) / 100).vrToPercentageString(formatSettings); break;\r\n        }\r\n        return value;\r\n    }\r\n    //#endregion\r\n\r\n    //#endregion\r\n\r\n    //#region Events\r\n    change(): void\r\n    {\r\n        let changeCallBack = this.options<TextBoxOptions>().onChanged;\r\n        if (changeCallBack != null)\r\n        {\r\n            let changeEvent = new TextBoxChangeEvent();\r\n            changeEvent.sender = this;\r\n            changeEvent.value = this.value();\r\n            changeEvent.oldValue = this._oldValue;\r\n            changeCallBack(changeEvent);\r\n        }\r\n    }\r\n    //#endregion\r\n}\r\n\r\nexport class TextBoxMultiline extends TextBox { }\r\nexport class TextBoxNumeric extends TextBox { }\r\nexport class TextBoxPassword extends TextBox { }\r\nexport class TextBoxCurrency extends TextBox { }\r\nexport class TextBoxPercentage extends TextBox { }\r\n//#endregion\r\n\r\n//#region EventClasses\r\nexport class TextBoxEvent extends VrControlsEvent\r\n{\r\n    sender: TextBox;\r\n    value: string | number | null;\r\n}\r\n\r\nclass TextBoxChangeEvent extends TextBoxEvent\r\n{\r\n    oldValue: string | number | null;\r\n}\r\n\r\nclass TextBoxFocusEvent extends TextBoxEvent\r\n{\r\n}\r\n\r\nclass TextBoxBlurEvent extends TextBoxEvent\r\n{\r\n    target: HTMLElement;\r\n}\r\n\r\nclass TextBoxPasteEvent extends TextBoxEvent\r\n{\r\n    pastedValue: string;\r\n}\r\n\r\nclass TextBoxKeyUpPressEvent extends TextBoxEvent\r\n{\r\n    key: string;\r\n    shiftKey: boolean;\r\n    altKey: boolean;\r\n    ctrlKey: boolean;\r\n    enterKey: boolean;\r\n    backSpaceKey: boolean;\r\n    tabKey: boolean;\r\n}\r\n\r\nclass TextBoxKeyUpEvent extends TextBoxKeyUpPressEvent\r\n{\r\n    validForNumeric: boolean;\r\n}\r\n\r\nclass TextBoxKeyDownEvent extends TextBoxKeyUpPressEvent\r\n{\r\n    validForNumeric: boolean;\r\n}\r\n\r\nclass TextBoxEnterKeyEvent extends TextBoxEvent\r\n{\r\n}\r\n//#endregion","import { VrControlOptions, VrControl, VrControlsEvent } from \"../common\";\r\nimport { ControlTypeEnum, ComboBoxTypeEnum, ComboBoxTreeModeEnum, ComboBoxItem, IconClassLight, IconClass, createTextBox, ControlPositionEnum, TextAlignEnum, PositionEnum, PopupSettings, ComboBoxWebServiceSettings, puma, createCheckBox, CheckboxStateEnum, KeyEnum, WebApiModeEnum, shadowRoot, createButton, ComboBoxTemplateEvent, ComboBoxChangeEvent, ComboBoxChangingEvent, ComboBoxClearEvent, SortDirectionEnum, SortByComboSettings, IconClassRegular, icon, IconClassSolid } from \"../vr\";\r\nimport { UtilityManager } from \"../../managers/utilityManager\";\r\nimport { TextBox } from \"./textbox\";\r\nimport { CheckBox } from \"./checkbox\";\r\nimport { Button, ButtonOptions } from \"./button\";\r\n\r\n//#region Options\r\nexport class ComboBoxOptions extends VrControlOptions\r\n{\r\n    mode?: ComboBoxTypeEnum;\r\n    checkboxes?: boolean;\r\n    freeText?: boolean;\r\n    filter?: boolean;\r\n    treeMode?: ComboBoxTreeModeEnum;\r\n    value?: string | number | string[] | number[];\r\n    webService?: ComboBoxWebServiceSettings;\r\n    items?: ComboBoxItem[];\r\n    clearButton?: boolean;\r\n    addButton?: boolean | ButtonOptions;\r\n    nullable?: boolean | ComboBoxNullableItem;\r\n    textAlign?: TextAlignEnum;\r\n    placeholder?: string;\r\n    popupSettings?: PopupSettings;\r\n    allSelectedMessage?: string;\r\n    textEllipsis?: boolean;\r\n    onlyIcon?: boolean;\r\n    icon?: IconClass;\r\n    imageUrl?: string;\r\n    checkAll?: boolean;\r\n    showCheckAll?: boolean | CheckAllSettings;\r\n    tooltip?: string;\r\n    template?: (e: ComboBoxTemplateEvent) => string;\r\n\r\n    onBeforeChange?(e: ComboBoxChangingEvent): void;\r\n    onAfterChange?(e: ComboBoxChangeEvent): void;\r\n    onKeyDown?(e: ComboBoxKeyDownEvent): void;\r\n    onKeyUp?(e: ComboBoxKeyUpEvent): void;\r\n    onEnterKey?(e: ComboBoxEnterKeyEvent): void;\r\n    onClose?(e: ComboBoxCloseEvent): void;\r\n    onItemDataBound?(e: ComboBoxItemDataBoundEvent): void;\r\n    onBlur?(e: ComboBoxBlurEvent): void;\r\n    onClear?(e: ComboBoxClearEvent): void;\r\n    onPaste?(e: ComboBoxPasteEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class ComboBox extends VrControl\r\n{\r\n    private _items: ComboBoxItem[];\r\n    private _popup: HTMLElement;\r\n    private _isDivElement: boolean;\r\n    private _value?: string[] | null;\r\n    private _tempValueWebService?: string[] | null;\r\n    private _txtSearchFilter: TextBox;\r\n    private _chkCheckAll: CheckBox;\r\n    private _typedTextWebService: string | null;\r\n    private _isChecked: boolean;\r\n    private _tempCheckedValue: string | null;\r\n    private _openPopupAfterFocus: boolean;\r\n    private _btnCombo: Button;\r\n    private _divPickerIcon: HTMLElement;\r\n    private _allCheckedOnlyIcon: HTMLElement;\r\n\r\n    private _dictionaryValueLi: Map<string, HTMLElement[]>;\r\n    private _checkedValues: string[];\r\n    private _openedValue: any;\r\n    private _lastAjaxCallGuid: string;\r\n    private _focusWithArrows: boolean;\r\n    private _callbackAfterValue?: null | ((e: ComboBoxChangeEvent) => void);\r\n\r\n    constructor(element: HTMLElement, options?: ComboBoxOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new ComboBoxOptions();\r\n\r\n        if (options.mode == null) options.mode = ComboBoxTypeEnum.Combo;\r\n        if (options.treeMode == null) options.treeMode = ComboBoxTreeModeEnum.AllExpanded;\r\n        if (options.freeText == null) options.freeText = false;\r\n        if (options.checkboxes == null) options.checkboxes = false;\r\n        if (options.filter == null) options.filter = false;\r\n        if (options.clearButton == null) options.clearButton = false;\r\n        if (options.addButton == null) options.addButton = false;\r\n        if (options.textAlign == null) options.textAlign = TextAlignEnum.Left;\r\n        if (options.textEllipsis == null) options.textEllipsis = false;\r\n        if (options.checkAll == null) options.checkAll = false;\r\n\r\n        if (options.showCheckAll == null && options.checkboxes == true) options.showCheckAll = true;\r\n        if (options.showCheckAll != null && typeof (options.showCheckAll) != \"boolean\")\r\n            if (options.showCheckAll.triggerChange == null) options.showCheckAll.triggerChange = true;\r\n\r\n        if (options.popupSettings == null)\r\n            options.popupSettings = { maxHeight: 200, maxWidth: 500 };\r\n        else if (options.popupSettings.maxHeight == null && options.popupSettings.height == null)\r\n            options.popupSettings.maxHeight = 200;\r\n        else if (options.popupSettings.maxWidth == null && options.popupSettings.width == null)\r\n            options.popupSettings.maxWidth = 500;\r\n\r\n        if (options.mode == ComboBoxTypeEnum.DropDown) \r\n        {\r\n            options.checkboxes = false;\r\n            options.freeText = false;\r\n            options.placeholder = undefined;\r\n        }\r\n\r\n        if (options.webService != null || options.freeText) \r\n        {\r\n            options.mode = ComboBoxTypeEnum.Combo;\r\n            options.checkboxes = false;\r\n            options.filter = false;\r\n\r\n            if (options.webService != null)\r\n            {\r\n                options.items = undefined;\r\n                if (options.webService.searchAfterCharsNumber == null) options.webService.searchAfterCharsNumber = 3;\r\n            }\r\n        }\r\n\r\n        if (options.mode == ComboBoxTypeEnum.Combo && !options.checkboxes)\r\n            options.filter = false;\r\n\r\n        if (options.checkboxes === true) \r\n        {\r\n            options.mode = ComboBoxTypeEnum.Combo;\r\n            options.nullable = false;\r\n        }\r\n\r\n        if (options.onlyIcon == null) options.onlyIcon = false;\r\n        if (options.width == null) options.width = (options.onlyIcon) ? 40 : 200;\r\n        //#endregion\r\n\r\n        super(element, options, ControlTypeEnum.ComboBox);\r\n        puma(element).attr(\"type\", \"text\");\r\n        puma(element).attr(\"autocomplete\", \"off\");\r\n\r\n        this._isDivElement = puma(this.element()).is(\"div\");\r\n\r\n        this._checkedValues = [];\r\n        this._openPopupAfterFocus = true;\r\n\r\n        this.items((options.items != null) ? options.items : [], false);\r\n\r\n        //#region Mode\r\n        switch (options.mode)\r\n        {\r\n            case ComboBoxTypeEnum.Combo: puma(this.element()).addClass(\"vrComboBox\"); break;\r\n            case ComboBoxTypeEnum.DropDown: puma(this.element()).addClass(\"vrComboBoxDropDown\"); break;\r\n        }\r\n\r\n        if (options.mode == ComboBoxTypeEnum.Combo)\r\n        {\r\n            if (this._isDivElement)\r\n                puma(this.element()).addClass(\"vrComboBoxCheckbox\");\r\n            else\r\n            {\r\n                puma(this.element()).addClass(\"vrComboBox\");\r\n                if (options.placeholder != null)\r\n                    (this.element() as HTMLInputElement).placeholder = options.placeholder;\r\n            }\r\n        }\r\n\r\n        if (options.mode == ComboBoxTypeEnum.DropDown || options.checkboxes)\r\n        {\r\n            if (!this._isDivElement)\r\n                throw Error(\"L'element html deve essere un div\");\r\n        }\r\n        else if (this._isDivElement)\r\n            throw Error(\"L'element html deve essere un input\");\r\n        //#endregion\r\n\r\n        //#region Tooltip\r\n        if (options.tooltip != null)\r\n            puma(this.element()).attr(\"title\", options.tooltip);\r\n        //#endregion\r\n\r\n        //#region Picker icon\r\n        let pickerIcon = UtilityManager.createIcon(IconClassLight.CaretDown);\r\n        let classPickerIcon = \"vrDivPickerIconComboBox\";\r\n        if (this._isDivElement)\r\n            classPickerIcon = \"vrDivPickerIconComboBoxDropDown\";\r\n\r\n        this._divPickerIcon = puma(\"<div class='\" + classPickerIcon + \"'></div>\").vrAppendToPuma(this.container())[0];\r\n        puma(this._divPickerIcon).vrAppendPuma(pickerIcon);\r\n        puma(this._divPickerIcon).click(() => \r\n        {\r\n            if (puma(\".comboBox_divPopup\").is(\":visible\"))\r\n                this.close();\r\n            else\r\n            {\r\n                this.open();\r\n                this.focus();\r\n            }\r\n        });\r\n\r\n        puma(this._divPickerIcon).on(\"mouseenter\", (e: JQuery.MouseEnterEvent) => puma(this.element()).addClass(\"hoverClass\"))\r\n        puma(this._divPickerIcon).on(\"mouseleave\", (e: JQuery.MouseLeaveEvent) => puma(this.element()).removeClass(\"hoverClass\"))\r\n\r\n        if (options.label != null && options.labelSettings!.position == PositionEnum.Top)\r\n            this._divPickerIcon.style.cssText += \"bottom: 1px; top: inherit;\";\r\n        //#endregion\r\n\r\n        //#region Clear button\r\n        let clearIcon = UtilityManager.createIcon(IconClassRegular.Xmark);\r\n        let divClearIcon = puma(\"<div class='vrDivComboBoxClearIcon' style='display: none;'></div>\").vrAppendToPuma(this.container())[0];\r\n        if (options.addButton !== false)\r\n            divClearIcon.style.cssText += \"right: 57px;\";\r\n\r\n        puma(divClearIcon).vrAppendPuma(clearIcon);\r\n        puma(divClearIcon).click((e: any) => \r\n        {\r\n            if (this.enabled())\r\n                this.clear(true);\r\n        });\r\n        //#endregion\r\n\r\n        //#region Button\r\n        if (options.addButton !== false)\r\n        {\r\n            if (options.addButton === true) options.addButton = new ButtonOptions();\r\n            if (options.addButton.icon == null) options.addButton.icon = IconClassLight.Plus;\r\n            options.addButton.cssContainer = options.addButton.cssContainer + \"; position: absolute; right: 0px; bottom: 0px;\";\r\n            options.addButton.css = options.addButton.css + \"; border-top-left-radius: 0px; border-bottom-left-radius: 0px; height: 26px;\";\r\n            if (options.addButton.enable == null) options.addButton.enable = options.enable;\r\n\r\n            this._btnCombo = createButton(options.addButton, this.container());\r\n\r\n            if (options.addButton.visible !== false)\r\n                this._divPickerIcon.classList.add(\"vrComboDivPickerWithButton\");\r\n        }\r\n        //#endregion\r\n\r\n        //#region Value\r\n        if (options.value != null)\r\n            this.value(options.value, false);\r\n        //#endregion\r\n\r\n        //#region Text align\r\n        switch (options.textAlign)\r\n        {\r\n            case TextAlignEnum.Left: this.element().style.cssText += \"text-align: left;\"; break;\r\n            case TextAlignEnum.Center: this.element().style.cssText += \"text-align: center;\"; break;\r\n            case TextAlignEnum.Right: this.element().style.cssText += \"text-align: right;\"; break;\r\n        }\r\n        //#endregion\r\n\r\n        //#region Icon/ImageUrl\r\n        let iconCombo = null;\r\n        if (options.icon != null)\r\n        {\r\n            let style = \"\";\r\n            if (this.options().label == null)\r\n                style = \"margin-left: 6px; margin-top: -1px;\";\r\n            else\r\n            {\r\n                let labelWidth = puma(this.container()).find(\".vrLabel\").width();\r\n                if (options.labelSettings != null && options.labelSettings.width != null)\r\n                    labelWidth = options.labelSettings.width;\r\n\r\n                if (this.options().labelSettings!.position == PositionEnum.Left || this.options().labelSettings!.position == PositionEnum.Right)\r\n                    style = \"margin-left: \" + (labelWidth + 10) + \"px; margin-top: -1px;\";\r\n                else\r\n                    style = \"left: 6px; bottom: 6px;\";\r\n            }\r\n\r\n            iconCombo = puma(\"<i class='\" + options.icon + \"' style='cursor: pointer; font-size: 14px; position: absolute;\" + style + \"'></i>\");\r\n            puma(this.element()).vrBeforePuma(iconCombo);\r\n            this.element().style.cssText += \"text-indent: 18px;\";\r\n\r\n            if (options.tooltip != null)\r\n                puma(iconCombo).attr(\"title\", options.tooltip);\r\n\r\n            puma(iconCombo).click(() => \r\n            {\r\n                if (puma(\".comboBox_divPopup\").is(\":visible\"))\r\n                    this.close();\r\n                else\r\n                {\r\n                    this.open();\r\n                    this.focus();\r\n                }\r\n            });\r\n\r\n            puma(iconCombo).on(\"mouseenter\", (e: JQuery.MouseEnterEvent) => puma(this.element()).addClass(\"hoverClass\"))\r\n            puma(iconCombo).on(\"mouseleave\", (e: JQuery.MouseLeaveEvent) => puma(this.element()).removeClass(\"hoverClass\"))\r\n        }\r\n        else if (options.imageUrl != null)\r\n            this.element().style.cssText += \"background-image: url(\" + options.imageUrl + \"); background-position: 4px 5px; background-repeat: no-repeat; text-indent: 13px;\";\r\n        //#endregion\r\n\r\n        //#region Only icons\r\n        if (options.onlyIcon && options.icon != null)\r\n            this._allCheckedOnlyIcon = icon(IconClassSolid.Check, iconCombo, { css: \"display: none; position: absolute; z-index: 2; font-size: 9px; top: -5px; right: -7px;\" });\r\n        //#endregion\r\n\r\n        //#region Check all\r\n        if (options.checkAll)\r\n            this.checkAll(false);\r\n        //#endregion\r\n\r\n        //#region Searching text\r\n        if (options.mode == ComboBoxTypeEnum.Combo)\r\n        {\r\n            puma(this.element()).keydown((e: JQuery.KeyDownEvent) =>\r\n            {\r\n                this.open();\r\n                if (options!.onKeyDown != null)\r\n                {\r\n                    let onKeyDownEvent = new ComboBoxKeyDownEvent();\r\n                    onKeyDownEvent.sender = this;\r\n                    onKeyDownEvent.event = e;\r\n                    options!.onKeyDown(onKeyDownEvent);\r\n\r\n                    if (onKeyDownEvent.isDefaultPrevented())\r\n                        return;\r\n                }\r\n\r\n                if (options!.onEnterKey != null && e.key == KeyEnum.Enter)\r\n                {\r\n                    let onEnterKeyEvent = new ComboBoxEnterKeyEvent();\r\n                    onEnterKeyEvent.sender = this;\r\n                    onEnterKeyEvent.value = this.value();\r\n                    options!.onEnterKey(onEnterKeyEvent);\r\n\r\n                    if (onEnterKeyEvent.isDefaultPrevented())\r\n                        return;\r\n                }\r\n\r\n                if (e.key != KeyEnum.Tab)\r\n                    this.limitInputByDataSource((this.element() as HTMLInputElement), e);\r\n\r\n                let text = (this.element() as HTMLInputElement).value;\r\n                let selectionStart = (this.element() as HTMLInputElement).selectionStart;\r\n                let selectionEnd = (this.element() as HTMLInputElement).selectionEnd;\r\n                if (selectionEnd != null && selectionStart != null && ((selectionEnd - selectionStart) == text.length) && e.key == KeyEnum.Backspace)\r\n                {\r\n                    this.value(null);\r\n                    this.change();\r\n                }\r\n                else if (e.key == KeyEnum.Backspace && text.length == 0)\r\n                    this.change();\r\n            });\r\n\r\n            let timeout = 0;\r\n            puma(this.element()).keyup((e: JQuery.KeyUpEvent) =>\r\n            {\r\n                this.open();\r\n                if (e.key == KeyEnum.ArrowRight || e.key == KeyEnum.ArrowLeft || e.key == KeyEnum.Control || e.ctrlKey)\r\n                {\r\n                    if (!(e.key == \"v\" && e.ctrlKey))\r\n                    {\r\n                        e.preventDefault();\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                if (options!.onKeyUp != null)\r\n                {\r\n                    let onKeyUpEvent = new ComboBoxKeyUpEvent();\r\n                    onKeyUpEvent.sender = this;\r\n                    onKeyUpEvent.event = e;\r\n                    options!.onKeyUp(onKeyUpEvent);\r\n\r\n                    if (onKeyUpEvent.isDefaultPrevented())\r\n                        return;\r\n                }\r\n\r\n                if (e.key == KeyEnum.ArrowDown && !options!.checkboxes)\r\n                {\r\n                    let li = null;\r\n                    if (this.value() == null)\r\n                        li = puma(this._popup).find(\"li:visible\").first();\r\n                    else\r\n                        li = puma(this._dictionaryValueLi.get(this.value<string>()!)).next();\r\n\r\n                    li.focus();\r\n\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n\r\n                if (e.key == KeyEnum.ArrowUp && !options!.checkboxes)\r\n                {\r\n                    let li = null;\r\n                    if (this.value() == null)\r\n                        li = puma(this._popup).find(\"li:visible\").first();\r\n                    else\r\n                        li = puma(this._dictionaryValueLi.get(this.value<string>()!)).prev();\r\n\r\n                    li.focus();\r\n\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n\r\n                if (e.key == KeyEnum.Enter)\r\n                    return;\r\n                else\r\n                    this._value = null;\r\n\r\n                if (e.key != KeyEnum.Tab)\r\n                    this.limitInputByDataSource((this.element() as HTMLInputElement), e);\r\n\r\n                clearTimeout(timeout);\r\n                timeout = window.setTimeout(() =>\r\n                {\r\n                    let text = (this.element() as HTMLInputElement).value;\r\n                    if (options!.webService == null)\r\n                    {\r\n                        let filteredItems = this.filter(text, this.element());\r\n                        if (e.key == \"v\" && e.ctrlKey && filteredItems.length == 1)\r\n                        {\r\n                            this.value(filteredItems[0].value);\r\n                            this.close();\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        if (text == \"\")\r\n                        {\r\n                            this._items = [];\r\n                            puma(this._popup).find(\"ul\").remove();\r\n                            return;\r\n                        }\r\n                        else\r\n                        {\r\n                            if (text.length < options!.webService!.searchAfterCharsNumber!)\r\n                                return;\r\n\r\n                            let selectionStart = (this.element() as HTMLInputElement).selectionStart;\r\n                            let selectionEnd = (this.element() as HTMLInputElement).selectionEnd;\r\n                            if (!(selectionStart == 0 && selectionEnd == (this.element() as HTMLInputElement).value.length))\r\n                                this.doAjaxCall(text);\r\n                        }\r\n                    }\r\n                }, 300);\r\n            });\r\n\r\n            puma(this.element()).on(\"paste\", (e: any) =>\r\n            {\r\n                this.open();\r\n                let pastedValue = e.originalEvent.clipboardData.getData(\"text\");\r\n\r\n                timeout = window.setTimeout(() =>\r\n                {\r\n                    if (options!.onPaste != null)\r\n                    {\r\n                        let event = new ComboBoxPasteEvent();\r\n                        event.sender = this;\r\n                        event.pastedValue = pastedValue;\r\n                        event.value = this.value() + pastedValue;\r\n                        event.event = e;\r\n                        options!.onPaste(event);\r\n\r\n                        if (event.isDefaultPrevented())\r\n                        {\r\n                            e.preventDefault();\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    let text = (this.element() as HTMLInputElement).value;\r\n                    if (options!.webService == null)\r\n                    {\r\n                        let filteredItems = this.filter(text, this.element());\r\n                        if (e.key == \"v\" && e.ctrlKey && filteredItems.length == 1)\r\n                        {\r\n                            this.value(filteredItems[0].value);\r\n                            this.close();\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        if (text == \"\")\r\n                        {\r\n                            this._items = [];\r\n                            puma(this._popup).find(\"ul\").remove();\r\n                            return;\r\n                        }\r\n                        else\r\n                        {\r\n                            let selectionStart = (this.element() as HTMLInputElement).selectionStart;\r\n                            let selectionEnd = (this.element() as HTMLInputElement).selectionEnd;\r\n                            if (!(selectionStart == 0 && selectionEnd == (this.element() as HTMLInputElement).value.length))\r\n                                this.doAjaxCall(text);\r\n                        }\r\n                    }\r\n                }, 300);\r\n            })\r\n        }\r\n        //#endregion\r\n\r\n        //#region Click/Focus\r\n        if (!this._isDivElement)\r\n        {\r\n            puma(this.element()).focus((e: any) => \r\n            {\r\n                (this.element() as HTMLInputElement).select();\r\n                if (this._openPopupAfterFocus)\r\n                    this.open();\r\n\r\n                this._openPopupAfterFocus = true;\r\n            });\r\n            puma(this.element()).blur((e: any) => window.setTimeout(() => \r\n            {\r\n                if (this.value() == null && puma(this._popup).find(\".keydownFocus\").length == 0)\r\n                    this.filter(\"\", this.element());\r\n\r\n                if (this._popup != null && !this._focusWithArrows)\r\n                    this.close();\r\n\r\n                if (options!.onBlur != null)\r\n                {\r\n                    let blurEvent = new ComboBoxBlurEvent();\r\n                    blurEvent.sender = this;\r\n                    options!.onBlur(blurEvent);\r\n                }\r\n            }, 200));\r\n        }\r\n        else\r\n            puma(this.element()).click((e: any) => { (puma(this._popup).is(\":visible\")) ? this.close() : this.open() });\r\n        //#endregion\r\n\r\n        let baseListener = (shadowRoot() != null) ? shadowRoot() : document;\r\n        baseListener!.addEventListener(\"scroll\", (e) =>\r\n        {\r\n            if (!puma(e.target).hasClass(\"comboBox_divPopup\") && puma(this._popup).is(\":visible\"))\r\n            {\r\n                this.blur()\r\n                this.close();\r\n            }\r\n        }, true);\r\n    }\r\n\r\n    //#region Methods\r\n    close(): void\r\n    {\r\n        let options = this.getOptions();\r\n        puma(this._popup).remove();\r\n        (this._popup as any) = null;\r\n        this._focusWithArrows = false;\r\n        this._dictionaryValueLi = new Map<string, HTMLElement[]>();\r\n\r\n        if (this._isDivElement)\r\n            puma(\"#vrComboBoxBackground_\" + this.element().id).remove();\r\n\r\n        if (options.onClose != null)\r\n        {\r\n            let closeEvent = new ComboBoxCloseEvent();\r\n            closeEvent.sender = this;\r\n            closeEvent.beforeValue = this._openedValue;\r\n            closeEvent.afterValue = this.value();\r\n            options.onClose(closeEvent);\r\n        }\r\n\r\n        if (options.mode == ComboBoxTypeEnum.Combo && this._value == null)\r\n        {\r\n            if (options.freeText)\r\n                this.valueInternal((this.element() as HTMLInputElement).value);\r\n            else\r\n                (this.element() as HTMLInputElement).value = \"\";\r\n        }\r\n    }\r\n\r\n    open(): void\r\n    {\r\n        let options = this.getOptions();\r\n        if (!this.enabled())\r\n            return;\r\n\r\n        if (puma(this._popup).is(\":visible\"))\r\n            return;\r\n\r\n        if (this._popup == null)\r\n            this._popup = puma(\"<div class='comboBox_divPopup vrPopup' id='\" + this.element().id + \"_divPopup'></div>\").vrAppendToPuma((shadowRoot() != null) ? shadowRoot() : document.body)[0];\r\n\r\n        if (this.getRootItems().length == 0)\r\n            puma(this._popup).addClass(\"vrComboBoxFlat\");\r\n        else\r\n            puma(this._popup).removeClass(\"vrComboBoxFlat\");\r\n\r\n        window.setTimeout(() =>\r\n        {\r\n            this.drawDataSource();\r\n\r\n            if (this._isDivElement)\r\n            {\r\n                let zIndex = puma(this._popup).css(\"z-index\") - 1;\r\n                let background = puma(\"<div class='vrWindowBackground' id='vrComboBoxBackground_\" + this.element().id + \"' style='background-color: transparent; display: block; z-index: \" + zIndex + \";'></div>\").vrAppendToPuma((shadowRoot() != null) ? shadowRoot() : document.body)[0];\r\n                puma(background).click((e: any) => this.close());\r\n            }\r\n\r\n            //#region Popup\r\n            let minWidth = puma(this.element()).outerWidth();\r\n            if (options.popupSettings!.width != null && minWidth > options.popupSettings!.width)\r\n                minWidth = options.popupSettings!.width;\r\n\r\n            if (options.popupSettings!.minWidth != null)\r\n                minWidth = options.popupSettings!.minWidth;\r\n\r\n            if (minWidth < 100)\r\n                minWidth = 100;\r\n\r\n            if (options.popupSettings != null)\r\n                options.popupSettings.minWidth = minWidth;\r\n            else\r\n                this._popup.style.cssText += \"min-width: \" + minWidth + \"px;\";\r\n\r\n            super.settingPopup(this._popup, options.popupSettings!);\r\n            //#endregion\r\n\r\n            //#region Check all\r\n            if (options.showCheckAll)\r\n            {\r\n                this._chkCheckAll = createCheckBox(\r\n                    {\r\n                        addToControlList: false,\r\n                        text: \"Seleziona tutti...\",\r\n                        width: \"100%\",\r\n                        cssContainer: \"padding-bottom: 5px; margin-bottom: 5px; border-bottom: solid 1px #d0d0d0;\",\r\n                        class: \"vrComboBoxSelectAll\",\r\n                        enable: options.enable,\r\n                        onCheck: (e) => \r\n                        {\r\n                            let triggerChange = true;\r\n                            if (typeof (options!.showCheckAll) == \"boolean\")\r\n                                triggerChange = options!.showCheckAll;\r\n                            else\r\n                                triggerChange = options!.showCheckAll!.triggerChange!;\r\n\r\n                            if (e.checked)\r\n                                this.checkAll(triggerChange);\r\n                            else\r\n                                this.unCheckAll(triggerChange);\r\n                        }\r\n                    }, this._popup, ControlPositionEnum.Before);\r\n            }\r\n            //#endregion\r\n\r\n            //#region Filter\r\n            if (options.filter === true && puma(this._popup).find(\".vrComboBoxFilter\").length == 0)\r\n            {\r\n                let timeout = 0;\r\n                this._txtSearchFilter = createTextBox(\r\n                    {\r\n                        width: \"100%\",\r\n                        icon: IconClassLight.Search,\r\n                        placeholder: \"Cerca...\",\r\n                        class: \"vrComboBoxFilter\",\r\n                        cssContainer: \"margin-bottom: 5px; margin-top: 5px;\",\r\n                        onKeyDown: (e) =>\r\n                        {\r\n                            this.limitInputByDataSource(e.sender.element() as HTMLInputElement, e);\r\n                        },\r\n                        onKeyUp: (e) =>\r\n                        {\r\n                            this.limitInputByDataSource(e.sender.element() as HTMLInputElement, e);\r\n                            clearTimeout(timeout);\r\n                            timeout = window.setTimeout(() => \r\n                            {\r\n                                let text: string = e.sender.value();\r\n                                this.filter(text, this._txtSearchFilter.element());\r\n                            }, 100);\r\n                        }\r\n                    }, this._popup, ControlPositionEnum.Before);\r\n            }\r\n\r\n            if (this._txtSearchFilter != null)\r\n                puma(this._txtSearchFilter.element()).focus();\r\n            //#endregion  \r\n\r\n            //#region Value\r\n            if (options.webService == null)\r\n                this.value(this.value(), false);\r\n\r\n            this._openedValue = this.value();\r\n\r\n            if (!options.checkboxes)\r\n            {\r\n                let liValue = this._dictionaryValueLi.get(this.value<string>()!);\r\n                if (liValue != null)\r\n                {\r\n                    puma(liValue).addClass(\"vrComboBoxSelectedComboValue\");\r\n\r\n                    let topPosition = puma(liValue).offset().top - puma(this._popup).offset().top - (puma(this._popup).height() / 2);\r\n                    if (topPosition < 0) topPosition = 0;\r\n                    this._popup.scrollTo(0, topPosition);\r\n                }\r\n            }\r\n            //#endregion\r\n        });\r\n    }\r\n\r\n    private limitInputByDataSource(element: HTMLInputElement, e: any): void\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.webService != null || options.freeText === true)\r\n            return;\r\n\r\n        let filtered = this.getFilteredArrayByInputText(element.value);\r\n        if (filtered.length == 0)\r\n        {\r\n            let newText = element.value;\r\n            element.value = newText.substring(0, newText.length - 1);\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n    }\r\n\r\n    private filter(text: string, element: HTMLElement)\r\n    {\r\n        let selectionStart = (element as HTMLInputElement).selectionStart;\r\n        let selectionEnd = (element as HTMLInputElement).selectionEnd;\r\n        let itemsToReturn: ComboBoxItem[] = [];\r\n\r\n        if (text == \"\" || text == null)\r\n        {\r\n            puma(this._popup).find(\"li\").show();\r\n            if (this.getOptions().webService != null)\r\n            {\r\n                this._items = [];\r\n                puma(this._popup).find(\".vrComboBoxUl\").remove();\r\n            }\r\n        }\r\n        else if (!(selectionStart == 0 && selectionEnd == (element as HTMLInputElement).value.length))\r\n        {\r\n            puma(this._popup).find(\"li\").hide();\r\n\r\n            let items = this.getFilteredArrayByInputText(text);\r\n            itemsToReturn = items;\r\n\r\n            let values = items.map(k => k.value);\r\n            let texts = items.map(k => UtilityManager.htmlDecode(k.text));\r\n\r\n            for (let item of items)\r\n            {\r\n                let parentValue = item.parentValue;\r\n                while (parentValue != null)\r\n                {\r\n                    let parentItem = this.items().filter(k => k.value == parentValue)[0];\r\n                    if (!values.includes(parentValue))\r\n                    {\r\n                        values.push(parentValue);\r\n                        texts.push(UtilityManager.htmlDecode(parentItem.text));\r\n                    }\r\n                    parentValue = (parentItem != null) ? parentItem.parentValue : undefined;\r\n                    if (parentValue == parentItem.value)\r\n                        parentValue = undefined;\r\n                }\r\n            }\r\n\r\n            for (let comboItemText of Array.from<HTMLSpanElement>(puma(this._popup).find(\".vrComboBoxItemText\")))\r\n            {\r\n                if (texts.includes(String(puma(comboItemText).attr(\"text\")).trim()))\r\n                {\r\n                    puma(comboItemText).closest(\".vrComboBoxLi\").show();\r\n                    puma(comboItemText).closest(\".vrComboBoxLi\").closest(\".vrComboBoxUl\").show();\r\n\r\n                    puma(comboItemText).closest(\".vrComboBoxLi\").find(\".vrComboBoxDivIconExpand\").removeClass(\"caret-right caret-down\");\r\n                    puma(comboItemText).closest(\".vrComboBoxLi\").find(\".vrComboBoxDivIconExpand\").children(\"i\").removeClass(IconClassLight.CaretRight + \" \" + IconClassLight.CaretDown);\r\n                    puma(comboItemText).closest(\".vrComboBoxLi\").find(\".vrComboBoxDivIconExpand\").addClass(\"caret-down\");\r\n                    puma(comboItemText).closest(\".vrComboBoxLi\").find(\".vrComboBoxDivIconExpand\").children(\"i\").addClass(IconClassLight.CaretDown);\r\n                }\r\n            }\r\n        }\r\n        return itemsToReturn;\r\n    }\r\n\r\n    private drawDataSource(searchedText?: string | null): void\r\n    {\r\n        puma(this._popup).find(\".vrComboBoxUl\").remove();\r\n\r\n        let items = this.items();\r\n        if (searchedText != null)\r\n            items = this.getFilteredArrayByInputText(searchedText);\r\n\r\n        if (items.length == 1 && items[0] == null)\r\n            return;\r\n\r\n        this._dictionaryValueLi = new Map<string, HTMLElement[]>();\r\n        items = items.filter(k => k.parentValue == null);\r\n\r\n        if (this._popup != null)\r\n            this.drawItems(items, this._popup);\r\n    }\r\n\r\n    private drawItems(items: ComboBoxItem[], elementToAppend: HTMLElement): void\r\n    {\r\n        let options = this.getOptions();\r\n        if (items.length == 0)\r\n            return;\r\n\r\n        let ul = puma(\"<ul class='vrComboBoxUl'></ul>\").vrAppendToPuma(elementToAppend);\r\n        for (let item of items)\r\n        {\r\n            if (item.value == null)\r\n                item.value = item.text;\r\n\r\n            let children = this.getOnlyChildrenItems(item);\r\n\r\n            let li = puma(\"<li class='vrComboBoxLi' tabindex='-1'></li>\").vrAppendToPuma(ul);\r\n            if (this._dictionaryValueLi.has(String(item.value)))\r\n            {\r\n                let actualLiList = this._dictionaryValueLi.get(String(item.value))!;\r\n                actualLiList.push(li[0]);\r\n                this._dictionaryValueLi.set(String(item.value), actualLiList);\r\n            }\r\n            else\r\n                this._dictionaryValueLi.set(String(item.value), [li[0]]);\r\n\r\n            //#region Key support\r\n            if (!options.checkboxes)\r\n            {\r\n                puma(li).on(\"focusin\", (e: JQuery.FocusEvent) => \r\n                {\r\n                    this._focusWithArrows = true;\r\n                    puma(this._popup).find(\".vrComboBoxSelectedComboValue\").removeClass(\"vrComboBoxSelectedComboValue\");\r\n\r\n                    if (children.length == 0)\r\n                        puma(e.target).addClass(\"vrComboBoxSelectedComboValue keydownFocus\");\r\n                });\r\n                puma(li).on(\"keydown\", (e: JQuery.KeyDownEvent) =>\r\n                {\r\n                    if (e.key == KeyEnum.ArrowDown)\r\n                    {\r\n                        let next = puma(e.currentTarget).next();\r\n                        if (next.length == 0)\r\n                            return;\r\n\r\n                        puma(this._popup).find(\".vrComboBoxSelectedComboValue\").removeClass(\"vrComboBoxSelectedComboValue\");\r\n                        while (!next.is(\":visible\"))\r\n                            next = puma(next).next();\r\n\r\n                        next.focus();\r\n                    }\r\n                    else if (e.key == KeyEnum.ArrowUp)\r\n                    {\r\n                        let prev = puma(e.currentTarget).prev();\r\n                        if (prev.length == 0)\r\n                            return;\r\n\r\n                        puma(this._popup).find(\".vrComboBoxSelectedComboValue\").removeClass(\"vrComboBoxSelectedComboValue\");\r\n                        while (!prev.is(\":visible\"))\r\n                            prev = puma(prev).prev();\r\n\r\n                        prev.focus();\r\n                    }\r\n                    else if (e.key == KeyEnum.Enter)\r\n                        puma(e.currentTarget).find(\".vrComboBoxItemText\").mousedown();\r\n                });\r\n            }\r\n            //#endregion\r\n\r\n            //#region Tree mode\r\n            if (options.treeMode == ComboBoxTreeModeEnum.AllCollapsed)\r\n            {\r\n                if (item.parentValue != null)\r\n                    puma(li).closest(\".vrComboBoxUl\").hide();\r\n            }\r\n            else if (options.treeMode == ComboBoxTreeModeEnum.OnlyFirstLevelExpanded)\r\n            {\r\n                if (puma(li).parents(\".vrComboBoxUl\").length > 2)\r\n                    puma(li).closest(\".vrComboBoxUl\").hide();\r\n            }\r\n            //#endregion\r\n\r\n            if (children.length > 0)\r\n            {\r\n                //#region Icon expand/collapse\r\n                let iconClassForDiv = \"\";\r\n                let iconClass = IconClassLight.CaretRight;\r\n                if (options.treeMode == ComboBoxTreeModeEnum.AllCollapsed)\r\n                {\r\n                    iconClass = IconClassLight.CaretRight;\r\n                    iconClassForDiv = \"caret-right\";\r\n                }\r\n                else if (options.treeMode == ComboBoxTreeModeEnum.OnlyFirstLevelExpanded)\r\n                {\r\n                    if (puma(li).parents(\".vrComboBoxUl\").length == 1)\r\n                    {\r\n                        iconClass = IconClassLight.CaretDown;\r\n                        iconClassForDiv = \"caret-down\";\r\n                    }\r\n                    else\r\n                    {\r\n                        iconClass = IconClassLight.CaretRight;\r\n                        iconClassForDiv = \"caret-right\";\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    iconClass = IconClassLight.CaretDown;\r\n                    iconClassForDiv = \"caret-down\";\r\n                }\r\n\r\n                let divIcon = puma(\"<div class='vrComboBoxDivIconExpand \" + iconClassForDiv + \"'></div>\").vrAppendToPuma(li);\r\n                puma(UtilityManager.createIcon(iconClass)).vrAppendToPuma(divIcon);\r\n                puma(divIcon).click((e: any) =>\r\n                {\r\n                    puma(e.currentTarget).children(\"i\").removeClass(IconClassLight.CaretRight + \" \" + IconClassLight.CaretDown);\r\n                    puma(e.currentTarget).removeClass(\"caret-right caret-down\");\r\n\r\n                    let ulChildren = puma(e.currentTarget).siblings(\".vrComboBoxUl\");\r\n                    if (ulChildren.first().is(\":visible\"))\r\n                    {\r\n                        ulChildren.hide();\r\n                        puma(e.currentTarget).children(\"i\").addClass(IconClassLight.CaretRight);\r\n                        puma(e.currentTarget).addClass(\"caret-right\");\r\n                    }\r\n                    else\r\n                    {\r\n                        ulChildren.show();\r\n                        puma(e.currentTarget).children(\"i\").addClass(IconClassLight.CaretDown);\r\n                        puma(e.currentTarget).addClass(\"caret-down\");\r\n                    }\r\n                });\r\n                //#endregion\r\n            }\r\n\r\n            let comboItem = puma(\"<div class='vrComboBoxDivItemContainer'></div>\").vrAppendToPuma(li);\r\n            if (options.checkboxes)\r\n            {\r\n                let checkBox = puma(\"<input type='checkbox' class='vrCheckBox'></input>\").vrAppendToPuma(comboItem);\r\n                puma(checkBox).click((e: JQuery.ClickEvent) =>\r\n                {\r\n                    //#region Checkboxes\r\n                    let isChecked = e.currentTarget.checked;\r\n                    let value = item.value;\r\n\r\n                    if (isChecked)\r\n                        this._checkedValues.push(value);\r\n                    else\r\n                        this._checkedValues.vrDelete(value);\r\n\r\n                    let targetItem = this.items().filter(k => k.value == value)[0];\r\n                    if (targetItem != null && this.getOnlyChildrenItems(targetItem).length > 0)\r\n                    {\r\n                        let childrenItems = this.getAllChildrenItems(targetItem);\r\n                        if (e.currentTarget.checked)\r\n                            this._checkedValues.vrPushRange(childrenItems.map(k => k.value));\r\n\r\n                        let childrenCheckboxes = this.getChildrenCheckboxElements<JQuery>(targetItem, false);\r\n                        puma(childrenCheckboxes).prop(\"checked\", e.currentTarget.checked);\r\n\r\n                        for (let childItem of childrenItems)\r\n                        {\r\n                            if (!e.currentTarget.checked)\r\n                                this._checkedValues.vrDelete(childItem.value);\r\n                        }\r\n                    }\r\n                    //#endregion\r\n\r\n                    this._isChecked = e.currentTarget.checked;\r\n\r\n                    if (!this._isChecked)\r\n                        this._checkedValues.vrDelete(item.value);\r\n\r\n                    //#region Other checkboxes same value\r\n                    let comboItemTexts: HTMLSpanElement[] = [];\r\n                    let liList = this._dictionaryValueLi.get(String(item.value))!;\r\n                    for (let li of liList)\r\n                    {\r\n                        let comboItemText = puma(li).find(\".vrComboBoxItemText\")[0];\r\n                        comboItemTexts.push(comboItemText);\r\n                    }\r\n\r\n                    for (let comboItemText of comboItemTexts)\r\n                    {\r\n                        if (comboItemText == null)\r\n                            continue;\r\n\r\n                        let checkBox = puma(comboItemText).siblings(\"input\");\r\n                        puma(checkBox).removeClass(\"indeterminateVrCheckbox\");\r\n                        puma(checkBox).prop(\"checked\", this._isChecked);\r\n                        checkBox[0].checked = this._isChecked;\r\n                    }\r\n\r\n                    for (let otherItem of this.items().filter(k => k.value == item.value))\r\n                    {\r\n                        let parentChecked = this.manageCheckParent(otherItem);\r\n                        if (!parentChecked && otherItem.parentValue != null)\r\n                            this._checkedValues.vrDelete(otherItem.parentValue);\r\n                        else if (parentChecked && otherItem.parentValue != null && !this._checkedValues.includes(String(otherItem.parentValue)))\r\n                            this._checkedValues.push(String(otherItem.parentValue));\r\n                    }\r\n                    //#endregion\r\n\r\n                    let parentChecked = this.manageCheckParent(item);\r\n                    if (!parentChecked && item.parentValue != null)\r\n                        this._checkedValues.vrDelete(item.parentValue);\r\n                    else if (parentChecked && item.parentValue != null && !this._checkedValues.includes(String(item.parentValue)))\r\n                        this._checkedValues.push(String(item.parentValue));\r\n\r\n                    this._tempCheckedValue = String(item.value);\r\n                    this._checkedValues = this._checkedValues.vrDistinct();\r\n                    this.valueInternal(this._checkedValues);\r\n                    this._tempCheckedValue = null;\r\n                });\r\n            }\r\n\r\n            let rowText = item.text.replace(/'/g, \"&#39;\");\r\n            if (options.template != null)\r\n            {\r\n                let templateEvent = new ComboBoxTemplateEvent();\r\n                templateEvent.dataItem = item;\r\n                templateEvent.element = comboItem[0];\r\n                templateEvent.sender = this;\r\n                rowText = options.template(templateEvent);\r\n            }\r\n\r\n            let classIfCheckbox = (options.checkboxes) ? \"vrComboBoxItemTextCheckbox\" : \"\";\r\n            let comboItemText = puma(\"<span title='\" + item.text + \"' text='\" + item.text.replace(/'/g, \"&#39;\") + \"' class='vrComboBoxItemText \" + classIfCheckbox + \"'>\" + rowText + \"</span>\").vrAppendToPuma(comboItem);\r\n            puma(comboItemText).on(\"mousedown\", (e: JQuery.MouseDownEvent) =>\r\n            {\r\n                let value = item.value;\r\n                let item2 = this.items().filter(k => k.value == value)[0];\r\n                if (item2 != null && !this.getRootValues().includes(String(item2.value)))\r\n                {\r\n                    if (!options.checkboxes)\r\n                    {\r\n                        this.valueInternal(item2.value);\r\n                        this.close();\r\n                    }\r\n                    else\r\n                        puma(e.currentTarget).siblings(\".vrCheckBox\").click();\r\n                }\r\n                else\r\n                    UtilityManager.interval(() => puma(this.element()).toggleClass(\"errorInput\"), 200, 800);\r\n            });\r\n\r\n            if (options.onItemDataBound != null)\r\n            {\r\n                let event = new ComboBoxItemDataBoundEvent();\r\n                event.sender = this;\r\n                event.element = comboItemText[0];\r\n                event.dataItem = item;\r\n                options.onItemDataBound(event);\r\n            }\r\n\r\n            if (children.length > 0)\r\n                this.drawItems(children, li);\r\n        }\r\n    }\r\n\r\n    private getFilteredArrayByInputText(value: string): ComboBoxItem[]\r\n    {\r\n        value = value.toLowerCase();\r\n        let filteredArray: ComboBoxItem[] = [];\r\n        let arrayWhereSearch = this.items().map(k => String(k.text).toLowerCase());\r\n        arrayWhereSearch!.forEach((k, index) => \r\n        {\r\n            if (k.indexOf(value) != -1)\r\n                filteredArray.push(this.items()[index]);\r\n        });\r\n        return filteredArray;\r\n    }\r\n\r\n    //#region Items\r\n    datasource(items?: ComboBoxItem[], triggerChange = true): ComboBoxItem[]\r\n    {\r\n        return this.items(items, triggerChange);\r\n    }\r\n\r\n    items(items?: ComboBoxItem[], triggerChange = true): ComboBoxItem[]\r\n    {\r\n        let options = this.getOptions();\r\n        if (items != null)\r\n        {\r\n            let realItems = UtilityManager.duplicate(items);\r\n            if (options.nullable != null && options.nullable !== false && realItems.length > 0)\r\n            {\r\n                let nullableItem = new ComboBoxItem();\r\n                nullableItem.text = (typeof (options.nullable) == \"boolean\" || options.nullable.text == null) ? \"Non selezionato\" : options.nullable.text;\r\n                nullableItem.value = (typeof (options.nullable) == \"boolean\") ? \"\" : ((options.nullable.value != null) ? options.nullable.value : \"0\");\r\n                realItems.unshift(nullableItem);\r\n            }\r\n\r\n            this._items = realItems;\r\n\r\n            if (options.webService == null)\r\n            {\r\n                this.drawDataSource();\r\n                if (options.mode == ComboBoxTypeEnum.DropDown && this.items().vrFirst() != null)\r\n                    this.valueInternal(this.items().vrFirst().value, triggerChange);\r\n            }\r\n            else\r\n            {\r\n                if (this._typedTextWebService == null) this._items = [];\r\n                this.drawDataSource();\r\n                this._typedTextWebService = null;\r\n            }\r\n        }\r\n        return this._items;\r\n    }\r\n\r\n    values()\r\n    {\r\n        return this.items().map(k => k.value);\r\n    }\r\n\r\n    getCheckedItems(onlyChildren = false): ComboBoxItem[]\r\n    {\r\n        let items = this.items().filter(k => this._checkedValues.includes(String(k.value)));\r\n        if (onlyChildren)\r\n        {\r\n            let childrenValues = this.getChildrenValues();\r\n            items = items.filter(k => childrenValues.includes(String(k.value)));\r\n        }\r\n        return items.vrDistinctBy(k => k.value);\r\n    }\r\n\r\n    getCheckedValues(onlyChildren = false): string[]\r\n    {\r\n        let values = this._checkedValues.vrDistinct();\r\n        if (onlyChildren)\r\n        {\r\n            let childrenValues = this.getChildrenValues();\r\n            values = values.filter(k => childrenValues.includes(k));\r\n        }\r\n        return values;\r\n    }\r\n\r\n    getSelectedItem<T extends ComboBoxItem>(): T\r\n    {\r\n        return this.items().filter(k => k.value != null && k.value == this.value())[0] as T;\r\n    }\r\n\r\n    addItem(item: ComboBoxItem, reloadCombo = true, triggerChange = true, sortBy?: SortByComboSettings): void\r\n    {\r\n        this.items().push(item);\r\n\r\n        if (sortBy != null)\r\n        {\r\n            if (sortBy.direction == null) sortBy.direction = SortDirectionEnum.Asc;\r\n            this.items().vrSortBy([sortBy.field], (sortBy.direction == SortDirectionEnum.Asc));\r\n        }\r\n\r\n        if (reloadCombo)\r\n            this.items(this.items(), triggerChange);\r\n    }\r\n\r\n    addItems(items: ComboBoxItem[], reloadCombo = true, triggerChange = true): void\r\n    {\r\n        for (let item of items)\r\n            this.addItem(item, false);\r\n\r\n        if (reloadCombo)\r\n            this.items(this.items(), triggerChange);\r\n    }\r\n\r\n    removeItem(itemOrId: ComboBoxItem | string | number, reloadCombo = true): void\r\n    {\r\n        if (typeof itemOrId == \"string\" || typeof itemOrId == \"number\")\r\n        {\r\n            let foundedItem = this.items().filter(k => k.value == itemOrId)[0];\r\n            this.items().vrDelete(foundedItem);\r\n        }\r\n        else\r\n            this.items().vrDelete(itemOrId);\r\n\r\n        if (reloadCombo)\r\n            this.items(this.items());\r\n    }\r\n\r\n    removeItems(items: ComboBoxItem[] | string[] | number[], reloadCombo = true): void\r\n    {\r\n        for (let item of items)\r\n            this.removeItem(item, false);\r\n\r\n        if (reloadCombo)\r\n            this.items(this.items());\r\n    }\r\n\r\n    getItemByValue(value: string): ComboBoxItem\r\n    {\r\n        return this.items().filter(k => String(k.value).toLowerCase() == value.toLowerCase())[0];\r\n    }\r\n\r\n    getItemByText(text: string): ComboBoxItem\r\n    {\r\n        return this.items().filter(k => k.text.toLowerCase() == text.toLowerCase())[0];\r\n    }\r\n\r\n    getElementsByValue(value: string): HTMLElement[] | undefined\r\n    {\r\n        let liValue = this._dictionaryValueLi.get(value);\r\n        return liValue;\r\n    }\r\n\r\n    getRootItems(): ComboBoxItem[]\r\n    {\r\n        let parentItems: ComboBoxItem[] = [];\r\n        for (let item of this.items())\r\n        {\r\n            if (item == null)\r\n                continue;\r\n\r\n            let parentValue = item.parentValue;\r\n            while (parentValue != null)\r\n            {\r\n                let parentItem = this.items().filter(k => k.value == parentValue)[0];\r\n                if (!parentItems.includes(parentItem))\r\n                    parentItems.push(parentItem);\r\n\r\n                parentValue = (parentItem != null) ? parentItem.parentValue : undefined;\r\n                if (parentItem != null && parentValue == parentItem.value)\r\n                    parentValue = undefined;\r\n            }\r\n        }\r\n        return parentItems;\r\n    }\r\n    getRootValues(): string[]\r\n    {\r\n        return this.getRootItems().filter(k => k != null).map(k => String(k.value));\r\n    }\r\n    private getRootTexts(): string[]\r\n    {\r\n        return this.getRootItems().map(k => k.text);\r\n    }\r\n\r\n    getLeafItems(): ComboBoxItem[]\r\n    {\r\n        let rootValues = this.getRootValues();\r\n        return this.items().filter(k => !rootValues.includes(String(k.value)));\r\n    }\r\n    getLeafValues(): string[]\r\n    {\r\n        return this.getLeafItems().map(k => String(k.value));\r\n    }\r\n    private getLeafTexts(): string[]\r\n    {\r\n        return this.getLeafItems().map(k => k.text);\r\n    }\r\n\r\n    getChildrenItems(): ComboBoxItem[]\r\n    {\r\n        return this.getLeafItems();\r\n    }\r\n    getChildrenValues(): string[]\r\n    {\r\n        return this.getLeafValues();\r\n    }\r\n    private getChildrenTexts(): string[]\r\n    {\r\n        return this.getLeafTexts();\r\n    }\r\n\r\n    private getOnlyChildrenItems(parentItem: ComboBoxItem): ComboBoxItem[]\r\n    {\r\n        return this.items().filter(k => k.parentValue != null && k.parentValue == parentItem.value);\r\n    }\r\n\r\n    private getAllChildrenItems(parentItem: ComboBoxItem): ComboBoxItem[]\r\n    {\r\n        return this.getDataChildrenItems(parentItem);\r\n    }\r\n    private getAllChildrenValues(parentItem: ComboBoxItem): string[]\r\n    {\r\n        return this.getAllChildrenItems(parentItem).map(k => String(k.value));\r\n    }\r\n\r\n    private getDataChildrenItems(parentItem?: ComboBoxItem | null): ComboBoxItem[]\r\n    {\r\n        let dataItems = (parentItem == null) ? this.items() : this.getOnlyChildrenItems(parentItem);\r\n        let items: ComboBoxItem[] = [];\r\n        for (let dataElement of dataItems)\r\n        {\r\n            items.push(dataElement);\r\n            if (this.getOnlyChildrenItems(dataElement).length > 0)\r\n                items.vrPushRange(this.getDataChildrenItems(dataElement));\r\n        }\r\n        return items;\r\n    }\r\n\r\n    private getChildrenCheckboxElements<T extends HTMLInputElement[] | JQuery>(parentItem: ComboBoxItem, checked = false, arrayMode = false): T\r\n    {\r\n        let liParent = this._dictionaryValueLi.get(String(parentItem.value));\r\n        let parentComboItemText = puma(liParent).find(\".vrComboBoxItemText\")[0];\r\n        let parentCheckbox = puma(parentComboItemText).siblings(\"input\");\r\n\r\n        let childrenCheckboxElements = puma(parentCheckbox).parent().parent().find(\"input\" + ((checked) ? \":checked\" : \"\"));\r\n        let sibling = puma(childrenCheckboxElements[0]).siblings(\".vrComboBoxItemText\")[0];\r\n        if (sibling != null && parentItem.text != null)\r\n        {\r\n            if (puma(sibling).html().vrRemoveHtml() == parentItem.text.vrRemoveHtml())\r\n                childrenCheckboxElements.splice(0, 1);\r\n        }\r\n\r\n        if (arrayMode)\r\n            childrenCheckboxElements = Array.from<HTMLInputElement>(childrenCheckboxElements);\r\n\r\n        return childrenCheckboxElements as T;\r\n    }\r\n\r\n    private getParentItem(childItem: ComboBoxItem): ComboBoxItem | null\r\n    {\r\n        if (childItem.parentValue != null)\r\n            return this.items().filter(k => k.value == childItem.parentValue)[0];\r\n        return null;\r\n    }\r\n\r\n    private manageCheckParent(item: ComboBoxItem): boolean | void\r\n    {\r\n        let parentItem = this.getParentItem(item);\r\n        if (parentItem != null)\r\n        {\r\n            let children = this.getChildrenCheckboxElements<HTMLInputElement[]>(parentItem, true, true);\r\n            let tempCheckedElements = children.filter(k => k != null && k.checked);\r\n\r\n            let liParent = this._dictionaryValueLi.get(String(parentItem.value))!;\r\n            let parentInputElement = puma(liParent).find(\"input\")[0];\r\n            if (parentInputElement != null)\r\n            {\r\n                puma(parentInputElement).removeClass(\"indeterminateVrCheckbox\");\r\n                parentInputElement.checked = false;\r\n\r\n                if (this.getAllChildrenItems(parentItem).length == tempCheckedElements.length)\r\n                {\r\n                    parentInputElement.checked = true;\r\n                    return true;\r\n                }\r\n                else if (tempCheckedElements.length == 0)\r\n                {\r\n                    parentInputElement.checked = false;\r\n                    return false;\r\n                }\r\n                else\r\n                {\r\n                    puma(parentInputElement).addClass(\"indeterminateVrCheckbox\");\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return;\r\n    }\r\n    //#endregion\r\n\r\n    //#region Text & Value\r\n    text(text?: string): string\r\n    {\r\n        if (text != null)\r\n        {\r\n            if (!this._isDivElement)\r\n                (this.element() as HTMLInputElement).value = text;\r\n            else\r\n                puma(this.element()).find(\".vrComboBoxSelectedValues\")[0].innerHTML = text;\r\n        }\r\n\r\n        if (!this._isDivElement)\r\n        {\r\n            let value = (this.element() as HTMLInputElement).value;\r\n            let selectedItem = this.getSelectedItem();\r\n            if (value == \"\" && selectedItem != null)\r\n                value = selectedItem.text;\r\n\r\n            if (value == null) value = \"\";\r\n            return value;\r\n        }\r\n        else\r\n        {\r\n            if (puma(this.element()).find(\".vrComboBoxSelectedValues\")[0] != null)\r\n            {\r\n                let value = puma(this.element()).find(\".vrComboBoxSelectedValues\")[0].innerHTML;\r\n                let selectedItem = this.getSelectedItem();\r\n                if (value == \"\" && selectedItem != null)\r\n                    value = selectedItem.text;\r\n\r\n                return value;\r\n            }\r\n            else\r\n                return \"\";\r\n        }\r\n    }\r\n\r\n    placeholder(text?: string)\r\n    {\r\n        if (text != null)\r\n            (this.element() as HTMLInputElement).placeholder = text;\r\n\r\n        return (this.element() as HTMLInputElement).placeholder;\r\n    }\r\n\r\n    private valueInternal<T extends string | string[] | number>(value?: ComboBoxItem | string | number | string[] | number[] | null, triggerChange: boolean = true): T | null\r\n    {\r\n        let options = this.getOptions();\r\n        (options as any).fromInternal = \"pumo\";\r\n\r\n        let val = this.value<T>(value, triggerChange, this._callbackAfterValue);\r\n\r\n        (options as any).fromInternal = null;\r\n        return val;\r\n    }\r\n\r\n    value<T extends string | string[] | number>(value?: ComboBoxItem | string | number | string[] | number[] | null, triggerChange: boolean = true, callback?: null | ((e: ComboBoxChangeEvent) => void)): T | null\r\n    {\r\n        if (value === null)\r\n        {\r\n            this.clear();\r\n            return null;\r\n        }\r\n\r\n        let options = this.getOptions();\r\n        if (value != null)\r\n        {\r\n            this._callbackAfterValue = callback;\r\n            if (typeof (value) == \"number\")\r\n                value = String(value);\r\n\r\n            if ((options as any).fromInternal == null && options.checkboxes === true)\r\n                this.clear();\r\n\r\n            if (!options.checkboxes)\r\n                puma(this._popup).find(\".vrComboBoxSelectedComboValue\").removeClass(\"vrComboBoxSelectedComboValue\");\r\n\r\n            if (typeof (value) == \"string\" || typeof (value) == \"number\")\r\n            {\r\n                value = [String(value)];\r\n                if (options.webService != null && (options as any).fromInternal == null)\r\n                    value = { value: String(value), text: \"\" };\r\n            }\r\n\r\n            let comboItem = null;\r\n            if (Array.isArray(value))\r\n            {\r\n                value = value.vrDistinct();\r\n                value = value.vrToStringArrayList();\r\n            }\r\n            else // Is comboBoxItem\r\n            {\r\n                comboItem = new ComboBoxItem();\r\n                comboItem.text = value.text;\r\n                comboItem.value = value.value;\r\n                value = [String(comboItem.value)];\r\n            }\r\n\r\n            if (value.length == 0)\r\n                this.hideClearButton();\r\n            else\r\n                this.showClearButton();\r\n\r\n            let prevValue = UtilityManager.duplicate(this._value);\r\n            this._value = [];\r\n            for (let singleValue of value)\r\n            {\r\n                let singleItem = this.items().filter(k => k.value == singleValue)[0];\r\n                if (singleItem != null)\r\n                    this._value.push(String(singleItem.value));\r\n            }\r\n\r\n            //#region WebService\r\n            if (options.webService != null && comboItem != null)\r\n            {\r\n                this._tempValueWebService = [];\r\n                this._tempValueWebService.push(String(comboItem.value));\r\n                this._typedTextWebService = (comboItem.text == null) ? \"\" : comboItem.text;\r\n                this.doAjaxCall(comboItem.text, true, triggerChange);\r\n\r\n                // this._typedTextWebService = (comboItem.text == null) ? \"\" : comboItem.text;\r\n                // if (comboItem.text != null && comboItem.text != \"\" && comboItem.value != null && comboItem.value != \"\")\r\n                // {\r\n                //     this.items([comboItem], false);\r\n                //     this.valueInternal(comboItem.value, triggerChange);\r\n                // }\r\n                // else\r\n                // {\r\n                //     this._tempValueWebService = [];\r\n                //     this._tempValueWebService.push(comboItem.value);\r\n                //     this.doAjaxCall(comboItem.text, true, triggerChange);\r\n                // }\r\n                return comboItem.value as T;\r\n            }\r\n            //#endregion\r\n\r\n            if (options.webService == null)\r\n            {\r\n                let values = this.values();\r\n                value = value.filter(k => values.includes(k));\r\n            }\r\n\r\n            this._checkedValues = value;\r\n\r\n            if (triggerChange)\r\n            {\r\n                let changingEvent = new ComboBoxChangingEvent();\r\n                if (options.onBeforeChange != null)\r\n                {\r\n                    let isParent = this.getRootValues().includes(this._value[0]);\r\n                    let parentItem = null;\r\n                    if (isParent)\r\n                        parentItem = this.items().filter(k => k.value == value)[0];\r\n\r\n                    changingEvent.sender = this;\r\n                    changingEvent.previousValue = prevValue;\r\n                    changingEvent.previousCheckedValues = prevValue;\r\n                    changingEvent.value = (options.checkboxes === true) ? this._checkedValues : this._value[0];\r\n                    changingEvent.text = this.text();\r\n                    changingEvent.childrenValues = (isParent) ? this.getAllChildrenValues(parentItem!) : [];\r\n                    changingEvent.checked = this._isChecked;\r\n                    changingEvent.isParent = this.getRootValues().includes(this._value[0]);\r\n                    options.onBeforeChange(changingEvent);\r\n                }\r\n\r\n                if (!changingEvent.isDefaultPrevented())\r\n                {\r\n                    this.writeTextByValue(comboItem, value);\r\n                    this.change();\r\n                }\r\n                else\r\n                {\r\n                    this._value = prevValue;\r\n                    this._callbackAfterValue = null;\r\n                }\r\n            }\r\n            else\r\n            {\r\n                this.writeTextByValue(comboItem, value);\r\n                if (value.length > 0)\r\n                    this.manageCallbackAfterValue();\r\n            }\r\n        }\r\n\r\n        if (this._value == null)\r\n            return null;\r\n        else if (options.checkboxes === true)\r\n            return this._value as T;\r\n        else\r\n            return this._value[0] as T;\r\n    }\r\n\r\n    private manageCallbackAfterValue()\r\n    {\r\n        let options = this.getOptions();\r\n        if (this._callbackAfterValue != null)\r\n        {\r\n            let value = (options.checkboxes && this._tempCheckedValue != null) ? this._tempCheckedValue : this.value<string>()!;\r\n\r\n            let isParent = this.getRootValues().includes(value);\r\n            let parentItem = null;\r\n            if (isParent)\r\n                parentItem = this.items().filter(k => k.value == value)[0];\r\n\r\n            let event = new ComboBoxChangeEvent();\r\n            event.sender = this;\r\n            event.value = value;\r\n            event.text = this.text();\r\n            event.childrenValues = (isParent) ? this.getAllChildrenValues(parentItem!) : [];\r\n            event.selectedItem = this.getSelectedItem();\r\n            event.checked = this._isChecked;\r\n            event.isParent = isParent;\r\n            this._callbackAfterValue(event);\r\n        }\r\n        this._callbackAfterValue = null;\r\n    }\r\n\r\n    private writeTextByValue(comboItem: ComboBoxItem | null, value: string[]): void\r\n    {\r\n        if (!this._isDivElement)\r\n        {\r\n            if (comboItem == null)\r\n            {\r\n                let item = this.items().filter(k => k.value == value[0])[0];\r\n                if (item != null)\r\n                    (this.element() as HTMLInputElement).value = item.text.toString();\r\n            }\r\n            else\r\n                (this.element() as HTMLInputElement).value = comboItem.text;\r\n        }\r\n        else\r\n        {\r\n            puma(this.element()).find(\".vrComboBoxSelectedValues\").remove();\r\n            let selectedItems = this.items().filter(k => value.includes(String(k.value)));\r\n            if (selectedItems.length > 0)\r\n            {\r\n                let options = this.getOptions();\r\n                if (selectedItems.length == 1 && selectedItems.vrFirst().text == \"\")\r\n                    return;\r\n\r\n                if (options.checkboxes)\r\n                {\r\n                    selectedItems = selectedItems.vrDistinctBy(k => k.value);\r\n                    let selectedValues = selectedItems.map(k => k.value);\r\n                    let comboItemTexts: HTMLSpanElement[] = [];\r\n                    for (let val of selectedValues)\r\n                    {\r\n                        //#region All checkboxes same value\r\n                        let liList = this._dictionaryValueLi.get(String(val))!;\r\n                        if (liList != null)\r\n                        {\r\n                            for (let li of liList)\r\n                            {\r\n                                let comboItemText = puma(li).find(\".vrComboBoxItemText\")[0];\r\n                                comboItemTexts.push(comboItemText);\r\n                            }\r\n                        }\r\n                        //#endregion\r\n                    }\r\n\r\n                    for (let comboItemText of comboItemTexts)\r\n                    {\r\n                        if (comboItemText == null)\r\n                            continue;\r\n\r\n                        let checkBox = puma(comboItemText).siblings(\"input\");\r\n                        puma(checkBox).removeClass(\"indeterminateVrCheckbox\");\r\n                        puma(checkBox).prop(\"checked\", true);\r\n                        checkBox[0].checked = true;\r\n                    }\r\n\r\n                    //#region To manage parents checkboxes\r\n                    let selectedItemsDistinctedByValue = selectedItems.vrDistinctBy(k => k.parentValue);\r\n                    for (let item of selectedItemsDistinctedByValue)\r\n                    {\r\n                        this.manageCheckParent(item);\r\n\r\n                        //#region Check if parent has all children selected\r\n                        let parentItem = this.getParentItem(item);\r\n                        if (parentItem != null)\r\n                        {\r\n                            let childrenValues = this.getAllChildrenValues(parentItem);\r\n                            let containsAll = selectedItemsDistinctedByValue.map(k => k.value).every(value =>\r\n                            {\r\n                                return childrenValues.includes(value);\r\n                            });\r\n\r\n                            if (containsAll && !selectedItems.map(k => k.value).includes(parentItem.value))\r\n                                selectedItems.push(parentItem);\r\n                        }\r\n                        //#endregion\r\n                    }\r\n                    //#endregion\r\n                }\r\n\r\n                let toWriteElements = selectedItems.vrDistinctBy(k => k.value);\r\n                let spanSelectedValues = puma(\"<span class='vrComboBoxSelectedValues'>\" + ((options.onlyIcon) ? \"\" : toWriteElements.map(k => k.text).vrToCommaSeparatedList()) + \"</span>\").vrAppendToPuma(this.element())[0];\r\n                if (!options.onlyIcon)\r\n                {\r\n                    //#region Write text\r\n                    let textWidth = UtilityManager.textWidth(spanSelectedValues);\r\n                    if (textWidth > puma(spanSelectedValues).width() && toWriteElements.length > 1 && !options.textEllipsis)\r\n                        puma(spanSelectedValues).html(toWriteElements.length + \" elementi\");\r\n\r\n                    if (selectedItems.length == this.items().vrDistinctBy(k => k.value).length && !options.textEllipsis && options.mode != ComboBoxTypeEnum.DropDown)\r\n                        puma(spanSelectedValues).html((options.allSelectedMessage != null) ? options.allSelectedMessage : \"Tutti selezionati\");\r\n                    //#endregion\r\n                }\r\n                else\r\n                {\r\n                    puma(this._allCheckedOnlyIcon).hide();\r\n                    if (selectedItems.length == this.items().vrDistinctBy(k => k.value).length && !options.textEllipsis && options.mode != ComboBoxTypeEnum.DropDown)\r\n                        puma(this._allCheckedOnlyIcon).show();\r\n                }\r\n\r\n                if (this._chkCheckAll != null)\r\n                {\r\n                    if (selectedItems.length == this.items().vrDistinctBy(k => k.value).length)\r\n                        this._chkCheckAll.checked(true, false);\r\n                    else\r\n                    {\r\n                        if (selectedItems.length > 0)\r\n                            this._chkCheckAll.checked(CheckboxStateEnum.Undefined, false);\r\n                        else\r\n                            this._chkCheckAll.checked(false, false);\r\n                    }\r\n                }\r\n            }\r\n            else\r\n            {\r\n                if (this._chkCheckAll != null)\r\n                    this._chkCheckAll.checked(false, false);\r\n            }\r\n        }\r\n    }\r\n\r\n    unCheck(value: string, triggerChange = true): void\r\n    {\r\n        let item = this.items().filter(k => k.value == value)[0];\r\n        if (item != null)\r\n        {\r\n            let comboItemTexts: HTMLSpanElement[] = [];\r\n            let liList = this._dictionaryValueLi.get(value)!;\r\n            if (liList != null)\r\n            {\r\n                for (let li of liList)\r\n                {\r\n                    let comboItemText = puma(li).find(\".vrComboBoxItemText\")[0];\r\n                    comboItemTexts.push(comboItemText);\r\n                }\r\n\r\n                for (let comboItemText of comboItemTexts)\r\n                {\r\n                    if (comboItemText == null)\r\n                        continue;\r\n\r\n                    let checkBox = puma(comboItemText).siblings(\"input\");\r\n                    puma(checkBox).removeClass(\"indeterminateVrCheckbox\");\r\n                    puma(checkBox).prop(\"checked\", false);\r\n                    checkBox[0].checked = false;\r\n                }\r\n            }\r\n\r\n            this._checkedValues.vrDelete(value);\r\n            this.value(this.getCheckedValues(), triggerChange);\r\n        }\r\n    }\r\n\r\n    select(index = 0, triggerChange = true): void\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.mode == ComboBoxTypeEnum.DropDown && this.items()[index] != null)\r\n            this.valueInternal(this.items()[index].value, triggerChange);\r\n    }\r\n\r\n    index(index = 0, triggerChange = true)\r\n    {\r\n        this.select(index, triggerChange);\r\n    }\r\n\r\n    isEmpty()\r\n    {\r\n        return this.value() == null || this.value() == \"\";\r\n    }\r\n\r\n    error()\r\n    {\r\n        this.element().style.cssText += \"border-bottom: solid 1px red;\";\r\n    }\r\n\r\n    hideError()\r\n    {\r\n        this.element().style.cssText += \"border-bottom: solid 1px #CCC;\";\r\n    }\r\n    //#endregion\r\n\r\n    //#region Check\r\n    checkAll(triggerChange = true): void\r\n    {\r\n        this._checkedValues = this.items().map(k => String(k.value));\r\n        this._checkedValues = this._checkedValues.vrDistinct();\r\n        this.valueInternal(this.items().map(k => String(k.value)), triggerChange);\r\n\r\n        if (this._chkCheckAll != null)\r\n            this._chkCheckAll.checked(true, false);\r\n    }\r\n\r\n    unCheckAll(triggerChange = true): void\r\n    {\r\n        this._checkedValues = [];\r\n        puma(this._popup).find(\".vrComboBoxSelectedComboValue\").removeClass(\"vrComboBoxSelectedComboValue\");\r\n        puma(this._popup).find(\"input\").removeClass(\"indeterminateVrCheckbox\");\r\n        for (let input of Array.from<HTMLInputElement>(puma(this._popup).find(\"input\")))\r\n        {\r\n            puma(input).prop(\"checked\", false);\r\n            input.checked = false;\r\n        }\r\n\r\n        this.valueInternal([], triggerChange);\r\n        if (this._chkCheckAll != null)\r\n            this._chkCheckAll.checked(false, false);\r\n\r\n        let options = this.getOptions();\r\n        if (options.onlyIcon)\r\n            puma(this._allCheckedOnlyIcon).hide();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Support\r\n    clear(triggerChange = false): void\r\n    {\r\n        let options = this.getOptions();\r\n        puma(this._popup).find(\".vrComboBoxSelectedComboValue\").removeClass(\"vrComboBoxSelectedComboValue\");\r\n        this.unCheckAll(false);\r\n\r\n        this.hideClearButton();\r\n        puma(this._popup).find(\"li\").show();\r\n\r\n        this._value = null;\r\n        if (!this._isDivElement)\r\n            (this.element() as HTMLInputElement).value = \"\";\r\n        else\r\n        {\r\n            if (options.mode == ComboBoxTypeEnum.DropDown)\r\n            {\r\n                let firstItem = this.items().vrFirst();\r\n                if (firstItem != null)\r\n                {\r\n                    let children = this.getOnlyChildrenItems(firstItem);\r\n                    if (children.length == 0)\r\n                        this.valueInternal(firstItem.value, false);\r\n                    else\r\n                        this.valueInternal(children.vrFirst().value, false);\r\n                }\r\n                else\r\n                    puma(this.element()).find(\".vrComboBoxSelectedValues\").remove();\r\n            }\r\n            else\r\n                puma(this.element()).find(\".vrComboBoxSelectedValues\").remove();\r\n        }\r\n\r\n        if (options.filter === true && puma(this._popup).find(\".vrComboBoxFilter\")[0] != null)\r\n            puma(this._popup).find(\".vrComboBoxFilter\")[0].value = \"\";\r\n\r\n        if (options.webService != null)\r\n        {\r\n            this._items = [];\r\n            puma(this._popup).find(\".vrComboBoxUl\").remove();\r\n        }\r\n\r\n        if (triggerChange)\r\n            this.change();\r\n\r\n        if (options.onClear != null)\r\n        {\r\n            let clearEvent = new ComboBoxClearEvent();\r\n            clearEvent.sender = this;\r\n            options.onClear(clearEvent);\r\n        }\r\n    }\r\n\r\n    clearItems(): void\r\n    {\r\n        this._items = [];\r\n        this.clear();\r\n        puma(this._popup).find(\".vrComboBoxUl\").remove();\r\n    }\r\n\r\n    popup()\r\n    {\r\n        return puma(this._popup)[0];\r\n    }\r\n\r\n    focus(open = true)\r\n    {\r\n        this._openPopupAfterFocus = open;\r\n        puma(this.element()).focus();\r\n    }\r\n\r\n    private getOptions(): ComboBoxOptions\r\n    {\r\n        return this.options<ComboBoxOptions>();\r\n    }\r\n\r\n    private doAjaxCall(text = \"\", fromSet = false, triggerChange = true): void\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.webService == null)\r\n            return;\r\n\r\n        if (options.webService.typedTextPropertyName == null) options.webService.typedTextPropertyName = \"text\";\r\n        if (options.webService.typedValuePropertyName == null) options.webService.typedValuePropertyName = \"value\";\r\n        if (options.webService.itemsPropertyName == null) options.webService.itemsPropertyName = \"items\";\r\n\r\n        let request: any = {};\r\n        request[options.webService.typedTextPropertyName] = text;\r\n\r\n        if (fromSet)\r\n            request[options.webService.typedValuePropertyName] = this._tempValueWebService![0];\r\n\r\n        if (options.webService.authKey == null)\r\n            options.webService.authKey = \"\";\r\n\r\n        if (options.webService.parameters != null)\r\n        {\r\n            let parameters = options.webService.parameters();\r\n            let jsonParameters = Object.getOwnPropertyNames(parameters);\r\n            for (let param of jsonParameters)\r\n                request[param] = parameters[param];\r\n        }\r\n\r\n        this._lastAjaxCallGuid = UtilityManager.createGuid();\r\n        request.guid = this._lastAjaxCallGuid;\r\n        UtilityManager.doAjaxCall(\r\n            {\r\n                mode: WebApiModeEnum.Async,\r\n                authKey: options.webService.authKey,\r\n                method: options.webService.method,\r\n                request: request\r\n            },\r\n            (response: any) =>\r\n            {\r\n                if (this._lastAjaxCallGuid != null && response.guid != null && this._lastAjaxCallGuid != response.guid)\r\n                    return;\r\n\r\n                let finalValue = \"\";\r\n                if (!fromSet)\r\n                {\r\n                    this._typedTextWebService = text;\r\n                    this.items(response[options!.webService!.itemsPropertyName!]);\r\n\r\n                    if (this._value != null)\r\n                        finalValue = this._value[0];\r\n                }\r\n                else\r\n                {\r\n                    let resultItems: any[] = response[options!.webService!.itemsPropertyName!];\r\n                    let itemSelected = resultItems.filter(k => k.value == this._tempValueWebService![0])[0];\r\n                    if (itemSelected != null)\r\n                    {\r\n                        this.items([itemSelected], false);\r\n                        finalValue = itemSelected.value;\r\n                    }\r\n                }\r\n\r\n                if (finalValue != \"\" && finalValue != null)\r\n                    this.valueInternal(finalValue, triggerChange);\r\n                else if (triggerChange)\r\n                {\r\n                    let value = (options.checkboxes && this._tempCheckedValue != null) ? this._tempCheckedValue : this.value();\r\n                    if (value != \"\" && value != null)\r\n                        this.change();\r\n                }\r\n            },\r\n            () => this._callbackAfterValue = null\r\n        )\r\n    }\r\n\r\n    showClearButton(): void\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.clearButton !== false)\r\n            puma(this.container()).find(\".vrDivComboBoxClearIcon\").show();\r\n    }\r\n\r\n    hideClearButton(): void\r\n    {\r\n        puma(this.container()).find(\".vrDivComboBoxClearIcon\").hide();\r\n    }\r\n\r\n    button()\r\n    {\r\n        return this._btnCombo;\r\n    }\r\n\r\n    buttonVisible(state?: boolean)\r\n    {\r\n        if (state != null)\r\n        {\r\n            this.button().visible(state);\r\n            if (state)\r\n                this._divPickerIcon.classList.add(\"vrComboDivPickerWithButton\");\r\n            else\r\n                this._divPickerIcon.classList.remove(\"vrComboDivPickerWithButton\");\r\n        }\r\n        return this.button().visible();\r\n    }\r\n\r\n    showButton()\r\n    {\r\n        this.buttonVisible(true);\r\n    }\r\n\r\n    hideButton()\r\n    {\r\n        this.buttonVisible(false);\r\n    }\r\n\r\n    buttonEnabled(state?: boolean)\r\n    {\r\n        if (state != null)\r\n            this.button().enabled(state);\r\n\r\n        return this.button().enabled();\r\n    }\r\n\r\n    enableButton()\r\n    {\r\n        this.buttonEnabled(true);\r\n    }\r\n\r\n    disableButton()\r\n    {\r\n        this.buttonEnabled(true);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Overrides\r\n    enable(): void\r\n    {\r\n        super.enable();\r\n        puma(this.container()).find(\".vrDivPickerIconComboBox\").removeClass(\"vrDivPickerIconDisable\");\r\n        puma(this.container()).find(\".vrDivPickerIconComboBoxDropDown\").removeClass(\"vrDivPickerIconDisable\");\r\n\r\n        if (this._btnCombo != null)\r\n            this._btnCombo.enable();\r\n\r\n        if (this._chkCheckAll != null)\r\n            this._chkCheckAll.enable();\r\n    }\r\n\r\n    disable(): void\r\n    {\r\n        super.disable();\r\n        puma(this.container()).find(\".vrDivPickerIconComboBox\").addClass(\"vrDivPickerIconDisable\");\r\n        puma(this.container()).find(\".vrDivPickerIconComboBoxDropDown\").addClass(\"vrDivPickerIconDisable\");\r\n\r\n        if (this._btnCombo != null)\r\n            this._btnCombo.disable();\r\n\r\n        if (this._chkCheckAll != null)\r\n            this._chkCheckAll.disable();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Events\r\n    change(callBack?: Function): void\r\n    {\r\n        let changeCallBack = this.getOptions().onAfterChange;\r\n        if (changeCallBack != null)\r\n        {\r\n            let options = this.getOptions();\r\n            let value = (options.checkboxes && this._tempCheckedValue != null) ? this._tempCheckedValue : this.value<string>()!;\r\n\r\n            let isParent = this.getRootValues().includes(value);\r\n            let parentItem = null;\r\n            if (isParent)\r\n                parentItem = this.items().filter(k => k.value == value)[0];\r\n\r\n            let changeEvent = new ComboBoxChangeEvent();\r\n            changeEvent.sender = this;\r\n            changeEvent.value = value;\r\n            changeEvent.text = this.text();\r\n            changeEvent.childrenValues = (isParent) ? this.getAllChildrenValues(parentItem!) : [];\r\n            changeEvent.selectedItem = this.getSelectedItem();\r\n            changeEvent.checked = this._isChecked;\r\n            changeEvent.isParent = isParent;\r\n            changeCallBack(changeEvent);\r\n        }\r\n\r\n        this.manageCallbackAfterValue();\r\n\r\n        if (callBack != null)\r\n            callBack();\r\n    }\r\n    //#endregion\r\n}\r\n\r\nexport class DropDown extends ComboBox { }\r\n//#endregion\r\n\r\n//#region Classes\r\nclass ComboBoxNullableItem\r\n{\r\n    text?: string;\r\n    value?: string;\r\n}\r\n\r\nclass CheckAllSettings\r\n{\r\n    triggerChange?: boolean;\r\n}\r\n\r\nclass ComboBoxKeyDownEvent extends VrControlsEvent\r\n{\r\n    sender: ComboBox;\r\n    event: any;\r\n}\r\n\r\nclass ComboBoxKeyUpEvent extends VrControlsEvent\r\n{\r\n    sender: ComboBox;\r\n    event: any;\r\n}\r\n\r\nclass ComboBoxPasteEvent extends VrControlsEvent\r\n{\r\n    sender: ComboBox;\r\n    event: any;\r\n    pastedValue: string;\r\n    value: string;\r\n}\r\n\r\nclass ComboBoxEnterKeyEvent extends VrControlsEvent\r\n{\r\n    sender: ComboBox;\r\n    value: any;\r\n}\r\n\r\nclass ComboBoxCloseEvent extends VrControlsEvent\r\n{\r\n    sender: ComboBox;\r\n    beforeValue: any;\r\n    afterValue: any;\r\n}\r\n\r\nclass ComboBoxItemDataBoundEvent extends VrControlsEvent\r\n{\r\n    sender: ComboBox;\r\n    element: HTMLElement;\r\n    dataItem: any;\r\n}\r\n\r\nclass ComboBoxBlurEvent extends VrControlsEvent\r\n{\r\n    sender: ComboBox;\r\n}\r\n//#endregion","import { ButtonModeEnum, ColorSettings, IconClass, PositionEnum, ControlTypeEnum, confirm, puma, span, IconSettings } from \"../vr\";\r\nimport { VrControlOptions, VrControl, VrControlsEvent } from \"../common\";\r\n\r\n//#region Options\r\nexport class ButtonOptions extends VrControlOptions\r\n{\r\n    text?: string;\r\n    value?: string;\r\n    mode?: ButtonModeEnum;\r\n    tooltip?: string;\r\n    colorSettings?: ColorSettings;\r\n    icon?: IconClass;\r\n    imageUrl?: string;\r\n    iconSettings?: IconSettings;\r\n    confirmationMessage?: string;\r\n    badgeSettings?: ButtonBadgeSettings;\r\n\r\n    onClick?: (e: ButtonClickEvent) => void;\r\n    onRightClick?: (e: ButtonRightClickEvent) => void;\r\n    onMiddleClick?: (e: ButtonMiddleClickEvent) => void;\r\n    onHover?: (e: ButtonHoverEvent) => void;\r\n    onBlur?: (e: ButtonBlurEvent) => void;\r\n    onRejectedConfirm?: () => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Button extends VrControl\r\n{\r\n    private _mouseDownEvent: JQuery.MouseDownEvent | null;\r\n\r\n    constructor(element: HTMLElement, options?: ButtonOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new ButtonOptions();\r\n\r\n        if (options.text == null) options.text = \"\";\r\n        if (options.mode == null) options.mode = ButtonModeEnum.Default;\r\n\r\n        if (options.iconSettings == null) options.iconSettings = new IconSettings();\r\n        if (options.iconSettings.position == null) options.iconSettings.position = PositionEnum.Left;\r\n        //#endregion\r\n\r\n        super(element, options, ControlTypeEnum.Button);\r\n\r\n        //#region Width\r\n        if (options.width == null)\r\n            this.element().style.cssText += \"min-width: 27px;\";\r\n        else\r\n            this.element().style.cssText += \"width: 100%;\";\r\n        //#endregion\r\n\r\n        //#region Color settings\r\n        if (options.colorSettings != null)\r\n        {\r\n            let colorSettings = options.colorSettings;\r\n            if (colorSettings.textColor != null)\r\n                this.color(colorSettings.textColor);\r\n            if (colorSettings.background != null)\r\n                this.backgroundColor(colorSettings.background);\r\n            if (colorSettings.border != null)\r\n                this.borderColor(colorSettings.border);\r\n        }\r\n        //#endregion\r\n\r\n        //#region Mode\r\n        this.mode(options.mode);\r\n        //#endregion\r\n\r\n        //#region Icon/ImageUrl\r\n        if (options.icon != null)\r\n            this.icon(options.icon);\r\n        else if (options.imageUrl != null)\r\n            this.imageUrl(options.imageUrl);\r\n        //#endregion\r\n\r\n        //#region Text/Tooltip/Value\r\n        this.text(options.text);\r\n\r\n        if (options.tooltip != null)\r\n            this.tooltip(options.tooltip);\r\n\r\n        if (options.value != null)\r\n            puma(this.element()).attr(\"value\", options.value);\r\n        //#endregion\r\n\r\n        //#region Badge\r\n        let badgeColor = \"#FFF\";\r\n        let badgeBackgroundColor = \"red\";\r\n        let badgeText = \"\";\r\n        let badgeVisible = false;\r\n        if (options.badgeSettings != null)\r\n        {\r\n            if (options.badgeSettings.text != null) badgeText = String(options.badgeSettings.text);\r\n            if (options.badgeSettings.color != null) badgeColor = options.badgeSettings.color;\r\n            if (options.badgeSettings.backgroundColor != null) badgeBackgroundColor = String(options.badgeSettings.backgroundColor);\r\n            if (options.badgeSettings.visible != null) badgeVisible = options.badgeSettings.visible;\r\n        }\r\n\r\n        let badge = puma(\"<span class='vrButtonBadgeClass'>\" + badgeText + \"</span>\")[0];\r\n        badge.innerHTML = badgeText;\r\n        puma(element).after(badge);\r\n\r\n        if (options.tooltip != null)\r\n            badge.title = options.tooltip;\r\n\r\n        badge.style.cssText += \"color: \" + badgeColor + \"; background-color: \" + badgeBackgroundColor + \";\";\r\n        if ((badgeText == \"\" || badgeText == null) && !badgeVisible)\r\n            puma(badge).hide();\r\n\r\n        if (options.badgeSettings != null && options.badgeSettings.click != null)\r\n        {\r\n            puma(badge).on(\"mousedown\", (e: JQuery.MouseDownEvent) =>\r\n            {\r\n                let badgeClickEvent = new ButtonBadgeClickEvent();\r\n                badgeClickEvent.sender = this;\r\n                badgeClickEvent.text = this.badge();\r\n\r\n                switch (e.button)\r\n                {\r\n                    case 0: badgeClickEvent.leftButton = true; break;\r\n                    case 1: badgeClickEvent.middleButton = true; break;\r\n                    case 2: badgeClickEvent.rightButton = true; break;\r\n                }\r\n\r\n                options!.badgeSettings!.click!(badgeClickEvent);\r\n            });\r\n        }\r\n        else if (options.onClick != null)\r\n        {\r\n            puma(badge).on(\"mousedown\", (e: JQuery.MouseDownEvent) => \r\n            {\r\n                this._mouseDownEvent = e;\r\n                this.click();\r\n                return false;\r\n            });\r\n        }\r\n        //#endregion\r\n\r\n        //#region Events\r\n        let mouseDownClicked = false;\r\n        puma(element).on(\"mousedown\", (e: JQuery.MouseDownEvent) => \r\n        {\r\n            mouseDownClicked = true;\r\n            this._mouseDownEvent = e;\r\n            this.click();\r\n\r\n            // To prevent Ajax rebind\r\n            e.preventDefault();\r\n            return false;\r\n        });\r\n\r\n        puma(element).on(\"click\", (e: JQuery.ClickEvent) =>\r\n        {\r\n            if (!mouseDownClicked)\r\n                this.click();\r\n            else\r\n                mouseDownClicked = false;\r\n\r\n            // To prevent Ajax rebind\r\n            e.preventDefault();\r\n            return false;\r\n        });\r\n\r\n        puma(this.container()).hover(() =>\r\n        {\r\n            if (options!.onHover != null)\r\n            {\r\n                let hoverEvent = new ButtonHoverEvent();\r\n                hoverEvent.sender = this;\r\n                options!.onHover(hoverEvent);\r\n            }\r\n        });\r\n\r\n        puma(this.container()).mouseleave(() =>\r\n        {\r\n            if (options!.onBlur != null)\r\n            {\r\n                let blurEvent = new ButtonBlurEvent();\r\n                blurEvent.sender = this;\r\n                options!.onBlur(blurEvent);\r\n            }\r\n        });\r\n        //#endregion\r\n    }\r\n\r\n    //#region Methods\r\n\r\n    //#region Text/Label/Tooltip\r\n    text(value?: string): string\r\n    {\r\n        let options = this.getOptions();\r\n        if (value != null)\r\n        {\r\n            puma(this.element()).find(\".vrButtonSpanText\").remove();\r\n            let spanText = span(this.element(), { class: \"vrButtonSpanText\" });\r\n\r\n            //#region Position\r\n            let iconPosition = options.iconSettings!.position;\r\n            if (iconPosition == PositionEnum.Left)\r\n                puma(this.element()).vrAppendPuma(spanText);\r\n            else if (iconPosition == PositionEnum.Right)\r\n                puma(this.element()).vrPrependPuma(spanText);\r\n            //#endregion\r\n\r\n            spanText.innerHTML = value;\r\n            options.text = value;\r\n        }\r\n        return options.text!;\r\n    }\r\n\r\n    value(value?: string)\r\n    {\r\n        return this.text(value);\r\n    }\r\n\r\n    tooltip(value?: string | number): string\r\n    {\r\n        if (value != null)\r\n            this.element().title = String(value);\r\n\r\n        return this.element().title;\r\n    }\r\n    //#endregion\r\n\r\n    //#region Badge\r\n    badge(text?: string | number)\r\n    {\r\n        if (text != null)\r\n        {\r\n            puma(this.container()).find(\".vrButtonBadgeClass\").html(text);\r\n            this.showBadge();\r\n        }\r\n        return puma(this.container()).find(\".vrButtonBadgeClass\").html();\r\n    }\r\n\r\n    showBadge()\r\n    {\r\n        puma(this.container()).find(\".vrButtonBadgeClass\").show();\r\n    }\r\n\r\n    hideBadge()\r\n    {\r\n        puma(this.container()).find(\".vrButtonBadgeClass\").hide();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Mode\r\n    mode(mode?: ButtonModeEnum): ButtonModeEnum\r\n    {\r\n        if (mode != null)\r\n        {\r\n            puma(this.element()).removeClass([ButtonModeEnum.Default, ButtonModeEnum.Primary, ButtonModeEnum.Delete, ButtonModeEnum.Excel, ButtonModeEnum.Primary].join(\" \"));\r\n            puma(this.element()).addClass(mode);\r\n        }\r\n\r\n        let classList: string[] = this.element().className.split(/\\s+/);\r\n        return classList.filter(k => k.endsWith(\"Mode\"))[0] as ButtonModeEnum;\r\n    }\r\n    //#endregion\r\n\r\n    //#region Color\r\n    colorSettings(settings?: ColorSettings)\r\n    {\r\n        let options = this.getOptions();\r\n        if (settings != null)\r\n        {\r\n            options.colorSettings = settings;\r\n            if (settings.textColor != null)\r\n                this.color(settings.textColor);\r\n            if (settings.background != null)\r\n                this.backgroundColor(settings.background);\r\n            if (settings.border != null)\r\n                this.borderColor(settings.border);\r\n        }\r\n        return options.colorSettings;\r\n    }\r\n\r\n    color(value?: string): string\r\n    {\r\n        if (value != null)\r\n            this.element().style.cssText += \"color: \" + value;\r\n\r\n        return puma(this.element()).css(\"color\");\r\n    }\r\n\r\n    backgroundColor(value?: string): string\r\n    {\r\n        if (value != null)\r\n            this.element().style.cssText += \"background-color: \" + value;\r\n\r\n        return puma(this.element()).css(\"background-color\");\r\n    }\r\n\r\n    borderColor(value?: string): string\r\n    {\r\n        if (value != null)\r\n            this.element().style.cssText += \"border-color: \" + value;\r\n\r\n        return puma(this.element()).css(\"border-color\");\r\n    }\r\n    //#endregion\r\n\r\n    //#region Icon/ImageUrl\r\n    icon(icon?: IconClass, iconPosition?: PositionEnum | null, iconTooltip = \"\"): HTMLElement | null\r\n    {\r\n        let options = this.getOptions();\r\n        if (iconPosition == null)\r\n            iconPosition = options.iconSettings!.position;\r\n\r\n        let vrIcon = puma(this.element()).find(\".vrIcon\")[0] as HTMLElement;\r\n        if (icon != null)\r\n        {\r\n            if (vrIcon != null)\r\n            {\r\n                let classList: string[] = vrIcon.className.split(/\\s+/);\r\n                let iconClassList = classList.filter(k => k.startsWith(\"fa-\"));\r\n                for (let iconClass of iconClassList)\r\n                    vrIcon.classList.remove(iconClass);\r\n\r\n                puma(vrIcon).addClass(icon);\r\n            }\r\n            else\r\n            {\r\n                let options = this.options<ButtonOptions>();\r\n                let margin = \"\";\r\n                if (options.text != null && options.text != \"\")\r\n                {\r\n                    if (iconPosition == PositionEnum.Left) margin = \"margin-right: 5px;\";\r\n                    else if (iconPosition == PositionEnum.Right) margin = \"margin-left: 5px;\";\r\n                }\r\n\r\n                //#region Settings\r\n                let classAttribute = \"\";\r\n                let idAttribute = \"\";\r\n                let css = \"\";\r\n\r\n                let settings = options.iconSettings!;\r\n                if (settings.id != null)\r\n                    idAttribute = \"id = '\" + settings.id + \"'\";\r\n\r\n                if (settings.css != null)\r\n                    css += settings.css + \";\";\r\n\r\n                if (settings.fontSize != null)\r\n                {\r\n                    if (typeof (settings.fontSize) == \"number\")\r\n                        settings.fontSize = settings.fontSize + \"px\";\r\n\r\n                    css += \"font-size: \" + settings.fontSize + \";\";\r\n                }\r\n\r\n                if (settings.color != null)\r\n                    css += \"color: \" + settings.color + \";\";\r\n\r\n                if (settings.class != null)\r\n                    classAttribute += settings.class;\r\n\r\n                if (settings.cursor != null)\r\n                    css += \"cursor: \" + settings.cursor + \";\";\r\n                //#endregion\r\n\r\n                let iElementString = \"<i class='\" + icon + \" vrIcon \" + classAttribute\r\n                    + \"' aria-hidden='true' style='position: relative; top: -1px;\" + margin + \" \" + css + \"' id='\" + idAttribute + \"'></i>\";\r\n\r\n                if (iconPosition == PositionEnum.Left)\r\n                    puma(this.element()).vrPrependPuma(iElementString);\r\n                else if (iconPosition == PositionEnum.Right)\r\n                    puma(this.element()).vrAppendPuma(iElementString);\r\n            }\r\n\r\n            if (iconTooltip != \"\")\r\n                puma(vrIcon).attr(\"title\", iconTooltip);\r\n        }\r\n        return vrIcon;\r\n    }\r\n\r\n    imageUrl(imageUrl?: string, imagePosition?: PositionEnum): HTMLElement | null\r\n    {\r\n        let options = this.getOptions();\r\n        if (imagePosition == null)\r\n            imagePosition = options.iconSettings!.position;\r\n\r\n        let vrImageUrl = puma(this.element()).find(\".vrImageUrl\")[0];\r\n        if (imageUrl != null)\r\n        {\r\n            if (vrImageUrl != null)\r\n                puma(vrImageUrl).remove();\r\n\r\n            let options = this.options<ButtonOptions>();\r\n            let margin = \"\";\r\n            if (options.text != null && options.text != \"\")\r\n            {\r\n                if (imagePosition == PositionEnum.Left) margin = \"margin-right: 5px;\";\r\n                else if (imagePosition == PositionEnum.Right) margin = \"margin-left: 5px;\";\r\n            }\r\n\r\n            if (imagePosition == PositionEnum.Left)\r\n                puma(this.element()).prepend(\"<img src='\" + imageUrl + \"' vrImageUrl' style='width: 16px; height: 16px; float: left;\" + margin + \"' />\");\r\n            else if (imagePosition == PositionEnum.Right)\r\n                puma(this.element()).vrAppendPuma(\"<img src='\" + imageUrl + \"' vrImageUrl' style='width: 16px; height: 16px; float: right;\" + margin + \"' />\");\r\n        }\r\n\r\n        vrImageUrl = puma(this.element()).find(\".vrImageUrl\")[0];\r\n        return vrImageUrl;\r\n    }\r\n    //#endregion\r\n\r\n    getOptions(): ButtonOptions\r\n    {\r\n        return this.options<ButtonOptions>();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Events\r\n    click(callback?: (e: ButtonClickEvent) => void): void\r\n    {\r\n        //puma(this.element()).focus();\r\n\r\n        let options = this.getOptions();\r\n        if (options.confirmationMessage != null)\r\n            confirm(options.confirmationMessage).then(() => this.internalClick(callback), () => this.rejectedConfirm());\r\n        else\r\n            this.internalClick(callback);\r\n    }\r\n\r\n    private internalClick(callback?: (e: ButtonClickEvent) => void): void\r\n    {\r\n        let clickEvent = new ButtonClickEvent();\r\n        if (this._mouseDownEvent != null)\r\n        {\r\n            let clickCallback: Function | null | undefined = null;\r\n            switch (this._mouseDownEvent.button)\r\n            {\r\n                case 0: clickCallback = this.options<ButtonOptions>().onClick; break; // Left button\r\n                case 1: clickCallback = this.options<ButtonOptions>().onMiddleClick; break; // Middle button\r\n                case 2: clickCallback = this.options<ButtonOptions>().onRightClick; break; // Right button\r\n            }\r\n\r\n            if (clickCallback != null)\r\n            {\r\n                clickEvent.sender = this;\r\n                clickEvent.text = this.text();\r\n                clickCallback(clickEvent);\r\n            }\r\n            this._mouseDownEvent = null;\r\n        }\r\n        else\r\n        {\r\n            let clickCallback: Function | null | undefined = this.options<ButtonOptions>().onClick;\r\n            if (clickCallback != null)\r\n            {\r\n                clickEvent.sender = this;\r\n                clickEvent.text = this.text();\r\n                clickCallback(clickEvent);\r\n            }\r\n        }\r\n\r\n        if (callback != null)\r\n        {\r\n            let clickEvent = new ButtonClickEvent();\r\n            clickEvent.sender = this;\r\n            clickEvent.text = this.text();\r\n            callback(clickEvent);\r\n        }\r\n    }\r\n\r\n    private rejectedConfirm()\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.onRejectedConfirm != null)\r\n            options.onRejectedConfirm();\r\n    }\r\n    //#endregion\r\n}\r\n//#endregion\r\n\r\n//#region EventClasses\r\nclass ButtonEvent extends VrControlsEvent\r\n{\r\n    sender: Button;\r\n}\r\n\r\nclass ButtonClickEvent extends ButtonEvent\r\n{\r\n    text: string;\r\n}\r\n\r\nclass ButtonRightClickEvent extends ButtonEvent\r\n{\r\n    text: string;\r\n    leftButton?: boolean;\r\n    middleButton?: boolean;\r\n    rightButton?: boolean;\r\n}\r\n\r\nclass ButtonMiddleClickEvent extends ButtonEvent\r\n{\r\n    text: string;\r\n    leftButton?: boolean;\r\n    middleButton?: boolean;\r\n    rightButton?: boolean;\r\n}\r\n\r\nclass ButtonHoverEvent extends ButtonEvent\r\n{\r\n}\r\n\r\nclass ButtonBlurEvent extends ButtonEvent\r\n{\r\n}\r\n\r\nexport class ButtonBadgeSettings\r\n{\r\n    text?: string | number;\r\n    color?: string;\r\n    backgroundColor?: string;\r\n    visible?: boolean;\r\n    click?: (e: ButtonBadgeClickEvent) => void;\r\n}\r\n\r\nclass ButtonBadgeClickEvent\r\n{\r\n    sender: Button;\r\n    text: string;\r\n    leftButton?: boolean;\r\n    middleButton?: boolean;\r\n    rightButton?: boolean;\r\n}\r\n//#endregion","import { puma } from \"../ui/vr\";\r\n\r\nexport class LoaderManager\r\n{\r\n\tstatic show(element?: string | HTMLElement | JQuery, transparency = true, tag?: any)\r\n\t{\r\n\t\tif (tag == null) tag = \"vrLoadingTemp\";\r\n\t\tthis.addCss();\r\n\r\n\t\t//#region\tLoader\telement\r\n\t\tlet loaderElement = null;\r\n\t\tif (element == null)\r\n\t\t\tloaderElement = document.body;\r\n\t\telse if (typeof (element) == \"string\")\r\n\t\t{\r\n\t\t\tif (!element.startsWith(\"#\"))\r\n\t\t\t\telement = \"#\" + element;\r\n\t\t\tloaderElement = puma(element)[0];\r\n\t\t}\r\n\t\telse\r\n\t\t\tloaderElement = puma(element)[0];\r\n\t\t//#endregion\r\n\r\n\t\t//#region\tTransparency\r\n\t\tlet opacity = \"0.5\";\r\n\t\tif (!transparency)\r\n\t\t\topacity = \"1\";\r\n\t\t//#endregion\r\n\r\n\t\t//#region\tWidth/Height\r\n\t\tlet elementWidth = puma(loaderElement).outerWidth();\r\n\t\tlet elementHeight = puma(loaderElement).outerHeight();\r\n\r\n\t\tlet backgroundWidth = \"100%\";\r\n\t\tlet backgroundHeight = \"100%\";\r\n\t\tlet loaderWidth = \"80px\";\r\n\t\tlet loaderHeight = \"80px\";\r\n\t\tbackgroundWidth = elementWidth + \"px\";\r\n\t\tbackgroundHeight = elementHeight + \"px\";\r\n\r\n\t\tlet loaderWidthNumber = ((elementHeight) * 80 / 100);\r\n\t\tif (loaderWidthNumber > 80)\r\n\t\t\tloaderWidthNumber = 80;\r\n\t\tlet loaderHeightNumber = ((elementHeight) * 80 / 100);\r\n\t\tif (loaderHeightNumber > 80)\r\n\t\t\tloaderHeightNumber = 80;\r\n\t\t//#endregion\r\n\r\n\t\t//#region\tPosition\r\n\t\tlet loaderXPosition = \"Calc(50%\t-\t50px)\";\r\n\t\tlet loaderYPosition = \"Calc(50%\t-\t50px)\";\r\n\t\tloaderXPosition = (0 + ((elementWidth) / 2) - (loaderWidthNumber / 2)) - 16 + \"px\";\r\n\t\tloaderYPosition = (0 + ((elementHeight) / 2) - (loaderHeightNumber / 2)) - 16 + \"px\";\r\n\r\n\t\tif (puma(loaderElement).css(\"position\") != \"absolute\")\r\n\t\t\tpuma(loaderElement).css(\"position\", \"relative\");\r\n\t\t//#endregion\r\n\r\n\t\t//#region\tBackground\r\n\t\tlet zIndex: number = 2500000;\r\n\t\tzIndex = String((puma(loaderElement).css(\"z-index\"))).vrGetNumericPart() + 1;\r\n\t\tif (loaderElement == document.body)\r\n\t\t\tzIndex = 999999999;\r\n\r\n\t\tlet background: HTMLDivElement = document.createElement(\"div\");\r\n\t\tbackground.setAttribute(\"id\", \"loaderManager_background\");\r\n\t\tbackground.setAttribute(\"class\", \"loaderManager_background\");\r\n\t\tbackground.setAttribute(\"style\", \"position:\tabsolute;\tleft:\t\" + 0 + \";\ttop:\t\" + 0 + \";\tz-index:\t\" + zIndex.toString() + \";\tbackground-color:\t#FFF;\topacity:\t\" + opacity + \";\twidth:\t\" + backgroundWidth + \";\theight:\t\" + backgroundHeight + \";\");\r\n\t\tbackground.setAttribute(\"tag\", tag);\r\n\t\tpuma(background).vrAppendToPuma(loaderElement);\r\n\t\t//#endregion\r\n\r\n\t\t//#region\tLoader\r\n\t\tloaderWidth = loaderWidthNumber + \"px\";\r\n\t\tloaderHeight = loaderHeightNumber + \"px\";\r\n\t\tpuma(\"<div class='loaderManager_loader' tag='\" + tag + \"'style='position: absolute; left: \" + loaderXPosition + \"; top: \" + loaderYPosition + \"; width: \" + loaderWidth + \"; height:\t\" + loaderHeight + \";'><div></div><div></div><div></div><div></div></div>\").vrAppendToPuma(loaderElement);\r\n\t\t//#endregion\r\n\t}\r\n\r\n\tstatic hide(tag?: any)\r\n\t{\r\n\t\tif (tag == null)\r\n\t\t{\r\n\t\t\tpuma(\"#loaderManager_background[tag='vrLoadingTemp']\").remove();\r\n\t\t\tpuma(\".loaderManager_loader[tag='vrLoadingTemp']\").remove();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tpuma(\".loaderManager_background[tag='\" + tag + \"']\").remove();\r\n\t\t\tpuma(\".loaderManager_loader[tag='\" + tag + \"']\").remove();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static addCss()\r\n\t{\r\n\t\tif (puma(\"head\").find(\"style[id='vr_loader']\")[0] == null)\r\n\t\t{\r\n\t\t\tthis.addCssBase(`\r\n\t\t\t\t.loaderManager_loader\t{\r\n\t\t\t\t\t\tdisplay:\tinline-block;\r\n\t\t\t\t\t\tz-index:\t9999999999999999999999999999999999999;\r\n\t\t\t\t}\r\n\t\t\t\t.loaderManager_loader\tdiv\t{\r\n\t\t\t\t\t\tposition:\tabsolute;\r\n\t\t\t\t\t\ttop:\t33px;\r\n\t\t\t\t\t\twidth:\t13px;\r\n\t\t\t\t\t\theight:\t13px;\r\n\t\t\t\t\t\tborder-radius:\t50%;\r\n\t\t\t\t\t\tbackground:\t#51B3E1;\r\n\t\t\t\t\t\tanimation-timing-function:\tcubic-bezier(0,1,1,0);\r\n\t\t\t\t}\r\n\t\t\t\t.loaderManager_loader\tdiv:nth-child(1)\t{\r\n\t\t\t\t\t\tleft:\t8px;\r\n\t\t\t\t\t\tanimation:\tloaderManager_loader1 0.6s infinite;\r\n\t\t\t\t}\r\n\t\t\t\t.loaderManager_loader\tdiv:nth-child(2)\t{\r\n\t\t\t\t\t\tleft: 8px;\r\n\t\t\t\t\t\tanimation:\tloaderManager_loader2 0.6s infinite;\r\n\t\t\t\t}\r\n\t\t\t\t.loaderManager_loader\tdiv:nth-child(3)\t{\r\n\t\t\t\t\t\tleft: 32px;\r\n\t\t\t\t\t\tanimation:\tloaderManager_loader2 0.6s infinite;\r\n\t\t\t\t}\r\n\t\t\t\t.loaderManager_loader\tdiv:nth-child(4)\t{\r\n\t\t\t\t\t\tleft: 56px;\r\n\t\t\t\t\t\tanimation:\tloaderManager_loader3 0.6s infinite;\r\n\t\t\t\t}\r\n\t\t\t\t@keyframes\tloaderManager_loader1\t{\r\n\t\t\t\t\t\t0%\t{\r\n\t\t\t\t\t\t\t\ttransform: scale(0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t100%\t{\r\n\t\t\t\t\t\t\t\ttransform: scale(1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t@keyframes\tloaderManager_loader3\t{\r\n\t\t\t\t\t\t0%\t{\r\n\t\t\t\t\t\t\t\ttransform: scale(1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t100%\t{\r\n\t\t\t\t\t\t\t\ttransform: scale(0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t@keyframes\tloaderManager_loader2\t{\r\n\t\t\t\t\t\t0%\t{\r\n\t\t\t\t\t\t\t\ttransform: translate(0, 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t100%\t{\r\n\t\t\t\t\t\t\t\ttransform: translate(24px, 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t`);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static addCssBase(cssRules: string)\r\n\t{\r\n\t\tpuma(\"<style id='vr_loader'>\" + cssRules + \"</style>\").vrAppendToPuma(\"head\");\r\n\t}\r\n}","import { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { ControlTypeEnum, SelectionModeEnum, createCheckBox, puma, ButtonGroupItem, span, createButton, ControlPositionEnum, IconClassLight } from \"../vr\";\r\nimport { UtilityManager } from \"../../managers/utilityManager\";\r\nimport { Button } from \"./button\";\r\n\r\n//#region Options\r\nexport class ButtonGroupOptions extends VrControlOptions\r\n{\r\n    items?: ButtonGroupItem[];\r\n    selectionMode?: SelectionModeEnum;\r\n    checkboxes?: boolean;\r\n    tooltip?: boolean;\r\n\r\n    onSelect?(e: ButtonGroupSelectEvent): void;\r\n    onItemAdded?(e: ButtonGroupItemAddedEvent): void;\r\n    onItemRemoved?(e: ButtonGroupItemRemovedEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class ButtonGroup extends VrControl\r\n{\r\n    private _items: ButtonGroupItem[];\r\n    private _btnScrollBack: Button;\r\n    private _btnScrollForward: Button;\r\n    private _populating: boolean;\r\n\r\n    constructor(element: HTMLElement, options?: ButtonGroupOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new ButtonGroupOptions();\r\n\r\n        if (options.selectionMode == null) options.selectionMode = SelectionModeEnum.Single;\r\n        if (options.checkboxes == null) options.checkboxes = false;\r\n        if (options.items == null) options.items = [];\r\n        if (options.tooltip == null) options.tooltip = false;\r\n        //#endregion        \r\n\r\n        super(element, options, ControlTypeEnum.ButtonGroup);\r\n        this.element().style.cssText += \"display: inline-block;\";\r\n\r\n        //#region Back/Forward buttons for horizontal scroll\r\n        this._btnScrollBack = createButton({\r\n            icon: IconClassLight.CaretLeft,\r\n            visible: false,\r\n            enable: false,\r\n            colorSettings: { background: \"#f1f1f1\" },\r\n            css: \"border-top-right-radius: 0px; border-bottom-right-radius: 0px;\",\r\n            onClick: (e) =>\r\n            {\r\n                let leftPos = puma(this.element()).scrollLeft();\r\n                puma(this.element()).animate({ scrollLeft: leftPos - 20 }, 10);\r\n\r\n                this._btnScrollForward.enable();\r\n                if ((leftPos - 20) <= 0)\r\n                    this._btnScrollBack.disable();\r\n            }\r\n        }, this.container())\r\n        puma(this._btnScrollBack.container()).vrInsertBeforePuma(this.element())\r\n\r\n        this._btnScrollForward = createButton({\r\n            icon: IconClassLight.CaretRight,\r\n            visible: false,\r\n            colorSettings: { background: \"#f1f1f1\" },\r\n            css: \"border-top-left-radius: 0px; border-bottom-left-radius: 0px;\",\r\n            onClick: (e) =>\r\n            {\r\n                let leftPos = puma(this.element()).scrollLeft();\r\n                puma(this.element()).animate({ scrollLeft: leftPos + 20 }, 10);\r\n\r\n                this._btnScrollBack.enable();\r\n                if ((leftPos + 20) >= (this.element().scrollWidth - this.element().offsetWidth))\r\n                    this._btnScrollForward.disable();\r\n            }\r\n        }, this.container())\r\n        puma(this._btnScrollForward.container()).vrInsertAfterPuma(this.element())\r\n        //#endregion\r\n\r\n        //#region Items\r\n        this._items = [];\r\n        if (options.items != null)\r\n            this.items(options.items);\r\n        //#endregion\r\n    }\r\n\r\n    //#region Methods\r\n    items(items?: ButtonGroupItem[])\r\n    {\r\n        if (items != null)\r\n        {\r\n            this._populating = true;\r\n            for (let item of items)\r\n                this.addItem(item);\r\n\r\n            this.manageScrolling();\r\n            this._populating = false;\r\n        }\r\n        return this._items;\r\n    }\r\n\r\n    addItem(item: ButtonGroupItem)\r\n    {\r\n        this.items().push(item);\r\n\r\n        let options = this.getOptions();\r\n        let spanButton = puma(\"<span></span>\").vrAppendToPuma(this.element())[0];\r\n        puma(spanButton).addClass(\"buttonGroupItem\");\r\n\r\n        //#region Checkbox\r\n        let checkbox = null;\r\n        if (options.checkboxes)\r\n        {\r\n            checkbox = createCheckBox(\r\n                {\r\n                    checked: (item.selected === true) ? true : false,\r\n                    onCheck: (e) => puma(spanButton).click()\r\n                }, spanButton);\r\n            puma(checkbox.element()).attr(\"value\", item.value);\r\n        }\r\n        //#endregion\r\n\r\n        //#region Icon/ImageUrl\r\n        let iconOrImage = null;\r\n        if (item.icon != null)\r\n            iconOrImage = UtilityManager.createIcon(item.icon);\r\n        else if (item.imageUrl != null)\r\n            iconOrImage = puma(\"<img src='\" + item.imageUrl + \"' />\")[0];\r\n\r\n        if (iconOrImage != null)\r\n        {\r\n            puma(spanButton).vrAppendPuma(iconOrImage);\r\n\r\n            //#region Icon click\r\n            if (item.onIconClick != null)\r\n            {\r\n                puma(iconOrImage).on(\"click\", (e: JQuery.ClickEvent) =>\r\n                {\r\n                    let event = new ButtonGroupIconClickEvent();\r\n                    event.sender = this;\r\n                    event.value = puma(spanButton).attr(\"value\");\r\n                    event.selected = puma(spanButton).hasClass(\"buttonGroupItemSelected\");\r\n                    item.onIconClick!(event);\r\n                });\r\n            }\r\n            //#endregion\r\n        }\r\n        //#endregion\r\n\r\n        //#region Text\r\n        if (item.text == null) item.text = \"\";\r\n        let marginLeft = \"\";\r\n        if (item.icon != null || item.imageUrl != null)\r\n            marginLeft = \"margin-left: 5px;\";\r\n\r\n        let spanItemText = puma(\"<span class='buttonGroupItemText' style='height: 23px; \" + marginLeft + \"'>\" + item.text + \"</span>\").vrAppendToPuma(spanButton);\r\n        if (item.text != \"\")\r\n        {\r\n            let tooltip = \"\";\r\n            if (item.tooltip != null)\r\n                tooltip = item.tooltip;\r\n            else if (options.tooltip)\r\n                tooltip = item.text;\r\n\r\n            if (tooltip != \"\")\r\n                puma(spanItemText).attr(\"title\", tooltip);\r\n        }\r\n        //#endregion\r\n\r\n        puma(spanButton).attr(\"value\", item.value);\r\n\r\n        //#region Selected\r\n        if (item.selected === true)\r\n        {\r\n            if (!options.checkboxes)\r\n                puma(spanButton).addClass(\"buttonGroupItemSelected\");\r\n            else\r\n                checkbox!.check();\r\n        }\r\n        //#endregion\r\n\r\n        //#region Color settings\r\n        if (item.colorSettings != null)\r\n        {\r\n            let colorSettings = item.colorSettings;\r\n            if (colorSettings.textColor != null)\r\n                puma(spanButton).css(\"color\", colorSettings.textColor);\r\n            if (colorSettings.background != null)\r\n                puma(spanButton).css(\"background-color\", colorSettings.background);\r\n            if (colorSettings.border != null)\r\n                puma(spanButton).css(\"border-color\", colorSettings.border);\r\n        }\r\n        //#endregion\r\n\r\n        //#region Visibility/Enable\r\n        if (item.visible === false)\r\n            puma(spanButton).hide();\r\n\r\n        if (item.enable === false)\r\n            puma(spanButton).attr(\"disabled\", \"disabled\");\r\n        //#endregion\r\n\r\n        //#region Click\r\n        puma(spanButton).click((e: JQueryEventObject) =>\r\n        {\r\n            if (!this.enabled() || puma(spanButton).attr(\"disabled\") != null)\r\n            {\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if (options!.selectionMode == SelectionModeEnum.Single)\r\n                this.clear();\r\n\r\n            if (!options!.checkboxes)\r\n                puma(e.currentTarget).toggleClass(\"buttonGroupItemSelected\");\r\n            else\r\n            {\r\n                let checkbox = puma(e.currentTarget).find(\".vrCheckBox\")[0];\r\n                checkbox.checked = !checkbox.checked;\r\n            }\r\n\r\n            this.changeItem(puma(e.currentTarget).attr(\"value\"), puma(e.currentTarget).hasClass(\"buttonGroupItemSelected\"), item);\r\n            this.changeGlobal(puma(e.currentTarget).attr(\"value\"), puma(e.currentTarget).hasClass(\"buttonGroupItemSelected\"), item);\r\n        });\r\n        //#endregion\r\n\r\n        if (!this._populating)\r\n            this.manageScrolling();\r\n\r\n        if (item.css != null)\r\n            spanButton.style.cssText += item.css;\r\n\r\n        //#region Event\r\n        if (options.onItemAdded != null)\r\n        {\r\n            let event = new ButtonGroupItemAddedEvent();\r\n            event.sender = this;\r\n            event.value = String(item.value);\r\n            options.onItemAdded(event);\r\n        }\r\n        //#endregion\r\n    }\r\n\r\n    private manageScrolling()\r\n    {\r\n        let scrolling = puma(this.element()).vrHasScrollBar(true);\r\n        if (scrolling)\r\n        {\r\n            this._btnScrollBack.show();\r\n            this._btnScrollForward.show();\r\n\r\n            puma(puma(this.element()).find(\".buttonGroupItem\")[0]).css({ \"border-top-left-radius\": \"0px\", \"border-bottom-left-radius\": \"0px\", \"border-left\": \"none\" })\r\n            puma(puma(this.element()).find(\".buttonGroupItem\")[this.items().length - 1]).css({ \"border-top-right-radius\": \"0px\", \"border-bottom-right-radius\": \"0px\", \"border-right\": \"none\" })\r\n        }\r\n        else\r\n        {\r\n            this._btnScrollBack.hide();\r\n            this._btnScrollForward.hide();\r\n\r\n            puma(puma(this.element()).find(\".buttonGroupItem\")[0]).css({ \"border-top-left-radius\": \"4px\", \"border-bottom-left-radius\": \"4px\", \"border-left\": \"solid 1px #d9d9d9\" })\r\n            puma(puma(this.element()).find(\".buttonGroupItem\")[this.items().length - 1]).css({ \"border-top-right-radius\": \"4px\", \"border-bottom-right-radius\": \"4px\", \"border-right\": \"solid 1px #d9d9d9\" })\r\n        }\r\n    }\r\n\r\n    item(value: string)\r\n    {\r\n        return this.items().filter(k => k.value == value)[0];\r\n    }\r\n\r\n    removeItem(value: string)\r\n    {\r\n        let options = this.getOptions();\r\n        puma(this.container()).find(\".buttonGroupItem[value='\" + value + \"']\").remove();\r\n\r\n        let index = this.items().map(k => k.value).indexOf(value);\r\n        if (index != -1)\r\n            this.items().splice(index, 1);\r\n\r\n        this.manageScrolling();\r\n\r\n        //#region Event\r\n        if (options.onItemRemoved != null)\r\n        {\r\n            let event = new ButtonGroupItemRemovedEvent();\r\n            event.sender = this;\r\n            event.value = value;\r\n            options.onItemRemoved(event);\r\n        }\r\n        //#endregion\r\n    }\r\n\r\n    showItems(values: any[])\r\n    {\r\n        for (let value of values)\r\n            this.showItem(value);\r\n    }\r\n\r\n    showItem(value: any)\r\n    {\r\n        puma(this.container()).find(\".buttonGroupItem[value='\" + value + \"']\").show();\r\n        this.manageScrolling();\r\n    }\r\n\r\n    showAllItems()\r\n    {\r\n        let values = this.items().map(k => k.value);\r\n        this.showItems(values);\r\n    }\r\n\r\n    hideItems(values: any[])\r\n    {\r\n        for (let value of values)\r\n            this.hideItem(value);\r\n    }\r\n\r\n    hideItem(value: any)\r\n    {\r\n        puma(this.container()).find(\".buttonGroupItem[value='\" + value + \"']\").hide();\r\n        this.manageScrolling();\r\n    }\r\n\r\n    hideAllItems()\r\n    {\r\n        let values = this.items().map(k => k.value);\r\n        this.hideItems(values);\r\n    }\r\n\r\n    visibleItem(value: any, state?: boolean): boolean\r\n    {\r\n        let spanItem = puma(this.container()).find(\".buttonGroupItem[value='\" + value + \"']\");\r\n        if (state != null)\r\n        {\r\n            if (state) spanItem.show();\r\n            else spanItem.hide();\r\n        }\r\n\r\n        this.manageScrolling();\r\n        return spanItem.is(\":visible\");\r\n    }\r\n\r\n    select(values: string[] | number[], triggerChange = true): void\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.selectionMode == SelectionModeEnum.Single)\r\n            this.clear();\r\n\r\n        for (let value of values)\r\n        {\r\n            if (!options.checkboxes)\r\n                puma(this.container()).find(\".buttonGroupItem[value='\" + value + \"']\").addClass(\"buttonGroupItemSelected\");\r\n            else\r\n                puma(this.container()).find(\".buttonGroupItem .vrCheckBox[value='\" + value + \"']\")[0].checked = true;\r\n\r\n            if (triggerChange)\r\n                this.changeItem(String(value));\r\n        }\r\n\r\n        if (triggerChange)\r\n        {\r\n            let value = null;\r\n            if (this.selectionMode() == SelectionModeEnum.Single)\r\n                value = values.vrFirst();\r\n\r\n            this.changeGlobal(String(value));\r\n        }\r\n    }\r\n\r\n    selectIndex(index: number, triggerChange = true)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.selectionMode == SelectionModeEnum.Single)\r\n            this.clear();\r\n\r\n        if (!options.checkboxes)\r\n            puma(puma(this.container()).find(\".buttonGroupItem\")[index]).addClass(\"buttonGroupItemSelected\");\r\n        else\r\n            puma(this.container()).find(\".buttonGroupItem .vrCheckBox\")[index].checked = true;\r\n\r\n        let item = this.getItemByIndex(index);\r\n        let value = puma(item).attr(\"value\");\r\n\r\n        if (triggerChange)\r\n            this.changeItem(String(value));\r\n\r\n        if (triggerChange)\r\n            this.changeGlobal(String(value));\r\n    }\r\n\r\n    private changeGlobal(value?: string | null, selected?: boolean, item?: ButtonGroupItem)\r\n    {\r\n        if (item == null)\r\n            item = this.items().filter(k => k.value == value)[0];\r\n\r\n        let options = this.getOptions();\r\n        if (options!.onSelect != null)\r\n        {\r\n            let event = new ButtonGroupSelectEvent();\r\n            event.sender = this;\r\n            event.value = value;\r\n            event.selected = selected;\r\n            event.selectedValues = this.getSelectedValues();\r\n            window.setTimeout(() => options!.onSelect!(event));\r\n        }\r\n    }\r\n\r\n    private changeItem(value: string, selected = true, item?: ButtonGroupItem)\r\n    {\r\n        if (item == null)\r\n            item = this.items().filter(k => k.value == value)[0];\r\n\r\n        if (item != null && item.onClick != null)\r\n        {\r\n            let event = new ButtonGroupClickEvent();\r\n            event.sender = this;\r\n            event.value = value;\r\n            event.selected = selected;\r\n            item.onClick(event);\r\n        }\r\n    }\r\n\r\n    getSelectedValues(): string[]\r\n    {\r\n        let options = this.getOptions();\r\n        if (!options.checkboxes)\r\n            return Array.from(puma(this.container()).find(\".buttonGroupItem.buttonGroupItemSelected\")).map(k => puma(k).attr(\"value\"));\r\n        else\r\n            return Array.from(puma(this.container()).find(\".buttonGroupItem .vrCheckBox:checked\")).map(k => puma(k).attr(\"value\"));\r\n    }\r\n\r\n    value()\r\n    {\r\n        return puma(puma(this.container()).find(\".buttonGroupItem.buttonGroupItemSelected\")).attr(\"value\");\r\n    }\r\n\r\n    clear(): void\r\n    {\r\n        puma(this.container()).find(\".buttonGroupItem\").removeClass(\"buttonGroupItemSelected\");\r\n\r\n        let options = this.getOptions();\r\n        if (options.checkboxes)\r\n        {\r\n            for (let checkbox of Array.from<HTMLInputElement>(puma(this.container()).find(\".buttonGroupItem .vrCheckBox\")))\r\n                checkbox.checked = false;\r\n        }\r\n    }\r\n\r\n    selectionMode()\r\n    {\r\n        return this.getOptions().selectionMode;\r\n    }\r\n\r\n    getItemByValue(value: string): HTMLElement\r\n    {\r\n        return puma(this.container()).find(\".buttonGroupItem[value='\" + value + \"']\")[0];\r\n    }\r\n\r\n    getItemByIndex(index: number): HTMLElement\r\n    {\r\n        return puma(this.container()).find(\".buttonGroupItem\")[index];\r\n    }\r\n\r\n    itemTooltip(value: string, tooltip?: string): string\r\n    {\r\n        let item = this.getItemByValue(value);\r\n        if (tooltip != null)\r\n            puma(item).find(\".buttonGroupItemText\")[0].title = tooltip;\r\n\r\n        return puma(item).find(\".buttonGroupItemText\")[0].title;\r\n    }\r\n\r\n    itemText(value: string, text?: string, updateTooltip = true): string\r\n    {\r\n        let item = this.getItemByValue(value);\r\n        let buttonGroupItemText = puma(item).find(\".buttonGroupItemText\")[0];\r\n        if (text != null && buttonGroupItemText != null)\r\n        {\r\n            buttonGroupItemText.innerHTML = text;\r\n            if (updateTooltip)\r\n                buttonGroupItemText.title = text;\r\n        }\r\n        return (buttonGroupItemText != null) ? buttonGroupItemText.innerHTML : \"\";\r\n    }\r\n\r\n    itemTextByIndex(index: number, text?: string): string\r\n    {\r\n        let item = this.getItemByIndex(index);\r\n        if (text != null)\r\n            puma(item).find(\".buttonGroupItemText\")[0].innerHTML = text;\r\n\r\n        return puma(item).find(\".buttonGroupItemText\")[0].innerHTML;\r\n    }\r\n\r\n    enableItem(value: any)\r\n    {\r\n        let element = this.getItemByValue(value);\r\n        puma(element).removeAttr(\"disabled\");\r\n    }\r\n\r\n    disableItem(value: any)\r\n    {\r\n        let element = this.getItemByValue(value);\r\n        puma(element).attr(\"disabled\", \"disabled\");\r\n    }\r\n    //#endregion\r\n\r\n    //#region Overrides\r\n    enable()\r\n    {\r\n        super.enable();\r\n        for (let item of this.items())\r\n            this.enableItem(item.value!);\r\n    }\r\n\r\n    disable()\r\n    {\r\n        super.disable();\r\n        for (let item of this.items())\r\n            this.disableItem(item.value!);\r\n    }\r\n    //#endregion\r\n\r\n    getOptions(): ButtonGroupOptions\r\n    {\r\n        return this.options<ButtonGroupOptions>();\r\n    }\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass ButtonGroupEvent extends VrControlsEvent\r\n{\r\n    sender: ButtonGroup;\r\n    value?: string | null;\r\n}\r\n\r\nclass ButtonGroupSelectEvent extends ButtonGroupEvent\r\n{\r\n    selectedValues: string[];\r\n    selected?: boolean;\r\n}\r\n\r\nclass ButtonGroupItemAddedEvent extends ButtonGroupEvent { }\r\nclass ButtonGroupItemRemovedEvent extends ButtonGroupEvent { }\r\n\r\nexport class ButtonGroupClickEvent extends ButtonGroupEvent\r\n{\r\n    value: string;\r\n    selected: boolean;\r\n}\r\n\r\nexport class ButtonGroupIconClickEvent extends ButtonGroupEvent\r\n{\r\n    value: string;\r\n    selected: boolean;\r\n}\r\n//#endregion","import { ControlTypeEnum, ButtonModeEnum, ColorSettings, createButton, IconClassLight, IconClass, PopupSettings, puma, shadowRoot, createSeparator, OrientationEnum } from \"../vr\";\r\nimport { VrControlOptions, VrControl } from \"../common\";\r\nimport { UtilityManager } from \"../../../src/managers/utilityManager\";\r\nimport { Button } from \"./button\";\r\n\r\n//#region Options\r\nexport class SplitButtonOptions extends VrControlOptions\r\n{\r\n    text?: string;\r\n    icon?: IconClass;\r\n    imageUrl?: string;\r\n    colorSettings?: ColorSettings;\r\n    popupSettings?: PopupSettings;\r\n    tooltip?: string;\r\n    items?: SplitButtonItem[];\r\n    hoverMode?: boolean;\r\n    modal?: boolean;\r\n    showDefault?: boolean;\r\n    separator?: boolean;\r\n\r\n    onClick?: (e: SplitButtonMainClickEvent) => void;\r\n    onSelect?: (e: SplitButtonSelectClickEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class SplitButton extends VrControl\r\n{\r\n    private _popup: HTMLElement;\r\n    private _btnMain: Button;\r\n    private _items: SplitButtonItem[];\r\n    private _itemButtonList: Button[];\r\n\r\n    constructor(element: HTMLElement, options?: SplitButtonOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new SplitButtonOptions();\r\n\r\n        if (options.text == null) options.text = \"\";\r\n        if (options.items == null) options.items = [];\r\n        if (options.hoverMode == null) options.hoverMode = false;\r\n        if (options.modal == null) options.modal = false;\r\n        if (options.showDefault == null) options.showDefault = true;\r\n        if (options.separator == null) options.separator = false;\r\n        if (options.tabIndex == null) options.tabIndex = -1;\r\n\r\n        let width = options.width;\r\n        options.width = undefined;\r\n        //#endregion\r\n\r\n        super(element, options, ControlTypeEnum.SplitButton);\r\n        this._itemButtonList = [];\r\n\r\n        //#region Main button\r\n        this._btnMain = createButton(\r\n            {\r\n                text: options.text,\r\n                icon: options.icon,\r\n                imageUrl: options.imageUrl,\r\n                colorSettings: options.colorSettings,\r\n                tooltip: options.tooltip,\r\n                enable: options.enable,\r\n                width: width,\r\n                tabIndex: options.tabIndex,\r\n                css: \"border-top-right-radius: 0px; border-bottom-right-radius: 0px;\" + ((options.onClick != null) ? \"background-color: #f8f8f8;\" : \"\"),\r\n                onClick: (e) => \r\n                {\r\n                    if (options!.onClick != null)\r\n                        this.click();\r\n                    else\r\n                    {\r\n                        if (puma(this._popup).is(\":visible\"))\r\n                            this.close();\r\n                        else\r\n                            this.open();\r\n                    }\r\n                },\r\n                onHover: (e) =>\r\n                {\r\n                    if (options!.hoverMode)\r\n                        this.open();\r\n\r\n                    puma(divPickerIcon).addClass(\"hoverClass\");\r\n                },\r\n                onBlur: (e) =>\r\n                {\r\n                    puma(divPickerIcon).removeClass(\"hoverClass\");\r\n                }\r\n            }, this.element(), null, element.id + \"btnMain\");\r\n\r\n        puma(this.container()).mouseleave((e: any) => \r\n        {\r\n            if (options!.hoverMode && e.relatedTarget != this._popup)\r\n                this.close();\r\n        });\r\n        //#endregion\r\n\r\n        //#region Default items\r\n        if (options.onClick != null && options.showDefault)\r\n        {\r\n            let defaultItem = new SplitButtonItem();\r\n            defaultItem.text = options.text;\r\n            defaultItem.icon = options.icon;\r\n            defaultItem.imageUrl = options.imageUrl;\r\n            defaultItem.colorSettings = options.colorSettings;\r\n            defaultItem.onClick = options.onClick as any;\r\n            options.items.splice(0, 0, defaultItem);\r\n        }\r\n        //#endregion\r\n\r\n        //Set items\r\n        this.items(options.items);\r\n\r\n        //#region Picker icon\r\n        let classPickerIcon = (options.onClick != null) ? \"vrDivPickerIconSplitButton\" : \"vrDivPickerIconSplitButtonFlat\";\r\n        let pickerIcon = UtilityManager.createIcon(IconClassLight.CaretDown);\r\n        let divPickerIcon = puma(\"<div class='\" + classPickerIcon + \"'></div>\").vrAppendToPuma(this.element())[0];\r\n        puma(divPickerIcon).vrAppendPuma(pickerIcon);\r\n        puma(divPickerIcon).click(() => \r\n        {\r\n            if (puma(this._popup).is(\":visible\"))\r\n                this.close();\r\n            else\r\n                this.open();\r\n        });\r\n\r\n        puma(divPickerIcon).on(\"mouseenter\", (e: JQuery.MouseEnterEvent) => puma(this._btnMain.element()).addClass(\"hoverClass\"))\r\n        puma(divPickerIcon).on(\"mouseleave\", (e: JQuery.MouseLeaveEvent) => puma(this._btnMain.element()).removeClass(\"hoverClass\"))\r\n        //#endregion\r\n\r\n        window.addEventListener(\"click\", (e: any) =>\r\n        {\r\n            if (puma(this._popup).is(\":visible\") && !puma(this.container())[0].contains(e.target))\r\n                this.close();\r\n        });\r\n\r\n        let baseListener = (shadowRoot() != null) ? shadowRoot() : document;\r\n        baseListener!.addEventListener(\"scroll\", (e) =>\r\n        {\r\n            if (!puma(e.target).hasClass(\"splitButton_divPopup\") && puma(this._popup).is(\":visible\"))\r\n                this.close();\r\n        }, true);\r\n    }\r\n\r\n    //#region Methods\r\n    open(): void\r\n    {\r\n        if (!this.enabled())\r\n            return;\r\n\r\n        let options = this.getOptions();\r\n\r\n        if (this._popup == null)\r\n            this._popup = puma(\"<div class='splitButton_divPopup' id='\" + this.element().id + \"_divPopup'></div>\").vrAppendToPuma((shadowRoot() != null) ? shadowRoot() : document.body)[0];\r\n\r\n        puma(this._popup).attr(\"tabindex\", \"0\");\r\n        this._popup.style.cssText += \"min-width: 100px;\";\r\n\r\n        puma(this._popup).mouseleave((e: any) => \r\n        {\r\n            if (options!.hoverMode)\r\n                this.close();\r\n        });\r\n\r\n        if (options.modal)\r\n        {\r\n            puma(\"#vrWindowBackground_\" + this.element().id).remove();\r\n            let background = puma(\"<div class='vrWindowBackground' id='vrWindowBackground_\" + this.element().id + \"'></div>\").vrAppendToPuma(document.body)[0];\r\n            puma(background).show();\r\n            puma(background).css(\"z-index\", (Number(puma(this._popup).css(\"z-index\")) - 1));\r\n            puma(background).click(() => this.close());\r\n        }\r\n\r\n        this._itemButtonList = [];\r\n        this.items(this.items());\r\n        super.settingPopup(this._popup, options.popupSettings!);\r\n    }\r\n\r\n    close(): void\r\n    {\r\n        puma(this._popup).remove();\r\n        (this._popup as any) = null;\r\n        puma(\"#vrWindowBackground_\" + this.element().id).remove();\r\n    }\r\n\r\n    items(items?: SplitButtonItem[]): SplitButtonItem[]\r\n    {\r\n        if (items != null)\r\n        {\r\n            this._items = items;\r\n            let i = 0;\r\n            for (let item of items)\r\n            {\r\n                if (item.separator === true)\r\n                {\r\n                    let divSeparatorContainerValue = (item.value != null) ? \"value='\" + item.value + \"'\" : \"value='separator'\";\r\n                    let separatorContainer = puma(\"<div \" + divSeparatorContainerValue + \"></div>\").vrAppendToPuma(this._popup);\r\n                    let separator = createSeparator({\r\n                        tag: (item.value == null) ? \"separator\" : item.value,\r\n                        orientation: OrientationEnum.Horizontal,\r\n                        visible: item.visible,\r\n                        cssContainer: \"margin-top: -8px !important; margin-bottom: 5px !important;\"\r\n                    }, separatorContainer);\r\n\r\n                    this._itemButtonList.push(separator as any);\r\n                    continue;\r\n                }\r\n\r\n                this.drawItem(item, i);\r\n                i++;\r\n            }\r\n        }\r\n        return this._items;\r\n    }\r\n\r\n    private drawItem(item: SplitButtonItem, index?: number)\r\n    {\r\n        let options = this.getOptions();\r\n        if (index == null) index = -1;\r\n\r\n        let divItemContainerValue = (item.value != null) ? \"value='\" + item.value + \"'\" : \"\";\r\n        if (item.text != null && (divItemContainerValue == null || divItemContainerValue == \"\"))\r\n            divItemContainerValue = \"value='\" + item.text.replace(/[^a-z0-9\\s]/gi, \"\").replace(/[_\\s]/g, \"\") + \"'\";\r\n\r\n        let divItemContainer = puma(\"<div class='vrSplitButton_divItemContainer' \" + divItemContainerValue + \"></div>\").vrAppendToPuma(this._popup);\r\n        let button = createButton(\r\n            {\r\n                text: item.text,\r\n                icon: item.icon,\r\n                imageUrl: item.imageUrl,\r\n                mode: item.mode,\r\n                colorSettings: item.colorSettings,\r\n                confirmationMessage: item.confirmationMessage,\r\n                tooltip: item.tooltip,\r\n                visible: item.visible,\r\n                enable: item.enable,\r\n                tag: item.value,\r\n                width: \"100%\",\r\n                css: \"width: 100%; text-align: left; border: none;\" + item.css,\r\n                cssContainer: item.cssContainer + \";\" + ((options.separator) ? \"border-bottom: solid 1px #dedede;\" : \"\"),\r\n                class: item.class,\r\n                tabIndex: options.tabIndex,\r\n                onClick: (e) => \r\n                {\r\n                    this.close();\r\n                    if (item.onClick != null)\r\n                    {\r\n                        let clickEvent = new SplitButtonClickEvent();\r\n                        clickEvent.sender = this;\r\n                        clickEvent.item = item;\r\n                        item.onClick(clickEvent);\r\n                    }\r\n\r\n                    if (options.onSelect != null)\r\n                    {\r\n                        let clickEvent = new SplitButtonSelectClickEvent();\r\n                        clickEvent.text = options.text;\r\n                        clickEvent.value = String(item.value);\r\n                        clickEvent.mainButton = false;\r\n                        options.onSelect(clickEvent);\r\n                    }\r\n                }\r\n            }, divItemContainer);\r\n\r\n        if (item.value != null)\r\n            puma(button.element()).attr(\"value\", item.value);\r\n\r\n        this._itemButtonList.push(button);\r\n    }\r\n\r\n    addItem(item: SplitButtonItem)\r\n    {\r\n        this.drawItem(item);\r\n        this._items.push(item);\r\n    }\r\n\r\n    removeItem(value: string | number)\r\n    {\r\n        puma(this._popup).find(\".vrSplitButton_divItemContainer[value='\" + value + \"']\").remove();\r\n        this._items.vrDeleteAllBy(k => k.value == value);\r\n    }\r\n\r\n    clearItems()\r\n    {\r\n        puma(this._popup).empty();\r\n        this._items = [];\r\n        this._itemButtonList = [];\r\n    }\r\n\r\n    enable(): void\r\n    {\r\n        super.enable();\r\n        puma(this.container()).find(\".vrDivPickerIconSplitButton\").removeClass(\"vrDivPickerIconDisable\");\r\n        puma(this.container()).find(\".vrDivPickerIconSplitButtonFlat\").removeClass(\"vrDivPickerIconDisable\");\r\n\r\n        if (this._btnMain != null)\r\n            this._btnMain.enable();\r\n    }\r\n\r\n    disable(): void\r\n    {\r\n        super.disable();\r\n        puma(this.container()).find(\".vrDivPickerIconSplitButton\").addClass(\"vrDivPickerIconDisable\");\r\n        puma(this.container()).find(\".vrDivPickerIconSplitButtonFlat\").addClass(\"vrDivPickerIconDisable\");\r\n\r\n        if (this._btnMain != null)\r\n            this._btnMain.disable();\r\n    }\r\n\r\n    //#region Visibility\r\n    itemVisible(value: string, state?: boolean): boolean\r\n    {\r\n        let itemButton = this._itemButtonList.filter(k => k.tag() == value)[0];\r\n        if (state != null)\r\n        {\r\n            itemButton.visible(state);\r\n            let index = this._items.findIndex(k => k.value == value);\r\n            let item = this._items[index];\r\n            item.visible = state;\r\n        }\r\n        return itemButton.visible();\r\n    }\r\n\r\n    showItem(value: string): void\r\n    {\r\n        this.itemVisible(value, true);\r\n    }\r\n\r\n    hideItem(value: string): void\r\n    {\r\n        this.itemVisible(value, false);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Enable\r\n    itemEnable(value: string, state?: boolean): boolean\r\n    {\r\n        let itemButton = this._itemButtonList.filter(k => k.tag() == value)[0];\r\n        if (state != null)\r\n        {\r\n            itemButton.enabled(state);\r\n            let index = this._items.findIndex(k => k.value == value);\r\n            let item = this._items[index];\r\n            item.enable = state;\r\n        }\r\n\r\n        return itemButton.enabled();\r\n    }\r\n\r\n    enableAllItems()\r\n    {\r\n        this.enableItems(this.items().map(k => String(k.value)));\r\n    }\r\n\r\n    enableItems(values: string[])\r\n    {\r\n        for (let value of values)\r\n            this.enableItem(value);\r\n    }\r\n\r\n    enableItem(value: string): void\r\n    {\r\n        this.itemEnable(value, true);\r\n    }\r\n\r\n    disableAllItems()\r\n    {\r\n        this.disableItems(this.items().map(k => String(k.value)));\r\n    }\r\n\r\n    disableItems(values: string[])\r\n    {\r\n        for (let value of values)\r\n            this.disableItem(value);\r\n    }\r\n\r\n    disableItem(value: string): void\r\n    {\r\n        this.itemEnable(value, false);\r\n    }\r\n    //#endregion\r\n\r\n    item(value: string | number): Button | null\r\n    {\r\n        let itemButton = this._itemButtonList.filter(k => k.tag() == value)[0];\r\n        return itemButton;\r\n    }\r\n\r\n    mainItem()\r\n    {\r\n        return this._btnMain;\r\n    }\r\n\r\n    private getOptions(): SplitButtonOptions\r\n    {\r\n        return this.options<SplitButtonOptions>();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Events\r\n    click(): void\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.onClick != null)\r\n        {\r\n            let clickEvent = new SplitButtonMainClickEvent();\r\n            clickEvent.sender = this;\r\n            clickEvent.text = options.text;\r\n            clickEvent.items = options.items;\r\n            options.onClick(clickEvent);\r\n        }\r\n\r\n        if (options.onSelect != null)\r\n        {\r\n            let clickEvent = new SplitButtonSelectClickEvent();\r\n            clickEvent.text = options.text;\r\n            clickEvent.mainButton = true;\r\n            options.onSelect(clickEvent);\r\n        }\r\n    }\r\n    //#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nexport class SplitButtonItem\r\n{\r\n    text?: string;\r\n    value?: string | number;\r\n    icon?: IconClass;\r\n    imageUrl?: string;\r\n    separator?: boolean;\r\n    mode?: ButtonModeEnum;\r\n    colorSettings?: ColorSettings;\r\n    confirmationMessage?: string;\r\n    visible?: boolean;\r\n    enable?: boolean;\r\n    tooltip?: string;\r\n    css?: string;\r\n    cssContainer?: string;\r\n    class?: string;\r\n\r\n    onClick?: (e: SplitButtonClickEvent) => void;\r\n}\r\n\r\nclass SplitButtonClickEvent\r\n{\r\n    sender: SplitButton;\r\n    item: SplitButtonItem;\r\n}\r\n\r\nclass SplitButtonMainClickEvent\r\n{\r\n    sender: SplitButton;\r\n    text?: string;\r\n    value?: string;\r\n    items?: SplitButtonItem[];\r\n}\r\n\r\nclass SplitButtonSelectClickEvent\r\n{\r\n    text?: string;\r\n    value?: string;\r\n    mainButton?: boolean;\r\n}\r\n//#endregion","import { UtilityManager } from \"./utilityManager\";\r\n\r\nexport class KeyValuePair<K, V>\r\n{\r\n    key: K;\r\n    value: V;\r\n}\r\n\r\nexport class Dictionary<K, V>\r\n{\r\n    items: KeyValuePair<K, V>[];\r\n\r\n    private _map: Map<K, V> | null;\r\n    private get map(): Map<K, V>\r\n    {\r\n        if (this._map == null)\r\n            this._map = this.asMap();\r\n        return this._map;\r\n    }\r\n\r\n    constructor()\r\n    {\r\n        this.items = [];\r\n    }\r\n\r\n    public asMap(): Map<K, V>\r\n    {\r\n        return new Map<K, V>(this.items.map(k => [k.key, k.value]));\r\n    }\r\n\r\n    public static fromMap<K, V>(map: Map<K, V>): Dictionary<K, V>\r\n    {\r\n        let dict = new Dictionary<K, V>();\r\n\r\n        for (let item of map)\r\n        {\r\n            let pair = new KeyValuePair<K, V>();\r\n            pair.key = item[0];\r\n            pair.value = item[1];\r\n            dict.items.push(pair);\r\n        }\r\n\r\n        dict._map = map;\r\n\r\n        return dict;\r\n    }\r\n\r\n    public static parse<K, V>(dict: Dictionary<K, V>): Dictionary<K, V>\r\n    {\r\n        let ret = new Dictionary<K, V>();\r\n        ret.items = dict.items;\r\n        return ret;\r\n    }\r\n\r\n    public get(key: K): V | undefined\r\n    {\r\n        return this.map.get(key);\r\n    }\r\n\r\n    public set(key: K, value: V)\r\n    {\r\n        let item = this.items.find(k => k.key == key);\r\n        if (item == null)\r\n        {\r\n            item = new KeyValuePair<K, V>();\r\n            item.key = key;\r\n        }\r\n        item.value = value;\r\n\r\n        this.map.set(key, value);\r\n        this.items.push(item);\r\n    }\r\n\r\n    //#region Utility\r\n    public has(key: K)\r\n    {\r\n        return this.map.has(key);\r\n    }\r\n\r\n    public delete(key: K)\r\n    {\r\n        let itemToDelete = this.items.find(k => k.key == key);\r\n        if (itemToDelete != null)\r\n            this.items.vrDeleteItem(itemToDelete, \"key\");\r\n        this.map.delete(key);\r\n    }\r\n\r\n    public changeKey(oldKey: K, newKey: K)\r\n    {\r\n        let oldItems = UtilityManager.duplicate(this.get(oldKey));\r\n        this.delete(oldKey);\r\n        this.set(newKey, oldItems);\r\n    }\r\n\r\n    public keys()\r\n    {\r\n        return this.items.map(k => k.key);\r\n    }\r\n    //#endregion\r\n}","import { ControlTypeEnum, IconClassLight, IconClass, WindowAutoSizeDirectionEnum, dialog, confirm, alert, ButtonModeEnum, createSplitButton, createComboBox, ComboBoxTypeEnum, prompt, createButton, DateModeEnum, createTextBox, createCheckBox, createWindow, WindowFooterItemTypeEnum, createDatePicker, PositionEnum, TextModeEnum, WindowFooterItemAlignEnum, GridHeightModeEnum, GridCheckboxModeEnum, GridModeEnum, GridColumnTypeEnum, GridAlignEnum, GridAggregateMode, GridLabelUnderlineMode, GridToolbarItemType, GridDateFilterTypeEnum, GridNumberFilterTypeEnum, createGrid, createSwitch, GridColumn, GridToolbarItem, puma, GridButtonSettings, KeyEnum, GridSortDirectionEnum, GridGroupBySettings, GridSortSettings, GridGroupByItem, createButtonGroup, SelectionModeEnum, createLabel, createColorPicker, GridGroupExpandCollapseEvent, GridGroupEditClickEvent, GridGroupDisplayValueEvent, notify, showLoader, hideLoader, IconClassRegular, IconClassSolid, notifyError, NumberFormatRoundingSettings, NumberFormatSettings, RoundingModeEnum, GridPageSelectedEvent, notifyWarning, GridScrollEvent, div, ControlPositionEnum, createCheckBoxList, OrientationEnum } from \"../vr\";\r\nimport { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { Window } from \"./Window\";\r\nimport { SplitButton, SplitButtonOptions } from \"./splitButton\";\r\nimport { ControlManager } from \"../../../src/managers/controlManager\";\r\nimport { ComboBox, ComboBoxOptions } from \"./comboBox\";\r\nimport { CheckBox } from \"./checkbox\";\r\nimport { TextBox, TextBoxOptions } from \"./textbox\";\r\nimport { DatePicker, DatePickerOptions } from \"./datePicker\";\r\nimport { Dictionary } from \"../../../src/managers/dictionary\";\r\nimport { ColorPicker } from \"./colorPicker\";\r\nimport { Button } from \"./button\";\r\nimport { UtilityManager } from \"../../../src/managers/utilityManager\";\r\nimport { CheckBoxList } from \"./checkboxList\";\r\nimport { Switch } from \"./switch\";\r\n\r\n//#region Options\r\nexport class GridOptions extends VrControlOptions\r\n{\r\n    //#region Properties\r\n    columns?: GridColumn[];\r\n    toolbar?: GridToolbarItem[];\r\n    height?: string | number | GridHeightModeEnum;\r\n    dataSource?: any[];\r\n    rebind?: GridRebindRequest;\r\n    excel?: GridExcelRequest;\r\n    tooltip?: boolean;\r\n    checkboxes?: boolean | GridCheckboxModeEnum;\r\n    dataSourceFieldId?: string;\r\n    rowHeight?: number;\r\n    multilineRows?: boolean;\r\n    multilineHeader?: boolean;\r\n    hideEditButton?: boolean;\r\n    autoWindowSettings?: GridAutoWindowSettings;\r\n    mode?: GridModeEnum;\r\n    filterable?: boolean;\r\n    alternateRowColors?: boolean | string;\r\n    hoverRowColor?: boolean;\r\n    rowColorProperty?: string;\r\n    pageSize?: number | boolean;\r\n    largePageSize?: boolean;\r\n    footer?: boolean | GridFooterSettings;\r\n    header?: boolean;\r\n    resizable?: boolean;\r\n    reorderable?: boolean;\r\n    lockable?: boolean;\r\n    groupBy?: string[] | GridGroupBySettings | null;\r\n    groupable?: boolean;\r\n    sortable?: boolean;\r\n    sortBy?: string | GridSortSettings | null;\r\n    serverBinding?: boolean | GridServerBindSettings;\r\n    roundingSettings?: NumberFormatRoundingSettings;\r\n\r\n    //**********************TODO//**********************\r\n    layoutSettings?: GridLayoutSettings | boolean;\r\n    //#endregion\r\n\r\n    //#region Events\r\n    onDataSourceChanged?: () => void;\r\n    onDataBound?: (e: GridOnDataBoundEvent) => void;\r\n    onRowDataBound?: (e: GridOnRowDataBoundEvent) => void | string;\r\n    onSelectRow?: (e: GridSelectRowEvent) => void;\r\n    onSelectAllRows?: (e: GridSelectAllRowsEvent) => void;\r\n    onUnselectRow?: (e: GridUnselectRowEvent) => void;\r\n    onUnselectAllRows?: (e: GridUnselectAllRowsEvent) => void;\r\n    onAutoWindowOpen?: (e: AutoWindowOpenEvent) => void;\r\n    onGroupExpandCollapse?: (e: GridGroupExpandCollapseEvent) => void;\r\n    onGroupEditClick?: (e: GridGroupEditClickEvent) => void;\r\n    onPageSelected?: (e: GridPageSelectedEvent) => void;\r\n    onScroll?: (e: GridScrollEvent) => void;\r\n    //#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Grid extends VrControl\r\n{\r\n    //#region Variables\r\n    private _fitSpaceColumnPercentage: number;\r\n    private _showTotals: boolean;\r\n    private _isResizing: boolean;\r\n    private _isDragging: boolean;\r\n    private _actualSortingInfo: GridSortingInfo | null;\r\n    private _columnOptions: GridColumnPosition[];\r\n    private _actualPageSize: number;\r\n    private _actualPageSelected: number;\r\n    private _internalOptions: GridOptions;\r\n    private _tempRebindInfo: TempRebindInfo | null;\r\n    private _pageSizeUnlimited: boolean;\r\n    private _checkedItemsForFiltering: any[] | null;\r\n    private _timeoutFilterText: number;\r\n    private _workerTotals: Worker;\r\n    private _workerTotalsGroup: Worker;\r\n\r\n    //#region DataSource\r\n    private _dataSource: any[] | null;\r\n    private _originalDataSource: any[];\r\n    private _deletedItems: any[];\r\n    private _actualEditedItem: any | null;\r\n    private _lastIndexAdded: number;\r\n    private _responseForServerBinding: any;\r\n    private _serverBindingPagination: GridServerBindPagination;\r\n    //#endregion\r\n\r\n    //#region Filtering\r\n    private _wndFiltering: Window;\r\n    private _dictionaryDataValues: Map<string, string[]>;\r\n    private _dictionaryFilterConditions: Map<string, GridFilterSettings>;\r\n    //#endregion\r\n\r\n    //#region Show/Hide & Group\r\n    private _wndActions: Window;\r\n    private _groupByActualValue: any;\r\n    private _originalHiddenColumnFields: string[];\r\n    //#endregion\r\n\r\n    //#region Auto window\r\n    private _wndAutoWindow: Window;\r\n    //#endregion\r\n\r\n    //#region Layout\r\n    private _wndLayout: Window;\r\n    private _grdLayout: Grid;\r\n    private _actualLayout: GridLayout | null;\r\n    private _originalOptionsForLayout: GridLayoutStructure;\r\n    private _customLayouts: GridLayout[];\r\n    //#endregion\r\n\r\n    //#region Controls\r\n    private _cellButtons: Map<string, GridControlData>;\r\n    private _cellIcons: Map<string, GridControlData>;\r\n    private _cellCustoms: Map<string, GridControlData>;\r\n    private _cellLabels: Map<string, GridControlData>;\r\n    private _cellImages: Map<string, GridControlData>;\r\n    //#endregion\r\n\r\n    //#region Structure\r\n    private _elementId: string;\r\n    private _elementLocked: HTMLElement;\r\n    private _divToolbar: HTMLElement;\r\n    private _divHeaderContainer: HTMLElement;\r\n    private _divHeader: HTMLElement;\r\n    private _divHeaderLocked: HTMLElement;\r\n    private _divFilters: HTMLElement;\r\n    private _divFiltersLocked: HTMLElement;\r\n    private _divBody: HTMLElement;\r\n    private _divBodyLocked: HTMLElement;\r\n    private _divTotals: HTMLElement;\r\n    private _divTotalsLocked: HTMLElement;\r\n    private _divFooter: HTMLElement;\r\n    private _spanFitHeaderSpace: HTMLSpanElement;\r\n    private _spanFitFilterSpace: HTMLSpanElement;\r\n    private _spanFitTotalsSpace: HTMLSpanElement;\r\n    //#endregion\r\n\r\n    //#endregion\r\n\r\n    constructor(element: HTMLElement, options?: GridOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new GridOptions();\r\n\r\n        if (options.addToControlList == null) options.addToControlList = false;\r\n        if (options.width == null) options.width = \"100%\";\r\n        if (options.tooltip == null) options.tooltip = true;\r\n        if (options.dataSourceFieldId == null) options.dataSourceFieldId = \"id\";\r\n        if (options.multilineRows == null) options.multilineRows = false;\r\n        if (options.multilineHeader == null) options.multilineHeader = false;\r\n        if (options.rowHeight == null) options.rowHeight = 27;\r\n        if (options.columns == null) options.columns = [];\r\n        if (options.hideEditButton == null) options.hideEditButton = false;\r\n        if (options.mode == null) options.mode = GridModeEnum.Sync;\r\n        if (options.pageSize == null || options.pageSize === true) options.pageSize = 50;\r\n        if (options.filterable == null) options.filterable = true;\r\n        if (options.alternateRowColors == null) options.alternateRowColors = true;\r\n        if (options.hoverRowColor == null) options.hoverRowColor = false;\r\n        if (options.footer == null) options.footer = true;\r\n        if (options.header == null) options.header = true;\r\n        if (options.resizable == null) options.resizable = true;\r\n        if (options.reorderable == null) options.reorderable = true;\r\n        if (options.largePageSize == null) options.largePageSize = false;\r\n        if (options.enable == null) options.enable = true;\r\n        if (options.excel == null) options.excel = options.rebind;\r\n        if (options.lockable == null) options.lockable = true;\r\n\r\n        if (options.checkboxes == null || options.checkboxes === false) options.checkboxes = GridCheckboxModeEnum.None;\r\n        if (options.checkboxes === true) options.checkboxes = GridCheckboxModeEnum.MultiCheck;\r\n\r\n        //#region Server binding\r\n        if (options.serverBinding == null) options.serverBinding = false;\r\n        if (options.serverBinding === true)\r\n            options.serverBinding = new GridServerBindSettings();\r\n\r\n        if (options.serverBinding !== false)\r\n        {\r\n            if (options.serverBinding.itemCountPropertyName == null) options.serverBinding.itemCountPropertyName = \"itemCount\";\r\n            if (options.serverBinding.totalsPropertyName == null) options.serverBinding.totalsPropertyName = \"totals\";\r\n            if (options.serverBinding.excelDownloadUrlPropertyName == null) options.serverBinding.excelDownloadUrlPropertyName = \"excelDownloadUrl\";\r\n        }\r\n        //#endregion\r\n\r\n        //#region Layout\r\n        if (options.layoutSettings == null || options.layoutSettings === true)\r\n            options.layoutSettings = new GridLayoutSettings();\r\n\r\n        if (options.layoutSettings !== false)\r\n            if (options.layoutSettings.name == null) options.layoutSettings.name = \"\";\r\n        //#endregion\r\n\r\n        //#region Sort\r\n        if (options.sortable == null) options.sortable = true;\r\n        if (options.sortBy != null)\r\n        {\r\n            let sortByField = options.sortBy;\r\n            if (typeof (options.sortBy) == \"string\")\r\n            {\r\n                options.sortBy = new GridSortSettings();\r\n                options.sortBy.field = String(sortByField);\r\n            }\r\n\r\n            if ((options.sortBy as GridSortSettings).direction == null) (options.sortBy as GridSortSettings).direction = GridSortDirectionEnum.Asc;\r\n        }\r\n        //#endregion\r\n\r\n        //#region GroupBy\r\n        if (options.groupable == null)\r\n            options.groupable = true;\r\n\r\n        if (options.groupBy != null)\r\n        {\r\n            if (Array.isArray(options.groupBy))\r\n            {\r\n                let groupByFields = options.groupBy;\r\n                options.groupBy = new GridGroupBySettings();\r\n                options.groupBy.fields = groupByFields;\r\n                options.groupBy.sortBy = { field: groupByFields[0], direction: GridSortDirectionEnum.Asc };\r\n            }\r\n\r\n            if (options.groupBy.sortBy == null) options.groupBy.sortBy = new GridSortSettings();\r\n            if (options.groupBy.sortBy.direction == null) options.groupBy.sortBy.direction = GridSortDirectionEnum.Asc;\r\n\r\n            let groupByFields = options.groupBy.fields;\r\n            options.groupBy.fields = [];\r\n            if (groupByFields != null)\r\n            {\r\n                for (let field of groupByFields)\r\n                {\r\n                    if (typeof (field) == \"string\")\r\n                        options.groupBy.fields.push({ field: field } as any);\r\n                    else\r\n                        options.groupBy.fields.push(field as any);\r\n                }\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#region Check columns field\r\n        for (let column of options.columns)\r\n        {\r\n            let fieldList = options.columns.map(k => k.field);\r\n            let fieldListFiltered = fieldList.filter(k => k == column.field);\r\n            if (fieldListFiltered.length > 1)\r\n                throw new Error(\"La proprietà 'field' delle colonne deve essere univoca!!!\");\r\n        }\r\n        //#endregion\r\n\r\n        //#region Footer default\r\n        if (options.footer == null || options.footer === true)\r\n            options.footer = new GridFooterSettings();\r\n\r\n        if (options.footer !== false)\r\n        {\r\n            if (options.footer.maxVisiblePages == null) options.footer.maxVisiblePages = 10;\r\n            if (options.footer.showPagination == null) options.footer.showPagination = true;\r\n            if (options.footer.showPageSize == null) options.footer.showPageSize = true;\r\n            if (options.footer.showSettings == null) options.footer.showSettings = true;\r\n            if (options.footer.totalElements == null) options.footer.totalElements = true;\r\n        }\r\n        //#endregion\r\n\r\n        //#endregion\r\n\r\n        super(element, options, ControlTypeEnum.Grid);\r\n\r\n        this._originalHiddenColumnFields = [];\r\n        this._originalDataSource = [];\r\n        this._dictionaryFilterConditions = new Map<string, GridFilterSettings>();\r\n\r\n        if (options.pageSize === false)\r\n            this._pageSizeUnlimited = true;\r\n\r\n        this._elementId = element.id;\r\n        this._actualLayout = null;\r\n\r\n        //#region Add columns from groupBy if not included\r\n        if (options.groupBy != null)\r\n        {\r\n            let optionsFields = options.columns.map(k => k.field);\r\n            for (let groupByItem of options.groupBy.fields as GridGroupByItem[])\r\n            {\r\n                if (!optionsFields.includes(groupByItem.field))\r\n                {\r\n                    let column = new GridColumn();\r\n                    column.field = groupByItem.field;\r\n                    column.title = groupByItem.displayField;\r\n                    column.hidden = true;\r\n                    options.columns.push(column);\r\n                }\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#region Original options for layout\r\n        let layoutList: GridLayout[] = [];\r\n        if (options.layoutSettings !== false)\r\n        {\r\n            let layoutJson = new GridLayoutStructure();\r\n            layoutJson.filterConditions = null;\r\n            layoutJson.pageSize = JSON.parse(JSON.stringify(options.pageSize!));\r\n            layoutJson.sortingInfo = null;\r\n\r\n            if (options.groupBy != null)\r\n                layoutJson.groupBy = JSON.parse(JSON.stringify(options.groupBy));\r\n\r\n            let index = 0;\r\n            let layoutColumns: GridLayoutColumn[] = [];\r\n            for (let column of options.columns!)\r\n            {\r\n                let layoutColumn = new GridLayoutColumn();\r\n                layoutColumn.field = (column.type == GridColumnTypeEnum.EditButton) ? \"editButton\" : column.field;\r\n                layoutColumn.fitSpace = column.fitSpace;\r\n                layoutColumn.hidden = column.hidden;\r\n                layoutColumn.locked = column.locked;\r\n                layoutColumn.index = index;\r\n\r\n                let width = (column.width != null) ? (column.width) : ((column.type == GridColumnTypeEnum.EditButton) ? 32 : 100);\r\n                layoutColumn.width = width;\r\n\r\n                layoutColumns.push(layoutColumn);\r\n                index++;\r\n\r\n                if (column.hidden === true)\r\n                    this._originalHiddenColumnFields.push(column.field);\r\n            }\r\n            layoutJson.columns = layoutColumns;\r\n            this._originalOptionsForLayout = layoutJson;\r\n\r\n            let getLayoutListRequest = new GetLayoutListRequest();\r\n            getLayoutListRequest.gridName = options.layoutSettings.name;\r\n            getLayoutListRequest.pageName = window.location.href;\r\n\r\n            //**********************TODO//**********************\r\n            this.doWebApiCallLayout(GridLayoutOperationTypeEnum.Get, getLayoutListRequest, (response: any) =>\r\n            {\r\n                layoutList = response.tableLayoutList;\r\n                if (layoutList.length > 0)\r\n                {\r\n                    this._customLayouts = layoutList;\r\n                    let layoutToLoad = layoutList[0];\r\n                    let layoutClass = JSON.parse(layoutToLoad.layoutJson) as GridLayoutStructure;\r\n\r\n                    //#region Check if saved layout correspond with actual layout\r\n                    let same = true;\r\n                    for (let layoutColumn of layoutClass.columns)\r\n                    {\r\n                        if (layoutColumn.field == \"editButton\" && !options!.hideEditButton)\r\n                            continue;\r\n\r\n                        if (!options!.columns!.map(k => k.field).includes(layoutColumn.field))\r\n                        {\r\n                            same = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                    //#endregion\r\n\r\n                    if (same)\r\n                    {\r\n                        this._actualLayout = layoutToLoad;\r\n                        //this.changeLayout();\r\n                    }\r\n                }\r\n            });\r\n            //**********************TODO//**********************\r\n        }\r\n        //#endregion\r\n\r\n        //#region Instantiate variables\r\n        this._lastIndexAdded = -1;\r\n        this._dictionaryDataValues = new Map<string, string[]>();\r\n        this._groupByActualValue = {};\r\n        this._actualPageSize = (options.pageSize === false) ? 50 : options.pageSize;\r\n        this._actualPageSelected = 1;\r\n\r\n        this._serverBindingPagination = new GridServerBindPagination();\r\n        this._serverBindingPagination.indexFrom = 0 * this._actualPageSize;\r\n        this._serverBindingPagination.indexTo = this._serverBindingPagination.indexFrom + this._actualPageSize - 1;\r\n        //#endregion\r\n\r\n        //#region Structure\r\n        puma(element).vrBeforePuma(\"<div id='\" + element.id + \"_divContainer' class='p-grid-container'></div>\");\r\n\r\n        //#region Header\r\n        this._divHeaderContainer = div(\"#\" + element.id + \"_divContainer\", { css: \"height: 35px;\" })\r\n        if (options.lockable)\r\n            this._divHeaderLocked = puma(\"<div class='grid_Header grid_Header_locked' style='overflow-x: hidden; display: inline-block;'></div>\").vrAppendToPuma(this._divHeaderContainer)[0] as HTMLDivElement;\r\n\r\n        this._divHeader = puma(\"<div id='\" + element.id + \"Header' class='grid_Header' style='overflow-x: hidden; display: inline-block;'></div>\").vrAppendToPuma(this._divHeaderContainer)[0] as HTMLDivElement;\r\n        if (!options.header)\r\n        {\r\n            this._divHeaderContainer.style.cssText += \"display: none;\";\r\n            this._divHeader.style.cssText += \"display: none;\";\r\n            this._divHeaderLocked.style.cssText += \"display: none;\";\r\n        }\r\n\r\n        this._spanFitHeaderSpace = puma(\"<span id='\" + element.id + \"FitHeaderSpace' style='position: absolute;' class='grid_fitHeaderSpace'></span>\").vrAppendToPuma(\"#\" + element.id + \"_divContainer\")[0];\r\n        //#endregion\r\n\r\n        //#region Filters\r\n        let divFilters = div(\"#\" + element.id + \"_divContainer\", { css: \"height: 31px; display: none;\" })\r\n        if (options.lockable)\r\n            this._divFiltersLocked = puma(\"<div id='\" + element.id + \"Filters' class='grid_Filters grid_Filters_locked' style='overflow-x: hidden; display: none;'></div>\").vrAppendToPuma(divFilters)[0] as HTMLDivElement;\r\n\r\n        this._divFilters = puma(\"<div id='\" + element.id + \"Filters' class='grid_Filters' style='overflow-x: hidden; display: none;'></div>\").vrAppendToPuma(divFilters)[0] as HTMLDivElement;\r\n        this._spanFitFilterSpace = puma(\"<span id='\" + element.id + \"FitFilterSpace' style='position: absolute; border-left: 1px solid #d9d9d9;' class='grid_fitFilterSpace'></span>\").vrAppendToPuma(\"#\" + element.id + \"_divContainer\")[0];\r\n        //#endregion\r\n\r\n        //#region Body\r\n        let divBodyContainer = div(\"#\" + element.id + \"_divContainer\", { id: element.id + \"_grid_body_container\" })\r\n        if (options.lockable)\r\n            this._divBodyLocked = div(divBodyContainer, { class: \"grid_body_locked\", css: \"overflow-y: auto; vertical-align: top; display: inline-block; overflow-x: hidden; border-top: none; border: solid 1px #d9d9d9; border-right: solid 1px #a5a5a5; border-bottom: none;\" })\r\n\r\n        this._divBody = puma(\"<div id='\" + element.id + \"Body' class='grid_Body'></div>\").vrAppendToPuma(divBodyContainer)[0] as HTMLDivElement;\r\n        puma(this._divBody).scroll((e: any) =>\r\n        {\r\n            puma(this._divFilters).scrollLeft(puma(this._divBody).scrollLeft());\r\n            puma(this._divHeader).scrollLeft(puma(this._divBody).scrollLeft());\r\n            puma(this._divTotals).scrollLeft(puma(this._divBody).scrollLeft());\r\n            puma(this._divBodyLocked).scrollTop(puma(this._divBody).scrollTop());\r\n\r\n            if (options!.onScroll != null)\r\n            {\r\n                let scrollEvent = new GridScrollEvent();\r\n                scrollEvent.sender = this;\r\n                scrollEvent.target = e.target;\r\n                scrollEvent.scrollLeft = puma(this._divBody).scrollLeft();\r\n                scrollEvent.scrollTop = puma(this._divBody).scrollTop();\r\n                options!.onScroll(scrollEvent);\r\n            }\r\n        });\r\n\r\n        puma(this._divBodyLocked).scroll((e: any) =>\r\n        {\r\n            puma(this._divBody).scrollTop(puma(this._divBodyLocked).scrollTop());\r\n\r\n            if (options!.onScroll != null)\r\n            {\r\n                let scrollEvent = new GridScrollEvent();\r\n                scrollEvent.sender = this;\r\n                scrollEvent.target = e.target;\r\n                scrollEvent.scrollLeft = puma(this._divBody).scrollLeft();\r\n                scrollEvent.scrollTop = puma(this._divBody).scrollTop();\r\n                options!.onScroll(scrollEvent);\r\n            }\r\n        });\r\n        //#endregion\r\n\r\n        //#region Totals\r\n        let divTotals = div(\"#\" + element.id + \"_divContainer\", { css: \"height: 23px; display: none;\" });\r\n        if (options.lockable)\r\n            this._divTotalsLocked = puma(\"<div id='\" + element.id + \"Totals' class='grid_Totals grid_Totals_locked' style='overflow-x: hidden; display: none;'></div>\").vrAppendToPuma(divTotals)[0] as HTMLDivElement;\r\n\r\n        this._divTotals = puma(\"<div id='\" + element.id + \"Totals' class='grid_Totals' style='overflow-x: hidden; display: none;'></div>\").vrAppendToPuma(divTotals)[0] as HTMLDivElement;\r\n\r\n        this._showTotals = options.columns!.vrAny(k => k.aggregate != null && k.aggregate !== false);\r\n        if (this._showTotals)\r\n            this.createTotalsFunction();\r\n\r\n        this._spanFitTotalsSpace = puma(\"<span id='\" + element.id + \"FitTotalsSpace' style='position: absolute; border-left: 1px solid #d9d9d9;' class='grid_fitTotalsSpace'></span>\").vrAppendToPuma(\"#\" + element.id + \"_divContainer\")[0];\r\n        //#endregion\r\n\r\n        //#endregion\r\n\r\n        //#region Footer\r\n        if (options.footer !== false)\r\n        {\r\n            this._divFooter = puma(\"<div id='\" + element.id + \"Footer' class='p-grid-footer'></div>\").vrAppendToPuma(\"#\" + element.id + \"_divContainer\")[0] as HTMLDivElement;\r\n\r\n            //#region Footer page size\r\n            if (options.footer.showPageSize && typeof (options.pageSize) != \"boolean\")\r\n            {\r\n                //#region PageSize items\r\n                let pageSizeItems =\r\n                    [\r\n                        { text: \"50\", value: \"50\", numberValue: 50 },\r\n                        { text: \"100\", value: \"100\", numberValue: 100 }\r\n                    ];\r\n\r\n                if (options.pageSize! >= 200)\r\n                    options.largePageSize = true;\r\n\r\n                if (options.largePageSize)\r\n                {\r\n                    pageSizeItems.push({ text: \"200\", value: \"200\", numberValue: 200 });\r\n                    pageSizeItems.push({ text: \"500\", value: \"500\", numberValue: 500 });\r\n                }\r\n\r\n                if (options.pageSize! != 50 && options.pageSize! != 100 && options.pageSize! != 200 && options.pageSize != 500)\r\n                    pageSizeItems.push({ text: String(options.pageSize!), value: String(options.pageSize!), numberValue: Number(options.pageSize!) });\r\n\r\n                pageSizeItems.vrSortBy([\"numberValue\"], true);\r\n                //#endregion\r\n\r\n                createComboBox(\r\n                    {\r\n                        width: 65,\r\n                        mode: ComboBoxTypeEnum.DropDown,\r\n                        cssContainer: \"margin-top: 3px;\",\r\n                        css: \"border: solid 1px #d9d9d9 !important;\",\r\n                        items: pageSizeItems,\r\n                        value: String(options.pageSize!),\r\n                        onAfterChange: (e) =>\r\n                        {\r\n                            options!.pageSize = Number(e.sender.value());\r\n\r\n                            if (options!.columns!.length > 10)\r\n                                showLoader();\r\n\r\n                            window.setTimeout(() =>\r\n                            {\r\n                                this.update();\r\n                                hideLoader();\r\n                            }, 200);\r\n                        }\r\n                    }, this._divFooter, null, element.id + \"_ddlPageSize\");\r\n            }\r\n            //#endregion\r\n\r\n            //#region Footer settings\r\n            if (options.footer.showSettings)\r\n            {\r\n                //#region Settings split button\r\n                let spbSettingsControl = createSplitButton(\r\n                    {\r\n\r\n                        icon: IconClassLight.Gear,\r\n                        cssContainer: \"top: 2px; margin-left: 5px;\",\r\n                        items:\r\n                            [\r\n                                {\r\n                                    text: \"Salva layout\", icon: IconClassLight.Table, onClick: (e) =>\r\n                                    {\r\n                                        if (this._actualLayout == null)\r\n                                            prompt(\"Assegna un nome a questo layout\", { title: \"Salva layout\" }).then((value) => this.saveLayout(value));\r\n                                        else\r\n                                        {\r\n                                            dialog(\"Vuoi sovrascrivere questo layout, o crearne uno nuovo?\",\r\n                                                {\r\n                                                    title: \"Salva layout\",\r\n                                                    footerItems:\r\n                                                        [\r\n                                                            { text: \"Annulla\", type: WindowFooterItemTypeEnum.Close },\r\n                                                            {\r\n                                                                text: \"Sovrascrivi\", mode: ButtonModeEnum.Primary, onClick: (e) => \r\n                                                                {\r\n                                                                    this.saveLayout(this._actualLayout!.layoutName)\r\n                                                                    e.sender.close();\r\n                                                                }\r\n                                                            },\r\n                                                            {\r\n                                                                text: \"Crea nuovo\", mode: ButtonModeEnum.Primary, onClick: (e) =>\r\n                                                                {\r\n                                                                    prompt(\"Assegna un nome a questo layout\", { title: \"Nome layout\" }).then((value) =>\r\n                                                                    {\r\n                                                                        this._actualLayout = null;\r\n                                                                        this.saveLayout(value);\r\n                                                                        e.sender.close();\r\n                                                                    });\r\n                                                                }\r\n                                                            }\r\n                                                        ]\r\n                                                });\r\n                                        }\r\n                                    }\r\n                                },\r\n                                {\r\n                                    text: \"Gestisci layout\", icon: IconClassLight.Table, value: \"manageLayout\",\r\n                                    onClick: (e) => this.openWindowLayout()\r\n                                },\r\n                                {\r\n                                    text: \"Ripristina layout di base\", icon: IconClassLight.Table, value: \"restoreBaseLayout\",\r\n                                    confirmationMessage: \"Confermi di voler ripristinare il layout di base?\",\r\n                                    onClick: (e) => \r\n                                    {\r\n                                        this._actualLayout = null;\r\n                                        this.changeLayout(true, this._originalOptionsForLayout);\r\n                                    }\r\n                                },\r\n                                {\r\n                                    text: \"Mostra/Nascondi\", icon: IconClassLight.Eye,\r\n                                    onClick: (e) => this.openWindowActions(GridActionEnum.ShowHide)\r\n                                },\r\n                                {\r\n                                    text: \"Raggruppa per...\", icon: IconClassLight.Users, visible: options.groupable,\r\n                                    onClick: (e) => this.openWindowActions(GridActionEnum.GroupBy)\r\n                                },\r\n                                {\r\n                                    text: \"Blocca/Sblocca\", icon: IconClassLight.Lock, visible: options.lockable!,\r\n                                    onClick: (e) => this.openWindowActions(GridActionEnum.LockUnlock)\r\n                                }\r\n                            ]\r\n                    }, this._divFooter, null, this._elementId + \"_spbSettings\");\r\n                //#endregion\r\n\r\n                //#region Hide manage layout button\r\n                if (layoutList.length == 0)\r\n                    window.setTimeout(() => spbSettingsControl.hideItem(\"manageLayout\"));\r\n                //#endregion\r\n            }\r\n            //#endregion\r\n        }\r\n        //#endregion\r\n\r\n        //#region CSS\r\n        if (options.css != null)\r\n            puma(\"#\" + element.id + \"_divContainer\")[0].style.cssText += options.css;\r\n\r\n        puma(element).addClass(\"p-grid\");\r\n        puma(element).css(\"border-collapse\", \"collapse\");\r\n\r\n        if (typeof (options.alternateRowColors) === \"string\")\r\n            puma(\"<style>#\" + element.id + \" .p-grid tr.p-grid-body:nth-child(odd) { background-color: \" + options.alternateRowColors + \"; }</style>\").vrAppendToPuma(\"head\");\r\n        else if (options.alternateRowColors === true)\r\n            puma(element).addClass(\"alternateRowsColor\");\r\n\r\n        if (options.hoverRowColor)\r\n            puma(element).addClass(\"p-grid-hover\");\r\n        //#endregion\r\n\r\n        //#region Height\r\n        if (options.height == null) options.height = GridHeightModeEnum.FitContent;\r\n        if (options.height == GridHeightModeEnum.FitContent)\r\n            options.height = \"auto\";\r\n\r\n        puma(this._divBody).height(options.height!);\r\n        if (options.lockable) puma(this._divBodyLocked).height(options.height!);\r\n        //#endregion\r\n\r\n        puma(this._divBody).vrAppendPuma(element);\r\n\r\n        if (options.lockable)\r\n        {\r\n            this._elementLocked = puma(\"<table class='p-grid p-grid-locked' style='border-collapse: collapse;'></table>\");\r\n            if (options.alternateRowColors === true) puma(this._elementLocked).addClass(\"alternateRowsColor\");\r\n            if (options.hoverRowColor) puma(this._elementLocked).addClass(\"p-grid-hover\")\r\n            puma(this._divBodyLocked).vrAppendPuma(this._elementLocked);\r\n        }\r\n\r\n        //#region Edit button\r\n        let editButtonColumnsNumber = options.columns.filter(k => k.type == GridColumnTypeEnum.EditButton).length;\r\n        if (editButtonColumnsNumber > 1)\r\n            throw Error(\"Non possono coesistere due o più colonne di edit!\");\r\n\r\n        if (editButtonColumnsNumber == 1)\r\n        {\r\n            let indexEditButtonColumn = options.columns.findIndex(k => k.type == GridColumnTypeEnum.EditButton);\r\n            options.columns[indexEditButtonColumn].field = \"editButton\";\r\n            options.columns[indexEditButtonColumn].locked = this.thereAreLockedColumns();\r\n        }\r\n\r\n        if (editButtonColumnsNumber == 0 && !options.hideEditButton)\r\n            options.columns.unshift({ type: GridColumnTypeEnum.EditButton, field: \"editButton\", locked: this.thereAreLockedColumns() });\r\n        //#endregion\r\n\r\n        //#region Width\r\n        puma(element).width(options.width);\r\n        puma(\"#\" + element.id + \"_divContainer\").width(options.width);\r\n        //#endregion\r\n\r\n        //#region Fit space\r\n        let tableWidth = puma(this.element()).width();\r\n        let columnsWidthOccupied = 0;\r\n        let fitSpaceColumnsNumber = 0;\r\n        for (let column of options.columns)\r\n        {\r\n            if (column.hidden == true)\r\n                continue;\r\n\r\n            if (this.thereAreLockedColumns() && column.type == GridColumnTypeEnum.EditButton)\r\n                continue;\r\n\r\n            if ((column.fitSpace == null || column.fitSpace == false))\r\n                columnsWidthOccupied += (column.width != null) ? column.width : ((column.type == GridColumnTypeEnum.EditButton) ? 32 : 100);\r\n            else\r\n                fitSpaceColumnsNumber++;\r\n        }\r\n\r\n        let remainingSpace = tableWidth - columnsWidthOccupied;\r\n        if (!this.thereAreLockedColumns() && options.checkboxes != GridCheckboxModeEnum.None)\r\n            remainingSpace -= 20;\r\n\r\n        if (options.groupBy != null && options.groupBy.fields != null)\r\n            remainingSpace -= 20 * options.groupBy.fields.length;\r\n\r\n        let fitSpaceColumnPercentage = (100 * (remainingSpace / fitSpaceColumnsNumber) / tableWidth);\r\n        this._fitSpaceColumnPercentage = fitSpaceColumnPercentage;\r\n        //#endregion\r\n\r\n        //#region Toolbar\r\n        if (options.toolbar != null)\r\n        {\r\n            this._divToolbar = puma(\"<div id='\" + element.id + \"Toolbar' class='grid_divToolbar'></div>\").vrPrependToPuma(\"#\" + element.id + \"_divContainer\")[0] as HTMLDivElement;\r\n\r\n            let separatorCount = 0;\r\n            for (let toolbarItem of options.toolbar)\r\n            {\r\n                //#region Value if separator\r\n                if (toolbarItem.type != null && toolbarItem.type == GridToolbarItemType.Separator\r\n                    && (toolbarItem.value == \"\" || toolbarItem.value == null))\r\n                {\r\n                    toolbarItem.value = \"separator\" + separatorCount;\r\n                    separatorCount++;\r\n                }\r\n                //#endregion\r\n\r\n                this.addToolbarItem(toolbarItem);\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#region Header columns\r\n        puma(this._divHeader).vrAppendPuma(\"<table class='p-grid'><thead><tr class='p-grid-headerColumn'></tr></thead></table>\");\r\n        if (options.lockable)\r\n            puma(this._divHeaderLocked).vrAppendPuma(\"<table class='p-grid p-grid-locked'><thead><tr class='p-grid-headerColumn'></tr></thead></table>\");\r\n\r\n        if (options.groupable! || options.groupBy != null)\r\n        {\r\n            for (let column of options.columns!)\r\n            {\r\n                let display = \"\";\r\n                if (options.groupBy == null || (!(options.groupBy.fields as GridGroupByItem[]).map(k => k.field).includes(column.field)))\r\n                    display = \"display: none;\";\r\n\r\n                puma(this._divHeader).find(\".p-grid-headerColumn\").vrAppendPuma(\"<th width=16 style='border: 1px solid rgb(221, 221, 221); background-color: #51B3E1; \" + display + \"' value='groupBy\" + column.field + \"' class='groupBy\" + column.field + \"'></th>\");\r\n                if (options.lockable)\r\n                    puma(this._divHeaderLocked).find(\".p-grid-headerColumn\").vrAppendPuma(\"<th width=16 style='border: 1px solid rgb(221, 221, 221); background-color: #51B3E1; \" + display + \"' value='groupBy\" + column.field + \"' class='groupBy\" + column.field + \"'></th>\");\r\n            }\r\n        }\r\n\r\n        //#region Checkbox column\r\n        if (options.checkboxes != GridCheckboxModeEnum.None)\r\n        {\r\n            let thCheckbox = document.createElement(\"th\");\r\n            thCheckbox.style.cssText += \"border: 1px solid #dddddd;\";\r\n            puma(thCheckbox).attr(\"width\", 20);\r\n            puma(thCheckbox).attr(\"value\", \"vrGridCheckboxColumn\");\r\n            puma(thCheckbox).css(\"background-color\", \"#51B3E1\");\r\n            puma(thCheckbox).css(\"color\", \"#FFF\");\r\n\r\n            let textHTML = \"<input id='\" + element.id + \"header_CheckboxColumn' class='vrCheckBox' type='checkbox'></input>\"\r\n                + \"<label class='vrCheckBoxLabel vr-checkboxColumnHeader-label' for='header_CheckboxColumn'></label>\";\r\n            thCheckbox.innerHTML = textHTML;\r\n\r\n            puma(thCheckbox).css(\"text-align\", \"center\");\r\n\r\n            if (this.thereAreLockedColumns())\r\n                puma(this._divHeaderLocked).find(\".p-grid-headerColumn\").vrAppendPuma(thCheckbox);\r\n            else\r\n                puma(this._divHeader).find(\".p-grid-headerColumn\").vrAppendPuma(thCheckbox);\r\n\r\n            if (options.checkboxes == GridCheckboxModeEnum.SingleCheck)\r\n                puma(thCheckbox).children().hide();\r\n            else\r\n            {\r\n                puma(thCheckbox).click((e: any) =>\r\n                {\r\n                    let isChecked = (e.target as HTMLInputElement).checked;\r\n                    if (isChecked)\r\n                        this.checkAllRows();\r\n                    else\r\n                        this.unCheckAllRows();\r\n                });\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#region Columns\r\n        for (let column of options.columns)\r\n        {\r\n            let th = document.createElement(\"th\");\r\n            puma(th).attr(\"value\", column.field);\r\n            th.style.cssText += \"border: 1px solid #dddddd;\";\r\n\r\n            let title = (column.title != null) ? column.title : \"\";\r\n            puma(th).attr(\"title\", title);\r\n\r\n            //#region Icon\r\n            if (column.headerSettings != null && column.headerSettings.icon != null)\r\n                title = \"<i class='\" + column.headerSettings.icon + \"'></i>\" + title;\r\n            //#endregion\r\n\r\n            //#region Bold\r\n            if (column.bold === true)\r\n                puma(th).css(\"font-weight\", \"500\");\r\n            //#endregion\r\n\r\n            //#region Css\r\n            if (column.headerSettings != null && column.headerSettings!.css != null)\r\n                th.style.cssText += column.headerSettings!.css;\r\n            //#endregion\r\n\r\n            th.innerHTML = \"<div class='grid_headerTh'><span class='grid_headerThContent'>\" + title + \"</span><i style='position: absolute; top: 10px; right: 5px;'></i></div>\";\r\n\r\n            puma(th).attr(\"width\", (column.width != null) ? column.width : ((column.fitSpace == true) ? fitSpaceColumnPercentage + \"%\" : (column.type == GridColumnTypeEnum.EditButton) ? 32 : 100));\r\n            if (column.fitSpace == true)\r\n                puma(th).attr(\"fitSpace\", \"true\");\r\n\r\n            //#region Color\r\n            let backgroundColor = \"#51B3E1\";\r\n            let color = \"#000\";\r\n            if (column.headerSettings != null)\r\n            {\r\n                backgroundColor = (column.headerSettings.backgroundColor != null) ? column.headerSettings.backgroundColor : backgroundColor;\r\n                color = (column.headerSettings.color != null) ? column.headerSettings.color : \"#000\";\r\n            }\r\n            puma(th).css(\"background-color\", backgroundColor);\r\n            puma(th).css(\"color\", color);\r\n            //#endregion\r\n\r\n            //#region Text align\r\n            let textAlign = GridAlignEnum.Left;\r\n            if (column.headerSettings != null && column.headerSettings.textAlign != null)\r\n                textAlign = column.headerSettings.textAlign;\r\n            puma(th).css(\"text-align\", textAlign);\r\n            //#endregion\r\n\r\n            //#region Tooltip\r\n            if (options.tooltip)\r\n            {\r\n                let tooltip = \"\";\r\n                if (column.headerSettings != null)\r\n                {\r\n                    if (column.headerSettings.tooltip == true)\r\n                        tooltip = (column.title == null) ? \"\" : column.title;\r\n                    else if (typeof (column.headerSettings.tooltip) == \"string\")\r\n                        tooltip = column.headerSettings.tooltip;\r\n                }\r\n\r\n                if (tooltip.length > 0)\r\n                    puma(th).attr(\"title\", tooltip);\r\n            }\r\n            //#endregion\r\n\r\n            //#region Sort\r\n            let sorGridColumnTypes = [GridColumnTypeEnum.Currency, GridColumnTypeEnum.Date, GridColumnTypeEnum.DateTime,\r\n            GridColumnTypeEnum.Duration, GridColumnTypeEnum.Label, GridColumnTypeEnum.Number, GridColumnTypeEnum.Percentage,\r\n            GridColumnTypeEnum.String, GridColumnTypeEnum.Time];\r\n            if (sorGridColumnTypes.includes(column.type!))\r\n            {\r\n                puma(th).css(\"cursor\", \"pointer\");\r\n                puma(th).click(() =>\r\n                {\r\n                    if (this._isResizing === true || this._isDragging === true)\r\n                        return;\r\n\r\n                    if (puma(th).attr(\"sortMode\") == null)\r\n                        this.sort(column.field, GridSortDirectionEnum.Asc);\r\n                    else\r\n                    {\r\n                        let sortMode = Number(puma(th).attr(\"sortMode\")) as GridSortDirectionEnum;\r\n                        if (sortMode == GridSortDirectionEnum.Asc)\r\n                            this.sort(column.field, GridSortDirectionEnum.Desc);\r\n                        else\r\n                            this.removeSort();\r\n                    }\r\n                });\r\n            }\r\n            else\r\n                puma(th).css(\"cursor\", \"grab\");\r\n            //#endregion\r\n\r\n            // Append th\r\n            if (options.lockable && column.locked)\r\n            {\r\n                th.setAttribute(\"locked\", \"locked\");\r\n                puma(this._divHeaderLocked).find(\".p-grid-headerColumn\").vrAppendPuma(th);\r\n            }\r\n            else\r\n                puma(this._divHeader).find(\".p-grid-headerColumn\").vrAppendPuma(th);\r\n\r\n            if (column.hidden == true)\r\n                puma(th).hide();\r\n        }\r\n\r\n        if (options.lockable && this.thereAreLockedColumns())\r\n            puma(this._divHeader).width(\"Calc(100% - \" + (puma(this._divHeaderLocked).width() + 5) + \"px)\")\r\n        //#endregion\r\n\r\n        //#endregion\r\n\r\n        //#region Filters\r\n        if (options.filterable)\r\n        {\r\n            puma(divFilters).show();\r\n            puma(this._divFilters)[0].style.cssText += \"display: inline-block\";\r\n            puma(this._divFilters).vrAppendPuma(\"<table class='p-grid'><thead><tr class='p-grid-filters'></tr></thead></table>\");\r\n\r\n            if (options.lockable)\r\n            {\r\n                puma(this._divFiltersLocked)[0].style.cssText += \"display: inline-block\";\r\n                puma(this._divFiltersLocked).vrAppendPuma(\"<table class='p-grid p-grid-locked'><thead><tr class='p-grid-filters'></tr></thead></table>\");\r\n            }\r\n\r\n            if (options.groupable! || options.groupBy != null)\r\n            {\r\n                for (let column of options.columns!)\r\n                {\r\n                    let display = \"\";\r\n                    if (options.groupBy == null || (!(options.groupBy.fields as GridGroupByItem[]).map(k => k.field).includes(column.field)))\r\n                        display = \"display: none;\";\r\n\r\n                    puma(this._divFilters).find(\".p-grid-filters\").vrAppendPuma(\"<td style='border: 1px solid rgb(221, 221, 221); \" + display + \"' value='groupBy\" + column.field + \"' width=16 class='groupBy\" + column.field + \"'></td>\");\r\n                    if (options.lockable)\r\n                        puma(this._divFiltersLocked).find(\".p-grid-filters\").vrAppendPuma(\"<td style='border: 1px solid rgb(221, 221, 221); \" + display + \"' width=16 class='groupBy\" + column.field + \"'></td>\");\r\n                }\r\n            }\r\n\r\n            //#region Checkbox column\r\n            if (options.checkboxes != GridCheckboxModeEnum.None)\r\n            {\r\n                let thCheckbox = document.createElement(\"td\");\r\n                puma(thCheckbox).attr(\"value\", \"vrGridCheckboxColumn\");\r\n                thCheckbox.style.cssText += \"border: 1px solid #dddddd;\";\r\n                puma(thCheckbox).attr(\"width\", 20);\r\n\r\n                if (this.thereAreLockedColumns())\r\n                    puma(this._divFiltersLocked).find(\".p-grid-filters\").vrAppendPuma(thCheckbox);\r\n                else\r\n                    puma(this._divFilters).find(\".p-grid-filters\").vrAppendPuma(thCheckbox);\r\n            }\r\n            //#endregion\r\n\r\n            //#region Columns\r\n            for (let column of options.columns)\r\n            {\r\n                //#region Create dictionary\r\n                if (column.type != GridColumnTypeEnum.EditButton)\r\n                    this._dictionaryDataValues.set(column.field, []);\r\n                //#endregion\r\n\r\n                let td = document.createElement(\"td\");\r\n                puma(td).attr(\"value\", column.field);\r\n                td.style.cssText += \"border: 1px solid #dddddd;\";\r\n\r\n                puma(td).attr(\"width\", (column.width != null) ? column.width : ((column.fitSpace == true) ? fitSpaceColumnPercentage + \"%\" : (column.type == GridColumnTypeEnum.EditButton) ? 32 : 100));\r\n                if (column.fitSpace == true)\r\n                    puma(td).attr(\"fitSpace\", \"true\");\r\n\r\n                // Append th\r\n                if (options.lockable && column.locked)\r\n                    puma(this._divFiltersLocked).find(\".p-grid-filters\").vrAppendPuma(td);\r\n                else\r\n                    puma(this._divFilters).find(\".p-grid-filters\").vrAppendPuma(td);\r\n\r\n                //#region Filter type\r\n                if ((column.type == GridColumnTypeEnum.Custom && column.filterable == null) || column.type == GridColumnTypeEnum.Color)\r\n                    column.filterable = false;\r\n\r\n                if (column.type != null && column.filterable !== false)\r\n                {\r\n                    switch (column.type)\r\n                    {\r\n                        case GridColumnTypeEnum.Checkbox:\r\n                        case GridColumnTypeEnum.Boolean:\r\n                            {\r\n                                puma(td).css(\"text-align\", \"center\");\r\n                                td.innerHTML = \"<input id='\" + element.id + \"_CheckboxFilter_\" + column.field + \"' class='vrCheckBox' type='checkbox'></input>\"\r\n                                    + \"<label class='vrLabel vr-checkboxFilter-label' for='\" + element.id + \"_CheckboxFilter_\" + column.field + \"'></label>\";\r\n\r\n                                //#region Create filter\r\n                                let checkboxJq = puma(\"#\" + element.id + \"_CheckboxFilter_\" + column.field);\r\n                                checkboxJq.addClass(\"indeterminateVrCheckbox\");\r\n                                checkboxJq.click((e: any) =>\r\n                                {\r\n                                    let checkbox = checkboxJq[0] as HTMLInputElement;\r\n                                    if (checkbox.checked && !puma(checkbox).hasClass(\"indeterminateVrCheckbox\"))\r\n                                    {\r\n                                        puma(checkbox).addClass(\"indeterminateVrCheckbox\");\r\n                                        this.removeFilter(column.field);\r\n                                        e.preventDefault();\r\n                                    }\r\n                                    else\r\n                                    {\r\n                                        puma(checkbox).removeClass(\"indeterminateVrCheckbox\");\r\n\r\n                                        let filterSettings = new GridFilterSettings();\r\n                                        filterSettings.type = column.type!;\r\n                                        filterSettings.checkboxFilterSettings = new GridCheckboxFilterSettings();\r\n                                        filterSettings.checkboxFilterSettings.value = checkbox.checked;\r\n                                        this.updateFilter(column.field, filterSettings, false);\r\n                                        this.applyFilters(true);\r\n                                    }\r\n                                });\r\n                                //#endregion\r\n                            }\r\n                            break;\r\n                        case GridColumnTypeEnum.DateTime:\r\n                        case GridColumnTypeEnum.Time:\r\n                        case GridColumnTypeEnum.Date:\r\n                            {\r\n                                puma(td).css(\"text-align\", \"center\");\r\n                                td.innerHTML = \"<button id='\" + this._elementId + \"_DateFilter_\" + column.field + \"'></button>\" +\r\n                                    \"<button id='\" + this._elementId + \"_DateFilterRemove_\" + column.field + \"'></button>\";\r\n\r\n                                //#region Create filter\r\n                                let dateFilter = createButton(\r\n                                    {\r\n                                        icon: IconClassLight.Filter,\r\n                                        tooltip: \"Applica filtro\",\r\n                                        cssContainer: \"margin-right: 5px;\",\r\n                                        onClick: (e) =>\r\n                                        {\r\n                                            this.openWindowFiltering(column);\r\n                                        }\r\n                                    }, null, null, this._elementId + \"_DateFilter_\" + column.field);\r\n\r\n                                let dateFilterRemove = createButton(\r\n                                    {\r\n                                        icon: IconClassRegular.Xmark,\r\n                                        tooltip: \"Rimuovi filtro\",\r\n                                        colorSettings: { background: \"#CCC\" },\r\n                                        visible: false,\r\n                                        onClick: (e) =>\r\n                                        {\r\n                                            this.removeFilter(column.field);\r\n\r\n                                            dateFilter.tooltip(\"\");\r\n                                            puma(dateFilter.element()).css(\"background-color\", \"#f3f3f3\");\r\n                                            puma(dateFilter.element()).css(\"color\", \"#000\");\r\n                                            dateFilterRemove.hide();\r\n                                            this.recalculateHeight(true);\r\n                                        }\r\n                                    }, null, null, this._elementId + \"_DateFilterRemove_\" + column.field);\r\n                                //#endregion\r\n                            }\r\n                            break;\r\n                        case GridColumnTypeEnum.Number:\r\n                        case GridColumnTypeEnum.Currency:\r\n                        case GridColumnTypeEnum.Percentage:\r\n                        case GridColumnTypeEnum.Duration:\r\n                            {\r\n                                puma(td).css(\"text-align\", \"center\");\r\n                                td.innerHTML = \"<button id='\" + this._elementId + \"_NumberFilter_\" + column.field + \"'></button>\" +\r\n                                    \"<button id='\" + this._elementId + \"_NumberFilterRemove_\" + column.field + \"'></button>\";\r\n\r\n                                //#region Create filter\r\n                                let numberFilter = createButton(\r\n                                    {\r\n                                        icon: IconClassLight.Filter,\r\n                                        tooltip: \"Applica filtro\",\r\n                                        css: \"margin-right: 5px;\",\r\n                                        onClick: (e) =>\r\n                                        {\r\n                                            this.openWindowFiltering(column);\r\n                                        }\r\n                                    }, null, null, this._elementId + \"_NumberFilter_\" + column.field);\r\n\r\n                                let numberFilterRemove = createButton(\r\n                                    {\r\n                                        icon: IconClassRegular.Xmark,\r\n                                        tooltip: \"Rimuovi filtro\",\r\n                                        colorSettings: { background: \"#CCC\" },\r\n                                        visible: false,\r\n                                        onClick: (e) =>\r\n                                        {\r\n                                            this.removeFilter(column.field);\r\n\r\n                                            numberFilter.tooltip(\"\");\r\n                                            puma(numberFilter.element()).css(\"background-color\", \"#f3f3f3\");\r\n                                            puma(numberFilter.element()).css(\"color\", \"#000\");\r\n                                            numberFilterRemove.hide();\r\n                                            this.recalculateHeight(true);\r\n                                        }\r\n                                    }, null, null, this._elementId + \"_NumberFilterRemove_\" + column.field);\r\n                                //#endregion\r\n                            }\r\n                            break;\r\n                        case GridColumnTypeEnum.String:\r\n                        case GridColumnTypeEnum.Custom:\r\n                        case GridColumnTypeEnum.Label:\r\n                            {\r\n                                td.innerHTML = \"<input id='\" + this._elementId + \"_StringFilter_\" + column.field + \"' field='\" + column.field + \"'></input>\";\r\n\r\n                                //#region Create filter\r\n                                this._timeoutFilterText = 0;\r\n                                createTextBox(\r\n                                    {\r\n                                        icon: (column.type == GridColumnTypeEnum.Custom) ? IconClassLight.Search : undefined,\r\n                                        placeholder: (column.type == GridColumnTypeEnum.Custom) ? \"Cerca...\" : undefined,\r\n                                        width: \"100%\",\r\n                                        onPaste: (e) =>\r\n                                        {\r\n                                            clearTimeout(this._timeoutFilterText);\r\n                                            let textToSearch = String(e.value).trim().toLowerCase();\r\n                                            let field = puma(e.sender.element()).attr(\"field\");\r\n\r\n                                            this.manageFilterTextByColumn(textToSearch, column, field, false);\r\n                                        },\r\n                                        onKeyUp: (e) =>\r\n                                        {\r\n                                            if (e.tabKey)\r\n                                                return;\r\n\r\n                                            clearTimeout(this._timeoutFilterText);\r\n                                            let textToSearch = e.sender.value<string>().toLowerCase();\r\n                                            let field = puma(e.sender.element()).attr(\"field\");\r\n\r\n                                            //#region Server binding\r\n                                            if (options!.serverBinding !== false)\r\n                                            {\r\n                                                let filterSettings = new GridFilterSettings();\r\n                                                filterSettings.type = column.type!;\r\n                                                filterSettings.stringFilterSettings = new GridStringFilterSettings();\r\n                                                filterSettings.stringFilterSettings.text = textToSearch.toLowerCase();\r\n\r\n                                                if (e.key == KeyEnum.Enter)\r\n                                                    this.updateFilter(column.field, filterSettings);\r\n\r\n                                                return;\r\n                                            }\r\n                                            //#endregion\r\n\r\n                                            if (textToSearch.length == 0)\r\n                                            {\r\n                                                this.removeFilter(puma(e.sender.element()).attr(\"field\"), false);\r\n                                                window.setTimeout(() =>\r\n                                                {\r\n                                                    if (column.filterWebService === true)\r\n                                                        this.rebind(null, true);\r\n                                                    else\r\n                                                        this.applyFilters(true);\r\n\r\n                                                    this._checkedItemsForFiltering = this.getCheckedItems();\r\n                                                }, 100);\r\n                                                return;\r\n                                            }\r\n\r\n                                            this.manageFilterTextByColumn(textToSearch, column, field, e.backSpaceKey);\r\n                                        }\r\n                                    }, null, null, this._elementId + \"_StringFilter_\" + column.field);\r\n                                //#endregion\r\n                            }\r\n                            break;\r\n                        default:\r\n                            td.innerHTML = \"\";\r\n                            break;\r\n                    }\r\n                }\r\n                //#endregion\r\n\r\n                if (column.hidden === true)\r\n                    puma(td).hide();\r\n            }\r\n            //#endregion\r\n\r\n            if (options.lockable && this.thereAreLockedColumns())\r\n                puma(this._divFilters).width(\"Calc(100% - \" + (puma(this._divHeaderLocked).width() + 5) + \"px)\")\r\n        }\r\n        //#endregion\r\n\r\n        //#region Totals\r\n        if (this._showTotals)\r\n        {\r\n            puma(divTotals).show();\r\n            puma(this._divTotals)[0].style.cssText += \"display: inline-block\";\r\n            puma(this._divTotals).vrAppendPuma(\"<table class='p-grid'><thead><tr class='p-grid-totals'></tr></thead></table>\");\r\n\r\n            if (options.lockable)\r\n            {\r\n                puma(this._divTotalsLocked)[0].style.cssText += \"display: inline-block\";\r\n                puma(this._divTotalsLocked).vrAppendPuma(\"<table class='p-grid p-grid-locked'><thead><tr class='p-grid-totals'></tr></thead></table>\");\r\n            }\r\n\r\n            if (options.groupable! || options.groupBy != null)\r\n            {\r\n                for (let column of options.columns!)\r\n                {\r\n                    let display = \"\";\r\n                    if (options.groupBy == null || (!(options.groupBy.fields as GridGroupByItem[]).map(k => k.field).includes(column.field)))\r\n                        display = \"display: none;\";\r\n\r\n                    puma(this._divTotals).find(\".p-grid-totals\").vrAppendPuma(\"<td style='border: 1px solid rgb(221, 221, 221); \" + display + \"' width=16 class='groupBy\" + column.field + \"'></td>\");\r\n                    if (options.lockable)\r\n                        puma(this._divTotalsLocked).find(\".p-grid-totals\").vrAppendPuma(\"<td style='border: 1px solid rgb(221, 221, 221); \" + display + \"' width=16 class='groupBy\" + column.field + \"'></td>\");\r\n                }\r\n            }\r\n\r\n            //#region Checkbox column\r\n            if (options.checkboxes != GridCheckboxModeEnum.None)\r\n            {\r\n                let thCheckbox = document.createElement(\"td\");\r\n                puma(thCheckbox).attr(\"value\", \"vrGridCheckboxColumn\");\r\n                thCheckbox.style.cssText += \"border: 1px solid #dddddd;\";\r\n                puma(thCheckbox).attr(\"width\", 20);\r\n\r\n                if (this.thereAreLockedColumns())\r\n                    puma(this._divTotalsLocked).find(\".p-grid-totals\").vrAppendPuma(thCheckbox);\r\n                else\r\n                    puma(this._divTotals).find(\".p-grid-totals\").vrAppendPuma(thCheckbox);\r\n            }\r\n            //#endregion\r\n\r\n            //#region Columns\r\n            for (let column of options.columns!)\r\n            {\r\n                let td = document.createElement(\"td\");\r\n                puma(td).attr(\"value\", column.field);\r\n                td.style.cssText += \"border: 1px solid #dddddd;\";\r\n\r\n                puma(td).attr(\"width\", (column.width != null) ? column.width : ((column.fitSpace == true) ? this._fitSpaceColumnPercentage + \"%\" : (column.type == GridColumnTypeEnum.EditButton) ? 32 : 100));\r\n                if (column.fitSpace == true)\r\n                    puma(td).attr(\"fitSpace\", \"true\");\r\n\r\n                //#region TextAlign\r\n                let textAlign = GridAlignEnum.Right;\r\n                switch (column.type)\r\n                {\r\n                    case GridColumnTypeEnum.Number:\r\n                    case GridColumnTypeEnum.Currency:\r\n                    case GridColumnTypeEnum.Percentage:\r\n                        textAlign = GridAlignEnum.Right;\r\n                        break;\r\n                    case GridColumnTypeEnum.Duration:\r\n                        textAlign = GridAlignEnum.Center;\r\n                        break;\r\n                    case GridColumnTypeEnum.Date:\r\n                    case GridColumnTypeEnum.DateTime:\r\n                    case GridColumnTypeEnum.Time:\r\n                        textAlign = GridAlignEnum.Center;\r\n                        break;\r\n                    case GridColumnTypeEnum.String:\r\n                        textAlign = GridAlignEnum.Left;\r\n                        break;\r\n                }\r\n\r\n                if (column.cellSettings != null)\r\n                    textAlign = (column.cellSettings.textAlign != null) ? column.cellSettings.textAlign : textAlign;\r\n\r\n                puma(td).css(\"text-align\", textAlign);\r\n                //#endregion\r\n\r\n                //Append th\r\n                if (options.lockable && column.locked)\r\n                    puma(this._divTotalsLocked).find(\".p-grid-totals\").vrAppendPuma(td);\r\n                else\r\n                    puma(this._divTotals).find(\".p-grid-totals\").vrAppendPuma(td);\r\n\r\n                //#region Format\r\n                if (column.aggregate != null && column.aggregate !== false)\r\n                {\r\n                    let decimalDigits = 0;\r\n                    if (typeof (column.aggregate) == \"boolean\")\r\n                    {\r\n                        switch (column.type)\r\n                        {\r\n                            case GridColumnTypeEnum.Number: column.aggregate = GridAggregateMode.Sum; break;\r\n                            case GridColumnTypeEnum.Currency: column.aggregate = GridAggregateMode.Sum; break;\r\n                            case GridColumnTypeEnum.Duration: column.aggregate = GridAggregateMode.Sum; break;\r\n                            case GridColumnTypeEnum.Percentage: column.aggregate = GridAggregateMode.Average; break;\r\n                        }\r\n                    }\r\n\r\n                    //#region Type\r\n                    switch (column.type)\r\n                    {\r\n                        case GridColumnTypeEnum.Number:\r\n                            decimalDigits = (column.decimalDigits != null) ? column.decimalDigits : 0;\r\n                            break;\r\n                        case GridColumnTypeEnum.Currency:\r\n                            decimalDigits = (column.decimalDigits != null) ? column.decimalDigits : 2;\r\n                            break;\r\n                        case GridColumnTypeEnum.Duration:\r\n                            decimalDigits = (column.decimalDigits != null) ? column.decimalDigits : 0;\r\n                            break;\r\n                        case GridColumnTypeEnum.Percentage:\r\n                            decimalDigits = (column.decimalDigits != null) ? column.decimalDigits : 2;\r\n                            break;\r\n                    }\r\n                    //#endregion\t\t\t\t\t\t\r\n\r\n                    puma(td).attr(\"field\", column.field);\r\n                    puma(td).attr(\"decimalDigits\", decimalDigits);\r\n                    puma(td).attr(\"aggregate\", String(column.aggregate));\r\n                }\r\n                //#endregion\r\n\r\n                if (column.type == GridColumnTypeEnum.Custom && column.exportable == null)\r\n                    column.exportable = false;\r\n\r\n                //Hidden\r\n                if (column.hidden == true)\r\n                    puma(td).hide();\r\n            }\r\n            //#endregion\r\n\r\n            if (this.thereAreLockedColumns())\r\n                puma(this._divTotals).width(\"Calc(100% - \" + (puma(this._divHeaderLocked).width() + 5) + \"px)\")\r\n        }\r\n        else\r\n            puma(this._divTotals).hide();\r\n\r\n        if (options.lockable)\r\n        {\r\n            if (!this.thereAreLockedColumns())\r\n            {\r\n                if (this._divHeaderLocked != null) this._divHeaderLocked.style.cssText += \"display: none;\";\r\n                if (this._divFiltersLocked != null) this._divFiltersLocked.style.cssText += \"display: none;\";\r\n                if (this._divBodyLocked != null) this._divBodyLocked.style.cssText += \"display: none;\";\r\n                if (this._divTotalsLocked != null) this._divTotalsLocked.style.cssText += \"display: none;\";\r\n            }\r\n            else\r\n            {\r\n                puma(this._divBody).width(\"Calc(100% - \" + (puma(this._divHeaderLocked).width() + 5) + \"px)\")\r\n                puma(this._divBodyLocked).width(puma(this._divHeaderLocked).width())\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        this._internalOptions = options;\r\n\r\n        if (this._actualLayout != null)\r\n            this.changeLayout();\r\n\r\n        //#region DataSource\r\n        if (options.dataSource != null)\r\n            this.dataSource(options.dataSource);\r\n        else\r\n            this.recalculateHeight();\r\n        //#endregion\r\n\r\n        //#region Rebind\r\n        if (options.rebind != null && options.rebind.rebindAtStartup === true)\r\n            this.doWebApiCall(options.rebind, GridRequestTypeEnum.Rebind);\r\n        //#endregion\r\n\r\n        if (options.enable === false)\r\n            this.enable(options.enable);\r\n\r\n        //#region Column options\r\n        let thHeaderList = Array.from<HTMLElement>(puma(this._divHeader).find(\"table th\"));\r\n        if (options.lockable)\r\n            thHeaderList.vrPushRange(Array.from<HTMLElement>(puma(this._divHeaderLocked).find(\"table th\")));\r\n\r\n        this._columnOptions = [];\r\n        for (let th of thHeaderList)\r\n        {\r\n            let columnPosition = new GridColumnPosition();\r\n            columnPosition.field = puma(th).attr(\"value\");\r\n            columnPosition.left = puma(th).offset().left;\r\n            columnPosition.right = puma(th).offset().left + puma(th).width();\r\n            columnPosition.index = puma(th).index();\r\n            columnPosition.th = th;\r\n            this._columnOptions.push(columnPosition);\r\n        }\r\n        //#endregion\r\n\r\n        if (options.resizable)\r\n            this.resizable();\r\n\r\n        if (options.reorderable)\r\n            this.draggableColumns();\r\n\r\n        //#region GroupBy\r\n        if (options.groupBy != null)\r\n        {\r\n            for (let groupByProperty of options.groupBy.fields as GridGroupByItem[])\r\n                this._groupByActualValue[groupByProperty.field] = undefined\r\n        }\r\n        //#endregion\r\n\r\n        puma(window).on(\"resize\", () => \r\n        {\r\n            this.recalculateHeight();\r\n            this.recalculateWidth();\r\n        });\r\n    }\r\n\r\n    //#region Methods\r\n\r\n    //#region DataSource\r\n    rebind(parameters?: any | null, filterWithWebService = false, keepInfo = true, loadingElement?: boolean | HTMLElement | JQuery | string): any\r\n    {\r\n        let promise = new Promise<void>((callback: Function) =>\r\n        {\r\n            //#region Filter with webService\r\n            if (filterWithWebService)\r\n            {\r\n                let tableSearchingInfoList: GridSearchingInfo[] = [];\r\n                this._dictionaryFilterConditions.forEach((value, key, dic) =>\r\n                {\r\n                    if (value.stringFilterSettings != null)\r\n                    {\r\n                        let tableSearchingInfo = new GridSearchingInfo();\r\n                        tableSearchingInfo.field = key;\r\n                        tableSearchingInfo.text = value.stringFilterSettings.text;\r\n                        tableSearchingInfoList.push(tableSearchingInfo);\r\n                    }\r\n                });\r\n                parameters = { tableSearchingInfoList: tableSearchingInfoList };\r\n            }\r\n            //#endregion\r\n\r\n            let options = this.getOptions();\r\n            if (options.rebind != null)\r\n            {\r\n                options.rebind.otherParameters = undefined;\r\n                if (parameters != null)\r\n                    options.rebind.otherParameters = parameters;\r\n\r\n                //#region Keep info after rebind\r\n                if (keepInfo)\r\n                {\r\n                    this._tempRebindInfo = new TempRebindInfo();\r\n                    this._tempRebindInfo.checkedValues = this.getCheckedValues();\r\n                    this._tempRebindInfo.page = this.pageSelected();\r\n                    this._tempRebindInfo.yPosition = puma(this.container()).find(\".grid_Body\")[0].scrollTop;\r\n                }\r\n                else\r\n                    this._tempRebindInfo = null;\r\n                //#endregion\r\n\r\n                (options.rebind as any).tempLoadingElement = loadingElement;\r\n\r\n                this.clearSelection();\r\n                this.doWebApiCall(options.rebind, GridRequestTypeEnum.Rebind, callback);\r\n            }\r\n        });\r\n        return promise;\r\n    }\r\n\r\n    rebindSpecificRows(itemIdList: number[], update = true, keepInfo = true, loadingElement?: boolean | HTMLElement | JQuery | string)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.rebind != null)\r\n        {\r\n            if (options.rebind.specificItemIdListPropertyName == null)\r\n                options.rebind.specificItemIdListPropertyName = \"specificItemIdList\";\r\n\r\n            options.rebind.otherParameters = {};\r\n            options.rebind.otherParameters[options.rebind.specificItemIdListPropertyName] = itemIdList;\r\n            options.rebind.otherParameters[\"update\"] = update;\r\n            (options.rebind as any).loadingElement = loadingElement;\r\n\r\n            if (keepInfo)\r\n            {\r\n                //#region Keep info after rebind\r\n                this._tempRebindInfo = new TempRebindInfo();\r\n                this._tempRebindInfo.checkedValues = this.getCheckedValues();\r\n                this._tempRebindInfo.page = this.pageSelected();\r\n                this._tempRebindInfo.yPosition = puma(this.container()).find(\".grid_Body\")[0].scrollTop;\r\n                //#endregion\r\n            }\r\n\r\n            this.clearSelection();\r\n            this.doWebApiCall(options.rebind, GridRequestTypeEnum.RebindSpecificRows);\r\n        }\r\n    }\r\n\r\n    clear(triggerChange = false)\r\n    {\r\n        if (this.dataSource().filter(k => k[\"defaultRow\"] == null || k[\"defaultRow\"] == false).length > 0)\r\n        {\r\n            this.dataSource([]);\r\n            this.clearSelection(triggerChange);\r\n        }\r\n    }\r\n\r\n    private manageDataSourceControls(GridControlData: GridControlData, className: string)\r\n    {\r\n        puma(this.element()).add(puma(this._elementLocked)).off(\"click\", \".\" + className);\r\n        puma(this.element()).add(puma(this._elementLocked)).on(\"click\", \".\" + className, (e: any) =>\r\n        {\r\n            puma(e.target).attr(\"disabled\", \"disabled\");\r\n            let options = this.getOptions();\r\n            let rowId = puma(e.currentTarget).attr(\"dataItemId\");\r\n            if (rowId == null)\r\n                rowId = puma(e.target).closest(\".vrButton\").attr(\"dataItemId\");\r\n\r\n            let dataItem = this.dataSource()!.filter(k => k[options.dataSourceFieldId!] == rowId)[0];\r\n\r\n            //#region Control settings\r\n            let controlSettings: GridButtonSettings = new GridButtonSettings();\r\n            switch (GridControlData.columnType)\r\n            {\r\n                case GridColumnTypeEnum.Button:\r\n                case GridColumnTypeEnum.EditButton:\r\n                    controlSettings = GridControlData.GridControlsSettings as GridButtonSettings;\r\n                    break;\r\n                case GridColumnTypeEnum.Icon:\r\n                    controlSettings = GridControlData.GridControlsSettings as GridIconSettings;\r\n                    break;\r\n                case GridColumnTypeEnum.Custom:\r\n                    controlSettings = GridControlData.GridControlsSettings as GridCustomSettings;\r\n                    break;\r\n                case GridColumnTypeEnum.Label:\r\n                    controlSettings = GridControlData.GridControlsSettings as GridLabelSettings;\r\n                    break;\r\n            }\r\n            //#endregion\r\n\r\n            //#region Control click\r\n            if (controlSettings != null)\r\n            {\r\n                let tableClickEvent = new GridControlsClickEvent();\r\n                tableClickEvent.dataItem = dataItem;\r\n\r\n                if (controlSettings.onClick != null && controlSettings.enabled !== false)\r\n                {\r\n                    if (controlSettings.confirmationMessage != null && controlSettings.confirmationMessage.length > 0)\r\n                    {\r\n                        confirm(controlSettings.confirmationMessage).then(() =>\r\n                        {\r\n                            controlSettings!.onClick!(tableClickEvent);\r\n                        });\r\n                    }\r\n                    else\r\n                        controlSettings!.onClick!(tableClickEvent);\r\n                }\r\n                else if (GridControlData.columnType == GridColumnTypeEnum.EditButton)\r\n                    this.openAutoWindow(dataItem);\r\n\r\n                window.setTimeout(() => puma(e.target).removeAttr(\"disabled\"), 500);\r\n            }\r\n            //#endregion\r\n            return false;\r\n        });\r\n    }\r\n\r\n    private manageControls()\r\n    {\r\n        let controlList = [this._cellButtons, this._cellIcons, this._cellCustoms, this._cellLabels, this._cellImages];\r\n        for (let control of controlList)\r\n        {\r\n            control.forEach((GridControlData: GridControlData, className: string) =>\r\n            {\r\n                this.manageDataSourceControls(GridControlData, className);\r\n            });\r\n        }\r\n    }\r\n\r\n    originalDataSource()\r\n    {\r\n        return this._originalDataSource;\r\n    }\r\n\r\n    dataSource(dataItems?: any[], clearFilters = false)\r\n    {\r\n        if (dataItems != null)\r\n        {\r\n            let options = this.getOptions();\r\n\r\n            //#region DataSourceFieldId not defined\r\n            if (dataItems.length > 0 && dataItems[0][options.dataSourceFieldId!] == null)\t\t\t\t\t\r\n            {\r\n                //console.log(\"Grid null Id!! (\" + options.dataSourceFieldId!) + \"): \" + this.element().id;\r\n                let index = -1;\r\n                for (let item of dataItems)\r\n                {\r\n                    item[options.dataSourceFieldId!] = index;\r\n                    index--;\r\n                }\r\n                this._lastIndexAdded = index;\r\n            }\r\n            //#endregion\r\n\r\n            //#region GroupBy & Filterable\r\n            if (options.groupBy != null)\r\n                this.sortingGroupFields(dataItems);\r\n\r\n            if (options.sortBy != null)\r\n            {\r\n                let sortByField = (options.sortBy as GridSortSettings).field;\r\n                this.sort(sortByField, (options.sortBy as GridSortSettings).direction, false);\r\n            }\r\n\r\n            this._originalDataSource = JSON.parse(JSON.stringify(dataItems));\r\n            if (options.filterable)\r\n            {\r\n                this._dictionaryDataValues.clear();\r\n                for (let column of options.columns!)\r\n                {\r\n                    if (column.type != GridColumnTypeEnum.EditButton)\r\n                        this._dictionaryDataValues.set(column.field, dataItems.map(k => String(k[column.field]).toLowerCase()));\r\n                }\r\n            }\r\n            //#endregion\r\n\r\n            if (clearFilters)\r\n            {\r\n                this.clearFilters(false);\r\n                this.setDataSource(dataItems);\r\n            }\r\n            else\r\n            {\r\n                if (options.serverBinding !== false)\r\n                    this.setDataSource(dataItems);\r\n                else\r\n                    this.applyFilters(true, !options.serverBinding);\r\n            }\r\n        }\r\n\r\n        if (this._dataSource == null)\r\n            this._dataSource = [];\r\n\r\n        return this._dataSource;\r\n    }\r\n\r\n    update(triggerDataBound = true, keepInfo = true)\r\n    {\r\n        //#region Keep info after rebind\r\n        if (keepInfo)\r\n        {\r\n            this._tempRebindInfo = new TempRebindInfo();\r\n            this._tempRebindInfo.checkedValues = this.getCheckedValues();\r\n            this._tempRebindInfo.page = this.pageSelected();\r\n            this._tempRebindInfo.yPosition = puma(this.container()).find(\".grid_Body\")[0].scrollTop;\r\n        }\r\n        //#endregion\r\n\r\n        this.setDataSource(this.dataSource(), triggerDataBound);\r\n    }\r\n\r\n    private setDataSource(dataItems: any[], triggerDataBound = true)\r\n    {\r\n        let options = this.getOptions();\r\n        this._dataSource = dataItems;\r\n\r\n        if (this._actualSortingInfo != null && !options.serverBinding)\r\n            this.applySorting();\r\n        else\r\n        {\r\n            this._cellButtons = new Map<string, GridControlData>();\r\n            this._cellIcons = new Map<string, GridControlData>();\r\n            this._cellCustoms = new Map<string, GridControlData>();\r\n            this._cellLabels = new Map<string, GridControlData>();\r\n            this._cellImages = new Map<string, GridControlData>();\r\n\r\n            //#region Keep info after rebind\r\n            if (this._tempRebindInfo != null && !options.serverBinding)\r\n            {\r\n                let page = this._tempRebindInfo.page;\r\n                let checkedValues = this._tempRebindInfo.checkedValues;\r\n                let yPosition = this._tempRebindInfo.yPosition;\r\n                this._tempRebindInfo = null;\r\n\r\n                this.pageSelected(page, false);\r\n                this.drawTable(dataItems, triggerDataBound);\r\n                this.manageControls();\r\n\r\n                this.selectRows(checkedValues, undefined, false);\r\n                puma(this.container()).find(\".grid_Body\").scrollTop(yPosition);\r\n            }\r\n            else\r\n            {\r\n                this.drawTable(dataItems, triggerDataBound);\r\n                this.manageControls();\r\n            }\r\n            //#endregion\r\n        }\r\n    }\r\n\r\n    private drawTable(dataItems: any[], triggerDataBound = true)\r\n    {\r\n        let options = this.getOptions();\r\n        if (typeof (options.pageSize) == \"boolean\" || this._pageSizeUnlimited)\r\n            options.pageSize = dataItems.length;\r\n\r\n        //#region Body\r\n        if (puma(this.element()).find(\"tbody\").length == 0)\r\n            puma(this.element()).vrAppendPuma(\"<tbody></tbody>\");\r\n        else\r\n        {\r\n            puma(this.element()).find(\"tbody tr\").empty();\r\n            puma(this.element()).find(\"tbody td\").css(\"background-color\", \"\");\r\n        }\r\n\r\n        if (options.lockable)\r\n        {\r\n            if (puma(this._elementLocked).find(\"tbody\").length == 0)\r\n                puma(this._elementLocked).vrAppendPuma(\"<tbody></tbody>\");\r\n            else\r\n            {\r\n                puma(this._elementLocked).find(\"tbody tr\").empty();\r\n                puma(this._elementLocked).find(\"tbody td\").css(\"background-color\", \"\");\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#region Rows\r\n        let items: any[];\r\n        let firstIndex;\r\n        let lastIndex;\r\n        if (!options.serverBinding)\r\n        {\r\n            firstIndex = (this.pageSelected() - 1) * options.pageSize!;\r\n            lastIndex = this.pageSelected() * options.pageSize!;\r\n            items = dataItems.slice(firstIndex, lastIndex);\r\n        }\r\n        else\r\n        {\r\n            items = dataItems;\r\n            firstIndex = 0;\r\n            lastIndex = dataItems.length - 1;\r\n        }\r\n\r\n        //#region Default row if empty\r\n        if (items.length == 0)\r\n        {\r\n            let defaultRow: any = {};\r\n            for (let column of options.columns!)\r\n            {\r\n                defaultRow[column.field] = null;\r\n                defaultRow[\"defaultRow\"] = true;\r\n            }\r\n            items.push(defaultRow);\r\n\r\n            if (dataItems.length == 0)\r\n                dataItems.push(defaultRow);\r\n        }\r\n        else\r\n        {\r\n            let defaultRow = puma(this._divBody).find(\"table tr[defaultrow='defaultrow']\");\r\n            if (defaultRow.length > 0)\r\n            {\r\n                defaultRow.find(\"td\").empty();\r\n                defaultRow.removeAttr(\"defaultRow\");\r\n            }\r\n\r\n            if (items.filter(k => k[\"defaultRow\"] != null).length > 0)\r\n                items.splice(0, 1);\r\n\r\n            if (dataItems.filter(k => k[\"defaultRow\"] != null).length > 0)\r\n                dataItems.splice(0, 1);\r\n        }\r\n        //#endregion\r\n\r\n        //#region GroupBy\r\n        let visibleColumns = [];\r\n        if (options.groupable! || options.groupBy != null)\r\n        {\r\n            puma(this.container()).find(\".grid_trGroupBy\").remove();\r\n            puma(this.container()).find(\".p-grid-totalsGroup\").remove();\r\n            this._groupByActualValue = {};\r\n            visibleColumns = options.columns!.filter(k => k.hidden !== true);\r\n        }\r\n        //#endregion\r\n\r\n        let i = (!options.serverBinding) ? ((this.pageSelected() - 1) * options.pageSize!) : 0;\r\n        if (i > dataItems.length)\r\n        {\r\n            i = 0;\r\n            this.pageSelected(1, false);\r\n        }\r\n\r\n        let j = 1;\r\n        for (let row of items)\r\n        {\r\n            let dataItem = dataItems[i];\r\n            let dataItemId = dataItem[options.dataSourceFieldId!];\r\n            let rowId = \"row\" + i + \"_\" + dataItemId;\r\n\r\n            //#region GroupBy\r\n            let rowAdded = 0;\r\n            if (options.groupable !== false && options.groupBy != null)\r\n            {\r\n                if ((options.groupBy as GridGroupBySettings).fields != null)\r\n                {\r\n                    let groupByIndex = 0;\r\n                    for (let groupByField of ((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]))\r\n                    {\r\n                        let cellValue = row[(groupByField as GridGroupByItem).field];\r\n                        let column = options.columns!.filter(k => k.field == (groupByField as GridGroupByItem).field)[0];\r\n\r\n                        if (this._groupByActualValue[(groupByField as GridGroupByItem).field] !== cellValue)\r\n                        {\r\n                            if (rowAdded == 0)\r\n                            {\r\n                                for (let p = groupByIndex; p < ((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]).length; p++)\r\n                                {\r\n                                    options.groupBy = options.groupBy as GridGroupBySettings;\r\n                                    this._groupByActualValue[(options.groupBy.fields as GridGroupByItem[])[p].field] = undefined;\r\n                                }\r\n                            }\r\n\r\n                            //#region Add tr groupBy\r\n                            let trOld = puma(this.element()).find(\"tbody tr:nth-child(\" + (j + rowAdded) + \")\")[0] as HTMLTableRowElement;\r\n                            let trGroupBy: HTMLElement | null = null;\r\n\r\n                            let newTr = puma(\"<tr value='\" + ((cellValue == null || cellValue === \"\") ? \"nosetted\" : String(cellValue).replace(/%/, \"\").replace(/ /g, \"\").replace(/\\./g, \"\").replace(/-/g, \"\").replace(/\\//g, \"\")) + \"' level='\" + groupByIndex + \"' class='grid_trGroupBy p-grid-body'></tr>\");\r\n                            if (trOld == null)\r\n                                trGroupBy = newTr.vrAppendToPuma(puma(this.element()).find(\"tbody\"))[0];\r\n                            else\r\n                                trGroupBy = newTr.vrInsertBeforePuma(trOld)[0];\r\n\r\n                            puma(trGroupBy).height(options.rowHeight!);\r\n\r\n                            let trGroupByLocked = null;\r\n                            if (options.lockable)\r\n                            {\r\n                                let trOldLocked = puma(this._elementLocked).find(\"tbody tr:nth-child(\" + (j + rowAdded) + \")\")[0] as HTMLTableRowElement;\r\n                                let newTr = puma(\"<tr value='\" + ((cellValue == null || cellValue === \"\") ? \"nosetted\" : String(cellValue).replace(/%/, \"\").replace(/ /g, \"\").replace(/\\./g, \"\").replace(/-/g, \"\").replace(/\\//g, \"\")) + \"' level='\" + groupByIndex + \"' class='grid_trGroupBy grid_trGroupByLocked p-grid-body'></tr>\");\r\n                                if (trOldLocked == null)\r\n                                    trGroupByLocked = newTr.vrAppendToPuma(puma(this._elementLocked).find(\"tbody\"))[0];\r\n                                else\r\n                                    trGroupByLocked = newTr.vrInsertBeforePuma(trOldLocked)[0];\r\n\r\n                                puma(trGroupByLocked).height(options.rowHeight!);\r\n                            }\r\n                            //#endregion\r\n\r\n                            rowAdded++;\r\n                            if (groupByIndex > 0)\r\n                            {\r\n                                for (let p = 0; p < groupByIndex; p++)\r\n                                {\r\n                                    puma(trGroupBy!).vrAppendPuma(\"<td width=16 class='groupBy\" + groupByField + \"'></td>\");\r\n                                    if (options.lockable) puma(trGroupByLocked!).vrAppendPuma(\"<td width=16 class='groupBy\" + groupByField + \"'></td>\");\r\n                                }\r\n                            }\r\n\r\n                            //#region Group title\r\n                            let cellText = String(cellValue);\r\n                            if (column != null)\r\n                            {\r\n                                if (column.type == GridColumnTypeEnum.Date)\r\n                                    cellText = (row[(groupByField as GridGroupByItem).field] == null) ? \"\" : Date.vrFixDateString(row[(groupByField as GridGroupByItem).field]).vrToItalyString();\r\n                                else if (column.type == GridColumnTypeEnum.Checkbox || column.type == GridColumnTypeEnum.Boolean)\r\n                                    cellText = (Boolean(row[(groupByField as GridGroupByItem).field])) ? \"Sì\" : \"No\";\r\n                            }\r\n\r\n                            let colspan = visibleColumns.length - groupByIndex + ((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]).length;\r\n                            if (options.checkboxes == GridCheckboxModeEnum.None)\r\n                                colspan -= 1;\r\n\r\n                            let groupByDisplayText = cellText;\r\n                            if ((groupByField as GridGroupByItem).displayField != null)\r\n                                groupByDisplayText = row[(groupByField as GridGroupByItem).displayField!];\r\n\r\n                            if ((groupByField as GridGroupByItem).displayValue != null)\r\n                            {\r\n                                let groupByDisplayValueEvent = new GridGroupDisplayValueEvent();\r\n                                groupByDisplayValueEvent.sender = this;\r\n                                groupByDisplayValueEvent.dataItem = row;\r\n                                groupByDisplayValueEvent.field = (groupByField as GridGroupByItem).field;\r\n                                groupByDisplayValueEvent.displayField = (groupByField as GridGroupByItem).displayField;\r\n                                groupByDisplayText = (groupByField as GridGroupByItem).displayValue!(groupByDisplayValueEvent);\r\n                            }\r\n\r\n                            if (groupByDisplayText == null) groupByDisplayText = cellText;\r\n\r\n                            let groupByCaret = IconClassLight.CaretDown;\r\n                            let childrenRows = this.getChildrenGroupRows(trGroupBy!, this._divBody);\r\n                            if (this.thereAreLockedColumns())\r\n                                childrenRows = this.getChildrenGroupRows(trGroupBy!, this._divBodyLocked);\r\n\r\n                            if (this.pageSelected() > 1 && !puma(childrenRows.allRows.vrFirst()).is(\":visible\"))\r\n                                groupByCaret = IconClassLight.CaretRight;\r\n\r\n                            let text = \"<td width=16 class='grid_tdGroupByCollapse groupBy\" + groupByField + \"' style='border-right-color: transparent !important;'>\"\r\n                                + \"<i class='grid_tdGroupByCollapse \" + groupByCaret + \"'></i></td>\"\r\n                                + \"<td class='grid_tdGroupByName' style='font-weight: 500;' colspan=\" + colspan + \"><div class='grid_divGroupByName'>\"\r\n                                + ((dataItems.length == 1 && dataItems[0][\"defaultRow\"] != null) ? \"Nessun gruppo o elemento presente\" : (groupByDisplayText == null || groupByDisplayText === \"\" || groupByDisplayText == \"null\") ? \"Non impostato\" : groupByDisplayText)\r\n                                + \"</div>\"\r\n                                + ((options.onGroupEditClick != null || (groupByField as GridGroupByItem).onEditClick != null) ? \"<div style='position: relative; display: inline-flex; margin-left: 6px;\" + ((options.checkboxes !== false) ? \"top: -4px;\" : \"\") + \"'><i class='grid_groupByEdit \" + IconClassLight.Pencil + \"' style='cursor: pointer;'></div></i>\" : \"\")\r\n                                + \"</td>\";\r\n                            puma(trGroupBy).vrAppendPuma(text);\r\n                            if (options.lockable) puma(trGroupByLocked).vrAppendPuma(text);\r\n                            this._groupByActualValue[(groupByField as GridGroupByItem).field] = cellValue;\r\n\r\n                            if (this.thereAreLockedColumns())\r\n                                puma(trGroupBy).find(\"i.grid_groupByEdit\").parent().hide();\r\n                            //#endregion\r\n\r\n                            //#region Checkbox group\r\n                            if (options.checkboxes != GridCheckboxModeEnum.None)\r\n                            {\r\n                                let checkboxContainer = puma(trGroupBy).find(\"div.grid_divGroupByName\")[0];\r\n                                if (this.thereAreLockedColumns())\r\n                                    checkboxContainer = puma(trGroupByLocked).find(\"div.grid_divGroupByName\")[0];\r\n\r\n                                createCheckBox(\r\n                                    {\r\n                                        cssContainer: \"margin-right: 5px;\",\r\n                                        onCheck: (e) =>\r\n                                        {\r\n                                            let parentGroupRow = e.sender.element().parentElement!.parentElement!.parentElement!.parentElement!;\r\n                                            let childrenRows = this.getChildrenGroupRows(parentGroupRow, this._divBody);\r\n                                            if (this.thereAreLockedColumns())\r\n                                                childrenRows = this.getChildrenGroupRows(parentGroupRow, this._divBodyLocked);\r\n\r\n                                            for (let childRow of childrenRows.children)\r\n                                            {\r\n                                                let dataItemIdNotSplitted = puma(childRow).attr(\"id\");\r\n                                                if (dataItemIdNotSplitted != null && dataItemIdNotSplitted.length > 0)\r\n                                                {\r\n                                                    let dataItemId = dataItemIdNotSplitted.split(\"_\")[1];\r\n                                                    if (e.checked)\r\n                                                    {\r\n                                                        let checkBox = puma(childRow).find(\".vr-checkbox-column\")[0] as HTMLInputElement;\r\n                                                        if (checkBox.checked)\r\n                                                            this.unselectRow(dataItemId);\r\n                                                    }\r\n                                                    this.selectRowInternal(dataItemId, true, true, false, true, false, true);\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }, checkboxContainer, ControlPositionEnum.Before);\r\n                            }\r\n                            //#endregion\r\n\r\n                            //#region Expand/Collapse\r\n                            puma(trGroupBy).find(\"td.grid_tdGroupByCollapse\").add(puma(trGroupByLocked).find(\"td.grid_tdGroupByCollapse\")).click((e: any) =>\r\n                            {\r\n                                //#region Group icon\r\n                                let icon = puma(e.currentTarget).find(\"i\");\r\n                                let collapse = icon.hasClass(\"fa-caret-down\");\r\n                                //#endregion\r\n\r\n                                //#region Collapse/Expand\r\n                                let childrenRows = this.getChildrenGroupRows(e.currentTarget.parentElement! as HTMLElement, this._divBody);\r\n                                childrenRows.allRows.vrPushRange(this.getChildrenGroupRows(e.currentTarget.parentElement! as HTMLElement, this._divBodyLocked).allRows)\r\n\r\n                                for (let childRow of childrenRows.allRows)\r\n                                {\r\n                                    if (collapse)\r\n                                        puma(childRow).hide();\r\n                                    else\r\n                                    {\r\n                                        puma(childRow).show();\r\n\r\n                                        //#region Subgroup icon\r\n                                        let childrenIcon = puma(childRow).find(\"i.grid_tdGroupByCollapse\");\r\n                                        childrenIcon.removeClass(IconClassLight.CaretRight);\r\n                                        childrenIcon.addClass(IconClassLight.CaretDown);\r\n                                        //#endregion\r\n                                    }\r\n                                }\r\n                                //#endregion\r\n\r\n                                //#region Icon\r\n                                let indexIcon = puma(e.currentTarget.parentElement!).index() + 1;\r\n                                let iconNormal = puma(puma(this._divBody).find(\"tr:nth-child(\" + indexIcon + \")\").find(\"i\")[0]);\r\n                                if (collapse)\r\n                                {\r\n                                    iconNormal.removeClass(IconClassLight.CaretDown);\r\n                                    iconNormal.addClass(IconClassLight.CaretRight);\r\n\r\n                                    if (options.lockable)\r\n                                    {\r\n                                        let iconLocked = puma(puma(this._divBodyLocked).find(\"tr:nth-child(\" + indexIcon + \")\").find(\"i\")[0]);\r\n                                        iconLocked.removeClass(IconClassLight.CaretDown);\r\n                                        iconLocked.addClass(IconClassLight.CaretRight);\r\n                                    }\r\n                                }\r\n                                else\r\n                                {\r\n                                    iconNormal.removeClass(IconClassLight.CaretRight);\r\n                                    iconNormal.addClass(IconClassLight.CaretDown);\r\n\r\n                                    if (options.lockable)\r\n                                    {\r\n                                        let iconLocked = puma(puma(this._divBodyLocked).find(\"tr:nth-child(\" + indexIcon + \")\").find(\"i\")[0]);\r\n                                        iconLocked.removeClass(IconClassLight.CaretRight);\r\n                                        iconLocked.addClass(IconClassLight.CaretDown);\r\n                                    }\r\n                                }\r\n                                //#endregion\r\n\r\n                                if (options.onGroupExpandCollapse != null || (groupByField as GridGroupByItem).onExpandCollapse != null)\r\n                                {\r\n                                    let expandCollapseEvent = new GridGroupExpandCollapseEvent();\r\n                                    expandCollapseEvent.sender = this;\r\n                                    expandCollapseEvent.groupByField = groupByField.field;\r\n                                    expandCollapseEvent.groupByDisplayField = groupByField.displayField;\r\n                                    expandCollapseEvent.collapse = collapse;\r\n\r\n                                    expandCollapseEvent.value = row[(groupByField as GridGroupByItem).field];\r\n                                    if ((groupByField as GridGroupByItem).displayField != null)\r\n                                        expandCollapseEvent.displayValue = row[(groupByField as GridGroupByItem).displayField!];\r\n\r\n                                    let childrenItems: any[] = [];\r\n                                    for (let childRow of childrenRows.allRows)\r\n                                    {\r\n                                        let dataItemId = puma(childRow).attr(\"dataitemid\");\r\n                                        let dataItem = this.dataSource().filter(k => k[options.dataSourceFieldId!] == dataItemId)[0];\r\n                                        childrenItems.push(dataItem);\r\n                                    }\r\n                                    expandCollapseEvent.childrenItems = childrenItems;\r\n                                    expandCollapseEvent.childrenRows = childrenRows.allRows;\r\n\r\n                                    if (options.onGroupExpandCollapse != null)\r\n                                        options.onGroupExpandCollapse(expandCollapseEvent);\r\n                                    else if ((groupByField as GridGroupByItem).onExpandCollapse != null)\r\n                                        (groupByField as GridGroupByItem).onExpandCollapse!(expandCollapseEvent);\r\n                                }\r\n                            });\r\n                            //#endregion\r\n\r\n                            //#region Edit click\r\n                            puma(trGroupBy).find(\".grid_groupByEdit\").add(puma(trGroupByLocked).find(\".grid_groupByEdit\")).click((e: any) =>\r\n                            {\r\n                                if (options.onGroupEditClick != null || (groupByField as GridGroupByItem).onEditClick != null)\r\n                                {\r\n                                    let editClickEvent = new GridGroupEditClickEvent();\r\n                                    editClickEvent.sender = this;\r\n                                    editClickEvent.groupByField = groupByField.field;\r\n                                    editClickEvent.groupByDisplayField = groupByField.displayField;\r\n\r\n                                    editClickEvent.value = row[(groupByField as GridGroupByItem).field];\r\n                                    if ((groupByField as GridGroupByItem).displayField != null)\r\n                                        editClickEvent.displayValue = row[(groupByField as GridGroupByItem).displayField!];\r\n\r\n                                    let childrenRows = this.getChildrenGroupRows(e.currentTarget.parentElement! as HTMLElement, this._divBody)\r\n                                    let childrenItems: any[] = [];\r\n                                    for (let childRow of childrenRows.allRows)\r\n                                    {\r\n                                        let dataItemId = puma(childRow).attr(\"dataitemid\");\r\n                                        let dataItem = this.dataSource().filter(k => k[options.dataSourceFieldId!] == dataItemId)[0];\r\n                                        childrenItems.push(dataItem);\r\n                                    }\r\n                                    editClickEvent.childrenItems = childrenItems;\r\n                                    editClickEvent.childrenRows = childrenRows.allRows;\r\n\r\n                                    if (options.onGroupEditClick != null)\r\n                                        options.onGroupEditClick(editClickEvent);\r\n                                    else if ((groupByField as GridGroupByItem).onEditClick != null)\r\n                                        (groupByField as GridGroupByItem).onEditClick!(editClickEvent);\r\n                                }\r\n                            });\r\n                            //#endregion\r\n                        }\r\n                        groupByIndex++;\r\n                    }\r\n                }\r\n            }\r\n            j += rowAdded;\r\n            //#endregion\r\n\r\n            let isNewRow = false;\r\n            let tr = puma(this.element()).find(\">tbody>tr:nth-child(\" + j + \")\")[0] as HTMLTableRowElement;\r\n            if (tr == null)\r\n            {\r\n                tr = document.createElement(\"tr\");\r\n                isNewRow = true;\r\n            }\r\n            puma(tr).addClass(\"p-grid-body\");\r\n            puma(tr).attr(\"id\", rowId);\r\n            puma(tr).attr(\"dataItemId\", dataItemId);\r\n            puma(tr).attr(\"row\", i);\r\n\r\n            let trLocked = null;\r\n            let isNewRowLocked = false;\r\n            if (options.lockable)\r\n            {\r\n                trLocked = puma(this._elementLocked).find(\">tbody>tr:nth-child(\" + j + \")\")[0] as HTMLTableRowElement;\r\n                if (trLocked == null)\r\n                {\r\n                    trLocked = document.createElement(\"tr\");\r\n                    isNewRowLocked = true;\r\n                }\r\n                puma(trLocked).addClass(\"p-grid-body\");\r\n                puma(trLocked).attr(\"id\", rowId);\r\n                puma(trLocked).attr(\"dataItemId\", dataItemId);\r\n                puma(trLocked).attr(\"row\", i);\r\n            }\r\n\r\n            //#region Checkbox column\r\n            if (options.checkboxes != GridCheckboxModeEnum.None)\r\n            {\r\n                let index = (options.groupable! || options.groupBy != null) ? (1 + options.columns!.length) : 1;\r\n                let isNewCellCheckbox = false;\r\n                let tdCheckbox = null;\r\n\r\n                if (this.thereAreLockedColumns())\r\n                    tdCheckbox = puma(trLocked).find(\">td:nth-child(\" + index + \")\")[0] as HTMLTableCellElement;\r\n                else\r\n                    tdCheckbox = puma(tr).find(\">td:nth-child(\" + index + \")\")[0] as HTMLTableCellElement;\r\n\r\n                if (tdCheckbox == null)\r\n                {\r\n                    tdCheckbox = document.createElement(\"td\");\r\n                    isNewCellCheckbox = true;\r\n                }\r\n                tdCheckbox.style.cssText += \"border-left: none !important;\";\r\n\r\n                puma(tdCheckbox).attr(\"width\", 20);\r\n                puma(tdCheckbox).addClass(\"vrGridTdCheckboxColumn\");\r\n                puma(tdCheckbox).attr(\"value\", \"vrGridCheckboxColumn\");\r\n\r\n                let textHTML = \"<input dataItemId='\" + dataItemId + \"' id='\" + rowId + \"_CheckboxColumn' class='vrCheckBox vr-checkbox-column' type='checkbox'></input>\"\r\n                    + \"<label style='display: none;' class='vrLabel vrCheckBoxLabel vr-checkboxColumn-label' for='\" + rowId + \"_CheckboxColumn'></label>\";\r\n                tdCheckbox.innerHTML = textHTML;\r\n\r\n                puma(tdCheckbox).css(\"text-align\", \"center\");\r\n\r\n                if (isNewCellCheckbox)\r\n                {\r\n                    if (this.thereAreLockedColumns())\r\n                        puma(trLocked).vrAppendPuma(tdCheckbox);\r\n                    else\r\n                        puma(tr).vrAppendPuma(tdCheckbox);\r\n                }\r\n\r\n                puma(tdCheckbox).off(\"click\");\r\n                puma(tdCheckbox).click((e: JQuery.ClickEvent) =>\r\n                {\r\n                    if (e.shiftKey && options.checkboxes == GridCheckboxModeEnum.MultiCheck)\r\n                        this.selectRangeShiftKey(e.target);\r\n                    else\r\n                        this.selectRowInternal(dataItemId, true, false, false, true, false, true);\r\n                });\r\n            }\r\n            //#endregion\r\n\r\n            //#region Columns\r\n            let k = (options.checkboxes != GridCheckboxModeEnum.None) ? 2 : 1;\r\n            if (options.groupable! || options.groupBy != null)\r\n                k += options.columns!.length;\r\n\r\n            for (let column of options.columns!)\r\n            {\r\n                let isNewCell = false;\r\n                let td = puma(tr).find(\">td:nth-child(\" + k + \")\")[0] as HTMLTableCellElement;\r\n                if (td == null)\r\n                {\r\n                    td = document.createElement(\"td\");\r\n                    isNewCell = true;\r\n                }\r\n\r\n                let tdLocked = null;\r\n                let isNewCellLocked = false;\r\n                if (options.lockable)\r\n                {\r\n                    tdLocked = puma(trLocked).find(\">td:nth-child(\" + k + \")\")[0] as HTMLTableCellElement;\r\n                    if (tdLocked == null)\r\n                    {\r\n                        tdLocked = document.createElement(\"td\");\r\n                        isNewCellLocked = true;\r\n                    }\r\n                }\r\n\r\n                let field = column.field;\r\n                puma(td).attr(\"value\", column.field);\r\n                puma(td).attr(\"field\", field);\r\n                td.style.cssText += \"border-left: none !important;\";\r\n\r\n                if (options.lockable)\r\n                {\r\n                    puma(tdLocked).attr(\"value\", column.field);\r\n                    puma(tdLocked).attr(\"field\", field);\r\n                    tdLocked!.style.cssText += \"border-left: none !important;\";\r\n                }\r\n\r\n                //#region Width\r\n                let width = (column.width != null) ? (column.width) : ((column.fitSpace == true) ? this._fitSpaceColumnPercentage + \"%\" : (column.type == GridColumnTypeEnum.EditButton) ? 32 : 100);\r\n                puma(td).attr(\"width\", width);\r\n                if (options.lockable) puma(tdLocked).attr(\"width\", width);\r\n\r\n                if (column.fitSpace == true)\r\n                {\r\n                    puma(td).attr(\"fitSpace\", \"true\");\r\n                    if (options.lockable) puma(tdLocked).attr(\"fitSpace\", \"true\");\r\n                }\r\n                //#endregion\r\n\r\n                //#region Hidden\r\n                if (column.hidden === true)\r\n                {\r\n                    puma(td).hide();\r\n                    if (isNewCell)\r\n                        puma(tr).vrAppendPuma(td);\r\n\r\n                    if (options.lockable)\r\n                    {\r\n                        puma(tdLocked).hide();\r\n                        if (isNewCellLocked)\r\n                            puma(trLocked).vrAppendPuma(tdLocked);\r\n                    }\r\n\r\n                    k++;\r\n                    continue;\r\n                }\r\n                else\r\n                {\r\n                    puma(td).show();\r\n                    if (options.lockable) puma(tdLocked).show();\r\n                }\r\n                //#endregion\r\n\r\n                if (!options.multilineRows)\r\n                {\r\n                    puma(td).addClass(\"grid_singleLineTableRow\");\r\n                    if (options.lockable) puma(tdLocked).addClass(\"grid_singleLineTableRow\");\r\n                }\r\n                else\r\n                {\r\n                    puma(td).addClass(\"grid_multilineTableRow\");\r\n                    if (options.lockable) puma(tdLocked).addClass(\"grid_multilineTableRow\");\r\n                }\r\n\r\n                //#region Cell\r\n                let textAlign = GridAlignEnum.Left;\r\n                let textHTML = (row[field] == null) ? \"\" : String(row[field]);\r\n\r\n                //#region Type\r\n                switch (column.type)\r\n                {\r\n                    //#region Password\r\n                    case GridColumnTypeEnum.PasswordViewable:\r\n                        {\r\n                            let result = \"\";\r\n                            for (let char of textHTML)\r\n                                result += \"*\";\r\n\r\n                            textHTML = result;\r\n                        }\r\n                        break;\r\n                    //#endregion\r\n\r\n                    //#region Number, Currency, Percentage & Duration\r\n                    case GridColumnTypeEnum.Number:\r\n                    case GridColumnTypeEnum.Currency:\r\n                    case GridColumnTypeEnum.Percentage:\r\n                        {\r\n                            textAlign = GridAlignEnum.Right;\r\n                            let decimalDigits = (column.decimalDigits != null) ? column.decimalDigits : 0;\r\n                            if (column.type == GridColumnTypeEnum.Currency || column.type == GridColumnTypeEnum.Percentage)\r\n                                decimalDigits = (column.decimalDigits != null) ? column.decimalDigits : 2;\r\n\r\n                            if (column.cellSettings == null) column.cellSettings = new GridCellSettings();\r\n                            if (column.cellSettings.zeroIfNull == null) column.cellSettings.zeroIfNull = false;\r\n\r\n                            if (textHTML === \"\" && column.cellSettings.zeroIfNull === false)\r\n                                textHTML = \"\";\r\n                            else\r\n                            {\r\n                                let valueFormatted = this.formatValue(Number(textHTML), column.type, decimalDigits, column.roundingSettings);\r\n                                textHTML = valueFormatted;\r\n                            }\r\n                        }\r\n                        break;\r\n                    case GridColumnTypeEnum.Duration:\r\n                        {\r\n                            textAlign = GridAlignEnum.Center;\r\n                            if (column.cellSettings == null) column.cellSettings = new GridCellSettings();\r\n                            if (column.cellSettings.zeroIfNull == null) column.cellSettings.zeroIfNull = false;\r\n\r\n                            if (textHTML === \"\" && column.cellSettings.zeroIfNull === false)\r\n                                textHTML = \"\";\r\n                            else\r\n                            {\r\n                                let valueFormatted = this.formatValue(Number(textHTML), column.type);\r\n                                textHTML = valueFormatted;\r\n                            }\r\n                        }\r\n                        break;\r\n                    //#endregion\r\n\r\n                    //#region Date, Time, DateTime\r\n                    case GridColumnTypeEnum.Date:\r\n                    case GridColumnTypeEnum.DateTime:\r\n                    case GridColumnTypeEnum.Time:\r\n                        {\r\n                            textAlign = GridAlignEnum.Center;\r\n                            let valueFormatted = this.formatValue(new Date(textHTML), column.type, undefined, undefined, column.showSeconds);\r\n                            textHTML = valueFormatted;\r\n                        }\r\n                        break;\r\n                    //#endregion\r\n\r\n                    //#region Checkbox\r\n                    case GridColumnTypeEnum.Checkbox:\r\n                    case GridColumnTypeEnum.Boolean:\r\n                        {\r\n                            let checked = (row[field] != null && Boolean(row[field]) == true) ? \"checked='checked'\" : \"\";\r\n\r\n                            textAlign = GridAlignEnum.Center;\r\n                            textHTML = \"<input \" + checked + \" disabled='disabled' dataItemId='\" + dataItemId + \"' id='\" + rowId + \"_\" + column.field + \"' class='vrCheckBox' type='checkbox'></input>\"\r\n                                + \"<label class='vrLabel vrCheckBoxLabel' for='\" + rowId + \"_\" + column.field + \"'></label>\";\r\n                        }\r\n                        break;\r\n                    //#endregion\r\n\r\n                    //#region Button\r\n                    case GridColumnTypeEnum.Button:\r\n                    case GridColumnTypeEnum.EditButton:\r\n                        {\r\n                            let buttonSettings = null;\r\n                            textAlign = GridAlignEnum.Center;\r\n\r\n                            let className = \"btn_\" + column.field + \"_\" + rowId;\r\n\r\n                            //#region Button settings\r\n                            if (column.buttonSettings != null && (dataItem[options.dataSourceFieldId!] != null))\r\n                            {\r\n                                let templateEvent = new GridTemplateEvent();\r\n                                templateEvent.dataItem = dataItem;\r\n                                templateEvent.className = className;\r\n                                templateEvent.element = td;\r\n                                templateEvent.empty = (dataItem[options.dataSourceFieldId!] == null);\r\n                                buttonSettings = column.buttonSettings(templateEvent);\r\n                            }\r\n\r\n                            if (buttonSettings == null)\r\n                            {\r\n                                buttonSettings = new GridButtonSettings();\r\n                                buttonSettings.text = \"\";\r\n                                buttonSettings.value = column.field;\r\n                            }\r\n                            //#endregion\r\n\r\n                            let customCss = \"max-width: 100%;\";\r\n                            let buttonClass = \"vrButton grid-button\";\r\n\r\n                            //#region Color\r\n                            if (buttonSettings.isPrimaryButton == true)\r\n                                customCss += \"color: #FFF; background-color: #51B3E1;\";\r\n\r\n                            if (buttonSettings.color != null)\r\n                                customCss += \"color: \" + buttonSettings.color + \";\";\r\n                            if (buttonSettings.backgroundColor != null)\r\n                                customCss += \"background-color: \" + buttonSettings.backgroundColor + \";\";\r\n                            //#endregion\r\n\r\n                            //#region Custom CSS & Class\r\n                            if (buttonSettings.css != null)\r\n                                customCss += buttonSettings.css;\r\n\r\n                            if (buttonSettings.class != null)\r\n                                buttonClass += \" \" + buttonSettings.class;\r\n                            //#endregion\r\n\r\n                            //#region Icon/Image\r\n                            let iconClass = (column.type == GridColumnTypeEnum.EditButton) ? IconClassLight.Pencil : \"\";\r\n                            let spanIcon = \"\";\r\n                            if (buttonSettings.icon != null)\r\n                                iconClass = buttonSettings.icon;\r\n\r\n                            let imageUrl = \"\";\r\n                            let spanImage = \"\";\r\n                            if (buttonSettings.imageUrl != null)\r\n                                imageUrl = buttonSettings.imageUrl;\r\n\r\n                            if (iconClass.length > 0)\r\n                            {\r\n                                let marginRight = (buttonSettings.text != null) ? \"margin-right: 5px;\" : \"\";\r\n                                spanIcon = \"<span style='\" + marginRight + \"'><i class='vrIcon \" + iconClass + \"'></i></span> \";\r\n                            }\r\n                            else if (imageUrl.length > 0)\r\n                            {\r\n                                let marginRight = (buttonSettings.text != null) ? \"margin-right: 5px;\" : \"\";\r\n                                spanImage = \"<img style='\" + marginRight + \"' src='\" + imageUrl + \"' />\";\r\n                            }\r\n                            //#endregion\r\n\r\n                            //#region Tooltip\r\n                            let tooltip = (column.type == GridColumnTypeEnum.EditButton) ? \"Premi per modificare la riga\" : \"\";\r\n                            if (buttonSettings.tooltip != null)\r\n                                tooltip = buttonSettings.tooltip;\r\n                            //#endregion\r\n\r\n                            //#region Width\r\n                            if (column.type == GridColumnTypeEnum.EditButton)\r\n                                customCss += \"width: 29px;\";\r\n                            //#endregion\r\n\r\n                            //#region Enabled\r\n                            let disabled = \"\";\r\n                            if (buttonSettings.enabled === false)\r\n                            {\r\n                                disabled = \" disabled='disabled' \";\r\n                                customCss += \"opacity: 0.5; cursor: default;\";\r\n                            }\r\n                            //#endregion\r\n\r\n                            this._cellButtons.set(className, { GridControlsSettings: buttonSettings, columnType: column.type });\r\n\r\n                            let buttonText = (buttonSettings.text != null) ? buttonSettings.text : \"\";\r\n                            textHTML = \"<button title='\" + tooltip + \"' style='\" + customCss + \"' class='\" + buttonClass + \" \" + className + \"' dataItemId='\" + dataItemId + \"' id='\" + rowId + \"_\" + column.field + \"'\" + disabled + \">\" + spanIcon + spanImage + buttonText + \"</button>\";\r\n\r\n                            if (buttonSettings.visible === false)\r\n                                textHTML = \"\";\r\n                        }\r\n                        break;\r\n                    //#endregion\r\n\r\n                    //#region Custom\r\n                    case GridColumnTypeEnum.Custom:\r\n                        {\r\n                            let customSettings = null;\r\n                            textAlign = GridAlignEnum.Center;\r\n\r\n                            let className = \"btn_\" + column.field + \"_\" + rowId;\r\n\r\n                            //#region Custom settings\r\n                            if (column.customSettings != null && (dataItem[options.dataSourceFieldId!] != null))\r\n                            {\r\n                                let templateEvent = new GridTemplateEvent();\r\n                                templateEvent.dataItem = dataItem;\r\n                                templateEvent.className = className;\r\n                                templateEvent.element = td;\r\n                                templateEvent.empty = (dataItem[options.dataSourceFieldId!] == null);\r\n                                customSettings = column.customSettings(templateEvent);\r\n                            }\r\n\r\n                            if (customSettings == null)\r\n                            {\r\n                                customSettings = new GridCustomSettings();\r\n                                customSettings.value = column.field;\r\n                                customSettings.template = \"<div></div>\";\r\n                            }\r\n\r\n                            let customCss = \"\";\r\n                            if (customSettings.css != null)\r\n                                customCss += customSettings.css;\r\n                            //#endregion\r\n\r\n                            this._cellCustoms.set(className, { GridControlsSettings: customSettings, columnType: column.type });\r\n                            if (customSettings.template !== \"\")\r\n                                textHTML = \"<div style='\" + customCss + \"'>\" + customSettings.template + \"</div>\";\r\n\r\n                            if (customSettings.visible === false)\r\n                                textHTML = \"\";\r\n                        }\r\n                        break;\r\n                    //#endregion\r\n\r\n                    //#region Icon\r\n                    case GridColumnTypeEnum.Icon:\r\n                        {\r\n                            let iconSettings = null;\r\n                            textAlign = GridAlignEnum.Center;\r\n\r\n                            let className = \"btn_\" + column.field + \"_\" + rowId;\r\n\r\n                            //#region Icon settings\r\n                            if (column.iconSettings != null && (dataItem[options.dataSourceFieldId!] != null))\r\n                            {\r\n                                let templateEvent = new GridTemplateEvent();\r\n                                templateEvent.dataItem = dataItem;\r\n                                templateEvent.className = className;\r\n                                templateEvent.element = td;\r\n                                templateEvent.empty = (dataItem[options.dataSourceFieldId!] == null);\r\n                                iconSettings = column.iconSettings(templateEvent);\r\n                            }\r\n\r\n                            if (iconSettings == null)\r\n                            {\r\n                                iconSettings = new GridIconSettings();\r\n                                iconSettings.value = column.field;\r\n                            }\r\n                            //#endregion\r\n\r\n                            let customCss = \"\";\r\n                            let iconCustomClass = \"\";\r\n\r\n                            //#region Color\r\n                            if (iconSettings.color != null)\r\n                                customCss += \"color: \" + iconSettings.color + \";\";\r\n                            //#endregion\r\n\r\n                            //#region Custom CSS & Class\r\n                            if (iconSettings.css != null)\r\n                                customCss += iconSettings.css;\r\n\r\n                            if (iconSettings.class != null)\r\n                                iconCustomClass += \" \" + iconSettings.class;\r\n                            //#endregion\r\n\r\n                            //#region Tooltip\r\n                            let tooltip = \"\";\r\n                            if (iconSettings.tooltip != null)\r\n                                tooltip = iconSettings.tooltip;\r\n                            //#endregion\r\n\r\n                            //#region Click\r\n                            if (iconSettings.onClick != null && iconSettings.enabled !== false)\r\n                                customCss += \"cursor: pointer;\";\r\n                            //#endregion\r\n\r\n                            //#region Icon or Image url\r\n                            let icon = \"\";\r\n                            let imageUrl = \"\";\r\n                            if (iconSettings.icon != null)\r\n                                icon = \"<i class='vrIcon \" + iconSettings.icon + \"'></i>\";\r\n                            else if (iconSettings.imageUrl != null)\r\n                                imageUrl = \"<img src='\" + iconSettings.imageUrl + \"' />\";\r\n                            //#endregion\r\n\r\n                            this._cellIcons.set(className, { GridControlsSettings: iconSettings, columnType: column.type });\r\n\r\n                            textHTML = \"<span title='\" + tooltip + \"' style='\" + customCss + \"' class='\" + iconCustomClass + \" \" + className + \"' dataItemId='\" + dataItemId + \"' id='\" + rowId + \"_\" + column.field + \"'>\" + icon + imageUrl + \"</span>\";\r\n\r\n                            if (iconSettings.visible === false)\r\n                                textHTML = \"\";\r\n                        }\r\n                        break;\r\n                    //#endregion\r\n\r\n                    //#region Image\r\n                    case GridColumnTypeEnum.Image:\r\n                        {\r\n                            let imageSettings = null;\r\n                            textAlign = GridAlignEnum.Center;\r\n\r\n                            let className = \"btn_\" + column.field + \"_\" + rowId;\r\n\r\n                            //#region Image settings\r\n                            if (column.imageSettings != null && (dataItem[options.dataSourceFieldId!] != null))\r\n                            {\r\n                                let templateEvent = new GridTemplateEvent();\r\n                                templateEvent.dataItem = dataItem;\r\n                                templateEvent.className = className;\r\n                                templateEvent.element = td;\r\n                                templateEvent.empty = (dataItem[options.dataSourceFieldId!] == null);\r\n                                imageSettings = column.imageSettings(templateEvent);\r\n                            }\r\n\r\n                            if (imageSettings == null)\r\n                            {\r\n                                imageSettings = new GridImageSettings();\r\n                                imageSettings.value = column.field;\r\n                            }\r\n                            //#endregion\r\n\r\n                            let customCss = \"\";\r\n                            let imageCustomClass = \"\";\r\n\r\n                            //#region Custom CSS & Class\r\n                            if (imageSettings.css != null)\r\n                                customCss += imageSettings.css;\r\n\r\n                            if (imageSettings.class != null)\r\n                                imageCustomClass += \" \" + imageSettings.class;\r\n                            //#endregion\r\n\r\n                            //#region Tooltip\r\n                            let tooltip = \"\";\r\n                            if (imageSettings.tooltip != null)\r\n                                tooltip = imageSettings.tooltip;\r\n                            //#endregion\r\n\r\n                            //#region Click\r\n                            if (imageSettings.onClick != null && imageSettings.enabled !== false)\r\n                                customCss += \"cursor: pointer;\";\r\n                            //#endregion\r\n\r\n                            //#region Icon or Image url\r\n                            let imageUrl = textHTML;\r\n                            if (imageSettings.imageUrl != null)\r\n                                imageUrl = imageSettings.imageUrl;\r\n                            //#endregion\r\n\r\n                            this._cellImages.set(className, { GridControlsSettings: imageSettings, columnType: column.type });\r\n\r\n                            let url = imageUrl;\r\n                            if (imageSettings.base64Bytes != null)\r\n                                url = \"data:image/png;base64,\" + imageSettings.base64Bytes;\r\n\r\n                            textHTML = \"<img title='\" + tooltip + \"' style='\" + customCss + \"' class='\" + imageCustomClass + \" \" + className + \"' dataItemId='\" + dataItemId + \"' id='\" + rowId + \"_\" + column.field + \"' src='\" + url + \"' />\";\r\n\r\n                            if (imageSettings.visible === false)\r\n                                textHTML = \"\";\r\n                        }\r\n                        break;\r\n                    //#endregion\r\n\r\n                    //#region Label\r\n                    case GridColumnTypeEnum.Label:\r\n                        {\r\n                            let labelSettings = null;\r\n                            textAlign = GridAlignEnum.Left;\r\n\r\n                            let className = \"lbl_\" + column.field + \"_\" + rowId;\r\n\r\n                            //#region Label settings\r\n                            if (column.labelSettings != null && (dataItem[options.dataSourceFieldId!] != null))\r\n                            {\r\n                                let templateEvent = new GridTemplateEvent();\r\n                                templateEvent.dataItem = dataItem;\r\n                                templateEvent.className = className;\r\n                                templateEvent.element = td;\r\n                                templateEvent.empty = (dataItem[options.dataSourceFieldId!] == null);\r\n                                labelSettings = column.labelSettings(templateEvent);\r\n                            }\r\n\r\n                            if (labelSettings == null)\r\n                            {\r\n                                labelSettings = new GridLabelSettings();\r\n                                labelSettings.value = column.field;\r\n                            }\r\n                            //#endregion\r\n\r\n                            let customCss = \"\";\r\n\r\n                            //#region Color\r\n                            if (labelSettings.color != null)\r\n                                customCss += \"color: \" + labelSettings.color + \";\";\r\n                            //#endregion\r\n\r\n                            //#region Custom CSS & Class\r\n                            if (labelSettings.css != null)\r\n                                customCss += labelSettings.css;\r\n                            //#endregion\r\n\r\n                            //#region Tooltip\r\n                            let tooltip = \"\";\r\n                            if (labelSettings.tooltip != null)\r\n                                tooltip = labelSettings.tooltip;\r\n                            //#endregion\r\n\r\n                            //#region Click\r\n                            if (labelSettings.onClick != null && labelSettings.enabled !== false)\r\n                                customCss += \"cursor: pointer;\";\r\n                            //#endregion\r\n\r\n                            //#region Bold\r\n                            if (labelSettings.bold != null)\r\n                                customCss += \"font-weight: 500;\";\r\n                            //#endregion\r\n\r\n                            //#region Underline mode\r\n                            let underlineOnFocus = \"\";\r\n                            if (labelSettings.underlineMode != null)\r\n                            {\r\n                                switch (labelSettings.underlineMode)\r\n                                {\r\n                                    case GridLabelUnderlineMode.Always: customCss += \"text-decoration: underline\"; break;\r\n                                    case GridLabelUnderlineMode.None: customCss += \"text-decoration: none\"; break;\r\n                                    case GridLabelUnderlineMode.OnFocus: underlineOnFocus = \"grid_labelhover\"; break;\r\n                                }\r\n                            }\r\n                            //#endregion\r\n\r\n                            //#region NoBr\r\n                            if (labelSettings.noBr === true)\r\n                                customCss += \"white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\";\r\n                            //#endregion\r\n\r\n                            this._cellLabels.set(className, { GridControlsSettings: labelSettings, columnType: column.type });\r\n\r\n                            textHTML = \"<label title='\" + tooltip + \"' style='\" + customCss + \"' class='\" + className + \" \" + underlineOnFocus + \"' dataItemId='\" + dataItemId + \"' id='\" + rowId + \"_\" + column.field + \"'>\" + labelSettings.text + \"</label>\";\r\n\r\n                            if (labelSettings.visible === false)\r\n                                textHTML = \"\";\r\n                        }\r\n                        break;\r\n                    //#endregion\r\n\r\n                    //#region ComboBox, DropDownList, DropDownTree\r\n                    case GridColumnTypeEnum.ComboBox:\r\n                    case GridColumnTypeEnum.DropDownList:\r\n                    case GridColumnTypeEnum.DropDownTree:\r\n                    case GridColumnTypeEnum.DropDownTreeCheckboxes:\r\n                        {\r\n                            textAlign = GridAlignEnum.Left;\r\n                            if (column.displayField != null)\r\n                                textHTML = row[column.displayField];\r\n                        }\r\n                        break;\r\n                    //#endregion\r\n\r\n                    //#region Color\r\n                    case GridColumnTypeEnum.Color:\r\n                        {\r\n                            textAlign = GridAlignEnum.Center;\r\n                            if (textHTML.vrIsNotNullOrEmpty())\r\n                                textHTML = \"<i class='\" + IconClassSolid.Circle + \"' style='height: 20px; color: \" + textHTML + \"; display: inline-flex; align-items: center;'></i>\";\r\n                        }\r\n                        break;\r\n                    //#endregion\r\n                }\r\n                //#endregion\r\n\r\n                //#region Text\r\n                if (row[\"defaultRow\"] === true)\r\n                {\r\n                    textHTML = \"\";\r\n                    if (puma(tr).attr(\"defaultrow\") == null)\r\n                        puma(tr).attr(\"defaultrow\", \"defaultrow\");\r\n                }\r\n\r\n                if (td.innerHTML === \"\")\r\n                    td.innerHTML = textHTML;\r\n\r\n                if (options.lockable && tdLocked!.innerHTML === \"\")\r\n                    tdLocked!.innerHTML = textHTML;\r\n                //#endregion\r\n\r\n                //#region Color\r\n                if (column.cellSettings != null)\r\n                {\r\n                    if (column.cellSettings.backgroundColor != null)\r\n                    {\r\n                        puma(td).css(\"background-color\", column.cellSettings.backgroundColor);\r\n                        if (options.lockable) puma(tdLocked).css(\"background-color\", column.cellSettings.backgroundColor);\r\n                    }\r\n\r\n                    if (column.cellSettings.color != null)\r\n                    {\r\n                        puma(td).css(\"color\", column.cellSettings.color);\r\n                        if (options.lockable) puma(tdLocked).css(\"color\", column.cellSettings.color);\r\n                    }\r\n\r\n                    if (column.cellSettings.css != null)\r\n                    {\r\n                        td.style.cssText += column.cellSettings.css;\r\n                        if (options.lockable) tdLocked!.style.cssText += column.cellSettings.css;\r\n                    }\r\n                }\r\n\r\n                if (options.rowColorProperty != null && row[options.rowColorProperty] != null && row[options.rowColorProperty] !== \"\")\r\n                {\r\n                    puma(td).css(\"background-color\", row[options.rowColorProperty]);\r\n                    if (options.lockable) puma(tdLocked).css(\"background-color\", row[options.rowColorProperty]);\r\n                }\r\n                //#endregion\r\n\r\n                //#region Text align\r\n                if (column.cellSettings != null)\r\n                    textAlign = (column.cellSettings.textAlign != null) ? column.cellSettings.textAlign : textAlign;\r\n\r\n                puma(td).css(\"text-align\", textAlign);\r\n                if (options.lockable) puma(tdLocked).css(\"text-align\", textAlign);\r\n                //#endregion\r\n\r\n                //#region Tooltip\r\n                if (options.tooltip === true && column.type != GridColumnTypeEnum.Custom)\r\n                {\r\n                    let tooltip = \"\";\r\n                    if (column.cellSettings != null)\r\n                    {\r\n                        if (column.cellSettings.tooltip === true)\r\n                            tooltip = (column.title == null) ? \"\" : column.title;\r\n                        else if (typeof (column.cellSettings.tooltip) == \"string\")\r\n                            tooltip = column.cellSettings.tooltip;\r\n                        else if (typeof (column.cellSettings.tooltip) == \"function\")\r\n                        {\r\n                            let tooltipEvent = new GridTooltipEvent();\r\n                            tooltipEvent.dataItem = dataItem;\r\n                            tooltipEvent.element = td;\r\n                            tooltipEvent.empty = (dataItem[options.dataSourceFieldId!] == null);\r\n                            tooltip = column.cellSettings.tooltip(tooltipEvent);\r\n                        }\r\n                    }\r\n\r\n                    if (tooltip == null || tooltip.length == 0)\r\n                        tooltip = textHTML;\r\n\r\n                    if (tooltip != null && tooltip.length > 0)\r\n                    {\r\n                        puma(td).attr(\"title\", puma(\"<span>\" + tooltip + \"</span>\").text());\r\n                        if (options.lockable) puma(tdLocked).attr(\"title\", puma(\"<span>\" + tooltip + \"</span>\").text());\r\n                    }\r\n                }\r\n                //#endregion\r\n\r\n                //#region Bold\r\n                if (column.bold === true)\r\n                {\r\n                    puma(td).css(\"font-weight\", \"500\");\r\n                    if (options.lockable) puma(tdLocked).css(\"font-weight\", \"500\");\r\n                }\r\n                //#endregion\r\n\r\n                //#endregion\r\n\r\n                // Append td\r\n                if (options.lockable && isNewCellLocked && column.locked)\r\n                    puma(trLocked).vrAppendPuma(tdLocked)\r\n                else if (isNewCell)\r\n                    puma(tr).vrAppendPuma(td);\r\n\r\n                k++;\r\n            }\r\n            //#endregion\r\n\r\n            // Append tr\r\n            if (isNewRow)\r\n                puma(this.element()).find(\">tbody\").vrAppendPuma(tr);\r\n\r\n            if (options.lockable && isNewRowLocked)\r\n                puma(this._elementLocked).find(\">tbody\").vrAppendPuma(trLocked);\r\n\r\n            //#region GroupBy\r\n            if (options.groupable! || options.groupBy != null)\r\n            {\r\n                for (let i = options.columns!.length - 1; i >= 0; i--)\r\n                {\r\n                    let column = options.columns![i];\r\n\r\n                    let display = \"\";\r\n                    if (options.groupBy == null || (options.groupBy as GridGroupBySettings).fields == null || ((options.groupBy as GridGroupBySettings).fields != null && !((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]).map(k => k.field).includes(column.field)))\r\n                        display = \"display: none;\";\r\n\r\n                    let tdGroupBy = puma(tr).find(\"td.groupBy\" + column.field);\r\n                    if (tdGroupBy.length == 0)\r\n                        puma(tr).prepend(\"<td width=16 style='border-left: none !important;\" + display + \"' class='groupBy\" + column.field + \"'></td>\");\r\n                    else\r\n                    {\r\n                        if (options.groupBy == null || (options.groupBy as GridGroupBySettings).fields == null)\r\n                            tdGroupBy.hide();\r\n                        else if (((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]).map(k => k.field))\r\n                            tdGroupBy.show();\r\n                    }\r\n\r\n                    if (options.lockable)\r\n                    {\r\n                        let tdGroupByLocked = puma(trLocked).find(\"td.groupBy\" + column.field);\r\n                        if (tdGroupByLocked.length == 0)\r\n                            puma(trLocked).prepend(\"<td width=16 style='border-left: none !important;\" + display + \"' class='groupBy\" + column.field + \"'></td>\");\r\n                        else\r\n                        {\r\n                            if (options.groupBy == null || (options.groupBy as GridGroupBySettings).fields == null)\r\n                                tdGroupByLocked.hide();\r\n                            else if (((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]).map(k => k.field))\r\n                                tdGroupByLocked.show();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            //#endregion\r\n\r\n            puma(tr).height(options.rowHeight!);\r\n\r\n            //#region Select row\r\n            if (options.checkboxes != GridCheckboxModeEnum.None)\r\n            {\r\n                puma(tr).add(puma(trLocked)).off(\"click\");\r\n                puma(tr).add(puma(trLocked)).click((e: any) =>\r\n                {\r\n                    if (e.shiftKey && options.checkboxes == GridCheckboxModeEnum.MultiCheck)\r\n                        this.selectRangeShiftKey(e.target);\r\n                    else\r\n                    {\r\n                        if (!puma(e.target).is(\"input\") && !puma(e.target).hasClass(\"vrButton\") && !puma(e.target).hasClass(\"vrIcon\"))\r\n                            this.selectRowInternal(dataItemId, false, true);\r\n                    }\r\n                });\r\n            }\r\n            else\r\n            {\r\n                puma(tr).add(puma(trLocked)).off(\"click\");\r\n                puma(tr).add(puma(trLocked)).click((e: any) =>\r\n                {\r\n                    //#region Event\r\n                    if (options.onSelectRow != null)\r\n                    {\r\n                        let selectRowEvent = new GridSelectRowEvent();\r\n                        selectRowEvent.sender = this;\r\n                        selectRowEvent.rowElement = e.currentTarget;\r\n                        selectRowEvent.dataItem = dataItem;\r\n                        selectRowEvent.checked = true;\r\n                        selectRowEvent.empty = (dataItem[options.dataSourceFieldId!] == null);\r\n                        options.onSelectRow(selectRowEvent);\r\n                    }\r\n                    //#endregion\r\n                });\r\n            }\r\n            //#endregion\r\n\r\n            //#region OnRowDataBound\r\n            if (options.onRowDataBound != null)\r\n            {\r\n                let onRowDataBoundEvent = new GridOnRowDataBoundEvent();\r\n                onRowDataBoundEvent.sender = this;\r\n                onRowDataBoundEvent.rowElement = tr;\r\n\r\n                let dataItem: any = {};\r\n                for (let property of Object.getOwnPropertyNames(row))\r\n                    dataItem[property] = row[property];\r\n\r\n                onRowDataBoundEvent.dataItem = dataItem;\r\n                onRowDataBoundEvent.realDataItem = row;\r\n                onRowDataBoundEvent.empty = (dataItem[options.dataSourceFieldId!] == null);\r\n\r\n                let backgroundColor = options.onRowDataBound(onRowDataBoundEvent);\r\n                if (backgroundColor != null && backgroundColor.length > 0)\r\n                {\r\n                    puma(tr).find(\"td\").css(\"background-color\", backgroundColor);\r\n                    if (options.lockable)\r\n                        puma(trLocked).find(\"td\").css(\"background-color\", backgroundColor);\r\n                }\r\n            }\r\n            //#endregion\r\n\r\n            i++;\r\n            j++;\r\n        }\r\n        //#endregion\r\n\r\n        //#region Remove empty rows\r\n        if (items.length < options.pageSize!)\r\n        {\r\n            let trGroupByNumber = puma(this.element()).find(\".grid_trGroupBy\").length;\r\n            let to = (options.groupable && options.groupBy != null) ? options.pageSize! + trGroupByNumber : options.pageSize!;\r\n            let from = (options.groupable && options.groupBy != null) ? items.length + 1 + trGroupByNumber : items.length + 1;\r\n            for (let i = from; i <= to; i++)\r\n                puma(this._divBody).find(\"tbody tr:nth-child(\" + from + \")\").remove();\r\n\r\n            if (options.lockable)\r\n            {\r\n                let trGroupByNumber = puma(this._elementLocked).find(\".grid_trGroupBy\").length;\r\n                let to = (options.groupable && options.groupBy != null) ? options.pageSize! + trGroupByNumber : options.pageSize!;\r\n                let from = (options.groupable && options.groupBy != null) ? items.length + 1 + trGroupByNumber : items.length + 1;\r\n                for (let i = from; i <= to; i++)\r\n                    puma(this._divBodyLocked).find(\"tbody tr:nth-child(\" + from + \")\").remove();\r\n            }\r\n        }\r\n\r\n        if (this._actualPageSize > options.pageSize!)\r\n        {\r\n            let trGroupByNumber = puma(this.element()).find(\".grid_trGroupBy\").length;\r\n            for (let i = options.pageSize! + 1 + trGroupByNumber; i <= this._actualPageSize + trGroupByNumber; i++)\r\n                puma(this._divBody).find(\"tbody tr:nth-child(\" + (options.pageSize! + 1 + trGroupByNumber) + \")\").remove();\r\n\r\n            if (options.lockable)\r\n            {\r\n                let trGroupByNumber = puma(this._elementLocked).find(\".grid_trGroupBy\").length;\r\n                for (let i = options.pageSize! + 1 + trGroupByNumber; i <= this._actualPageSize + trGroupByNumber; i++)\r\n                    puma(this._divBodyLocked).find(\"tbody tr:nth-child(\" + (options.pageSize! + 1 + trGroupByNumber) + \")\").remove();\r\n            }\r\n        }\r\n        this._actualPageSize = options.pageSize!;\r\n        //#endregion\r\n\r\n        //#region OnDataBound\r\n        if (options.onDataBound != null && triggerDataBound)\r\n        {\r\n            let onDataBoundEvent = new GridOnDataBoundEvent();\r\n            onDataBoundEvent.sender = this;\r\n            options.onDataBound(onDataBoundEvent);\r\n        }\r\n        //#endregion\r\n\r\n        //#region Footer\r\n        if (options.footer !== false)\r\n        {\r\n            let footer = options.footer as GridFooterSettings;\r\n            let maxLength = (options.serverBinding !== false) ? this._responseForServerBinding[(options.serverBinding! as GridServerBindSettings).itemCountPropertyName!] : dataItems.length;\r\n            if (options.pageSize! < maxLength)\r\n            {\r\n                let pageSelected = this.pageSelected();\r\n                let numberOfPages = Math.trunc(maxLength / options.pageSize!);\r\n                if (maxLength % options.pageSize! > 0)\r\n                    numberOfPages += 1;\r\n\r\n                //#region Pages\r\n                if (footer.showPagination && options.pageSize! != 0)\r\n                {\r\n                    puma(\"#\" + this._elementId + \"_divPagination\").remove();\r\n                    let spanPagination = puma(\"<span id='\" + this._elementId + \"_divPagination' class='p-grid-pagination'></span>\").prependTo(this._divFooter);\r\n\r\n                    //#region Previous buttons\r\n                    createButton(\r\n                        {\r\n                            icon: IconClassLight.Backward,\r\n                            css: \"border-left: none; border-top-left-radius: 5px; border-bottom-left-radius: 5px;\",\r\n                            onClick: (e) =>\r\n                            {\r\n                                this.pageSelected(1);\r\n                            }\r\n                        }, spanPagination, null, this._elementId + \"_btnFirstPage\");\r\n\r\n                    createButton(\r\n                        {\r\n                            icon: IconClassLight.BackwardStep,\r\n                            onClick: (e) =>\r\n                            {\r\n                                let pageToSelect = this.pageSelected() - 1;\r\n                                if (pageToSelect < 1)\r\n                                    pageToSelect = 1;\r\n\r\n                                this.pageSelected(pageToSelect);\r\n                            }\r\n                        }, spanPagination, null, this._elementId + \"_btnPreviousPage\");\r\n                    //#endregion\r\n\r\n                    //#region Index\r\n                    let maxVisiblePages = (options.footer! as GridFooterSettings).maxVisiblePages!;\r\n                    let startingIndex = 1;\r\n                    if (pageSelected % maxVisiblePages == 0)\r\n                        startingIndex = (((pageSelected / maxVisiblePages) - 1) * maxVisiblePages) + 1;\r\n                    else\r\n                        startingIndex = (Math.trunc(pageSelected / maxVisiblePages) * maxVisiblePages) + 1;\r\n\r\n                    let endIndex = 0;\r\n                    let noMore = false;\r\n                    if (numberOfPages <= maxVisiblePages)\r\n                    {\r\n                        endIndex = startingIndex + numberOfPages;\r\n                        noMore = true;\r\n                    }\r\n                    else\r\n                        endIndex = startingIndex + maxVisiblePages;\r\n\r\n                    if (endIndex >= (numberOfPages + 1))\r\n                    {\r\n                        endIndex = (numberOfPages + 1);\r\n                        noMore = true;\r\n                    }\r\n                    //#endregion\r\n\r\n                    //#region Page numbers\r\n                    if (startingIndex > 1)\r\n                    {\r\n                        puma(\"<button id='\" + this._elementId + \"_btnPage_\" + (startingIndex - 1) + \"'></button>\").vrAppendToPuma(spanPagination);\r\n                        createButton(\r\n                            {\r\n                                text: \"...\",\r\n                                onClick: (e) =>\r\n                                {\r\n                                    this.pageSelected(startingIndex - 1);\r\n                                }\r\n                            }, null, null, this._elementId + \"_btnPage_\" + (startingIndex - 1));\r\n                    }\r\n\r\n                    for (let i = startingIndex; i <= endIndex; i++)\r\n                    {\r\n                        if (i == endIndex && noMore)\r\n                            break;\r\n\r\n                        puma(\"<button id='\" + this._elementId + \"_btnPage_\" + i + \"'></button>\").vrAppendToPuma(spanPagination);\r\n                        createButton(\r\n                            {\r\n                                text: (i == endIndex) ? ((startingIndex == endIndex) ? String(i) : \"...\") : String(i),\r\n                                class: (i == pageSelected) ? \"p-grid-pageSelected\" : undefined,\r\n                                onClick: (e) =>\r\n                                {\r\n                                    let index = Number(puma(e.sender.element()).attr(\"id\").split(\"_\").last());\r\n                                    this.pageSelected(index);\r\n                                }\r\n                            }, null, null, this._elementId + \"_btnPage_\" + i);\r\n                    }\r\n                    //#endregion\r\n\r\n                    //#region Next buttons\r\n                    puma(\"<button id='\" + this._elementId + \"_btnNextPage'></button>\").vrAppendToPuma(spanPagination);\r\n                    createButton(\r\n                        {\r\n                            icon: IconClassLight.ForwardStep,\r\n                            onClick: (e) =>\r\n                            {\r\n                                let pageToSelect = this.pageSelected() + 1;\r\n                                if (pageToSelect > numberOfPages)\r\n                                    pageToSelect = numberOfPages;\r\n\r\n                                this.pageSelected(pageToSelect);\r\n                            }\r\n                        }, null, null, this._elementId + \"_btnNextPage\");\r\n\r\n                    puma(\"<button id='\" + this._elementId + \"_btnLastPage'></button>\").vrAppendToPuma(spanPagination);\r\n                    createButton(\r\n                        {\r\n                            icon: IconClassLight.Forward,\r\n                            css: \"border-top-right-radius: 5px; border-bottom-right-radius: 5px;\",\r\n                            onClick: (e) =>\r\n                            {\r\n                                this.pageSelected(numberOfPages);\r\n                            }\r\n                        }, null, null, this._elementId + \"_btnLastPage\");\r\n                    //#endregion\r\n                }\r\n                //#endregion\r\n\r\n                //#region Total elements\r\n                if (footer.totalElements)\r\n                {\r\n                    puma(\"#\" + this._elementId + \"TotalsLabel\").remove();\r\n                    puma(\"<span id='\" + this._elementId + \"TotalsLabel' class='p-grid-totalElements'></span>\").vrAppendToPuma(this._divFooter);\r\n\r\n                    if (typeof (footer.totalElements) == \"boolean\" && footer.totalElements === true)\r\n                    {\r\n                        if (options.pageSize == 0)\r\n                            puma(\"#\" + this._elementId + \"TotalsLabel\").html(\"Nessun elemento\");\r\n                        else\r\n                        {\r\n                            if (lastIndex > maxLength)\r\n                                lastIndex = maxLength;\r\n\r\n                            let pagesText = firstIndex + \" - \" + lastIndex + \" di \" + maxLength + ((maxLength == 1) ? \" elemento\" : \" elementi\") +\r\n                                \" - \" + pageSelected + \" di \" + numberOfPages + \" pagine\";\r\n\r\n                            if (options.serverBinding !== false)\r\n                            {\r\n                                let indexFrom = options.pageSize! * (this.pageSelected() - 1) + 1;\r\n                                let indexTo = options.pageSize! * (this.pageSelected() - 1) + dataItems.length;\r\n\r\n                                pagesText = indexFrom + \" - \" + indexTo + \" di \" + maxLength + ((maxLength == 1) ? \" elemento\" : \" elementi\") +\r\n                                    \" - \" + pageSelected + \" di \" + numberOfPages + \" pagine\";\r\n                            }\r\n\r\n                            puma(\"#\" + this._elementId + \"TotalsLabel\").html(pagesText);\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        let totalElementTemplateEvent = new GridTotalElementTemplateEvent();\r\n                        totalElementTemplateEvent.dataItems = dataItems;\r\n                        totalElementTemplateEvent.firstIndex = firstIndex;\r\n                        totalElementTemplateEvent.lastIndex = lastIndex;\r\n                        totalElementTemplateEvent.numberOfPages = numberOfPages;\r\n                        totalElementTemplateEvent.pageSelected = pageSelected;\r\n                        let totalElementsText = footer.totalElements(totalElementTemplateEvent);\r\n\r\n                        puma(\"#\" + this._elementId + \"TotalsLabel\").html(totalElementsText);\r\n                    }\r\n                }\r\n                //#endregion                \r\n            }\r\n            else\r\n            {\r\n                //#region Clear footer\r\n                if (footer.showPagination)\r\n                    puma(\"#\" + this._elementId + \"_divPagination\").remove();\r\n\r\n                if (footer.totalElements)\r\n                {\r\n                    puma(\"#\" + this._elementId + \"TotalsLabel\").remove();\r\n                    puma(\"<span id='\" + this._elementId + \"TotalsLabel' class='p-grid-totalElements'></span>\").vrAppendToPuma(this._divFooter);\r\n                    let realDataItems = dataItems.filter(k => k[\"defaultRow\"] == null || k[\"defaultRow\"] == false);\r\n\r\n                    if (typeof (footer.totalElements) == \"boolean\" && footer.totalElements === true)\r\n                    {\r\n                        if (realDataItems.length == 0)\r\n                            puma(\"#\" + this._elementId + \"TotalsLabel\").html(\"Nessun elemento\");\r\n                        else\r\n                            puma(\"#\" + this._elementId + \"TotalsLabel\").html(dataItems.length + ((realDataItems.length == 1) ? \" elemento\" : \" elementi\"));\r\n                    }\r\n                    else\r\n                    {\r\n                        let totalElementTemplateEvent = new GridTotalElementTemplateEvent();\r\n                        totalElementTemplateEvent.dataItems = realDataItems;\r\n                        totalElementTemplateEvent.firstIndex = firstIndex;\r\n                        totalElementTemplateEvent.lastIndex = lastIndex;\r\n                        let totalElementsText = footer.totalElements(totalElementTemplateEvent);\r\n\r\n                        puma(\"#\" + this._elementId + \"TotalsLabel\").html(totalElementsText);\r\n                    }\r\n                }\r\n\r\n                if (!footer.showPageSize)\r\n                {\r\n                    let ddlPageSize = ControlManager.get<ComboBox>(this._elementId + \"_ddlPageSize\");\r\n                    if (ddlPageSize != null)\r\n                        ddlPageSize.hide();\r\n                }\r\n                //#endregion\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#region Totals\r\n        if (this._showTotals && options.columns!.filter(k => k.aggregate != null && k.aggregate !== false).length > 0)\r\n        {\r\n            if (options.serverBinding !== false)\r\n                this.createTotals(this._responseForServerBinding[(options.serverBinding as GridServerBindSettings).totalsPropertyName!], false);\r\n            else\r\n            {\r\n                //#region Worker totals request\r\n                puma(this._divTotals).find(\"td\").empty();\r\n                if (options.lockable)\r\n                    puma(this._divTotalsLocked).find(\"td\").empty();\r\n\r\n                let workerTotalsRequest = new WorkerTotalsRequest();\r\n                workerTotalsRequest.isGroup = false;\r\n                workerTotalsRequest.dataItems = dataItems;\r\n                workerTotalsRequest.columnOptions = options.columns!.filter(k => k.aggregate != null && k.aggregate !== false && k.hidden !== true).map(k => \r\n                {\r\n                    let td = puma(this._divTotals).find(\"td[field='\" + k.field + \"']\")[0];\r\n                    if (options.lockable && td == null)\r\n                        td = puma(this._divTotalsLocked).find(\"td[field='\" + k.field + \"']\")[0];\r\n\r\n                    let decimalDigits = puma(td).attr(\"decimalDigits\");\r\n                    let aggregateMode = Number(puma(td).attr(\"aggregate\"));\r\n\r\n                    return {\r\n                        field: k.field,\r\n                        decimalDigits: decimalDigits,\r\n                        aggregateMode: aggregateMode,\r\n                        type: k.type!,\r\n                        countZeroInAverage: k.countZeroInAverage,\r\n                        roundingSettings: k.roundingSettings\r\n                    }\r\n                });\r\n                this._workerTotals.postMessage(workerTotalsRequest);\r\n                //#endregion\r\n\r\n                //#region Worker totals response\r\n                this._workerTotals.onmessage = (e) =>\r\n                {\r\n                    this.createTotals(e.data, false);\r\n                };\r\n                //#endregion\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#region GroupBy\r\n        if (options.groupable! && options.groupBy != null)\r\n        {\r\n            //#region Group totals\r\n            let workerTotalsGroupRequest = new WorkerTotalsRequest();\r\n            workerTotalsGroupRequest.groupItems = [];\r\n            workerTotalsGroupRequest.isGroup = true;\r\n\r\n            let trGroupByList = Array.from<HTMLElement>(puma(this.element()).find(\".grid_trGroupBy\"));\r\n            trGroupByList.vrPushRange(Array.from<HTMLElement>(puma(this._elementLocked).find(\".grid_trGroupByLocked\")))\r\n\r\n            for (let tr of trGroupByList)\r\n            {\r\n                let children = [];\r\n                if (puma(tr).hasClass(\"grid_trGroupByLocked\"))\r\n                    children = this.getChildrenGroupRows(tr, this._divBodyLocked).children;\r\n                else\r\n                    children = this.getChildrenGroupRows(tr, this._divBody).children;\r\n\r\n                let level = Number(puma(tr).attr(\"level\"));\r\n\r\n                //#region Children number\r\n                if (!options.serverBinding)\r\n                {\r\n                    let td = puma(tr).find(\"td.grid_tdGroupByName\");\r\n                    let childrenNumber = children.length;\r\n\r\n                    if (this.dataSource().length > 1)\r\n                        td.find(\"div.grid_divGroupByName\").vrAppendPuma(\"<span style='margin-left: 5px;'>(\" + childrenNumber + \")</span>\");\r\n                }\r\n                //#endregion\r\n\r\n                //#region Totals group\r\n                if (this._showTotals && level == 0)\r\n                {\r\n                    let value = puma(tr).attr(\"value\").replace(/\\(/g, \"\").replace(/\\)/g, \"\").replace(/,/g, \"\").replace(/\\[/g, \"\").replace(/\\]/g, \"\").replace(/:/g, \"\");\r\n\r\n                    let clonedTr = puma(children.vrLast()).clone();\r\n                    clonedTr.addClass(\"p-grid-totalsGroup\");\r\n                    clonedTr.find(\"td\").empty();\r\n                    clonedTr.vrInsertAfterPuma(children.vrLast());\r\n                    clonedTr.addClass(this._elementId + \"_totalGroupBy\" + value);\r\n\r\n                    let workerTotalsGroupItem = new WorkerTotalsGroupItem();\r\n                    workerTotalsGroupItem.groupValue = value;\r\n\r\n                    let childrenItems = [];\r\n                    for (let child of children)\r\n                    {\r\n                        let dataItemId = puma(child).attr(\"dataitemid\");\r\n                        childrenItems.push(dataItems.filter(k => k[options.dataSourceFieldId!] == dataItemId)[0]);\r\n                    }\r\n                    workerTotalsGroupItem.dataItems = childrenItems;\r\n                    workerTotalsGroupRequest.groupItems.push(workerTotalsGroupItem);\r\n                }\r\n                //#endregion\r\n            }\r\n\r\n            if (this._showTotals && options.columns!.filter(k => k.aggregate != null && k.aggregate !== false).length > 0)\r\n            {\r\n                //#region WorkerTotalsGroupRequest\r\n                workerTotalsGroupRequest.columnOptions = options.columns!.filter(k => k.aggregate != null && k.aggregate !== false && k.hidden !== true).map(k =>\r\n                {\r\n                    let td = puma(this._divTotals).find(\"td[field='\" + k.field + \"']\")[0];\r\n                    if (options.lockable && td == null)\r\n                        td = puma(this._divTotalsLocked).find(\"td[field='\" + k.field + \"']\")[0];\r\n\r\n                    let decimalDigits = puma(td).attr(\"decimalDigits\");\r\n                    let aggregateMode = Number(puma(td).attr(\"aggregate\"));\r\n\r\n                    return {\r\n                        field: k.field,\r\n                        decimalDigits: decimalDigits,\r\n                        aggregateMode: aggregateMode,\r\n                        type: k.type!,\r\n                        countZeroInAverage: k.countZeroInAverage,\r\n                        roundingSettings: k.roundingSettings\r\n                    }\r\n                });\r\n                this._workerTotalsGroup.postMessage(workerTotalsGroupRequest);\r\n                //#endregion\r\n\r\n                //#region WorkerTotalsGroupResponse\r\n                this._workerTotalsGroup.onmessage = (e) =>\r\n                {\r\n                    this.createTotals(e.data, true);\r\n                };\r\n                //#endregion\r\n            }\r\n\r\n            //#endregion\r\n        }\r\n        //#endregion\r\n\r\n        //#region Recalculate Width/Height & AdjustTrHeight\r\n        this.recalculateHeight();\r\n        this.recalculateWidth();\r\n        this.recalculateHeight();\r\n\r\n        this.adjustTrHeight();\r\n        //#endregion\r\n\r\n        this._deletedItems = [];\r\n        if (this._checkedItemsForFiltering != null && this._checkedItemsForFiltering.length > 0)\r\n            this.selectRows(this._checkedItemsForFiltering.map(k => k[options.dataSourceFieldId!]), undefined, false);\r\n    }\r\n\r\n    private createTotals(data: any[], isGroup: boolean)\r\n    {\r\n        if (!isGroup)\r\n        {\r\n            for (let total of data)\r\n            {\r\n                let td = puma(this._divTotals).find(\"td[field='\" + total.field + \"']\")[0];\r\n\r\n                let options = this.getOptions();\r\n                if (options.lockable && td == null)\r\n                    td = puma(this._divTotalsLocked).find(\"td[field='\" + total.field + \"']\")[0];\r\n\r\n                this.writeTotals(total, td);\r\n            }\r\n        }\r\n        else\r\n        {\r\n            for (let totalsGroup of data)\r\n            {\r\n                for (let total of totalsGroup.totals)\r\n                {\r\n                    let tdList = Array.from<HTMLElement>(puma(\".\" + this._elementId + \"_totalGroupBy\" + totalsGroup.groupValue).find(\"td[field='\" + total.field + \"']\"))\r\n                    for (let td of tdList)\r\n                        this.writeTotals(total, td);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private writeTotals(total: WorkerTotalsResult, td: HTMLElement)\r\n    {\r\n        if (td != null)\r\n        {\r\n            let valueFormatted = this.formatValue(total.total, total.type, total.decimalDigits, total.roundingSettings);\r\n            td.innerHTML = valueFormatted;\r\n            puma(td).attr(\"title\", td.innerHTML);\r\n        }\r\n    }\r\n\r\n    private formatValue(value: any, columnType?: GridColumnTypeEnum, decimalDigits?: number, roundingSettings?: NumberFormatRoundingSettings, showSeconds?: boolean)\r\n    {\r\n        let options = this.getOptions();\r\n        if (columnType == null) columnType = GridColumnTypeEnum.String;\r\n\r\n        //#region Number, Currency, Percentage\r\n        if (columnType == GridColumnTypeEnum.Number || columnType == GridColumnTypeEnum.Currency || columnType == GridColumnTypeEnum.Percentage)\r\n        {\r\n            if (roundingSettings == null)\r\n                roundingSettings = options.roundingSettings;\r\n\r\n            let formatSettings = new NumberFormatSettings(roundingSettings);\r\n            formatSettings.minimumFractionDigits = decimalDigits;\r\n            formatSettings.maximumFractionDigits = decimalDigits;\r\n\r\n            if (roundingSettings != null)\r\n            {\r\n                if (roundingSettings.minimumFractionDigits != null) formatSettings.minimumFractionDigits = roundingSettings.minimumFractionDigits;\r\n                if (roundingSettings.maximumFractionDigits != null) formatSettings.maximumFractionDigits = roundingSettings.maximumFractionDigits\r\n\r\n                if (roundingSettings.roundingMode == RoundingModeEnum.None)\r\n                {\r\n                    if (roundingSettings.maximumFractionDigits == null)\r\n                        formatSettings.maximumFractionDigits = 8;\r\n                }\r\n            }\r\n\r\n            if (columnType == GridColumnTypeEnum.Percentage)\r\n                value = Number(value) / 100;\r\n\r\n            if (columnType == GridColumnTypeEnum.Number)\r\n                return Number(value).vrToNumberString(formatSettings);\r\n            else if (columnType == GridColumnTypeEnum.Currency)\r\n                return Number(value).vrToCurrencyString(formatSettings);\r\n            else if (columnType == GridColumnTypeEnum.Percentage)\r\n                return Number(value).vrToPercentageString(formatSettings);\r\n        }\r\n        //#endregion\r\n\r\n        //#region Duration\r\n        else if (columnType == GridColumnTypeEnum.Duration)\r\n        {\r\n            let hours: number = Math.trunc(value / 60);\r\n            let hoursString = String(hours);\r\n            if (hours < 10)\r\n                hoursString = \"0\" + hoursString;\r\n\r\n            let minutes: number = Math.trunc(value % 60);\r\n            let minutesString = String(minutes);\r\n            if (minutes < 10)\r\n                minutesString = \"0\" + minutesString;\r\n\r\n            return hoursString + \":\" + minutesString;\r\n        }\r\n        //#endregion\r\n\r\n        //#region Date, DateTime, Time\r\n        else if (columnType == GridColumnTypeEnum.Date || columnType == GridColumnTypeEnum.DateTime || columnType == GridColumnTypeEnum.Time)\r\n        {\r\n            value = Date.vrFixDateString(value);\r\n            if (columnType == GridColumnTypeEnum.Date)\r\n                return (value == \"\" || !Date.vrIsValidDate(value)) ? \"\" : new Date(value).vrToItalyString(DateModeEnum.Date);\r\n            else if (columnType == GridColumnTypeEnum.DateTime)\r\n                return (value == \"\" || !Date.vrIsValidDate(value)) ? \"\" : new Date(value).vrToItalyString(DateModeEnum.DateTime, showSeconds);\r\n            else if (columnType == GridColumnTypeEnum.Time)\r\n                return (value == \"\" || !Date.vrIsValidDate(value)) ? \"\" : new Date(value).vrToItalyString(DateModeEnum.Time, showSeconds);\r\n        }\r\n        //#endregion\r\n\r\n        return \"\";\r\n    }\r\n    //#endregion\r\n\r\n    //#region Manage rows\r\n    updateRow(dataItem: any, rebind = true)\r\n    {\r\n        let options = this.getOptions();\r\n        let dataItemId = dataItem[options.dataSourceFieldId!];\r\n\r\n        let itemOriginalDatasource = this.originalDataSource().filter(k => k[options.dataSourceFieldId!] == dataItemId)[0];\r\n        let itemOriginalDatasourceIndex = this.originalDataSource().indexOf(itemOriginalDatasource);\r\n        let itemDatasource = this.dataSource().filter(k => k[options.dataSourceFieldId!] == dataItemId)[0];\r\n        let itemDatasourceIndex = this.dataSource().indexOf(itemDatasource);\r\n        if (itemOriginalDatasource != null)\r\n        {\r\n            this.originalDataSource()[itemOriginalDatasourceIndex] = dataItem;\r\n            this.dataSource()[itemDatasourceIndex] = dataItem;\r\n\r\n            if (rebind)\r\n                this.update();\r\n        }\r\n        else\r\n            this.addRow(dataItem, rebind);\r\n    }\r\n\r\n    updateRows(dataItems: any[], rebind = true)\r\n    {\r\n        for (let dataItem of dataItems)\r\n            this.updateRow(dataItem, false);\r\n\r\n        if (rebind)\r\n            this.update();\r\n    }\r\n\r\n    addRow(dataItem: any, rebind = true)\r\n    {\r\n        this.addRows([dataItem], rebind);\r\n    }\r\n\r\n    addRows(dataItems: any[], rebind = true)\r\n    {\r\n        let options = this.getOptions();\r\n        for (let dataItem of dataItems)\r\n        {\r\n            if (dataItem[options.dataSourceFieldId!] == null)\r\n            {\r\n                dataItem[options.dataSourceFieldId!] = this._lastIndexAdded;\r\n                this._lastIndexAdded--;\r\n            }\r\n        }\r\n\r\n        if (this._originalDataSource == null)\r\n            this._originalDataSource = [];\r\n\r\n        this.dataSource().vrPushRange(dataItems);\r\n        this._originalDataSource.vrPushRange(dataItems);\r\n\r\n        if (options.groupable! && options.groupBy != null)\r\n            this.sortingGroupFields(dataItems);\r\n\r\n        if (rebind)\r\n            this.setDataSource(this.dataSource());\r\n\r\n        //#region Add to dictionary for filter\r\n        for (let column of options.columns!)\r\n        {\r\n            if (column.type != GridColumnTypeEnum.EditButton)\r\n                this._dictionaryDataValues.set(column.field, this._originalDataSource.map(k => String(k[column.field]).toLowerCase()));\r\n        }\r\n        //#endregion\r\n    }\r\n\r\n    deleteRow(dataItemId: number | string, rebind = false)\r\n    {\r\n        this.deleteRows([dataItemId], rebind);\r\n    }\r\n\r\n    deleteRows(dataItemIdList: (number | string)[], rebind = false)\r\n    {\r\n        let options = this.getOptions();\r\n\r\n        //#region Delete row element\r\n        let rows = Array.from(puma(this._divBody).find(\"tr\"));\r\n        for (let row of rows)\r\n        {\r\n            if (dataItemIdList.vrToStringArrayList().includes(puma(row).attr(\"dataItemId\")))\r\n                puma(row).remove();\r\n        }\r\n\r\n        if (this.thereAreLockedColumns())\r\n        {\r\n            let rows = Array.from(puma(this._divBodyLocked).find(\"tr\"));\r\n            for (let row of rows)\r\n            {\r\n                if (dataItemIdList.vrToStringArrayList().includes(puma(row).attr(\"dataItemId\")))\r\n                    puma(row).remove();\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#region Delete item\r\n        for (let itemId of dataItemIdList)\r\n        {\r\n            let itemToDelete = this.dataSource().filter(k => k[options.dataSourceFieldId!] == itemId)[0];\r\n            if (itemToDelete != null)\r\n            {\r\n                this.dataSource().vrDeleteItem(itemToDelete, options.dataSourceFieldId!);\r\n                this._originalDataSource.vrDeleteItem(itemToDelete, options.dataSourceFieldId!);\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#region Remove from dictionary for filter\r\n        for (let column of options.columns!)\r\n        {\r\n            if (column.type != GridColumnTypeEnum.EditButton)\r\n                this._dictionaryDataValues.set(column.field, this._originalDataSource.map(k => String(k[column.field]).toLowerCase()));\r\n        }\r\n        //#endregion\r\n\r\n        if (rebind)\r\n            this.setDataSource(this.dataSource());\r\n    }\r\n\r\n    rows()\r\n    {\r\n        let rows: GridRow[] = [];\r\n        let rowElements = Array.from<HTMLElement>(puma(this._divBody).find(\"tr\"));\r\n        for (let rowElement of rowElements)\r\n        {\r\n            let row = new GridRow();\r\n            row.element = rowElement;\r\n            row.cells = puma(rowElement).find(\"td\");\r\n            row.id = rowElement.id;\r\n            row.dataItemId = rowElement.getAttribute(\"dataItemId\")!;\r\n            row.index = Number(rowElement.getAttribute(\"row\")!);\r\n            rows.push(row);\r\n        }\r\n        return rows;\r\n    }\r\n    //#endregion\r\n\r\n    //#region Items\r\n    public getAllItems(toSavePurpose: boolean = false)\r\n    {\r\n        let rows = this.dataSource();\r\n        if (toSavePurpose)\r\n        {\r\n            for (let row of rows)\r\n            {\r\n                for (let property in row)\r\n                {\r\n                    let propertyValue = row[property];\r\n                    if (Date.vrIsValidDate(propertyValue))\r\n                        row[property] = Date.vrConvertDateFromClient(propertyValue);\r\n                }\r\n            }\r\n        }\r\n        return rows.filter(k => k.defaultRow !== true);\r\n    }\r\n\r\n    getCheckedItems()\r\n    {\r\n        let options = this.getOptions();\r\n        let checkboxList: HTMLInputElement[] = Array.from<HTMLInputElement>(puma(this._divBody).find(\".vr-checkbox-column\") as any);\r\n        if (this.thereAreLockedColumns())\r\n            checkboxList = Array.from<HTMLInputElement>(puma(this._divBodyLocked).find(\".vr-checkbox-column\") as any);\r\n\r\n        let checkboxCheckedList = checkboxList.filter(k => k.checked);\r\n\r\n        let checkedItems: any[] = [];\r\n        for (let checkboxChecked of checkboxCheckedList)\r\n        {\r\n            let rowElement = checkboxChecked.closest(\"tr\");\r\n            if (rowElement != null)\r\n            {\r\n                let rowId = puma(rowElement).attr(\"dataItemId\");\r\n                let checkedItem = this.dataSource().filter(k => k[options.dataSourceFieldId!] == rowId)[0];\r\n                if (checkedItem != null)\r\n                    checkedItems.push(checkedItem);\r\n            }\r\n        }\r\n        return checkedItems;\r\n    }\r\n\r\n    getCheckedValues()\r\n    {\r\n        let options = this.getOptions();\r\n        return this.getCheckedItems().map(k => k != null && k[options.dataSourceFieldId!]);\r\n    }\r\n\r\n    getDeletedItems()\r\n    {\r\n        return this._deletedItems;\r\n    }\r\n\r\n    getDeletedItemValues(key?: string)\r\n    {\r\n        let options = this.getOptions();\r\n        return this.getDeletedItems().map(k => key != null ? k[key] : k[options.dataSourceFieldId!]);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Check/Select\r\n    clearSelection(triggerChange = true)\r\n    {\r\n        this.unCheckAllRows(triggerChange);\r\n    }\r\n\r\n    checkAllRows(triggerChange = true)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.checkboxes == GridCheckboxModeEnum.SingleCheck)\r\n            return;\r\n\r\n        let headerCheckbox = puma(\"#\" + puma(this.element()).attr(\"id\") + \"header_CheckboxColumn\");\r\n        headerCheckbox.attr(\"checked\", \"checked\");\r\n        if (headerCheckbox[0] != null)\r\n            headerCheckbox[0].checked = true;\r\n\r\n        let checkboxList: HTMLInputElement[] = Array.from<HTMLInputElement>(puma(this._divBody).find(\".vr-checkbox-column\") as any);\r\n        if (this.thereAreLockedColumns())\r\n            checkboxList = Array.from<HTMLInputElement>(puma(this._divBodyLocked).find(\".vr-checkbox-column\") as any);\r\n\r\n        for (let checkbox of checkboxList)\r\n        {\r\n            puma(checkbox).attr(\"checked\", \"checked\");\r\n            checkbox.checked = true;\r\n        }\r\n\r\n        headerCheckbox.removeClass(\"indeterminateVrCheckbox\");\r\n\r\n        //#region Group by\r\n        if (options.groupable! && options.groupBy != null && options.checkboxes != GridCheckboxModeEnum.None)\r\n        {\r\n            let groupByRows = puma(this._divBody).find(\".grid_trGroupBy\");\r\n            if (this.thereAreLockedColumns())\r\n                groupByRows = puma(this._divBodyLocked).find(\".grid_trGroupBy\");\r\n\r\n            for (let groupByRow of Array.from(groupByRows))\r\n            {\r\n                let checkBox = puma(groupByRow).find(\"input\");\r\n                (checkBox[0] as HTMLInputElement).checked = true;\r\n                checkBox.removeClass(\"indeterminateVrCheckbox\");\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        this._checkedItemsForFiltering = this.getCheckedItems();\r\n\r\n        //#region Event\r\n        if (triggerChange && options.onSelectAllRows != null)\r\n        {\r\n            let selectAllRowsEvent = new GridSelectAllRowsEvent();\r\n            selectAllRowsEvent.sender = this;\r\n            options.onSelectAllRows(selectAllRowsEvent);\r\n        }\r\n        //#endregion\r\n    }\r\n\r\n    unCheckAllRows(triggerChange = true)\r\n    {\r\n        let options = this.getOptions();\r\n        let headerCheckbox = puma(\"#\" + puma(this.element()).attr(\"id\") + \"header_CheckboxColumn\");\r\n        headerCheckbox.removeAttr(\"checked\");\r\n        if (headerCheckbox[0] != null)\r\n            headerCheckbox[0].checked = false;\r\n\r\n        let checkboxList: HTMLInputElement[] = Array.from<HTMLInputElement>(puma(this._divBody).find(\".vr-checkbox-column\") as any);\r\n        if (this.thereAreLockedColumns())\r\n            checkboxList = Array.from<HTMLInputElement>(puma(this._divBodyLocked).find(\".vr-checkbox-column\") as any);\r\n\r\n        for (let checkbox of checkboxList)\r\n        {\r\n            puma(checkbox).removeAttr(\"checked\");\r\n            checkbox.checked = false;\r\n        }\r\n\r\n        headerCheckbox.removeClass(\"indeterminateVrCheckbox\");\r\n\r\n        //#region Group by\r\n        if (options.groupable! && options.groupBy != null && options.checkboxes != GridCheckboxModeEnum.None)\r\n        {\r\n            let groupByRows = puma(this._divBody).find(\".grid_trGroupBy\");\r\n            if (this.thereAreLockedColumns())\r\n                groupByRows = puma(this._divBodyLocked).find(\".grid_trGroupBy\");\r\n\r\n            for (let groupByRow of Array.from(groupByRows))\r\n            {\r\n                let checkBox = puma(groupByRow).find(\"input\");\r\n                (checkBox[0] as HTMLInputElement).checked = false;\r\n                puma(checkBox).removeAttr(\"checked\");\r\n                checkBox.removeClass(\"indeterminateVrCheckbox\");\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        this._checkedItemsForFiltering = [];\r\n\r\n        //#region Event\r\n        if (triggerChange && options.onUnselectAllRows != null)\r\n        {\r\n            let unselectAllRowsEvent = new GridUnselectAllRowsEvent();\r\n            unselectAllRowsEvent.sender = this;\r\n            options.onUnselectAllRows(unselectAllRowsEvent);\r\n        }\r\n        //#endregion\r\n    }\r\n\r\n    selectRowsByIndexes(indexes: number[], triggerChange = true)\r\n    {\r\n        for (let index of indexes)\r\n            this.selectRowByIndex(index, triggerChange);\r\n    }\r\n\r\n    selectRowByIndex(index: number, triggerChange = true)\r\n    {\r\n        let tr = puma(this._divBody).find(\"tr[row='\" + index + \"']\");\r\n        let dataItemId = tr.attr(\"dataItemId\");\r\n        this.selectRowInternal(dataItemId, false, false, triggerChange);\r\n    }\r\n\r\n    selectRows(itemIdList: string[], property?: string, triggerChange = true)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.checkboxes == GridCheckboxModeEnum.SingleCheck)\r\n            itemIdList = [itemIdList.vrLast()];\r\n\r\n        //#region Other property instead of 'id'\r\n        if (property != null)\r\n        {\r\n            let options = this.getOptions();\r\n            let filteredDataSourceList: any[] = [];\r\n            itemIdList = itemIdList.vrDistinct();\r\n            for (let itemId of itemIdList)\r\n                filteredDataSourceList.vrPushRange(this.dataSource().filter(k => k[property] == itemId));\r\n\r\n            itemIdList = filteredDataSourceList.map(k => k[options.dataSourceFieldId!]);\r\n        }\r\n        //#endregion\r\n\r\n        for (let itemId of itemIdList)\r\n            this.selectRow(itemId, triggerChange);\r\n    }\r\n\r\n    selectRow(itemId: string, triggerChange = true)\r\n    {\r\n        this.selectRowInternal(itemId, false, false, true, triggerChange);\r\n    }\r\n\r\n    private selectRangeShiftKey(target: HTMLElement)\r\n    {\r\n        let rowIndex = Number(puma(target).closest(\"tr\").attr(\"row\"));\r\n        let checkboxList: HTMLInputElement[] = Array.from<HTMLInputElement>(puma(this._divBody).find(\".vr-checkbox-column:checked\") as any);\r\n        if (this.thereAreLockedColumns())\r\n            checkboxList = Array.from<HTMLInputElement>(puma(this._divBodyLocked).find(\".vr-checkbox-column:checked\") as any);\r\n\r\n        let trSelectedList: HTMLElement[] = [];\r\n        for (let checkbox of checkboxList)\r\n            trSelectedList.push(puma(checkbox).closest(\"tr\")[0]);\r\n\r\n        let minDifferenceTr: number | null = null;\r\n        let finalRowIndex = 0;\r\n        for (let trSelected of trSelectedList)\r\n        {\r\n            let rowIndexSelected = Number(puma(trSelected).attr(\"row\"));\r\n            let diff = Math.abs(rowIndex - rowIndexSelected);\r\n            if (minDifferenceTr == null || (diff < minDifferenceTr && diff > 0))\r\n            {\r\n                minDifferenceTr = diff;\r\n                finalRowIndex = Number(puma(trSelected).attr(\"row\"));\r\n            }\r\n        }\r\n\r\n        let start = (finalRowIndex < rowIndex) ? finalRowIndex : rowIndex;\r\n        let end = (finalRowIndex < rowIndex) ? rowIndex : finalRowIndex;\r\n        for (let i = start + 1; i <= end; i++)\r\n        {\r\n            let tr = puma(this._divBody).find(\"tr[row='\" + i + \"']\");\r\n            let dataItemId = tr.attr(\"dataItemId\");\r\n            this.selectRowInternal(dataItemId, true, true, false, true, true);\r\n        }\r\n    }\r\n\r\n    private selectRowInternal(itemId: string, fromCheckboxInput = false, fromGroupOrRow = false, fromMethodCall = false, triggerChange = true, shiftKey = false, checkbox = false)\r\n    {\r\n        let options = this.getOptions();\r\n        let checkboxList: HTMLInputElement[] = Array.from<HTMLInputElement>(puma(this._divBody).find(\".vr-checkbox-column\") as any);\r\n        let checkboxGroupList: HTMLInputElement[] = Array.from<HTMLInputElement>(puma(this._divBody).find(\".grid_divGroupByName input\") as any);\r\n\r\n        if (this.thereAreLockedColumns())\r\n        {\r\n            checkboxList = Array.from<HTMLInputElement>(puma(this._divBodyLocked).find(\".vr-checkbox-column\") as any);\r\n            checkboxGroupList = Array.from<HTMLInputElement>(puma(this._divBodyLocked).find(\".grid_divGroupByName input\") as any);\r\n        }\r\n\r\n        //#region Select checkbox\r\n        let dataItem = null;\r\n        let checkboxToSelect = checkboxList.filter(k => puma(k as any).attr(\"dataItemId\") == itemId)[0];\r\n        if (checkboxToSelect != null)\r\n        {\r\n            if (checkboxToSelect.checked)\r\n            {\r\n                let checkedCheckboxList = checkboxList.filter(k => k.checked);\r\n                if (options.checkboxes == GridCheckboxModeEnum.SingleCheck || (options.checkboxes == GridCheckboxModeEnum.MultiCheck && !fromCheckboxInput && checkedCheckboxList.length > 1))\r\n                {\r\n                    if (!fromMethodCall)\r\n                    {\r\n                        for (let checkbox of checkboxList)\r\n                        {\r\n                            puma(checkbox).removeAttr(\"checked\");\r\n                            checkbox.checked = false;\r\n                        }\r\n\r\n                        for (let checkbox of checkboxGroupList)\r\n                        {\r\n                            puma(checkbox).removeAttr(\"checked\");\r\n                            checkbox.checked = false;\r\n                            puma(checkbox).removeClass(\"indeterminateVrCheckbox\");\r\n                        }\r\n\r\n                        if (this._checkedItemsForFiltering != null)\r\n                            this._checkedItemsForFiltering.vrDeleteAllBy(k => k[options.dataSourceFieldId!] == itemId);\r\n                    }\r\n\r\n                    puma(checkboxToSelect).attr(\"checked\", \"checked\");\r\n                    checkboxToSelect.checked = true;\r\n                }\r\n                else if (fromGroupOrRow)\r\n                    this.unselectRow(itemId, triggerChange);\r\n            }\r\n            else\r\n            {\r\n                if ((options.checkboxes == GridCheckboxModeEnum.SingleCheck || !fromCheckboxInput) && !fromMethodCall)\r\n                {\r\n                    for (let checkbox of checkboxList)\r\n                    {\r\n                        puma(checkbox).removeAttr(\"checked\");\r\n                        checkbox.checked = false;\r\n\r\n                        if (this._checkedItemsForFiltering != null)\r\n                            this._checkedItemsForFiltering.vrDeleteAllBy(k => k[options.dataSourceFieldId!] == itemId);\r\n                    }\r\n\r\n                    for (let checkbox of checkboxGroupList)\r\n                    {\r\n                        puma(checkbox).removeAttr(\"checked\");\r\n                        checkbox.checked = false;\r\n                        puma(checkbox).removeClass(\"indeterminateVrCheckbox\");\r\n                    }\r\n                }\r\n\r\n                if (!fromGroupOrRow && !fromMethodCall)\r\n                {\r\n                    puma(checkboxToSelect).removeAttr(\"checked\");\r\n                    checkboxToSelect.checked = false;\r\n\r\n                    if (this._checkedItemsForFiltering != null)\r\n                        this._checkedItemsForFiltering.vrDeleteAllBy(k => k[options.dataSourceFieldId!] == itemId);\r\n                }\r\n                else\r\n                {\r\n                    puma(checkboxToSelect).attr(\"checked\", \"checked\");\r\n                    checkboxToSelect.checked = true;\r\n                }\r\n            }\r\n\r\n            dataItem = this.dataSource().filter(k => k[options.dataSourceFieldId!] == itemId)[0];\r\n        }\r\n        //#endregion\r\n\r\n        let headerCheckbox = puma(\"#\" + puma(this.element()).attr(\"id\") + \"header_CheckboxColumn\");\r\n        headerCheckbox.addClass(\"indeterminateVrCheckbox\");\r\n\r\n        //#region All rows checked\r\n        let checkedItems = this.getCheckedItems();\r\n        if (this._checkedItemsForFiltering != null)\r\n        {\r\n            for (let checkedItem of checkedItems)\r\n            {\r\n                if (this._checkedItemsForFiltering.length == 0 || !this._checkedItemsForFiltering.map(k => k[options.dataSourceFieldId!]).includes(checkedItem[options.dataSourceFieldId!]))\r\n                    this._checkedItemsForFiltering.push(checkedItem);\r\n            }\r\n        }\r\n\r\n        if (checkedItems.length == checkboxList.length)\r\n        {\r\n            headerCheckbox.removeClass(\"indeterminateVrCheckbox\");\r\n            headerCheckbox.attr(\"checked\", \"checked\");\r\n\r\n            if (headerCheckbox[0] != null)\r\n                headerCheckbox[0].checked = true;\r\n        }\r\n        else if (checkedItems.length == 0)\r\n            headerCheckbox.removeClass(\"indeterminateVrCheckbox\");\r\n        //#endregion\r\n\r\n        //#region Group\r\n        this.manageGroupCheckParent(checkboxToSelect);\r\n        //#endregion\r\n\r\n        //#region Event\r\n        if (options.onSelectRow != null && dataItem != null && triggerChange)\r\n        {\r\n            let rowElement = puma(checkboxToSelect).closest(\"tr\")[0] as HTMLTableRowElement;\r\n\r\n            let dataSourceIdList = this.dataSource().map(k => k[options!.dataSourceFieldId!]);\r\n            let index = dataSourceIdList.indexOf(dataItem[options!.dataSourceFieldId!]);\r\n            if (index == -1 || options!.dataSourceFieldId == null)\r\n                index = puma(rowElement).index();\r\n\r\n            let selectRowEvent = new GridSelectRowEvent();\r\n            selectRowEvent.sender = this;\r\n            selectRowEvent.rowElement = rowElement;\r\n            selectRowEvent.dataItem = dataItem;\r\n            selectRowEvent.checked = (checkboxToSelect != null) ? checkboxToSelect.checked : false;\r\n            selectRowEvent.empty = (dataItem != null && dataItem[options.dataSourceFieldId!] == null);\r\n            selectRowEvent.index = index;\r\n            selectRowEvent.shiftKey = shiftKey;\r\n            selectRowEvent.fromCheckbox = checkbox;\r\n            options.onSelectRow(selectRowEvent);\r\n        }\r\n        //#endregion\r\n    }\r\n\r\n    private manageGroupCheckParent(checkbox: HTMLElement)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.groupable! && options.groupBy != null && (options.groupBy as GridGroupBySettings).fields != null && (options.groupBy as GridGroupBySettings).fields.length > 0 && options.checkboxes != GridCheckboxModeEnum.None && checkbox != null)\r\n        {\r\n            //#region Parent group row\r\n            let parentGroupRow = checkbox.parentElement!.parentElement!;\r\n            let i = puma(parentGroupRow).index();\r\n            while (!puma(parentGroupRow).hasClass(\"grid_trGroupBy\"))\r\n            {\r\n                parentGroupRow = puma(this._divBody).find(\"tr:nth-child(\" + i + \")\")[0];\r\n                if (this.thereAreLockedColumns())\r\n                    parentGroupRow = puma(this._divBodyLocked).find(\"tr:nth-child(\" + i + \")\")[0];\r\n\r\n                i--;\r\n            }\r\n            //#endregion\r\n\r\n            //#region Checkbox management\r\n            while ((Number(puma(parentGroupRow).attr(\"level\")) == 0 && puma(parentGroupRow).hasClass(\"grid_trGroupBy\")) || (Number(puma(parentGroupRow).attr(\"level\")) > 0 || !puma(parentGroupRow).hasClass(\"grid_trGroupBy\")))\r\n            {\r\n                if (!puma(parentGroupRow).hasClass(\"grid_trGroupBy\"))\r\n                {\r\n                    parentGroupRow = puma(this._divBody).find(\"tr:nth-child(\" + i + \")\")[0];\r\n                    if (this.thereAreLockedColumns())\r\n                        parentGroupRow = puma(this._divBodyLocked).find(\"tr:nth-child(\" + i + \")\")[0];\r\n\r\n                    i--;\r\n                    continue;\r\n                }\r\n\r\n                let checkBoxParentGroup = puma(parentGroupRow).find(\"input\");\r\n\r\n                //#region Check or not \r\n                let childrenRows = this.getChildrenGroupRows(parentGroupRow, this._divBody);\r\n                if (this.thereAreLockedColumns())\r\n                    childrenRows = this.getChildrenGroupRows(parentGroupRow, this._divBodyLocked);\r\n\r\n                let numberOfCheckedChildren = this.getCheckedChildrenGroupRows(parentGroupRow, this._divBody).length;\r\n                if (this.thereAreLockedColumns())\r\n                    numberOfCheckedChildren = this.getCheckedChildrenGroupRows(parentGroupRow, this._divBodyLocked).length;\r\n\r\n                (checkBoxParentGroup[0] as HTMLInputElement).checked = false;\r\n                checkBoxParentGroup.removeClass(\"indeterminateVrCheckbox\");\r\n\r\n                if (numberOfCheckedChildren == childrenRows.children.length)\r\n                    (checkBoxParentGroup[0] as HTMLInputElement).checked = true;\r\n                else if (numberOfCheckedChildren == 0)\r\n                    (checkBoxParentGroup[0] as HTMLInputElement).checked = false;\r\n                else\r\n                    checkBoxParentGroup.addClass(\"indeterminateVrCheckbox\");\r\n                //#endregion\r\n\r\n                if (Number(puma(parentGroupRow).attr(\"level\")) == 0)\r\n                    break;\r\n\r\n                parentGroupRow = puma(this._divBody).find(\"tr:nth-child(\" + i + \")\")[0];\r\n                if (this.thereAreLockedColumns())\r\n                    parentGroupRow = puma(this._divBodyLocked).find(\"tr:nth-child(\" + i + \")\")[0];\r\n\r\n                i--;\r\n            }\r\n        }\r\n    }\r\n\r\n    unselectRows(itemIdList: string[], property?: string, triggerChange = true)\r\n    {\r\n        //#region Other property instead of 'id'\r\n        if (property != null)\r\n        {\r\n            let options = this.getOptions();\r\n            let filteredDataSourceList: any[] = [];\r\n            itemIdList = itemIdList.vrDistinct();\r\n            for (let itemId of itemIdList)\r\n                filteredDataSourceList.vrPushRange(this.dataSource().filter(k => k[property] == itemId));\r\n\r\n            itemIdList = filteredDataSourceList.map(k => k[options.dataSourceFieldId!]);\r\n        }\r\n        //#endregion\r\n\r\n        for (let itemId of itemIdList)\r\n            this.unselectRow(itemId, triggerChange);\r\n    }\r\n\r\n    unselectRow(itemId: string, triggerChange = true)\r\n    {\r\n        let options = this.getOptions();\r\n        let checkboxList: HTMLInputElement[] = Array.from<HTMLInputElement>(puma(this._divBody).find(\".vr-checkbox-column\") as any);\r\n        if (this.thereAreLockedColumns())\r\n            checkboxList = Array.from<HTMLInputElement>(puma(this._divBodyLocked).find(\".vr-checkbox-column\") as any);\r\n\r\n        let headerCheckbox = puma(\"#\" + puma(this.element()).attr(\"id\") + \"header_CheckboxColumn\");\r\n        headerCheckbox.removeAttr(\"checked\");\r\n        if (headerCheckbox[0] != null)\r\n            headerCheckbox[0].checked = false;\r\n\r\n        let checkedItems = this.getCheckedItems();\r\n        if (this._checkedItemsForFiltering != null)\r\n        {\r\n            for (let checkedItem of checkedItems)\r\n                this._checkedItemsForFiltering.vrDeleteItem(checkedItem, options.dataSourceFieldId!);\r\n        }\r\n\r\n        if (checkedItems.length == 0)\r\n            headerCheckbox.removeClass(\"indeterminateVrCheckbox\");\r\n        else\r\n            headerCheckbox.addClass(\"indeterminateVrCheckbox\");\r\n\r\n        let dataItem = null;\r\n        let checkboxToSelect = checkboxList.filter(k => puma(k as any).attr(\"dataItemId\") == itemId)[0];\r\n        if (checkboxToSelect != null)\r\n        {\r\n            if (checkboxToSelect.checked)\r\n            {\r\n                puma(checkboxToSelect).removeAttr(\"checked\");\r\n                checkboxToSelect.checked = false;\r\n            }\r\n            dataItem = this.dataSource().filter(k => k[options.dataSourceFieldId!] == itemId)[0];\r\n        }\r\n\r\n        //#region Event\r\n        if (options.onUnselectRow != null && triggerChange)\r\n        {\r\n            let unselectRowEvent = new GridUnselectRowEvent();\r\n            unselectRowEvent.sender = this;\r\n            unselectRowEvent.rowElement = checkboxToSelect.closest(\"tr\") as HTMLTableRowElement;\r\n            unselectRowEvent.dataItem = dataItem;\r\n            options.onUnselectRow(unselectRowEvent);\r\n        }\r\n        //#endregion\r\n    }\r\n    //#endregion\r\n\r\n    //#region Sorting\r\n    private applySorting(rebind = true)\r\n    {\r\n        if (this._actualSortingInfo != null)\r\n            this.sort(this._actualSortingInfo.field, this._actualSortingInfo.mode, rebind);\r\n    }\r\n\r\n    removeSort(updateDataSource = true)\r\n    {\r\n        if (this._actualSortingInfo != null)\r\n        {\r\n            let options = this.getOptions();\r\n            let field = this._actualSortingInfo.field;\r\n            let thJq = puma(this._divHeader).find(\"th[value='\" + field + \"']\");\r\n            if (options.lockable && thJq[0] == null)\r\n                thJq = puma(this._divHeaderLocked).find(\"th[value='\" + field + \"']\");\r\n\r\n            if (thJq[0] != null)\r\n            {\r\n                thJq[0].style.cssText += \"background-color: #e3f1fa !important; color: #000 !important;\";\r\n\r\n                if (thJq.find(\".grid_headerThContent\")[0] != null)\r\n                    thJq.find(\".grid_headerThContent\")[0].style.cssText += \"color: #000 !important;\";\r\n            }\r\n\r\n            thJq.find(\"i\").removeClass(IconClassLight.CaretUp);\r\n            thJq.find(\"i\").removeClass(IconClassLight.CaretDown);\r\n            thJq.removeAttr(\"sortMode\");\r\n            this._actualSortingInfo = null;\r\n\r\n            if (updateDataSource)\r\n            {\r\n                if (options.serverBinding !== false)\r\n                    this.rebind();\r\n                else\r\n                    this.update();\r\n            }\r\n        }\r\n    }\r\n\r\n    sort(field: string, gridSortModeEnum?: GridSortDirectionEnum, rebind = true)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.sortable === false)\r\n            return;\r\n\r\n        if (this._actualSortingInfo != null && this._actualSortingInfo.field !== field)\r\n            this.removeSort(false);\r\n\r\n        let thJq = puma(this._divHeader).find(\"th[value='\" + field + \"']\");\r\n        if (options.lockable && thJq[0] == null)\r\n            thJq = puma(this._divHeaderLocked).find(\"th[value='\" + field + \"']\");\r\n\r\n        if (thJq[0] != null)\r\n        {\r\n            thJq[0].style.cssText += \"background-color: coral !important; color: #FFF !important;\";\r\n\r\n            if (thJq.find(\".grid_headerThContent\")[0] != null)\r\n                thJq.find(\".grid_headerThContent\")[0].style.cssText += \"color: #FFF !important;\";\r\n        }\r\n\r\n        //#region Sort mode\r\n        if (gridSortModeEnum == null) gridSortModeEnum = GridSortDirectionEnum.Asc;\r\n        this._actualSortingInfo = { field: field, mode: gridSortModeEnum };\r\n        if (gridSortModeEnum == GridSortDirectionEnum.Asc)\r\n        {\r\n            thJq.find(\"i\").removeClass(IconClassLight.CaretDown);\r\n            thJq.find(\"i\").removeClass(IconClassLight.CaretUp);\r\n\r\n            thJq.find(\"i\").addClass(IconClassLight.CaretUp);\r\n            thJq.attr(\"sortMode\", GridSortDirectionEnum.Asc);\r\n        }\r\n        else\r\n        {\r\n            thJq.find(\"i\").removeClass(IconClassLight.CaretDown);\r\n            thJq.find(\"i\").removeClass(IconClassLight.CaretUp);\r\n\r\n            thJq.find(\"i\").addClass(IconClassLight.CaretDown);\r\n            thJq.attr(\"sortMode\", GridSortDirectionEnum.Desc);\r\n        }\r\n        //#endregion\r\n\r\n        //#region Server binding\r\n        if (options.serverBinding !== false && rebind)\r\n        {\r\n            this.rebind();\r\n            return;\r\n        }\r\n        //#endregion\r\n\r\n        if (this.dataSource().length > 2500)\r\n            showLoader();\r\n\r\n        window.setTimeout(() =>\r\n        {\r\n            this._cellButtons = new Map<string, GridControlData>();\r\n            this._cellIcons = new Map<string, GridControlData>();\r\n            this._cellCustoms = new Map<string, GridControlData>();\r\n            this._cellLabels = new Map<string, GridControlData>();\r\n            this._cellImages = new Map<string, GridControlData>();\r\n\r\n            let items: any[] = this.dataSource().map(k => k);\r\n            if (options.groupBy != null)\r\n            {\r\n                (options.groupBy as GridGroupBySettings).internalSortBy = { field: field, direction: gridSortModeEnum };\r\n                this.sortingGroupFields(items);\r\n            }\r\n            else\r\n                items.vrSortBy([field], (gridSortModeEnum == GridSortDirectionEnum.Asc));\r\n\r\n            if (rebind)\r\n            {\r\n                this.drawTable(items);\r\n                this.manageControls();\r\n            }\r\n            hideLoader();\r\n        });\r\n    }\r\n\r\n    private sortingGroupFields(dataItems: any[])\r\n    {\r\n        let options = this.getOptions();\r\n        let sortingFields: string[] = [];\r\n\r\n        //#region External group sort\r\n        let sortByField = (options.groupBy as GridGroupBySettings).sortBy != null ? ((options.groupBy as GridGroupBySettings).sortBy! as GridSortSettings).field : null;\r\n        if (sortByField != null)\r\n        {\r\n            if (((options.groupBy as GridGroupBySettings).sortBy! as GridSortSettings).direction == GridSortDirectionEnum.Desc)\r\n                sortingFields.push(\"-\" + sortByField);\r\n            else\r\n                sortingFields.push(sortByField);\r\n        }\r\n        else\r\n        {\r\n            if ((options.groupBy as GridGroupBySettings).fields != null)\r\n            {\r\n                for (let groupByField of ((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]))\r\n                {\r\n                    if (groupByField == null)\r\n                        continue;\r\n\r\n                    if (!sortingFields.includes((groupByField as GridGroupByItem).field))\r\n                        sortingFields.push((groupByField as GridGroupByItem).field);\r\n                }\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#region Internal group sort\r\n        if ((options.groupBy as GridGroupBySettings).internalSortBy != null)\r\n        {\r\n            let internalSortByField = ((options.groupBy as GridGroupBySettings).internalSortBy as GridSortSettings).field;\r\n            if (internalSortByField != null)\r\n            {\r\n                if (((options.groupBy as GridGroupBySettings).internalSortBy! as GridSortSettings).direction == GridSortDirectionEnum.Desc)\r\n                    sortingFields.push(\"-\" + internalSortByField);\r\n                else\r\n                    sortingFields.push(internalSortByField);\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        dataItems.vrSortBy(sortingFields);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Column\r\n    column(field: string)\r\n    {\r\n        let options = this.getOptions();\r\n        let column = options.columns!.filter(k => k.field == field)[0];\r\n        let columnIndex = options.columns!.indexOf(column);\r\n        return options.columns![columnIndex];\r\n    }\r\n\r\n    columnTitle(field: string, title?: string)\r\n    {\r\n        let column = this.column(field);\r\n        if (column != null)\r\n        {\r\n            if (title != null)\r\n            {\r\n                column.title = title;\r\n                puma(this._divHeader).find(\"th[value='\" + field + \"']\").find(\"span.grid_headerThContent\").html(title);\r\n\r\n                let options = this.getOptions();\r\n                if (options.lockable)\r\n                    puma(this._divHeaderLocked).find(\"th[value='\" + field + \"']\").find(\"span.grid_headerThContent\").html(title);\r\n            }\r\n            return column.title;\r\n        }\r\n        else\r\n            return \"\";\r\n    }\r\n\r\n    hideColumns(fields: string[], update = true)\r\n    {\r\n        for (let field of fields)\r\n            this.hideColumn(field, false);\r\n\r\n        if (update)\r\n            this.update();\r\n    }\r\n\r\n    hideColumn(field: string, updateDataSource = true)\r\n    {\r\n        puma(this._divHeader).find(\"th[value='\" + field + \"']\").hide();\r\n        puma(this._divFilters).find(\"td[value='\" + field + \"']\").hide();\r\n        puma(this._divBody).find(\"td[value='\" + field + \"']\").hide();\r\n        puma(this._divTotals).find(\"td[value='\" + field + \"']\").hide();\r\n\r\n        let options = this.getOptions();\r\n        if (options.lockable)\r\n        {\r\n            puma(this._divHeaderLocked).find(\"th[value='\" + field + \"']\").hide();\r\n            puma(this._divFiltersLocked).find(\"td[value='\" + field + \"']\").hide();\r\n            puma(this._divBodyLocked).find(\"td[value='\" + field + \"']\").hide();\r\n            puma(this._divTotalsLocked).find(\"td[value='\" + field + \"']\").hide();\r\n        }\r\n\r\n        let column = this.column(field);\r\n        if (column != null)\r\n        {\r\n            column.hidden = true;\r\n            this.removeFilter(field);\r\n        }\r\n\r\n        if (updateDataSource)\r\n            this.update();\r\n    }\r\n\r\n    hideCheckboxColumn(updateDataSource = false)\r\n    {\r\n        this.hideColumn(\"vrGridCheckboxColumn\", updateDataSource);\r\n    }\r\n\r\n    showColumns(fields: string[], update = true)\r\n    {\r\n        for (let field of fields)\r\n            this.showColumn(field, false);\r\n\r\n        if (update)\r\n            this.update();\r\n    }\r\n\r\n    showColumn(field: string, updateDataSource = true)\r\n    {\r\n        puma(this._divHeader).find(\"th[value='\" + field + \"']\").show();\r\n        puma(this._divFilters).find(\"td[value='\" + field + \"']\").show();\r\n        puma(this._divBody).find(\"td[value='\" + field + \"']\").show();\r\n        puma(this._divTotals).find(\"td[value='\" + field + \"']\").show();\r\n\r\n        let options = this.getOptions();\r\n        if (options.lockable)\r\n        {\r\n            puma(this._divHeaderLocked).find(\"th[value='\" + field + \"']\").show();\r\n            puma(this._divFiltersLocked).find(\"td[value='\" + field + \"']\").show();\r\n            puma(this._divBodyLocked).find(\"td[value='\" + field + \"']\").show();\r\n            puma(this._divTotalsLocked).find(\"td[value='\" + field + \"']\").show();\r\n        }\r\n\r\n        let column = this.column(field);\r\n        if (column != null)\r\n            column.hidden = false;\r\n\r\n        if (updateDataSource)\r\n            this.update();\r\n    }\r\n\r\n    showCheckboxColumn(updateDataSource = false)\r\n    {\r\n        this.showColumn(\"vrGridCheckboxColumn\", updateDataSource);\r\n    }\r\n\r\n    showOnlyThisColumns(fieldList: string[], updateDataSource = true)\r\n    {\r\n        let options = this.getOptions();\r\n        for (let column of options.columns!)\r\n            this.hideColumn(column.field, false);\r\n\r\n        for (let field of fieldList)\r\n            this.showColumn(field, false);\r\n\r\n        if (updateDataSource)\r\n            this.update();\r\n    }\r\n\r\n    columnVisible(value: string, state: boolean, updateDataSource = true)\r\n    {\r\n        if (state) this.showColumn(value, updateDataSource);\r\n        else this.hideColumn(value, updateDataSource);\r\n    }\r\n\r\n    columnCheckboxVisible(state: boolean, updateDataSource = false)\r\n    {\r\n        if (state) this.showCheckboxColumn(updateDataSource);\r\n        else this.hideCheckboxColumn(updateDataSource);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Lock/Unlock\r\n    lockColumns(fields: string[], update = true)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.lockable)\r\n        {\r\n            for (let field of fields)\r\n                this.lockColumn(field, false);\r\n\r\n            if (update)\r\n                this.update();\r\n        }\r\n    }\r\n\r\n    lockColumn(field: string, update = true)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.lockable)\r\n        {\r\n            if (this._divHeaderLocked != null) this._divHeaderLocked.style.cssText += \"display: inline-block;\";\r\n            if (this._divFiltersLocked != null) this._divFiltersLocked.style.cssText += \"display: inline-block;\";\r\n            if (this._divBodyLocked != null) this._divBodyLocked.style.cssText += \"display: inline-block;\";\r\n            if (this._divTotalsLocked != null) this._divTotalsLocked.style.cssText += \"display: inline-block;\";\r\n\r\n            if (!this.thereAreLockedColumns())\r\n            {\r\n                //#region Edit Button\r\n                let columnEditButton = this.column(\"editButton\");\r\n                if (columnEditButton != null)\r\n                {\r\n                    columnEditButton.locked = true;\r\n                    this.showColumn(\"editButton\", false);\r\n\r\n                    //#region Move column to correct index\r\n                    let columnToMoveIndex = options.columns!.indexOf(columnEditButton);\r\n                    let columnToMove = options.columns!.splice(columnToMoveIndex, 1)[0];\r\n                    options.columns!.splice(0, 0, columnToMove);\r\n                    //#endregion\r\n\r\n                    puma(this._divHeader).find(\"th[value='\" + \"editButton\" + \"']\").attr(\"locked\", \"locked\");\r\n                    puma(this._divHeader).find(\"th[value='\" + \"editButton\" + \"']\").vrAppendToPuma(puma(this._divHeaderLocked).find(\"tr\"));\r\n                    puma(this._divFilters).find(\"td[value='\" + \"editButton\" + \"']\").vrAppendToPuma(puma(this._divFiltersLocked).find(\"tr\"));\r\n                    puma(this._divTotals).find(\"td[value='\" + \"editButton\" + \"']\").vrAppendToPuma(puma(this._divTotalsLocked).find(\"tr\"));\r\n                }\r\n                //#endregion\r\n\r\n                //#region Checkboxes\r\n                if (options.checkboxes !== false)\r\n                {\r\n                    let firstColumnField = options.columns![0].field;\r\n                    puma(this._divHeader).find(\"th[value='\" + \"vrGridCheckboxColumn\" + \"']\").vrInsertBeforePuma(puma(this._divHeaderLocked).find(\"tr th[value='\" + firstColumnField + \"']\"));\r\n                    puma(this._divFilters).find(\"td[value='\" + \"vrGridCheckboxColumn\" + \"']\").vrInsertBeforePuma(puma(this._divFiltersLocked).find(\"tr td[value='\" + firstColumnField + \"']\"));\r\n                    puma(this._divTotals).find(\"td[value='\" + \"vrGridCheckboxColumn\" + \"']\").vrInsertBeforePuma(puma(this._divTotalsLocked).find(\"tr td[value='\" + firstColumnField + \"']\"));\r\n                }\r\n                //#endregion\r\n            }\r\n\r\n            puma(this._divHeader).find(\"th[value='\" + field + \"']\").vrAppendToPuma(puma(this._divHeaderLocked).find(\"tr\"));\r\n            puma(this._divHeaderLocked).find(\"th[value='\" + field + \"']\").attr(\"locked\", \"locked\");\r\n            puma(this._divFilters).find(\"td[value='\" + field + \"']\").vrAppendToPuma(puma(this._divFiltersLocked).find(\"tr\"));\r\n            puma(this._divTotals).find(\"td[value='\" + field + \"']\").vrAppendToPuma(puma(this._divTotalsLocked).find(\"tr\"));\r\n\r\n            let column = this.column(field);\r\n            if (column != null)\r\n            {\r\n                column.locked = true;\r\n                this.showColumn(field, false);\r\n\r\n                //#region Move column to correct index\r\n                let columnToMoveIndex = options.columns!.indexOf(column);\r\n                let columnToMove = options.columns!.splice(columnToMoveIndex, 1)[0];\r\n                let lastLockedColumn = options.columns!.filter(k => k.locked == true).vrLast();\r\n                let lastLockedColumnIndex = (lastLockedColumn == null) ? 0 : options.columns!.lastIndexOf(lastLockedColumn);\r\n                options.columns!.splice((lastLockedColumn == null) ? 0 : (lastLockedColumnIndex + 1), 0, columnToMove);\r\n                //#endregion    \r\n            }\r\n\r\n            if (update)\r\n                this.update();\r\n        }\r\n    }\r\n\r\n    unlockColumns(fields: string[], update = true)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.lockable)\r\n        {\r\n            for (let field of fields)\r\n                this.unlockColumn(field, false);\r\n\r\n            if (update)\r\n                this.update();\r\n        }\r\n    }\r\n\r\n    unlockColumn(field: string, update = true)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.lockable)\r\n        {\r\n            puma(this._divHeaderLocked).find(\"th[value='\" + field + \"']\").removeAttr(\"locked\");\r\n            puma(this._divHeaderLocked).find(\"th[value='\" + field + \"']\").vrAppendToPuma(puma(this._divHeader).find(\"tr\"));\r\n            puma(this._divFiltersLocked).find(\"td[value='\" + field + \"']\").vrAppendToPuma(puma(this._divFilters).find(\"tr\"));\r\n            puma(this._divTotalsLocked).find(\"td[value='\" + field + \"']\").vrAppendToPuma(puma(this._divTotals).find(\"tr\"));\r\n\r\n            let column = this.column(field);\r\n            if (column != null)\r\n            {\r\n                column.locked = false;\r\n\r\n                //#region Move column to correct index\r\n                let columnToMoveIndex = options.columns!.indexOf(column);\r\n                let columnToMove = options.columns!.splice(columnToMoveIndex, 1)[0];\r\n                options.columns!.splice(options.columns!.length, 0, columnToMove);\r\n                //#endregion\r\n            }\r\n\r\n            if (!this.thereAreLockedColumns())\r\n            {\r\n                if (this._divHeaderLocked != null) this._divHeaderLocked.style.cssText += \"display: none;\";\r\n                if (this._divFiltersLocked != null) this._divFiltersLocked.style.cssText += \"display: none;\";\r\n                if (this._divBodyLocked != null) this._divBodyLocked.style.cssText += \"display: none;\";\r\n                if (this._divTotalsLocked != null) this._divTotalsLocked.style.cssText += \"display: none;\";\r\n\r\n                //#region Edit Button\r\n                let columnEditButton = this.column(\"editButton\");\r\n                if (columnEditButton != null)\r\n                {\r\n                    columnEditButton.locked = false;\r\n\r\n                    //#region Move column to correct index\r\n                    let columnToMoveIndex = options.columns!.indexOf(columnEditButton);\r\n                    let columnToMove = options.columns!.splice(columnToMoveIndex, 1)[0];\r\n                    options.columns!.splice(0, 0, columnToMove);\r\n                    //#endregion\r\n\r\n                    let fieldAfterEditButton = options.columns![1].field;\r\n                    puma(this._divHeaderLocked).find(\"th[value='\" + \"editButton\" + \"']\").removeAttr(\"locked\");\r\n                    puma(this._divHeaderLocked).find(\"th[value='\" + \"editButton\" + \"']\").vrInsertBeforePuma(puma(this._divHeader).find(\"tr th[value='\" + fieldAfterEditButton + \"']\"));\r\n                    puma(this._divFiltersLocked).find(\"td[value='\" + \"editButton\" + \"']\").vrInsertBeforePuma(puma(this._divFilters).find(\"tr td[value='\" + fieldAfterEditButton + \"']\"));\r\n                    puma(this._divTotalsLocked).find(\"td[value='\" + \"editButton\" + \"']\").vrInsertBeforePuma(puma(this._divTotals).find(\"tr td[value='\" + fieldAfterEditButton + \"']\"));\r\n                }\r\n                //#endregion\r\n\r\n                //#region Checkboxes\r\n                if (options.checkboxes !== false)\r\n                {\r\n                    let firstColumnField = options.columns![0].field;\r\n                    puma(this._divHeaderLocked).find(\"th[value='\" + \"vrGridCheckboxColumn\" + \"']\").vrInsertBeforePuma(puma(this._divHeader).find(\"tr th[value='\" + firstColumnField + \"']\"));\r\n                    puma(this._divFiltersLocked).find(\"td[value='\" + \"vrGridCheckboxColumn\" + \"']\").vrInsertBeforePuma(puma(this._divFilters).find(\"tr td[value='\" + firstColumnField + \"']\"));\r\n                    puma(this._divTotalsLocked).find(\"td[value='\" + \"vrGridCheckboxColumn\" + \"']\").vrInsertBeforePuma(puma(this._divTotals).find(\"tr td[value='\" + firstColumnField + \"']\"));\r\n                }\r\n                //#endregion\r\n            }\r\n\r\n            if (update)\r\n                this.update();\r\n        }\r\n    }\r\n\r\n    lockedColumns()\r\n    {\r\n        let options = this.getOptions();\r\n        return options.columns!.filter(k => k.locked && k.field != \"editButton\");\r\n    }\r\n\r\n    thereAreLockedColumns()\r\n    {\r\n        let options = this.getOptions();\r\n        return options.lockable && options.columns!.filter(k => k.field != \"editButton\").vrAny(k => k.locked);\r\n    }\r\n    //#endregion\r\n\r\n    //#region GroupBy\r\n    removeGroup(field: string, updateDataSource = true)\r\n    {\r\n        this.removeGroups([field], updateDataSource);\r\n    }\r\n\r\n    removeGroups(fields: string[], updateDataSource = true)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.groupable! && options.groupBy != null)\r\n        {\r\n            for (let field of fields)\r\n            {\r\n                if (((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]).map(k => k.field).includes(field))\r\n                    ((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]).vrDeleteAllBy(k => (k as GridGroupByItem).field == field);\r\n\r\n                puma(\"#\" + this._elementId + \"_divContainer\").find(\".groupBy\" + field).hide();\r\n            }\r\n\r\n            if ((options.groupBy as GridGroupBySettings).fields == null || ((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]).length == 0)\r\n                options.groupBy = null;\r\n\r\n            if (updateDataSource)\r\n                this.update();\r\n        }\r\n    }\r\n\r\n    removeAllGroups(updateDataSource = true)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.groupable! && options.groupBy != null)\r\n            this.removeGroups(((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]).map(k => k.field), false);\r\n\r\n        options.groupBy = null;\r\n        if (updateDataSource)\r\n            this.update();\r\n    }\r\n\r\n    addGroup(field: string | GridGroupByItem, updateDataSource = true, sortBySettings?: GridSortSettings, internalSortBy?: GridSortSettings)\r\n    {\r\n        this.addGroups([field], updateDataSource, sortBySettings, internalSortBy);\r\n    }\r\n\r\n    addGroups(fields: (string | GridGroupByItem)[], updateDataSource = true, sortBy?: GridSortSettings, internalSortBy?: GridSortSettings)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.groupBy == null)\r\n            options.groupBy = new GridGroupBySettings();\r\n        else\r\n        {\r\n            if (options.groupBy != null && (options.groupBy as GridGroupBySettings).fields != null && (options.groupBy as GridGroupBySettings).fields.length > 0)\r\n            {\r\n                // If grid is grouped, then remove all groups and re-added all\r\n                let allFields: any[] = UtilityManager.duplicate((options.groupBy as GridGroupBySettings).fields);\r\n                for (let field of fields)\r\n                {\r\n                    let realField = \"\";\r\n                    if (typeof (field) == \"string\")\r\n                        realField = field;\r\n                    else\r\n                        realField = field.field;\r\n\r\n                    if (!allFields.map(k => k.field).includes(realField))\r\n                        allFields.push(field);\r\n                }\r\n\r\n                this.removeAllGroups(false);\r\n                this.addGroups(allFields, updateDataSource, sortBy, internalSortBy);\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (!options.groupable)\r\n            throw new Error(\"Griglia non raggruppabile! Mettere opzione .groupable: true\");\r\n\r\n        if (sortBy != null)\r\n            (options.groupBy as GridGroupBySettings).sortBy = sortBy;\r\n\r\n        if (internalSortBy != null)\r\n            (options.groupBy as GridGroupBySettings).internalSortBy = internalSortBy;\r\n\r\n        for (let field of fields)\r\n        {\r\n            let groupByItem = field;\r\n            if (typeof (field) == \"string\")\r\n            {\r\n                groupByItem = new GridGroupByItem();\r\n                groupByItem.field = field;\r\n            }\r\n\r\n            if ((options.groupBy as GridGroupBySettings).fields == null) (options.groupBy as GridGroupBySettings).fields = [];\r\n            if (!((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]).map(k => k.field).includes((groupByItem as GridGroupByItem).field))\r\n                ((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]).push(groupByItem as GridGroupByItem);\r\n\r\n            let groupByField = field;\r\n            if (typeof (field) != \"string\")\r\n                groupByField = field.field;\r\n\r\n            puma(\"#\" + this._elementId + \"_divContainer\").find(\".groupBy\" + groupByField).show();\r\n\r\n            let headerClasses = Array.from(puma(this._divHeader).find(\">table tr:first-child th\")).map(k => (k as any).classList[0]);\r\n            if (!headerClasses.includes(\"groupBy\" + (groupByItem as GridGroupByItem).field))\r\n                puma(this._divHeader).find(\">table tr:first-child\").vrPrependPuma(\"<th width=16 style='border: 1px solid rgb(221, 221, 221); background-color: #51B3E1;' class='groupBy\" + (groupByItem as GridGroupByItem).field + \"' value='\" + (groupByItem as GridGroupByItem).field + \"'></th>\");\r\n\r\n            let filterClasses = Array.from(puma(this._divFilters).find(\">table tr:first-child td\")).map(k => (k as any).classList[0]);\r\n            if (!filterClasses.includes(\"groupBy\" + (groupByItem as GridGroupByItem).field))\r\n                puma(this._divFilters).find(\">table tr:first-child\").vrPrependPuma(\"<td width=16 style='border: 1px solid rgb(221, 221, 221);' class='groupBy\" + (groupByItem as GridGroupByItem).field + \"'></td>\");\r\n\r\n            if (options.lockable)\r\n            {\r\n                let headerLockedClasses = Array.from(puma(this._divHeaderLocked).find(\">table tr:first-child th\")).map(k => (k as any).classList[0]);\r\n                if (!headerLockedClasses.includes(\"groupBy\" + (groupByItem as GridGroupByItem).field))\r\n                    puma(this._divHeaderLocked).find(\">table tr:first-child\").vrPrependPuma(\"<th width=16 style='border: 1px solid rgb(221, 221, 221); background-color: #51B3E1;' class='groupBy\" + (groupByItem as GridGroupByItem).field + \"' value='\" + (groupByItem as GridGroupByItem).field + \"'></th>\");\r\n\r\n                let filterLockedClasses = Array.from(puma(this._divFiltersLocked).find(\">table tr:first-child td\")).map(k => (k as any).classList[0]);\r\n                if (!filterLockedClasses.includes(\"groupBy\" + (groupByItem as GridGroupByItem).field))\r\n                    puma(this._divFiltersLocked).find(\">table tr:first-child\").vrPrependPuma(\"<td width=16 style='border: 1px solid rgb(221, 221, 221);' class='groupBy\" + (groupByItem as GridGroupByItem).field + \"'></td>\");\r\n            }\r\n\r\n            let columnFields = options.columns!.map(k => k.field);\r\n            if (!columnFields.includes((groupByItem as GridGroupByItem).field))\r\n                options.columns!.push({ field: (groupByItem as GridGroupByItem).field, hidden: true });\r\n        }\r\n\r\n        this.sortingGroupFields(this.dataSource());\r\n\r\n        if (updateDataSource)\r\n            this.update();\r\n    }\r\n\r\n    private getChildrenGroupRows(tr: HTMLElement, divBody: HTMLElement)\r\n    {\r\n        let childrenGroupRows: GridChildrenGroupRows = new GridChildrenGroupRows();\r\n        let childrenList: HTMLElement[] = [];\r\n\r\n        //#region Group level\r\n        let level = Number(puma(tr).attr(\"level\"));\r\n        let i = puma(tr).index() + 2;\r\n        let childrenRow = puma(divBody).find(\"tr:nth-child(\" + i + \")\");\r\n        let childrenLevel = Number(puma(divBody).find(\"tr:nth-child(\" + i + \")\").attr(\"level\"));\r\n        childrenList.push(childrenRow[0]);\r\n        //#endregion\r\n\r\n        //#region Get children\r\n        while ((level == 0 && childrenLevel != level) || (level != childrenLevel && !childrenRow.hasClass(\"grid_trGroupBy\")))\r\n        {\r\n            if (childrenRow.length == 0)\r\n                break;\r\n\r\n            if (!childrenList.map(k => puma(k).attr(\"id\")).includes(childrenRow.attr(\"id\")) || childrenRow.hasClass(\"grid_trGroupBy\"))\r\n                childrenList.push(childrenRow[0]);\r\n\r\n            i++;\r\n            childrenRow = puma(divBody).find(\"tr:nth-child(\" + i + \")\");\r\n            childrenLevel = Number(puma(divBody).find(\"tr:nth-child(\" + i + \")\").attr(\"level\"));\r\n        }\r\n        //#endregion\r\n\r\n        childrenList = childrenList.filter(k => !puma(k).hasClass(\"p-grid-totalsGroup\"));\r\n        childrenGroupRows.children = childrenList.filter(k => !puma(k).hasClass(\"grid_trGroupBy\"));\r\n        childrenGroupRows.groupRows = childrenList.filter(k => puma(k).hasClass(\"grid_trGroupBy\"));\r\n        childrenGroupRows.allRows = childrenList;\r\n        return childrenGroupRows;\r\n    }\r\n\r\n    private getCheckedChildrenGroupRows(tr: HTMLElement, divBody: HTMLElement)\r\n    {\r\n        let checkedChildren = [];\r\n        let childrenRows = this.getChildrenGroupRows(tr, divBody);\r\n        for (let childRow of childrenRows.children)\r\n        {\r\n            let checkBox = puma(childRow).find(\".vr-checkbox-column\")[0] as HTMLInputElement;\r\n            if (checkBox != null && checkBox.checked)\r\n                checkedChildren.push(childRow);\r\n        }\r\n        return checkedChildren;\r\n    }\r\n    //#endregion\r\n\r\n    //#region Table actions (Show/Hide & GroupBy)\r\n    private createWindowActions()\r\n    {\r\n        if (this._wndActions != null)\r\n            return;\r\n\r\n        this._wndActions = createWindow(\r\n            {\r\n                addToControlList: false,\r\n                width: 530,\r\n                height: 400,\r\n                closeable: false,\r\n                title: \"Mostra/Nascondi colonne\",\r\n                classContainer: this.element().id + \"_wndUtility\",\r\n                onClose: (e) =>\r\n                {\r\n                    puma(this._wndActions.container()).remove();\r\n                    (this._wndActions as any) = null;\r\n                },\r\n                footer:\r\n                    [\r\n                        {\r\n                            type: WindowFooterItemTypeEnum.Custom, text: \"Reimposta\", mode: ButtonModeEnum.Primary,\r\n                            value: \"restoreOriginal\", icon: IconClassLight.RotateLeft, align: WindowFooterItemAlignEnum.Left,\r\n                            onClick: (e) =>\r\n                            {\r\n                                let wndTableActionsContainer = puma(\"#\" + this._elementId + \"_divWindowTableActionsContainer\");\r\n                                for (let checkBoxElement of Array.from<HTMLInputElement>(wndTableActionsContainer.find(\"input\")))\r\n                                {\r\n                                    let checkBox = ControlManager.get<CheckBox>(checkBoxElement.id);\r\n                                    let field = puma(checkBoxElement).attr(\"field\");\r\n\r\n                                    let newValue = !this._originalHiddenColumnFields.includes(field);\r\n                                    if (checkBox.checked() != newValue)\r\n                                        checkBox.checked(newValue);\r\n                                }\r\n                            }\r\n                        },\r\n                        {\r\n                            type: WindowFooterItemTypeEnum.Custom, text: \"Seleziona tutti\", mode: ButtonModeEnum.Primary,\r\n                            value: \"checkAll\", icon: IconClassLight.Check, align: WindowFooterItemAlignEnum.Left,\r\n                            onClick: (e) =>\r\n                            {\r\n                                let wndTableActionsContainer = puma(\"#\" + this._elementId + \"_divWindowTableActionsContainer\");\r\n                                for (let checkBoxElement of Array.from<HTMLInputElement>(wndTableActionsContainer.find(\"input\")))\r\n                                {\r\n                                    let checkBox = ControlManager.get<CheckBox>(checkBoxElement.id);\r\n                                    if (!checkBox.checked())\r\n                                        checkBox.checked(true, true);\r\n                                }\r\n                            }\r\n                        },\r\n                        {\r\n                            type: WindowFooterItemTypeEnum.Custom, text: \"Deseleziona tutti\", icon: IconClassLight.Check,\r\n                            align: WindowFooterItemAlignEnum.Left,\r\n                            onClick: (e) =>\r\n                            {\r\n                                let wndTableActionsContainer = puma(\"#\" + this._elementId + \"_divWindowTableActionsContainer\");\r\n                                for (let checkBoxElement of Array.from<HTMLInputElement>(wndTableActionsContainer.find(\"input\")))\r\n                                {\r\n                                    let checkBox = ControlManager.get<CheckBox>(checkBoxElement.id);\r\n                                    if (checkBox.checked())\r\n                                        checkBox.checked(false, true);\r\n                                }\r\n                            }\r\n                        },\r\n                        { type: WindowFooterItemTypeEnum.Close, align: WindowFooterItemAlignEnum.Right },\r\n                        { type: WindowFooterItemTypeEnum.Ok, value: \"ok\", text: \"Applica\", align: WindowFooterItemAlignEnum.Right }\r\n                    ]\r\n            });\r\n        puma(this._wndActions.element()).vrAppendPuma(\"<div id='\" + this._elementId + \"_divWindowTableActionsContainer'  class='vrContainer'></div>\");\r\n    }\r\n\r\n    private openWindowActions(gridActionEnum: GridActionEnum)\r\n    {\r\n        this.createWindowActions();\r\n\r\n        let groupFieldAddedList: string[] = [];\r\n        let groupFieldRemovedList: string[] = [];\r\n        let columnFieldToShowList: string[] = [];\r\n        let columnFieldToHideList: string[] = [];\r\n        let columnFieldToLockList: string[] = [];\r\n        let columnFieldToUnlockList: string[] = [];\r\n        let editTableActions = false;\r\n\r\n        let options = this.getOptions();\r\n        this._wndActions.open([\r\n            {\r\n                value: \"ok\", callback: () =>\r\n                {\r\n                    if (!editTableActions)\r\n                        return;\r\n\r\n                    if (this.dataSource().length > 1000)\r\n                        showLoader();\r\n\r\n                    this._wndActions.close();\r\n                    window.setTimeout(() =>\r\n                    {\r\n                        if (gridActionEnum == GridActionEnum.GroupBy && (groupFieldRemovedList.length > 0 || groupFieldAddedList.length > 0))\r\n                        {\r\n                            //#region Manage groups\r\n                            this.removeGroups(groupFieldRemovedList, false);\r\n                            this.addGroups(groupFieldAddedList, false);\r\n                            this.update();\r\n                            //#endregion\r\n                        }\r\n                        else if (gridActionEnum == GridActionEnum.ShowHide && (columnFieldToShowList.length > 0 || columnFieldToHideList.length > 0))\r\n                        {\r\n                            //#region Show/Hide\r\n                            this.showColumns(columnFieldToShowList, false);\r\n                            this.hideColumns(columnFieldToHideList, false);\r\n                            this.removeFilters(columnFieldToHideList, false);\r\n\r\n                            if (columnFieldToHideList.length > 0)\r\n                                this.applyFilters(true);\r\n                            else\r\n                                this.update();\r\n                            //#endregion\r\n                        }\r\n                        else if (gridActionEnum == GridActionEnum.LockUnlock && (columnFieldToLockList.length > 0 || columnFieldToUnlockList.length > 0))\r\n                        {\r\n                            //#region Lock/Unlock\r\n                            if (columnFieldToLockList.length > 0 || (this.lockedColumns().length - columnFieldToUnlockList.length > 0))\r\n                            {\r\n                                this.lockColumns(columnFieldToLockList, false);\r\n                                this.unlockColumns(columnFieldToUnlockList, false);\r\n                                this.update();\r\n                            }\r\n                            else\r\n                            {\r\n                                confirm(\"Vuoi ripristinare il layout di base?\").then(() =>\r\n                                {\r\n                                    this.lockColumns(columnFieldToLockList, false);\r\n                                    this.unlockColumns(columnFieldToUnlockList, false);\r\n\r\n                                    this._actualLayout = null;\r\n                                    this.changeLayout(true, this._originalOptionsForLayout);\r\n                                },\r\n                                    () => \r\n                                    {\r\n                                        this.lockColumns(columnFieldToLockList, false);\r\n                                        this.unlockColumns(columnFieldToUnlockList, false);\r\n                                        this.update()\r\n                                    });\r\n                            }\r\n                            //#endregion\r\n                        }\r\n\r\n                        hideLoader();\r\n                    }, 100)\r\n                }\r\n            }]);\r\n        this.clearWindowActions();\r\n\r\n        let divContainer = puma(\"#\" + this._elementId + \"_divWindowTableActionsContainer\")[0];\r\n        divContainer.style.cssText += \"overflow-y: auto;\";\r\n\r\n        if (gridActionEnum == GridActionEnum.ShowHide)\r\n            this._wndActions.title(\"Mostra o nascondi colonne\");\r\n        else if (gridActionEnum == GridActionEnum.GroupBy)\r\n            this._wndActions.title(\"Raggruppa per colonne\");\r\n        else if (gridActionEnum == GridActionEnum.LockUnlock)\r\n            this._wndActions.title(\"Blocca o sblocca colonne\");\r\n\r\n        //#region Write columns\r\n        for (let column of options.columns!)\r\n        {\r\n            if (column.type == GridColumnTypeEnum.EditButton || column.title === \"\" || column.title == null)\r\n                continue;\r\n\r\n            let div = puma(\"<div id='\" + this._elementId + \"_divActionColumn\" + column.field + \"' field='\" + column.field + \"' class='grid_divActionColumn'></div>\").vrAppendToPuma(divContainer);\r\n\r\n            //#region CheckBox\r\n            let checked = false;\r\n            if (gridActionEnum == GridActionEnum.ShowHide)\r\n            {\r\n                checked = (column.hidden !== true);\r\n                this._wndActions.footerItem(\"restoreOriginal\")!.show();\r\n            }\r\n            else if (gridActionEnum == GridActionEnum.GroupBy)\r\n            {\r\n                checked = (options.groupable! && options.groupBy != null && (options.groupBy as GridGroupBySettings).fields != null) ? (((options.groupBy! as GridGroupBySettings).fields as GridGroupByItem[]).map(k => k.field).includes(column.field)) : false;\r\n                this._wndActions.footerItem(\"restoreOriginal\")!.hide();\r\n            }\r\n            else if (gridActionEnum == GridActionEnum.LockUnlock)\r\n            {\r\n                checked = (column.locked === true);\r\n                this._wndActions.footerItem(\"restoreOriginal\")!.hide();\r\n                this._wndActions.footerItem(\"checkAll\")!.hide();\r\n            }\r\n\r\n            let checkBoxElement = puma(\"<input id='\" + this._elementId + \"_chkActionColumn\" + column.field + \"' field='\" + column.field + \"' />\").vrAppendToPuma(div);\r\n            createCheckBox(\r\n                {\r\n                    checked: checked,\r\n                    text: column.title,\r\n                    cssContainer: \"width: 100%\",\r\n                    onCheck: (e) =>\r\n                    {\r\n                        editTableActions = true;\r\n                        let field = puma(e.sender.element()).attr(\"field\");\r\n\r\n                        if (gridActionEnum == GridActionEnum.ShowHide)\r\n                        {\r\n                            //#region Show/Hide\r\n                            if (e.checked && !columnFieldToShowList.includes(field))\r\n                            {\r\n                                columnFieldToShowList.push(field);\r\n                                if (columnFieldToHideList.includes(field))\r\n                                    columnFieldToHideList.vrDelete(field);\r\n                            }\r\n                            else if (!e.checked && !columnFieldToHideList.includes(field))\r\n                            {\r\n                                columnFieldToHideList.push(field);\r\n                                if (columnFieldToShowList.includes(field))\r\n                                    columnFieldToShowList.vrDelete(field);\r\n                            }\r\n                            //#endregion\r\n                        }\r\n                        else if (gridActionEnum == GridActionEnum.GroupBy)\r\n                        {\r\n                            //#region Manage groups\r\n                            if (e.checked && !groupFieldAddedList.includes(field)) // Add\r\n                            {\r\n                                groupFieldAddedList.push(field);\r\n                                if (groupFieldRemovedList.includes(field))\r\n                                    groupFieldRemovedList.vrDelete(field);\r\n                            }\r\n                            else if (!e.checked && !groupFieldRemovedList.includes(field)) // Remove\r\n                            {\r\n                                groupFieldRemovedList.push(field);\r\n                                if (groupFieldAddedList.includes(field))\r\n                                    groupFieldAddedList.vrDelete(field);\r\n                            }\r\n                            //#endregion\r\n                        }\r\n                        else if (gridActionEnum == GridActionEnum.LockUnlock)\r\n                        {\r\n                            //#region Lock/Unlock\r\n                            if (e.checked && !columnFieldToLockList.includes(field))\r\n                            {\r\n                                columnFieldToLockList.push(field);\r\n                                if (columnFieldToUnlockList.includes(field))\r\n                                    columnFieldToUnlockList.vrDelete(field);\r\n                            }\r\n                            else if (!e.checked && !columnFieldToUnlockList.includes(field))\r\n                            {\r\n                                columnFieldToUnlockList.push(field);\r\n                                if (columnFieldToLockList.includes(field))\r\n                                    columnFieldToLockList.vrDelete(field);\r\n                            }\r\n                            //#endregion\r\n                        }\r\n                    }\r\n                }, null, null, this._elementId + \"_chkActionColumn\" + column.field);\r\n            //#endregion\r\n        }\r\n        //#endregion\r\n    }\r\n\r\n    private clearWindowActions()\r\n    {\r\n        puma(\"#\" + this._elementId + \"_divWindowTableActionsContainer\").empty();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Filtering\r\n    private manageFilterTextByColumn(textToSearch: string, column: GridColumn, field: string, backSpace: boolean)\r\n    {\r\n        let options = this.getOptions();\r\n        let filteredArray: any[] = [];\r\n        if (column.type == GridColumnTypeEnum.Custom)\r\n        {\r\n            //#region Custom column\r\n            filteredArray = this._originalDataSource.filter(k => \r\n            {\r\n                let properties = (column.customFilterProperties != null && column.customFilterProperties.length > 0) ? column.customFilterProperties : Object.keys(k);\r\n                for (let value in k)\r\n                {\r\n                    if (!properties.includes(value))\r\n                        continue;\r\n\r\n                    if (String(k[value]).toLowerCase().indexOf(textToSearch) != -1)\r\n                        return true;\r\n                }\r\n                return false;\r\n            });\r\n            //#endregion\r\n        }\r\n        else\r\n            filteredArray = this.getFilteredArrayByInputText(field, textToSearch);\r\n\r\n        if (!Array.vrEquals(filteredArray, this.dataSource()) || column.filterWebService === true)\r\n        {\r\n            this._timeoutFilterText = window.setTimeout(() =>\r\n            {\r\n                this.removeFilter(column.field, false);\r\n                if (column.filterWebService === true)\r\n                {\r\n                    //#region Add filter condition\r\n                    let filterSettings = new GridFilterSettings();\r\n                    filterSettings.type = column.type!;\r\n                    filterSettings.stringFilterSettings = new GridStringFilterSettings();\r\n                    filterSettings.stringFilterSettings.text = textToSearch.toLowerCase();\r\n                    this.updateFilter(column.field, filterSettings, false);\r\n                    //#endregion\r\n\r\n                    this.rebind(null, true);\r\n                }\r\n                else\r\n                {\r\n                    this.pageSelected(1, false);\r\n                    this.setDataSource(filteredArray);\r\n\r\n                    if (this._dictionaryFilterConditions.size > 0)\r\n                        this.applyFilters();\r\n\r\n                    //#region Add filter condition\r\n                    let filterSettings = new GridFilterSettings();\r\n                    filterSettings.type = column.type!;\r\n                    filterSettings.stringFilterSettings = new GridStringFilterSettings();\r\n                    filterSettings.stringFilterSettings.text = textToSearch.toLowerCase();\r\n                    this.updateFilter(column.field, filterSettings, false);\r\n                    //#endregion\r\n                }\r\n            }, (backSpace) ? 200 : (options!.groupBy != null || column.filterWebService) ? 300 : 100);\r\n        }\r\n    }\r\n\r\n    clearFilters(updateDataSource = true, rebind = false)\r\n    {\r\n        let options = this.getOptions();\r\n        this._dictionaryFilterConditions.forEach((value, key) =>\r\n        {\r\n            //#region Type\r\n            let column = options.columns!.filter(k => k.field == key)[0];\r\n            switch (column.type)\r\n            {\r\n                case GridColumnTypeEnum.Checkbox:\r\n                case GridColumnTypeEnum.Boolean:\r\n                    {\r\n                        let checkboxJq = puma(\"#\" + this._elementId + \"_CheckboxFilter_\" + column.field);\r\n                        checkboxJq.addClass(\"indeterminateVrCheckbox\");\r\n\r\n                        let checkbox = checkboxJq[0] as HTMLInputElement;\r\n                        checkbox.checked = false;\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.Date:\r\n                    {\r\n                        let dateFilter = ControlManager.get<Button>(this._elementId + \"_DateFilter_\" + column.field);\r\n                        dateFilter.tooltip(\"\");\r\n                        puma(dateFilter.element()).css(\"background-color\", \"#f3f3f3\");\r\n                        puma(dateFilter.element()).css(\"color\", \"#000\");\r\n\r\n                        let dateFilterRemove = ControlManager.get<Button>(this._elementId + \"_DateFilterRemove_\" + column.field);\r\n                        dateFilterRemove.hide();\r\n                        this.recalculateHeight(true);\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.Number:\r\n                case GridColumnTypeEnum.Currency:\r\n                case GridColumnTypeEnum.Percentage:\r\n                case GridColumnTypeEnum.Duration:\r\n                    {\r\n                        let numberFilter = ControlManager.get<Button>(this._elementId + \"_NumberFilter_\" + column.field);\r\n                        numberFilter.tooltip(\"\");\r\n                        puma(numberFilter.element()).css(\"background-color\", \"#f3f3f3\");\r\n                        puma(numberFilter.element()).css(\"color\", \"#000\");\r\n\r\n                        let numberFilterRemove = ControlManager.get<Button>(this._elementId + \"_NumberFilterRemove_\" + column.field);\r\n                        numberFilterRemove.hide();\r\n                        this.recalculateHeight(true);\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.String:\r\n                case GridColumnTypeEnum.Custom:\r\n                case GridColumnTypeEnum.Label:\r\n                    {\r\n                        let textBox = ControlManager.get<TextBox>(this._elementId + \"_StringFilter_\" + column.field);\r\n                        textBox.clear();\r\n                    }\r\n                    break;\r\n            }\r\n            //#endregion\r\n\r\n            this.removeFilter(key, false);\r\n        });\r\n\r\n        if (updateDataSource)\r\n            this.update();\r\n\r\n        if (rebind)\r\n            this.rebind();\r\n    }\r\n\r\n    private getFilteredArrayByInputText(field: string, value: string)\r\n    {\r\n        value = value.toLowerCase();\r\n        let filteredArray: any[] = [];\r\n\r\n        let arrayWhereSearch = this._dictionaryDataValues.get(field);\r\n        arrayWhereSearch!.forEach((k, index) => \r\n        {\r\n            if (k.indexOf(value) !== -1)\r\n                filteredArray.push(this._originalDataSource[index]);\r\n        });\r\n        return filteredArray;\r\n    }\r\n\r\n    private createWindowFiltering()\r\n    {\r\n        if (this._wndFiltering != null)\r\n            return;\r\n\r\n        this._wndFiltering = createWindow(\r\n            {\r\n                addToControlList: false,\r\n                classContainer: this.element().id + \"_wndUtility\",\r\n                width: 430,\r\n                autoSize: WindowAutoSizeDirectionEnum.Height,\r\n                title: \"Gestisci filtro\",\r\n                onClose: (e) =>\r\n                {\r\n                    puma(this._wndFiltering.container()).remove();\r\n                    (this._wndFiltering as any) = null;\r\n                },\r\n                footer:\r\n                    [\r\n                        { type: WindowFooterItemTypeEnum.Ok, text: \"Applica\" },\r\n                        { type: WindowFooterItemTypeEnum.Close }\r\n                    ]\r\n            });\r\n\r\n        puma(this._wndFiltering.element()).vrAppendPuma(\"<div id='\" + this._elementId + \"_divWindowFilteringContainer' class='vrContainer'></div>\");\r\n        let divContainer = puma(\"#\" + this._elementId + \"_divWindowFilteringContainer\")[0];\r\n\r\n        puma(\"<div id='\" + this._elementId + \"_switchFilterSearch'></div>\").vrAppendToPuma(divContainer);\r\n        createSwitch({\r\n            labelOff: \"Ricerca intervalli\",\r\n            labelOn: { text: \"Ricerca puntuale\", tooltip: \"Max 100 valori\" },\r\n            cssContainer: \"margin-bottom: 5px;\",\r\n            onChange: (e) =>\r\n            {\r\n                puma(divSearchIntervals).vrVisible(!e.checked);\r\n                puma(divSearchSpecific).vrVisible(e.checked);\r\n                this._wndFiltering.center();\r\n            }\r\n        }, null, null, this._elementId + \"_switchFilterSearch\")\r\n\r\n        //#region Search intervals\r\n        let divSearchIntervals = div(divContainer);\r\n\r\n        //#region Filter date\r\n        let divFilterDate = puma(\"<div id='\" + this._elementId + \"DivFilterDate'></div>\").vrAppendToPuma(divSearchIntervals);\r\n        let dateFilterType = puma(\"<div id='\" + this._elementId + \"_ddlFilterDateType'></div>\").vrAppendToPuma(divFilterDate);\r\n\r\n        let datePickerDateFilterValueFrom: DatePicker;\r\n        let datePickerDateFilterValueTo: DatePicker;\r\n        let datePickerDateTimeFilterValueFrom: DatePicker;\r\n        let datePickerDateTimeFilterValueTo: DatePicker;\r\n        let numericTextBoxFilterValueTo: TextBox;\r\n        createComboBox(\r\n            {\r\n                mode: ComboBoxTypeEnum.DropDown,\r\n                label: \"Tipo di filtro\",\r\n                width: \"100%\",\r\n                cssContainer: \"margin-bottom: 10px;\",\r\n                items:\r\n                    [\r\n                        { text: \"Data maggiore di\", value: String(GridDateFilterTypeEnum.GreaterThan) },\r\n                        { text: \"Data minore di\", value: String(GridDateFilterTypeEnum.LessThan) },\r\n                        { text: \"Data uguale a\", value: String(GridDateFilterTypeEnum.EqualsTo) },\r\n                        { text: \"Data compresa tra\", value: String(GridDateFilterTypeEnum.Between) }\r\n                    ],\r\n                onAfterChange: (e) =>\r\n                {\r\n                    if (datePickerDateFilterValueTo == null || datePickerDateTimeFilterValueTo == null)\r\n                        return;\r\n\r\n                    if (Number(e.sender.value()) == GridDateFilterTypeEnum.Between)\r\n                    {\r\n                        if (datePickerDateFilterValueFrom.visible())\r\n                            datePickerDateFilterValueTo.show();\r\n                        else\r\n                            datePickerDateTimeFilterValueTo.show();\r\n                    }\r\n                    else\r\n                    {\r\n                        if (datePickerDateFilterValueFrom.visible())\r\n                            datePickerDateFilterValueTo.hide();\r\n                        else\r\n                            datePickerDateTimeFilterValueTo.hide();\r\n                    }\r\n                }\r\n            }, null, null, this._elementId + \"_ddlFilterDateType\");\r\n\r\n        //#region Date/Time\r\n        puma(\"<input id='\" + this._elementId + \"_dtpFilterDateFrom' />\").vrAppendToPuma(divFilterDate);\r\n        datePickerDateFilterValueFrom = createDatePicker(\r\n            {\r\n                width: 200,\r\n                cssContainer: \"margin-right: 5px;\"\r\n            }, null, null, this._elementId + \"_dtpFilterDateFrom\");\r\n\r\n        puma(\"<input id='\" + this._elementId + \"_dtpFilterDateTo' />\").vrAppendToPuma(divFilterDate);\r\n        datePickerDateFilterValueTo = createDatePicker(\r\n            {\r\n                width: 198,\r\n                label: \"e\",\r\n                labelSettings: { position: PositionEnum.Left },\r\n                visible: false\r\n            }, null, null, this._elementId + \"_dtpFilterDateTo\");\r\n        //#endregion\r\n\r\n        //#region DateTime\r\n        puma(\"<input id='\" + this._elementId + \"_dtpDateTimeFilterDateFrom' />\").vrAppendToPuma(divFilterDate);\r\n        datePickerDateTimeFilterValueFrom = createDatePicker(\r\n            {\r\n                width: 200,\r\n                cssContainer: \"margin-right: 5px;\",\r\n                visible: false,\r\n                mode: DateModeEnum.DateTime\r\n            }, null, null, this._elementId + \"_dtpDateTimeFilterDateFrom\");\r\n\r\n        puma(\"<input id='\" + this._elementId + \"_dtpDateTimeFilterDateTo' />\").vrAppendToPuma(divFilterDate);\r\n        datePickerDateTimeFilterValueTo = createDatePicker(\r\n            {\r\n                width: 198,\r\n                label: \"e\",\r\n                labelSettings: { position: PositionEnum.Left },\r\n                visible: false,\r\n                mode: DateModeEnum.DateTime\r\n            }, null, null, this._elementId + \"_dtpDateTimeFilterDateTo\");\r\n        //#endregion\r\n\r\n        //#endregion\r\n\r\n        //#region Filter number\r\n        let divFilterNumber = puma(\"<div id='\" + this._elementId + \"DivFilterNumber'></div>\").vrAppendToPuma(divSearchIntervals);\r\n        puma(\"<div id='\" + this._elementId + \"_ddlFilterNumberType'></div>\").vrAppendToPuma(divFilterNumber);\r\n        createComboBox(\r\n            {\r\n                mode: ComboBoxTypeEnum.DropDown,\r\n                label: \"Tipo di filtro\",\r\n                width: \"100%\",\r\n                cssContainer: \"margin-bottom: 10px;\",\r\n                items:\r\n                    [\r\n                        { text: \"Numero maggiore di\", value: String(GridNumberFilterTypeEnum.GreaterThan) },\r\n                        { text: \"Numero minore di\", value: String(GridNumberFilterTypeEnum.LessThan) },\r\n                        { text: \"Numero uguale a\", value: String(GridNumberFilterTypeEnum.EqualsTo) },\r\n                        { text: \"Numero compreso tra\", value: String(GridNumberFilterTypeEnum.Between) }\r\n                    ],\r\n                onAfterChange: (e) =>\r\n                {\r\n                    if (numericTextBoxFilterValueTo == null)\r\n                        return;\r\n\r\n                    if (Number(e.sender.value()) == GridNumberFilterTypeEnum.Between)\r\n                        numericTextBoxFilterValueTo.show();\r\n                    else\r\n                        numericTextBoxFilterValueTo.hide();\r\n                }\r\n            }, null, null, this._elementId + \"_ddlFilterNumberType\");\r\n\r\n        puma(\"<input id='\" + this._elementId + \"_ntbFilterNumberFrom' />\").vrAppendToPuma(divFilterNumber);\r\n        createTextBox(\r\n            {\r\n                mode: TextModeEnum.Numeric,\r\n                cssContainer: \"margin-right: 5px;\",\r\n                decimals: 2,\r\n                validation: { minValue: 0 }\r\n            }, null, null, this._elementId + \"_ntbFilterNumberFrom\");\r\n\r\n        puma(\"<input id='\" + this._elementId + \"_ntbFilterNumberTo' />\").vrAppendToPuma(divFilterNumber);\r\n        numericTextBoxFilterValueTo = createTextBox(\r\n            {\r\n                mode: TextModeEnum.Numeric,\r\n                label: \"e\",\r\n                labelSettings: { position: PositionEnum.Left },\r\n                visible: false,\r\n                decimals: 2\r\n            }, null, null, this._elementId + \"_ntbFilterNumberTo\");\r\n        //#endregion\r\n\r\n        //#endregion\r\n\r\n        //#region Search specific vlaues\r\n        let divSearchSpecific = div(divContainer, { css: \"display: none;\" });\r\n        let divItems = puma(\"<div id='\" + this._elementId + \"_specificValues' style='height: 300px; overflow-y: auto;'></div>\").vrAppendToPuma(divSearchSpecific);\r\n        let divCheckboxList = puma(\"<div id='\" + this._elementId + \"_checkboxListSpecificValues'></div>\").vrAppendToPuma(divItems);\r\n\r\n        createCheckBoxList({\r\n            orientation: OrientationEnum.Vertical\r\n        }, null, null, this._elementId + \"_checkboxListSpecificValues\");\r\n        //#endregion\r\n    }\r\n\r\n    private openWindowFiltering(column: GridColumn)\r\n    {\r\n        this.createWindowFiltering();\r\n\r\n        this._wndFiltering.open([{ value: \"ok\", callback: () => this.saveWindowFiltering(column) }]);\r\n        this.clearWindowFiltering();\r\n        this._wndFiltering.autoSize(WindowAutoSizeDirectionEnum.Height);\r\n\r\n        if (column.title != null)\r\n            this._wndFiltering.title(\"Filtro campo: '\" + column.title + \"'\");\r\n        else\r\n            this._wndFiltering.title(\"Imposta filtro\");\r\n\r\n        let dtpFrom = ControlManager.get<DatePicker>(this._elementId + \"_dtpFilterDateFrom\");\r\n        let dtpTo = ControlManager.get<DatePicker>(this._elementId + \"_dtpFilterDateTo\");\r\n        let dtpDateTimeFrom = ControlManager.get<DatePicker>(this._elementId + \"_dtpDateTimeFilterDateFrom\");\r\n        let dtpDateTimeTo = ControlManager.get<DatePicker>(this._elementId + \"_dtpDateTimeFilterDateTo\");\r\n        let ntbFrom = ControlManager.get<TextBox>(this._elementId + \"_ntbFilterNumberFrom\");\r\n        let ntbTo = ControlManager.get<TextBox>(this._elementId + \"_ntbFilterNumberTo\");\r\n\r\n        //#region Hide/Show\r\n        switch (column.type!)\r\n        {\r\n            case GridColumnTypeEnum.DateTime:\r\n            case GridColumnTypeEnum.Time:\r\n            case GridColumnTypeEnum.Date:\r\n                {\r\n                    puma(\"#\" + this._elementId + \"DivFilterDate\").show();\r\n                    puma(\"#\" + this._elementId + \"DivFilterNumber\").hide();\r\n\r\n                    switch (column.type!)\r\n                    {\r\n                        case GridColumnTypeEnum.DateTime:\r\n                            {\r\n                                dtpFrom.hide();\r\n                                dtpTo.hide();\r\n                                dtpDateTimeFrom.show();\r\n                            }\r\n                            break;\r\n                        case GridColumnTypeEnum.Time:\r\n                            {\r\n                                dtpFrom.show();\r\n                                dtpDateTimeFrom.hide();\r\n                                dtpDateTimeTo.hide();\r\n\r\n                                dtpFrom.mode(DateModeEnum.Time);\r\n                                dtpTo.mode(DateModeEnum.Time);\r\n\r\n                                let defaultDateMin = new Date();\r\n                                defaultDateMin.setHours(0, 0, 0, 1);\r\n                                dtpFrom.min(defaultDateMin);\r\n                                dtpTo.min(defaultDateMin);\r\n\r\n                                let defaultDateMax = new Date();\r\n                                defaultDateMax.setHours(23, 59, 59, 59);\r\n                                dtpFrom.max(defaultDateMax);\r\n                                dtpTo.max(defaultDateMax);\r\n                            }\r\n                            break;\r\n                        case GridColumnTypeEnum.Date:\r\n                            {\r\n                                dtpFrom.show();\r\n                                dtpDateTimeFrom.hide();\r\n                                dtpDateTimeTo.hide();\r\n\r\n                                dtpFrom.mode(DateModeEnum.Date);\r\n                                dtpTo.mode(DateModeEnum.Date);\r\n\r\n                                let defaultDateMin = Date.MIN_VALUE;\r\n                                defaultDateMin.setHours(7, 0);\r\n                                dtpFrom.min(defaultDateMin);\r\n                                dtpTo.min(defaultDateMin);\r\n\r\n                                let defaultDateMax = Date.MAX_VALUE;\r\n                                defaultDateMax.setHours(22, 0);\r\n                                dtpFrom.max(defaultDateMax);\r\n                                dtpTo.max(defaultDateMax);\r\n                            }\r\n                            break;\r\n                    }\r\n                }\r\n                break;\r\n            case GridColumnTypeEnum.Number:\r\n            case GridColumnTypeEnum.Currency:\r\n            case GridColumnTypeEnum.Duration:\r\n            case GridColumnTypeEnum.Percentage:\r\n                {\r\n                    puma(\"#\" + this._elementId + \"DivFilterDate\").hide();\r\n                    puma(\"#\" + this._elementId + \"DivFilterNumber\").show();\r\n\r\n                    switch (column.type)\r\n                    {\r\n                        case GridColumnTypeEnum.Number:\r\n                        case GridColumnTypeEnum.Duration:\r\n                            {\r\n                                ntbFrom.type(TextModeEnum.Numeric);\r\n                                ntbTo.type(TextModeEnum.Numeric);\r\n                            }\r\n                            break;\r\n                        case GridColumnTypeEnum.Currency:\r\n                            {\r\n                                ntbFrom.type(TextModeEnum.Currency);\r\n                                ntbTo.type(TextModeEnum.Currency);\r\n                            }\r\n                            break;\r\n                        case GridColumnTypeEnum.Percentage:\r\n                            {\r\n                                ntbFrom.type(TextModeEnum.Percentage);\r\n                                ntbTo.type(TextModeEnum.Percentage);\r\n                            }\r\n                            break;\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        //#endregion\r\n\r\n        let isSearchIntervals = true;\r\n        if (this._dictionaryFilterConditions.has(column.field))\r\n        {\r\n            let filterSettings = this._dictionaryFilterConditions.get(column.field);\r\n            if (filterSettings != null)\r\n            {\r\n                if (filterSettings.dateFilterSettings != null && filterSettings.dateFilterSettings.specificValues != null\r\n                    && filterSettings.dateFilterSettings.specificValues.length > 0)\r\n                    isSearchIntervals = false;\r\n                else if (filterSettings.numberFilterSettings != null && filterSettings.numberFilterSettings.specificValues != null\r\n                    && filterSettings.numberFilterSettings.specificValues != null)\r\n                    isSearchIntervals = false;\r\n            }\r\n        }\r\n\r\n        //#region Fill CheckboxList specific values\r\n        let checkboxList = ControlManager.get<CheckBoxList>(this._elementId + \"_checkboxListSpecificValues\");\r\n        let items = this.originalDataSource().map(k =>\r\n        {\r\n            let text = this.formatValue(k[column.field], column.type!, column.decimalDigits, column.roundingSettings, column.showSeconds);\r\n            let tag = k[column.field];\r\n            if (column.type == GridColumnTypeEnum.Date || column.type == GridColumnTypeEnum.DateTime || column.type == GridColumnTypeEnum.Time)\r\n                tag = new Date(k[column.field]);\r\n\r\n            return { text: text, value: tag, tag: tag }\r\n        }).vrDistinctBy(k => k.text).vrSortAsc(\"tag\");\r\n        checkboxList.items((items as any).take(100));\r\n        //#endregion\r\n\r\n        let switchSearch = ControlManager.get<Switch>(this._elementId + \"_switchFilterSearch\");\r\n        if (isSearchIntervals)\r\n        {\r\n            //#region Search intervals\r\n            switchSearch.checked(false);\r\n            switch (column.type!)\r\n            {\r\n                case GridColumnTypeEnum.DateTime:\r\n                case GridColumnTypeEnum.Time:\r\n                case GridColumnTypeEnum.Date:\r\n                    {\r\n                        if (this._dictionaryFilterConditions.has(column.field))\r\n                        {\r\n                            let filterSettings = this._dictionaryFilterConditions.get(column.field);\r\n                            if (filterSettings != null && filterSettings.dateFilterSettings != null)\r\n                            {\r\n                                let ddlType = ControlManager.get<ComboBox>(this._elementId + \"_ddlFilterDateType\");\r\n                                ddlType.value(filterSettings.dateFilterSettings.filterTypeEnum, true);\r\n\r\n                                if (column.type == GridColumnTypeEnum.DateTime)\r\n                                {\r\n                                    dtpDateTimeFrom.value(filterSettings.dateFilterSettings.dateFrom);\r\n                                    dtpDateTimeTo.value(filterSettings.dateFilterSettings.dateTo);\r\n                                }\r\n                                else\r\n                                {\r\n                                    dtpFrom.value(filterSettings.dateFilterSettings.dateFrom);\r\n                                    dtpTo.value(filterSettings.dateFilterSettings.dateTo);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.Number:\r\n                case GridColumnTypeEnum.Currency:\r\n                case GridColumnTypeEnum.Duration:\r\n                case GridColumnTypeEnum.Percentage:\r\n                    {\r\n                        if (this._dictionaryFilterConditions.has(column.field))\r\n                        {\r\n                            let filterSettings = this._dictionaryFilterConditions.get(column.field);\r\n                            if (filterSettings != null && filterSettings.numberFilterSettings != null)\r\n                            {\r\n                                let ddlType = ControlManager.get<ComboBox>(this._elementId + \"_ddlFilterNumberType\");\r\n                                ddlType.value(filterSettings.numberFilterSettings.filterTypeEnum, true);\r\n                                ntbFrom.value(filterSettings.numberFilterSettings.numberFrom);\r\n                                ntbTo.value(filterSettings.numberFilterSettings.numberTo);\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n            }\r\n            //#endregion\r\n        }\r\n        else\r\n        {\r\n            //#region Search specific values\r\n            switchSearch.checked(true);\r\n            switch (column.type!)\r\n            {\r\n                case GridColumnTypeEnum.DateTime:\r\n                case GridColumnTypeEnum.Time:\r\n                case GridColumnTypeEnum.Date:\r\n                    {\r\n                        //#region Load filter data\r\n                        if (this._dictionaryFilterConditions.has(column.field))\r\n                        {\r\n                            let filterSettings = this._dictionaryFilterConditions.get(column.field);\r\n                            if (filterSettings != null && filterSettings.dateFilterSettings != null\r\n                                && filterSettings.dateFilterSettings.specificValues != null\r\n                                && filterSettings.dateFilterSettings.specificValues.length > 0)\r\n                            {\r\n                                checkboxList.valueTag(filterSettings.dateFilterSettings.specificValues);\r\n                            }\r\n                        }\r\n                        //#endregion\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.Number:\r\n                case GridColumnTypeEnum.Currency:\r\n                case GridColumnTypeEnum.Duration:\r\n                case GridColumnTypeEnum.Percentage:\r\n                    {\r\n                        //#region Load filter data\r\n                        if (this._dictionaryFilterConditions.has(column.field))\r\n                        {\r\n                            let filterSettings = this._dictionaryFilterConditions.get(column.field);\r\n                            if (filterSettings != null && filterSettings.numberFilterSettings != null\r\n                                && filterSettings.numberFilterSettings.specificValues != null\r\n                                && filterSettings.numberFilterSettings.specificValues.length > 0)\r\n                            {\r\n                                checkboxList.value(filterSettings.numberFilterSettings.specificValues);\r\n                            }\r\n                        }\r\n                        //#endregion\r\n                    }\r\n                    break;\r\n            }\r\n            //#endregion\r\n        }\r\n    }\r\n\r\n    private saveWindowFiltering(column: GridColumn)\r\n    {\r\n        let options = this.getOptions();\r\n        let filterSettings = new GridFilterSettings();\r\n        filterSettings.type = column.type!;\r\n\r\n        let switchSearch = ControlManager.get<Switch>(this._elementId + \"_switchFilterSearch\");\r\n        if (!switchSearch.checked())\r\n        {\r\n            //#region Search intervals\r\n            switch (column.type!)\r\n            {\r\n                case GridColumnTypeEnum.DateTime:\r\n                case GridColumnTypeEnum.Time:\r\n                case GridColumnTypeEnum.Date:\r\n                    {\r\n                        //#region Date filter settings\r\n                        let dtpFrom = ControlManager.get<DatePicker>(this._elementId + \"_dtpFilterDateFrom\");\r\n                        let dtpTo = ControlManager.get<DatePicker>(this._elementId + \"_dtpFilterDateTo\");\r\n                        let dtpDateTimeFrom = ControlManager.get<DatePicker>(this._elementId + \"_dtpDateTimeFilterDateFrom\");\r\n                        let dtpDateTimeTo = ControlManager.get<DatePicker>(this._elementId + \"_dtpDateTimeFilterDateTo\");\r\n\r\n                        if (column.type! == GridColumnTypeEnum.DateTime)\r\n                        {\r\n                            if (dtpDateTimeFrom.value() == null)\r\n                            {\r\n                                notify(\"Inserire almeno una data\");\r\n                                return;\r\n                            }\r\n                        }\r\n                        else\r\n                        {\r\n                            if (dtpFrom.value() == null)\r\n                            {\r\n                                notify(\"Inserire almeno una data\");\r\n                                return;\r\n                            }\r\n                        }\r\n\r\n                        let ddlType = ControlManager.get<ComboBox>(this._elementId + \"_ddlFilterDateType\")\r\n                        filterSettings.dateFilterSettings = new GridDateFilterSettings();\r\n                        filterSettings.dateFilterSettings.filterTypeEnum = Number(ddlType.value());\r\n                        filterSettings.dateFilterSettings.dateFrom = (column.type! == GridColumnTypeEnum.DateTime) ? dtpDateTimeFrom.value()! : dtpFrom.value()!;\r\n                        filterSettings.dateFilterSettings.dateTo = (column.type! == GridColumnTypeEnum.DateTime) ? dtpDateTimeTo.value()! : dtpTo.value();\r\n                        //#endregion\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.Number:\r\n                case GridColumnTypeEnum.Currency:\r\n                case GridColumnTypeEnum.Duration:\r\n                case GridColumnTypeEnum.Percentage:\r\n                    {\r\n                        //#region Number filter settings\r\n                        let ntbFrom = ControlManager.get<TextBox>(this._elementId + \"_ntbFilterNumberFrom\");\r\n                        let ntbTo = ControlManager.get<TextBox>(this._elementId + \"_ntbFilterNumberTo\");\r\n\r\n                        if (ntbFrom.value() == \"\")\r\n                        {\r\n                            notify(\"Inserire almeno un numero\");\r\n                            return;\r\n                        }\r\n\r\n                        let ddlType = ControlManager.get<ComboBox>(this._elementId + \"_ddlFilterNumberType\");\r\n                        filterSettings.numberFilterSettings = new GridNumberFilterSettings();\r\n                        filterSettings.numberFilterSettings.filterTypeEnum = Number(ddlType.value());\r\n                        filterSettings.numberFilterSettings.numberFrom = ntbFrom.value();\r\n                        filterSettings.numberFilterSettings.numberTo = (ntbTo.value() == 0) ? null : Number(ntbTo.value());\r\n                        //#endregion\r\n                    }\r\n                    break;\r\n            }\r\n            //#endregion\r\n        }\r\n        else\r\n        {\r\n            //#region Search specific values\r\n            let checkboxList = ControlManager.get<CheckBoxList>(this._elementId + \"_checkboxListSpecificValues\");\r\n            switch (column.type!)\r\n            {\r\n                case GridColumnTypeEnum.DateTime:\r\n                case GridColumnTypeEnum.Time:\r\n                case GridColumnTypeEnum.Date:\r\n                    {\r\n                        filterSettings.dateFilterSettings = new GridDateFilterSettings();\r\n                        filterSettings.dateFilterSettings.specificValues = checkboxList.valueTag();\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.Number:\r\n                case GridColumnTypeEnum.Currency:\r\n                case GridColumnTypeEnum.Duration:\r\n                case GridColumnTypeEnum.Percentage:\r\n                    {\r\n                        filterSettings.numberFilterSettings = new GridNumberFilterSettings();\r\n                        filterSettings.numberFilterSettings.specificValues = checkboxList.value().vrToNumberArrayList();\r\n                    }\r\n                    break;\r\n            }\r\n            //#endregion\r\n        }\r\n\r\n        this._wndFiltering.close();\r\n        this.removeFilter(column.field, !options.serverBinding);\r\n        this.updateFilter(column.field, filterSettings);\r\n    }\r\n\r\n    private clearWindowFiltering()\r\n    {\r\n        //#region Date filter\r\n        ControlManager.get<ComboBox>(this._elementId + \"_ddlFilterDateType\").clear();\r\n        ControlManager.get<DatePicker>(this._elementId + \"_dtpFilterDateFrom\").clear();\r\n        ControlManager.get<DatePicker>(this._elementId + \"_dtpFilterDateTo\").clear();\r\n        ControlManager.get<DatePicker>(this._elementId + \"_dtpFilterDateTo\").hide();\r\n        ControlManager.get<DatePicker>(this._elementId + \"_dtpDateTimeFilterDateFrom\").clear();\r\n        ControlManager.get<DatePicker>(this._elementId + \"_dtpDateTimeFilterDateTo\").clear();\r\n        ControlManager.get<DatePicker>(this._elementId + \"_dtpDateTimeFilterDateFrom\").hide();\r\n        ControlManager.get<DatePicker>(this._elementId + \"_dtpDateTimeFilterDateTo\").hide();\r\n        //#endregion\r\n\r\n        //#region Number filter\r\n        ControlManager.get<ComboBox>(this._elementId + \"_ddlFilterNumberType\").clear();\r\n        ControlManager.get<TextBox>(this._elementId + \"_ntbFilterNumberFrom\").clear();\r\n        ControlManager.get<TextBox>(this._elementId + \"_ntbFilterNumberTo\").clear();\r\n        ControlManager.get<TextBox>(this._elementId + \"_ntbFilterNumberTo\").hide();\r\n        //#endregion\r\n\r\n        //#region Search specific values\r\n        ControlManager.get<CheckBoxList>(this._elementId + \"_checkboxListSpecificValues\").clearItems();\r\n        //#endregion\r\n    }\r\n\r\n    addFilter(field: string, filterCondition: GridFilterSettings, applyFilters = true)\r\n    {\r\n        this._dictionaryFilterConditions.set(field, filterCondition);\r\n        if (applyFilters)\r\n            this.applyFilters();\r\n    }\r\n\r\n    removeFilters(fields: string[], applyFilters = true)\r\n    {\r\n        for (let field of fields)\r\n            this.removeFilter(field, false);\r\n\r\n        if (applyFilters)\r\n            this.applyFilters(true);\r\n    }\r\n\r\n    removeFilter(field: string, applyFilters = true)\r\n    {\r\n        if (this._dictionaryFilterConditions.has(field))\r\n        {\r\n            this._dictionaryFilterConditions.delete(field);\r\n            if (applyFilters)\r\n                this.applyFilters(true);\r\n        }\r\n    }\r\n\r\n    updateFilter(field: string, filterCondition: GridFilterSettings, applyFilters = true)\r\n    {\r\n        this._dictionaryFilterConditions.set(field, filterCondition);\r\n        if (applyFilters)\r\n            this.applyFilters();\r\n    }\r\n\r\n    private applyFilters(onOriginalDataSource = false, applyFilters = true)\r\n    {\r\n        let options = this.getOptions();\r\n\r\n        //#region Server binding\r\n        if (options.serverBinding !== false)\r\n        {\r\n            this.pageSelected(1, false);\r\n            if (applyFilters)\r\n                this.rebind();\r\n            else\r\n                this.setDataSource((onOriginalDataSource) ? this._originalDataSource : this.dataSource());\r\n\r\n            return;\r\n        }\r\n        //#endregion\r\n\r\n        let filteredArray: any[] = (onOriginalDataSource) ? this._originalDataSource : this.dataSource();\r\n        this._dictionaryFilterConditions.forEach((valueFilterSettings, keyField, dic) =>\r\n        {\r\n            let column = options.columns!.filter(k => k.field == keyField)[0];\r\n            if (column != null && column.hidden === true)\r\n                return;\r\n\r\n            let ddlType: ComboBox | null = null;\r\n            if (column.type == GridColumnTypeEnum.Date || column.type == GridColumnTypeEnum.DateTime || column.type == GridColumnTypeEnum.Time)\r\n                ddlType = ControlManager.get<ComboBox>(this._elementId + \"_ddlFilterDateType\");\r\n            else if (column.type == GridColumnTypeEnum.Number || column.type == GridColumnTypeEnum.Currency || column.type == GridColumnTypeEnum.Duration || column.type == GridColumnTypeEnum.Percentage)\r\n                ddlType = ControlManager.get<ComboBox>(this._elementId + \"_ddlFilterNumberType\");\r\n\r\n            let type = \"\";\r\n            switch (Number(ddlType!.value()))\r\n            {\r\n                case GridNumberFilterTypeEnum.GreaterThan: type = \"Maggiore di \"; break;\r\n                case GridNumberFilterTypeEnum.LessThan: type = \"Minore di \"; break;\r\n                case GridNumberFilterTypeEnum.EqualsTo: type = \"Uguale a \"; break;\r\n                case GridNumberFilterTypeEnum.Between: type = \"Compreso tra \"; break;\r\n            }\r\n\r\n            if (valueFilterSettings.numberFilterSettings != null)\r\n            {\r\n                //#region Number filter\r\n                let filterButton = ControlManager.get<Button>(this._elementId + \"_NumberFilter_\" + keyField);\r\n                puma(filterButton.element()).css(\"background-color\", \"coral\");\r\n                puma(filterButton.element()).css(\"color\", \"#FFF\");\r\n\r\n                let filterButtonRemove = ControlManager.get<Button>(this._elementId + \"_NumberFilterRemove_\" + keyField);\r\n                filterButtonRemove.show();\r\n                this.recalculateHeight(true);\r\n\r\n                if (valueFilterSettings.numberFilterSettings.specificValues != null && valueFilterSettings.numberFilterSettings.specificValues.length > 0)\r\n                {\r\n                    //#region Search specific values\r\n                    filteredArray = filteredArray.filter(k => valueFilterSettings.numberFilterSettings!.specificValues.includes(k[keyField]));\r\n                    filterButton.tooltip(\"Ricerca specifica su questi valori: \" + valueFilterSettings.numberFilterSettings.specificValues.join(\" - \"));\r\n                    //#endregion\r\n                }\r\n                else\r\n                {\r\n                    //#region Search intervals\r\n                    switch (valueFilterSettings.numberFilterSettings.filterTypeEnum)\r\n                    {\r\n                        case GridNumberFilterTypeEnum.GreaterThan:\r\n                            filteredArray = filteredArray.filter(k => k[keyField] > valueFilterSettings.numberFilterSettings!.numberFrom);\r\n                            break;\r\n                        case GridNumberFilterTypeEnum.LessThan:\r\n                            filteredArray = filteredArray.filter(k => k[keyField] < valueFilterSettings.numberFilterSettings!.numberFrom);\r\n                            break;\r\n                        case GridNumberFilterTypeEnum.EqualsTo:\r\n                            filteredArray = filteredArray.filter(k => k[keyField] == valueFilterSettings.numberFilterSettings!.numberFrom);\r\n                            break;\r\n                        case GridNumberFilterTypeEnum.Between:\r\n                            {\r\n                                if (valueFilterSettings.numberFilterSettings!.numberTo != null)\r\n                                    filteredArray = filteredArray.filter(k => k[keyField] >= valueFilterSettings.numberFilterSettings!.numberFrom && k[keyField] <= valueFilterSettings.numberFilterSettings!.numberTo!);\r\n                                else\r\n                                    filteredArray = filteredArray.filter(k => k[keyField] > valueFilterSettings.numberFilterSettings!.numberFrom);\r\n                            }\r\n                            break;\r\n                    }\r\n\r\n                    // Filter button\r\n                    let valueTooltip = String(valueFilterSettings.numberFilterSettings!.numberFrom);\r\n                    if (valueFilterSettings.numberFilterSettings!.filterTypeEnum == GridNumberFilterTypeEnum.Between)\r\n                        valueTooltip += \" e \" + valueFilterSettings.numberFilterSettings!.numberTo;\r\n\r\n                    filterButton.tooltip(type + valueTooltip);\r\n                    //#endregion\r\n                }\r\n                //#endregion\r\n            }\r\n            else if (valueFilterSettings.dateFilterSettings != null)\r\n            {\r\n                //#region Date filter\r\n                let filterButton = ControlManager.get<Button>(this._elementId + \"_DateFilter_\" + keyField);\r\n                puma(filterButton.element()).css(\"background-color\", \"coral\");\r\n                puma(filterButton.element()).css(\"color\", \"#FFF\");\r\n\r\n                let filterButtonRemove = ControlManager.get<Button>(this._elementId + \"_DateFilterRemove_\" + keyField);\r\n                filterButtonRemove.show();\r\n                this.recalculateHeight(true);\r\n\r\n                if (valueFilterSettings.dateFilterSettings.specificValues != null && valueFilterSettings.dateFilterSettings.specificValues.length > 0)\r\n                {\r\n                    //#region Search specific values\r\n                    let dateFilteredArray = [];\r\n                    for (let filterValue of filteredArray)\r\n                    {\r\n                        for (let specificValue of valueFilterSettings.dateFilterSettings.specificValues)\r\n                        {\r\n                            if (Date.vrEquals(new Date(filterValue[keyField]), specificValue))\r\n                                dateFilteredArray.push(filterValue);\r\n                        }\r\n                    }\r\n                    filteredArray = dateFilteredArray;\r\n\r\n                    let tooltipValues: string[] = [];\r\n                    if (column.type == GridColumnTypeEnum.Date)\r\n                        tooltipValues = valueFilterSettings.dateFilterSettings.specificValues.map(k => { return new Date(k).vrToItalyString(DateModeEnum.Date) });\r\n                    else if (column.type == GridColumnTypeEnum.DateTime)\r\n                        tooltipValues = valueFilterSettings.dateFilterSettings.specificValues.map(k => { return new Date(k).vrToItalyString(DateModeEnum.DateTime) });\r\n                    else if (column.type == GridColumnTypeEnum.Time)\r\n                        tooltipValues = valueFilterSettings.dateFilterSettings.specificValues.map(k => { return new Date(k).vrToItalyString(DateModeEnum.Time) });\r\n\r\n                    filterButton.tooltip(\"Ricerca specifica su questi valori: \" + tooltipValues.join(\" - \"));\r\n                    //#endregion\r\n                }\r\n                else\r\n                {\r\n                    //#region Search intervals\r\n                    let filterDateFrom = Date.vrFixDateString(valueFilterSettings.dateFilterSettings!.dateFrom);\r\n                    let filterDateTo = Date.vrFixDateString(valueFilterSettings.dateFilterSettings!.dateTo);\r\n\r\n                    switch (valueFilterSettings.dateFilterSettings.filterTypeEnum)\r\n                    {\r\n                        case GridDateFilterTypeEnum.GreaterThan:\r\n                            {\r\n                                switch (column.type)\r\n                                {\r\n                                    case GridColumnTypeEnum.Date:\r\n                                        filteredArray = filteredArray.filter(k => Date.vrFixDateString(k[keyField]) != null && Date.vrFixDateString(k[keyField]).vrIsGreaterThan(filterDateFrom, false, false));\r\n                                        break;\r\n                                    case GridColumnTypeEnum.DateTime:\r\n                                        filteredArray = filteredArray.filter(k => Date.vrFixDateString(k[keyField]) != null && Date.vrFixDateString(k[keyField]).vrIsGreaterThan(filterDateFrom));\r\n                                        break;\r\n                                    case GridColumnTypeEnum.Time:\r\n                                        filteredArray = filteredArray.filter(k => Date.vrFixDateString(k[keyField]) != null && (Date.vrFixDateString(k[keyField]).getHours() > filterDateFrom.getHours() || (Date.vrFixDateString(k[keyField]).getHours() == filterDateFrom.getHours() && Date.vrFixDateString(k[keyField]).getMinutes() > filterDateFrom.getMinutes())))\r\n                                        break;\r\n                                }\r\n                            }\r\n                            break;\r\n                        case GridDateFilterTypeEnum.LessThan:\r\n                            {\r\n                                switch (column.type)\r\n                                {\r\n                                    case GridColumnTypeEnum.Date:\r\n                                        filteredArray = filteredArray.filter(k => Date.vrFixDateString(k[keyField]) != null && Date.vrFixDateString(k[keyField]).vrIsLessThan(filterDateFrom, false, false));\r\n                                        break;\r\n                                    case GridColumnTypeEnum.DateTime:\r\n                                        filteredArray = filteredArray.filter(k => Date.vrFixDateString(k[keyField]) != null && Date.vrFixDateString(k[keyField]).vrIsLessThan(filterDateFrom));\r\n                                        break;\r\n                                    case GridColumnTypeEnum.Time:\r\n                                        filteredArray = filteredArray.filter(k => Date.vrFixDateString(k[keyField]) != null && (Date.vrFixDateString(k[keyField]).getHours() < filterDateFrom.getHours() || (Date.vrFixDateString(k[keyField]).getHours() == filterDateFrom.getHours() && Date.vrFixDateString(k[keyField]).getMinutes() < filterDateFrom.getMinutes())))\r\n                                        break;\r\n                                }\r\n                            }\r\n                            break;\r\n                        case GridDateFilterTypeEnum.EqualsTo:\r\n                            {\r\n                                switch (column.type)\r\n                                {\r\n                                    case GridColumnTypeEnum.Date:\r\n                                        filteredArray = filteredArray.filter(k => Date.vrFixDateString(k[keyField]) != null && Date.vrFixDateString(k[keyField]).vrIsEqualsTo(filterDateFrom, false));\r\n                                        break;\r\n                                    case GridColumnTypeEnum.DateTime:\r\n                                        filteredArray = filteredArray.filter(k => Date.vrFixDateString(k[keyField]) != null && Date.vrFixDateString(k[keyField]).vrIsEqualsTo(filterDateFrom));\r\n                                        break;\r\n                                    case GridColumnTypeEnum.Time:\r\n                                        filteredArray = filteredArray.filter(k => Date.vrFixDateString(k[keyField]) != null && (Date.vrFixDateString(k[keyField]).getHours() == filterDateFrom.getHours() && Date.vrFixDateString(k[keyField]).getMinutes() == filterDateFrom.getMinutes()))\r\n                                        break;\r\n                                }\r\n                            }\r\n                            break;\r\n                        case GridDateFilterTypeEnum.Between:\r\n                            {\r\n                                switch (column.type)\r\n                                {\r\n                                    case GridColumnTypeEnum.Date:\r\n                                    case GridColumnTypeEnum.DateTime:\r\n                                        {\r\n                                            if (valueFilterSettings.dateFilterSettings!.dateTo != null)\r\n                                                filteredArray = filteredArray.filter(k => Date.vrFixDateString(k[keyField]) != null && Date.vrFixDateString(k[keyField]).vrIsBetween(filterDateFrom, filterDateTo));\r\n                                            else\r\n                                                filteredArray = filteredArray.filter(k => Date.vrFixDateString(k[keyField]) != null && Date.vrFixDateString(k[keyField]).vrIsGreaterThan(filterDateFrom));\r\n                                        }\r\n                                        break;\r\n                                    case GridColumnTypeEnum.Time:\r\n                                        {\r\n                                            if (valueFilterSettings.dateFilterSettings!.dateTo != null)\r\n                                            {\r\n                                                filteredArray = filteredArray.filter(k => Date.vrFixDateString(k[keyField]) != null && (Date.vrFixDateString(k[keyField]).getHours() > filterDateFrom.getHours() || (Date.vrFixDateString(k[keyField]).getHours() == filterDateFrom.getHours() && Date.vrFixDateString(k[keyField]).getMinutes() > filterDateFrom.getMinutes())))\r\n                                                filteredArray = filteredArray.filter(k => Date.vrFixDateString(k[keyField]) != null && (Date.vrFixDateString(k[keyField]).getHours() < filterDateTo.getHours() || (Date.vrFixDateString(k[keyField]).getHours() == filterDateTo.getHours() && Date.vrFixDateString(k[keyField]).getMinutes() < filterDateTo.getMinutes())))\r\n                                            }\r\n                                            else\r\n                                                filteredArray = filteredArray.filter(k => Date.vrFixDateString(k[keyField]) != null && (Date.vrFixDateString(k[keyField]).getHours() > filterDateFrom.getHours() || (Date.vrFixDateString(k[keyField]).getHours() == filterDateFrom.getHours() && Date.vrFixDateString(k[keyField]).getMinutes() > filterDateFrom.getMinutes())))\r\n                                        }\r\n                                        break;\r\n                                }\r\n                            }\r\n                            break;\r\n                    }\r\n\r\n                    // Filter button\r\n                    let tooltipTypeEnum = DateModeEnum.Date;\r\n                    if (column.type == GridColumnTypeEnum.DateTime)\r\n                        tooltipTypeEnum = DateModeEnum.DateTime;\r\n                    else if (column.type == GridColumnTypeEnum.Time)\r\n                        tooltipTypeEnum = DateModeEnum.Time;\r\n\r\n                    let tooltip = Date.vrFixDateString(valueFilterSettings.dateFilterSettings!.dateFrom).vrToItalyString(tooltipTypeEnum);\r\n                    if (valueFilterSettings.dateFilterSettings!.filterTypeEnum == GridDateFilterTypeEnum.Between)\r\n                        tooltip += \" e \" + Date.vrFixDateString(valueFilterSettings.dateFilterSettings!.dateTo!).vrToItalyString(tooltipTypeEnum);\r\n\r\n                    filterButton.tooltip(type + tooltip);\r\n                    //#endregion\r\n                }\r\n                //#endregion\r\n            }\r\n            else if (valueFilterSettings.stringFilterSettings != null)\r\n            {\r\n                filteredArray = filteredArray.filter(k => k[keyField] != null && k[keyField].toLowerCase().indexOf(valueFilterSettings.stringFilterSettings!.text) !== -1);\r\n                ControlManager.get<TextBox>(this._elementId + \"_StringFilter_\" + keyField).value(valueFilterSettings.stringFilterSettings!.text);\r\n            }\r\n            else if (valueFilterSettings.checkboxFilterSettings != null)\r\n            {\r\n                filteredArray = filteredArray.filter(k => k[keyField] === valueFilterSettings.checkboxFilterSettings!.value);\r\n\r\n                //#region Filter checkbox\r\n                let checkboxJq = puma(\"#\" + this._elementId + \"_CheckboxFilter_\" + keyField);\r\n                checkboxJq.removeClass(\"indeterminateVrCheckbox\");\r\n\r\n                let checkbox = checkboxJq[0] as HTMLInputElement;\r\n                checkbox.checked = valueFilterSettings.checkboxFilterSettings!.value;\r\n                //#endregion\r\n            }\r\n        });\r\n\r\n        this.pageSelected(1, false);\r\n\r\n        if (applyFilters)\r\n        {\r\n            this._dataSource = JSON.parse(JSON.stringify(filteredArray));\r\n            if (options.groupBy != null)\r\n                this.sortingGroupFields(this.dataSource());\r\n\r\n            this.setDataSource(this._dataSource!);\r\n        }\r\n    }\r\n    //#endregion\r\n\r\n    //#region Resizing\r\n    private resizable()\r\n    {\r\n        let options = this.getOptions();\r\n        let headerTable = puma(this._divHeader).find(\"table\")[0];\r\n        let tableHeight = headerTable.offsetHeight;\r\n\r\n        let thList = Array.from<HTMLElement>(puma(headerTable).find(\"th\"));\r\n        if (options.lockable)\r\n            thList.vrPushRange(Array.from<HTMLElement>(puma(this._divHeaderLocked).find(\"table\").find(\"th\")));\r\n\r\n        for (let th of thList)\r\n        {\r\n            let divResizable = document.createElement(\"div\");\r\n            divResizable.style.cssText += \"position: absolute; top: 0px; right: 0px; width: 5px; cursor: col-resize; user-select: none; height: \" + tableHeight + \"px;\";\r\n            th.appendChild(divResizable);\r\n            th.style.position = \"relative\";\r\n            this.setResizingEvents(divResizable);\r\n        }\r\n    }\r\n\r\n    private setResizingEvents(divResizable: HTMLDivElement)\r\n    {\r\n        let pageX: number | null = null;\r\n        let currentColumn: HTMLElement | null = null;\r\n        let currentColumnWidth: number | null = null;\r\n        let timeoutRecalculateWidthWhileMoving: number = 0;\r\n\r\n        //#region Div events\r\n        puma(divResizable).on(\"mousedown\", (e: any) =>\r\n        {\r\n            this._isResizing = true;\r\n            currentColumn = e.target.parentElement;\r\n            pageX = e.pageX;\r\n\r\n            //#region Padding\r\n            let padding = 0;\r\n            if (puma(currentColumn!).css(\"box-sizing\") == \"border-box\")\r\n                padding = 0;\r\n            else\r\n            {\r\n                let padLeft = puma(currentColumn!).css(\"padding-left\");\r\n                let padRight = puma(currentColumn!).css(\"padding-right\");\r\n                padding = (padLeft.getNumericPart() + padRight.getNumericPart());\r\n            }\r\n            //#endregion\r\n\r\n            currentColumnWidth = currentColumn!.offsetWidth - padding;\r\n        });\r\n\r\n        puma(divResizable).on(\"mouseover\", (e: any) => (e.target as HTMLElement).style.borderRight = \"2px solid #0000ff\");\r\n        puma(divResizable).on(\"mouseout\", (e: any) => (e.target as HTMLElement).style.borderRight = \"\");\r\n        //#endregion\r\n\r\n        //#region Document events\r\n        puma(this.container()).on(\"mousemove\", (e: any) =>\r\n        {\r\n            if (currentColumn != null && !this._isDragging)\r\n            {\r\n                let options = this.getOptions();\r\n                let field = puma(puma(this._divHeader).find(\"th\")[puma(currentColumn).index()]).attr(\"value\");\r\n                let isColumnLocked = (currentColumn.getAttribute(\"locked\") != null);\r\n                if (isColumnLocked)\r\n                    field = puma(puma(this._divHeaderLocked).find(\"th\")[puma(currentColumn).index()]).attr(\"value\");\r\n\r\n                let index = puma(currentColumn!).index();\r\n\r\n                let column = this.column(field);\r\n                if (isColumnLocked)\r\n                {\r\n                    for (let headerColumn of Array.from(puma(this._divHeaderLocked).find(\"th[fitSpace='true']\")))\r\n                        puma(headerColumn).css({ \"width\": puma(headerColumn).width() + \"px\" });\r\n\r\n                    for (let filterColumn of Array.from(puma(this._divFiltersLocked).find(\"td[fitSpace='true']\")))\r\n                        puma(filterColumn).css({ \"width\": puma(filterColumn).width() + \"px\" });\r\n\r\n                    for (let totalColumn of Array.from(puma(this._divTotalsLocked).find(\"td[fitSpace='true']\")))\r\n                        puma(totalColumn).css({ \"width\": puma(totalColumn).width() + \"px\" });\r\n                }\r\n                else\r\n                {\r\n                    for (let headerColumn of Array.from(puma(this._divHeader).find(\"th[fitSpace='true']\")))\r\n                        puma(headerColumn).css({ \"width\": puma(headerColumn).width() + \"px\" });\r\n\r\n                    for (let filterColumn of Array.from(puma(this._divFilters).find(\"td[fitSpace='true']\")))\r\n                        puma(filterColumn).css({ \"width\": puma(filterColumn).width() + \"px\" });\r\n\r\n                    for (let totalColumn of Array.from(puma(this._divTotals).find(\"td[fitSpace='true']\")))\r\n                        puma(totalColumn).css({ \"width\": puma(totalColumn).width() + \"px\" });\r\n                }\r\n\r\n                let diffX = e.pageX - pageX!;\r\n                currentColumn.style.width = (currentColumnWidth! + diffX) + \"px\";\r\n                column.width = (currentColumnWidth! + diffX);\r\n\r\n                if (options.filterable)\r\n                {\r\n                    if (isColumnLocked)\r\n                    {\r\n                        if (puma(this._divFiltersLocked).find(\"td\")[index] != null)\r\n                            puma(this._divFiltersLocked).find(\"td\")[index].style.width = (currentColumnWidth! + diffX) + \"px\";\r\n                    }\r\n                    else\r\n                    {\r\n                        if (puma(this._divFilters).find(\"td\")[index] != null)\r\n                            puma(this._divFilters).find(\"td\")[index].style.width = (currentColumnWidth! + diffX) + \"px\";\r\n                    }\r\n                }\r\n\r\n                if (this._showTotals)\r\n                {\r\n                    if (isColumnLocked)\r\n                    {\r\n                        if (puma(this._divTotalsLocked).find(\"td\")[index] != null)\r\n                            puma(this._divTotalsLocked).find(\"td\")[index].style.width = (currentColumnWidth! + diffX) + \"px\";\r\n                    }\r\n                    else\r\n                    {\r\n                        if (puma(this._divTotals).find(\"td\")[index] != null)\r\n                            puma(this._divTotals).find(\"td\")[index].style.width = (currentColumnWidth! + diffX) + \"px\";\r\n                    }\r\n                }\r\n\r\n                let indexColumn = this._columnOptions.findIndex(k => k.field == field);\r\n                let columnPosition = this._columnOptions[indexColumn];\r\n                if (options.groupable)\r\n                {\r\n                    let col = puma(this._divBody).find(\"colgroup\").find(\"col[field='\" + field + \"'\");\r\n                    if (isColumnLocked)\r\n                    {\r\n                        col = puma(this._divBodyLocked).find(\"colgroup\").find(\"col[field='\" + field + \"'\");\r\n                        puma(this._divBodyLocked).find(\"td[value='\" + field + \"']\")[0].style.width = (currentColumnWidth! + diffX) + \"px\";\r\n                    }\r\n\r\n                    if (col[0] != null)\r\n                    {\r\n                        col[0].style.width = (currentColumnWidth! + diffX + 12) + \"px\";\r\n                        let colWidth = col[0].style.width.getNumericPart();\r\n                        columnPosition.right = columnPosition.left + colWidth;\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    if (isColumnLocked)\r\n                        puma(this._divBodyLocked).find(\"td[value='\" + field + \"']\")[0].style.width = (currentColumnWidth! + diffX) + \"px\";\r\n                    else\r\n                        puma(this._divBody).find(\"td[value='\" + field + \"']\")[0].style.width = (currentColumnWidth! + diffX) + \"px\";\r\n\r\n                    columnPosition.field = field;\r\n                    columnPosition.left = columnPosition.left;\r\n                    columnPosition.right = columnPosition.left + column.width;\r\n                    columnPosition.index = index;\r\n                }\r\n\r\n                this.recalculateWidth(false);\r\n                window.clearTimeout(timeoutRecalculateWidthWhileMoving);\r\n                timeoutRecalculateWidthWhileMoving = window.setTimeout(() => this.recalculateWidth(), 1000);\r\n            }\r\n        });\r\n\r\n        puma(this.container()).on(\"mouseup\", () =>\r\n        {\r\n            window.setTimeout(() => this._isResizing = false);\r\n\r\n            currentColumn = null;\r\n            pageX = null;\r\n            currentColumnWidth = null;\r\n        });\r\n        //#endregion\r\n    }\r\n    //#endregion\r\n\r\n    //#region Columns Drag&Drop\r\n    private updateColumnOptions()\r\n    {\r\n        let headerTable = puma(this._divHeader).find(\"table\")[0];\r\n        for (let th of Array.from(puma(headerTable).find(\"th\")))\r\n        {\r\n            let field = puma(th).attr(\"value\");\r\n            let index = this._columnOptions.findIndex(k => k.field == field);\r\n            let columnPosition = this._columnOptions[index];\r\n            columnPosition.field = field;\r\n            columnPosition.left = puma(th).offset().left;\r\n            columnPosition.right = puma(th).offset().left + puma(th).width();\r\n            columnPosition.index = puma(th).index();\r\n        }\r\n    }\r\n\r\n    private draggableColumns()\r\n    {\r\n        let options = this.getOptions();\r\n        let headerTable = puma(this._divHeader).find(\"table\")[0];\r\n        for (let th of Array.from<HTMLElement>(puma(headerTable).find(\"th\")))\r\n        {\r\n            this.drag(th,\r\n                {\r\n                    onDragging: (e) =>\r\n                    {\r\n                        //#region Dragging\r\n                        puma(this._divHeader).find(\"table th\").removeClass(\"grid_tdDraggedOn\");\r\n\r\n                        let draggingColumnPosition = this._columnOptions.filter(k => e.left >= k.left && e.left <= k.right)[0];\r\n                        if (draggingColumnPosition == null)\r\n                        {\r\n                            if (e.left < this._columnOptions[0].left)\r\n                                draggingColumnPosition = this._columnOptions[0];\r\n                            else if (e.left > this._columnOptions[this._columnOptions.length - 1].right)\r\n                                draggingColumnPosition = this._columnOptions[this._columnOptions.length - 1];\r\n                        }\r\n                        else if (draggingColumnPosition.index !== puma(th).index())\r\n                        {\r\n                            puma(th).addClass(\"grid_dragging\");\r\n\r\n                            if (draggingColumnPosition.index < puma(th).index())\r\n                                puma(puma(this._divHeader).find(\"table th\")[draggingColumnPosition.index]).addClass(\"grid_tdDraggedOn\");\r\n                            else\r\n                                puma(puma(this._divHeader).find(\"table th\")[draggingColumnPosition.index + 1]).addClass(\"grid_tdDraggedOn\");\r\n                        }\r\n                        //#endregion\r\n                    },\r\n                    onDragged: (e) =>\r\n                    {\r\n                        //#region Dragged\r\n                        puma(this._divHeader).find(\"table th\").removeClass(\"grid_tdDraggedOn\");\r\n                        puma(th).removeClass(\"grid_dragging\");\r\n                        puma(th)[0].style.cssText += \"top: 0px; left: 0px;\";\r\n\r\n                        let toDragColumnPosition = this._columnOptions.filter(k => e.left >= k.left && e.left <= k.right)[0];\r\n                        if (toDragColumnPosition == null)\r\n                        {\r\n                            if (e.left < this._columnOptions[0].left)\r\n                                toDragColumnPosition = this._columnOptions[0];\r\n                            else if (e.left > this._columnOptions[this._columnOptions.length - 1].right)\r\n                                toDragColumnPosition = this._columnOptions[this._columnOptions.length - 1];\r\n                        }\r\n                        else\r\n                        {\r\n                            let columnIndex = puma(th).index();\r\n                            let field = puma(th).attr(\"value\");\r\n\r\n                            //#region Swap column\r\n                            if (toDragColumnPosition.index > columnIndex)\r\n                                puma(puma(this._divHeader).find(\"table th\")[toDragColumnPosition.index]).vrAfterPuma(puma(this._divHeader).find(\"table th\")[columnIndex]);\r\n                            else\r\n                                puma(puma(this._divHeader).find(\"table th\")[toDragColumnPosition.index]).vrBeforePuma(puma(this._divHeader).find(\"table th\")[columnIndex]);\r\n\r\n                            if (options.filterable)\r\n                            {\r\n                                if (toDragColumnPosition.index > columnIndex)\r\n                                    puma(puma(this._divFilters).find(\"table td\")[toDragColumnPosition.index]).vrAfterPuma(puma(this._divFilters).find(\"table td\")[columnIndex]);\r\n                                else\r\n                                    puma(puma(this._divFilters).find(\"table td\")[toDragColumnPosition.index]).vrBeforePuma(puma(this._divFilters).find(\"table td\")[columnIndex]);\r\n                            }\r\n\r\n                            if (this._showTotals)\r\n                            {\r\n                                if (toDragColumnPosition.index > columnIndex)\r\n                                    puma(puma(this._divTotals).find(\"table td\")[toDragColumnPosition.index]).vrAfterPuma(puma(this._divTotals).find(\"table td\")[columnIndex]);\r\n                                else\r\n                                    puma(puma(this._divTotals).find(\"table td\")[toDragColumnPosition.index]).vrBeforePuma(puma(this._divTotals).find(\"table td\")[columnIndex]);\r\n                            }\r\n\r\n                            for (let row of Array.from(puma(this._divBody).find(\"table tr\")))\r\n                            {\r\n                                let field = puma(th).attr(\"value\");\r\n                                let tdJq = puma(row).find(\"td[value='\" + field + \"']\");\r\n                                let tdJqToDrag = puma(row).find(\"td[value='\" + toDragColumnPosition.field + \"']\");\r\n                                if (toDragColumnPosition.index > columnIndex)\r\n                                    tdJqToDrag.vrAfterPuma(tdJq);\r\n                                else\r\n                                    tdJqToDrag.vrBeforePuma(tdJq);\r\n                            }\r\n\r\n                            if (options.groupable)\r\n                            {\r\n                                if (toDragColumnPosition.index > columnIndex)\r\n                                    puma(this._divBody).find(\"colgroup\").find(\"col[field='\" + toDragColumnPosition.field + \"']\").vrAfterPuma(puma(this._divBody).find(\"colgroup\").find(\"col[field='\" + field + \"'\"));\r\n                                else\r\n                                    puma(this._divBody).find(\"colgroup\").find(\"col[field='\" + toDragColumnPosition.field + \"']\").vrBeforePuma(puma(this._divBody).find(\"colgroup\").find(\"col[field='\" + field + \"'\"));\r\n                            }\r\n                            //#endregion\r\n\r\n                            this.updateColumnOptions();\r\n\r\n                            //#region Update options.columns\r\n                            let column = options.columns!.filter(k => k.field == field)[0];\r\n                            let fieldToDrag = toDragColumnPosition.field;\r\n                            let columnToDrag = options.columns!.filter(k => k.field == fieldToDrag)[0];\r\n                            let indexToDrag = options.columns!.indexOf(columnToDrag);\r\n\r\n                            let fromIndex = options.columns!.indexOf(column);\r\n                            let tempColumn = options.columns![fromIndex];\r\n                            options.columns!.splice(fromIndex, 1);\r\n                            options.columns!.splice(indexToDrag, 0, tempColumn);\r\n                            //#endregion\r\n                        }\r\n                        //#endregion\r\n                    }\r\n                });\r\n        }\r\n    }\r\n\r\n    //#region Drag column support\r\n    drag(element: HTMLElement | JQuery | string, dragEvent?: DragSupportEvent)\r\n    {\r\n        let targetStartingXPosition: number | null = null;\r\n        puma(element).mousedown((emd: JQuery.MouseDownEvent) =>\r\n        {\r\n            if (this._isResizing === true)\r\n                return;\r\n\r\n            let startingXPosition = emd.clientX;\r\n            let startingYPosition = emd.clientY;\r\n\r\n            let target = puma(emd.currentTarget);\r\n            targetStartingXPosition = target.offset().left;\r\n            let targetStartingYPosition = target.offset().top;\r\n\r\n            let moved = false;\r\n            let tttt = window.setTimeout(() => targetStartingXPosition = null, 100);\r\n\r\n            //#region Moving\r\n            let that = this;\r\n            function mouseMoveDrag(emm: JQuery.MouseMoveEvent)\r\n            {\r\n                clearTimeout(tttt);\r\n                if (targetStartingXPosition == null || that._isResizing === true)\r\n                    return;\r\n\r\n                let actualXPosition = emm.clientX;\r\n                let actualYPosition = emm.clientY;\r\n                let xDiff = startingXPosition - actualXPosition;\r\n                let yDiff = startingYPosition - actualYPosition;\r\n\r\n                if (xDiff >= -50 && xDiff <= 50)\r\n                    return;\r\n\r\n                if (!(emm.clientX == startingXPosition && emm.clientY == startingYPosition))\r\n                {\r\n                    //#region Change position\r\n                    let leftPosition = (emm.clientX - (puma(target[0]).width() / 2));\r\n                    let topPosition = targetStartingYPosition;\r\n                    target.offset({ top: topPosition, left: leftPosition });\r\n                    //#endregion\r\n\r\n                    //#region Dragging event\r\n                    if (dragEvent!.onDragging != null)\r\n                    {\r\n                        let dragEveryEvent = new DragEveryEvent();\r\n                        dragEveryEvent.left = target.position().left;\r\n                        dragEveryEvent.top = target.position().top;\r\n                        dragEveryEvent.element = puma(element)[0];\r\n                        dragEvent!.onDragging(dragEveryEvent);\r\n                    }\r\n                    //#endregion\r\n                }\r\n\r\n                //#region Drag direction\r\n                if (Math.abs(xDiff) > Math.abs(yDiff))\r\n                {\r\n                    if (dragEvent == null && xDiff != 0)\r\n                        return;\r\n\r\n                    moved = true;\r\n                    that._isDragging = true;\r\n                }\r\n                else if (Math.abs(xDiff) < Math.abs(yDiff))\r\n                {\r\n                    if (dragEvent == null && xDiff != 0)\r\n                        return;\r\n\r\n                    moved = true;\r\n                    that._isDragging = true;\r\n                }\r\n                //#endregion\r\n            };\r\n            puma(this.container()).on(\"mousemove\", mouseMoveDrag);\r\n            //#endregion\r\n\r\n            //#region Stop moving\r\n            puma(this.container()).on(\"mouseup\", function mouseUpDrag(e: any)\r\n            {\r\n                puma(that.container()).off(\"mouseup\", mouseUpDrag);\r\n                puma(that.container()).off(\"mousemove\", mouseMoveDrag);\r\n                that._isDragging = false;\r\n\r\n                if (targetStartingXPosition == null || that._isResizing === true)\r\n                {\r\n                    targetStartingXPosition = null;\r\n                    return;\r\n                }\r\n\r\n                //#region Events\r\n                if (moved && dragEvent!.onDragged != null)\r\n                {\r\n                    let dragEveryEvent = new DragEveryEvent();\r\n                    dragEveryEvent.left = target.position().left;\r\n                    dragEveryEvent.top = target.position().top;\r\n                    dragEveryEvent.element = puma(element)[0];\r\n                    dragEvent!.onDragged(dragEveryEvent);\r\n                }\r\n                //#endregion\r\n\r\n                targetStartingXPosition = null;\r\n            });\r\n            //#endregion\r\n        });\r\n    }\r\n    //#endregion\r\n\r\n    //#endregion\r\n\r\n    //#region Utility\r\n    createTotalsFunction()\r\n    {\r\n        function calculateTotals(e: any)\r\n        {\r\n            let response: any[] = [];\r\n\r\n            //#region Utility\r\n            Array.prototype.vrSum = function (callbackfn?: (value: any, index: number, array: any[]) => any)\r\n            {\r\n                if (Array.isArray(this))\r\n                {\r\n                    if (callbackfn == null)\r\n                        return this.reduce((ty, u) => ty + u, 0);\r\n                    else\r\n                    {\r\n                        let property = callbackfn.toString().split(\"=>\")[1];\r\n                        let sum: number = 0;\r\n                        this.forEach(k => sum += eval(property));\r\n                        return sum;\r\n                    }\r\n                }\r\n\r\n                return 0;\r\n            }\r\n\r\n            Array.prototype.vrAvg = function (callbackfn?: (value: any, index: number, array: any[]) => any, countZeroInAverage?: boolean)\r\n            {\r\n                if (Array.isArray(this))\r\n                {\r\n                    let length = this.length;\r\n                    if (countZeroInAverage === false)\r\n                        length = this.length - this.filter(k => k == 0).length;\r\n\r\n                    if (length == 0)\r\n                        return 0;\r\n\r\n                    if (callbackfn == null)\r\n                        return this.vrSum() / length;\r\n                    else\r\n                    {\r\n                        let sum = this.vrSum(callbackfn);\r\n                        return sum / length;\r\n                    }\r\n                }\r\n\r\n                return 0;\r\n            }\r\n\r\n            Array.prototype.vrMax = function (callbackfn?: (value: any, index: number, array: any[]) => any)\r\n            {\r\n                if (Array.isArray(this))\r\n                {\r\n                    if (callbackfn != null)\r\n                    {\r\n                        let property = callbackfn.toString().split(\".\")[1];\r\n                        return this.reduce((oa, u) => Math.max(oa, u[property]), 0);\r\n                    }\r\n                    else\r\n                        return Math.max.apply(null, this);\r\n                }\r\n\r\n                return 0;\r\n            };\r\n\r\n            Array.prototype.vrMin = function (callbackfn?: (value: any, index: number, array: any[]) => any)\r\n            {\r\n                if (Array.isArray(this))\r\n                {\r\n                    if (callbackfn != null)\r\n                    {\r\n                        let property = callbackfn.toString().split(\".\")[1];\r\n                        return this.reduce((oa, u) => Math.min(oa, u[property]), Number.MAX_VALUE);\r\n                    }\r\n                    else\r\n                        return Math.min.apply(null, this);\r\n                }\r\n\r\n                return 0;\r\n            };\r\n            //#endregion\r\n\r\n            //#region Get totals\r\n            let request = e.data as WorkerTotalsRequest;\r\n            if (request.isGroup)\r\n            {\r\n                if (request.groupItems == null || request.groupItems.length == 0 || request.groupItems[0].dataItems[0] == null)\r\n                {\r\n                    (self as any).postMessage(response);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            function getTotals(dataItems: any[])\r\n            {\r\n                let totals = [];\r\n                for (let column of request.columnOptions)\r\n                {\r\n                    let aggregateResult = 0;\r\n                    switch (column.aggregateMode)\r\n                    {\r\n                        case 1: aggregateResult = dataItems.map(k => k[column.field]).length; break;\r\n                        case 4: aggregateResult = dataItems.map(k => k[column.field]).vrSum(); break;\r\n                        case 0:\r\n                            {\r\n                                if (column.type == 3)\r\n                                    aggregateResult = dataItems.map(k => k[column.field]).vrAvg(undefined, column.countZeroInAverage) / 100;\r\n                                else\r\n                                    aggregateResult = dataItems.map(k => k[column.field]).vrAvg(undefined, column.countZeroInAverage);\r\n                            }\r\n                            break;\r\n                        case 3:\r\n                            {\r\n                                if (column.type != null && (column.type == 5 || column.type == 6 || column.type == 7))\r\n                                    aggregateResult = dataItems.map(k => new Date(k[column.field])).vrMin();\r\n                                else\r\n                                    aggregateResult = dataItems.map(k => k[column.field]).vrMin();\r\n                            }\r\n                            break;\r\n                        case 2:\r\n                            {\r\n                                if (column.type != null && (column.type == 5 || column.type == 6 || column.type == 7))\r\n                                    aggregateResult = dataItems.map(k => new Date(k[column.field])).vrMax();\r\n                                else\r\n                                    aggregateResult = dataItems.map(k => k[column.field]).vrMax();\r\n                            }\r\n                            break;\r\n                    }\r\n\r\n                    let total: any = {};\r\n                    total.field = column.field;\r\n                    total.total = aggregateResult;\r\n                    total.decimalDigits = column.decimalDigits;\r\n                    total.roundingSettings = column.roundingSettings;\r\n                    total.type = column.type;\r\n                    totals.push(total);\r\n                }\r\n                return totals;\r\n            }\r\n\r\n            if (request.isGroup)\r\n            {\r\n                for (let group of request.groupItems)\r\n                {\r\n                    let totals = getTotals(group.dataItems);\r\n                    response.push({ totals: totals, groupValue: group.groupValue });\r\n                }\r\n            }\r\n            else\r\n            {\r\n                let totals = getTotals(request.dataItems);\r\n                response = totals;\r\n            }\r\n            //#endregion\r\n\r\n            (self as any).postMessage(response);\r\n        }\r\n\r\n        let scriptCalculateTotalsWorker = puma(\"head\").find(\"script[id='vr_workerTotals']\")[0];\r\n        if (scriptCalculateTotalsWorker == null)\r\n            puma(\"<script id='vr_workerTotals'> self.onmessage=\" + calculateTotals.toString() + \" </script>\").vrAppendToPuma(\"head\");\r\n\r\n        let workerTotalsData = new Blob([document.getElementById(\"vr_workerTotals\")!.textContent!],\r\n            {\r\n                type: \"text/javascript\"\r\n            });\r\n        this._workerTotals = new Worker(window.URL.createObjectURL(workerTotalsData));\r\n        this._workerTotalsGroup = new Worker(window.URL.createObjectURL(workerTotalsData));\r\n    }\r\n\r\n    pageSize(pageSize?: number, update = false, triggerDataBound = false)\r\n    {\r\n        if (pageSize != null)\r\n        {\r\n            let options = this.getOptions();\r\n            this._actualPageSize = pageSize;\r\n            options.pageSize = pageSize;\r\n\r\n            if (update)\r\n                this.update(triggerDataBound);\r\n\r\n            let newPageSizeItem = { text: String(pageSize), value: String(pageSize), numberValue: pageSize };\r\n            let ddlPageSize = ControlManager.get<ComboBox>(this._elementId + \"_ddlPageSize\");\r\n            if (ddlPageSize != null)\r\n            {\r\n                if (!ddlPageSize.items().vrAny(k => k.value == String(pageSize)))\r\n                    ddlPageSize.addItem(newPageSizeItem, true, false, { field: \"numberValue\" });\r\n\r\n                ddlPageSize.value(String(pageSize), false);\r\n            }\r\n        }\r\n        return this._actualPageSize;\r\n    }\r\n\r\n    pageSelected(page?: number, update = true)\r\n    {\r\n        if (page != null)\r\n        {\r\n            let options = this.getOptions();\r\n            if (options.footer !== false)\r\n                puma(\"#\" + this._divFooter.id + \" button\").removeClass(\"p-grid-pageSelected\");\r\n\r\n            let buttonSelected = ControlManager.get<Button>(this._elementId + \"_btnPage_\" + page);\r\n            if (buttonSelected != null)\r\n                puma(buttonSelected.element()).addClass(\"p-grid-pageSelected\");\r\n\r\n            //#region Event\r\n            if (options.onPageSelected != null)\r\n            {\r\n                let event = new GridPageSelectedEvent();\r\n                event.sender = this;\r\n                event.pageSelected = page;\r\n                options.onPageSelected(event);\r\n\r\n                if (event.isDefaultPrevented())\r\n                    return this._actualPageSelected;\r\n            }\r\n            //#endregion\r\n\r\n            this._actualPageSelected = page;\r\n            if (update)\r\n            {\r\n                if (options.serverBinding !== false)\r\n                {\r\n                    let pageSelected = (this._actualPageSelected == 0) ? 0 : (this._actualPageSelected - 1);\r\n                    this._serverBindingPagination.indexFrom = pageSelected * this.pageSize();\r\n                    this._serverBindingPagination.indexTo = this._serverBindingPagination.indexFrom + this.pageSize() - 1;\r\n                    window.setTimeout(() => this.rebind());\r\n                }\r\n                else\r\n                    this.update();\r\n            }\r\n            return page;\r\n        }\r\n        return this._actualPageSelected;\r\n    }\r\n\r\n    checkboxesMode(mode?: GridCheckboxModeEnum)\r\n    {\r\n        let options = this.getOptions();\r\n        if (mode != null)\r\n            options.checkboxes = mode;\r\n\r\n        return options.checkboxes;\r\n    }\r\n\r\n    focus(field?: string)\r\n    {\r\n        let options = this.getOptions();\r\n        if (field != null && options.filterable)\r\n            puma(\"#\" + this._elementId + \"_StringFilter_\" + field).focus();\r\n    }\r\n\r\n    private isRepeater()\r\n    {\r\n        return puma(this.container()).hasClass(\"vrRepeaterContainer\");\r\n    }\r\n\r\n    getOptions()\r\n    {\r\n        return (this._internalOptions != null) ? this._internalOptions : this.options<GridOptions>();\r\n    }\r\n\r\n    recalculateWidth(fixColGroup = true)\r\n    {\r\n        let options = this.getOptions();\r\n        if (puma(this._divBody).css('overflow-y') == 'scroll' || puma(this._divBody).css('overflow-y') == 'auto')\r\n        {\r\n            if (puma(this._divBody)[0].scrollHeight > puma(this._divBody)[0].clientHeight && puma(this._divBody)[0].clientHeight > 0)\r\n            {\r\n                //#region Structure\r\n                let minusWidth = 19;\r\n                if (this.thereAreLockedColumns())\r\n                    minusWidth += puma(this._divHeaderLocked).width() + 5;\r\n\r\n                puma(this._divHeader).width(\"Calc(100% - \" + minusWidth + \"px)\")\r\n                puma(this._divHeader).find(\"th[fitSpace='true']\").attr(\"width\", this._fitSpaceColumnPercentage + \"%\");\r\n\r\n                puma(this._divFilters).width(\"Calc(100% - \" + minusWidth + \"px)\")\r\n                puma(this._divFilters).find(\"td[fitSpace='true']\").attr(\"width\", this._fitSpaceColumnPercentage + \"%\");\r\n\r\n                if (this.thereAreLockedColumns())\r\n                {\r\n                    puma(this._divBody).width(\"Calc(100% - \" + (puma(this._divHeaderLocked).width() + 5) + \"px)\")\r\n                    puma(this._divBodyLocked).width(puma(this._divHeaderLocked).width())\r\n                }\r\n                else\r\n                    puma(this._divBody).width(\"Calc(100% - 2px)\");\r\n\r\n                puma(this._divTotals).width(\"Calc(100% - \" + minusWidth + \"px)\")\r\n                puma(this._divTotals).find(\"td[fitSpace='true']\").attr(\"width\", this._fitSpaceColumnPercentage + \"%\");\r\n                //#endregion\r\n\r\n                //#region Fit space\r\n                if (puma(this._divHeader).is(\":visible\"))\r\n                {\r\n                    window.setTimeout(() => this._spanFitHeaderSpace.style.cssText += \"top: \" + (puma(this._divHeader).position().top) + \"px; left: \" + (puma(this._divHeader).position().left + puma(this._divHeader).width() + 1) + \"px\", 100);\r\n                    puma(this._spanFitHeaderSpace).show();\r\n                }\r\n\r\n                if (options.filterable)\r\n                {\r\n                    window.setTimeout(() => this._spanFitFilterSpace.style.cssText += \"top: \" + (puma(this._divFilters).position().top - 1) + \"px; left: \" + (puma(this._divFilters).position().left + puma(this._divFilters).width() + 1) + \"px\", 100);\r\n                    puma(this._spanFitFilterSpace).show();\r\n                }\r\n                else\r\n                    puma(this._spanFitFilterSpace).hide();\r\n\r\n                if (this._showTotals && this.getAllItems().length > 0)\r\n                {\r\n                    window.setTimeout(() => this._spanFitTotalsSpace.style.cssText += \"top: \" + (puma(this._divTotals).position().top - 1) + \"px; left: \" + (puma(this._divTotals).position().left + puma(this._divTotals).width() + 1) + \"px\", 100);\r\n                    puma(this._spanFitTotalsSpace).show();\r\n                }\r\n                else\r\n                    puma(this._spanFitTotalsSpace).hide();\r\n                //#endregion\r\n            }\r\n            else\r\n            {\r\n                let minusWidth = 2;\r\n                if (this.thereAreLockedColumns())\r\n                    minusWidth += puma(this._divHeaderLocked).width() + 5;\r\n\r\n                //#region Structure\r\n                puma(this._divHeader).width(\"Calc(100% - \" + minusWidth + \"px)\")\r\n                puma(this._divHeader).find(\"th[fitSpace='true']\").attr(\"width\", this._fitSpaceColumnPercentage + \"%\");\r\n\r\n                puma(this._divFilters).width(\"Calc(100% - \" + minusWidth + \"px)\")\r\n                puma(this._divFilters).find(\"td[fitSpace='true']\").attr(\"width\", this._fitSpaceColumnPercentage + \"%\");\r\n\r\n                if (this.thereAreLockedColumns())\r\n                {\r\n                    puma(this._divBody).width(\"Calc(100% - \" + (puma(this._divHeaderLocked).width() + 5) + \"px)\")\r\n                    puma(this._divBodyLocked).width(puma(this._divHeaderLocked).width())\r\n                }\r\n                else\r\n                    puma(this._divBody).width(\"Calc(100% - 2px)\");\r\n\r\n                puma(this._divTotals).width(\"Calc(100% - \" + minusWidth + \"px)\")\r\n                puma(this._divTotals).find(\"td[fitSpace='true']\").attr(\"width\", this._fitSpaceColumnPercentage + \"%\");\r\n                //#endregion\r\n\r\n                //#region Fit space\r\n                puma(this._spanFitHeaderSpace).hide();\r\n                puma(this._spanFitFilterSpace).hide();\r\n                puma(this._spanFitTotalsSpace).hide();\r\n                //#endregion\r\n            }\r\n        }\r\n        else\r\n        {\r\n            puma(this._spanFitHeaderSpace).hide();\r\n            puma(this._spanFitFilterSpace).hide();\r\n            puma(this._spanFitTotalsSpace).hide();\r\n        }\r\n\r\n        if (fixColGroup && (options.groupable! || options.groupBy != null))\r\n        {\r\n            let i = 0;\r\n            puma(this._divBody).find(\"table colgroup\").remove();\r\n            let colGroup = puma(\"<colgroup></colgroup>\").prependTo(puma(this._divBody).find(\">table\"));\r\n\r\n            puma(this._divHeaderContainer).show();\r\n            puma(this._divHeader).show();\r\n            for (let column of Array.from(puma(this._divHeader).find(\">table tr:first-child th\")))\r\n            {\r\n                let field = puma(column).attr(\"value\");\r\n\r\n                let display = \"\";\r\n                if (!puma(column).is(\":visible\"))\r\n                    display = \"display: none;\";\r\n                else\r\n                    i++;\r\n\r\n                let width = puma(column).outerWidth();\r\n                if (i == 1)\r\n                    width -= 1;\r\n\r\n                puma(\"<col field='\" + field + \"' style='width: \" + width + \"px; \" + display + \"' />\").vrAppendToPuma(colGroup);\r\n            }\r\n\r\n            if (options.header === false)\r\n                puma(this._divHeader).hide();\r\n\r\n            if (this.thereAreLockedColumns())\r\n            {\r\n                let i = 0;\r\n                puma(this._divBodyLocked).find(\"table colgroup\").remove();\r\n                let colGroup = puma(\"<colgroup></colgroup>\").prependTo(puma(this._divBodyLocked).find(\">table\"));\r\n\r\n                puma(this._divHeaderLocked).show();\r\n                for (let column of Array.from(puma(this._divHeaderLocked).find(\">table tr:first-child th\")))\r\n                {\r\n                    let field = puma(column).attr(\"value\");\r\n\r\n                    let display = \"\";\r\n                    if (!puma(column).is(\":visible\"))\r\n                        display = \"display: none;\";\r\n                    else\r\n                        i++;\r\n\r\n                    let width = puma(column).width();\r\n                    if (i == 1)\r\n                        width -= 1;\r\n\r\n                    puma(\"<col field='\" + field + \"' style='width: \" + width + \"px; \" + display + \"' />\").vrAppendToPuma(colGroup);\r\n                }\r\n\r\n                if (options.header === false)\r\n                    puma(this._divHeaderLocked).hide();\r\n            }\r\n\r\n            if (options.header === false)\r\n                puma(this._divHeaderContainer).hide();\r\n        }\r\n    }\r\n\r\n    height(height?: number | string)\r\n    {\r\n        if (height != null)\r\n        {\r\n            if (typeof (height) == \"number\" && height > 0)\r\n            {\r\n                puma(this._divBody).height(height);\r\n                puma(\"#\" + this.element().id + \"_grid_body_container\").height(height);\r\n\r\n                let options = this.getOptions();\r\n                if (options.lockable && this._divBody != null)\r\n                {\r\n                    if (this._divBody.scrollWidth > this._divBody.clientWidth && this._divBody.clientWidth > 0)\r\n                        puma(this._divBodyLocked).height(Number(height) - 17);\r\n                    else\r\n                        puma(this._divBodyLocked).height(height);\r\n                }\r\n            }\r\n        }\r\n        return puma(this._divBody).height();\r\n    }\r\n\r\n    recalculateHeight(afterFilter = false)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.height! < 0 || options.height == GridHeightModeEnum.FitScreen)\r\n        {\r\n            let headerHeight = (puma(this._divHeader).is(\":visible\")) ? 34 : 0;\r\n            let filtersHeight = (options.filterable) ? 28 : 0;\r\n            let toolbarHeight = (options.toolbar != null) ? 34 : 0;\r\n            let totalsheight = (this._showTotals) ? 25 : 0;\r\n            let footerHeight = (options.footer !== false) ? 34 : 0;\r\n            let diffHeaderElement = 4;\r\n            let diffHeight = headerHeight + filtersHeight + toolbarHeight + totalsheight + footerHeight + diffHeaderElement;\r\n\r\n            let containerOffset = puma(\"#\" + this._elementId + \"_divContainer\").offset();\r\n            let containerOffsetTop = (containerOffset != null) ? containerOffset.top : 0;\r\n            let height = document.body.offsetHeight - containerOffsetTop - diffHeight + \"px\";\r\n            puma(this._divBody).height(height);\r\n            puma(\"#\" + this.element().id + \"_grid_body_container\").height(height);\r\n\r\n            if (options.lockable && this._divBody != null)\r\n            {\r\n                if (this._divBody.scrollWidth > this._divBody.clientWidth && this._divBody.clientWidth > 0)\r\n                    puma(this._divBodyLocked).height(height.vrGetNumericPart() - 17);\r\n                else\r\n                    puma(this._divBodyLocked).height(height);\r\n            }\r\n\r\n            if (this._showTotals)\r\n                this._spanFitTotalsSpace.style.cssText += \"top: \" + (puma(this._divTotals).position().top - 1) + \"px; left: \" + (puma(this._divHeader).position().left + puma(this._divHeader).width()) + \"px\";\r\n        }\r\n        else if (afterFilter && typeof (options.height) == \"number\")\r\n        {\r\n            if (puma(this._divFilters).height() > 32)\r\n                puma(this._divBody).height(options.height - 58.5);\r\n            else\r\n                puma(this._divBody).height(options.height - 31);\r\n\r\n            puma(\"#\" + this.element().id + \"_grid_body_container\").height(puma(this._divBody).height());\r\n\r\n            if (options.lockable && this._divBody != null)\r\n            {\r\n                if (this._divBody.scrollWidth > this._divBody.clientWidth && this._divBody.clientWidth > 0)\r\n                    puma(this._divBodyLocked).height(Number(puma(this._divBody).height()) - 17);\r\n                else\r\n                    puma(this._divBodyLocked).height(puma(this._divBody).height());\r\n            }\r\n        }\r\n    }\r\n\r\n    private adjustTrHeight()\r\n    {\r\n        let options = this.getOptions();\r\n        if (this.thereAreLockedColumns())\r\n        {\r\n            let trLockedList = Array.from<HTMLElement>(puma(this._elementLocked).find(\">tbody tr\"));\r\n            let trList = Array.from<HTMLElement>(puma(this.element()).find(\">tbody tr\"));\r\n            for (let i = 0; i < trLockedList.length; i++)\r\n            {\r\n                let trLocked = trLockedList[i];\r\n                let tr = trList[i];\r\n                let heightToSet = (puma(trLocked).height() > puma(tr).height()) ? puma(trLocked).height() : puma(tr).height();\r\n                if (heightToSet < options.rowHeight!)\r\n                    heightToSet = options.rowHeight!;\r\n\r\n                puma(trLocked).height(heightToSet);\r\n                puma(tr).height(heightToSet);\r\n            }\r\n        }\r\n    }\r\n\r\n    //#region WebApi\r\n    private doWebApiCall(request: GridWebApiRequest, requestType: GridRequestTypeEnum, promiseCallback?: Function)\r\n    {\r\n        let that = this;\r\n        let options = this.getOptions();\r\n\r\n        let json: any = {};\r\n        json.AuthKey = request.authKey;\r\n\r\n        //#region Type\r\n        if (requestType == GridRequestTypeEnum.Delete)\r\n        {\r\n            if ((request as GridToolbarDeleteRequest).deletedValuesPropertyName == null)\r\n                (request as GridToolbarDeleteRequest).deletedValuesPropertyName = \"itemValues\";\r\n\r\n            if ((request as GridToolbarDeleteRequest).valuePropertyName == null)\r\n                (request as GridToolbarDeleteRequest).valuePropertyName = options.dataSourceFieldId!;\r\n\r\n            json[(request as GridToolbarDeleteRequest).deletedValuesPropertyName!] = this.getDeletedItemValues((request as GridToolbarDeleteRequest).valuePropertyName);\r\n        }\r\n        else if (requestType == GridRequestTypeEnum.Rebind || requestType == GridRequestTypeEnum.Excel)\r\n        {\r\n            if (requestType == GridRequestTypeEnum.Rebind)\r\n            {\r\n                if ((request as GridRebindRequest).itemsPropertyName == null)\r\n                    (request as GridRebindRequest).itemsPropertyName = \"items\";\r\n            }\r\n\r\n            //#region Server binding\r\n            if (options.serverBinding !== false)\r\n            {\r\n                //#region Fix date for server\r\n                for (const [key, value] of this._dictionaryFilterConditions.entries())\r\n                {\r\n                    if (value.dateFilterSettings != null)\r\n                    {\r\n                        value.dateFilterSettings.dateFrom = Date.vrConvertDateFromClient(value.dateFilterSettings.dateFrom);\r\n                        if (value.dateFilterSettings.dateTo != null)\r\n                            value.dateFilterSettings.dateTo = Date.vrConvertDateFromClient(value.dateFilterSettings.dateTo);\r\n                    }\r\n                }\r\n                //#endregion\r\n\r\n                let gridServerBindingSettings = new VrGridServerBindingSettings();\r\n                gridServerBindingSettings.indexFrom = this._serverBindingPagination.indexFrom;\r\n                gridServerBindingSettings.indexTo = this._serverBindingPagination.indexTo;\r\n                gridServerBindingSettings.columns = options.columns;\r\n                gridServerBindingSettings.sortingInfo = this._actualSortingInfo;\r\n                gridServerBindingSettings.filters = Dictionary.fromMap(this._dictionaryFilterConditions);\r\n                gridServerBindingSettings.groupByFields = (options.groupBy == null) ? [] : ((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]).map(k => k.field);\r\n                gridServerBindingSettings.excel = requestType == GridRequestTypeEnum.Excel;\r\n\r\n                if ((request as GridExcelRequest).fileName != null)\r\n                    gridServerBindingSettings.excelFileName = (request as GridExcelRequest).fileName;\r\n\r\n                json.serverBindingSettings = gridServerBindingSettings;\r\n            }\r\n            //#endregion\r\n        }\r\n        else if (requestType == GridRequestTypeEnum.Save)\r\n        {\r\n            for (let property in this._actualEditedItem)\r\n            {\r\n                let propertyValue = this._actualEditedItem[property];\r\n                if (Object.prototype.toString.call(propertyValue) === '[object Date]')\r\n                    this._actualEditedItem[property] = Date.vrConvertDateFromClient(propertyValue);\r\n            }\r\n\r\n            if ((request as GridSaveRequest).itemPropertyName == null)\r\n                (request as GridSaveRequest).itemPropertyName = \"item\";\r\n            json[(request as GridSaveRequest).itemPropertyName!] = this._actualEditedItem;\r\n        }\r\n        //#endregion\r\n\r\n        //#region Method\r\n        if (request.method != null)\r\n        {\r\n            if (!request.method!.startsWith(\"/api/\"))\r\n            {\r\n                if (request.method!.startsWith(\"/\"))\r\n                    request.method!.substring(1);\r\n\r\n                request.method = \"/api/\" + request.method;\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#region Paramaters\r\n        if (request.otherParameters != null)\r\n        {\r\n            let jsonParameters = Object.getOwnPropertyNames(request.otherParameters);\r\n            for (let param of jsonParameters)\r\n                json[param] = request.otherParameters[param];\r\n        }\r\n\r\n        if (request.parameters != null)\r\n        {\r\n            let parameters = request.parameters();\r\n            let jsonParameters = Object.getOwnPropertyNames(parameters);\r\n            for (let param of jsonParameters)\r\n                json[param] = parameters[param];\r\n        }\r\n        //#endregion\r\n\r\n        let jsonS = JSON.stringify(json);\r\n\r\n        //#region Loader\r\n        let loadingElement = request.loadingElement;\r\n        if (loadingElement == null)\r\n            loadingElement = true;\r\n\r\n        if (typeof (loadingElement) == \"boolean\")\r\n        {\r\n            if (loadingElement === false)\r\n                loadingElement = undefined;\r\n            else\r\n                loadingElement = this.container();\r\n        }\r\n\r\n        if (loadingElement != null)\r\n            showLoader((request as any).tempLoadingElement != null ? (request as any).tempLoadingElement : loadingElement, true, \"vrGridLoaderRebind\" + this._elementId);\r\n\r\n        (request as any).tempLoadingElement = undefined;\r\n        //#endregion\r\n\r\n        $.ajax({\r\n            type: \"POST\",\r\n            contentType: \"application/json\",\r\n            data: jsonS,\r\n            method: \"POST\",\r\n            processData: false,\r\n            dataType: \"json\",\r\n            url: request.method,\r\n            success: (response: any, textStatus: string, jqXHR: JQueryXHR) =>\r\n            {\r\n                hideLoader(\"vrGridLoaderRebind\" + this._elementId);\r\n\r\n                that._deletedItems = [];\r\n\r\n                if (response != null && (response.Success || response.success))\r\n                {\r\n                    //#region Success notification message\r\n                    let successMessage = request!.successNotificationMessage;\r\n                    successMessage = (successMessage == null) ? false : successMessage;\r\n\r\n                    if (typeof (successMessage) == \"string\")\r\n                        successMessage = successMessage;\r\n                    else if (successMessage == true)\r\n                    {\r\n                        if (requestType == GridRequestTypeEnum.Delete)\r\n                            successMessage = \"Eliminazione avvenuta correttamente\";\r\n                        else if (requestType == GridRequestTypeEnum.Save)\r\n                            successMessage = \"Salvataggio effettuato correttamente\";\r\n                    }\r\n\r\n                    if (typeof (successMessage) == \"string\")\r\n                        notify(successMessage);\r\n                    //#endregion\r\n\r\n                    //#region Rebind\r\n                    let rebindAfterSave = request!.rebindGridAfterSave;\r\n                    rebindAfterSave = (rebindAfterSave == null) ? false : rebindAfterSave;\r\n\r\n                    if (rebindAfterSave)\r\n                        that.rebind();\r\n                    else\r\n                    {\r\n                        if (requestType == GridRequestTypeEnum.Save)\r\n                            that.updateRow(that._actualEditedItem);\r\n                        else if (requestType == GridRequestTypeEnum.RebindSpecificRows)\r\n                        {\r\n                            let specificItemIdListRequested: any[] = [];\r\n                            if (request.otherParameters != null)\r\n                                specificItemIdListRequested = request.otherParameters[(request as GridRebindRequest).specificItemIdListPropertyName!];\r\n\r\n                            let specificItems: any[] = response[(request as GridRebindRequest).itemsPropertyName!];\r\n                            if (specificItems != null && specificItems.length > 0)\r\n                            {\r\n                                let itemToRemoveIdList = specificItemIdListRequested.filter(k => !specificItems.map(k => k[options.dataSourceFieldId!]).includes(k));\r\n                                let itemsToAddIdList = specificItems.filter(k => !this.originalDataSource().map(j => j[options.dataSourceFieldId!]).includes(k[options.dataSourceFieldId!])).map(k => k[options.dataSourceFieldId!]);\r\n\r\n                                for (let specificItem of specificItems)\r\n                                {\r\n                                    let specificItemId = specificItem[options.dataSourceFieldId!];\r\n                                    if (itemToRemoveIdList.includes(specificItemId) || itemsToAddIdList.includes(specificItemId))\r\n                                        continue;\r\n\r\n                                    this.updateRow(specificItem, false);\r\n                                }\r\n\r\n                                for (let itemToRemoveId of itemToRemoveIdList)\r\n                                    this.deleteRow(itemToRemoveId, false);\r\n\r\n                                for (let itemToAddId of itemsToAddIdList)\r\n                                    this.addRow(specificItems.filter(k => k[options.dataSourceFieldId!] == itemToAddId)[0], false);\r\n                            }\r\n                            else\r\n                            {\r\n                                for (let itemToRemoveId of specificItemIdListRequested)\r\n                                    this.deleteRow(itemToRemoveId, false);\r\n                            }\r\n\r\n                            if (request.otherParameters[\"update\"])\r\n                            {\r\n                                if (this._actualSortingInfo != null)\r\n                                    this.applySorting(false);\r\n\r\n                                if (this._dictionaryFilterConditions.size > 0)\r\n                                    this.applyFilters(false, false);\r\n\r\n                                if (options.groupBy != null)\r\n                                    this.sortingGroupFields(this.dataSource());\r\n\r\n                                this.update(true, false);\r\n                            }\r\n                        }\r\n                    }\r\n                    //#endregion\r\n\r\n                    if (request!.callbackBeforeDatasourceChange != null)\r\n                        request!.callbackBeforeDatasourceChange(response);\r\n\r\n                    //#region Set data source if rebind\r\n                    if (requestType == GridRequestTypeEnum.Rebind && response[(request as GridRebindRequest).itemsPropertyName!] != null)\r\n                    {\r\n                        if (options.serverBinding !== false)\r\n                        {\r\n                            this._responseForServerBinding = response;\r\n\r\n                            let maxLength = this._responseForServerBinding[(options.serverBinding! as GridServerBindSettings).itemCountPropertyName!];\r\n                            let pageSelected = this.pageSelected();\r\n                            let numberOfPages = Math.trunc(maxLength / Number(options.pageSize!));\r\n                            if (maxLength % Number(options.pageSize!) > 0)\r\n                                numberOfPages += 1;\r\n\r\n                            if (pageSelected > numberOfPages)\r\n                                this.pageSelected(1, false);\r\n                        }\r\n\r\n                        let clearFilters = ((request as GridRebindRequest).clearFilters == null) ? false : (request as GridRebindRequest).clearFilters;\r\n\r\n                        let newDatasource = response[(request as GridRebindRequest).itemsPropertyName!];\r\n                        if (newDatasource.length == 0)\r\n                            this.clear();\r\n                        else\r\n                            that.dataSource(newDatasource, clearFilters);\r\n                    }\r\n                    //#endregion\r\n\r\n                    //#region Excel for Server binding\r\n                    if (requestType == GridRequestTypeEnum.Excel && options.serverBinding !== false)\r\n                    {\r\n                        let downloadUrl = response[(options.serverBinding as GridServerBindSettings).excelDownloadUrlPropertyName!];\r\n                        if (downloadUrl != null && downloadUrl.length > 0)\r\n                            location.replace(downloadUrl);\r\n                    }\r\n                    //#endregion\r\n\r\n                    if (that._wndAutoWindow != null)\r\n                        that._wndAutoWindow.close();\r\n\r\n                    if (request!.callback != null)\r\n                        request!.callback(response);\r\n\r\n                    if (options.onDataSourceChanged != null)\r\n                        options.onDataSourceChanged();\r\n\r\n                    if (promiseCallback != null)\r\n                        promiseCallback();\r\n                }\r\n                else\r\n                {\r\n                    let exception = (response.Exception || response.exception);\r\n                    let exceptionCode = (exception.Code || exception.code);\r\n                    if (response != null && exceptionCode == \"403\")\r\n                    {\r\n                        location.replace(\"/Default.aspx\");\r\n                        return;\r\n                    }\r\n\r\n                    //#region Error notification message\r\n                    let errorMessage = request!.errorNotificationMessage;\r\n                    errorMessage = (errorMessage == null) ? true : errorMessage;\r\n\r\n                    if (errorMessage == true || typeof (errorMessage) == \"string\")\r\n                        notifyError((typeof (errorMessage) == \"string\") ? errorMessage! : ((response != null) ? (response.ExceptionMessage! || response.exceptionMessage) : \"Errore nel salvataggio\"));\r\n                    //#endregion\r\n\r\n                    //#region Rebind\r\n                    let rebindAfterError = request!.rebindGridAfterError;\r\n                    rebindAfterError = (rebindAfterError == null) ? false : rebindAfterError;\r\n\r\n                    if (rebindAfterError)\r\n                        that.rebind();\r\n                    //#endregion\r\n\r\n                    let closeWindowAfterError = request!.closeWindowAfterError;\r\n                    closeWindowAfterError = (closeWindowAfterError == null) ? false : closeWindowAfterError;\r\n                    if (that._wndAutoWindow != null && closeWindowAfterError)\r\n                        that._wndAutoWindow.close();\r\n\r\n                    if (request!.errorCallback != null)\r\n                        request!.errorCallback((response != null) ? (response.ExceptionMessage! || response.exceptionMessage) : \"Errore nel salvataggio\");\r\n                }\r\n            },\r\n            error: (response: JQueryXHR, textStatus: string, errorThrown: string) =>\r\n            {\r\n                hideLoader(\"vrGridLoaderRebind\" + this._elementId);\r\n\r\n                //#region Error notification message\r\n                let errorMessage = request!.errorNotificationMessage;\r\n                errorMessage = (errorMessage == null) ? true : errorMessage;\r\n\r\n                let message = \"Errore nel salvataggio\";\r\n                if (response.responseJSON != null)\r\n                    message = (response.responseJSON.errorMessage != null) ? response.responseJSON.errorMessage : ((response.responseJSON.Message || response.responseJSON.message) + \"<br />\" + (response.responseJSON.ExceptionMessage || response.responseJSON.exceptionMessage));\r\n                else if (response.responseText != null && response.responseText != \"\")\r\n                    message = response.responseText;\r\n                else if (response.statusText != null && response.statusText != \"\")\r\n                    message = response.statusText;\r\n                else\r\n                    message = \"Si è verificato un problema\";\r\n\r\n                if (response.status == 401)\r\n                    message = \"Auth key errata\";\r\n                else if (response.status == 404)\r\n                    message = \"Web Api non trovata\";\r\n                else if (response.status == 403)\r\n                {\r\n                    location.replace(\"/Default.aspx\");\r\n                    return;\r\n                }\r\n\r\n                let finalMessage = \"Errore nel salvataggio\";\r\n                if (errorMessage == true || typeof (errorMessage) == \"string\")\r\n                {\r\n                    finalMessage = (errorMessage == true) ? message : errorMessage;\r\n                    notifyError(finalMessage);\r\n                }\r\n                //#endregion\r\n\r\n                //#region Rebind\r\n                let rebindAfterError = request!.rebindGridAfterError;\r\n                rebindAfterError = (rebindAfterError == null) ? false : rebindAfterError;\r\n\r\n                if (rebindAfterError)\r\n                    that.rebind();\r\n                //#endregion\r\n\r\n                let closeWindowAfterError = request!.closeWindowAfterError;\r\n                closeWindowAfterError = (closeWindowAfterError == null) ? false : closeWindowAfterError;\r\n                if (that._wndAutoWindow != null && closeWindowAfterError)\r\n                    that._wndAutoWindow.close();\r\n\r\n                if (request!.errorCallback != null)\r\n                    request!.errorCallback(finalMessage);\r\n            }\r\n        });\r\n    }\r\n    //#endregion\r\n\r\n    //#endregion    \r\n    enable(state?: boolean | string)\r\n    {\r\n        if (state == null)\r\n            state = true;\r\n\r\n        puma(\"#\" + puma(this.element()).attr(\"id\") + \"_divContainer\").find(\".grid_divTableDisabled\").remove();\r\n        if (state !== true)\r\n        {\r\n            let options = this.getOptions();\r\n            let message = (typeof (state) == \"string\") ? (\"<span>\" + state + \"</span>\") : \"\";\r\n            if (message == \"\" && typeof (options.enable) == \"string\")\r\n                message = \"<span>\" + options.enable + \"</span>\";\r\n\r\n            puma(\"<div class='grid_divTableDisabled'>\" + message + \"</div>\").vrAppendToPuma(\"#\" + puma(this.element()).attr(\"id\") + \"_divContainer\");\r\n        }\r\n    }\r\n    //#endregion\r\n\r\n    //#region Toolbar\r\n    private toolbarCustomLogic(toolbarItem: GridToolbarItem, toolbarClickEvent: GridToolbarClickEvent)\r\n    {\r\n        if (toolbarItem.onBeforeClick != null)\r\n        {\r\n            toolbarItem.onBeforeClick(toolbarClickEvent);\r\n            if (toolbarClickEvent.isDefaultPrevented)\r\n                return;\r\n        }\r\n\r\n        switch (toolbarItem.type)\r\n        {\r\n            case GridToolbarItemType.Add:\r\n                {\r\n                    if (toolbarItem.onClick == null)\r\n                        this.openAutoWindow();\r\n                }\r\n                break;\r\n            case GridToolbarItemType.Delete:\r\n                {\r\n                    let options = this.getOptions();\r\n                    let checkedItems = this.getCheckedItems();\r\n                    this._deletedItems.vrPushRange(checkedItems);\r\n                    toolbarClickEvent.deletedItems = this._deletedItems;\r\n\r\n                    this.deleteRows(checkedItems.map(k => k[options.dataSourceFieldId!]));\r\n                    this.clearSelection();\r\n\r\n                    //#region Delete request\r\n                    let deleteRequest = toolbarItem.deleteRequest;\r\n                    if (deleteRequest != null && options.mode == GridModeEnum.Sync)\r\n                        this.doWebApiCall(deleteRequest, GridRequestTypeEnum.Delete);\r\n                    else\r\n                    {\r\n                        this.update();\r\n                        if (options.onDataSourceChanged != null)\r\n                            options.onDataSourceChanged();\r\n                    }\r\n                    //#endregion\r\n                }\r\n                break;\r\n            case GridToolbarItemType.Rebind:\r\n                {\r\n                    this._deletedItems = [];\r\n                    this.rebind();\r\n                    this.clearSelection();\r\n                }\r\n                break;\r\n            case GridToolbarItemType.Excel:\r\n                {\r\n                    this.excelExport((toolbarItem.excelFileName != null) ? toolbarItem.excelFileName : undefined);\r\n                }\r\n                break;\r\n            case GridToolbarItemType.ExcelWithHiddenColumns:\r\n                {\r\n                    this.excelExport((toolbarItem.excelFileName != null) ? toolbarItem.excelFileName : undefined, true);\r\n                }\r\n                break;\r\n        }\r\n\r\n        if (toolbarItem.onClick != null)\r\n            toolbarItem.onClick(toolbarClickEvent);\r\n    }\r\n\r\n    //#region Excel\r\n    excelExport(fileName = \"Esportazione_excel\", exportHiddenColumns = false)\r\n    {\r\n        let options = this.getOptions();\r\n        if (!options.serverBinding)\r\n            showLoader(this.container(), true, \"vrGridLoaderExcel\" + this._elementId);\r\n\r\n        window.setTimeout(() =>\r\n        {\r\n            if (!options.serverBinding)\r\n            {\r\n                //#region Header rows\r\n                let headerRow = new GridExcelRow();\r\n                headerRow.cells = [];\r\n                for (let column of options.columns!)\r\n                {\r\n                    if ((!exportHiddenColumns && column.hidden == true && (options.groupBy == null || !((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]).map(k => k.field).includes(column.field)))\r\n                        || column.type == GridColumnTypeEnum.EditButton || column.type == GridColumnTypeEnum.Image\r\n                        || column.type == GridColumnTypeEnum.Button || column.type == GridColumnTypeEnum.Icon || column.exportable === false)\r\n                        continue;\r\n\r\n                    let excelCell = new GridExcelCell();\r\n                    excelCell.field = column.field;\r\n                    excelCell.title = column.title;\r\n                    excelCell.text = column.title;\r\n                    excelCell.bold = column.bold;\r\n                    excelCell.type = column.type;\r\n                    excelCell.width = column.width;\r\n                    excelCell.cellSettings = column.headerSettings;\r\n                    excelCell.hidden = column.hidden;\r\n                    excelCell.locked = column.locked;\r\n                    headerRow.cells.push(excelCell);\r\n                }\r\n                //#endregion\r\n\r\n                //#region Content rows\r\n                let contentRows: GridExcelRow[] = [];\r\n                for (let item of this.dataSource())\r\n                {\r\n                    let contentRow = new GridExcelRow();\r\n                    contentRow.cells = [];\r\n\r\n                    for (let column of options.columns!)\r\n                    {\r\n                        if ((!exportHiddenColumns && column.hidden == true && (options.groupBy == null || !((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]).map(k => k.field).includes(column.field)))\r\n                            || column.type == GridColumnTypeEnum.EditButton || column.type == GridColumnTypeEnum.Image\r\n                            || column.type == GridColumnTypeEnum.Button || column.type == GridColumnTypeEnum.Icon || column.exportable === false)\r\n                            continue;\r\n\r\n                        let textHTML = (item[column.field] == null) ? \"\" : String(item[column.field]);\r\n                        let textAlign = GridAlignEnum.Left;\r\n\r\n                        //#region Type\r\n                        switch (column.type)\r\n                        {\r\n                            //#region Date, DateTime, Time\r\n                            case GridColumnTypeEnum.Date:\r\n                            case GridColumnTypeEnum.DateTime:\r\n                            case GridColumnTypeEnum.Time:\r\n                                {\r\n                                    textAlign = GridAlignEnum.Center;\r\n\r\n                                    if (column.type == GridColumnTypeEnum.Date || column.type == GridColumnTypeEnum.DateTime || column.type == GridColumnTypeEnum.Time)\r\n                                    {\r\n                                        if (column.type == GridColumnTypeEnum.Date)\r\n                                            textHTML = (textHTML == \"\") ? \"\" : new Date(new Date(textHTML)).vrToItalyString(DateModeEnum.Date);\r\n                                        else if (column.type == GridColumnTypeEnum.DateTime)\r\n                                            textHTML = (textHTML == \"\") ? \"\" : new Date(new Date(textHTML)).vrToItalyString(DateModeEnum.DateTime, column.showSeconds);\r\n                                        else if (column.type == GridColumnTypeEnum.Time)\r\n                                            textHTML = (textHTML == \"\") ? \"\" : new Date(new Date(textHTML)).vrToItalyString(DateModeEnum.Time, column.showSeconds);\r\n                                    }\r\n                                }\r\n                                break;\r\n                            //#endregion\r\n\r\n                            //#region Number, Currency, Percentage, Duration\r\n                            case GridColumnTypeEnum.Number:\r\n                            case GridColumnTypeEnum.Currency:\r\n                            case GridColumnTypeEnum.Percentage:\r\n                            case GridColumnTypeEnum.Duration:\r\n                                {\r\n                                    textAlign = GridAlignEnum.Right;\r\n                                }\r\n                                break;\r\n                            //#endregion\r\n\r\n                            //#region Custom\r\n                            case GridColumnTypeEnum.Custom:\r\n                                {\r\n                                    textAlign = GridAlignEnum.Center;\r\n                                    if (column.customSettings != null)\r\n                                    {\r\n                                        try\r\n                                        {\r\n                                            let settings = column.customSettings({ dataItem: item });\r\n                                            if (settings && settings.template !== \"\" && textHTML == \"\")\r\n                                                textHTML = settings.template;\r\n                                        }\r\n                                        catch (e) { }\r\n                                    }\r\n                                    else\r\n                                        textHTML = puma(textHTML).text();\r\n                                }\r\n                                break;\r\n                            //#endregion\r\n\r\n                            //#region Label\r\n                            case GridColumnTypeEnum.Label:\r\n                                {\r\n                                    textAlign = GridAlignEnum.Center;\r\n                                    if (column.labelSettings != null)\r\n                                    {\r\n                                        try\r\n                                        {\r\n                                            let settings = column.labelSettings({ dataItem: item });\r\n                                            textHTML = (settings.text == null) ? \"\" : settings.text;\r\n                                        }\r\n                                        catch (e) { }\r\n                                    }\r\n                                    else\r\n                                        textHTML = puma(textHTML).text();\r\n                                }\r\n                                break;\r\n                            //#endregion\r\n\r\n                            //#region String\r\n                            case GridColumnTypeEnum.String:\r\n                                {\r\n                                    textAlign = GridAlignEnum.Left;\r\n                                    textHTML = puma(\"<span>\" + textHTML + \"</span>\").text();\r\n                                }\r\n                                break;\r\n                            //#endregion\r\n\r\n                            //#region Password\r\n                            case GridColumnTypeEnum.PasswordViewable:\r\n                                {\r\n                                    textAlign = GridAlignEnum.Left;\r\n                                    textHTML = puma(\"<span>\" + textHTML + \"</span>\").text();\r\n                                }\r\n                                break;\r\n                            //#endregion\r\n\r\n                            //#region CheckBox\r\n                            case GridColumnTypeEnum.Checkbox:\r\n                            case GridColumnTypeEnum.Boolean:\r\n                                {\r\n                                    textAlign = GridAlignEnum.Center;\r\n                                    textHTML = (item[column.field] == true) ? \"true\" : \"false\";\r\n                                }\r\n                                break;\r\n                            //#endregion\r\n\r\n                            //#region ComboBox, DropDownList, DropDownTree\r\n                            case GridColumnTypeEnum.ComboBox:\r\n                            case GridColumnTypeEnum.DropDownList:\r\n                            case GridColumnTypeEnum.DropDownTree:\r\n                            case GridColumnTypeEnum.DropDownTreeCheckboxes:\r\n                                {\r\n                                    textAlign = GridAlignEnum.Left;\r\n                                    let itemValue = item[column.displayField!];\r\n                                    if (itemValue != null)\r\n                                        textHTML = itemValue.toString();\r\n                                    else\r\n                                        textHTML = \"\";\r\n                                }\r\n                                break;\r\n                            //#endregion\r\n\r\n                            //#region Color\r\n                            case GridColumnTypeEnum.Color:\r\n                                {\r\n                                    textAlign = GridAlignEnum.Center;\r\n                                }\r\n                                break;\r\n                            //#endregion\r\n                        }\r\n                        //#endregion\r\n\r\n                        if (column.cellSettings == null)\r\n                            column.cellSettings = new GridHeaderAndCellSettings();\r\n\r\n                        if (column.cellSettings.textAlign == null)\r\n                            column.cellSettings.textAlign = textAlign;\r\n\r\n                        let excelCell = new GridExcelCell();\r\n                        excelCell.field = column.field;\r\n                        excelCell.title = column.title;\r\n                        excelCell.text = textHTML;\r\n                        excelCell.bold = column.bold;\r\n                        excelCell.type = column.type;\r\n                        excelCell.width = column.width;\r\n                        excelCell.cellSettings = column.cellSettings;\r\n                        excelCell.decimalDigits = column.decimalDigits;\r\n                        excelCell.roundingSettings = (column.roundingSettings != null) ? column.roundingSettings : options.roundingSettings;\r\n                        excelCell.hidden = column.hidden;\r\n                        excelCell.locked = column.locked;\r\n\r\n                        //#region Aggregate mode\r\n                        if (column.aggregate === true)\r\n                        {\r\n                            switch (column.type)\r\n                            {\r\n                                case GridColumnTypeEnum.Number: column.aggregate = GridAggregateMode.Sum; break;\r\n                                case GridColumnTypeEnum.Currency: column.aggregate = GridAggregateMode.Sum; break;\r\n                                case GridColumnTypeEnum.Duration: column.aggregate = GridAggregateMode.Sum; break;\r\n                                case GridColumnTypeEnum.Percentage: column.aggregate = GridAggregateMode.Average; break;\r\n                                default: column.aggregate = GridAggregateMode.Sum;\r\n                            }\r\n                        }\r\n                        excelCell.aggregate = (column.aggregate == null || column.aggregate === false) ? GridAggregateMode.None : column.aggregate;\r\n                        //#endregion\r\n\r\n                        //#region Background color\r\n                        let backgroundColor = \"\";\r\n                        let color = \"\";\r\n                        if (column.cellSettings != null)\r\n                        {\r\n                            if (column.cellSettings.backgroundColor != null)\r\n                                backgroundColor = column.cellSettings.backgroundColor;\r\n\r\n                            if (column.cellSettings.color != null)\r\n                                color = column.cellSettings.color;\r\n                        }\r\n\r\n                        if (options.rowColorProperty != null && item[options.rowColorProperty] != null && item[options.rowColorProperty] !== \"\")\r\n                            backgroundColor = item[options.rowColorProperty];\r\n\r\n                        excelCell.backgroundColor = backgroundColor;\r\n                        excelCell.color = color;\r\n                        //#endregion\r\n\r\n                        contentRow.cells.push(excelCell);\r\n                    }\r\n                    contentRows.push(contentRow);\r\n                }\r\n                //#endregion\r\n\r\n                //#region Footer rows\r\n                let footerRow = new GridExcelRow();\r\n                footerRow.cells = [];\r\n                for (let td of Array.from<HTMLElement>(puma(this._divTotals).find(\"td\")))\r\n                {\r\n                    let field = puma(td).attr(\"value\");\r\n                    if (field == null)\r\n                        continue;\r\n\r\n                    let column = options.columns!.filter(k => k.field == field)[0];\r\n                    if (column == null || (!exportHiddenColumns && column.hidden == true && (options.groupBy == null || !((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]).map(k => k.field).includes(column.field)))\r\n                        || column.type == GridColumnTypeEnum.EditButton || column.type == GridColumnTypeEnum.Image\r\n                        || column.type == GridColumnTypeEnum.Button || column.type == GridColumnTypeEnum.Icon || column.exportable === false)\r\n                        continue;\r\n\r\n                    let excelCell = new GridExcelCell();\r\n                    excelCell.field = column.field;\r\n                    excelCell.title = column.title;\r\n                    excelCell.text = String(Number(td.innerHTML.replace(\"€\", \"\").replace(\"%\", \"\").replace(\".\", \"\").replace(\",\", \".\")));\r\n                    excelCell.bold = column.bold;\r\n                    excelCell.type = column.type;\r\n                    excelCell.width = column.width;\r\n                    excelCell.decimalDigits = column.decimalDigits;\r\n                    excelCell.roundingSettings = (column.roundingSettings != null) ? column.roundingSettings : options.roundingSettings;\r\n                    excelCell.hidden = column.hidden;\r\n                    excelCell.locked = column.locked;\r\n\r\n                    //#region Aggregate mode\r\n                    if (column.aggregate === true)\r\n                    {\r\n                        switch (column.type)\r\n                        {\r\n                            case GridColumnTypeEnum.Number: column.aggregate = GridAggregateMode.Sum; break;\r\n                            case GridColumnTypeEnum.Currency: column.aggregate = GridAggregateMode.Sum; break;\r\n                            case GridColumnTypeEnum.Duration: column.aggregate = GridAggregateMode.Sum; break;\r\n                            case GridColumnTypeEnum.Percentage: column.aggregate = GridAggregateMode.Average; break;\r\n                            default: column.aggregate = GridAggregateMode.Sum;\r\n                        }\r\n                    }\r\n                    excelCell.aggregate = (column.aggregate == null || column.aggregate === false) ? GridAggregateMode.None : column.aggregate;\r\n                    //#endregion\r\n\r\n                    footerRow.cells.push(excelCell);\r\n                }\r\n                //#endregion\r\n\r\n                //#region Generate Excel\r\n                if (options.excel != null && options.excel.fileName != null) fileName = options.excel.fileName;\r\n\r\n                let generateExcelRequest = new GenerateExcelRequest();\r\n                generateExcelRequest.headerRow = headerRow;\r\n                generateExcelRequest.contentRows = contentRows;\r\n                generateExcelRequest.footerRow = footerRow;\r\n                generateExcelRequest.excelFileName = fileName;\r\n                generateExcelRequest.AuthKey = \"10(P9m+U3a@Mtt-Oeo\";\r\n                generateExcelRequest.exportHiddenColumns = exportHiddenColumns;\r\n\r\n                if (options.groupBy != null)\r\n                {\r\n                    let groupByFields = (options.groupBy as GridGroupBySettings).fields;\r\n                    generateExcelRequest.groupBy = (groupByFields != null) ? (groupByFields as GridGroupByItem[]).map(k => k.field) : null;\r\n                }\r\n\r\n                let jsonString = JSON.stringify(generateExcelRequest);\r\n\r\n                //#region Multipart\r\n                let formDataMultipart = null;\r\n                formDataMultipart = new FormData();\r\n                formDataMultipart.append(\"file\", new Blob([jsonString], { type: \"application/json\" }));\r\n                //#endregion\r\n\r\n                $.ajax(\r\n                    {\r\n                        type: \"POST\",\r\n                        beforeSend: (xhr: any) =>\r\n                        {\r\n                            //#region Header parameters\r\n                            xhr.setRequestHeader(\"Accept-Language\", \"it\");\r\n                            xhr.setRequestHeader(\"AuthKey\", \"10(P9m+U3a@Mtt-Oeo\");\r\n                            //#endregion\r\n                        },\r\n                        contentType: false,\r\n                        data: formDataMultipart,\r\n                        method: \"POST\",\r\n                        processData: false,\r\n                        dataType: \"JSON\",\r\n                        url: \"/api/UtilityWebApi/GenerateExcel\",\r\n                        success: (response: GenerateExcelResponse, textStatus: string, jqXHR: JQueryXHR) =>\r\n                        {\r\n                            hideLoader(\"vrGridLoaderExcel\" + this._elementId);\r\n\r\n                            if (response.downloadUrl != null && response.downloadUrl.length > 0)\r\n                                location.replace(response.downloadUrl);\r\n\r\n                            if (!(response as any).Success)\r\n                                alert((response as any).ErrorMessage + \"<br />\" + (response as any).StackTrace, { width: 600, css: \"overflow: auto;\" });\r\n                        },\r\n                        error: (response: JQueryXHR, textStatus: string, errorThrown: string) =>\r\n                        {\r\n                            hideLoader();\r\n                            alert(\"Errore nell'esportazione Excel. Contattare l'assistenza.\");\r\n                        }\r\n                    });\r\n            }\r\n            else\r\n            {\r\n                if (options.excel != null)\r\n                {\r\n                    if (options.excel.fileName == null) options.excel.fileName = fileName;\r\n                    this.doWebApiCall(options.excel, GridRequestTypeEnum.Excel);\r\n                }\r\n            }\r\n            //#endregion\r\n        }, 200);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Toolbar\r\n    visibleToolbar(state?: boolean)\r\n    {\r\n        if (state != null)\r\n        {\r\n            if (state) puma(this._divToolbar).show();\r\n            else puma(this._divToolbar).hide();\r\n        }\r\n        return puma(this._divToolbar).is(\":visible\");\r\n    }\r\n\r\n    showToolbar()\r\n    {\r\n        this.visibleToolbar(true);\r\n    }\r\n\r\n    hideToolbar()\r\n    {\r\n        this.visibleToolbar(false);\r\n    }\r\n\r\n    toolbar()\r\n    {\r\n        return this._divToolbar;\r\n    }\r\n\r\n    toolbarItem<T extends VrControl>(value: string)\r\n    {\r\n        return ControlManager.get<T>(\"grid-\" + value + \"_\" + this._elementId);\r\n    }\r\n\r\n    showToolbarItem<T extends VrControl>(value: string)\r\n    {\r\n        let toolbarItem = this.toolbarItem<T>(value);\r\n        if (toolbarItem != null)\r\n            toolbarItem.show();\r\n    }\r\n\r\n    hideToolbarItem<T extends VrControl>(value: string)\r\n    {\r\n        let toolbarItem = this.toolbarItem<T>(value);\r\n        if (toolbarItem != null)\r\n            toolbarItem.hide();\r\n    }\r\n\r\n    enableToolbarItem<T extends VrControl>(value: string)\r\n    {\r\n        let toolbarItem = this.toolbarItem<T>(value);\r\n        if (toolbarItem != null)\r\n            toolbarItem.enable();\r\n    }\r\n\r\n    disableToolbarItem<T extends VrControl>(value: string)\r\n    {\r\n        let toolbarItem = this.toolbarItem<T>(value);\r\n        if (toolbarItem != null)\r\n            toolbarItem.disable();\r\n    }\r\n\r\n    removeToolbarItem(value: string)\r\n    {\r\n        let toolbarItem = this.toolbarItem(value);\r\n        if (toolbarItem != null)\r\n            puma(toolbarItem.container()).remove();\r\n    }\r\n\r\n    addToolbarItem(toolbarItem: GridToolbarItem)\r\n    {\r\n        if (toolbarItem.visible == null) toolbarItem.visible = true;\r\n        if (toolbarItem.type == null) toolbarItem.type = GridToolbarItemType.Custom;\r\n\r\n        //#region Toolbar control settings\r\n        let text = \"\";\r\n        let iconClass: IconClass | undefined = undefined;\r\n        let buttonClass = \"\";\r\n        let enabled = toolbarItem.enable;\r\n        let vrButton = false;\r\n        if (toolbarItem.css == null) toolbarItem.css = \"\";\r\n        if (toolbarItem.cssContainer == null) toolbarItem.cssContainer = \"\";\r\n        let toolbarItemValue = (toolbarItem.value == null) ? ((toolbarItem.text != null) ? toolbarItem.text.replace(/[^a-z0-9\\s]/gi, \"\").replace(/[_\\s]/g, \"\") : \"noValue\") : toolbarItem.value;\r\n\r\n        //#region Toolbar item type\r\n        switch (toolbarItem.type)\r\n        {\r\n            case GridToolbarItemType.Add:\r\n                {\r\n                    text = (toolbarItem.text != null) ? toolbarItem.text : \"Aggiungi\";\r\n                    iconClass = (toolbarItem.icon != null) ? toolbarItem.icon : IconClassLight.Plus;\r\n                    buttonClass = (toolbarItem.value != null) ? \"grid-\" + toolbarItem.value : \"grid-add\";\r\n                    vrButton = true;\r\n                }\r\n                break;\r\n            case GridToolbarItemType.Custom:\r\n                {\r\n                    text = (toolbarItem.text != null) ? toolbarItem.text : \"\";\r\n                    iconClass = (toolbarItem.icon != null) ? toolbarItem.icon : undefined;\r\n                    buttonClass = \"grid-\" + toolbarItemValue;\r\n                    vrButton = true;\r\n                }\r\n                break;\r\n            case GridToolbarItemType.SplitButton:\r\n                {\r\n                    text = (toolbarItem.text != null) ? toolbarItem.text : \"\";\r\n                    iconClass = (toolbarItem.icon != null) ? toolbarItem.icon : undefined;\r\n                    vrButton = false;\r\n                }\r\n                break;\r\n            case GridToolbarItemType.Switch:\r\n            case GridToolbarItemType.ButtonGroup:\r\n            case GridToolbarItemType.CheckBox:\r\n            case GridToolbarItemType.ComboBox:\r\n            case GridToolbarItemType.DatePicker:\r\n            case GridToolbarItemType.Label:\r\n            case GridToolbarItemType.TextBox:\r\n                {\r\n                    vrButton = false;\r\n                }\r\n                break;\r\n            case GridToolbarItemType.Delete:\r\n                {\r\n                    text = (toolbarItem.text != null) ? toolbarItem.text : \"Elimina\";\r\n                    iconClass = (toolbarItem.icon != null) ? toolbarItem.icon : IconClassRegular.Xmark;\r\n                    buttonClass = (toolbarItem.value != null) ? \"grid-\" + toolbarItem.value : \"grid-delete\";\r\n                    vrButton = true;\r\n                }\r\n                break;\r\n            case GridToolbarItemType.Excel:\r\n                {\r\n                    text = (toolbarItem.text != null) ? toolbarItem.text : \"Excel\";\r\n                    iconClass = (toolbarItem.icon != null) ? toolbarItem.icon : IconClassLight.FileExcel;\r\n                    buttonClass = (toolbarItem.value != null) ? \"grid-\" + toolbarItem.value : \"grid-excel\";\r\n                    vrButton = true;\r\n                    toolbarItem.backgroundColor = \"#008a00\";\r\n                    toolbarItem.textColor = \"#FFF\";\r\n                }\r\n                break;\r\n            case GridToolbarItemType.ExcelWithHiddenColumns:\r\n                {\r\n                    text = (toolbarItem.text != null) ? toolbarItem.text : \"Excel\";\r\n                    iconClass = (toolbarItem.icon != null) ? toolbarItem.icon : IconClassLight.FileExcel;\r\n                    buttonClass = (toolbarItem.value != null) ? \"grid-\" + toolbarItem.value : \"grid-excelHiddenColumns\";\r\n                    vrButton = true;\r\n                    toolbarItem.backgroundColor = \"#008a00\";\r\n                    toolbarItem.textColor = \"#FFF\";\r\n                }\r\n                break;\r\n            case GridToolbarItemType.Separator:\r\n                {\r\n                    buttonClass = (toolbarItem.value != null) ? \"grid-\" + toolbarItem.value : \"grid-separator\";\r\n                    enabled = false;\r\n                    vrButton = true;\r\n                }\r\n                break;\r\n            case GridToolbarItemType.Rebind:\r\n                {\r\n                    text = (toolbarItem.text != null) ? toolbarItem.text : \"Aggiorna\";\r\n                    iconClass = (toolbarItem.icon != null) ? toolbarItem.icon : IconClassLight.Refresh;\r\n                    buttonClass = (toolbarItem.value != null) ? \"grid-\" + toolbarItem.value : \"grid-rebind\";\r\n                    vrButton = true;\r\n                }\r\n                break;\r\n        }\r\n        //#endregion\r\n\r\n        //#endregion\r\n\r\n        if (vrButton)\r\n        {\r\n            //#region Create button\r\n            createButton(\r\n                {\r\n                    icon: iconClass,\r\n                    imageUrl: toolbarItem.imageUrl,\r\n                    enable: enabled,\r\n                    text: text,\r\n                    colorSettings: { background: toolbarItem.backgroundColor, textColor: toolbarItem.textColor },\r\n                    visible: toolbarItem.visible,\r\n                    cssContainer: toolbarItem.cssContainer,\r\n                    css: toolbarItem.css,\r\n                    mode: (toolbarItem.primary === true) ? ButtonModeEnum.Primary : undefined,\r\n                    classContainer: \"grid-toolbarItemsContainer \" + ((toolbarItem.classContainer != null) ? toolbarItem.classContainer : \"\"),\r\n                    class: ((toolbarItem.type == GridToolbarItemType.Separator) ? \"grid-separator\" : \"\") + \" grid-toolbarItems \" + buttonClass,\r\n                    badgeSettings: toolbarItem.badge,\r\n                    onClick: (e) =>\r\n                    {\r\n                        //#region Delete\r\n                        if (toolbarItem.type == GridToolbarItemType.Delete)\r\n                        {\r\n                            let checkedItems = this.getCheckedItems();\r\n                            if (checkedItems.length == 0)\r\n                            {\r\n                                notifyWarning(\"Selezionare almeno una riga per proseguire\");\r\n                                return;\r\n                            }\r\n                            else\r\n                            {\r\n                                if (toolbarItem.confirmationMessage == null)\r\n                                {\r\n                                    if (checkedItems.length == 1) toolbarItem.confirmationMessage = \"Proseguendo, verrà eliminato l'elemento selezionato. Continuare?\";\r\n                                    else if (checkedItems.length > 1) toolbarItem.confirmationMessage = \"Proseguendo, verranno eliminati gli elementi selezionati. Continuare?\";\r\n                                }\r\n                            }\r\n                        }\r\n                        //#endregion\r\n\r\n                        //#region Event\r\n                        let toolbarClickEvent = new GridToolbarClickEvent();\r\n                        toolbarClickEvent.sender = e.sender;\r\n                        toolbarClickEvent.type = toolbarItem.type!;\r\n                        //#endregion\r\n\r\n                        //#region Confirmation message\r\n                        if (toolbarItem.confirmationMessage != null && toolbarItem.confirmationMessage.length > 0)\r\n                        {\r\n                            confirm(toolbarItem.confirmationMessage).then(() =>\r\n                            {\r\n                                this.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n                            });\r\n                        }\r\n                        else\r\n                            this.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n                        //#endregion\r\n                    }\r\n                }, this._divToolbar, null, buttonClass + \"_\" + this._elementId);\r\n            //#endregion\r\n        }\r\n        else\r\n        {\r\n            //#region SplitButton\r\n            if (toolbarItem.type == GridToolbarItemType.SplitButton)\r\n            {\r\n                let value = (toolbarItem.value != null) ? toolbarItem.value : \"splitButton\";\r\n                if (toolbarItem.value == null && toolbarItem.text != null)\r\n                    value = toolbarItem.text.replace(/[^a-z0-9\\s]/gi, \"\").replace(/[_\\s]/g, \"\") + \"splitButton\";\r\n\r\n                if (toolbarItem.splitButtonOptions == null) toolbarItem.splitButtonOptions = new SplitButtonOptions();\r\n                if (toolbarItem.splitButtonItems != null) toolbarItem.splitButtonOptions.items = toolbarItem.splitButtonItems;\r\n                if (toolbarItem.splitButtonOptions.separator == null) toolbarItem.splitButtonOptions.separator = false;\r\n\r\n                let itemClass = \"grid-\" + value;\r\n                createSplitButton(\r\n                    {\r\n                        text: text,\r\n                        icon: iconClass,\r\n                        enable: enabled,\r\n                        imageUrl: toolbarItem.imageUrl,\r\n                        items: toolbarItem.splitButtonOptions.items,\r\n                        visible: toolbarItem.visible,\r\n                        separator: toolbarItem.splitButtonOptions.separator,\r\n                        colorSettings: toolbarItem.splitButtonOptions.colorSettings,\r\n                        popupSettings: toolbarItem.splitButtonOptions.popupSettings,\r\n                        tooltip: toolbarItem.splitButtonOptions.tooltip,\r\n                        hoverMode: toolbarItem.splitButtonOptions.hoverMode,\r\n                        modal: toolbarItem.splitButtonOptions.modal,\r\n                        showDefault: toolbarItem.splitButtonOptions.showDefault,\r\n                        cssContainer: toolbarItem.cssContainer + \" vertical-align: top;\",\r\n                        css: toolbarItem.css,\r\n                        classContainer: \"grid-toolbarItemsContainer \" + ((toolbarItem.classContainer != null) ? toolbarItem.classContainer : \"\"),\r\n                        class: \"grid-toolbarItems grid-splitButton \" + itemClass,\r\n                        onClick: (toolbarItem.onClick == null) ? undefined : (e) =>\r\n                        {\r\n                            //#region Event\r\n                            let toolbarClickEvent = new GridToolbarClickEvent();\r\n                            toolbarClickEvent.sender = e.sender;\r\n                            toolbarClickEvent.type = toolbarItem.type!;\r\n                            //#endregion\r\n\r\n                            //#region Confirmation message\r\n                            if (toolbarItem.confirmationMessage != null && toolbarItem.confirmationMessage.length > 0)\r\n                            {\r\n                                confirm(toolbarItem.confirmationMessage).then(() =>\r\n                                {\r\n                                    this.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n                                });\r\n                            }\r\n                            else\r\n                                this.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n                            //#endregion\r\n                        }\r\n                    }, this._divToolbar, null, itemClass + \"_\" + this._elementId);\r\n            }\r\n            //#endregion\r\n\r\n            //#region ButtonGroup\r\n            if (toolbarItem.type == GridToolbarItemType.ButtonGroup)\r\n            {\r\n                let itemClass = \"grid-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"buttonGroup\");\r\n                createButtonGroup(\r\n                    {\r\n                        enable: enabled,\r\n                        selectionMode: SelectionModeEnum.Single,\r\n                        items: toolbarItem.buttonGroupItems!,\r\n                        visible: toolbarItem.visible,\r\n                        cssContainer: \"top: -1px; \" + toolbarItem.cssContainer,\r\n                        css: toolbarItem.css,\r\n                        classContainer: \"grid-toolbarItemsContainer \" + toolbarItem.classContainer,\r\n                        class: \"grid-toolbarItems grid-buttonGroup \" + itemClass,\r\n                        width: \"auto\",\r\n                        onSelect: (e) => \r\n                        {\r\n                            //#region Event\r\n                            let toolbarClickEvent = new GridToolbarClickEvent();\r\n                            toolbarClickEvent.sender = e.sender;\r\n                            toolbarClickEvent.type = toolbarItem.type!;\r\n                            //#endregion\r\n\r\n                            //#region Confirmation message\r\n                            if (toolbarItem.confirmationMessage != null && toolbarItem.confirmationMessage.length > 0)\r\n                            {\r\n                                confirm(toolbarItem.confirmationMessage).then(() =>\r\n                                {\r\n                                    this.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n                                });\r\n                            }\r\n                            else\r\n                                this.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n                            //#endregion\r\n                        }\r\n                    }, this._divToolbar, null, itemClass + \"_\" + this._elementId);\r\n            }\r\n            //#endregion\r\n\r\n            //#region CheckBox\r\n            if (toolbarItem.type == GridToolbarItemType.CheckBox)\r\n            {\r\n                let itemClass = \"grid-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"checkbox\");\r\n                createCheckBox(\r\n                    {\r\n                        enable: enabled,\r\n                        text: toolbarItem.text,\r\n                        visible: toolbarItem.visible,\r\n                        cssContainer: \"top: 3px; \" + toolbarItem.cssContainer,\r\n                        css: toolbarItem.css,\r\n                        classContainer: \"grid-toolbarItemsContainer \" + toolbarItem.classContainer,\r\n                        class: \"grid-toolbarItems grid-checkBox \" + itemClass,\r\n                        onCheck: (e) => \r\n                        {\r\n                            //#region Event\r\n                            let toolbarClickEvent = new GridToolbarClickEvent();\r\n                            toolbarClickEvent.sender = e.sender;\r\n                            toolbarClickEvent.type = toolbarItem.type!;\r\n                            //#endregion\r\n\r\n                            //#region Confirmation message\r\n                            if (toolbarItem.confirmationMessage != null && toolbarItem.confirmationMessage.length > 0)\r\n                            {\r\n                                confirm(toolbarItem.confirmationMessage).then(() =>\r\n                                {\r\n                                    this.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n                                });\r\n                            }\r\n                            else\r\n                                this.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n                            //#endregion\r\n                        }\r\n                    }, this._divToolbar, null, itemClass + \"_\" + this._elementId);\r\n            }\r\n            //#endregion\r\n\r\n            //#region Label\r\n            if (toolbarItem.type == GridToolbarItemType.Label)\r\n            {\r\n                let itemClass = \"grid-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"label\");\r\n                createLabel(\r\n                    {\r\n                        enable: enabled,\r\n                        text: toolbarItem.text,\r\n                        visible: toolbarItem.visible,\r\n                        cssContainer: toolbarItem.cssContainer,\r\n                        css: toolbarItem.css,\r\n                        classContainer: \"grid-toolbarItemsContainer \" + toolbarItem.classContainer,\r\n                        class: \"grid-toolbarItems grid-label \" + itemClass,\r\n                        colorSettings:\r\n                        {\r\n                            background: toolbarItem.backgroundColor,\r\n                            textColor: toolbarItem.textColor\r\n                        },\r\n                        onClick: (e) => \r\n                        {\r\n                            //#region Event\r\n                            let toolbarClickEvent = new GridToolbarClickEvent();\r\n                            toolbarClickEvent.sender = e.sender;\r\n                            toolbarClickEvent.type = toolbarItem.type!;\r\n                            //#endregion\r\n\r\n                            //#region Confirmation message\r\n                            if (toolbarItem.confirmationMessage != null && toolbarItem.confirmationMessage.length > 0)\r\n                            {\r\n                                confirm(toolbarItem.confirmationMessage).then(() =>\r\n                                {\r\n                                    this.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n                                });\r\n                            }\r\n                            else\r\n                                this.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n                            //#endregion\r\n                        }\r\n                    }, this._divToolbar, null, itemClass + \"_\" + this._elementId);\r\n            }\r\n            //#endregion\r\n\r\n            //#region ComboBox\r\n            if (toolbarItem.type == GridToolbarItemType.ComboBox)\r\n            {\r\n                let itemClass = \"grid-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"comboBox\");\r\n\r\n                if (toolbarItem.comboBoxOptions == null) toolbarItem.comboBoxOptions = new ComboBoxOptions();\r\n                toolbarItem.comboBoxOptions.classContainer = \"grid-toolbarItemsContainer \" + toolbarItem.comboBoxOptions.classContainer;\r\n                toolbarItem.comboBoxOptions.class = \"grid-toolbarItems grid-comboBox \" + itemClass + \" \" + toolbarItem.comboBoxOptions.class;\r\n                if (toolbarItem.comboBoxOptions.visible == null) toolbarItem.comboBoxOptions.visible = toolbarItem.visible;\r\n                if (toolbarItem.comboBoxOptions.css == null) toolbarItem.comboBoxOptions.css = toolbarItem.css;\r\n                if (toolbarItem.comboBoxOptions.cssContainer == null) toolbarItem.comboBoxOptions.cssContainer = toolbarItem.cssContainer + \";\";\r\n                toolbarItem.comboBoxOptions.cssContainer += \"vertical-align: top;\";\r\n                if (toolbarItem.comboBoxOptions.enable == null) toolbarItem.comboBoxOptions.enable = enabled;\r\n\r\n                createComboBox(toolbarItem.comboBoxOptions, this._divToolbar, null, itemClass + \"_\" + this._elementId);\r\n            }\r\n            //#endregion\r\n\r\n            //#region DatePicker\r\n            if (toolbarItem.type == GridToolbarItemType.DatePicker)\r\n            {\r\n                let itemClass = \"grid-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"datePicker\");\r\n\r\n                if (toolbarItem.datePickerOptions == null) toolbarItem.datePickerOptions = new DatePickerOptions();\r\n                toolbarItem.datePickerOptions.classContainer = \"grid-toolbarItemsContainer \" + toolbarItem.datePickerOptions.classContainer;\r\n                toolbarItem.datePickerOptions.class = \"grid-toolbarItems grid-datePicker \" + itemClass + \" \" + toolbarItem.datePickerOptions.class;\r\n                if (toolbarItem.datePickerOptions.visible == null) toolbarItem.datePickerOptions.visible = toolbarItem.visible;\r\n                if (toolbarItem.datePickerOptions.css == null) toolbarItem.datePickerOptions.css = toolbarItem.css;\r\n                if (toolbarItem.datePickerOptions.cssContainer == null) toolbarItem.datePickerOptions.cssContainer = toolbarItem.cssContainer;\r\n                toolbarItem.datePickerOptions.cssContainer += \"top: -1px; \" + toolbarItem.datePickerOptions.cssContainer;\r\n                if (toolbarItem.datePickerOptions.enable == null) toolbarItem.datePickerOptions.enable = enabled;\r\n\r\n                createDatePicker(toolbarItem.datePickerOptions, this._divToolbar, null, itemClass + \"_\" + this._elementId);\r\n            }\r\n            //#endregion\r\n\r\n            //#region TextBox\r\n            if (toolbarItem.type == GridToolbarItemType.TextBox)\r\n            {\r\n                let itemClass = \"grid-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"textBox\");\r\n\r\n                if (toolbarItem.textBoxOptions == null) toolbarItem.textBoxOptions = new TextBoxOptions();\r\n                toolbarItem.textBoxOptions.classContainer = \"grid-toolbarItemsContainer \" + toolbarItem.textBoxOptions.classContainer;\r\n                toolbarItem.textBoxOptions.class = \"grid-toolbarItems grid-textBox \" + itemClass + \" \" + toolbarItem.textBoxOptions.class;\r\n                if (toolbarItem.textBoxOptions.visible == null) toolbarItem.textBoxOptions.visible = toolbarItem.visible;\r\n                if (toolbarItem.textBoxOptions.css == null) toolbarItem.textBoxOptions.css = toolbarItem.css;\r\n                if (toolbarItem.textBoxOptions.cssContainer == null) toolbarItem.textBoxOptions.cssContainer = toolbarItem.cssContainer;\r\n                toolbarItem.textBoxOptions.cssContainer += \"top: -1px; \" + toolbarItem.textBoxOptions.cssContainer;\r\n                if (toolbarItem.textBoxOptions.enable == null) toolbarItem.textBoxOptions.enable = enabled;\r\n\r\n                createTextBox(toolbarItem.textBoxOptions, this._divToolbar, null, itemClass + \"_\" + this._elementId);\r\n            }\r\n            //#endregion\r\n\r\n            //#region Switch\r\n            else if (toolbarItem.type == GridToolbarItemType.Switch)\r\n            {\r\n                if (toolbarItem.switchSettings == null)\r\n                {\r\n                    toolbarItem.switchSettings = new GridToolbarSwitchSettings();\r\n                    toolbarItem.switchSettings.labelOff = \"\";\r\n                    toolbarItem.switchSettings.labelOn = \"\";\r\n                }\r\n\r\n                if (toolbarItem.switchSettings.checked == null) toolbarItem.switchSettings.checked = false;\r\n                let itemClass = \"grid-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"switch\");\r\n                puma(this._divToolbar).vrAppendPuma(\"<div id='\" + itemClass + \"_\" + this._elementId + \"' class='grid-toolbarItems-switch'></div>\");\r\n                createSwitch(\r\n                    {\r\n                        labelOff: toolbarItem.switchSettings!.labelOff,\r\n                        labelOn: toolbarItem.switchSettings!.labelOn,\r\n                        checked: toolbarItem.switchSettings.checked,\r\n                        cssContainer: \"top: -2px; \" + toolbarItem.cssContainer,\r\n                        css: toolbarItem.css,\r\n                        classContainer: \"grid-toolbarItemsContainer \" + toolbarItem.classContainer,\r\n                        visible: toolbarItem.visible,\r\n                        enable: enabled,\r\n                        onChange: (e) =>\r\n                        {\r\n                            if (toolbarItem.switchSettings!.onCheck != null)\r\n                            {\r\n                                let tableSwitchEvent = new GridToolbarSwitchEvent();\r\n                                tableSwitchEvent.checked = e.checked;\r\n                                toolbarItem.switchSettings!.onCheck(tableSwitchEvent);\r\n                            }\r\n                        }\r\n                    }, null, null, itemClass + \"_\" + this._elementId);\r\n            }\r\n            //#endregion\r\n        }\r\n    }\r\n    //#endregion\r\n\r\n    //#endregion\r\n\r\n    //#region Auto Window\r\n    private createAutoWindow()\r\n    {\r\n        if (this._wndAutoWindow != null)\r\n            return;\r\n\r\n        let options = this.getOptions();\r\n\r\n        //#region Default options\r\n        if (options.autoWindowSettings == null)\r\n            options.autoWindowSettings = new GridAutoWindowSettings();\r\n\r\n        if (options.autoWindowSettings.options == null)\r\n            options.autoWindowSettings.options = new GridAutoWindowOption();\r\n\r\n        if (options.autoWindowSettings.options.width == null) options.autoWindowSettings.options.width = 400;\r\n        if (options.autoWindowSettings.options.titleNew == null) options.autoWindowSettings.options.titleNew = \"Nuovo\";\r\n        if (options.autoWindowSettings.options.titleEdit == null) options.autoWindowSettings.options.titleEdit = \"Modifica\";\r\n        //#endregion\r\n\r\n        //#region Create window\r\n        this._wndAutoWindow = createWindow(\r\n            {\r\n                addToControlList: false,\r\n                classContainer: this.element().id + \"_wndUtility\",\r\n                width: options.autoWindowSettings.options.width,\r\n                height: options.autoWindowSettings.options.height,\r\n                title: options.autoWindowSettings.options.titleNew,\r\n                onClose: (e) =>\r\n                {\r\n                    puma(this._wndAutoWindow.container()).remove();\r\n                    (this._wndAutoWindow as any) = null;\r\n                },\r\n                footer:\r\n                    [\r\n                        {\r\n                            type: WindowFooterItemTypeEnum.Close, onClick: (e) =>\r\n                            {\r\n                                this._actualEditedItem = null;\r\n\r\n                                if (options.autoWindowSettings!.onClose != null)\r\n                                    options.autoWindowSettings!.onClose();\r\n                            }\r\n                        },\r\n                        {\r\n                            type: WindowFooterItemTypeEnum.Ok, onClick: (e) =>\r\n                            {\r\n                                //#region Confirmation message\r\n                                if (options.autoWindowSettings!.options!.confirmationMessage != null\r\n                                    && options.autoWindowSettings!.options!.confirmationMessage.length > 0)\r\n                                {\r\n                                    confirm(options.autoWindowSettings!.options!.confirmationMessage).then(() =>\r\n                                    {\r\n                                        this.saveAutoWindow();\r\n                                    });\r\n                                }\r\n                                else\r\n                                    this.saveAutoWindow();\r\n                                //#endregion\t\t\t\t\t\t\t\t\r\n                            }\r\n                        }\r\n                    ]\r\n            });\r\n        puma(this._wndAutoWindow.element()).addClass(\"grid_autoWindow\");\r\n        //#endregion\r\n\r\n        this.createControlsAutoWindow(options);\r\n    }\r\n\r\n    private createControlsAutoWindow(options: GridOptions)\r\n    {\r\n        let columnsOrdered = [];\r\n        let autoWindowId = this._wndAutoWindow.element().id;\r\n\r\n        //#region Checkboxes after all\r\n        for (let column of options.columns!.slice(1).reverse())\r\n        {\r\n            if (column.hidden)\r\n                continue;\r\n\r\n            if (column.type == GridColumnTypeEnum.Checkbox || column.type == GridColumnTypeEnum.Boolean)\r\n                columnsOrdered.unshift(column);\r\n            else\r\n                columnsOrdered.push(column);\r\n        }\r\n        //#endregion\r\n\r\n        for (let column of columnsOrdered.reverse())\r\n        {\r\n            let label = (column.title == null) ? column.field : column.title;\r\n            let tooltip = (column.cellSettings != null && column.cellSettings.tooltip != null) ? column.cellSettings.tooltip : undefined;\r\n            if (tooltip === true)\r\n                tooltip = label;\r\n            else if (tooltip === false)\r\n                tooltip = undefined;\r\n            else if (typeof (tooltip) == \"function\")\r\n                tooltip = undefined;\r\n\r\n            //#region Type\r\n            switch (column.type)\r\n            {\r\n                //#region CheckBox\r\n                case GridColumnTypeEnum.Checkbox:\r\n                case GridColumnTypeEnum.Boolean:\r\n                    {\r\n                        let checkBox = createCheckBox(\r\n                            {\r\n                                label: label,\r\n                                tooltip: tooltip\r\n                            }, autoWindowId, null, this._elementId + \"_checkBox_\" + column.field);\r\n\r\n                        puma(checkBox.element()).parent().css(\"margin-top\", \"10px\");\r\n                        puma(checkBox.element()).parent().css(\"display\", \"inline-block\");\r\n                        puma(checkBox.element()).parent().css(\"margin-right\", \"5px\");\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region String\r\n                case GridColumnTypeEnum.String:\r\n                    {\r\n                        let textBox = createTextBox(\r\n                            {\r\n                                label: label,\r\n                                width: \"100%\",\r\n                                tooltip: tooltip\r\n                            }, autoWindowId, null, this._elementId + \"_textBox_\" + column.field);\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region Password\r\n                case GridColumnTypeEnum.PasswordViewable:\r\n                    {\r\n                        let txtPasswordViewable = createTextBox({\r\n                            label: label,\r\n                            width: \"100%\",\r\n                            mode: TextModeEnum.PasswordViewable,\r\n                            tooltip: tooltip\r\n                        }, autoWindowId, null, this._elementId + \"_textBox_\" + column.field);\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region Date, DateTime, Time\r\n                case GridColumnTypeEnum.Date:\r\n                    {\r\n                        let datePicker = createDatePicker(\r\n                            {\r\n                                label: label,\r\n                                width: \"100%\",\r\n                                tooltip: tooltip\r\n                            }, autoWindowId, null, this._elementId + \"_datePicker_\" + column.field);\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.DateTime:\r\n                    {\r\n                        let dateTimePicker = createDatePicker(\r\n                            {\r\n                                mode: DateModeEnum.DateTime,\r\n                                label: label,\r\n                                width: \"100%\",\r\n                                tooltip: tooltip\r\n                            }, autoWindowId, null, this._elementId + \"_dateTimePicker_\" + column.field);\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.Time:\r\n                    {\r\n                        let timePicker = createDatePicker(\r\n                            {\r\n                                mode: DateModeEnum.Time,\r\n                                label: label,\r\n                                width: \"100%\",\r\n                                tooltip: tooltip\r\n                            }, autoWindowId, null, this._elementId + \"_timePicker_\" + column.field);\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region ComboBox, DropDownList, DropDownTree\r\n                case GridColumnTypeEnum.DropDownList:\r\n                    {\r\n                        if (column.dataItems == null)\r\n                            throw new Error(\"Property 'dataItems' of column '\" + column.field + \"' is null; please, consider to fill it with an array of dropDownListItem[]\");\r\n\r\n                        let dropDownList = createComboBox(\r\n                            {\r\n                                mode: ComboBoxTypeEnum.DropDown,\r\n                                label: label,\r\n                                width: \"100%\",\r\n                                items: column.dataItems,\r\n                                nullable: column.ddlNullable,\r\n                                clearButton: column.ddlNullable,\r\n                                tooltip: tooltip\r\n                            }, autoWindowId, null, this._elementId + \"_dropDownList_\" + column.field);\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.DropDownTree:\r\n                case GridColumnTypeEnum.DropDownTreeCheckboxes:\r\n                    {\r\n                        if (column.dataItems == null)\r\n                            throw new Error(\"Property 'dataItems' of column '\" + column.field + \"' is null; please, consider to fill it with an array of dropDownTreeItem[]\");\r\n\r\n                        for (let item of column.dataItems!)\r\n                        {\r\n                            if (item.expanded == null)\r\n                                item.expanded = true;\r\n                        }\r\n\r\n                        let dropDownTree = createComboBox(\r\n                            {\r\n                                label: label,\r\n                                width: \"100%\",\r\n                                items: column.dataItems,\r\n                                checkboxes: (column.type == GridColumnTypeEnum.DropDownTreeCheckboxes),\r\n                                clearButton: column.ddlNullable,\r\n                                tooltip: tooltip\r\n                            }, autoWindowId, null, this._elementId + \"_dropDownTree_\" + column.field);\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.ComboBox:\r\n                    {\r\n                        if (column.dataItems == null)\r\n                            throw new Error(\"Property 'dataItems' of column '\" + column.field + \"' is null; please, consider to fill it with an array of comboBoxItem[]\");\r\n\r\n                        let comboBox = createComboBox(\r\n                            {\r\n                                label: label,\r\n                                width: \"100%\",\r\n                                items: column.dataItems,\r\n                                tooltip: tooltip,\r\n                                clearButton: column.ddlNullable\r\n                            }, autoWindowId, null, this._elementId + \"_comboBox_\" + column.field);\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region Number, Currency, Percentage, Duration\r\n                case GridColumnTypeEnum.Number:\r\n                case GridColumnTypeEnum.Currency:\r\n                case GridColumnTypeEnum.Percentage:\r\n                case GridColumnTypeEnum.Duration:\r\n                    {\r\n                        let type = TextModeEnum.Numeric;\r\n                        if (column.type == GridColumnTypeEnum.Currency) type = TextModeEnum.Currency;\r\n                        else if (column.type == GridColumnTypeEnum.Percentage) type = TextModeEnum.Percentage;\r\n\r\n                        let numericTextBox = createTextBox(\r\n                            {\r\n                                label: label,\r\n                                width: \"100%\",\r\n                                mode: type,\r\n                                tooltip: tooltip,\r\n                                roundingSettings: (column.roundingSettings != null) ? column.roundingSettings : options.roundingSettings\r\n                            }, autoWindowId, null, this._elementId + \"_numericTextBox_\" + column.field);\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region Color\r\n                case GridColumnTypeEnum.Color:\r\n                    {\r\n                        let colorPicker = createColorPicker({\r\n                            label: label,\r\n                            width: \"100%\",\r\n                            cssContainer: \"align-items: flex-start;\",\r\n                            addToControlList: true\r\n                        }, autoWindowId, null, this._elementId + \"_colorPicker_\" + column.field);\r\n                    }\r\n                    break;\r\n                //#endregion\r\n            }\r\n            //#endregion\r\n        }\r\n    }\r\n\r\n    private openAutoWindow(dataItem?: any)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.autoWindowSettings != null || !options.hideEditButton)\r\n            this.createAutoWindow();\r\n\r\n        if (this._wndAutoWindow == null)\r\n            return;\r\n\r\n        if (options.onAutoWindowOpen != null)\r\n        {\r\n            let autoWindowOpenEvent = new AutoWindowOpenEvent();\r\n            autoWindowOpenEvent.sender = this;\r\n            autoWindowOpenEvent.window = this._wndAutoWindow;\r\n            autoWindowOpenEvent.dataItem = dataItem;\r\n            autoWindowOpenEvent.columns = options.columns;\r\n            options.onAutoWindowOpen(autoWindowOpenEvent);\r\n\r\n            if (autoWindowOpenEvent.isDefaultPrevented())\r\n                return;\r\n        }\r\n\r\n        //#region Main options\r\n        let title = (dataItem != null) ? options.autoWindowSettings!.options!.titleEdit : options.autoWindowSettings!.options!.titleNew;\r\n        this._wndAutoWindow.title(title);\r\n        this._wndAutoWindow.open();\r\n\r\n        if (options.autoWindowSettings!.options!.height == null)\r\n        {\r\n            puma(this._wndAutoWindow.element()).css(\"height\", \"auto\");\r\n            puma(this._wndAutoWindow.element()).parent().css(\"height\", \"auto\");\r\n            this._wndAutoWindow.center();\r\n            puma(this._wndAutoWindow.element()).css(\"overflow-y\", \"auto\");\r\n        }\r\n        //#endregion\r\n\r\n        let index = 0;\r\n        this._actualEditedItem = dataItem;\r\n        for (let column of options.columns!.slice(1))\r\n        {\r\n            if (column.hidden && !column.editable)\r\n                continue;\r\n\r\n            let columnValue = (dataItem != null) ? dataItem[column.field] : null;\r\n\r\n            //#region Type\r\n            switch (column.type)\r\n            {\r\n                //#region CheckBox\r\n                case GridColumnTypeEnum.Checkbox:\r\n                case GridColumnTypeEnum.Boolean:\r\n                    {\r\n                        let checkBox = ControlManager.get<CheckBox>(this._elementId + \"_checkBox_\" + column.field);\r\n                        checkBox.clear();\r\n\r\n                        if (columnValue != null)\r\n                            checkBox.checked(columnValue);\r\n                        else if (column.defaultValue != null)\r\n                            checkBox.checked(column.defaultValue);\r\n                        else if (column.field == \"Active\" || column.field == \"IsActive\")\r\n                            checkBox.checked(true);\r\n\r\n                        if (index == 0)\r\n                            checkBox.focus();\r\n\r\n                        if (column.editable == false)\r\n                            checkBox.enabled(false);\r\n                        else\r\n                            checkBox.enabled(true);\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region String\r\n                case GridColumnTypeEnum.String:\r\n                    {\r\n                        let textBox = ControlManager.get<TextBox>(this._elementId + \"_textBox_\" + column.field);\r\n                        textBox.clear();\r\n\r\n                        if (columnValue != null)\r\n                            textBox.value(columnValue);\r\n                        else if (column.defaultValue != null)\r\n                            textBox.value(column.defaultValue);\r\n\r\n                        if (index == 0)\r\n                            textBox.focus();\r\n\r\n                        if (column.editable == false)\r\n                            textBox.enabled(false);\r\n                        else\r\n                            textBox.enabled(true);\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region Password\r\n                case GridColumnTypeEnum.PasswordViewable:\r\n                    {\r\n                        let textBox = ControlManager.get<TextBox>(this._elementId + \"_textBox_\" + column.field);\r\n                        textBox.clear();\r\n\r\n                        if (columnValue != null)\r\n                            textBox.value(columnValue);\r\n                        else if (column.defaultValue != null)\r\n                            textBox.value(column.defaultValue);\r\n\r\n                        if (index == 0)\r\n                            textBox.focus();\r\n\r\n                        if (column.editable == false)\r\n                            textBox.enabled(false);\r\n                        else\r\n                            textBox.enabled(true);\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region Date, DateTime, Time\r\n                case GridColumnTypeEnum.Date:\r\n                    {\r\n                        let datePicker = ControlManager.get<DatePicker>(this._elementId + \"_datePicker_\" + column.field);\r\n                        datePicker.clear();\r\n\r\n                        if (columnValue != null)\r\n                            datePicker.value(columnValue);\r\n                        else if (column.defaultValue != null)\r\n                            datePicker.value(new Date(column.defaultValue));\r\n\r\n                        if (index == 0)\r\n                            datePicker.focus();\r\n\r\n                        if (column.editable == false)\r\n                            datePicker.enabled(false);\r\n                        else\r\n                            datePicker.enabled(true);\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.DateTime:\r\n                    {\r\n                        let dateTimePicker = ControlManager.get<DatePicker>(this._elementId + \"_dateTimePicker_\" + column.field);\r\n                        dateTimePicker.clear();\r\n\r\n                        if (columnValue != null)\r\n                            dateTimePicker.value(columnValue);\r\n                        else if (column.defaultValue != null)\r\n                            dateTimePicker.value(new Date(column.defaultValue));\r\n\r\n                        if (index == 0)\r\n                            dateTimePicker.focus();\r\n\r\n                        if (column.editable == false)\r\n                            dateTimePicker.enabled(false);\r\n                        else\r\n                            dateTimePicker.enabled(true);\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.Time:\r\n                    {\r\n                        let timePicker = ControlManager.get<DatePicker>(this._elementId + \"_timePicker_\" + column.field);\r\n                        timePicker.clear();\r\n\r\n                        if (columnValue != null)\r\n                            timePicker.value(columnValue);\r\n                        else if (column.defaultValue != null)\r\n                            timePicker.value(new Date(column.defaultValue));\r\n\r\n                        if (index == 0)\r\n                            timePicker.focus();\r\n\r\n                        if (column.editable == false)\r\n                            timePicker.enabled(false);\r\n                        else\r\n                            timePicker.enabled(true);\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region ComboBox, DropDownList, DropDownTree\r\n                case GridColumnTypeEnum.DropDownList:\r\n                    {\r\n                        let dropDownList = ControlManager.get<ComboBox>(this._elementId + \"_dropDownList_\" + column.field);\r\n                        dropDownList.clearItems();\r\n                        dropDownList.items(column.dataItems);\r\n\r\n                        if (columnValue != null)\r\n                            dropDownList.value(columnValue);\r\n                        else if (column.defaultValue != null)\r\n                            dropDownList.value(column.defaultValue);\r\n\r\n                        if (column.editable == false)\r\n                            dropDownList.enabled(false);\r\n                        else\r\n                            dropDownList.enabled(true);\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.DropDownTree:\r\n                case GridColumnTypeEnum.DropDownTreeCheckboxes:\r\n                    {\r\n                        let dropDownTree = ControlManager.get<ComboBox>(this._elementId + \"_dropDownTree_\" + column.field);\r\n                        dropDownTree.clearItems();\r\n                        dropDownTree.items(column.dataItems);\r\n\r\n                        if (columnValue != null)\r\n                        {\r\n                            let value = this._actualEditedItem[column.field];\r\n                            if (typeof (value) === \"string\")\r\n                                value = value.split(\",\");\r\n                            else if (!Array.isArray(value))\r\n                                value = [value];\r\n\r\n                            dropDownTree.value(value);\r\n                        }\r\n                        else if (column.defaultValue != null)\r\n                        {\r\n                            let value = column.defaultValue;\r\n                            if (typeof (value) === \"string\")\r\n                                value = value.split(\",\");\r\n                            else if (!Array.isArray(value))\r\n                                value = [value];\r\n\r\n                            dropDownTree.value((typeof (value) === \"string\") ? value.split(\",\") : [value]);\r\n                        }\r\n\r\n                        if (column.editable == false)\r\n                            dropDownTree.enabled(false);\r\n                        else\r\n                            dropDownTree.enabled(true);\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.ComboBox:\r\n                    {\r\n                        let comboBox = ControlManager.get<ComboBox>(this._elementId + \"_comboBox_\" + column.field);\r\n                        comboBox.clearItems();\r\n                        comboBox.items(column.dataItems);\r\n\r\n                        if (columnValue != null)\r\n                            comboBox.value(columnValue);\r\n                        else if (column.defaultValue != null)\r\n                            comboBox.value(column.defaultValue);\r\n\r\n                        if (column.editable == false)\r\n                            comboBox.enabled(false);\r\n                        else\r\n                            comboBox.enabled(true);\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region Number, Currency, Percentage, Duration\r\n                case GridColumnTypeEnum.Number:\r\n                case GridColumnTypeEnum.Currency:\r\n                case GridColumnTypeEnum.Percentage:\r\n                case GridColumnTypeEnum.Duration:\r\n                    {\r\n                        let numericTextBox = ControlManager.get<TextBox>(this._elementId + \"_numericTextBox_\" + column.field);\r\n\r\n                        numericTextBox.clear();\r\n                        if (columnValue != null)\r\n                            numericTextBox.value(columnValue);\r\n                        else if (column.defaultValue != null)\r\n                            numericTextBox.value(column.defaultValue);\r\n\r\n                        if (index == 0)\r\n                            numericTextBox.focus();\r\n\r\n                        if (column.editable == false)\r\n                            numericTextBox.enabled(false);\r\n                        else\r\n                            numericTextBox.enabled(true);\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region Color\r\n                case GridColumnTypeEnum.Color:\r\n                    {\r\n                        let colorPicker = ControlManager.get<ColorPicker>(this._elementId + \"_colorPicker_\" + column.field);\r\n                        colorPicker.clear();\r\n\r\n                        if (columnValue != null)\r\n                            colorPicker.value(columnValue);\r\n                        else if (column.defaultValue != null)\r\n                            colorPicker.value(column.defaultValue);\r\n\r\n                        if (column.editable == false)\r\n                            colorPicker.enabled(false);\r\n                        else\r\n                            colorPicker.enabled(true);\r\n                    }\r\n                    break;\r\n                //#endregion\r\n            }\r\n            //#endregion\r\n\r\n            index++;\r\n        }\r\n    }\r\n\r\n    private saveAutoWindow()\r\n    {\r\n        let options = this.getOptions();\r\n\r\n        //#region Get edited item\r\n        if (this._actualEditedItem == null)\r\n            this._actualEditedItem = {};\r\n\r\n        let oldItem = jQuery.extend(true, {}, this._actualEditedItem);\r\n        for (let column of options.columns!.slice(1))\r\n        {\r\n            if (column.hidden)\r\n                continue;\r\n\r\n            //#region Type\r\n            switch (column.type)\r\n            {\r\n                //#region CheckBox\r\n                case GridColumnTypeEnum.Checkbox:\r\n                case GridColumnTypeEnum.Boolean:\r\n                    {\r\n                        let checkBox = ControlManager.get<CheckBox>(this._elementId + \"_checkBox_\" + column.field);\r\n                        this._actualEditedItem[column.field] = checkBox.checked();\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region String\r\n                case GridColumnTypeEnum.String:\r\n                    {\r\n                        let textBox = ControlManager.get<TextBox>(this._elementId + \"_textBox_\" + column.field);\r\n                        this._actualEditedItem[column.field] = textBox.value();\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region Password\r\n                case GridColumnTypeEnum.PasswordViewable:\r\n                    {\r\n                        let txtPassword = ControlManager.get<TextBox>(this._elementId + \"_textBox_\" + column.field);\r\n                        this._actualEditedItem[column.field] = txtPassword.value();\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region Date, DateTime, Time\r\n                case GridColumnTypeEnum.Date:\r\n                    {\r\n                        let datePicker = ControlManager.get<DatePicker>(this._elementId + \"_datePicker_\" + column.field);\r\n                        this._actualEditedItem[column.field] = datePicker.value();\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.DateTime:\r\n                    {\r\n                        let dateTimePicker = ControlManager.get<DatePicker>(this._elementId + \"_dateTimePicker_\" + column.field);\r\n                        this._actualEditedItem[column.field] = dateTimePicker.value();\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.Time:\r\n                    {\r\n                        let timePicker = ControlManager.get<DatePicker>(this._elementId + \"_timePicker_\" + column.field);\r\n                        this._actualEditedItem[column.field] = timePicker.value();\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region ComboBox, DropDownList, DropDownTree\r\n                case GridColumnTypeEnum.DropDownList:\r\n                    {\r\n                        let dropDownList = ControlManager.get<ComboBox>(this._elementId + \"_dropDownList_\" + column.field);\r\n                        this._actualEditedItem[column.field] = dropDownList.value();\r\n                        this._actualEditedItem[column.displayField!] = dropDownList.text();\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.DropDownTree:\r\n                    {\r\n                        let dropDownTree = ControlManager.get<ComboBox>(this._elementId + \"_dropDownTree_\" + column.field);\r\n                        this._actualEditedItem[column.field] = dropDownTree.value();\r\n                        this._actualEditedItem[column.displayField!] = dropDownTree.text();\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.DropDownTreeCheckboxes:\r\n                    {\r\n                        let dropDownTree = ControlManager.get<ComboBox>(this._elementId + \"_dropDownTree_\" + column.field);\r\n                        this._actualEditedItem[column.field] = dropDownTree.getCheckedValues();\r\n                        this._actualEditedItem[column.displayField!] = dropDownTree.getCheckedItems().map(k => k.text).vrToCommaSeparatedList();\r\n                    }\r\n                    break;\r\n                case GridColumnTypeEnum.ComboBox:\r\n                    {\r\n                        let comboBox = ControlManager.get<ComboBox>(this._elementId + \"_comboBox_\" + column.field);\r\n                        this._actualEditedItem[column.field] = comboBox.value();\r\n                        this._actualEditedItem[column.displayField!] = comboBox.text();\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region Number, Currency, Percentage, Duration\r\n                case GridColumnTypeEnum.Number:\r\n                case GridColumnTypeEnum.Currency:\r\n                case GridColumnTypeEnum.Percentage:\r\n                case GridColumnTypeEnum.Duration:\r\n                    {\r\n                        let numericTextBox = ControlManager.get<TextBox>(this._elementId + \"_numericTextBox_\" + column.field);\r\n                        this._actualEditedItem[column.field] = numericTextBox.value();\r\n                    }\r\n                    break;\r\n                //#endregion\r\n\r\n                //#region Color\r\n                case GridColumnTypeEnum.Color:\r\n                    {\r\n                        let colorPicker = ControlManager.get<ColorPicker>(this._elementId + \"_colorPicker_\" + column.field);\r\n                        this._actualEditedItem[column.field] = colorPicker.value();\r\n                    }\r\n                    break;\r\n                //#endregion\r\n            }\r\n            //#endregion\r\n        }\r\n        //#endregion\r\n\r\n        //#region Save request\r\n        let saveRequest = options.autoWindowSettings!.save;\r\n        if (saveRequest != null)\r\n        {\r\n            if (options.mode == GridModeEnum.Sync)\r\n                this.doWebApiCall(saveRequest, GridRequestTypeEnum.Save);\r\n            else\r\n            {\r\n                if (saveRequest.callback != null)\r\n                    saveRequest.callback({ actualItem: this._actualEditedItem, oldItem: oldItem });\r\n\r\n                this._wndAutoWindow.close();\r\n            }\r\n        }\r\n        else\r\n        {\r\n            for (let property of Object.getOwnPropertyNames(this._actualEditedItem))\r\n            {\r\n                let column = options.columns!.filter(k => k.field == property)[0];\r\n                if (column != null && column.type == GridColumnTypeEnum.Percentage && column.ignoreFactor != true)\r\n                    this._actualEditedItem[property] *= 100;\r\n            }\r\n\r\n            this.updateRow(this._actualEditedItem);\r\n            this._wndAutoWindow.close();\r\n\r\n            if (options.onDataSourceChanged != null)\r\n                options.onDataSourceChanged();\r\n        }\r\n        //#endregion\r\n    }\r\n    //#endregion\r\n\r\n    //#region Layout\r\n    private createWindowLayout()\r\n    {\r\n        if (this._wndLayout != null)\r\n            return;\r\n\r\n        let options = this.getOptions();\r\n        if (typeof (options.layoutSettings) === \"boolean\")\r\n            return;\r\n\r\n        this._wndLayout = createWindow(\r\n            {\r\n                addToControlList: false,\r\n                width: 500,\r\n                height: 300,\r\n                title: \"Gestisci layout\",\r\n                classContainer: this.element().id + \"_wndUtility\",\r\n                onClose: (e) =>\r\n                {\r\n                    puma(this._wndLayout.container()).remove();\r\n                    (this._wndLayout as any) = null;\r\n                },\r\n                footer:\r\n                    [\r\n                        { type: WindowFooterItemTypeEnum.Close },\r\n                        {\r\n                            type: WindowFooterItemTypeEnum.Custom, text: \"Layout base\", mode: ButtonModeEnum.Primary,\r\n                            align: WindowFooterItemAlignEnum.Left, onClick: (e) =>\r\n                            {\r\n                                this._actualLayout = null;\r\n                                this.changeLayout(true, this._originalOptionsForLayout);\r\n                            }\r\n                        },\r\n                        {\r\n                            type: WindowFooterItemTypeEnum.Custom, text: \"Carica\", mode: ButtonModeEnum.Primary,\r\n                            onClick: (e) =>\r\n                            {\r\n                                let checkedItems = this._grdLayout.getCheckedItems();\r\n                                if (checkedItems.length == 0)\r\n                                {\r\n                                    notifyWarning(\"Selezionare almeno un layout\");\r\n                                    return;\r\n                                }\r\n\r\n                                let checkedItem = checkedItems[0];\r\n                                if (this._actualLayout == null || (this._actualLayout != null && checkedItem.id != this._actualLayout.id))\r\n                                    this.loadLayout(checkedItem.layoutName);\r\n                            }\r\n                        }\r\n                    ]\r\n            });\r\n\r\n        puma(this._wndLayout.element()).vrAppendPuma(\"<div id='\" + this._elementId + \"_divWindowLayoutContainer' class='vrContainer'></div>\");\r\n        let divContainer = puma(\"#\" + this._elementId + \"_divWindowLayoutContainer\")[0];\r\n        puma(\"<table id='\" + this._elementId + \"_tblLayout'></table>\").vrAppendToPuma(divContainer);\r\n\r\n        //#region Grid layout\r\n        this._grdLayout = createGrid(\r\n            {\r\n                addToControlList: false,\r\n                footer: false,\r\n                pageSize: 400,\r\n                filterable: false,\r\n                checkboxes: GridCheckboxModeEnum.SingleCheck,\r\n                height: 144,\r\n                groupBy: null,\r\n                groupable: false,\r\n                rebind:\r\n                {//**********************TODO//**********************\r\n                    authKey: \"10(P9m+U3a@Mtt-Oeo\", method: \"/api/GridLayoutPersisterWebApi/GetLayoutList\",\r\n                    itemsPropertyName: \"tableLayoutList\", parameters: () =>\r\n                    {\r\n                        let options = this.getOptions();\r\n                        if (typeof (options.layoutSettings) === \"boolean\")\r\n                            return;\r\n\r\n                        return { pageName: window.location.href, gridName: options!.layoutSettings!.name }\r\n                    },\r\n                    callback: (response: any) =>\r\n                    {\r\n                        if (this._actualLayout != null)\r\n                            this._grdLayout.selectRowInternal(String(this._actualLayout.id), undefined, true);\r\n                    }\r\n                },\r\n                autoWindowSettings:\r\n                {\r\n                    save:\r\n                    {\r\n                        authKey: \"10(P9m+U3a@Mtt-Oeo\", method: \"/api/GridLayoutPersisterWebApi/EditLayout\",\r\n                        rebindGridAfterSave: true\r\n                    }\r\n                },\r\n                toolbar:\r\n                    [\r\n                        {\r\n                            type: GridToolbarItemType.Custom, icon: IconClassRegular.Xmark, text: \"Elimina\",\r\n                            confirmationMessage: \"Confermi di voler eliminare questo layout?\",\r\n                            onClick: (e) =>\r\n                            {\r\n                                let checkedItem = this._grdLayout.getCheckedItems()[0];\r\n                                this._grdLayout.deleteRow(checkedItem.id);\r\n\r\n                                let loadOriginalLayout = (this._actualLayout != null && checkedItem.id == this._actualLayout!.id);\r\n                                this.clearLayout(checkedItem.layoutName, loadOriginalLayout);\r\n\r\n                                if (this._grdLayout.getAllItems().length == 0)\r\n                                {\r\n                                    //#region Settings\r\n                                    ControlManager.get<SplitButton>(this._elementId + \"_spbSettings\").hideItem(\"manageLayout\");\r\n                                    window.setTimeout(() => this._wndLayout.close(), 300);\r\n                                    //#endregion\r\n                                }\r\n                            }\r\n                        },\r\n                        {\r\n                            type: GridToolbarItemType.Custom, icon: IconClassLight.Plus, text: \"Crea nuovo\",\r\n                            onClick: (e) =>\r\n                            {\r\n                                prompt(\"Assegna un nome a questo layout\", { title: \"Nuovo layout\" }).then((value) =>\r\n                                {\r\n                                    this.saveLayout(value, () => this._grdLayout.rebind());\r\n                                });\r\n                            }\r\n                        }\r\n                    ],\r\n                columns:\r\n                    [\r\n                        { type: GridColumnTypeEnum.String, title: \"Nome\", field: \"layoutName\", fitSpace: true },\r\n                        {\r\n                            type: GridColumnTypeEnum.DateTime, title: \"Ultima modifica\", field: \"layoutLastEditDate\",\r\n                            width: 200, editable: false, headerSettings: { textAlign: GridAlignEnum.Center }\r\n                        }\r\n                    ]\r\n            }, null, null, this._elementId + \"_tblLayout\");\r\n        //#endregion\r\n    }\r\n\r\n    private openWindowLayout()\r\n    {\r\n        this.createWindowLayout();\r\n        this._wndLayout.open();\r\n        this._grdLayout.rebind();\r\n    }\r\n\r\n    private doWebApiCallLayout<T>(layoutOperationType: GridLayoutOperationTypeEnum, request: any, callBack?: (e: T) => void)\r\n    {\r\n        let url = \"\";\r\n        switch (layoutOperationType)\r\n        {\r\n            case GridLayoutOperationTypeEnum.Save: url = \"/api/GridLayoutPersisterWebApi/SaveLayout\"; break;\r\n            case GridLayoutOperationTypeEnum.Load: url = \"/api/GridLayoutPersisterWebApi/LoadLayout\"; break;\r\n            case GridLayoutOperationTypeEnum.Clear: url = \"/api/GridLayoutPersisterWebApi/ClearLayout\"; break;\r\n            case GridLayoutOperationTypeEnum.Get: url = \"/api/GridLayoutPersisterWebApi/GetLayoutList\"; break;\r\n        }\r\n\r\n        //#region Call\r\n        request.AuthKey = \"10(P9m+U3a@Mtt-Oeo\";\r\n        $.ajax({\r\n            type: \"POST\",\r\n            contentType: \"application/json\",\r\n            data: JSON.stringify(request),\r\n            method: \"POST\",\r\n            processData: false,\r\n            async: !(layoutOperationType == GridLayoutOperationTypeEnum.Get),\r\n            dataType: \"json\",\r\n            url: url,\r\n            success: function (response: T, textStatus: string, jqXHR: JQueryXHR)\r\n            {\r\n                if (callBack != null)\r\n                    callBack(response);\r\n            }\r\n        });\r\n        //#endregion\r\n    }\r\n\r\n    //#region SaveLayout\r\n    saveLayout(layoutName: string, callBack?: Function)\r\n    {\r\n        let options = this.getOptions();\r\n        if (typeof (options.layoutSettings) === \"boolean\")\r\n            return;\r\n\r\n        if (layoutName == \"\")\r\n        {\r\n            notify(\"Inserire un nome del layout\");\r\n            return;\r\n        }\r\n\r\n        //#region LayoutJson\r\n        let layoutJson = new GridLayoutStructure();\r\n        layoutJson.filterConditions = Array.from(this._dictionaryFilterConditions.entries());\r\n\r\n        if (options.groupBy != null)\r\n        {\r\n            if ((options.groupBy as GridGroupBySettings).fields != null)\r\n            {\r\n                layoutJson.groupBy = new GridGroupBySettings();\r\n                layoutJson.groupBy.fields = (options.groupBy as GridGroupBySettings).fields;\r\n                layoutJson.groupBy.internalSortBy = (options.groupBy as GridGroupBySettings).internalSortBy;\r\n                layoutJson.groupBy.sortBy = (options.groupBy as GridGroupBySettings).sortBy;\r\n            }\r\n        }\r\n\r\n        layoutJson.pageSize = ((typeof (options.pageSize) == \"boolean\") || this._pageSizeUnlimited) ? 50 : options.pageSize!;\r\n        layoutJson.sortingInfo = this._actualSortingInfo;\r\n\r\n        let index = 0;\r\n        let layoutColumns: GridLayoutColumn[] = [];\r\n        for (let column of options.columns!)\r\n        {\r\n            let layoutColumn = new GridLayoutColumn();\r\n            layoutColumn.field = column.field;\r\n            layoutColumn.fitSpace = column.fitSpace;\r\n            layoutColumn.hidden = column.hidden;\r\n            layoutColumn.locked = column.locked;\r\n            layoutColumn.index = index;\r\n\r\n            let width = (column.width != null) ? (column.width) : ((column.type == GridColumnTypeEnum.EditButton) ? 32 : 100);\r\n            layoutColumn.width = width;\r\n\r\n            layoutColumns.push(layoutColumn);\r\n            index++;\r\n        }\r\n        layoutJson.columns = layoutColumns;\r\n        //#endregion\r\n\r\n        //#region Call\r\n        let saveLayoutRequest = new SaveLayoutRequest();\r\n        saveLayoutRequest.layoutJson = JSON.stringify(layoutJson);\r\n        saveLayoutRequest.pageName = window.location.href;\r\n        saveLayoutRequest.gridName = options.layoutSettings!.name;\r\n        saveLayoutRequest.layoutName = layoutName;\r\n\r\n        this.doWebApiCallLayout(GridLayoutOperationTypeEnum.Save, saveLayoutRequest, (response: any) =>\r\n        {\r\n            //#region Settings\r\n            if (this._actualLayout == null)\r\n            {\r\n                ControlManager.get<SplitButton>(this._elementId + \"_spbSettings\").showItem(\"manageLayout\");\r\n                let topSettingsBtnPosition = 0;\r\n                if (options.groupable) topSettingsBtnPosition = -127;\r\n                else topSettingsBtnPosition = -95;\r\n\r\n                puma(`<style>.vrContainer .grid_spbSettings .k-animation-container\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttop: ` + topSettingsBtnPosition + `px !important;\r\n\t\t\t\t\t}</style>`).vrAppendToPuma(\"head\");\r\n            }\r\n            //#endregion\r\n            //**********************TODO//**********************\r\n            if (saveLayoutRequest.layoutPropertyName == null)\r\n                saveLayoutRequest.layoutPropertyName = \"tableLayout\";\r\n\r\n            this._actualLayout = response[saveLayoutRequest.layoutPropertyName];\r\n            notify(\"Layout salvato correttamente\");\r\n\r\n            if (callBack != null)\r\n                callBack();\r\n        });\r\n        //#endregion\r\n    }\r\n    //#endregion\r\n\r\n    //#region ClearLayout\r\n    private clearLayout(layoutName: string, updateDataSource = false)\r\n    {\r\n        let options = this.getOptions();\r\n        if (typeof (options.layoutSettings) === \"boolean\")\r\n            return;\r\n\r\n        //#region Call\r\n        let clearLayoutRequest = new ClearLayoutRequest();\r\n        clearLayoutRequest.pageName = window.location.href;\r\n        clearLayoutRequest.gridName = options.layoutSettings!.name!;\r\n        clearLayoutRequest.layoutName = layoutName;\r\n\r\n        this.doWebApiCallLayout<ClearLayoutResponse>(GridLayoutOperationTypeEnum.Clear, clearLayoutRequest, (response) =>\r\n        {\r\n            if (updateDataSource)\r\n            {\r\n                this._actualLayout = null;\r\n                this.changeLayout(true, this._originalOptionsForLayout);\r\n            }\r\n        });\r\n        //#endregion\r\n    }\r\n    //#endregion\r\n\r\n    //#region LoadLayout\r\n    customLayouts()\r\n    {\r\n        return this._customLayouts;\r\n    }\r\n\r\n    activeLayout()\r\n    {\r\n        return this._actualLayout;\r\n    }\r\n\r\n    private loadLayout(layoutName: string)\r\n    {\r\n        let options = this.getOptions();\r\n        if (typeof (options.layoutSettings) === \"boolean\")\r\n            return;\r\n\r\n        //#region Call\r\n        let loadLayoutRequest = new LoadLayoutRequest();\r\n        loadLayoutRequest.pageName = window.location.href;\r\n        loadLayoutRequest.gridName = options.layoutSettings!.name;\r\n        loadLayoutRequest.layoutName = layoutName;\r\n\r\n        this.doWebApiCallLayout<LoadLayoutResponse>(GridLayoutOperationTypeEnum.Load, loadLayoutRequest, (response) =>\r\n        {\r\n            if (response.tableLayout != null && response.tableLayout.layoutJson != null)\r\n            {\r\n                this._actualLayout = response.tableLayout;\r\n                this.changeLayout(true);\r\n                notify(\"Layout caricato correttamente\");\r\n                this._wndLayout.close();\r\n            }\r\n            else\r\n                notify(\"Errore nel caricamento del layout\");\r\n        });\r\n        //#endregion\r\n    }\r\n\r\n    private changeLayout(updateDataSource = false, layoutJson?: GridLayoutStructure)\r\n    {\r\n        if (this._actualLayout != null || layoutJson != null)\r\n        {\r\n            let options = this.getOptions();\r\n            let json = (layoutJson != null) ? layoutJson : JSON.parse(this._actualLayout!.layoutJson) as GridLayoutStructure;\r\n\r\n            //#region GroupBy\r\n            if (options.groupable! && options.groupBy != null)\r\n            {\r\n                let oldGroupByList = [];\r\n                if ((options.groupBy as GridGroupBySettings).fields != null)\r\n                {\r\n                    for (let group of ((options.groupBy as GridGroupBySettings).fields as GridGroupByItem[]).map(k => k.field))\r\n                        oldGroupByList.push(group);\r\n                }\r\n\r\n                for (let groupRemoved of oldGroupByList)\r\n                    this.removeGroup(groupRemoved, false);\r\n            }\r\n\r\n            if (json.groupBy != null)\r\n            {\r\n                let groupByFields: GridGroupByItem[] = [];\r\n                if (Array.isArray(json.groupBy))\r\n                {\r\n                    for (let groupByField of json.groupBy)\r\n                        groupByFields.push({ field: UtilityManager.duplicate(groupByField) });\r\n\r\n                    options.groupBy = new GridGroupBySettings();\r\n                    options.groupBy.fields = UtilityManager.duplicate(groupByFields);\r\n                }\r\n                else\r\n                {\r\n                    groupByFields = UtilityManager.duplicate(json.groupBy.fields as GridGroupByItem[]);\r\n                    options.groupBy = UtilityManager.duplicate(json.groupBy);\r\n                }\r\n\r\n                if (groupByFields != null)\r\n                    this.addGroups(groupByFields, updateDataSource);\r\n            }\r\n            //#endregion\r\n\r\n            //#region PageSize\r\n            if (json.pageSize != null)\r\n            {\r\n                options.pageSize = json.pageSize;\r\n                if (updateDataSource)\r\n                {\r\n                    let ddlPageSize = ControlManager.get<ComboBox>(this._elementId + \"_ddlPageSize\");\r\n                    if (!ddlPageSize.items().map(k => k.value).includes(String(json.pageSize)))\r\n                    {\r\n                        let items = ddlPageSize.items();\r\n                        items.push({ text: String(json.pageSize), value: String(json.pageSize) });\r\n                        ddlPageSize.items(items);\r\n                    }\r\n                    ddlPageSize.value(String(json.pageSize), true);\r\n                }\r\n            }\r\n            //#endregion\r\n\r\n            //#region Filtering\r\n            this.clearFilters(false);\r\n            if (json.filterConditions != null && json.filterConditions.length > 0)\r\n            {\r\n                let dictionaryFilterConditions = new Map<string, GridFilterSettings>();\r\n                for (let filterCondition of json.filterConditions)\r\n                    dictionaryFilterConditions.set(filterCondition[0], filterCondition[1]);\r\n\r\n                this._dictionaryFilterConditions = dictionaryFilterConditions;\r\n            }\r\n            //#endregion\r\n\r\n            //#region Sorting\r\n            this.removeSort(false);\r\n            if (json.sortingInfo != null)\r\n                this._actualSortingInfo = json.sortingInfo;\r\n            //#endregion\r\n\r\n            //#region Columns\r\n            if (json.columns != null)\r\n            {\r\n                for (let jsonColumn of json.columns)\r\n                {\r\n                    let optionsColumn = options.columns!.filter(k => k.field == jsonColumn.field)[0];\r\n                    if (optionsColumn != null)\r\n                    {\r\n                        let optionsColumnIndex = options.columns!.indexOf(optionsColumn);\r\n                        (options.columns![optionsColumnIndex] as any).index = jsonColumn.index;\r\n\r\n                        if (jsonColumn.fitSpace !== true)\r\n                            options.columns![optionsColumnIndex].width = jsonColumn.width;\r\n\r\n                        //#region Header columns width\r\n                        if (jsonColumn.fitSpace !== true)\r\n                        {\r\n                            let thHeader = puma(this._divHeader).find(\"th[value='\" + jsonColumn.field + \"']\")[0];\r\n                            if (options.lockable && thHeader == null)\r\n                                thHeader = puma(this._divHeaderLocked).find(\"th[value='\" + jsonColumn.field + \"']\")[0];\r\n\r\n                            thHeader.style.width = jsonColumn.width + \"px\";\r\n\r\n                            if (options.filterable)\r\n                            {\r\n                                if (puma(this._divFilters).find(\"td[value='\" + jsonColumn.field + \"']\")[0] != null)\r\n                                    puma(this._divFilters).find(\"td[value='\" + jsonColumn.field + \"']\")[0].style.width = jsonColumn.width + \"px\";\r\n\r\n                                if (options.lockable)\r\n                                {\r\n                                    if (puma(this._divFiltersLocked).find(\"td[value='\" + jsonColumn.field + \"']\")[0] != null)\r\n                                        puma(this._divFiltersLocked).find(\"td[value='\" + jsonColumn.field + \"']\")[0].style.width = jsonColumn.width + \"px\";\r\n\r\n                                }\r\n                            }\r\n\r\n                            if (this._showTotals)\r\n                            {\r\n                                if (puma(this._divTotals).find(\"td[value='\" + jsonColumn.field + \"']\")[0] != null)\r\n                                    puma(this._divTotals).find(\"td[value='\" + jsonColumn.field + \"']\")[0].style.width = jsonColumn.width + \"px\";\r\n\r\n                                if (options.lockable)\r\n                                {\r\n                                    if (puma(this._divTotalsLocked).find(\"td[value='\" + jsonColumn.field + \"']\")[0] != null)\r\n                                        puma(this._divTotalsLocked).find(\"td[value='\" + jsonColumn.field + \"']\")[0].style.width = jsonColumn.width + \"px\";\r\n\r\n                                }\r\n                            }\r\n                        }\r\n                        //#endregion\r\n\r\n                        if (jsonColumn.hidden)\r\n                            this.hideColumn(jsonColumn.field, false);\r\n                        else\r\n                            this.showColumn(jsonColumn.field, false);\r\n\r\n                        if (jsonColumn.locked)\r\n                            this.lockColumn(jsonColumn.field, false);\r\n                        else\r\n                            this.unlockColumn(jsonColumn.field, false);\r\n                    }\r\n                }\r\n                options.columns!.vrSortAsc(\"index\");\r\n\r\n                //#region Order columns\r\n                let lastIndex = puma(this._divHeader).find(\"table th:last-child\").index();\r\n                for (let column of options.columns!)\r\n                {\r\n                    //#region Header\r\n                    let headerTh = puma(this._divHeader).find(\"table th[value='\" + column.field + \"']\")[0];\r\n                    puma(puma(this._divHeader).find(\"table th\")[lastIndex]).vrAfterPuma(headerTh);\r\n                    //#endregion\r\n\r\n                    //#region Filters\r\n                    if (options.filterable)\r\n                    {\r\n                        let filtersTd = puma(this._divFilters).find(\"table td[value='\" + column.field + \"']\")[0];\r\n                        puma(puma(this._divFilters).find(\"table td\")[lastIndex]).vrAfterPuma(filtersTd);\r\n                    }\r\n                    //#endregion\r\n\r\n                    //#region Totals\r\n                    if (this._showTotals)\r\n                    {\r\n                        let totalsTd = puma(this._divTotals).find(\"table td[value='\" + column.field + \"']\")[0];\r\n                        puma(puma(this._divTotals).find(\"table td\")[lastIndex]).vrAfterPuma(totalsTd);\r\n                    }\r\n                    //#endregion\r\n\r\n                    //#region Groups\r\n                    if (options.groupable)\r\n                    {\r\n                        let colGroupCol = puma(this._divBody).find(\"colgroup col[field='\" + column.field + \"']\")[0];\r\n                        puma(puma(this._divBody).find(\"colgroup col\")[lastIndex]).vrAfterPuma(colGroupCol);\r\n                    }\r\n                    //#endregion\r\n                }\r\n                //#endregion\r\n\r\n                this.recalculateWidth();\r\n            }\r\n            //#endregion\r\n\r\n            if (updateDataSource)\r\n            {\r\n                hideLoader(\"vrGridLoaderLayout\" + this._elementId);\r\n                if (this._originalDataSource.length > 2000)\r\n                    showLoader(this.container(), true, \"vrGridLoaderLayout\" + this._elementId);\r\n\r\n                window.setTimeout(() =>\r\n                {\r\n                    puma(this.element()).find(\"tbody\").remove();\r\n                    this.dataSource(this._originalDataSource);\r\n                    hideLoader(\"vrGridLoaderLayout\" + this._elementId);\r\n                }, 50);\r\n            }\r\n        }\r\n    }\r\n    //#endregion\r\n\r\n    //#endregion\r\n\r\n    //#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\n\r\n//#region Common\r\nclass GridWebApiRequest\r\n{\r\n    authKey?: string;\r\n    method?: string;\r\n    successNotificationMessage?: boolean | string;\r\n    errorNotificationMessage?: boolean | string;\r\n    rebindGridAfterSave?: boolean;\r\n    rebindGridAfterError?: boolean;\r\n    closeWindowAfterError?: boolean;\r\n    otherParameters?: any;\r\n    loadingElement?: boolean | HTMLElement | JQuery | string;\r\n\r\n    callback?: (response?: any) => void;\r\n    callbackBeforeDatasourceChange?: (response?: any) => void;\r\n    errorCallback?: (message?: string) => void;\r\n    parameters?: () => any;\r\n}\r\n\r\nenum GridRequestTypeEnum\r\n{\r\n    Delete = 0,\r\n    Rebind = 1,\r\n    Save = 2,\r\n    Excel = 3,\r\n    RebindSpecificRows = 4\r\n}\r\n//#endregion\r\n\r\n//#region Header columns\r\nexport class GridHeaderAndCellSettings\r\n{\r\n    textAlign?: GridAlignEnum;\r\n    backgroundColor?: string;\r\n    color?: string;\r\n    tooltip?: boolean | string | ((e: GridTooltipEvent) => string);\r\n    css?: string;\r\n}\r\n\r\nexport class GridHeaderSettings extends GridHeaderAndCellSettings\r\n{\r\n    icon?: IconClass;\r\n}\r\n\r\nexport class GridCellSettings extends GridHeaderAndCellSettings\r\n{\r\n    zeroIfNull?: boolean;\r\n}\r\n//#endregion\r\n\r\n//#region Controls settings\r\nclass GridControlData\r\n{\r\n    GridControlsSettings: GridControlsSettings;\r\n    columnType: GridColumnTypeEnum;\r\n}\r\n\r\nexport class GridControlsSettings\r\n{\r\n    onClick?: (e: GridControlsClickEvent) => void;\r\n    confirmationMessage?: string;\r\n    value?: string;\r\n    css?: string;\r\n    class?: string;\r\n    visible?: boolean;\r\n    enabled?: boolean;\r\n    tooltip?: string;\r\n}\r\n\r\nexport class GridCustomSettings extends GridControlsSettings\r\n{\r\n    template: string;\r\n    filterFields?: string[];\r\n}\r\n\r\nexport class GridIconSettings extends GridControlsSettings\r\n{\r\n    icon?: IconClass;\r\n    imageUrl?: string;\r\n    color?: string;\r\n}\r\n\r\nexport class GridImageSettings extends GridControlsSettings\r\n{\r\n    imageUrl?: string;\r\n    base64Bytes?: string;\r\n}\r\n\r\nexport class GridLabelSettings extends GridControlsSettings\r\n{\r\n    text?: string;\r\n    underlineMode?: GridLabelUnderlineMode;\r\n    bold?: boolean;\r\n    color?: string;\r\n    noBr?: boolean;\r\n}\r\n//#endregion\r\n\r\n//#region Rebind\r\nexport class GridRebindRequest extends GridWebApiRequest\r\n{\r\n    itemsPropertyName?: string;\r\n    rebindAtStartup?: boolean;\r\n    clearFilters?: boolean;\r\n    specificItemIdListPropertyName?: string;\r\n}\r\n\r\nclass GridSearchingInfo\r\n{\r\n    public field: string;\r\n    public text: string;\r\n}\r\n\r\nclass VrGridServerBindingSettings\r\n{\r\n    indexFrom?: number;\r\n    indexTo?: number;\r\n    columns?: GridColumn[];\r\n    sortingInfo?: GridSortingInfo | null;\r\n    filters?: Dictionary<string, GridFilterSettings>;\r\n    groupByFields?: string[] | null;\r\n    excel?: boolean;\r\n    excelFileName: string | undefined;\r\n}\r\n\r\nclass GridServerBindSettings\r\n{\r\n    public itemCountPropertyName?: string;\r\n    public totalsPropertyName?: string;\r\n    public excelDownloadUrlPropertyName?: string;\r\n}\r\n\r\nclass GridServerBindPagination\r\n{\r\n    indexFrom?: number;\r\n    indexTo?: number;\r\n}\r\n//#endregion\r\n\r\n//#regon Excel\r\nexport class GridExcelRequest extends GridWebApiRequest\r\n{\r\n    fileName?: string;\r\n}\r\n//#endregion\r\n\r\n//#region Events\r\nclass GridControlsClickEvent\r\n{\r\n    dataItem: any;\r\n}\r\n\r\nexport class GridTemplateEvent\r\n{\r\n    dataItem: any;\r\n    className?: string;\r\n    element?: HTMLTableCellElement;\r\n    empty?: boolean;\r\n}\r\n\r\nexport class GridTooltipEvent\r\n{\r\n    dataItem: any;\r\n    element?: HTMLTableCellElement;\r\n    empty: boolean;\r\n}\r\n\r\nexport class GridOnDataBoundEvent\r\n{\r\n    sender: Grid;\r\n}\r\n\r\nexport class GridOnRowDataBoundEvent\r\n{\r\n    sender: Grid;\r\n    rowElement: HTMLTableRowElement;\r\n    dataItem: any;\r\n    realDataItem: any;\r\n    empty?: boolean;\r\n}\r\n\r\nexport class GridSelectRowEvent\r\n{\r\n    sender: Grid;\r\n    rowElement: HTMLTableRowElement;\r\n    dataItem: any;\r\n    checked: boolean;\r\n    empty: boolean;\r\n    index: number;\r\n    shiftKey: boolean;\r\n    fromCheckbox: boolean;\r\n}\r\n\r\nexport class GridSelectAllRowsEvent\r\n{\r\n    sender: Grid;\r\n}\r\n\r\nexport class GridUnselectRowEvent\r\n{\r\n    sender: Grid;\r\n    rowElement: HTMLTableRowElement;\r\n    dataItem: any;\r\n}\r\n\r\nexport class GridUnselectAllRowsEvent\r\n{\r\n    sender: Grid;\r\n}\r\n\r\nexport class GridToolbarClickEvent\r\n{\r\n    sender: any;\r\n    type: GridToolbarItemType;\r\n    isDefaultPrevented: boolean;\r\n    deletedItems?: any[];\r\n\r\n    preventDefault()\r\n    {\r\n        this.isDefaultPrevented = true;\r\n    }\r\n}\r\n//#endregion\r\n\r\n//#region Toolbar\r\nexport class GridToolbarSwitchSettings\r\n{\r\n    labelOff?: string;\r\n    labelOn?: string;\r\n    checked?: boolean;\r\n    onCheck?: (e: GridToolbarSwitchEvent) => void;\r\n}\r\n\r\nclass GridToolbarSwitchEvent\r\n{\r\n    checked: boolean;\r\n}\r\n\r\nexport class GridToolbarDeleteRequest extends GridWebApiRequest\r\n{\r\n    deletedValuesPropertyName?: string;\r\n    valuePropertyName?: string;\r\n}\r\n//#endregion\r\n\r\n//#region Footer\r\nexport class GridFooterSettings\r\n{\r\n    maxVisiblePages?: number;\r\n    totalElements?: boolean | ((e: GridTotalElementTemplateEvent) => string | number);\r\n    showPagination?: boolean;\r\n    showPageSize?: boolean;\r\n    showSettings?: boolean;\r\n}\r\n\r\nclass GridTotalElementTemplateEvent\r\n{\r\n    firstIndex?: number;\r\n    lastIndex?: number;\r\n    dataItems: any[];\r\n    pageSelected: number;\r\n    numberOfPages: number;\r\n}\r\n//#endregion\r\n\r\n//#region Totals\r\nclass WorkerTotalsRequest\r\n{\r\n    dataItems: any[];\r\n    columnOptions: WorkerTotalsMessageColumnOptions[];\r\n    groupItems: WorkerTotalsGroupItem[];\r\n    isGroup: boolean;\r\n}\r\n\r\nclass WorkerTotalsMessageColumnOptions\r\n{\r\n    field: string;\r\n    decimalDigits: number;\r\n    aggregateMode: GridAggregateMode;\r\n    type: GridColumnTypeEnum;\r\n    countZeroInAverage?: boolean;\r\n    roundingSettings?: NumberFormatRoundingSettings;\r\n}\r\n\r\nclass WorkerTotalsGroupItem\r\n{\r\n    groupValue: string;\r\n    dataItems: any[];\r\n}\r\n\r\nclass WorkerTotalsResult\r\n{\r\n    field: string;\r\n    total: number;\r\n    decimalDigits: number;\r\n    roundingSettings?: NumberFormatRoundingSettings;\r\n    type: GridColumnTypeEnum;\r\n}\r\n//#endregion\r\n\r\n//#region Excel\r\nclass GridExcelRow\r\n{\r\n    cells: GridExcelCell[];\r\n}\r\n\r\nclass GridExcelCell\r\n{\r\n    title: string | undefined;\r\n    field: string;\r\n    text?: string;\r\n    bold?: boolean;\r\n    type?: GridColumnTypeEnum;\r\n    width?: number;\r\n    cellSettings?: GridHeaderAndCellSettings;\r\n    aggregate?: GridAggregateMode;\r\n    decimalDigits?: number;\r\n    hidden?: boolean;\r\n    locked?: boolean;\r\n    backgroundColor: string;\r\n    color: string;\r\n    roundingSettings?: NumberFormatRoundingSettings;\r\n}\r\n\r\nclass GenerateExcelRequest\r\n{\r\n    public headerRow: GridExcelRow;\r\n    public contentRows: GridExcelRow[];\r\n    public footerRow: GridExcelRow;\r\n    public excelFileName: string;\r\n    public AuthKey: string;\r\n    public groupBy?: string[] | null;\r\n    public exportHiddenColumns: boolean;\r\n}\r\n\r\nclass GenerateExcelResponse\r\n{\r\n    public downloadUrl: string;\r\n}\r\n//#endregion\r\n\r\n//#region Sorting\r\nclass GridSortingInfo\r\n{\r\n    field: string;\r\n    mode: GridSortDirectionEnum;\r\n}\r\n//#endregion\r\n\r\n//#region Auto window\r\nclass GridAutoWindowSettings\r\n{\r\n    save?: GridSaveRequest;\r\n    options?: GridAutoWindowOption;\r\n    onClose?(): void;\r\n}\r\n\r\nclass GridAutoWindowOption\r\n{\r\n    titleNew?: string;\r\n    titleEdit?: string;\r\n    height?: number | string;\r\n    width?: number | string;\r\n    showSaveButton?: boolean;\r\n    showCancelButton?: boolean;\r\n    textSaveButton?: string;\r\n    textCancelButton?: string;\r\n    confirmationMessage?: string;\r\n}\r\n\r\nclass GridSaveRequest extends GridWebApiRequest\r\n{\r\n    itemPropertyName?: string;\r\n}\r\n\r\nclass AutoWindowOpenEvent extends VrControlsEvent\r\n{\r\n    sender: Grid;\r\n    window: Window;\r\n    dataItem: any;\r\n    columns?: GridColumn[];\r\n}\r\n//#endregion\r\n//#region Grid actions (Show/Hide and GroupBy)\r\nenum GridActionEnum\r\n{\r\n    ShowHide,\r\n    GroupBy,\r\n    LockUnlock\r\n}\r\n//#endregion\r\n\r\n//#region Filtering\r\nexport class GridFilterSettings\r\n{\r\n    type: GridColumnTypeEnum;\r\n\r\n    dateFilterSettings?: GridDateFilterSettings | null;\r\n    numberFilterSettings?: GridNumberFilterSettings | null;\r\n    checkboxFilterSettings?: GridCheckboxFilterSettings | null;\r\n    stringFilterSettings?: GridStringFilterSettings | null;\r\n}\r\n\r\nclass GridDateFilterSettings\r\n{\r\n    filterTypeEnum: GridDateFilterTypeEnum;\r\n    dateFrom: Date;\r\n    dateTo?: Date | null;\r\n    specificValues: any[];\r\n}\r\n\r\nclass GridNumberFilterSettings\r\n{\r\n    filterTypeEnum: GridNumberFilterTypeEnum;\r\n    numberFrom: number;\r\n    numberTo?: number | null;\r\n    specificValues: any[];\r\n}\r\n\r\nclass GridCheckboxFilterSettings\r\n{\r\n    value: boolean;\r\n}\r\n\r\nclass GridStringFilterSettings\r\n{\r\n    text: string;\r\n}\r\n//#endregion\r\n\r\n//#region Drag&Drop\r\nclass DragSupportEvent\r\n{\r\n    onDragged?: null | ((e: DragEveryEvent) => void);\r\n    onDragging?: null | ((e: DragEveryEvent) => void);\r\n}\r\n\r\nclass DragEveryEvent\r\n{\r\n    left: number;\r\n    top: number;\r\n    element: HTMLElement;\r\n}\r\n\r\nclass GridColumnPosition\r\n{\r\n    left: number;\r\n    right: number;\r\n    field: string;\r\n    index: number;\r\n    th: HTMLElement;\r\n}\r\n//#endregion\r\n\r\n//#region GroupBy\r\nclass GridChildrenGroupRows\r\n{\r\n    children: HTMLElement[];\r\n    groupRows: HTMLElement[];\r\n    allRows: HTMLElement[];\r\n}\r\n//#endregion\r\n\r\n//#region Layout\r\nclass GridLayoutSettings\r\n{\r\n    //*****************TODO*************************** */\r\n    name?: string;\r\n    get?: GetLayoutListRequest;\r\n    save?: SaveLayoutRequest;\r\n    load?: LoadLayoutRequest;\r\n}\r\n\r\nclass GridLayoutStructure\r\n{\r\n    filterConditions?: any[] | null;\r\n    groupBy?: GridGroupBySettings | null;\r\n    pageSize: number;\r\n    sortingInfo?: GridSortingInfo | null;\r\n    columns: GridLayoutColumn[];\r\n}\r\n\r\nclass GridLayoutColumn\r\n{\r\n    width?: number;\r\n    fitSpace?: boolean;\r\n    hidden?: boolean;\r\n    locked?: boolean;\r\n    index: number;\r\n    field: string;\r\n}\r\n\r\nclass SaveLayoutRequest\r\n{\r\n    public method: string;\r\n    public authKey?: string;\r\n    public layoutJson?: string;\r\n    public pageName?: string;\r\n    public gridName?: string;\r\n    public layoutName?: string;\r\n    public layoutPropertyName?: string;\r\n}\r\n\r\nclass LoadLayoutRequest\r\n{\r\n    public method: string;\r\n    public authKey?: string;\r\n    public pageName?: string;\r\n    public gridName?: string;\r\n    public layoutName?: string;\r\n    public layoutPropertyName?: string;\r\n}\r\n\r\nclass LoadLayoutResponse\r\n{\r\n    public tableLayout: GridLayout;\r\n}\r\n\r\nclass ClearLayoutRequest\r\n{\r\n    public AuthKey: string;\r\n    public pageName: string;\r\n    public gridName: string;\r\n    public layoutName: string;\r\n}\r\n\r\nclass ClearLayoutResponse\r\n{\r\n\r\n}\r\n\r\nclass GetLayoutListRequest\r\n{\r\n    public method: string;\r\n    public authKey?: string;\r\n    public pageName?: string;\r\n    public gridName?: string;\r\n    public layoutsPropertyName?: string;\r\n}\r\n\r\nclass GridLayout\r\n{\r\n    layoutName: string;\r\n    layoutLastEditDate: Date;\r\n    id: number;\r\n    layoutJson: string;\r\n}\r\n\r\nenum GridLayoutOperationTypeEnum\r\n{\r\n    Save,\r\n    Load,\r\n    Clear,\r\n    Get\r\n}\r\n//#endregion\r\n\r\nclass TempRebindInfo\r\n{\r\n    yPosition: number;\r\n    checkedValues: string[];\r\n    page: number;\r\n}\r\n\r\nexport class GridRow \r\n{\r\n    element: HTMLElement;\r\n    cells: HTMLElement[];\r\n    index: number;\r\n    dataItemId: string;\r\n    id: string;\r\n\r\n    findControl<T extends VrControl>(uniqueName: string)\r\n    {\r\n        let controlElement = puma(this.element).find(\"*[uniqueName='\" + uniqueName + \"']\")[0];\r\n        if (controlElement != null)\r\n            return ControlManager.get<T>(controlElement.id);\r\n        else\r\n            return null;\r\n    }\r\n}\r\n//#endregion","import { puma } from \"../../src/ui/vr\";\r\n\r\ndeclare function printJS(options: PrintJsOptions): void;\r\n\r\nexport class PrintManager\r\n{\r\n\t//#region Print bytes, pdf, image or html\r\n\tpublic static printBytes(base64Bytes: string, options?: PrintFileOptions)\r\n\t{\r\n\t\tthis.printBytesFileImageOrHtml(base64Bytes, PrintTypeEnum.Pdf, options, true);\r\n\t}\r\n\r\n\tpublic static printPdf(path: string, options?: PrintFileOptions)\r\n\t{\r\n\t\tthis.printBytesFileImageOrHtml(path, PrintTypeEnum.Pdf, options);\r\n\t}\r\n\r\n\tpublic static printImage(path: string, options?: PrintFileOptions)\r\n\t{\r\n\t\tthis.printBytesFileImageOrHtml(path, PrintTypeEnum.Image, options);\r\n\t}\r\n\r\n\tpublic static printHtml(elementId: string, options?: PrintFileOptions)\r\n\t{\r\n\t\tif (elementId.startsWith(\"#\"))\r\n\t\t\telementId = elementId.substr(1);\r\n\r\n\t\tthis.printBytesFileImageOrHtml(elementId, PrintJsTypeEnum.Html, options);\r\n\t}\r\n\r\n\tpublic static printElement(element: string | HTMLElement | JQuery, options?: PrintHtmlOptions)\r\n\t{\r\n\t\tlet elementId = \"\";\r\n\t\tif (typeof (element) != \"string\")\r\n\t\t\telementId = puma(element)[0].id;\r\n\r\n\t\tif (elementId == \"\" || elementId == null)\r\n\t\t{\r\n\t\t\tpuma(element)[0].id = \"vr_printTemp\";\r\n\t\t\telementId = \"vr_printTemp\";\r\n\t\t}\r\n\r\n\t\tif (!elementId.startsWith(\"#\"))\r\n\t\t\telementId = \"#\" + elementId;\r\n\r\n\t\tif (options == null) options = new PrintHtmlOptions();\r\n\t\tpuma(elementId).printThis({\r\n\t\t\tpageTitle: options.pageTitle,\r\n\t\t\tremoveInlineStyles: options.removeInlineStyles,\r\n\t\t\tprintDelay: options.printDelay,\r\n\t\t\theader: options.header,\r\n\t\t\tfooter: options.footer,\r\n\t\t\tremoveScripts: options.removeScripts,\r\n\t\t\tdebug: options.debug,\r\n\t\t\tbeforePrint: options.beforePrint,\r\n\t\t\timportCSS: true,\r\n\t\t\timportStyle: true,\r\n\t\t\tafterPrint: () =>\r\n\t\t\t{\r\n\t\t\t\tif (elementId == \"#vr_printTemp\")\r\n\t\t\t\t\tpuma(element)[0].id = \"\";\r\n\r\n\t\t\t\tif (options!.afterPrint != null)\r\n\t\t\t\t\toptions!.afterPrint();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate static printBytesFileImageOrHtml(pathBytesOrId: string, type: PrintTypeEnum | string, options?: PrintFileOptions, base64: boolean = false)\r\n\t{\r\n\t\tif (pathBytesOrId == \"\")\r\n\t\t\treturn;\r\n\r\n\t\tlet title = undefined;\r\n\t\tlet documentTitle = \"File_\" + new Date().toLocaleString();\r\n\t\tlet customCss = undefined;\r\n\t\tif (options != null)\r\n\t\t{\r\n\t\t\tif (options.type != null) type = options.type;\r\n\t\t\tif (options.headerTitle != null) title = options.headerTitle;\r\n\t\t\tif (options.documentTitle != null) documentTitle = options.documentTitle;\r\n\t\t\tif (options.customCss != null) customCss = options.customCss;\r\n\t\t}\r\n\r\n\t\tlet printJsOptions = new PrintJsOptions();\r\n\t\tprintJsOptions.printable = pathBytesOrId;\r\n\t\tprintJsOptions.type = type;\r\n\t\tprintJsOptions.base64 = base64;\r\n\t\tprintJsOptions.header = title;\r\n\t\tprintJsOptions.documentTitle = documentTitle;\r\n\t\tprintJsOptions.style = customCss;\r\n\t\tthis.print(printJsOptions);\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Print grid\r\n\tpublic static printGrid(jsonData: any, options?: PrintGridOptions)\r\n\t{\r\n\t\tif (jsonData == null)\r\n\t\t\treturn;\r\n\r\n\t\tlet headerCss = undefined;\r\n\t\tlet contentCss = undefined;\r\n\t\tlet properties: string[] | null = null;\r\n\t\tlet title = undefined;\r\n\t\tlet repeatHeaderOnEveryPage = true;\r\n\t\tlet documentTitle = \"File_\" + new Date().toLocaleString();\r\n\t\tif (options != null)\r\n\t\t{\r\n\t\t\tif (options.headerCss != null) headerCss = options.headerCss;\r\n\t\t\tif (options.contentCss != null) contentCss = options.contentCss;\r\n\t\t\tif (options.properties != null) properties = options.properties;\r\n\t\t\tif (options.headerTitle != null) title = options.headerTitle;\r\n\t\t\tif (options.repeatHeaderOnEveryPages != null) repeatHeaderOnEveryPage = options.repeatHeaderOnEveryPages;\r\n\t\t\tif (options.documentTitle != null) documentTitle = options.documentTitle;\r\n\t\t}\r\n\r\n\t\tlet printJsOptions = new PrintJsOptions();\r\n\t\tprintJsOptions.printable = jsonData;\r\n\t\tprintJsOptions.type = PrintJsTypeEnum.Json;\r\n\t\tprintJsOptions.properties = (properties == null) ? Object.getOwnPropertyNames(jsonData) : properties;\r\n\t\tprintJsOptions.gridHeaderStyle = headerCss;\r\n\t\tprintJsOptions.gridStyle = contentCss;\r\n\t\tprintJsOptions.header = title;\r\n\t\tprintJsOptions.repeatTableHeader = repeatHeaderOnEveryPage;\r\n\t\tprintJsOptions.documentTitle = documentTitle;\r\n\t\tthis.print(printJsOptions);\r\n\t}\r\n\t//#endregion\r\n\r\n\tprivate static print(options: PrintJsOptions)\r\n\t{\r\n\t\tprintJS(options);\r\n\t}\r\n}\r\n\r\n//#region Classes\r\nclass PrintJsOptions\r\n{\r\n\tpublic printable: string | string[];\r\n\tpublic type?: string;\r\n\tpublic base64?: boolean;\r\n\tpublic properties?: string[];\r\n\tpublic gridHeaderStyle?: string;\r\n\tpublic gridStyle?: string;\r\n\tpublic header?: string;\r\n\tpublic repeatTableHeader?: boolean;\r\n\tpublic documentTitle?: string;\r\n\tpublic style?: string;\r\n}\r\n\r\nenum PrintJsTypeEnum\r\n{\r\n\tPdf = \"pdf\",\r\n\tHtml = \"html\",\r\n\tImage = \"image\",\r\n\tJson = \"json\"\r\n}\r\n\r\nexport enum PrintTypeEnum\r\n{\r\n\tPdf = \"pdf\",\r\n\tImage = \"image\"\r\n}\r\n\r\nexport class PrintFileOptions\r\n{\r\n\tpublic type?: PrintTypeEnum;\r\n\tpublic loadingMessage?: string;\r\n\tpublic headerTitle?: string;\r\n\tpublic documentTitle?: string;\r\n\tpublic customCss?: string;\r\n}\r\n\r\nexport class PrintHtmlOptions\r\n{\r\n\tpageTitle?: string;\r\n\tremoveInlineStyles?: boolean;\r\n\tprintDelay?: number;\r\n\theader?: string | HTMLElement | JQuery;\r\n\tfooter?: string | HTMLElement | JQuery;\r\n\tremoveScripts?: boolean;\r\n\tdebug?: boolean;\r\n\r\n\tbeforePrint?: Function;\r\n\tafterPrint?: Function;\r\n}\r\n\r\nclass PrintGridOptions\r\n{\r\n\tpublic headerCss?: string;\r\n\tpublic contentCss?: string;\r\n\tpublic properties?: string[];\r\n\tpublic loadingMessage?: string;\r\n\tpublic headerTitle?: string;\r\n\tpublic repeatHeaderOnEveryPages?: boolean;\r\n\tpublic documentTitle?: string;\r\n}\r\n//#endregion\r\n\r\n//#region PrintThis\r\n(function ($)\r\n{\r\n\r\n\tfunction appendContent($el: any, content: any)\r\n\t{\r\n\t\tif (!content) return;\r\n\r\n\t\t// Simple test for a jQuery element\r\n\t\t$el.append(content.jquery ? content.clone() : content);\r\n\t}\r\n\r\n\tfunction appendBody($body: any, $element: any, opt: any)\r\n\t{\r\n\t\t// Clone for safety and convenience\r\n\t\t// Calls clone(withDataAndEvents = true) to copy form values.\r\n\t\tvar $content = $element.clone(opt.formValues);\r\n\r\n\t\tif (opt.formValues)\r\n\t\t{\r\n\t\t\t// Copy original select and textarea values to their cloned counterpart\r\n\t\t\t// Makes up for inability to clone select and textarea values with clone(true)\r\n\t\t\tcopyValues($element, $content, 'select, textarea');\r\n\t\t}\r\n\r\n\t\tif (opt.removeScripts)\r\n\t\t{\r\n\t\t\t$content.find('script').remove();\r\n\t\t}\r\n\r\n\t\tif (opt.printContainer)\r\n\t\t{\r\n\t\t\t// grab $.selector as container\r\n\t\t\t$content.appendTo($body);\r\n\t\t} else\r\n\t\t{\r\n\t\t\t// otherwise just print interior elements of container\r\n\t\t\t$content.each(function (index: number, element: any)\r\n\t\t\t{\r\n\t\t\t\t$(element).children().appendTo($body)\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// Copies values from origin to clone for passed in elementSelector\r\n\tfunction copyValues(origin: any, clone: any, elementSelector: any)\r\n\t{\r\n\t\tvar $originalElements = origin.find(elementSelector);\r\n\r\n\t\tclone.find(elementSelector).each(function (index: any, item: any)\r\n\t\t{\r\n\t\t\t$(item).val($originalElements.eq(index).val());\r\n\t\t});\r\n\t}\r\n\r\n\tvar opt: any;\r\n\t($.fn as any).printThis = function (options: any)\r\n\t{\r\n\t\topt = $.extend({}, ($.fn as any).printThis.defaults, options);\r\n\t\tvar $element = this instanceof jQuery ? this : $(this);\r\n\r\n\t\tvar strFrameName = \"printThis-\" + (new Date()).getTime();\r\n\r\n\t\tif (window.location.hostname !== document.domain && navigator.userAgent.match(/msie/i))\r\n\t\t{\r\n\t\t\t// Ugly IE hacks due to IE not inheriting document.domain from parent\r\n\t\t\t// checks if document.domain is set by comparing the host name against document.domain\r\n\t\t\tvar iframeSrc = \"javascript:document.write(\\\"<head><script>document.domain=\\\\\\\"\" + document.domain + \"\\\\\\\";</s\" + \"cript></head><body></body>\\\")\";\r\n\t\t\tvar printI = document.createElement('iframe');\r\n\t\t\tprintI.name = \"printIframe\";\r\n\t\t\tprintI.id = strFrameName;\r\n\t\t\tprintI.className = \"MSIE\";\r\n\t\t\tdocument.body.appendChild(printI);\r\n\t\t\tprintI.src = iframeSrc;\r\n\r\n\t\t} else\r\n\t\t{\r\n\t\t\t// other browsers inherit document.domain, and IE works if document.domain is not explicitly set\r\n\t\t\tvar $frame = $(\"<iframe id='\" + strFrameName + \"' name='printIframe' />\");\r\n\t\t\t$frame.appendTo(\"body\");\r\n\t\t}\r\n\r\n\t\tvar $iframe = $(\"#\" + strFrameName);\r\n\r\n\t\t// show frame if in debug mode\r\n\t\tif (!opt.debug) $iframe.css({\r\n\t\t\tposition: \"absolute\",\r\n\t\t\twidth: \"0px\",\r\n\t\t\theight: \"0px\",\r\n\t\t\tleft: \"-600px\",\r\n\t\t\ttop: \"-600px\"\r\n\t\t});\r\n\r\n\t\t// before print callback\r\n\t\tif (typeof opt.beforePrint === \"function\")\r\n\t\t{\r\n\t\t\topt.beforePrint();\r\n\t\t}\r\n\r\n\t\t// $iframe.ready() and $iframe.load were inconsistent between browsers\r\n\t\tsetTimeout(function ()\r\n\t\t{\r\n\r\n\t\t\t// Add doctype to fix the style difference between printing and render\r\n\t\t\tfunction setDocType($iframe: any, doctype: any)\r\n\t\t\t{\r\n\t\t\t\tvar win, doc;\r\n\t\t\t\twin = $iframe.get(0);\r\n\t\t\t\twin = win.contentWindow || win.contentDocument || win;\r\n\t\t\t\tdoc = win.document || win.contentDocument || win;\r\n\t\t\t\tdoc.open();\r\n\t\t\t\tdoc.write(doctype);\r\n\t\t\t\tdoc.close();\r\n\t\t\t}\r\n\r\n\t\t\tif (opt.doctypeString)\r\n\t\t\t{\r\n\t\t\t\tsetDocType($iframe, opt.doctypeString);\r\n\t\t\t}\r\n\r\n\t\t\tvar $doc = $iframe.contents(),\r\n\t\t\t\t$head = $doc.find(\"head\"),\r\n\t\t\t\t$body = $doc.find(\"body\"),\r\n\t\t\t\t$base = $('base'),\r\n\t\t\t\tbaseURL;\r\n\r\n\t\t\t// add base tag to ensure elements use the parent domain\r\n\t\t\tif (opt.base === true && $base.length > 0)\r\n\t\t\t{\r\n\t\t\t\t// take the base tag from the original page\r\n\t\t\t\tbaseURL = $base.attr('href');\r\n\t\t\t} else if (typeof opt.base === 'string')\r\n\t\t\t{\r\n\t\t\t\t// An exact base string is provided\r\n\t\t\t\tbaseURL = opt.base;\r\n\t\t\t} else\r\n\t\t\t{\r\n\t\t\t\t// Use the page URL as the base\r\n\t\t\t\tbaseURL = document.location.protocol + '//' + document.location.host;\r\n\t\t\t}\r\n\r\n\t\t\t$head.append('<base href=\"' + baseURL + '\">');\r\n\r\n\t\t\t// import page stylesheets\r\n\t\t\tif (opt.importCSS) $(\"link[rel=stylesheet]\").each(function (index: number, element: any)\r\n\t\t\t{\r\n\t\t\t\tvar href = $(element).attr(\"href\");\r\n\t\t\t\tif (href)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar media = $(element).attr(\"media\") || \"all\";\r\n\t\t\t\t\t$head.append(\"<link type='text/css' rel='stylesheet' href='\" + href + \"' media='\" + media + \"'>\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// import style tags\r\n\t\t\tif (opt.importStyle) $(\"style\").each(function (index: number, element: any)\r\n\t\t\t{\r\n\t\t\t\t$head.append(element.outerHTML);\r\n\t\t\t});\r\n\r\n\t\t\t// add title of the page\r\n\t\t\tif (opt.pageTitle) $head.append(\"<title>\" + opt.pageTitle + \"</title>\");\r\n\r\n\t\t\t// import additional stylesheet(s)\r\n\t\t\tif (opt.loadCSS)\r\n\t\t\t{\r\n\t\t\t\tif ($.isArray(opt.loadCSS))\r\n\t\t\t\t{\r\n\t\t\t\t\tjQuery.each(opt.loadCSS, function (index: any, value: any)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$head.append(\"<link type='text/css' rel='stylesheet' href='\" + value + \"'>\");\r\n\t\t\t\t\t});\r\n\t\t\t\t} else\r\n\t\t\t\t{\r\n\t\t\t\t\t$head.append(\"<link type='text/css' rel='stylesheet' href='\" + opt.loadCSS + \"'>\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar pageHtml = $('html')[0];\r\n\r\n\t\t\t// CSS VAR in html tag when dynamic apply e.g.  document.documentElement.style.setProperty(\"--foo\", bar);\r\n\t\t\t$doc.find('html').prop('style', pageHtml.style.cssText);\r\n\r\n\t\t\t// copy 'root' tag classes\r\n\t\t\tvar tag = opt.copyTagClasses;\r\n\t\t\tif (tag)\r\n\t\t\t{\r\n\t\t\t\ttag = tag === true ? 'bh' : tag;\r\n\t\t\t\tif (tag.indexOf('b') !== -1)\r\n\t\t\t\t{\r\n\t\t\t\t\t$body.addClass($('body')[0].className);\r\n\t\t\t\t}\r\n\t\t\t\tif (tag.indexOf('h') !== -1)\r\n\t\t\t\t{\r\n\t\t\t\t\t$doc.find('html').addClass(pageHtml.className);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// print header\r\n\t\t\tappendContent($body, opt.header);\r\n\r\n\t\t\tif (opt.canvas)\r\n\t\t\t{\r\n\t\t\t\t// add canvas data-ids for easy access after cloning.\r\n\t\t\t\tvar canvasId = 0;\r\n\t\t\t\t// .addBack('canvas') adds the top-level element if it is a canvas.\r\n\t\t\t\t($element as any).find('canvas').addBack('canvas').each(function (index: number, element: any)\r\n\t\t\t\t{\r\n\t\t\t\t\t$(element).attr('data-printthis', canvasId++);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tappendBody($body, $element, opt);\r\n\r\n\t\t\tif (opt.canvas)\r\n\t\t\t{\r\n\t\t\t\t// Re-draw new canvases by referencing the originals\r\n\t\t\t\t$body.find('canvas').each(function (index: number, element: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar cid = $(element).data('printthis'),\r\n\t\t\t\t\t\t$src = $('[data-printthis=\"' + cid + '\"]');\r\n\r\n\t\t\t\t\telement.getContext('2d').drawImage($src[0], 0, 0);\r\n\r\n\t\t\t\t\t// Remove the markup from the original\r\n\t\t\t\t\tif ($.isFunction($.fn.removeAttr))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$src.removeAttr('data-printthis');\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$.each($src, function (i: any, el: any)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tel.removeAttribute('data-printthis');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// remove inline styles\r\n\t\t\tif (opt.removeInline)\r\n\t\t\t{\r\n\t\t\t\t// Ensure there is a selector, even if it's been mistakenly removed\r\n\t\t\t\tvar selector = opt.removeInlineSelector || '*';\r\n\t\t\t\t// $.removeAttr available jQuery 1.7+\r\n\t\t\t\tif ($.isFunction(($ as any).removeAttr))\r\n\t\t\t\t{\r\n\t\t\t\t\t$body.find(selector).removeAttr(\"style\");\r\n\t\t\t\t} else\r\n\t\t\t\t{\r\n\t\t\t\t\t$body.find(selector).attr(\"style\", \"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// print \"footer\"\r\n\t\t\tappendContent($body, opt.footer);\r\n\r\n\t\t\t// attach event handler function to beforePrint event\r\n\t\t\tfunction attachOnBeforePrintEvent($iframe: any, beforePrintHandler: any)\r\n\t\t\t{\r\n\t\t\t\tvar win = $iframe.get(0);\r\n\t\t\t\twin = win.contentWindow || win.contentDocument || win;\r\n\r\n\t\t\t\tif (typeof beforePrintHandler === \"function\")\r\n\t\t\t\t{\r\n\t\t\t\t\tif ('matchMedia' in win)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\twin.matchMedia('print').addListener(function (mql: any)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (mql.matches) beforePrintHandler();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\twin.onbeforeprint = beforePrintHandler;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tattachOnBeforePrintEvent($iframe, opt.beforePrintEvent);\r\n\r\n\t\t\tsetTimeout(function ()\r\n\t\t\t{\r\n\t\t\t\tif ($iframe.hasClass(\"MSIE\"))\r\n\t\t\t\t{\r\n\t\t\t\t\t// check if the iframe was created with the ugly hack\r\n\t\t\t\t\t// and perform another ugly hack out of neccessity\r\n\t\t\t\t\t(window.frames as any)[\"printIframe\"].focus();\r\n\t\t\t\t\t$head.append(\"<script>  window.print(); </s\" + \"cript>\");\r\n\t\t\t\t} else\r\n\t\t\t\t{\r\n\t\t\t\t\t// proper method\r\n\t\t\t\t\tif (document.queryCommandSupported(\"print\"))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t($iframe[0] as any).contentWindow.document.execCommand(\"print\", false, null);\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t($iframe[0] as any).contentWindow.focus();\r\n\t\t\t\t\t\t($iframe[0] as any).contentWindow.print();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// remove iframe after print\r\n\t\t\t\tif (!opt.debug)\r\n\t\t\t\t{\r\n\t\t\t\t\tsetTimeout(function ()\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$iframe.remove();\r\n\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// after print callback\r\n\t\t\t\tif (typeof opt.afterPrint === \"function\")\r\n\t\t\t\t{\r\n\t\t\t\t\topt.afterPrint();\r\n\t\t\t\t}\r\n\r\n\t\t\t}, opt.printDelay);\r\n\r\n\t\t}, 333);\r\n\r\n\t};\r\n\r\n\t// defaults\r\n\t($.fn as any).printThis.defaults = {\r\n\t\tdebug: false,               // show the iframe for debugging\r\n\t\timportCSS: true,            // import parent page css\r\n\t\timportStyle: false,         // import style tags\r\n\t\tprintContainer: true,       // print outer container/$.selector\r\n\t\tloadCSS: \"\",                // path to additional css file - use an array [] for multiple\r\n\t\tpageTitle: \"\",              // add title to print page\r\n\t\tremoveInline: false,        // remove inline styles from print elements\r\n\t\tremoveInlineSelector: \"*\",  // custom selectors to filter inline styles. removeInline must be true\r\n\t\tprintDelay: 333,            // variable print delay\r\n\t\theader: null,               // prefix to html\r\n\t\tfooter: null,               // postfix to html\r\n\t\tbase: false,                // preserve the BASE tag or accept a string for the URL\r\n\t\tformValues: true,           // preserve input/form values\r\n\t\tcanvas: false,              // copy canvas content\r\n\t\tdoctypeString: '<!DOCTYPE html>', // enter a different doctype for older markup\r\n\t\tremoveScripts: false,       // remove script tags from print content\r\n\t\tcopyTagClasses: false,      // copy classes from the html & body tag\r\n\t\tbeforePrintEvent: null,     // callback function for printEvent in iframe\r\n\t\tbeforePrint: null,          // function called before iframe is filled\r\n\t\tafterPrint: null            // function called before iframe is removed\r\n\t};\r\n})(jQuery);\r\n//#endregion","import { DeviceManager } from \"../../../src/managers/deviceManager\";\r\nimport { AnimationShowEnum, AnimationHideEnum, ColorSettings, div, icon, IconClassLight, IconClass, NotifierPositionEnum, NotifierTypeEnum, puma, shadowRoot, NotifierOptions, IconClassRegular } from \"../vr\";\r\n\r\n//#region Control\r\nexport class Notifier\r\n{\r\n\tprivate _options: NotifierOptions;\r\n\tprivate _container: HTMLElement;\r\n\tprivate _arrow: HTMLElement;\r\n\tprivate _element: HTMLElement;\r\n\r\n\tconstructor(text: string, options?: NotifierOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new NotifierOptions();\r\n\r\n\t\tif (options.type == null) options.type = NotifierTypeEnum.Default;\r\n\t\tif (options.width == null) options.width = (DeviceManager.isMobile()) ? \"100%\" : ((options.target == null) ? \"undefined\" : \"max-content\");\r\n\t\tif (options.bold == null) options.bold = false;\r\n\t\tif (options.position == null) options.position = (options.target == null) ? NotifierPositionEnum.TopCenter : NotifierPositionEnum.RightMiddle;\r\n\t\tif (options.hideSettings == null) options.hideSettings = new NotifierHideSettings();\r\n\t\tif (options.hideSettings.autoHide == null || options.hideSettings.autoHide === true) options.hideSettings.autoHide = 3000;\r\n\t\tif (options.hideSettings.clickToHide == null) options.hideSettings.clickToHide = false;\r\n\t\tif (options.hideSettings.clickToHide === true) options.hideSettings.autoHide = false;\r\n\t\tif (options.hideSettings.duration == null) options.hideSettings.duration = 300;\r\n\t\tif (options.hideSettings.animation == null) options.hideSettings.animation = AnimationHideEnum.SlideUp;\r\n\r\n\t\tif (options.showSettings == null) options.showSettings = new NotifierShowSettings();\r\n\t\tif (options.showSettings.duration == null) options.showSettings.duration = 300;\r\n\t\tif (options.showSettings.animation == null) options.showSettings.animation = AnimationShowEnum.SlideDown;\r\n\r\n\t\tif (options.colorSettings == null) options.colorSettings = new ColorSettings();\r\n\t\tif (options.colorSettings.background == null) options.colorSettings.background = \"#e3f1fa\";\r\n\t\tif (options.colorSettings.textColor == null) options.colorSettings.textColor = \"#000\";\r\n\t\tif (options.colorSettings.border == null) options.colorSettings.border = \"#c6edff\";\r\n\r\n\t\tif (DeviceManager.isMobile())\r\n\t\t{\r\n\t\t\tif (options.target == null) options.position = NotifierPositionEnum.TopCenter;\r\n\t\t\telse options.position = NotifierPositionEnum.BottomCenter;\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\tthis._options = options;\r\n\r\n\t\t//#region Notification areas\r\n\t\tif (!this.isOnTarget())\r\n\t\t{\r\n\t\t\tif (puma(\".vrNotifierArea\" + options.position).length == 0)\r\n\t\t\t\tpuma(\"<div class='vrNotifierArea\" + options.position + \"'></div>\").appendTo((shadowRoot() != null) ? shadowRoot() : document.body);\r\n\r\n\t\t\tif (DeviceManager.isMobile())\r\n\t\t\t{\r\n\t\t\t\tif (puma(\".vrNotifierAreaTopCenter\")[0] != null)\r\n\t\t\t\t\tpuma(\".vrNotifierAreaTopCenter\")[0].style.cssText += \"left: 0px; width: Calc(100% - 22px);\";\r\n\r\n\t\t\t\tif (puma(\".vrNotifierAreaBottomCenter\")[0] != null)\r\n\t\t\t\t\tpuma(\".vrNotifierAreaBottomCenter\")[0].style.cssText += \"left: 0px; width: Calc(100% - 22px);\";\r\n\t\t\t}\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\tthis.prepareNotification(text);\r\n\t\tthis.show();\r\n\t}\r\n\r\n\tprivate prepareNotification(text: string)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tlet containerToAdd = this.getContainerToAdd();\r\n\r\n\t\tthis._container = div(containerToAdd, { class: \"vrNotifierContainer\", css: (options.cssContainer != null) ? options.cssContainer : \"\" }, true);\r\n\t\tthis._arrow = div(this._container, { class: \"vrNotifierArrow\" });\r\n\t\tthis._element = div(this._container, { class: \"vrNotifier \" + ((options.class != null) ? options.class : \"\"), css: (options.css != null) ? options.css : \"\" });\r\n\r\n\t\tif (DeviceManager.isMobile())\r\n\t\t\tthis._container.style.cssText += \"left: 0px;\";\r\n\r\n\t\t//#region Bold\r\n\t\tif (options.bold)\r\n\t\t\tpuma(this._element).css(\"font-weight\", \"600\");\r\n\t\t//#endregion\r\n\r\n\t\t//#region Font size\r\n\t\tif (options.fontSize != null)\r\n\t\t\tthis._element.style.cssText += \"font-size: \" + options.fontSize + \";\";\r\n\t\t//#endregion\r\n\r\n\t\t//#region Target\r\n\t\tif (this.isOnTarget())\r\n\t\t{\r\n\t\t\tif (typeof (options.target) == \"string\" && !options.target.startsWith(\"#\"))\r\n\t\t\t\toptions.target = \"#\" + options.target;\r\n\r\n\t\t\toptions.target = puma(options.target)[0];\r\n\t\t\tpuma(this._container).insertBefore(options.target);\r\n\r\n\t\t\tthis._container.style.cssText += \"width: 0; height: 0; position: absolute; display: inline-block;\";\r\n\t\t\tthis._arrow.style.cssText += \"display: block;\";\r\n\t\t\tthis._element.style.cssText += \"position: absolute;\";\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis._container.style.cssText += \"position: relative; margin: 5px;\";\r\n\t\t\tthis._arrow.style.cssText += \"display: none;\";\r\n\t\t\tthis._element.style.cssText += \"position: relative;\";\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Width\r\n\t\tif (options.width != null)\r\n\t\t\tpuma(this._element).width(options.width);\r\n\t\t//#endregion\r\n\r\n\t\tlet color = options.colorSettings!.textColor;\r\n\t\tlet backgroundColor = options.colorSettings!.background;\r\n\t\tlet borderColor = options.colorSettings!.border;\r\n\t\tlet iconClass = options.icon;\r\n\r\n\t\t//#region Type\r\n\t\tswitch (options.type)\r\n\t\t{\r\n\t\t\tcase NotifierTypeEnum.Error:\r\n\t\t\t\t{\r\n\t\t\t\t\tcolor = \"#B94A48\";\r\n\t\t\t\t\tbackgroundColor = \"#F2DEDE\";\r\n\t\t\t\t\tborderColor = \"#EED3D7\";\r\n\t\t\t\t\ticonClass = IconClassRegular.CircleExclamation;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase NotifierTypeEnum.Warning:\r\n\t\t\t\t{\r\n\t\t\t\t\tcolor = \"#684200\";\r\n\t\t\t\t\tbackgroundColor = \"#FCF8E3\";\r\n\t\t\t\t\tborderColor = \"#FBEED5\";\r\n\t\t\t\t\ticonClass = IconClassRegular.TriangleExclamation;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase NotifierTypeEnum.Info:\r\n\t\t\t\t{\r\n\t\t\t\t\tcolor = \"#3A87AD\";\r\n\t\t\t\t\tbackgroundColor = \"#D9EDF7\";\r\n\t\t\t\t\tborderColor = \"#BCE8F1\";\r\n\t\t\t\t\ticonClass = IconClassRegular.Info;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase NotifierTypeEnum.Success:\r\n\t\t\t\t{\r\n\t\t\t\t\tcolor = \"#468847\";\r\n\t\t\t\t\tbackgroundColor = \"#DFF0D8\";\r\n\t\t\t\t\tborderColor = \"#D6E9C6\";\r\n\t\t\t\t\ticonClass = IconClassRegular.Check;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Icon\r\n\t\tif (iconClass != null && options.icon !== false)\r\n\t\t\tpuma(this._element).append(icon(iconClass as any, null, { css: \"margin-right: 8px;\" }));\r\n\t\t//#endregion\r\n\r\n\t\t//#region Color\r\n\t\tpuma(this._element).css(\"background-color\", backgroundColor);\r\n\t\tpuma(this._element).css(\"color\", color);\r\n\t\tpuma(this._element).css(\"border\", \"solid 1px \" + borderColor);\r\n\t\t//#endregion\r\n\r\n\t\t//#region Text\r\n\t\tif (options.customHtml != null)\r\n\t\t{\r\n\t\t\t//#region Custom HTML\r\n\t\t\tif (typeof (options.customHtml) == \"string\")\r\n\t\t\t\tpuma(this._element).append(options.customHtml.replace(\"#text#\", text));\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tlet event = new NotifierCustomHtmlEvent();\r\n\t\t\t\tevent.sender = this;\r\n\t\t\t\tevent.divContainer = this._element;\r\n\t\t\t\toptions.customHtml(event);\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\t\t}\r\n\t\telse\r\n\t\t\tpuma(this._element).append(\"<label>\" + text + \"</label>\");\r\n\t\t//#endregion\t\r\n\r\n\t\tif (this.isOnTarget())\r\n\t\t{\r\n\t\t\t//#region Arrow\r\n\t\t\tlet borderTopArrow = \"border-right: 5px solid transparent; border-left: 5px solid transparent; border-top: 5px solid \" + backgroundColor + \";\";\r\n\t\t\tlet borderBottomArrow = \"border-right: 5px solid transparent; border-left: 5px solid transparent; border-bottom: 5px solid \" + backgroundColor + \";\";\r\n\t\t\tlet borderLeftArrow = \"border-top: 5px solid transparent; border-bottom: 5px solid transparent; border-left: 5px solid \" + backgroundColor + \";\";\r\n\t\t\tlet borderRightArrow = \"border-top: 5px solid transparent; border-bottom: 5px solid transparent; border-right: 5px solid \" + backgroundColor + \";\";\r\n\t\t\t//#endregion\r\n\r\n\t\t\tlet offsetLeft = this.targetOptions().marginLeft;\r\n\t\t\tlet topElement = null, rightElement = null, bottomElement = null, leftElement = null;\r\n\t\t\tswitch (options.position)\r\n\t\t\t{\r\n\t\t\t\t//#region Top\r\n\t\t\t\tcase NotifierPositionEnum.TopCenter:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet diffLeft = ((this.element().offsetWidth - this.targetOptions().width) * -1) / 2;\r\n\t\t\t\t\t\tleftElement = diffLeft + offsetLeft;\r\n\t\t\t\t\t\tbottomElement = 4;\r\n\r\n\t\t\t\t\t\tthis._arrow.style.cssText += \"left: \" + ((this.targetOptions().width / 2 - 5) + offsetLeft) + \"px; bottom: 0px;\" + borderTopArrow;\r\n\t\t\t\t\t\tthis._element.style.cssText += \"left: \" + leftElement + \"px; bottom: \" + bottomElement + \"px;\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase NotifierPositionEnum.TopRight:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tleftElement = offsetLeft + this.targetOptions().width - this.element().offsetWidth;\r\n\t\t\t\t\t\tbottomElement = 4;\r\n\r\n\t\t\t\t\t\tthis._arrow.style.cssText += \"left: \" + ((this.targetOptions().width / 2 - 5) + offsetLeft) + \"px; bottom: 0px;\" + borderTopArrow;\r\n\t\t\t\t\t\tthis._element.style.cssText += \"left: \" + leftElement + \"px; bottom: \" + bottomElement + \"px;\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase NotifierPositionEnum.TopLeft:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tleftElement = offsetLeft;\r\n\t\t\t\t\t\tbottomElement = 4;\r\n\r\n\t\t\t\t\t\tthis._arrow.style.cssText += \"left: \" + ((this.targetOptions().width / 2 - 5) + offsetLeft) + \"px; bottom: 0px;\" + borderTopArrow;\r\n\t\t\t\t\t\tthis._element.style.cssText += \"left: \" + leftElement + \"px; bottom: \" + bottomElement + \"px;\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//#endregion\r\n\r\n\t\t\t\t//#region Right\r\n\t\t\t\tcase NotifierPositionEnum.RightMiddle:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet diffTop = ((this.element().offsetHeight - this.target().offsetHeight) * -1) / 2;\r\n\t\t\t\t\t\tleftElement = (this.target().offsetWidth + 4) + offsetLeft;\r\n\t\t\t\t\t\ttopElement = diffTop;\r\n\r\n\t\t\t\t\t\tthis._arrow.style.cssText += \"left: \" + (this.targetOptions().width + offsetLeft) + \"px; top: \" + (puma(this.target()).offset().top + (this.target().offsetHeight / 2) - 5) + \"px;\" + borderRightArrow;\r\n\t\t\t\t\t\tthis._element.style.cssText += \"left: \" + leftElement + \"px; top: \" + topElement + \"px;\";\r\n\t\t\t\t\t\tthis._container.style.cssText += \"left: \" + leftElement + \"px; top: \" + topElement + \"px;\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase NotifierPositionEnum.RightTop:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tleftElement = (this.target().offsetWidth + 4) + offsetLeft;\r\n\t\t\t\t\t\ttopElement = 0;\r\n\r\n\t\t\t\t\t\tthis._arrow.style.cssText += \"left: \" + (this.target().offsetWidth + offsetLeft) + \"px; top: \" + ((this.target().offsetHeight / 2) - 5) + \"px;\" + borderRightArrow;\r\n\t\t\t\t\t\tthis._element.style.cssText += \"left: \" + leftElement + \"px; top: \" + topElement + \"px;\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase NotifierPositionEnum.RightBottom:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet diffTop = Math.abs((this.element().offsetHeight - this.target().offsetHeight));\r\n\t\t\t\t\t\tleftElement = (this.target().offsetWidth + 4) + offsetLeft;\r\n\t\t\t\t\t\ttopElement = -(diffTop);\r\n\r\n\t\t\t\t\t\tthis._arrow.style.cssText += \"left: \" + (this.target().offsetWidth + offsetLeft) + \"px; top: \" + ((this.target().offsetHeight / 2) - 5) + \"px;\" + borderRightArrow;\r\n\t\t\t\t\t\tthis._element.style.cssText += \"left: \" + leftElement + \"px; top: \" + topElement + \"px;\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//#endregion\r\n\r\n\t\t\t\t//#region Left\r\n\t\t\t\tcase NotifierPositionEnum.LeftMiddle:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet diffTop = ((this.element().offsetHeight - this.target().offsetHeight) * -1) / 2;\r\n\t\t\t\t\t\trightElement = -(offsetLeft - 4);\r\n\t\t\t\t\t\ttopElement = diffTop;\r\n\r\n\t\t\t\t\t\tthis._arrow.style.cssText += \"right: -\" + (offsetLeft) + \"px; top: \" + ((this.target().offsetHeight / 2) - 5) + \"px;\" + borderLeftArrow;\r\n\t\t\t\t\t\tthis._element.style.cssText += \"right: \" + rightElement + \"px; top: \" + diffTop + \"px;\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase NotifierPositionEnum.LeftTop:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trightElement = -(offsetLeft - 4);\r\n\t\t\t\t\t\ttopElement = 0;\r\n\r\n\t\t\t\t\t\tthis._arrow.style.cssText += \"right: -\" + (offsetLeft) + \"px; top: \" + ((this.target().offsetHeight / 2) - 5) + \"px;\" + borderLeftArrow;\r\n\t\t\t\t\t\tthis._element.style.cssText += \"right: \" + rightElement + \"px; top: \" + topElement + \"px;\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase NotifierPositionEnum.LeftBottom:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet diffTop = Math.abs((this.element().offsetHeight - this.target().offsetHeight));\r\n\t\t\t\t\t\trightElement = -(offsetLeft - 4);\r\n\t\t\t\t\t\ttopElement = -(diffTop);\r\n\r\n\t\t\t\t\t\tthis._arrow.style.cssText += \"right: -\" + (offsetLeft) + \"px; top: \" + ((this.target().offsetHeight / 2) - 5) + \"px;\" + borderLeftArrow;\r\n\t\t\t\t\t\tthis._element.style.cssText += \"right: \" + rightElement + \"px; top: \" + topElement + \"px;\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//#endregion\r\n\r\n\t\t\t\t//#region Bottom\r\n\t\t\t\tcase NotifierPositionEnum.BottomCenter:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet diffLeft = ((this.element().offsetWidth - this.targetOptions().width) * -1) / 2;\r\n\t\t\t\t\t\tleftElement = diffLeft + offsetLeft;\r\n\t\t\t\t\t\ttopElement = this.targetOptions().height + 4;\r\n\r\n\t\t\t\t\t\tthis._arrow.style.cssText += \"left: \" + ((this.targetOptions().width / 2 - 5) + offsetLeft) + \"px; top: \" + this.targetOptions().height + \"px;\" + borderBottomArrow;\r\n\t\t\t\t\t\tthis._element.style.cssText += \"left: \" + leftElement + \"px; top: \" + topElement + \"px;\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase NotifierPositionEnum.BottomRight:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tleftElement = offsetLeft + this.targetOptions().width - this.element().offsetWidth;\r\n\t\t\t\t\t\ttopElement = this.targetOptions().height + 4;\r\n\r\n\t\t\t\t\t\tthis._arrow.style.cssText += \"left: \" + ((this.targetOptions().width / 2 - 5) + offsetLeft) + \"px; top: \" + this.targetOptions().height + \"px;\" + borderBottomArrow;\r\n\t\t\t\t\t\tthis._element.style.cssText += \"left: \" + leftElement + \"px; top: \" + topElement + \"px;\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase NotifierPositionEnum.BottomLeft:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tleftElement = offsetLeft;\r\n\t\t\t\t\t\ttopElement = this.targetOptions().height + 4;\r\n\r\n\t\t\t\t\t\tthis._arrow.style.cssText += \"left: \" + ((this.targetOptions().width / 2 - 5) + offsetLeft) + \"px; top: \" + this.targetOptions().height + \"px;\" + borderBottomArrow;\r\n\t\t\t\t\t\tthis._element.style.cssText += \"left: \" + leftElement + \"px; top: \" + topElement + \"px;\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//#endregion\r\n\t\t\t}\r\n\r\n\t\t\tif (leftElement != null && leftElement < 0)\r\n\t\t\t{\r\n\t\t\t\tthis._element.style.cssText += \"left: 0px;\";\r\n\t\t\t\tthis._container.style.cssText += \"left: 0px;\";\r\n\t\t\t}\r\n\r\n\t\t\tif (topElement != null && topElement < 0)\r\n\t\t\t{\r\n\t\t\t\tthis._element.style.cssText += \"top: 0px;\";\r\n\t\t\t\tthis._container.style.cssText += \"top: 0px;\";\r\n\t\t\t}\r\n\r\n\t\t\t// if (puma(this.element()).offset().left + puma(this.element()).width() > document.body.clientWidth)\r\n\t\t\t// \tthis._element.style.cssText += \"left: unset; right: 0px;\";\r\n\t\t}\r\n\r\n\t\tpuma(this._element).hide();\r\n\t\tpuma(this._arrow).hide();\r\n\t}\r\n\r\n\tprivate getContainerToAdd()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tlet containerToAdd: HTMLElement | null = null;\r\n\r\n\t\tif (this.isOnTarget())\r\n\t\t\tcontainerToAdd = document.body;\r\n\t\telse\r\n\t\t\tcontainerToAdd = puma(\".vrNotifierArea\" + options.position);\r\n\r\n\t\treturn containerToAdd!;\r\n\t}\r\n\r\n\tcontainer()\r\n\t{\r\n\t\treturn this._container;\r\n\t}\r\n\r\n\tvisible(state?: boolean)\r\n\t{\r\n\t\tif (state != null)\r\n\t\t{\r\n\t\t\tif (state) this.show();\r\n\t\t\telse this.hide();\r\n\t\t}\r\n\r\n\t\treturn puma(this._element).is(\":visible\");\r\n\t}\r\n\r\n\tshow(text?: string)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tlet showSettings = options.showSettings!;\r\n\t\tlet hideSettings = options.hideSettings!;\r\n\t\tlet duration = showSettings.duration;\r\n\r\n\t\tswitch (showSettings.animation)\r\n\t\t{\r\n\t\t\tcase AnimationShowEnum.Default: puma(this._element).show(duration); break;\r\n\t\t\tcase AnimationShowEnum.FadeIn: puma(this._element).fadeIn(duration); break;\r\n\t\t\tcase AnimationShowEnum.SlideDown: puma(this._element).slideDown(duration); break;\r\n\t\t\tcase AnimationShowEnum.None: puma(this._element).show(); break;\r\n\t\t\tdefault:\r\n\t\t\t\tpuma(this._element).show(duration); break;\r\n\t\t}\r\n\t\tpuma(this._arrow).show();\r\n\r\n\t\tif (hideSettings.autoHide !== false)\r\n\t\t\twindow.setTimeout(() => this.hide(), hideSettings.autoHide as number);\r\n\t\telse if (hideSettings.clickToHide === true)\r\n\t\t\tpuma(this._container).on(\"click\", (e: JQuery.ClickEvent) => this.hide());\r\n\r\n\t\tif (text != null)\r\n\t\t\tpuma(this._element).append(\"<label>\" + text + \"</label>\");\r\n\r\n\t\tpuma(this._element).on(\"click\", () =>\r\n\t\t{\r\n\t\t\tif (options.onClick != null)\r\n\t\t\t{\r\n\t\t\t\tlet clickEvent = new NotifierOnClickEvent();\r\n\t\t\t\tclickEvent.sender = this;\r\n\t\t\t\tclickEvent.text = text;\r\n\t\t\t\toptions.onClick(clickEvent);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\topen(text?: string)\r\n\t{\r\n\t\tthis.show(text);\r\n\t}\r\n\r\n\thide()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tlet hideSettings = options.hideSettings!;\r\n\r\n\t\tlet duration = hideSettings.duration;\r\n\t\tswitch (hideSettings.animation)\r\n\t\t{\r\n\t\t\tcase AnimationHideEnum.Default: puma(this._element).hide(duration); break;\r\n\t\t\tcase AnimationHideEnum.FadeOut: puma(this._element).fadeOut(duration); break;\r\n\t\t\tcase AnimationHideEnum.SlideUp: puma(this._element).slideUp(duration); break;\r\n\t\t\tcase AnimationHideEnum.None: puma(this._element).hide(); break;\r\n\t\t\tdefault:\r\n\t\t\t\tpuma(this._element).hide(duration); break;\r\n\t\t}\r\n\t\tpuma(this._arrow).hide();\r\n\r\n\t\twindow.setTimeout(() => puma(this._container).remove(), duration);\r\n\t}\r\n\r\n\tclose()\r\n\t{\r\n\t\tthis.hide();\r\n\t}\r\n\r\n\tisOnTarget()\r\n\t{\r\n\t\treturn this.target() != null;\r\n\t}\r\n\r\n\ttarget()\r\n\t{\r\n\t\treturn this.getOptions().target as HTMLElement;\r\n\t}\r\n\r\n\ttargetOptions()\r\n\t{\r\n\t\tlet targetOptions = new TargetOptions();\r\n\t\ttargetOptions.width = this.target().offsetWidth;\r\n\t\ttargetOptions.height = this.target().offsetHeight;\r\n\t\ttargetOptions.offsetLeft = this.target().offsetLeft;\r\n\t\ttargetOptions.offsetTop = this.target().offsetTop;\r\n\t\ttargetOptions.marginTop = puma(this.target()).css(\"marginTop\").getNumericPart();\r\n\t\ttargetOptions.marginRight = puma(this.target()).css(\"marginRight\").getNumericPart();\r\n\t\ttargetOptions.marginBottom = puma(this.target()).css(\"marginBottom\").getNumericPart();\r\n\t\ttargetOptions.marginLeft = puma(this.target()).css(\"marginLeft\").getNumericPart();\r\n\r\n\t\treturn targetOptions;\r\n\t}\r\n\r\n\telement()\r\n\t{\r\n\t\treturn this._element;\r\n\t}\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this._options;\r\n\t}\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nexport class NotifierShowSettings\r\n{\r\n\tduration: number;\r\n\tanimation?: AnimationShowEnum;\r\n}\r\n\r\nexport class NotifierCustomHtmlEvent\r\n{\r\n\tsender: Notifier;\r\n\tdivContainer: HTMLElement;\r\n}\r\n\r\nclass TargetOptions\r\n{\r\n\theight: number;\r\n\twidth: number;\r\n\tmarginLeft: number;\r\n\tmarginRight: number;\r\n\tmarginTop: number;\r\n\tmarginBottom: number;\r\n\toffsetLeft: number;\r\n\toffsetTop: number;\r\n}\r\n\r\nexport class NotifierOnClickEvent\r\n{\r\n\tsender: Notifier;\r\n\ttext?: string;\r\n}\r\n\r\nexport class NotifierHideSettings\r\n{\r\n\tautoHide?: boolean | number;\r\n\tclickToHide?: boolean;\r\n\tduration?: number;\r\n\tanimation?: AnimationHideEnum;\r\n}\r\n//#endregion","import { ControlTypeEnum, LabelModeEnum, DateModeEnum, puma, ColorSettings, TextAlignEnum, LabelUnderlineMode, PositionEnum } from \"../vr\";\r\nimport { VrControlOptions, VrControl, VrControlsEvent } from \"../common\";\r\nimport { UtilityManager } from \"../../../src/managers/utilityManager\";\r\n\r\n//#region Options\r\nexport class LabelOptions extends VrControlOptions\r\n{\r\n    text?: string | number | Date;\r\n    key?: string;\r\n    tooltip?: boolean | string;\r\n    colorSettings?: ColorSettings;\r\n    fontSize?: number | string;\r\n    fontFamily?: string;\r\n    bold?: boolean;\r\n    noBr?: boolean | number;\r\n    mode?: LabelModeEnum;\r\n    align?: TextAlignEnum;\r\n    linkCss?: string;\r\n    underlineMode?: LabelUnderlineMode;\r\n\r\n    onClick?: (e: LabelClickEvent) => void;\r\n    onHover?: (e: LabelHoverEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Label extends VrControl\r\n{\r\n    constructor(element: HTMLElement, options?: LabelOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new LabelOptions();\r\n\r\n        if (options.text == null) options.text = \"\";\r\n        if (options.noBr == null) options.noBr = false;\r\n        if (options.mode == null) options.mode = LabelModeEnum.Default;\r\n\r\n        if (options.mode == LabelModeEnum.Currency && options.align == null)\r\n            options.align = TextAlignEnum.Right;\r\n\r\n        if (options.align == null) options.align = TextAlignEnum.Left;\r\n        if (options.tabIndex == null) options.tabIndex = -1;\r\n        //#endregion\r\n\r\n        super(element, options, ControlTypeEnum.Label);\r\n\r\n        if (options.label != null && options.labelSettings!.position == PositionEnum.Left)\r\n            this.element().style.cssText += \"margin-top: -2px;\";\r\n\r\n        //#region NoBr\r\n        if (options.noBr !== false)\r\n        {\r\n            if (options.noBr === true)\r\n            {\r\n                this.element().style.cssText += \"white-space: nowrap; overflow:hidden; margin-bottom: -6px; text-overflow: ellipsis; display: inline-block;\";\r\n                if (options.width == null)\r\n                    this.element().style.cssText += \"width: 100%;\";\r\n            }\r\n            else\r\n                this.element().style.cssText += \"overflow: hidden; display: -webkit-inline-box; -webkit-line-clamp: \" + options.noBr + \"; -webkit-box-orient: vertical;white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;\";\r\n        }\r\n        //#endregion\r\n\r\n        //#region Text/Tooltip\r\n        this.value(options.text);\r\n\r\n        if (options.tooltip != null && options.tooltip !== false)\r\n            this.tooltip((options.tooltip === true) ? options.text : options.tooltip);\r\n        //#endregion\r\n\r\n        //#region Value\r\n        if (options.key != null)\r\n            puma(this.element()).attr(\"key\", options.key);\r\n        //#endregion\r\n\r\n        //#region Color settings\r\n        if (options.colorSettings != null)\r\n        {\r\n            let colorSettings = options.colorSettings;\r\n            if (colorSettings.textColor != null)\r\n                this.color(colorSettings.textColor);\r\n            if (colorSettings.background != null)\r\n                this.backgroundColor(colorSettings.background);\r\n            if (colorSettings.border != null)\r\n                this.borderColor(colorSettings.border);\r\n        }\r\n        //#endregion\r\n\r\n        //#region Font\r\n        let font = \"\";\r\n        if (options.fontSize != null)\r\n        {\r\n            if (typeof (options.fontSize) == \"number\")\r\n                options.fontSize = options.fontSize + \"px\";\r\n\r\n            font += \"font-size: \" + options.fontSize + \";\";\r\n        }\r\n        if (options.fontFamily != null)\r\n            font += \"font-family: \" + options.fontFamily + \";\";\r\n        if (options.bold === true)\r\n            font += \"font-weight: 600;\";\r\n\r\n        this.element().style.cssText += font;\r\n        //#endregion\r\n\r\n        //#region Align\r\n        this.element().style.cssText += \"text-align: \" + options.align + \";\";\r\n        this.container().style.cssText += \"text-align: \" + options.align + \";\";\r\n        //#endregion\r\n\r\n        //#region Underline\r\n        let underlineOnHoverClass = \"\";\r\n        let underlineCss = \"\";\r\n        if (options.underlineMode != null)\r\n        {\r\n            switch (options.underlineMode)\r\n            {\r\n                case LabelUnderlineMode.Always: underlineCss += \"text-decoration: underline\"; break;\r\n                case LabelUnderlineMode.None: underlineCss += \"text-decoration: none\"; break;\r\n                case LabelUnderlineMode.OnHover: underlineOnHoverClass = \"labelhover\"; break;\r\n            }\r\n\r\n            this.element().style.cssText += underlineCss + \";\";\r\n            if (underlineOnHoverClass.vrIsNotNullOrEmpty())\r\n                puma(this.element()).addClass(underlineOnHoverClass);\r\n        }\r\n        //#endregion\r\n\r\n        //#region Events\r\n        if (options.onClick != null)\r\n        {\r\n            this.container().style.cssText += \"cursor: pointer;\";\r\n            this.element().style.cssText += \"cursor: pointer;\";\r\n        }\r\n        puma(this.container()).click(() => this.click());\r\n\r\n        if (options.onHover != null)\r\n        {\r\n            puma(this.container()).on(\"hover\", () =>\r\n            {\r\n                let hoverEvent = new LabelHoverEvent();\r\n                hoverEvent.sender = this;\r\n                hoverEvent.text = this.value();\r\n                options!.onHover!(hoverEvent);\r\n            });\r\n        }\r\n        //#endregion\r\n    }\r\n\r\n    //#region Methods\r\n\r\n    //#region Text/Label/Tooltip\r\n    value(value?: string | number | Date): string\r\n    {\r\n        let options = this.getOptions();\r\n        if (value != null)\r\n        {\r\n            let linkCss = \"\";\r\n            if (options.linkCss != null)\r\n                linkCss = \" style='\" + options.linkCss + \";' \";\r\n\r\n            let mode = this.options<LabelOptions>().mode;\r\n            switch (mode)\r\n            {\r\n                case LabelModeEnum.Primary: puma(this.element()).addClass(\"vrLabelPrimaryMode\"); break;\r\n                case LabelModeEnum.Error: puma(this.element()).addClass(\"vrLabelErrorMode\"); break;\r\n                case LabelModeEnum.Phone: value = \"<a \" + linkCss + \" href='tel:\" + value + \"'>\" + value + \"</a>\"; break;\r\n                case LabelModeEnum.Mail: value = \"<a \" + linkCss + \" href='mailto:\" + value + \"'>\" + value + \"</a>\"; break;\r\n                case LabelModeEnum.Link: value = \"<a \" + linkCss + \" href='\" + value + \"'>\" + value + \"</a>\"; break;\r\n                case LabelModeEnum.Currency: value = Number(value).vrToCurrencyString(); break;\r\n                case LabelModeEnum.Date:\r\n                    {\r\n                        if (Date.vrIsValidDate(value))\r\n                            value = new Date(value).vrToItalyString(DateModeEnum.Date);\r\n                    }\r\n                    break;\r\n                case LabelModeEnum.DateTime:\r\n                    {\r\n                        if (Date.vrIsValidDate(value))\r\n                            value = new Date(value).vrToItalyString(DateModeEnum.DateTime);\r\n                    }\r\n                    break;\r\n                case LabelModeEnum.Time:\r\n                    {\r\n                        if (Date.vrIsValidDate(value))\r\n                            value = new Date(value).vrToItalyString(DateModeEnum.Time);\r\n                    }\r\n                    break;\r\n            }\r\n            this.element().innerHTML = String(value);\r\n\r\n            let textWidth = UtilityManager.textWidth(this.element());\r\n            if (options.tooltip === true || (options.tooltip !== false && textWidth != null && textWidth > 0 && (textWidth + 10) > this.width()))\r\n                this.tooltip(this.element().textContent!);\r\n        }\r\n        return this.element().innerHTML;\r\n    }\r\n\r\n    appendText(value: string | number)\r\n    {\r\n        this.value(this.value() + value);\r\n    }\r\n\r\n    tooltip(value?: string | number | Date): string\r\n    {\r\n        if (value != null)\r\n            this.element().title = (typeof (value) == \"string\" || typeof (value) == \"number\") ? String(value) : value.vrToItalyString();\r\n\r\n        return this.element().title;\r\n    }\r\n    //#endregion\r\n\r\n    //#region Mail/Phone/Link\r\n    toTel(phoneNumber: string, customText?: string): void\r\n    {\r\n        this.element().innerHTML = this.formatLinkLabel(\"tel:\" + phoneNumber, customText);\r\n    }\r\n\r\n    toMail(mail: string, customText?: string): void\r\n    {\r\n        this.element().innerHTML = this.formatLinkLabel(\"mailto:\" + mail, customText);\r\n    }\r\n\r\n    toLink(url: string, customText?: string): void\r\n    {\r\n        this.element().innerHTML = this.formatLinkLabel(url, customText);\r\n    }\r\n\r\n    private formatLinkLabel(url: string, customText?: string)\r\n    {\r\n        let options = this.getOptions();\r\n        let linkCss = \"\";\r\n        if (options.linkCss != null)\r\n            linkCss = \" style='\" + options.linkCss + \";' \";\r\n\r\n        return \"<a \" + linkCss + \" href='\" + url + \"'>\" + ((customText != null) ? customText : this.value()) + \"</a>\";\r\n    }\r\n    //#endregion\r\n\r\n    //#region Color\r\n    color(value?: string): string\r\n    {\r\n        if (value != null)\r\n            this.element().style.cssText += \"color: \" + value;\r\n\r\n        return puma(this.element()).css(\"color\");\r\n    }\r\n\r\n    backgroundColor(value?: string): string\r\n    {\r\n        if (value != null)\r\n            this.element().style.cssText += \"background-color: \" + value;\r\n\r\n        return puma(this.element()).css(\"background-color\");\r\n    }\r\n\r\n    borderColor(value?: string): string\r\n    {\r\n        if (value != null)\r\n            this.element().style.cssText += \"border: solid 1px \" + value + \"; padding: 1px 3px 1px 3px;\";\r\n\r\n        return puma(this.element()).css(\"border-color\");\r\n    }\r\n    //#endregion\r\n\r\n    isEmpty(): boolean\r\n    {\r\n        return this.element().innerHTML === \"\";\r\n    }\r\n\r\n    clear(): void\r\n    {\r\n        this.element().innerHTML = \"\";\r\n        this.element().title = \"\";\r\n    }\r\n\r\n    getOptions(): LabelOptions\r\n    {\r\n        return this.options<LabelOptions>();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Events\r\n    click(): void\r\n    {\r\n        let clickCallback = this.options<LabelOptions>().onClick;\r\n        if (clickCallback != null)\r\n        {\r\n            let clickEvent = new LabelClickEvent();\r\n            clickEvent.sender = this;\r\n            clickEvent.text = this.value();\r\n            clickCallback(clickEvent);\r\n        }\r\n    }\r\n    //#endregion\r\n}\r\n//#endregion\r\n\r\n//#region EventClasses\r\nexport class LabelClickEvent extends VrControlsEvent\r\n{\r\n    sender: Label;\r\n    text: string;\r\n}\r\n\r\nclass LabelHoverEvent extends VrControlsEvent\r\n{\r\n    sender: Label;\r\n    text: string;\r\n}\r\n//#endregion","import { VrControlOptions, VrControl } from \"../common\";\r\nimport { ControlTypeEnum, createLabel, CheckboxStateEnum, ErrorPositionEnum, puma } from \"../vr\";\r\nimport { DeviceManager } from \"../../../src/managers/deviceManager\";\r\n\r\n//#region Options\r\nexport class CheckBoxOptions extends VrControlOptions\r\n{\r\n    text?: string;\r\n    value?: string;\r\n    threeState?: boolean;\r\n    checked?: boolean;\r\n    name?: string;\r\n    tooltip?: string;\r\n\r\n    onCheck?(e: CheckBoxCheckEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class CheckBox extends VrControl\r\n{\r\n    constructor(element: HTMLElement, options?: CheckBoxOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new CheckBoxOptions();\r\n\r\n        if (options.text == null) options.text = \"\";\r\n        if (options.checked == null) options.checked = false;\r\n        if (options.threeState == null) options.threeState = false;\r\n        //#endregion\r\n\r\n        puma(element).attr(\"type\", \"checkbox\");\r\n\r\n        let userWidth = options.width;\r\n        options.width = undefined;\r\n        super(element, options, ControlTypeEnum.CheckBox);\r\n\r\n        if (userWidth != null)\r\n        {\r\n            if (typeof (userWidth) == \"number\")\r\n                userWidth = userWidth + \"px\";\r\n\r\n            this.container().style.cssText += \"width: \" + userWidth + \";\";\r\n        }\r\n\r\n        let label = createLabel(\r\n            {\r\n                text: options.text,\r\n                cssContainer: \"position: relative; top: -1px;\",\r\n                class: \"vrCheckBoxLabel\",\r\n                width: \"100%\"\r\n            }, this.container());\r\n        puma(label.element()).attr(\"for\", element.id);\r\n\r\n        //#region Value & Name\r\n        if (options.value == null) options.value = options.text;\r\n        if (options.value != null)\r\n            puma(this.element()).attr(\"value\", options.value);\r\n\r\n        if (options.name != null)\r\n            puma(this.element()).attr(\"name\", options.name);\r\n        //#endregion\r\n\r\n        //#region Tooltip\r\n        if (options.tooltip != null)\r\n            puma(this.element()).attr(\"title\", options.tooltip);\r\n        //#endregion\r\n\r\n        //#region Checked\r\n        if (options.checked === true)\r\n            this.checked(CheckboxStateEnum.Checked, false);\r\n        else if (options.threeState)\r\n            this.checked(CheckboxStateEnum.Undefined, false);\r\n        //#endregion\r\n\r\n        //#region Events\r\n        puma(this.element()).click((e: JQueryEventObject) =>\r\n        {\r\n            this.hideError();\r\n            let checkbox = e.currentTarget as HTMLInputElement;\r\n            let checked = checkbox.checked;\r\n\r\n            let state = null;\r\n            if (!options!.threeState)\r\n            {\r\n                if (checkbox.checked)\r\n                    state = CheckboxStateEnum.Checked;\r\n                else\r\n                    state = CheckboxStateEnum.Unchecked;\r\n            }\r\n            else\r\n            {\r\n                if (checkbox.checked && !puma(this.element()).hasClass(\"indeterminateVrCheckbox\"))\r\n                {\r\n                    puma(this.element()).addClass(\"indeterminateVrCheckbox\");\r\n                    state = CheckboxStateEnum.Undefined;\r\n                    e.preventDefault();\r\n                }\r\n                else\r\n                {\r\n                    puma(this.element()).removeClass(\"indeterminateVrCheckbox\");\r\n                    state = (checked) ? CheckboxStateEnum.Checked : CheckboxStateEnum.Unchecked;\r\n                }\r\n            }\r\n\r\n            if (options!.onCheck != null)\r\n            {\r\n                let event = new CheckBoxCheckEvent();\r\n                event.sender = this;\r\n                event.checked = checked;\r\n                event.stateEnum = state;\r\n                event.shiftKey = e.shiftKey;\r\n                event.ctrlKey = e.ctrlKey;\r\n                options!.onCheck(event);\r\n            }\r\n        });\r\n        //#endregion\r\n    }\r\n\r\n    //#region Methods\r\n    checked<T extends boolean | null>(state?: CheckboxStateEnum | boolean, triggerChange = true): T\r\n    {\r\n        if (state != null)\r\n        {\r\n            this.hideError();\r\n            let checkedBoolean = true;\r\n            let checkedState = CheckboxStateEnum.Checked;\r\n\r\n            puma(this.element()).removeClass(\"indeterminateVrCheckbox\");\r\n            if (typeof (state) === \"boolean\")\r\n            {\r\n                (this.element() as HTMLInputElement).checked = state;\r\n                checkedBoolean = state;\r\n                checkedState = (state) ? CheckboxStateEnum.Checked : CheckboxStateEnum.Unchecked;\r\n            }\r\n            else\r\n            {\r\n                checkedState = state;\r\n                if (state == CheckboxStateEnum.Checked)\r\n                {\r\n                    (this.element() as HTMLInputElement).checked = true;\r\n                    checkedBoolean = true;\r\n                }\r\n                else\r\n                {\r\n                    (this.element() as HTMLInputElement).checked = false;\r\n                    checkedBoolean = false;\r\n\r\n                    if (state == CheckboxStateEnum.Undefined)\r\n                        puma(this.element()).addClass(\"indeterminateVrCheckbox\");\r\n                }\r\n            }\r\n\r\n            if (triggerChange)\r\n            {\r\n                let options = this.getOptions();\r\n                if (options!.onCheck != null)\r\n                {\r\n                    let event = new CheckBoxCheckEvent();\r\n                    event.sender = this;\r\n                    event.checked = checkedBoolean;\r\n                    event.stateEnum = checkedState;\r\n                    options!.onCheck(event);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (puma(this.element()).hasClass(\"indeterminateVrCheckbox\"))\r\n            return <T>null;\r\n        else\r\n            return <T>(this.element() as HTMLInputElement).checked;\r\n    }\r\n\r\n    check(): void\r\n    {\r\n        puma(this.element()).click();\r\n    }\r\n\r\n    text(text?: string): string\r\n    {\r\n        if (text != null)\r\n            puma(this.container()).find(\".vrCheckBoxLabel\").html(text);\r\n\r\n        return puma(this.container()).find(\".vrCheckBoxLabel\").html();\r\n    }\r\n\r\n    clear(triggerChange = false): void\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.threeState)\r\n            this.checked(CheckboxStateEnum.Undefined, triggerChange);\r\n        else\r\n            this.checked(false, triggerChange);\r\n    }\r\n\r\n    getOptions(): CheckBoxOptions\r\n    {\r\n        return this.options<CheckBoxOptions>();\r\n    }\r\n\r\n    //#region Error management\r\n    error(text?: string, position?: ErrorPositionEnum, showIcon = false): void\r\n    {\r\n        let options = this.options<CheckBoxOptions>();\r\n        if (position == null) position = ErrorPositionEnum.Right;\r\n        if (text == null) text = \"\";\r\n\r\n        puma(this.element()).addClass(\"vrCheckBoxError\");\r\n\r\n        let errorIcon = puma(this.container()).find(\".vrCheckBoxErrorIcon\")[0];\r\n        if (errorIcon == null && !DeviceManager.isMobile())\r\n            errorIcon = puma(\"<i class='fa fa-exclamation-triangle vrCheckBoxErrorIcon'></i>\").vrInsertAfterPuma(puma(this.container()).find(\".vrCheckBoxLabel\"))[0];\r\n\r\n        if (showIcon)\r\n            puma(errorIcon).show();\r\n        else\r\n            puma(errorIcon).hide();\r\n\r\n        //#region Tooltip\r\n        let spanError = puma(\"<span class='vrCheckBoxErrorTooltip vrErrorTooltip'>\" + text + \"</span>\").vrAppendToPuma(errorIcon);\r\n        if (position == ErrorPositionEnum.Right)\r\n            puma(spanError).addClass(\"vrCheckBoxErrorTooltipRight\");\r\n        else if (position == ErrorPositionEnum.Bottom)\r\n        {\r\n            puma(spanError).addClass(\"vrCheckBoxErrorTooltipBottom\");\r\n            puma(errorIcon).hover(() => puma(spanError)[0].style.cssText += \"left: -\" + ((puma(spanError).outerWidth() / 2) - 7) + \"px;\");\r\n        }\r\n        //#endregion\r\n    }\r\n\r\n    hideError(): void\r\n    {\r\n        puma(this.element()).removeClass(\"vrCheckBoxError\");\r\n        puma(this.container()).find(\".vrCheckBoxErrorIcon\").hide();\r\n        puma(this.container()).find(\".vrCheckBoxErrorTooltip\").hide();\r\n    }\r\n    //#endregion\r\n\r\n    //#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Events\r\nclass CheckBoxEvent\r\n{\r\n    sender: CheckBox;\r\n}\r\n\r\nexport class CheckBoxCheckEvent extends CheckBoxEvent\r\n{\r\n    stateEnum: CheckboxStateEnum;\r\n    checked: boolean;\r\n    shiftKey: boolean;\r\n    ctrlKey: boolean;\r\n}\r\n//#endregion","import { VrControlOptions, VrControl } from \"../common\";\r\nimport { ControlTypeEnum, OrientationEnum } from \"../vr\";\r\n\r\n//#region Options\r\nexport class SeparatorOptions extends VrControlOptions\r\n{\r\n    size?: number;\r\n    orientation?: OrientationEnum;\r\n    color?: string;\r\n    marginSettings?: MarginSettings;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Separator extends VrControl\r\n{\r\n    constructor(element: HTMLElement, options?: SeparatorOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new SeparatorOptions();\r\n\r\n        if (options.size == null) options.size = 1;\r\n        if (options.marginSettings == null) options.marginSettings = new MarginSettings();\r\n        if (options.orientation == null) options.orientation = OrientationEnum.Vertical;\r\n        if (options.color == null) options.color = \"#CCC\";\r\n        if (options.tabIndex == null) options.tabIndex = -1;\r\n        //#endregion\r\n\r\n        super(element, options, ControlTypeEnum.Separator);\r\n\r\n        //#region Orientation\r\n        if (options.orientation == OrientationEnum.Vertical)\r\n        {\r\n            if (options.marginSettings.top == null) options.marginSettings.top = 0;\r\n            if (options.marginSettings.right == null) options.marginSettings.right = 8;\r\n            if (options.marginSettings.bottom == null) options.marginSettings.bottom = 0;\r\n            if (options.marginSettings.left == null) options.marginSettings.left = 5;\r\n\r\n            this.container().style.cssText += \"display: inline; position: relative;\"\r\n                + \"margin-top: \" + options.marginSettings.top + \"px; margin-bottom: \" + options.marginSettings.bottom + \"px;\"\r\n                + \"margin-right: \" + options.marginSettings.right + \"px; margin-left: \" + options.marginSettings.left + \"px;\";\r\n            this.element().style.cssText += \"display: inline-block; height: 30px; width: \" + options.size + \"px;\"\r\n                + \"background-color: \" + options.color + \"; position: absolute; top: -4px;\";\r\n        }\r\n        else\r\n        {\r\n            if (options.marginSettings.top == null) options.marginSettings.top = 0;\r\n            if (options.marginSettings.right == null) options.marginSettings.right = 0;\r\n            if (options.marginSettings.bottom == null) options.marginSettings.bottom = 8;\r\n            if (options.marginSettings.left == null) options.marginSettings.left = 0;\r\n\r\n            this.container().style.cssText += \"display: block;\"\r\n                + \"margin-top: \" + options.marginSettings.top + \"px; margin-bottom: \" + options.marginSettings.bottom + \"px;\"\r\n                + \"margin-right: \" + options.marginSettings.right + \"px; margin-left: \" + options.marginSettings.left + \"px;\";\r\n            this.element().style.cssText += \"display: inline-block; width: 100%; height: \" + options.size + \"px; background-color: \" + options.color;\r\n        }\r\n        //#endregion\r\n\r\n        if (options.visible != null)\r\n            super.visible(options.visible);\r\n    }\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass MarginSettings\r\n{\r\n    top?: number;\r\n    right?: number;\r\n    bottom?: number;\r\n    left?: number;\r\n}\r\n//#endregion","import { ControlTypeEnum, ImagePositionTypeEnum, ImageToolbarTypeEnum, confirm, IconClass, puma } from \"../vr\";\r\nimport { VrControl, VrControlOptions } from \"../common\";\r\n\r\n//#region Options\r\nexport class ImageOptions extends VrControlOptions\r\n{\r\n    value?: string;\r\n    base64?: boolean;\r\n    tooltip?: string;\r\n    position?: ImagePositionTypeEnum;\r\n    toolbarItems?: ImageToolbarItem[];\r\n    overlayDescription?: boolean | string;\r\n\r\n    onHover?(): void;\r\n    onLeave?(): void;\r\n    onClick?(e: ImageClickEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Image extends VrControl\r\n{\r\n    constructor(element: HTMLElement, options?: ImageOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new ImageOptions();\r\n\r\n        if (options.position == null) options.position = ImagePositionTypeEnum.Original;\r\n        if (options.base64 == null) options.base64 = false;\r\n        if (options.overlayDescription == null) options.overlayDescription = false;\r\n        if (options.tabIndex == null) options.tabIndex = -1;\r\n        //#endregion\r\n\r\n        super(element, options, ControlTypeEnum.Image);\r\n        this.element().style.cssText += \"width: auto; height: auto;\";\r\n\r\n        //#region Value\r\n        if (options.value != null)\r\n            this.value(options.value);\r\n        //#endregion\r\n\r\n        //#region Tooltip\r\n        if (options.tooltip != null)\r\n        {\r\n            (this.element() as HTMLImageElement).alt = options.tooltip;\r\n            (this.element() as HTMLImageElement).title = options.tooltip;\r\n        }\r\n        //#endregion\r\n\r\n        //#region Image position\r\n        switch (options.position)\r\n        {\r\n            case ImagePositionTypeEnum.Center:\r\n                {\r\n                    this.container().style.cssText += \"text-align: center; justify-content: center;\";\r\n                    this.element().style.cssText += \"max-width: 100%; max-height: 100%;\";\r\n                }\r\n                break;\r\n            case ImagePositionTypeEnum.Fill: this.element().style.cssText += \"width: 100%; max-height: 100%;\"; break;\r\n            case ImagePositionTypeEnum.Fit: this.element().style.cssText += \"height: 100%; max-width: 100%;\"; break;\r\n            case ImagePositionTypeEnum.Stretch: this.element().style.cssText += \"width: 100%; height: 100%;\"; break;\r\n            case ImagePositionTypeEnum.Original: this.element().style.cssText += \"max-width: 100%; max-height: 100%;\"; break;\r\n        }\r\n        //#endregion\r\n\r\n        //#region Toolbar items\r\n        if (options.toolbarItems != null)\r\n        {\r\n            let toolbar = document.createElement(\"div\");\r\n            puma(toolbar).addClass(\"vrImageToolbar\");\r\n            puma(this.container()).prepend(toolbar);\r\n\r\n            for (let toolbarItem of options.toolbarItems)\r\n            {\r\n                if (toolbarItem.type == null) toolbarItem.type = ImageToolbarTypeEnum.Custom;\r\n                switch (toolbarItem.type)\r\n                {\r\n                    case ImageToolbarTypeEnum.Download:\r\n                        {\r\n                            //#region Download\r\n                            let downloadButton = document.createElement(\"a\");\r\n                            puma(downloadButton).addClass(\"vrImageDownloadToolbar vrImageToolbarItem\");\r\n                            downloadButton.download = \"download\";\r\n                            downloadButton.href = this.value();\r\n                            downloadButton.innerHTML = \"<i class='fa fa-download' aria-hidden='true'></i>\";\r\n                            toolbar.append(downloadButton);\r\n\r\n                            puma(downloadButton).click((e: JQueryEventObject) =>\r\n                            {\r\n                                if (toolbarItem.onClick != null)\r\n                                {\r\n                                    let event = new ImageToolbarClickEvent();\r\n                                    event.sender = this;\r\n                                    toolbarItem.onClick(event);\r\n                                }\r\n                            });\r\n                            //#endregion\r\n                        }\r\n                        break;\r\n                    case ImageToolbarTypeEnum.Delete:\r\n                        {\r\n                            //#region Delete\r\n                            let deleteButton = document.createElement(\"a\");\r\n                            puma(deleteButton).addClass(\"vrImageDeleteToolbar vrImageToolbarItem\");\r\n                            deleteButton.id = \"deleteToolbarImage_\" + element.id;\r\n                            deleteButton.innerHTML = \"<i class='fa fa-remove' aria-hidden='true'></i>\";\r\n                            toolbar.append(deleteButton);\r\n\r\n                            puma(deleteButton).click((e: JQueryEventObject) =>\r\n                            {\r\n                                if (toolbarItem.confirmationMessage != null && toolbarItem.confirmationMessage != \"\")\r\n                                {\r\n                                    confirm(toolbarItem.confirmationMessage).then(() =>\r\n                                    {\r\n                                        this.clear();\r\n                                        if (toolbarItem.onClick != null)\r\n                                        {\r\n                                            let event = new ImageToolbarClickEvent();\r\n                                            event.sender = this;\r\n                                            toolbarItem.onClick(event);\r\n                                        }\r\n                                    });\r\n                                }\r\n                                else\r\n                                {\r\n                                    this.clear();\r\n                                    if (toolbarItem.onClick != null)\r\n                                    {\r\n                                        let event = new ImageToolbarClickEvent();\r\n                                        event.sender = this;\r\n                                        toolbarItem.onClick(event);\r\n                                    }\r\n                                }\r\n                            });\r\n                            //#endregion\r\n                        }\r\n                        break;\r\n                    case ImageToolbarTypeEnum.Custom:\r\n                        {\r\n                            //#region Custom\r\n                            let customButton = document.createElement(\"a\");\r\n                            puma(customButton).addClass(\"vrImageToolbarItem\");\r\n                            customButton.innerHTML = \"<i class='fa fa-\" + toolbarItem.icon + \"'></i>\";\r\n                            customButton.style.cssText += \"float: right; margin-right: 7px; color: #FFF; cursor: pointer;\";\r\n                            toolbar.append(customButton);\r\n\r\n                            puma(customButton).click((e: JQueryEventObject) =>\r\n                            {\r\n                                if (toolbarItem.confirmationMessage != null && toolbarItem.confirmationMessage != \"\")\r\n                                {\r\n                                    confirm(toolbarItem.confirmationMessage).then(() =>\r\n                                    {\r\n                                        if (toolbarItem.onClick != null)\r\n                                        {\r\n                                            let event = new ImageToolbarClickEvent();\r\n                                            event.sender = this;\r\n                                            toolbarItem.onClick(event);\r\n                                        }\r\n                                    });\r\n                                }\r\n                                else\r\n                                {\r\n                                    if (toolbarItem.onClick != null)\r\n                                    {\r\n                                        let event = new ImageToolbarClickEvent();\r\n                                        event.sender = this;\r\n                                        toolbarItem.onClick(event);\r\n                                    }\r\n                                }\r\n                            });\r\n                            //#endregion\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#region Overlay description\r\n        if (options.overlayDescription !== false)\r\n        {\r\n            if (options.overlayDescription == true) options.overlayDescription = \"\";\r\n\r\n            let overlayDescription = document.createElement(\"div\");\r\n            puma(overlayDescription).addClass(\"vrImageOverlayDescription\");\r\n            overlayDescription.innerHTML = options.overlayDescription;\r\n            puma(this.container()).prepend(overlayDescription);\r\n        }\r\n        //#endregion\r\n\r\n        //#region Events\r\n        puma(this.container()).on(\"mouseenter\", (e: JQuery.Event) =>\r\n        {\r\n            if (!this.enabled())\r\n                return;\r\n\r\n            if (this.value() != null && this.value() != \"\")\r\n            {\r\n                if (options!.toolbarItems != null)\r\n                    puma(this.container()).find(\".vrImageToolbar\").show();\r\n\r\n                if (options!.overlayDescription !== false)\r\n                    puma(this.container()).find(\".vrImageOverlayDescription\").show();\r\n            }\r\n\r\n            if (options!.onHover != null)\r\n                options!.onHover();\r\n        });\r\n\r\n        puma(this.container()).on(\"mouseleave\", (e: JQuery.MouseLeaveEvent) =>\r\n        {\r\n            if (!this.enabled())\r\n                return;\r\n\r\n            if (options!.toolbarItems != null)\r\n                puma(this.container()).find(\".vrImageToolbar\").hide();\r\n\r\n            if (options!.overlayDescription !== false)\r\n                puma(this.container()).find(\".vrImageOverlayDescription\").hide();\r\n\r\n            if (options!.onLeave != null)\r\n                options!.onLeave();\r\n        });\r\n\r\n        if (options.onClick != null)\r\n        {\r\n            this.element().style.cssText += \"cursor: pointer;\";\r\n            puma(this.container()).on(\"click\", (e: JQuery.ClickEvent) =>\r\n            {\r\n                if (!this.enabled())\r\n                    return;\r\n\r\n                let imageClickEvent = new ImageClickEvent();\r\n                imageClickEvent.sender = this;\r\n                options!.onClick!(imageClickEvent);\r\n            });\r\n        }\r\n        //#endregion\r\n    }\r\n\r\n    //#region Methods\r\n    value(pathOrBytes?: string, fileName?: string, mimeType?: string): string\r\n    {\r\n        let options = this.options<ImageOptions>();\r\n        if (pathOrBytes != null && pathOrBytes != \"\")\r\n        {\r\n            mimeType = (mimeType == null) ? \"image/png\" : mimeType;\r\n            fileName = (fileName == null) ? \"download\" : fileName;\r\n            pathOrBytes = pathOrBytes.replace(/^data:image\\/[^;]+;base64,/, '');\r\n\r\n            let prePath = (options.base64) ? \"data:\" + mimeType + \";base64,\" : \"\";\r\n            puma(this.element()).attr(\"src\", prePath + pathOrBytes);\r\n\r\n            //#region Download\r\n            if (options.base64)\r\n                pathOrBytes = pathOrBytes.replace(/^data:image\\/[^;]+/, 'data:application/octet-stream');\r\n\r\n            puma(this.container()).find(\".vrImageDownloadToolbar\").attr(\"href\", prePath + pathOrBytes);\r\n            puma(this.container()).find(\".vrImageDownloadToolbar\").attr(\"download\", fileName);\r\n            //#endregion \r\n        }\r\n        return puma(this.element()).attr(\"src\");\r\n    }\r\n\r\n    overlayDescription(description?: string): string\r\n    {\r\n        if (description != null)\r\n        {\r\n            let options = this.options<ImageOptions>();\r\n            if (options.overlayDescription !== false)\r\n                puma(this.container()).find(\".vrImageOverlayDescription\").html(description);\r\n        }\r\n        return puma(this.container()).find(\".vrImageOverlayDescription\").html();\r\n    }\r\n\r\n    toolbar()\r\n    {\r\n        return puma(this.container()).find(\".vrImageToolbar\")[0];\r\n    }\r\n\r\n    clear(): void\r\n    {\r\n        puma(this.element()).removeAttr(\"src\");\r\n    }\r\n    //#endregion\r\n\r\n    //#region Overrides\r\n    enable()\r\n    {\r\n        super.enable();\r\n        window.setTimeout(() => puma(this.toolbar()).show());\r\n    }\r\n\r\n    disable()\r\n    {\r\n        super.disable();\r\n        window.setTimeout(() => puma(this.toolbar()).hide());\r\n    }\r\n    //#endregion\r\n\r\n    getOptions()\r\n    {\r\n        return this.options<ImageOptions>();\r\n    }\r\n    //#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass ImageToolbarItem\r\n{\r\n    type?: ImageToolbarTypeEnum;\r\n    icon?: IconClass;\r\n    confirmationMessage?: string;\r\n    onClick?(e: ImageToolbarClickEvent): void;\r\n}\r\n\r\nclass ImageToolbarClickEvent\r\n{\r\n    sender: Image;\r\n}\r\n\r\nclass ImageClickEvent\r\n{\r\n    sender: Image;\r\n}\r\n//#endregion","import { ControlManager } from \"../../../src/managers/controlManager\";\r\nimport { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { ControlTypeEnum, vrEditorItemEnum, vrEditorToolbarModeEnum, div, vrEditorCustomItem, vrEditorCustomMenuItem, EditorCustomMenuItemType, createSplitButton, createSwitch, createButtonGroup, createComboBox, createDatePicker, createTextBox, createButton, createSeparator, createLabel, puma, createSpeechRecognizer, vrEditorSpeechRecognizerSettings, createWindow, PositionEnum, vrEditorFontSizeSettings, EditorSpeechRecognizerPositionEnum, EditorSpeechRecognizerModeEnum, createMultilineTextBox, IconClassLight, KeyEnum } from \"../vr\";\r\nimport { ButtonGroupOptions } from \"./buttonGroup\";\r\nimport { SpeechRecognizer } from \"./speechRecognizer\";\r\nimport { TextBox } from \"./textbox\";\r\nimport { Window } from \"./window\";\r\ndeclare var tinyMCE: any;\r\n\r\n//#region Options\r\nexport class EditorOptions extends VrControlOptions\r\n{\r\n    text?: string;\r\n    placeholder?: string;\r\n    resizable?: boolean;\r\n    language?: string;\r\n    pasteImages?: boolean;\r\n    toolbarMode?: vrEditorToolbarModeEnum;\r\n    menu?: boolean | vrEditorMenu;\r\n    toolbar?: boolean | vrEditorItemEnum[] | string;\r\n    plugins?: string;\r\n    customToolItems?: vrEditorCustomItem[];\r\n    customMenuItems?: vrEditorCustomMenuItem[];\r\n    baseUrl?: string;\r\n    speechRecognizer?: vrEditorSpeechRecognizerSettings | boolean;\r\n    fontSize?: vrEditorFontSizeSettings;\r\n    browserSpellCheck?: boolean;\r\n    pasteAsText?: boolean;\r\n    replacePtagWithDiv?: boolean;\r\n\r\n    onFocus?: (e: EditorOnFocusEvent) => void;\r\n    onBlur?: (e: EditorOnBlurEvent) => void;\r\n    onCommand?: (e: EditorOnCommandEvent) => void;\r\n    onSetContent?: (e: EditorSetContentEvent) => void;\r\n    onBeforeResize?: (e: EditorOnResizingEvent) => void;\r\n    onAfterResize?: (e: EditorOnResizedEvent) => void;\r\n    onKeyUp?: (e: EditorOnKeyUpEvent) => void;\r\n    onKeyDown?: (e: EditorOnKeyDownEvent) => void;\r\n    onInit?: (e: EditorOnInitEvent) => void;\r\n    onDrop?: (e: EditorDropEvent) => void;\r\n    onDragEnter?: (e: EditorDragEnterEvent) => void;\r\n    onDragOver?: (e: EditorDragOverEvent) => void;\r\n    onDragLeave?: (e: EditorDragLeaveEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Editor extends VrControl\r\n{\r\n    private _settings: any;\r\n    private _tinyMceControl: any;\r\n    private _divMenuItem: HTMLElement;\r\n    private _finalTextSpeeched: string;\r\n    private _value: string;\r\n    private _speechRecognizer: SpeechRecognizer;\r\n    private _divDragFile: HTMLElement;\r\n    private _initialized: boolean;\r\n    private _wndCommands: Window;\r\n    private _wndTempMessage: Window;\r\n    private _txtTempMessage: TextBox;\r\n\r\n    constructor(element: HTMLElement, options?: EditorOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new EditorOptions();\r\n\r\n        if (options.height == null) options.height = 350;\r\n        if (options.resizable == null) options.resizable = false;\r\n        if (options.pasteImages == null) options.pasteImages = false;\r\n        if (options.toolbar == null) options.toolbar = true;\r\n        if (options.menu == null) options.menu = true;\r\n        if (options.customMenuItems != null && options.menu !== false) options.menu = true;\r\n        if (options.baseUrl == null) options.baseUrl = \"/scripts/tinymce/\";\r\n        if (options.toolbarMode == null) options.toolbarMode = vrEditorToolbarModeEnum.Floating;\r\n        if (options.plugins == null) options.plugins = \"image,link,searchreplace,fullscreen,preview,emoticons,media,lists,pagebreak,table,charmap,code,wordcount\";\r\n        if (options.browserSpellCheck == null) options.browserSpellCheck = true;\r\n        if (options.enable == null) options.enable = true;\r\n        if (options.pasteAsText == null) options.pasteAsText = true;\r\n        if (options.replacePtagWithDiv == null) options.replacePtagWithDiv = true;\r\n\r\n        if (options.speechRecognizer == null) options.speechRecognizer = true;\r\n        if (options.speechRecognizer !== false) \r\n        {\r\n            options.speechRecognizer = new vrEditorSpeechRecognizerSettings();\r\n            if (options.speechRecognizer.stopAtClick == null) options.speechRecognizer.stopAtClick = true;\r\n            if (options.speechRecognizer.position == null) options.speechRecognizer.position = EditorSpeechRecognizerPositionEnum.MenuItems;\r\n            if (options.speechRecognizer.mode == null) options.speechRecognizer.mode = EditorSpeechRecognizerModeEnum.Popup;\r\n            if (options.speechRecognizer.showInfoCommands == null) options.speechRecognizer.showInfoCommands = true;\r\n        }\r\n\r\n        if (options.fontSize == null) options.fontSize = new vrEditorFontSizeSettings();\r\n        if (options.fontSize.defaultSize == null) options.fontSize.defaultSize = 12;\r\n        if (options.fontSize.formatSizeList == null) options.fontSize.formatSizeList = [8, 10, 11, 12, 13, 14, 15, 16, 18, 24, 36];\r\n        //#endregion\r\n\r\n        super(element, options, ControlTypeEnum.Editor);\r\n\r\n        //#region Toolbar\r\n        let toolbar: any = false;\r\n        if (options.toolbar === true)\r\n            toolbar = \"bold italic underline | fontfamily fontsize | alignleft aligncenter alignright alignjustify | numlist bullist | forecolor link | fullscreen\";\r\n        else if (options.toolbar === false)\r\n            toolbar = false;\r\n        else\r\n            toolbar = options.toolbar.toString().replace(/,/g, \" \");\r\n        //#endregion\r\n\r\n        //#region Menu\r\n        let menuBar = false;\r\n        let menu: any = {};\r\n        if (options.menu === true)\r\n        {\r\n            menuBar = true;\r\n            menu = {\r\n                file: { title: \"\", items: \"\" },\r\n                edit: { title: \"Edit\", items: \"undo redo | cut copy | selectall searchreplace\" },\r\n                view: { title: \"View\", items: \"preview code wordcount | fullscreen\" },\r\n                insert: { title: \"\", items: \"\" },\r\n                format: { title: \"Format\", items: \"bold italic underline strikethrough superscript subscript | fontformats align blockformats | backcolor removeformat\" },\r\n                table: { title: \"\", items: \"\" },\r\n                tools: { title: \"\", items: \"\" },\r\n            };\r\n        }\r\n        else if (options.menu === false)\r\n        {\r\n            menuBar = false;\r\n            menu = undefined;\r\n        }\r\n        else\r\n        {\r\n            menuBar = true;\r\n\r\n            //#region Menu file\r\n            if (!options.menu.file)\r\n                menu.file = { title: \"\", items: \"\" };\r\n            else\r\n            {\r\n                let defaultItems = \"preview\";\r\n                if (options.menu.file === true)\r\n                    menu.file = { title: \"File\", items: defaultItems };\r\n                else\r\n                    menu.file = { title: (options.menu.file.title == null) ? \"File\" : options.menu.file.title, items: (options.menu.file.items == null) ? defaultItems : options.menu.file.items.toString().replace(/,/g, \" \") };\r\n            }\r\n            //#endregion\r\n\r\n            //#region Menu edit\r\n            if (!options.menu.edit)\r\n                menu.edit = { title: \"\", items: \"\" };\r\n            else\r\n            {\r\n                let defaultItems = \"undo redo | cut copy | selectall searchreplace\";\r\n                if (options.menu.edit === true)\r\n                    menu.edit = { title: \"Edit\", items: defaultItems };\r\n                else\r\n                    menu.edit = { title: (options.menu.edit.title == null) ? \"Edit\" : options.menu.edit.title, items: (options.menu.edit.items == null) ? defaultItems : options.menu.edit.items.toString().replace(/,/g, \" \") };\r\n            }\r\n            //#endregion\r\n\r\n            //#region Menu view\r\n            if (!options.menu.view)\r\n                menu.view = { title: \"\", items: \"\" };\r\n            else\r\n            {\r\n                let defaultItems = \"preview code wordcount fullscreen\";\r\n                if (options.menu.view === true)\r\n                    menu.view = { title: \"View\", items: defaultItems };\r\n                else\r\n                    menu.view = { title: (options.menu.view.title == null) ? \"View\" : options.menu.view.title, items: (options.menu.view.items == null) ? defaultItems : options.menu.view.items.toString().replace(/,/g, \" \") };\r\n            }\r\n            //#endregion\r\n\r\n            //#region Menu insert\r\n            if (!options.menu.insert)\r\n                menu.insert = { title: \"\", items: \"\" };\r\n            else\r\n            {\r\n                let defaultItems = \"link | charmap pagebreak\";\r\n                if (options.menu.insert === true)\r\n                    menu.insert = { title: \"Insert\", items: defaultItems };\r\n                else\r\n                    menu.insert = { title: (options.menu.insert.title == null) ? \"Insert\" : options.menu.insert.title, items: (options.menu.insert.items == null) ? defaultItems : options.menu.insert.items.toString().replace(/,/g, \" \") };\r\n            }\r\n            //#endregion\r\n\r\n            //#region Menu format\r\n            if (!options.menu.format)\r\n                menu.format = { title: \"\", items: \"\" };\r\n            else\r\n            {\r\n                let defaultItems = \"bold italic underline strikethrough superscript subscript | fontformats align blockformats | backcolor removeformat\";\r\n                if (options.menu.format === true)\r\n                    menu.format = { title: \"Format\", items: defaultItems };\r\n                else\r\n                    menu.format = { title: (options.menu.format.title == null) ? \"Format\" : options.menu.format.title, items: (options.menu.format.items == null) ? defaultItems : options.menu.format.items.toString().replace(/,/g, \" \") };\r\n            }\r\n            //#endregion\r\n\r\n            //#region Menu table\r\n            if (!options.menu.table)\r\n                menu.table = { title: \"\", items: \"\" };\r\n            else\r\n            {\r\n                let defaultItems = \"inserttable cell row\";\r\n                if (options.menu.table === true)\r\n                    menu.table = { title: \"Table\", items: defaultItems };\r\n                else\r\n                    menu.table = { title: (options.menu.table.title == null) ? \"Table\" : options.menu.table.title, items: (options.menu.table.items == null) ? defaultItems : options.menu.table.items.toString().replace(/,/g, \" \") };\r\n            }\r\n            //#endregion\r\n\r\n            //#region Menu tools\r\n            if (!options.menu.tools)\r\n                menu.tools = { title: \"\", items: \"\" };\r\n            else\r\n            {\r\n                let defaultItems = \"code wordcount\";\r\n                if (options.menu.tools === true)\r\n                    menu.tools = { title: \"Tools\", items: defaultItems };\r\n                else\r\n                    menu.tools = { title: (options.menu.tools.title == null) ? \"Tools\" : options.menu.tools.title, items: (options.menu.tools.items == null) ? defaultItems : options.menu.tools.items.toString().replace(/,/g, \" \") };\r\n            }\r\n            //#endregion\r\n        }\r\n        //#endregion\r\n\r\n        //#region Custom items\r\n        let customItemValues = \"\";\r\n        if (options.customToolItems != null)\r\n        {\r\n            for (let i = 0; i < options.customToolItems.length; i++)\r\n                customItemValues += \" customItem\" + i;\r\n        }\r\n        //#endregion\r\n\r\n        //#region CustomMenu items\r\n        let divMenuItemTop = (options.label != null && options.labelSettings!.position == PositionEnum.Top) ? 24 : 6;\r\n        this._divMenuItem = div(this.container(), { css: \"position: absolute; top: \" + divMenuItemTop + \"px; right: 5px; z-index: 1; display: none;\" });\r\n        if (menubar)\r\n        {\r\n            if (options.customMenuItems != null)\r\n            {\r\n                for (let menuItem of options.customMenuItems)\r\n                    this.addMenuItem(menuItem);\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#region Speech recognizer\r\n        if (options.speechRecognizer !== false)\r\n        {\r\n            this._finalTextSpeeched = \"\";\r\n            this._speechRecognizer = createSpeechRecognizer({\r\n                size: 20,\r\n                cssContainer: \"margin-left: 10px;\" + ((options.speechRecognizer.position == EditorSpeechRecognizerPositionEnum.MenuItems) ? ((options.menu !== false) ? \"top: 48px; right: -6px;\" : \"top: 10px;\") : \"\"),\r\n                stopAtClick: options.speechRecognizer.stopAtClick,\r\n                onEnd: (e) =>\r\n                {\r\n                    if (this._wndCommands != null)\r\n                        this._wndCommands.close();\r\n\r\n                    if (this._wndTempMessage != null)\r\n                        this._wndTempMessage.close();\r\n                },\r\n                onStart: (e) => this._finalTextSpeeched = this.value() + \" \",\r\n                onClick: (e) => \r\n                {\r\n                    if ((options!.speechRecognizer! as vrEditorSpeechRecognizerSettings).mode == EditorSpeechRecognizerModeEnum.Popup)\r\n                    {\r\n                        if ((this._wndTempMessage == null || !this._wndTempMessage.visible()) && !e.sender.isRecording())\r\n                            this.openWindowTempMessage();\r\n                        else\r\n                            this._wndTempMessage.close();\r\n                    }\r\n                },\r\n                onResult: (e) =>\r\n                {\r\n                    if (e.interimResults.length > 0)\r\n                    {\r\n                        let interimResults = this.parseInput(e.interimResults, true);\r\n                        if ((options!.speechRecognizer! as vrEditorSpeechRecognizerSettings).mode == EditorSpeechRecognizerModeEnum.Popup)\r\n                            this._txtTempMessage.value(interimResults);\r\n                        else\r\n                            this.value(this._finalTextSpeeched + interimResults);\r\n                    }\r\n\r\n                    if (e.finalResults.length > 0)\r\n                    {\r\n                        if (e.finalResults.toLowerCase().includes(\"stop registrazione\") || e.finalResults.toLowerCase().includes(\"fine registrazione\"))\r\n                            e.sender.stop();\r\n\r\n                        let finalResults = this.parseInput(e.finalResults);\r\n                        if ((options!.speechRecognizer! as vrEditorSpeechRecognizerSettings).mode == EditorSpeechRecognizerModeEnum.Popup)\r\n                        {\r\n                            this._txtTempMessage.clear();\r\n                            this.insertTextAtCursor(finalResults);\r\n                        }\r\n                        else\r\n                        {\r\n                            this._finalTextSpeeched += finalResults;\r\n                            this.value(this._finalTextSpeeched);\r\n                        }\r\n                    }\r\n                }\r\n            }, this._divMenuItem);\r\n        }\r\n        //#endregion\r\n\r\n        //#region TinyMce control settings\r\n        tinyMCE.baseURL = options.baseUrl;\r\n        tinyMCE.suffix = \".min\";\r\n        tinyMCE.init(<TinyMceSettings>\r\n            {\r\n                selector: \"#\" + this.element().id,\r\n                height: \"100%\",\r\n                readonly: !options.enable,\r\n                placeholder: options.placeholder,\r\n                resize: options.resizable,\r\n                toolbar_mode: options.toolbarMode,\r\n                paste_data_images: options.pasteImages,\r\n                language: options.language,\r\n                menu: menu,\r\n                menubar: menuBar,\r\n                toolbar: toolbar + customItemValues,\r\n                plugins: options.plugins,\r\n                browser_spellcheck: options.browserSpellCheck,\r\n                contextmenu: false,\r\n                fontsize_formats: options.fontSize.formatSizeList.join(\"pt \") + \"pt\",\r\n                content_style: \"body { font-size: \" + options.fontSize.defaultSize + \"pt; } p { margin-top: 0px; margin-bottom: 0px; }\",\r\n                forced_root_block: \"div\",\r\n                paste_as_text: options.pasteAsText,\r\n                setup: (editor: any) =>\r\n                {\r\n                    //#region Custom items\r\n                    if (options!.customToolItems != null)\r\n                    {\r\n                        let i = 0;\r\n                        for (let customToolItem of options!.customToolItems)\r\n                        {\r\n                            editor.ui.registry.addButton(\"customItem\" + i,\r\n                                {\r\n                                    icon: customToolItem.icon,\r\n                                    image: customToolItem.imageUrl,\r\n                                    tooltip: customToolItem.tooltip,\r\n                                    text: customToolItem.text,\r\n                                    onAction: function (e: any)\r\n                                    {\r\n                                        if (customToolItem.onClick != null)\r\n                                        {\r\n                                            let clickEvent = new EditorItemClickEvent();\r\n                                            clickEvent.sender = this;\r\n                                            customToolItem.onClick(clickEvent);\r\n                                        }\r\n                                    }\r\n                                });\r\n                            i++;\r\n                        }\r\n                    }\r\n                    //#endregion\r\n\r\n                    //#region Events\r\n                    editor.on(\"keyup\", (e: any) =>\r\n                    {\r\n                        if (options!.onKeyUp != null)\r\n                        {\r\n                            let event = new EditorOnKeyUpEvent();\r\n                            event.sender = this;\r\n                            event.key = e.key;\r\n                            event.keyCode = e.keyCode;\r\n                            event.realEvent = e;\r\n                            options!.onKeyUp(event);\r\n                        }\r\n                    });\r\n\r\n                    editor.on(\"keydown\", (e: any) =>\r\n                    {\r\n                        //#region Go to next control when press tab\r\n                        if (e.key == KeyEnum.Tab)\r\n                        {\r\n                            let nextControlId = puma(this.container()).nextAll(\".vrControlsContainer\").first().attr(\"id\");\r\n                            if (nextControlId != null && nextControlId != \"\")\r\n                            {\r\n                                nextControlId = nextControlId.replace(\"Container\", \"\");\r\n                                let control = ControlManager.get(nextControlId);\r\n                                if (control != null)\r\n                                    control.focus();\r\n                                else\r\n                                    puma(nextControlId).focus();\r\n\r\n                                e.preventDefault();\r\n                            }\r\n                        }\r\n                        //#endregion\r\n\r\n                        if (options!.onKeyDown != null)\r\n                        {\r\n                            let event = new EditorOnKeyDownEvent();\r\n                            event.sender = this;\r\n                            event.key = e.key;\r\n                            event.keyCode = e.keyCode;\r\n                            event.realEvent = e;\r\n                            options!.onKeyDown(event);\r\n\r\n                            if (event.isDefaultPrevented())\r\n                            {\r\n                                e.preventDefault();\r\n                                return;\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    editor.on(\"init\", (e: any) =>\r\n                    {\r\n                        this._initialized = true;\r\n                        puma(this._divMenuItem).show();\r\n                        puma(e.target.iframeElement.contentDocument).find(\"html\").height(\"100%\");\r\n                        puma(e.target.iframeElement.contentDocument).find(\"body\").height(\"-webkit-fill-available\");\r\n\r\n                        if (options!.onInit != null)\r\n                        {\r\n                            let event = new EditorOnInitEvent();\r\n                            event.sender = this;\r\n                            event.event = e;\r\n                            options!.onInit(event);\r\n\r\n                            if (event.isDefaultPrevented())\r\n                                return;\r\n                        }\r\n\r\n                        //#region Text\r\n                        if (options!.text != null)\r\n                            this.value(options!.text);\r\n                        else if (this._value != \"\")\r\n                            this.value(this._value);\r\n                        //#endregion\r\n                    });\r\n\r\n                    this._divDragFile = div(this.container(), { class: \"vrEditorDragDrop\", content: \"Trascina qui i file...\" });\r\n\r\n                    editor.on(\"dragenter\", (e: any) =>\r\n                    {\r\n                        if (options!.onDragEnter != null)\r\n                        {\r\n                            let dragEnterEvent = new EditorDragEnterEvent();\r\n                            dragEnterEvent.sender = this;\r\n                            dragEnterEvent.element = e.currentTarget;\r\n                            dragEnterEvent.event = e;\r\n                            dragEnterEvent.realEvent = e;\r\n                            options!.onDragEnter(dragEnterEvent);\r\n                        }\r\n\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n                    });\r\n\r\n                    editor.on(\"dragover\", (e: any) =>\r\n                    {\r\n                        if (options!.onDragOver != null)\r\n                        {\r\n                            let dragOverEvent = new EditorDragOverEvent();\r\n                            dragOverEvent.sender = this;\r\n                            dragOverEvent.element = e.currentTarget;\r\n                            dragOverEvent.event = e;\r\n                            dragOverEvent.realEvent = e;\r\n                            options!.onDragOver(dragOverEvent);\r\n\r\n                            if (dragOverEvent.isDefaultPrevented())\r\n                            {\r\n                                e.preventDefault();\r\n                                e.stopPropagation();\r\n                                return;\r\n                            }\r\n                        }\r\n\r\n                        puma(this._divDragFile).css({ \"display\": \"flex\" });\r\n\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n                    });\r\n\r\n                    [\"dragenter\", \"dragover\", \"dragleave\", \"drop\"].forEach(eventName =>\r\n                    {\r\n                        this._divDragFile.addEventListener(eventName, (e) =>\r\n                        {\r\n                            e.preventDefault()\r\n                            e.stopPropagation()\r\n                        }, false);\r\n                    });\r\n\r\n                    puma(this._divDragFile).on(\"dragleave\", (e: any) => this.manageDragLeave(e));\r\n                    editor.on(\"dragleave\", (e: any) => this.manageDragLeave(e));\r\n\r\n                    editor.on(\"drop\", (e: any) => this.manageDrop(e));\r\n                    puma(this._divDragFile).on(\"drop\", (e: any) => this.manageDrop(e));\r\n                    //#endregion\r\n                }\r\n            });\r\n        this._tinyMceControl = tinyMCE.get(this.element().id);\r\n        this._settings = this._tinyMceControl.settings;\r\n        //#endregion\r\n\r\n        //#region Events\r\n        tinyMCE.activeEditor.on(\"focus\", (e: any) =>\r\n        {\r\n            if (options!.onFocus != null)\r\n            {\r\n                let event = new EditorOnFocusEvent();\r\n                event.sender = this;\r\n                event.realEvent = e;\r\n                options!.onFocus(event);\r\n            }\r\n        });\r\n\r\n        tinyMCE.activeEditor.on(\"blur\", (e: any) =>\r\n        {\r\n            if (options!.onBlur != null)\r\n            {\r\n                let event = new EditorOnBlurEvent();\r\n                event.sender = this;\r\n                event.realEvent = e;\r\n                options!.onBlur(event);\r\n            }\r\n        });\r\n\r\n        tinyMCE.activeEditor.on(\"ExecCommand\", (e: any) =>\r\n        {\r\n            if (options!.onCommand != null)\r\n            {\r\n                let event = new EditorOnCommandEvent();\r\n                event.sender = this;\r\n                event.command = e.command;\r\n                event.value = e.value;\r\n                event.type = e.type;\r\n                event.realEvent = e;\r\n                options!.onCommand(event);\r\n            }\r\n        });\r\n\r\n        tinyMCE.activeEditor.on(\"GetContent\", (e: any) =>\r\n        {\r\n            if (options!.onSetContent != null)\r\n            {\r\n                let event = new EditorSetContentEvent();\r\n                event.sender = this;\r\n                event.content = e.content;\r\n                event.element = e.element;\r\n                event.format = e.format;\r\n                event.type = e.type;\r\n                event.realEvent = e;\r\n                options!.onSetContent(event);\r\n            }\r\n        });\r\n\r\n        tinyMCE.activeEditor.on(\"ObjectResizeStart\", (e: any) =>\r\n        {\r\n            if (options!.onBeforeResize != null)\r\n            {\r\n                let event = new EditorOnResizingEvent();\r\n                event.sender = this;\r\n                event.height = e.height;\r\n                event.width = e.width;\r\n                event.target = e.target;\r\n                event.type = e.type;\r\n                event.realEvent = e;\r\n                options!.onBeforeResize(event);\r\n            }\r\n        });\r\n\r\n        tinyMCE.activeEditor.on(\"ObjectResized\", (e: any) =>\r\n        {\r\n            if (options!.onAfterResize != null)\r\n            {\r\n                let event = new EditorOnResizedEvent();\r\n                event.sender = this;\r\n                event.height = e.height;\r\n                event.width = e.width;\r\n                event.target = e.target;\r\n                event.type = e.type;\r\n                event.realEvent = e;\r\n                options!.onAfterResize(event);\r\n            }\r\n        });\r\n        //#endregion\r\n    }\r\n\r\n    //#region Methods\r\n    settings(): TinyMceSettings\r\n    {\r\n        return this._settings;\r\n    }\r\n\r\n    private openWindowTempMessage()\r\n    {\r\n        this.createWindowTempMessage();\r\n        this._wndTempMessage.open();\r\n    }\r\n\r\n    private createWindowTempMessage()\r\n    {\r\n        if (this._wndTempMessage != null)\r\n            return;\r\n\r\n        let options = this.getOptions();\r\n        this._wndTempMessage = createWindow({\r\n            title: \"Testo temporaneo\",\r\n            height: 210,\r\n            width: 300,\r\n            modal: false,\r\n            position: { bottom: 37, right: 10 },\r\n            footer: false,\r\n            onClose: (e) =>\r\n            {\r\n                puma(this._wndTempMessage.container()).remove();\r\n                (this._wndTempMessage as any) = null;\r\n                (this._txtTempMessage as any) = null;\r\n            },\r\n        });\r\n\r\n        this._txtTempMessage = createMultilineTextBox({\r\n            placeholder: \"Comincia a parlare per visualizzare il testo... fermati per inserirlo nell'editor\",\r\n            height: 160,\r\n            enable: false,\r\n            width: \"100%\"\r\n        }, this._wndTempMessage.element())\r\n\r\n        createButton({\r\n            icon: IconClassLight.Info,\r\n            cssContainer: \"margin-right: 16px; margin-top: 4px;\",\r\n            css: \"font-size: 17px; border: none; background: none;\",\r\n            colorSettings: { textColor: \"#FFF\" },\r\n            visible: (options.speechRecognizer! as vrEditorSpeechRecognizerSettings).showInfoCommands!,\r\n            onClick: (e) =>\r\n            {\r\n                if (this._wndCommands == null || !this._wndCommands.visible())\r\n                    this.openWindowCommands();\r\n                else\r\n                    this._wndCommands.close();\r\n            }\r\n        }, this._wndTempMessage.header())\r\n    }\r\n\r\n    private openWindowCommands()\r\n    {\r\n        this.createWindowCommands();\r\n        this._wndCommands.open();\r\n    }\r\n\r\n    private createWindowCommands()\r\n    {\r\n        if (this._wndCommands != null)\r\n            return;\r\n\r\n        this._wndCommands = createWindow({\r\n            title: \"Comandi consentiti\",\r\n            height: 300,\r\n            width: 185,\r\n            modal: false,\r\n            position: { bottom: 255, right: 10 },\r\n            footer: false,\r\n            onClose: (e) =>\r\n            {\r\n                puma(this._wndCommands.container()).remove();\r\n                (this._wndCommands as any) = null;\r\n            },\r\n            content: `<div style='font-size: 14px;'>Comandi consentiti: <ul>\r\n                    <li>A capo</li>\r\n                    <li>Virgola</li>\r\n                    <li>Punto</li>\r\n                    <li>Due punti</li>\r\n                    <li>Punto e virgola</li>\r\n                    <li>Punto virgola</li>\r\n                    <li>Punto esclamativo</li>\r\n                    <li>Punto interrogativo</li>\r\n                    <li>Puntini</li>\r\n                    <li>Trattino</li>\r\n                    <li>Fine registrazione</li>\r\n                </ul></font>`\r\n        });\r\n    }\r\n\r\n    private parseInput(text: string, interim = false)\r\n    {\r\n        //#region Replace special characters\r\n        text = this.replaceAll(text, \" a capo \", \"<br />\");\r\n        text = this.replaceAll(text, \" A capo \", \"<br />\");\r\n        text = this.replaceAll(text, \" a capo\", \"<br />\");\r\n        text = this.replaceAll(text, \" A capo\", \"<br />\");\r\n        text = this.replaceAll(text, \"a capo \", \"<br />\");\r\n        text = this.replaceAll(text, \"A capo \", \"<br />\");\r\n        text = this.replaceAll(text, \"a capo\", \"<br />\");\r\n        text = this.replaceAll(text, \"A capo\", \"<br />\");\r\n        text = this.replaceAll(text, \"trattino\", \" - \");\r\n        text = this.replaceAll(text, \"Trattino\", \" - \");\r\n        text = this.replaceAll(text, \" punto e virgola\", \"; \");\r\n        text = this.replaceAll(text, \" Punto e virgola\", \"; \");\r\n        text = this.replaceAll(text, \" punto virgola\", \"; \");\r\n        text = this.replaceAll(text, \" Punto virgola\", \"; \");\r\n        text = this.replaceAll(text, \" virgola\", \", \");\r\n        text = this.replaceAll(text, \" Virgola\", \", \");\r\n        text = this.replaceAll(text, \" due punti\", \": \");\r\n        text = this.replaceAll(text, \" Due punti\", \": \");\r\n        text = this.replaceAll(text, \" slash \", \"/\");\r\n        text = this.replaceAll(text, \" Slash \", \"/\");\r\n        text = this.replaceAll(text, \" 2 punti\", \": \");\r\n        text = this.replaceAll(text, \" punto esclamativo\", \"! \");\r\n        text = this.replaceAll(text, \" Punto esclamativo\", \"! \");\r\n        text = this.replaceAll(text, \" esclamativo\", \"! \");\r\n        text = this.replaceAll(text, \" Esclamativo\", \"! \");\r\n        text = this.replaceAll(text, \" punto interrogativo\", \"? \");\r\n        text = this.replaceAll(text, \" Punto interrogativo\", \"? \");\r\n        text = this.replaceAll(text, \" interrogativo\", \"? \");\r\n        text = this.replaceAll(text, \" Interrogativo\", \"? \");\r\n        text = this.replaceAll(text, \"pumo\", \"Pumo\");\r\n        text = this.replaceAll(text, \" punto\", \". \");\r\n        text = this.replaceAll(text, \" Punto\", \". \");\r\n        text = this.replaceAll(text, \" puntini\", \"... \");\r\n        text = this.replaceAll(text, \" Puntini\", \"... \");\r\n\r\n        if (!interim)\r\n        {\r\n            text = this.replaceAll(text, \"stop registrazione\", \" \");\r\n            text = this.replaceAll(text, \"Stop registrazione\", \" \");\r\n            text = this.replaceAll(text, \"fine registrazione\", \" \");\r\n            text = this.replaceAll(text, \"Fine registrazione\", \" \");\r\n        }\r\n        //#endregion\r\n\r\n        return text;\r\n    }\r\n\r\n    private replaceAll(text: string, find: string, replace: string)\r\n    {\r\n        let findLower = find.toLowerCase();\r\n        let findUpper = find.toUpperCase();\r\n        let findCapitalize = find.vrCapitalize();\r\n\r\n        text = text.replace(new RegExp(findLower, \"g\"), replace);\r\n        text = text.replace(new RegExp(findUpper, \"g\"), replace);\r\n        text = text.replace(new RegExp(findCapitalize, \"g\"), replace);\r\n        return text;\r\n    }\r\n\r\n    private manageDragLeave(e: any)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options!.onDragLeave != null)\r\n        {\r\n            let dragLeaveEvent = new EditorDragLeaveEvent();\r\n            dragLeaveEvent.sender = this;\r\n            dragLeaveEvent.element = e.currentTarget;\r\n            dragLeaveEvent.event = e;\r\n            options!.onDragLeave(dragLeaveEvent);\r\n\r\n            if (dragLeaveEvent.isDefaultPrevented())\r\n            {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                return;\r\n            }\r\n        }\r\n\r\n        puma(this._divDragFile).hide();\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    private manageDrop(e: any)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options!.onDrop != null)\r\n        {\r\n            let files: File[] = [...e.dataTransfer.files as any];\r\n\r\n            let dropEvent = new EditorDropEvent();\r\n            dropEvent.sender = this;\r\n            dropEvent.element = e.currentTarget;\r\n            dropEvent.files = files;\r\n            dropEvent.event = e;\r\n            options!.onDrop(dropEvent);\r\n\r\n            if (dropEvent.isDefaultPrevented())\r\n            {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                return;\r\n            }\r\n        }\r\n\r\n        puma(this._divDragFile).hide();\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    tinyMceControl(): any\r\n    {\r\n        return this._tinyMceControl;\r\n    }\r\n\r\n    value(text?: string | null, html = true): string\r\n    {\r\n        if (text != null)\r\n        {\r\n            this._value = text;\r\n            if (this.tinyMceControl().initialized)\r\n                this.tinyMceControl().setContent(text);\r\n        }\r\n\r\n        let result = (this.tinyMceControl().initialized) ? ((html) ? this.tinyMceControl().getContent() : this.body().innerText) : \"\";\r\n        let options = this.getOptions();\r\n        if (options.replacePtagWithDiv)\r\n            return result.replace(/<p/g, \"<div\").replace(/\\/p>/g, \"/div>\");\r\n        else\r\n            return result;\r\n    }\r\n\r\n    insertTextAtCursor(text: string): void\r\n    {\r\n        this.tinyMceControl().insertContent(text);\r\n    }\r\n\r\n    appendText(text: string, html = true): string\r\n    {\r\n        return this.value(this.value(null, html) + text);\r\n    }\r\n\r\n    body(): HTMLBodyElement\r\n    {\r\n        return this.tinyMceControl().getBody();\r\n    }\r\n\r\n    speechRecognizer()\r\n    {\r\n        return this._speechRecognizer;\r\n    }\r\n\r\n    clear(): void\r\n    {\r\n        this.value(\"\");\r\n        this._finalTextSpeeched = \"\";\r\n    }\r\n\r\n    focus(): void\r\n    {\r\n        if (!this._initialized)\r\n        {\r\n            let focusInterval = window.setInterval(() =>\r\n            {\r\n                if (this._initialized)\r\n                {\r\n                    $(tinyMCE.get(this.element().id).getBody()).trigger(\"focus\")\r\n                    window.clearInterval(focusInterval);\r\n                }\r\n            }, 100)\r\n        }\r\n        else\r\n            $(tinyMCE.get(this.element().id).getBody()).trigger(\"focus\")\r\n    }\r\n\r\n    addMenuItem(item: vrEditorCustomMenuItem)\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.menu !== false)\r\n        {\r\n            if (item.buttonGroupOptions == null) item.buttonGroupOptions = new ButtonGroupOptions();\r\n            if (item.buttonGroupOptions.width == null) item.buttonGroupOptions.width = \"auto\";\r\n\r\n            switch (item.type)\r\n            {\r\n                case EditorCustomMenuItemType.SplitButton: createSplitButton(item.splitButtonOptions, this._divMenuItem); break;\r\n                case EditorCustomMenuItemType.Switch: createSwitch(item.switchOptions, this._divMenuItem); break;\r\n                case EditorCustomMenuItemType.ButtonGroup: createButtonGroup(item.buttonGroupOptions, this._divMenuItem); break;\r\n                case EditorCustomMenuItemType.ComboBox: createComboBox(item.comboBoxOptions, this._divMenuItem); break;\r\n                case EditorCustomMenuItemType.DatePicker: createDatePicker(item.datePickerOptions, this._divMenuItem); break;\r\n                case EditorCustomMenuItemType.TextBox: createTextBox(item.textBoxOptions, this._divMenuItem); break;\r\n                case EditorCustomMenuItemType.Button: createButton(item.buttonOptions, this._divMenuItem); break;\r\n                case EditorCustomMenuItemType.Separator: createSeparator(item.separatorOptions, this._divMenuItem); break;\r\n                case EditorCustomMenuItemType.Label: createLabel(item.labelOptions, this._divMenuItem); break;\r\n            }\r\n        }\r\n    }\r\n\r\n    getOptions()\r\n    {\r\n        return this.options<EditorOptions>();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Overrides\r\n    enable(): void\r\n    {\r\n        super.enable();\r\n        if (this.settings() != null)\r\n            this.settings().readonly = false;\r\n\r\n        if (tinyMCE != null && tinyMCE.activeEditor != null)\r\n            tinyMCE.activeEditor.mode.set(\"design\");\r\n\r\n        if (this._speechRecognizer != null)\r\n            this._speechRecognizer.enable();\r\n    }\r\n\r\n    disable(): void\r\n    {\r\n        super.disable();\r\n        if (this.settings() != null)\r\n            this.settings().readonly = true;\r\n\r\n        if (tinyMCE != null && tinyMCE.activeEditor != null)\r\n            tinyMCE.activeEditor.mode.set(\"readonly\");\r\n\r\n        if (this._speechRecognizer != null)\r\n            this._speechRecognizer.disable();\r\n    }\r\n    //#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass TinyMceSettings\r\n{\r\n    readonly?: boolean;\r\n    placeholder?: string;\r\n    resize?: boolean;\r\n    elements?: string;\r\n    toolbar_mode?: vrEditorToolbarModeEnum;\r\n    paste_data_images?: boolean;\r\n    language?: string;\r\n    toolbar?: string;\r\n    plugins?: string;\r\n    paste_enable_default_filters?: boolean;\r\n    paste_word_valid_elements?: string;\r\n    paste_retain_style_properties?: string;\r\n    menubar?: boolean;\r\n    menu?: any;\r\n}\r\n\r\nclass vrEditorMenu\r\n{\r\n    file?: boolean | vrEditorMenuItem;\r\n    edit?: boolean | vrEditorMenuItem;\r\n    view?: boolean | vrEditorMenuItem;\r\n    insert?: boolean | vrEditorMenuItem;\r\n    format?: boolean | vrEditorMenuItem;\r\n    tools?: boolean | vrEditorMenuItem;\r\n    table?: boolean | vrEditorMenuItem;\r\n}\r\n\r\nclass vrEditorMenuItem\r\n{\r\n    items?: vrEditorItemEnum[] | string;\r\n    title?: string;\r\n}\r\n//#endregion\r\n\r\n//#region Events\r\nclass EditorEvent extends VrControlsEvent\r\n{\r\n    sender: Editor;\r\n    realEvent: any;\r\n}\r\n\r\nexport class EditorItemClickEvent extends EditorEvent\r\n{\r\n}\r\n\r\nclass EditorOnFocusEvent extends EditorEvent\r\n{ }\r\n\r\nclass EditorOnBlurEvent extends EditorEvent\r\n{ }\r\n\r\nclass EditorOnCommandEvent extends EditorEvent\r\n{\r\n    command: string;\r\n    type: string;\r\n    value: any;\r\n}\r\n\r\nclass EditorSetContentEvent extends EditorEvent\r\n{\r\n    content: string;\r\n    element: HTMLElement;\r\n    format: string;\r\n    type: string;\r\n}\r\n\r\nclass EditorOnResizingEvent extends EditorEvent\r\n{\r\n    height: number;\r\n    width: number;\r\n    target: HTMLElement;\r\n    type: string;\r\n}\r\n\r\nclass EditorOnResizedEvent extends EditorEvent\r\n{\r\n    height: number;\r\n    width: number;\r\n    target: HTMLElement;\r\n    type: string;\r\n}\r\n\r\nclass EditorOnKeyUpEvent extends EditorEvent\r\n{\r\n    key: string;\r\n    keyCode: string;\r\n}\r\n\r\nclass EditorOnKeyDownEvent extends EditorEvent\r\n{\r\n    key: string;\r\n    keyCode: string;\r\n}\r\n\r\nclass EditorOnInitEvent extends EditorEvent\r\n{\r\n    event: any;\r\n}\r\n\r\nclass EditorDragDropEvent extends EditorEvent\r\n{\r\n    event: any;\r\n    element: HTMLElement;\r\n}\r\n\r\nclass EditorDropEvent extends EditorDragDropEvent\r\n{\r\n    files: File[];\r\n}\r\n\r\nclass EditorDragEnterEvent extends EditorDragDropEvent { }\r\nclass EditorDragOverEvent extends EditorDragDropEvent { }\r\nclass EditorDragLeaveEvent extends EditorDragDropEvent { }\r\n//#endregion","import { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { ControlTypeEnum, IconClassLight, IconClass, WindowFooterItemTypeEnum as WindowFooterItemTypeEnum, ButtonModeEnum, ColorSettings, WindowFooterItemAlignEnum, createButton, createSplitButton, puma, shadowRoot, WindowAutoSizeDirectionEnum, TextAlignEnum, createLabel, ButtonGroupItem, createSwitch, createButtonGroup, SelectionModeEnum, createCheckBox, createComboBox, createDatePicker, createTextBox, IconClassRegular, IconSettings, createSeparator } from \"../vr\";\r\nimport { UtilityManager } from \"../../../src/managers/utilityManager\";\r\nimport { SplitButtonItem } from \"./splitButton\";\r\nimport { ControlManager } from \"../../../src/managers/controlManager\";\r\nimport { DeviceManager } from \"../../../src/managers/deviceManager\";\r\nimport { LoaderManager } from \"../../../src/managers/loaderManager\";\r\nimport { ComboBoxOptions } from \"./comboBox\";\r\nimport { DatePickerOptions } from \"./datePicker\";\r\nimport { TextBoxOptions } from \"./textbox\";\r\n\r\n//#region Options\r\nexport class WindowOptions extends VrControlOptions\r\n{\r\n    maximized?: boolean | WindowMaximizeSettings;\r\n    padding?: number;\r\n    modal?: boolean;\r\n    closeable?: boolean;\r\n    hideCloseIcon?: boolean;\r\n    removeOnClose?: boolean;\r\n    title?: string | boolean | WindowTitleSettings;\r\n    footer?: boolean | WindowFooterItem[];\r\n    draggable?: boolean;\r\n    position?: WindowPosition;\r\n    content?: string;\r\n    iframe?: boolean;\r\n    loader?: boolean;\r\n    id?: string;\r\n    autoSize?: boolean | WindowAutoSizeDirectionEnum;\r\n    cssHeader?: string;\r\n\r\n    onOpen?(e: WindowOpenEvent): void;\r\n    onBeforeClose?(e: WindowBeforeCloseEvent): void;\r\n    onClose?(e: WindowCloseEvent): void;\r\n    onDragStart?(e: WindowDragStartEvent): void;\r\n    onDragEnd?(e: WindowDragEndEvent): void;\r\n    onContentLoaded?(e: WindowContentLoadEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Window extends VrControl\r\n{\r\n    private _divHeader: HTMLElement;\r\n    private _divFooter: HTMLElement;\r\n    private _callbackFooterItems?: CallBackFooterItem[] | null;\r\n    private _openCloseCallback?: Function;\r\n    private _additionalCloseCallbacks?: Function[];\r\n    private _additionalOpenCallbacks?: Function[];\r\n    private _additionalContentLoadedCallbacks: Function[];\r\n    private _background: HTMLElement;\r\n    private _iframe: HTMLIFrameElement | null;\r\n    private _animateAutosize: boolean;\r\n\r\n    constructor(element: HTMLElement, options?: WindowOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new WindowOptions();\r\n\r\n        if (options.width == null) options.width = 500;\r\n        if (options.height == null) options.height = 500;\r\n        if (options.padding == null) options.padding = 10;\r\n        if (options.modal == null) options.modal = true;\r\n        if (options.closeable == null) options.closeable = true;\r\n        if (options.hideCloseIcon == null) options.hideCloseIcon = false;\r\n        if (options.draggable == null) options.draggable = true;\r\n        if (options.iframe == null) options.iframe = false;\r\n        if (options.loader == null) options.loader = false;\r\n        if (options.title == null) options.title = false;\r\n        if (options.removeOnClose == null) options.removeOnClose = false;\r\n\r\n        if (options.footer == null || options.footer === true) options.footer =\r\n            [\r\n                { type: WindowFooterItemTypeEnum.Close, value: \"close\" },\r\n                { type: WindowFooterItemTypeEnum.Ok, value: \"ok\" }\r\n            ];\r\n\r\n        if (options.autoSize == null) options.autoSize = false;\r\n        if (options.autoSize === true) options.autoSize = WindowAutoSizeDirectionEnum.Height;\r\n\r\n        //#region Maximize\r\n        if (options.maximized == null) (DeviceManager.isMobile()) ? options.maximized = true : options.maximized = false;\r\n        if (options.maximized !== false)\r\n        {\r\n            if (typeof (options.maximized) === \"boolean\")\r\n            {\r\n                options.width = \"Calc(100% - 30px)\";\r\n                options.height = \"Calc(100% - 30px)\";\r\n            }\r\n            else\r\n            {\r\n                if (options.maximized.padding === true)\r\n                {\r\n                    options.width = \"Calc(100% - 30px)\";\r\n                    options.height = \"Calc(100% - 30px)\";\r\n                }\r\n                else\r\n                {\r\n                    options.width = \"100%\";\r\n                    options.height = \"100%\";\r\n                }\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#endregion\r\n\r\n        super(element, options, ControlTypeEnum.Window);\r\n        puma(this.container()).hide();\r\n        this._additionalCloseCallbacks = [];\r\n        this._additionalOpenCallbacks = [];\r\n        this._additionalContentLoadedCallbacks = [];\r\n\r\n        if (options.id != null)\r\n            puma(this.element()).attr(\"id\", options.id);\r\n\r\n        //#region Header\r\n        if (options.title !== false)\r\n        {\r\n            if (options.title === true) options.title = \"\";\r\n            let title = \"\";\r\n\r\n            if (typeof (options.title) == \"string\")\r\n            {\r\n                title = options.title;\r\n                options.title = new WindowTitleSettings();\r\n            }\r\n\r\n            if (options.title.text == null) options.title.text = title;\r\n            if (options.title.fontSize == null) options.title.fontSize = 16;\r\n            if (options.title.colorSettings == null) options.title.colorSettings = new ColorSettings();\r\n            if (options.title.colorSettings.textColor == null) options.title.colorSettings.textColor = \"#FFF\";\r\n            if (options.title.align == null) options.title.align = TextAlignEnum.Left;\r\n\r\n            this._divHeader = puma(\"<div class='vrWindowHeader'></div>\").vrPrependToPuma(this.container())[0];\r\n            if (options.cssHeader != null)\r\n                this._divHeader.style.cssText += options.cssHeader;\r\n\r\n            let spanWindowTitle = puma(\"<span class='vrWindowTitle'></span>\").vrAppendToPuma(this._divHeader);\r\n            createLabel({\r\n                width: \"100%\",\r\n                text: options.title.text,\r\n                fontSize: options.title.fontSize,\r\n                colorSettings: options.title.colorSettings,\r\n                align: options.title.align,\r\n                noBr: true\r\n            }, spanWindowTitle)\r\n\r\n            if (options.closeable || !options.hideCloseIcon)\r\n            {\r\n                let spanCloseIcon = puma(\"<span class='vrWindowCloseIcon'></span>\").vrAppendToPuma(this._divHeader);\r\n                puma(UtilityManager.createIcon(IconClassRegular.Xmark)).vrAppendToPuma(spanCloseIcon);\r\n                spanCloseIcon.click(() => this.close());\r\n\r\n                if (options.hideCloseIcon)\r\n                    puma(spanCloseIcon).hide();\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#region Draggable\r\n        if (options.draggable)\r\n        {\r\n            puma(this._divHeader).css(\"cursor\", \"move\");\r\n            puma(this._divHeader).find(\".vrWindowTitle .vrLabel\").css(\"cursor\", \"move\");\r\n\r\n            puma(this._divHeader).vrDrag(this.container(),\r\n                (e: any) => \r\n                {\r\n                    if (e.event.target.classList.contains(\"fa-xmark\"))\r\n                    {\r\n                        e.preventDefault();\r\n                        e.event.preventDefault();\r\n                        return;\r\n                    }\r\n\r\n                    puma(this.container()).addClass(\"vrWindowDragging\");\r\n                    if (options!.onDragStart != null)\r\n                    {\r\n                        let dragStartEvent = new WindowDragStartEvent();\r\n                        dragStartEvent.sender = this;\r\n                        dragStartEvent.left = e.left;\r\n                        dragStartEvent.top = e.top;\r\n                        options!.onDragStart(dragStartEvent);\r\n                    }\r\n                },\r\n                (e: any) => \r\n                {\r\n                    puma(this.container()).removeClass(\"vrWindowDragging\");\r\n                    if (options!.onDragEnd != null)\r\n                    {\r\n                        let dragEndEvent = new WindowDragEndEvent();\r\n                        dragEndEvent.sender = this;\r\n                        dragEndEvent.left = e.left;\r\n                        dragEndEvent.top = e.top;\r\n                        options!.onDragEnd(dragEndEvent);\r\n                    }\r\n                });\r\n        }\r\n        //#endregion\r\n\r\n        //#region Footer\r\n        if (options.footer)\r\n        {\r\n            this._divFooter = puma(\"<div class='vrWindowFooter'></div>\").vrAppendToPuma(this.container())[0];\r\n            this._divFooter.style.cssText += \"margin-top: \" + (options.padding * 2) + \"px;\";\r\n\r\n            for (let footerItem of options.footer)\r\n                this.addFooterItem(footerItem);\r\n        }\r\n        //#endregion\r\n\r\n        //#region Content\r\n        if (options.iframe)\r\n            this._iframe = puma(\"<iframe id='\" + this.element().id + \"_iframeContent' class='vrWindowIframe'></iframe>\").vrAppendToPuma(this.element())[0] as HTMLIFrameElement;\r\n\r\n        if (options.content != null)\r\n            this.content(options.content);\r\n        //#endregion\r\n    }\r\n\r\n    //#region Methods\r\n    open(callBackFooterItems?: CallBackFooterItem[] | null, center = true, position?: WindowPosition): Promise<any>\r\n    {\r\n        let options = this.getOptions();\r\n        this.container().style.cssText += \"position: absolute;\";\r\n\r\n        //#region Position\r\n        if (position != null)\r\n            this.position(position.left, position.top, position.right, position.bottom);\r\n        else if (options.position != null)\r\n            this.position(options.position.left, options.position.top, options.position.right, options.position.bottom);\r\n        else if (center)\r\n            this.center();\r\n\r\n        if (options.maximized)\r\n        {\r\n            if (typeof (options.maximized) !== \"boolean\")\r\n                this.maximize(options.maximized!.padding);\r\n            else\r\n                this.maximize();\r\n        }\r\n        //#endregion\r\n\r\n        if (callBackFooterItems != null)\r\n            this._callbackFooterItems = callBackFooterItems;\r\n\r\n        let promise = new Promise((closeCallBack?: Function) =>\r\n        {\r\n            puma(this.container()).show();\r\n\r\n            let height = puma(this.container()).height() - (options!.padding! * 2);\r\n            if (options.title !== false)\r\n                height -= puma(this._divHeader).outerHeight();\r\n            if (options.footer)\r\n                height -= puma(this._divFooter).outerHeight();\r\n\r\n            this.element().style.cssText += \"height: \" + height + \"px; width: Calc(100% - \" + (options!.padding! * 2) + \"px); left: \" + options!.padding! + \"px; top: \" + options!.padding! + \"px\";\r\n\r\n            let maxZindexWindow = Array.from<HTMLElement>(puma(\".vrWindowContainer\")).map(k => Number(puma(k).css(\"z-index\"))).vrMax();\r\n            puma(this.container()).css(\"z-index\", (maxZindexWindow + 2));\r\n\r\n            //#region Background\r\n            if (options.modal)\r\n            {\r\n                if (this._background == null)\r\n                    this._background = puma(\"<div class='vrWindowBackground' id='vrWindowBackground_\" + this.element().id + \"'></div>\").vrAppendToPuma(this.container().parentElement)[0];\r\n\r\n                if (options.closeable)\r\n                    puma(this._background).click(() => this.close());\r\n\r\n                puma(this._background).css(\"z-index\", (maxZindexWindow + 1));\r\n            }\r\n            //#endregion\r\n\r\n            if (closeCallBack != null)\r\n                this._openCloseCallback = closeCallBack;\r\n\r\n            if (options.onOpen != null)\r\n            {\r\n                let openEvent = new WindowOpenEvent();\r\n                openEvent.sender = this;\r\n                options.onOpen(openEvent);\r\n            }\r\n\r\n            for (let openCallback of this._additionalOpenCallbacks!)\r\n                openCallback();\r\n        });\r\n        return promise;\r\n    }\r\n\r\n    close(triggerEvents = true): void\r\n    {\r\n        let options = this.getOptions();\r\n\r\n        if (triggerEvents)\r\n        {\r\n            if (options.onBeforeClose != null)\r\n            {\r\n                let closeBeforeEvent = new WindowBeforeCloseEvent();\r\n                closeBeforeEvent.sender = this;\r\n                options.onBeforeClose(closeBeforeEvent);\r\n\r\n                if (closeBeforeEvent.isDefaultPrevented())\r\n                    return;\r\n            }\r\n        }\r\n\r\n        if (!options.removeOnClose)\r\n            puma(this.container()).hide();\r\n        else\r\n            puma(this.container()).remove();\r\n\r\n        puma(this._background).remove();\r\n        (this._background as any) = null;\r\n\r\n        if (this._callbackFooterItems != null && this._callbackFooterItems.map(k => k.value).includes(\"close\"))\r\n        {\r\n            let callback = this._callbackFooterItems.filter(k => k.value == \"close\")[0].callback;\r\n            if (callback != null)\r\n                callback();\r\n        }\r\n\r\n        if (this._openCloseCallback != null)\r\n            this._openCloseCallback();\r\n\r\n        for (let closeCallback of this._additionalCloseCallbacks!)\r\n            closeCallback();\r\n\r\n        if (triggerEvents)\r\n        {\r\n            if (options.onClose != null)\r\n            {\r\n                let closeEvent = new WindowCloseEvent();\r\n                closeEvent.sender = this;\r\n                options.onClose(closeEvent);\r\n            }\r\n        }\r\n    }\r\n\r\n    remove()\r\n    {\r\n        puma(this.container()).remove();\r\n        puma(this._background).remove();\r\n    }\r\n\r\n    addCloseCallbacks(...callback: Function[])\r\n    {\r\n        this._additionalCloseCallbacks!.push(...callback);\r\n    }\r\n\r\n    addOpenCallbacks(...callback: Function[])\r\n    {\r\n        this._additionalOpenCallbacks!.push(...callback);\r\n    }\r\n\r\n    addContentLoadedCallbacks(...callback: Function[])\r\n    {\r\n        this._additionalContentLoadedCallbacks!.push(...callback);\r\n    }\r\n\r\n    closeIconVisible(state?: boolean)\r\n    {\r\n        let closeIcon = puma(this.container()).find(\".vrWindowCloseIcon\");\r\n        if (state != null)\r\n        {\r\n            if (state) closeIcon.show();\r\n            else closeIcon.hide();\r\n        }\r\n        return closeIcon.is(\":visible\");\r\n    }\r\n\r\n    title(text?: string): string\r\n    {\r\n        if (puma(this.container()).find(\".vrWindowTitle label\")[0] == null)\r\n            return \"\";\r\n\r\n        if (text != null)\r\n            puma(this.container()).find(\".vrWindowTitle label\")[0].innerHTML = text;\r\n\r\n        return puma(this.container()).find(\".vrWindowTitle label\")[0].innerHTML;\r\n    }\r\n\r\n    maximize(padding = true): void\r\n    {\r\n        let width = (padding) ? \"Calc(100% - 30px)\" : \"100%\";\r\n        let height = (padding) ? \"Calc(100% - 30px)\" : \"100%\";\r\n        this.resize(width, height);\r\n\r\n        let options = this.getOptions();\r\n        if (options.position != null)\r\n            this.position(options.position.left, options.position.top, options.position.right, options.position.bottom);\r\n        else\r\n            this.center();\r\n    }\r\n\r\n    resize(width?: number | string, height?: number | string): void\r\n    {\r\n        let options = this.getOptions();\r\n        let newWidth = (width != null) ? width : options.width;\r\n        let newHeight = (height != null) ? height : options.height;\r\n        this.width(newWidth);\r\n        this.height(newHeight);\r\n    }\r\n\r\n    autoSize(direction: WindowAutoSizeDirectionEnum = WindowAutoSizeDirectionEnum.Height, animate = false, center = true)\r\n    {\r\n        this._animateAutosize = animate;\r\n\r\n        if (direction == WindowAutoSizeDirectionEnum.Height)\r\n            this.height(\"auto\", center);\r\n        else\r\n            this.width(\"auto\", center);\r\n\r\n        this._animateAutosize = false;\r\n    }\r\n\r\n    content(content: string, loader: boolean | HTMLElement | JQuery | string = false, open = false, triggerChange = true)\r\n    {\r\n        let options = this.getOptions();\r\n\r\n        //#region Iframe\r\n        let iframeBody: HTMLElement | null = null;\r\n        if (options.iframe)\r\n        {\r\n            let iframeContentDocument = this._iframe!.contentDocument;\r\n            puma(iframeContentDocument).find(\"body\").css(\"margin\", \"0px\");\r\n            if (iframeContentDocument != null)\r\n                iframeBody = iframeContentDocument.body;\r\n        }\r\n        //#endregion\r\n\r\n        if (content != null && (content.endsWith(\".html\") || content.endsWith(\".php\") ||\r\n            content.includes(\".aspx\") || content.startsWith(\"http\") || content.startsWith(\"/\")))\r\n        {\r\n            if (options.loader || loader !== false)\r\n            {\r\n                if (loader === true)\r\n                    loader = this.element();\r\n\r\n                LoaderManager.show((loader === false) ? this.element() : loader);\r\n            }\r\n\r\n            if (!options.iframe)\r\n            {\r\n                puma(this.element()).load(content, () => \r\n                {\r\n                    if (triggerChange)\r\n                        this.onContentLoaded();\r\n\r\n                    this.autoSizeIfRequired();\r\n\r\n                    if (open)\r\n                        this.open();\r\n                });\r\n            }\r\n            else\r\n            {\r\n                puma(this._iframe).attr(\"src\", content);\r\n                puma(this._iframe).on(\"load\", () => \r\n                {\r\n                    let iframeContentDocument = this._iframe!.contentDocument;\r\n                    puma(iframeContentDocument).find(\"body\").css(\"margin\", \"0px\");\r\n\r\n                    if (triggerChange)\r\n                        this.onContentLoaded();\r\n\r\n                    this.autoSizeIfRequired();\r\n\r\n                    if (open)\r\n                        this.open();\r\n                });\r\n            }\r\n        }\r\n        else\r\n        {\r\n            puma(this.element()).empty();\r\n            if (content != null && !content.startsWith(\"<\"))\r\n                content = \"<div>\" + content + \"</div>\";\r\n\r\n            if (!options.iframe)\r\n                puma(content).vrAppendToPuma(this.element());\r\n            else\r\n                puma(content).vrAppendToPuma(iframeBody);\r\n\r\n            if (triggerChange)\r\n                this.onContentLoaded();\r\n\r\n            this.autoSizeIfRequired();\r\n\r\n            if (open)\r\n                this.open();\r\n        }\r\n    }\r\n\r\n    private autoSizeIfRequired()\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.autoSize !== false)\r\n            this.autoSize(options.autoSize as WindowAutoSizeDirectionEnum, false);\r\n    }\r\n\r\n    clear()\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.iframe)\r\n            puma(this._iframe).removeAttr(\"src\");\r\n        else\r\n            puma(this.element()).empty();\r\n    }\r\n\r\n    background()\r\n    {\r\n        return this._background;\r\n    }\r\n\r\n    center(): void\r\n    {\r\n        let scrollTop = puma(window).scrollTop();\r\n        let windowHeight = window.innerHeight;\r\n        let top = (windowHeight / 2) - (puma(this.container()).height() / 2) + scrollTop;\r\n\r\n        let scrollLeft = puma(window).scrollLeft();\r\n        let windowWidth = window.innerWidth;\r\n        let left = (windowWidth / 2) - (puma(this.container()).width() / 2) + scrollLeft;\r\n\r\n        this.position(left, top);\r\n    }\r\n\r\n    position(left?: number | string | null, top?: number | string | null, right?: number | string | null, bottom?: number | string | null)\r\n    {\r\n        let leftPosition = \"\";\r\n        if (left != null)\r\n        {\r\n            leftPosition = \"left: \" + left + \";\";\r\n            if (typeof (left) == \"number\")\r\n                leftPosition = \"left: \" + left + \"px;\";\r\n        }\r\n\r\n        let topPosition = \"\";\r\n        if (top != null)\r\n        {\r\n            topPosition = \"top: \" + top + \";\";\r\n            if (typeof (top) == \"number\")\r\n                topPosition = \"top: \" + top + \"px;\";\r\n        }\r\n\r\n        let rightPosition = \"\";\r\n        if (right != null)\r\n        {\r\n            leftPosition = \"left: unset;\";\r\n            rightPosition = \"right: \" + right + \";\";\r\n            if (typeof (right) == \"number\")\r\n                rightPosition = \"right: \" + right + \"px;\";\r\n        }\r\n\r\n        let bottomPosition = \"\";\r\n        if (bottom != null)\r\n        {\r\n            topPosition = \"top: unset;\";\r\n            bottomPosition = \"bottom: \" + bottom + \";\";\r\n            if (typeof (bottom) == \"number\")\r\n                bottomPosition = \"bottom: \" + bottom + \"px;\";\r\n        }\r\n\r\n        this.container().style.cssText += leftPosition + topPosition + rightPosition + bottomPosition;\r\n        let position = $(this.container()).position();\r\n        return { left: position.left, top: position.top };\r\n    }\r\n\r\n    footerItem<T extends VrControl>(value: string | number)\r\n    {\r\n        let element = puma(this._divFooter).find(\"[value='\" + value + \"']\")[0];\r\n        return ControlManager.get<T>((element != null) ? element.id : \"\");\r\n    }\r\n\r\n    hideFooterItem(value: string | number)\r\n    {\r\n        this.footerItem(value).hide();\r\n    }\r\n\r\n    showFooterItem(value: string | number)\r\n    {\r\n        this.footerItem(value).show();\r\n    }\r\n\r\n    enableFooterItem(value: string | number)\r\n    {\r\n        this.footerItem(value).enable();\r\n    }\r\n\r\n    disableFooterItem(value: string | number)\r\n    {\r\n        this.footerItem(value).disable();\r\n    }\r\n\r\n    addFooterItem(footerItem: WindowFooterItem)\r\n    {\r\n        if (footerItem.align == null) footerItem.align = WindowFooterItemAlignEnum.Right;\r\n        let cssContainer = \"float: right; margin-left: 5px;\";\r\n        if (footerItem.align == WindowFooterItemAlignEnum.Left)\r\n            cssContainer = \"float: left; margin-right: 5px;\";\r\n\r\n        if (footerItem.type == WindowFooterItemTypeEnum.Close || footerItem.type == WindowFooterItemTypeEnum.Ok\r\n            || footerItem.type == WindowFooterItemTypeEnum.Custom || footerItem.type == null)\r\n        {\r\n            //#region Button\r\n            let text = footerItem.text;\r\n            if (footerItem.type == WindowFooterItemTypeEnum.Close || footerItem.type == WindowFooterItemTypeEnum.Ok)\r\n                text = (footerItem.text != null) ? footerItem.text : ((footerItem.type == WindowFooterItemTypeEnum.Close) ? \"Chiudi\" : \"Salva\");\r\n\r\n            let value = footerItem.value;\r\n            if ((footerItem.type == WindowFooterItemTypeEnum.Close || footerItem.type == WindowFooterItemTypeEnum.Ok) && (value == null || value == \"\"))\r\n                value = (footerItem.type == WindowFooterItemTypeEnum.Close) ? \"close\" : \"ok\";\r\n\r\n            if ((value == null || value == \"\") && text != null)\r\n                value = text.replace(/[^a-z0-9\\s]/gi, \"\").replace(/[_\\s]/g, \"\");\r\n\r\n            let mode = footerItem.mode;\r\n            if (footerItem.type == WindowFooterItemTypeEnum.Ok)\r\n                mode = ButtonModeEnum.Primary;\r\n\r\n            let button = createButton(\r\n                {\r\n                    text: text,\r\n                    icon: footerItem.icon,\r\n                    iconSettings: footerItem.iconSettings,\r\n                    imageUrl: footerItem.imageUrl,\r\n                    mode: mode,\r\n                    colorSettings: footerItem.colorSettings,\r\n                    tooltip: footerItem.tooltip,\r\n                    confirmationMessage: footerItem.confirmationMessage,\r\n                    visible: footerItem.visible,\r\n                    enable: footerItem.enable,\r\n                    css: footerItem.css,\r\n                    cssContainer: cssContainer + footerItem.cssContainer,\r\n                    class: footerItem.class,\r\n                    width: footerItem.width,\r\n                    onClick: (e) => \r\n                    {\r\n                        if (footerItem.type == WindowFooterItemTypeEnum.Close)\r\n                            this.close();\r\n\r\n                        if (footerItem.onClick != null)\r\n                        {\r\n                            let clickEvent = new WindowFooterItemClickEvent();\r\n                            clickEvent.sender = this;\r\n                            footerItem.onClick(clickEvent);\r\n                        }\r\n\r\n                        if (value != null && this._callbackFooterItems != null && this._callbackFooterItems.map(k => k.value).includes(value))\r\n                        {\r\n                            let callback = this._callbackFooterItems.filter(k => k.value == value)[0].callback;\r\n                            if (callback != null)\r\n                                callback();\r\n                        }\r\n                    }\r\n                }, this._divFooter);\r\n\r\n            if (value != null)\r\n                puma(button.element()).attr(\"value\", value);\r\n            //#endregion\r\n        }\r\n        else if (footerItem.type == WindowFooterItemTypeEnum.Separator)\r\n        {\r\n            createSeparator({ \r\n                cssContainer: cssContainer\r\n            }, this._divFooter)\r\n        }\r\n        else if (footerItem.type == WindowFooterItemTypeEnum.SplitButton || footerItem.splitButtonItems != null)\r\n        {\r\n            //#region SplitButton\r\n            let splitButton = createSplitButton(\r\n                {\r\n                    text: footerItem.text,\r\n                    icon: footerItem.icon,\r\n                    imageUrl: footerItem.imageUrl,\r\n                    colorSettings: footerItem.colorSettings,\r\n                    tooltip: footerItem.tooltip,\r\n                    items: footerItem.splitButtonItems,\r\n                    visible: footerItem.visible,\r\n                    enable: footerItem.enable,\r\n                    css: footerItem.css,\r\n                    cssContainer: footerItem.cssContainer + \"; \" + cssContainer,\r\n                    class: footerItem.class,\r\n                    onClick: (footerItem.onClick == null) ? undefined : (e) =>\r\n                    {\r\n                        if (footerItem.onClick != null)\r\n                        {\r\n                            let clickEvent = new WindowFooterItemClickEvent();\r\n                            clickEvent.sender = this;\r\n                            footerItem.onClick(clickEvent);\r\n                        }\r\n\r\n                        if (footerItem.value != null && this._callbackFooterItems != null && this._callbackFooterItems.map(k => k.value).includes(footerItem.value))\r\n                        {\r\n                            let callback = this._callbackFooterItems.filter(k => k.value == footerItem.value)[0].callback;\r\n                            if (callback != null)\r\n                                callback();\r\n                        }\r\n                    },\r\n                    onSelect: (e) =>\r\n                    {\r\n                        if (e.value != null && this._callbackFooterItems != null && this._callbackFooterItems.map(k => k.value).includes(e.value))\r\n                        {\r\n                            let callback = this._callbackFooterItems.filter(k => k.value == e.value)[0].callback;\r\n                            if (callback != null)\r\n                                callback();\r\n                        }\r\n                    }\r\n                }, this._divFooter);\r\n\r\n            if (footerItem.value != null)\r\n                puma(splitButton.element()).attr(\"value\", footerItem.value);\r\n            //#endregion\r\n        }\r\n        else if (footerItem.type == WindowFooterItemTypeEnum.Switch)\r\n        {\r\n            if (footerItem.switchSettings == null)\r\n            {\r\n                footerItem.switchSettings = new SplitButtonSwitchSettings();\r\n                footerItem.switchSettings.labelOff = \"\";\r\n                footerItem.switchSettings.labelOn = \"\";\r\n            }\r\n\r\n            if (footerItem.switchSettings.checked == null) footerItem.switchSettings.checked = false;\r\n            let switchControl = createSwitch(\r\n                {\r\n                    labelOff: footerItem.switchSettings!.labelOff,\r\n                    labelOn: footerItem.switchSettings!.labelOn,\r\n                    checked: footerItem.switchSettings.checked,\r\n                    cssContainer: footerItem.cssContainer + \"; \" + cssContainer,\r\n                    css: footerItem.css,\r\n                    class: footerItem.class,\r\n                    visible: footerItem.visible,\r\n                    enable: footerItem.enable,\r\n                    onChange: (e) =>\r\n                    {\r\n                        if (footerItem.switchSettings!.onCheck != null)\r\n                        {\r\n                            let tableSwitchEvent = new SplitButtonSwitchEvent();\r\n                            tableSwitchEvent.checked = e.checked;\r\n                            footerItem.switchSettings!.onCheck(tableSwitchEvent);\r\n                        }\r\n                    }\r\n                }, this._divFooter);\r\n\r\n            if (footerItem.value != null)\r\n                puma(switchControl.element()).attr(\"value\", footerItem.value);\r\n        }\r\n        else if (footerItem.type == WindowFooterItemTypeEnum.ButtonGroup)\r\n        {\r\n            let buttonGroup = createButtonGroup(\r\n                {\r\n                    selectionMode: SelectionModeEnum.Single,\r\n                    items: footerItem.buttonGroupItems!,\r\n                    cssContainer: footerItem.cssContainer,\r\n                    css: footerItem.css,\r\n                    class: footerItem.class,\r\n                    visible: footerItem.visible,\r\n                    enable: footerItem.enable,\r\n                    width: \"auto\",\r\n                    onSelect: (e) => \r\n                    {\r\n                        if (footerItem.onClick != null)\r\n                        {\r\n                            let clickEvent = new WindowFooterItemClickEvent();\r\n                            clickEvent.sender = this;\r\n                            footerItem.onClick(clickEvent);\r\n                        }\r\n                    }\r\n                }, this._divFooter);\r\n\r\n            if (footerItem.value != null)\r\n                puma(buttonGroup.element()).attr(\"value\", footerItem.value);\r\n        }\r\n        else if (footerItem.type == WindowFooterItemTypeEnum.CheckBox)\r\n        {\r\n            let checkBox = createCheckBox(\r\n                {\r\n                    text: footerItem.text,\r\n                    cssContainer: \"top: -1px; \" + footerItem.cssContainer,\r\n                    css: footerItem.css,\r\n                    class: footerItem.class,\r\n                    visible: footerItem.visible,\r\n                    enable: footerItem.enable,\r\n                    onCheck: (e) => \r\n                    {\r\n                        if (footerItem.onClick != null)\r\n                        {\r\n                            let clickEvent = new WindowFooterItemClickEvent();\r\n                            clickEvent.sender = this;\r\n                            footerItem.onClick(clickEvent);\r\n                        }\r\n                    }\r\n                }, this._divFooter);\r\n\r\n            if (footerItem.value != null)\r\n                puma(checkBox.element()).attr(\"value\", footerItem.value);\r\n        }\r\n        else if (footerItem.type == WindowFooterItemTypeEnum.Label)\r\n        {\r\n            let label = createLabel(\r\n                {\r\n                    text: footerItem.text,\r\n                    cssContainer: footerItem.cssContainer,\r\n                    css: footerItem.css,\r\n                    class: footerItem.class,\r\n                    visible: footerItem.visible,\r\n                    enable: footerItem.enable,\r\n                    onClick: (e) => \r\n                    {\r\n                        if (footerItem.onClick != null)\r\n                        {\r\n                            let clickEvent = new WindowFooterItemClickEvent();\r\n                            clickEvent.sender = this;\r\n                            footerItem.onClick(clickEvent);\r\n                        }\r\n                    }\r\n                }, this._divFooter);\r\n\r\n            if (footerItem.value != null)\r\n                puma(label.element()).attr(\"value\", footerItem.value);\r\n        }\r\n        else if (footerItem.type == WindowFooterItemTypeEnum.ComboBox)\r\n        {\r\n            if (footerItem.comboBoxOptions == null) footerItem.comboBoxOptions = new ComboBoxOptions();\r\n            footerItem.comboBoxOptions.classContainer = footerItem.comboBoxOptions.classContainer;\r\n            footerItem.comboBoxOptions.class = footerItem.comboBoxOptions.class;\r\n            if (footerItem.comboBoxOptions.visible == null) footerItem.comboBoxOptions.visible = footerItem.visible;\r\n            if (footerItem.comboBoxOptions.enable == null) footerItem.comboBoxOptions.enable = footerItem.enable;\r\n            if (footerItem.comboBoxOptions.css == null) footerItem.comboBoxOptions.css = footerItem.css;\r\n            if (footerItem.comboBoxOptions.cssContainer == null) footerItem.comboBoxOptions.cssContainer = footerItem.cssContainer;\r\n\r\n            let combo = createComboBox(footerItem.comboBoxOptions, this._divFooter);\r\n            if (footerItem.value != null)\r\n                puma(combo.element()).attr(\"value\", footerItem.value);\r\n        }\r\n        else if (footerItem.type == WindowFooterItemTypeEnum.DatePicker)\r\n        {\r\n            if (footerItem.datePickerOptions == null) footerItem.datePickerOptions = new DatePickerOptions();\r\n            footerItem.datePickerOptions.classContainer = footerItem.datePickerOptions.classContainer;\r\n            footerItem.datePickerOptions.class = footerItem.datePickerOptions.class;\r\n            if (footerItem.datePickerOptions.visible == null) footerItem.datePickerOptions.visible = footerItem.visible;\r\n            if (footerItem.datePickerOptions.enable == null) footerItem.datePickerOptions.enable = footerItem.enable;\r\n            if (footerItem.datePickerOptions.css == null) footerItem.datePickerOptions.css = footerItem.css;\r\n            if (footerItem.datePickerOptions.cssContainer == null) footerItem.datePickerOptions.cssContainer = footerItem.cssContainer;\r\n\r\n            let datePicker = createDatePicker(footerItem.datePickerOptions, this._divFooter);\r\n            if (footerItem.value != null)\r\n                puma(datePicker.element()).attr(\"value\", footerItem.value);\r\n        }\r\n        else if (footerItem.type == WindowFooterItemTypeEnum.TextBox)\r\n        {\r\n            if (footerItem.textBoxOptions == null) footerItem.textBoxOptions = new TextBoxOptions();\r\n            footerItem.textBoxOptions.classContainer = footerItem.textBoxOptions.classContainer;\r\n            footerItem.textBoxOptions.class = footerItem.textBoxOptions.class;\r\n            if (footerItem.textBoxOptions.visible == null) footerItem.textBoxOptions.visible = footerItem.visible;\r\n            if (footerItem.textBoxOptions.enable == null) footerItem.textBoxOptions.enable = footerItem.enable;\r\n            if (footerItem.textBoxOptions.css == null) footerItem.textBoxOptions.css = footerItem.css;\r\n            if (footerItem.textBoxOptions.cssContainer == null) footerItem.textBoxOptions.cssContainer = footerItem.cssContainer;\r\n\r\n            let textbox = createTextBox(footerItem.textBoxOptions, this._divFooter);\r\n            if (footerItem.value != null)\r\n                puma(textbox.element()).attr(\"value\", footerItem.value);\r\n        }\r\n    }\r\n\r\n    footer()\r\n    {\r\n        return puma(this._divFooter)[0] as HTMLElement;\r\n    }\r\n\r\n    header()\r\n    {\r\n        return puma(this._divHeader)[0] as HTMLElement;\r\n    }\r\n\r\n    titleElement()\r\n    {\r\n        return puma(this._divHeader).find(\".vrWindowTitle\")[0] as HTMLElement;\r\n    }\r\n\r\n    private getOptions(): WindowOptions\r\n    {\r\n        return this.options<WindowOptions>();\r\n    }\r\n\r\n    private onContentLoaded(): void\r\n    {\r\n        let options = this.getOptions();\r\n        LoaderManager.hide();\r\n\r\n        if (options.onContentLoaded != null)\r\n        {\r\n            let onLoadEvent = new WindowContentLoadEvent();\r\n            onLoadEvent.sender = this;\r\n            options.onContentLoaded(onLoadEvent);\r\n        }\r\n\r\n        for (let contentLoaded of this._additionalContentLoadedCallbacks!)\r\n            contentLoaded();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Overrides\r\n    height(height?: number | string, center = true)\r\n    {\r\n        let options = this.getOptions();\r\n\r\n        if (height != \"auto\" || (height == \"auto\" && !this._animateAutosize))\r\n            super.height(height);\r\n        else\r\n        {\r\n            this.container().style.cssText += \"height: auto;\";\r\n            let curHeight = puma(this.element()).height();\r\n            let autoHeight = puma(this.element()).css('height', 'auto').height();\r\n            puma(this.element()).height(curHeight).animate({ height: autoHeight }, 300);\r\n        }\r\n\r\n        if (typeof (height) == \"number\")\r\n        {\r\n            height -= (options!.padding! * 2);\r\n\r\n            if (options.title != null)\r\n                height -= puma(this._divHeader).outerHeight();\r\n            if (options.footer)\r\n                height -= puma(this._divFooter).outerHeight();\r\n\r\n            this.element().style.cssText += \"height: \" + height + \"px;\";\r\n        }\r\n\r\n        if (center)\r\n        {\r\n            if (this._animateAutosize)\r\n                window.setTimeout(() => this.center(), 300);\r\n            else\r\n                this.center();\r\n        }\r\n\r\n        return super.height();\r\n    }\r\n\r\n    width(width?: number | string, center = true)\r\n    {\r\n        let options = this.getOptions();\r\n        super.width(width);\r\n\r\n        if (center)\r\n            this.center();\r\n\r\n        //if (width == \"auto\")\r\n        this.element().style.cssText += \"width: Calc(100% - \" + (options.padding! * 2) + \"px);\";\r\n\r\n        return super.width();\r\n    }\r\n    //#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nexport class WindowFooterItem\r\n{\r\n    value?: string;\r\n    type?: WindowFooterItemTypeEnum;\r\n    text?: string;\r\n    icon?: IconClass;\r\n    iconSettings?: IconSettings;\r\n    imageUrl?: string;\r\n    mode?: ButtonModeEnum;\r\n    colorSettings?: ColorSettings;\r\n    tooltip?: string;\r\n    confirmationMessage?: string;\r\n    align?: WindowFooterItemAlignEnum;\r\n    visible?: boolean;\r\n    enable?: boolean;\r\n    css?: string;\r\n    cssContainer?: string;\r\n    class?: string;\r\n    width?: string | number;\r\n\r\n    splitButtonItems?: SplitButtonItem[];\r\n    switchSettings?: SplitButtonSwitchSettings;\r\n    buttonGroupItems?: ButtonGroupItem[];\r\n    comboBoxOptions?: ComboBoxOptions;\r\n    datePickerOptions?: DatePickerOptions;\r\n    textBoxOptions?: TextBoxOptions;\r\n\r\n    onClick?(e: WindowFooterItemClickEvent): void;\r\n}\r\n\r\nclass CallBackFooterItem\r\n{\r\n    value: string;\r\n    callback: Function;\r\n}\r\n\r\nexport class SplitButtonSwitchSettings\r\n{\r\n    labelOff?: string;\r\n    labelOn?: string;\r\n    checked?: boolean;\r\n    onCheck?: (e: SplitButtonSwitchEvent) => void;\r\n}\r\n\r\nclass SplitButtonSwitchEvent\r\n{\r\n    checked: boolean;\r\n}\r\n\r\nclass WindowPosition\r\n{\r\n    left?: number | string;\r\n    top?: number | string;\r\n    right?: number | string;\r\n    bottom?: number | string;\r\n}\r\n\r\nclass WindowMaximizeSettings\r\n{\r\n    padding: boolean;\r\n}\r\n\r\nclass WindowTitleSettings\r\n{\r\n    text?: string;\r\n    colorSettings?: ColorSettings;\r\n    fontSize?: number;\r\n    cssContainer?: string;\r\n    css?: string;\r\n    align?: TextAlignEnum;\r\n}\r\n//#endregion\r\n\r\n//#region Events\r\nexport class WindowEvent extends VrControlsEvent\r\n{\r\n    sender: Window;\r\n}\r\n\r\nclass WindowFooterItemClickEvent extends WindowEvent\r\n{\r\n}\r\n\r\nexport class WindowOpenEvent extends WindowEvent\r\n{\r\n}\r\n\r\nclass WindowBeforeCloseEvent extends WindowEvent\r\n{\r\n\r\n}\r\n\r\nclass WindowCloseEvent extends WindowEvent\r\n{\r\n}\r\n\r\nclass WindowDragStartEvent extends WindowEvent\r\n{\r\n    left: number;\r\n    top: number;\r\n}\r\n\r\nclass WindowDragEndEvent extends WindowEvent\r\n{\r\n    left: number;\r\n    top: number;\r\n}\r\n\r\nclass WindowContentLoadEvent extends WindowEvent\r\n{\r\n}\r\n//#endregion","import { createWindow, ButtonModeEnum, WindowFooterItemTypeEnum, TextAlignEnum, puma } from \"../vr\";\r\nimport { Window } from \"./window\";\r\nimport { VrControlsEvent } from \"../common\";\r\nimport { Button } from \"./button\";\r\n\r\n//#region Options\r\nexport class ConfirmOptions\r\n{\r\n    textOkButton?: string;\r\n    textCancelButton?: string;\r\n    content?: string;\r\n    title?: string;\r\n    width?: number | string;\r\n    height?: number | string;\r\n    textAlign?: TextAlignEnum;\r\n    css?: string;\r\n    cssContainer?: string;\r\n\r\n    onContentLoaded?(e: ContentConfirmLoadedEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Confirm\r\n{\r\n    private _window: Window;\r\n    private _options: ConfirmOptions;\r\n\r\n    constructor(text?: string | null, options?: ConfirmOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new ConfirmOptions();\r\n\r\n        if (options.textOkButton == null) options.textOkButton = \"Conferma\";\r\n        if (options.textCancelButton == null) options.textCancelButton = \"Annulla\";\r\n        if (options.width == null) options.width = 300;\r\n        if (options.height == null) options.height = 120;\r\n        if (options.textAlign == null) options.textAlign = TextAlignEnum.Center;\r\n        //#endregion\r\n\r\n        this._options = options;\r\n\r\n        //#region Content\r\n        let content = \"\";\r\n        if (options.content == null && text == null) options.content = \"<div></div>\";\r\n        if (options.content != null)\r\n            content = options.content;\r\n        else if (text != null)\r\n            content = text;\r\n        //#endregion\r\n\r\n        //#region Text align\r\n        let textAlign = \"\";\r\n        switch (options.textAlign)\r\n        {\r\n            case TextAlignEnum.Left: textAlign = \"text-align: left;\"; break;\r\n            case TextAlignEnum.Center: textAlign = \"text-align: center;\"; break;\r\n            case TextAlignEnum.Right: textAlign = \"text-align: right;\"; break;\r\n        }\r\n        //#endregion\r\n\r\n        this._window = createWindow(\r\n            {\r\n                addToControlList: false,\r\n                closeable: false,\r\n                title: options.title,\r\n                width: options.width,\r\n                height: options.height,\r\n                content: \"<div class='contentContainer'>\" + content + \"</div>\",\r\n                cssContainer: \"height: auto !important;\",\r\n                css: \"height: auto !important;\" + textAlign,\r\n                footer:\r\n                    [\r\n                        { type: WindowFooterItemTypeEnum.Custom, text: options.textCancelButton, value: \"close\", cssContainer: \"width: Calc(50% - 5px);\", css: \"width: 100%;\", onClick: () => this.close() },\r\n                        { type: WindowFooterItemTypeEnum.Custom, text: options.textOkButton, value: \"ok\", cssContainer: \"width: Calc(50% - 5px);\", css: \"width: 100%;\", mode: ButtonModeEnum.Primary }\r\n                    ],\r\n                onContentLoaded: (e) => this.onContentLoaded(puma(e.sender.element()).find(\".contentContainer\")[0])\r\n            });\r\n\r\n        if (options.cssContainer != null)\r\n            this._window.container().style.cssText += options.cssContainer + \";\";\r\n\r\n        if (options.css != null)\r\n            this._window.element().style.cssText += options.css + \";\";\r\n\r\n        puma(this._window.element()).addClass(\"vrConfirm\");\r\n        puma(this._window.container()).addClass(\"vrConfirmContainer\");\r\n        window.setTimeout(() => puma(this._window.footerItem<Button>(\"ok\")!.element()).focus());\r\n    }\r\n\r\n    open(): Promise<any>\r\n    {\r\n        let promise = new Promise((okCallback?: Function, cancelCallback?: Function) =>\r\n        {\r\n            this._window.open(\r\n                [\r\n                    {\r\n                        value: \"ok\", callback: () => \r\n                        {\r\n                            if (okCallback != null)\r\n                                okCallback();\r\n\r\n                            this.close();\r\n                        }\r\n                    },\r\n                    {\r\n                        value: \"close\", callback: () => \r\n                        {\r\n                            if (cancelCallback != null)\r\n                                cancelCallback();\r\n\r\n                            console.log();\r\n                        }\r\n                    }\r\n                ]\r\n            )\r\n        });\r\n        return promise;\r\n    }\r\n\r\n    close(): void\r\n    {\r\n        this._window.close();\r\n        puma(this._window.container()).remove();\r\n        puma(this._window.background()).remove();\r\n    }\r\n\r\n    private getOptions(): ConfirmOptions\r\n    {\r\n        return this._options;\r\n    }\r\n\r\n    private onContentLoaded(contentElement: HTMLElement): void\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.onContentLoaded != null)\r\n        {\r\n            let contentLoadedEvent = new ContentConfirmLoadedEvent();\r\n            contentLoadedEvent.sender = this;\r\n            contentLoadedEvent.contentElement = contentElement;\r\n            options.onContentLoaded(contentLoadedEvent);\r\n        }\r\n    }\r\n}\r\n//#endregion\r\n\r\n//#region Events\r\nclass ContentConfirmLoadedEvent extends VrControlsEvent\r\n{\r\n    sender: Confirm;\r\n    contentElement: HTMLElement;\r\n}\r\n//#endregion","import { createWindow, ButtonModeEnum, WindowFooterItemTypeEnum, TextAlignEnum, puma } from \"../vr\";\r\nimport { Window } from \"./window\";\r\nimport { VrControlsEvent } from \"../common\";\r\nimport { Button } from \"./button\";\r\n\r\n//#region Options\r\nexport class AlertOptions\r\n{\r\n    textOkButton?: string;\r\n    content?: string;\r\n    title?: string;\r\n    width?: number | string;\r\n    height?: number | string;\r\n    textAlign?: TextAlignEnum;\r\n    css?: string;\r\n    cssContainer?: string;\r\n\r\n    onContentLoaded?(e: ContentAlertLoadedEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Alert\r\n{\r\n    private _window: Window;\r\n    private _options: AlertOptions;\r\n\r\n    constructor(text?: string | null, options?: AlertOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new AlertOptions();\r\n\r\n        if (options.textOkButton == null) options.textOkButton = \"Ok\";\r\n        if (options.width == null) options.width = 300;\r\n        if (options.height == null) options.height = 120;\r\n        if (options.textAlign == null) options.textAlign = TextAlignEnum.Center;\r\n        //#endregion\r\n\r\n        this._options = options;\r\n\r\n        //#region Content\r\n        let content = \"\";\r\n        if (options.content == null && text == null) options.content = \"<div></div>\";\r\n        if (options.content != null)\r\n            content = options.content;\r\n        else if (text != null)\r\n            content = text;\r\n        //#endregion\r\n\r\n        //#region Text align\r\n        let textAlign = \"\";\r\n        switch (options.textAlign)\r\n        {\r\n            case TextAlignEnum.Left: textAlign = \"text-align: left;\"; break;\r\n            case TextAlignEnum.Center: textAlign = \"text-align: center;\"; break;\r\n            case TextAlignEnum.Right: textAlign = \"text-align: right;\"; break;\r\n        }\r\n        //#endregion\r\n\r\n        this._window = createWindow(\r\n            {\r\n                addToControlList: false,\r\n                closeable: false,\r\n                title: options.title,\r\n                width: options.width,\r\n                height: options.height,\r\n                content: \"<div class='contentContainer'>\" + content + \"</div>\",\r\n                cssContainer: \"height: auto !important;\",\r\n                css: \"height: auto !important;\" + textAlign,\r\n                footer:\r\n                    [\r\n                        { type: WindowFooterItemTypeEnum.Ok, text: options.textOkButton, value: \"ok\", cssContainer: \"width: 100%;\", css: \"width: 100%;\", mode: ButtonModeEnum.Primary, onClick: () => this.close() }\r\n                    ],\r\n                onContentLoaded: (e) => this.onContentLoaded(puma(e.sender.element()).find(\".contentContainer\")[0])\r\n            });\r\n\r\n        if (options.cssContainer != null)\r\n            this._window.container().style.cssText += options.cssContainer + \";\";\r\n\r\n        if (options.css != null)\r\n            this._window.element().style.cssText += options.css + \";\";\r\n\r\n        puma(this._window.element()).addClass(\"vrAlert\");\r\n        puma(this._window.container()).addClass(\"vrAlertContainer\");\r\n        window.setTimeout(() => puma(this._window.footerItem<Button>(\"ok\")!.element()).focus());\r\n    }\r\n\r\n    open(): Promise<any>\r\n    {\r\n        let promise = new Promise((okCallback?: Function) =>\r\n        {\r\n            this._window.open(\r\n                [\r\n                    {\r\n                        value: \"ok\", callback: () => \r\n                        {\r\n                            if (okCallback != null)\r\n                                okCallback();\r\n                        }\r\n                    }\r\n                ]\r\n            )\r\n        });\r\n        return promise;\r\n    }\r\n\r\n    close(): void\r\n    {\r\n        this._window.close();\r\n        puma(this._window.container()).remove();\r\n        puma(this._window.background()).remove();\r\n    }\r\n\r\n    private getOptions(): AlertOptions\r\n    {\r\n        return this._options;\r\n    }\r\n\r\n    private onContentLoaded(contentElement: HTMLElement): void\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.onContentLoaded != null)\r\n        {\r\n            let contentLoadedEvent = new ContentAlertLoadedEvent();\r\n            contentLoadedEvent.sender = this;\r\n            contentLoadedEvent.contentElement = contentElement;\r\n            options.onContentLoaded(contentLoadedEvent);\r\n        }\r\n    }\r\n}\r\n//#endregion\r\n\r\n//#region Events\r\nclass ContentAlertLoadedEvent extends VrControlsEvent\r\n{\r\n    sender: Alert;\r\n    contentElement: HTMLElement;\r\n}\r\n//#endregion","import { createWindow, TextAlignEnum, puma } from \"../vr\";\r\nimport { Window, WindowFooterItem } from \"./window\";\r\nimport { VrControlsEvent } from \"../common\";\r\n\r\n//#region Options\r\nexport class DialogOptions\r\n{\r\n    content?: string;\r\n    title?: string;\r\n    width?: number;\r\n    height?: number;\r\n    textAlign?: TextAlignEnum;\r\n    footerItems?: WindowFooterItem[];\r\n    css?: string;\r\n    cssContainer?: string;\r\n\r\n    onContentLoaded?(e: ContentDialogLoadedEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Dialog\r\n{\r\n    private _window: Window;\r\n    private _options: DialogOptions;\r\n\r\n    constructor(text?: string | null, options?: DialogOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new DialogOptions();\r\n\r\n        if (options.width == null) options.width = 300;\r\n        if (options.height == null) options.height = 120;\r\n        if (options.textAlign == null) options.textAlign = TextAlignEnum.Center;\r\n        //#endregion\r\n\r\n        this._options = options;\r\n\r\n        //#region Content\r\n        let content = \"\";\r\n        if (options.content == null && text == null) options.content = \"<div></div>\";\r\n        if (options.content != null)\r\n            content = options.content;\r\n        else if (text != null)\r\n            content = text;\r\n        //#endregion\r\n\r\n        //#region Text align\r\n        let textAlign = \"\";\r\n        switch (options.textAlign)\r\n        {\r\n            case TextAlignEnum.Left: textAlign = \"text-align: left;\"; break;\r\n            case TextAlignEnum.Center: textAlign = \"text-align: center;\"; break;\r\n            case TextAlignEnum.Right: textAlign = \"text-align: right;\"; break;\r\n        }\r\n        //#endregion\r\n\r\n        //#region Footer items\r\n        if (options.footerItems != null)\r\n        {\r\n            let totalWidth = options.footerItems.filter(k => k.width != null).map(k => k.width).vrSum();\r\n            let noWidthItems = options.footerItems.filter(k => k.width == null);\r\n            let widthItems = options.footerItems.filter(k => k.width != null);\r\n\r\n            let footerAvailableWidth = (options.width - 10 - (widthItems.length * 5)) - totalWidth;\r\n            let singleItemWidth = footerAvailableWidth / options.footerItems.length - 5;\r\n            if (noWidthItems.length > 0)\r\n                singleItemWidth = footerAvailableWidth / noWidthItems.length - 5;\r\n\r\n            for (let footerItem of options.footerItems)\r\n            {\r\n                if (footerItem.width == null)\r\n                    footerItem.width = singleItemWidth;\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        this._window = createWindow(\r\n            {\r\n                addToControlList: false,\r\n                closeable: false,\r\n                title: options.title,\r\n                width: options.width,\r\n                height: options.height,\r\n                content: \"<div class='contentContainer'>\" + content + \"</div>\",\r\n                cssContainer: \"height: auto !important;\",\r\n                css: \"height: auto !important;\" + textAlign,\r\n                footer: options.footerItems,\r\n                onContentLoaded: (e) => this.onContentLoaded(puma(e.sender.element()).find(\".contentContainer\")[0])\r\n            });\r\n\r\n        if (options.cssContainer != null)\r\n            this._window.container().style.cssText += options.cssContainer + \";\";\r\n\r\n        if (options.css != null)\r\n            this._window.element().style.cssText += options.css + \";\";\r\n\r\n        puma(this._window.element()).addClass(\"vrDialog\");\r\n        puma(this._window.container()).addClass(\"vrDialogContainer\");\r\n    }\r\n\r\n    open(): void\r\n    {\r\n        this._window.open();\r\n    }\r\n\r\n    close(): void\r\n    {\r\n        this._window.close();\r\n        puma(this._window.container()).remove();\r\n        puma(this._window.background()).remove();\r\n    }\r\n\r\n    private getOptions(): DialogOptions\r\n    {\r\n        return this._options;\r\n    }\r\n\r\n    private onContentLoaded(contentElement: HTMLElement): void\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.onContentLoaded != null)\r\n        {\r\n            let contentLoadedEvent = new ContentDialogLoadedEvent();\r\n            contentLoadedEvent.sender = this;\r\n            contentLoadedEvent.contentElement = contentElement;\r\n            options.onContentLoaded(contentLoadedEvent);\r\n        }\r\n    }\r\n}\r\n//#endregion\r\n\r\n//#region Events\r\nclass ContentDialogLoadedEvent extends VrControlsEvent\r\n{\r\n    sender: Dialog;\r\n    contentElement: HTMLElement;\r\n}\r\n//#endregion","import { createWindow, ButtonModeEnum, WindowFooterItemTypeEnum, createTextBox, puma } from \"../vr\";\r\nimport { Window } from \"./window\";\r\nimport { VrControlsEvent } from \"../common\";\r\nimport { TextBox } from \"./textbox\";\r\nimport { Button } from \"./button\";\r\n\r\n//#region Options\r\nexport class PromptOptions\r\n{\r\n    textOkButton?: string;\r\n    textCancelButton?: string;\r\n    content?: string;\r\n    title?: string;\r\n    defaultValue?: string;\r\n    placeHolder?: string;\r\n    width?: number | string;\r\n    height?: number | string;\r\n    css?: string;\r\n    cssContainer?: string;\r\n\r\n    onContentLoaded?(e: ContentPromptLoadedEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Prompt\r\n{\r\n    private _window: Window;\r\n    private _options: PromptOptions;\r\n    private _textBox: TextBox;\r\n\r\n    constructor(text?: string | null, options?: PromptOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new PromptOptions();\r\n\r\n        if (options.textOkButton == null) options.textOkButton = \"Conferma\";\r\n        if (options.textCancelButton == null) options.textCancelButton = \"Annulla\";\r\n        if (options.width == null) options.width = 300;\r\n        if (options.height == null) options.height = 120;\r\n        //#endregion\r\n\r\n        this._options = options;\r\n\r\n        //#region Content\r\n        let content = \"\";\r\n        if (options.content == null && text == null) options.content = \"<div></div>\";\r\n        if (options.content != null)\r\n            content = options.content;\r\n        else if (text != null)\r\n            content = text;\r\n        //#endregion\r\n\r\n        this._window = createWindow(\r\n            {\r\n                addToControlList: false,\r\n                closeable: false,\r\n                title: options.title,\r\n                width: options.width,\r\n                height: options.height,\r\n                content: \"<div class='contentContainer'>\" + content + \"</div>\",\r\n                cssContainer: \"height: auto !important;\",\r\n                css: \"height: auto !important;\",\r\n                footer:\r\n                    [\r\n                        { type: WindowFooterItemTypeEnum.Custom, text: options.textCancelButton, value: \"close\", cssContainer: \"width: Calc(50% - 5px);\", css: \"width: 100%;\", onClick: () => this.close() },\r\n                        { type: WindowFooterItemTypeEnum.Custom, text: options.textOkButton, value: \"ok\", cssContainer: \"width: Calc(50% - 5px);\", css: \"width: 100%;\", mode: ButtonModeEnum.Primary }\r\n                    ],\r\n                onContentLoaded: (e) => \r\n                {\r\n                    let contentContainer = puma(e.sender.element()).find(\".contentContainer\")[0];\r\n                    this._textBox = createTextBox(\r\n                        {\r\n                            width: \"100%\",\r\n                            cssContainer: \"margin-top: 5px;\",\r\n                            value: options!.defaultValue,\r\n                            placeholder: options!.placeHolder\r\n                        }, contentContainer);\r\n                    this._textBox.focus();\r\n                    this.onContentLoaded(contentContainer);\r\n                }\r\n            });\r\n\r\n        if (options.cssContainer != null)\r\n            this._window.container().style.cssText += options.cssContainer + \";\";\r\n\r\n        if (options.css != null)\r\n            this._window.element().style.cssText += options.css + \";\";\r\n\r\n        puma(this._window.element()).addClass(\"vrPrompt\");\r\n        puma(this._window.container()).addClass(\"vrPromptContainer\");\r\n        window.setTimeout(() => puma(this._window.footerItem<Button>(\"ok\")!.element()).focus());\r\n    }\r\n\r\n    open(): Promise<any>\r\n    {\r\n        let promise = new Promise((okCallback?: (value: string) => void, cancelCallback?: Function) =>\r\n        {\r\n            this._window.open(\r\n                [\r\n                    {\r\n                        value: \"ok\", callback: () => \r\n                        {\r\n                            if (okCallback != null)\r\n                                okCallback(this._textBox.value());\r\n\r\n                            this.close();\r\n                        }\r\n                    },\r\n                    {\r\n                        value: \"close\", callback: () => \r\n                        {\r\n                            if (cancelCallback != null)\r\n                                cancelCallback();\r\n\r\n                            console.log();\r\n                        }\r\n                    }\r\n                ]\r\n            );\r\n            this._textBox.focus();\r\n        });\r\n        return promise;\r\n    }\r\n\r\n    close(): void\r\n    {\r\n        this._window.close();\r\n        puma(this._window.container()).remove();\r\n        puma(this._window.background()).remove();\r\n    }\r\n\r\n    private getOptions(): PromptOptions\r\n    {\r\n        return this._options;\r\n    }\r\n\r\n    private onContentLoaded(contentElement: HTMLElement): void\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.onContentLoaded != null)\r\n        {\r\n            let contentLoadedEvent = new ContentPromptLoadedEvent();\r\n            contentLoadedEvent.sender = this;\r\n            contentLoadedEvent.contentElement = contentElement;\r\n            options.onContentLoaded(contentLoadedEvent);\r\n        }\r\n    }\r\n}\r\n//#endregion\r\n\r\n//#region Events\r\nclass ContentPromptLoadedEvent extends VrControlsEvent\r\n{\r\n    sender: Prompt;\r\n    contentElement: HTMLElement;\r\n}\r\n//#endregion","import { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { ControlTypeEnum, puma, SwitchLabelSettings, SwitchLabelSettingsOnClickEvent } from \"../vr\";\r\n\r\n//#region Options\r\nexport class SwitchOptions extends VrControlOptions\r\n{\r\n    labelOff?: string | SwitchLabelSettings;\r\n    labelOn?: string | SwitchLabelSettings;\r\n    checked?: boolean;\r\n\r\n    onChange?(e: SwitchChangeEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Switch extends VrControl\r\n{\r\n    constructor(element: HTMLElement, options?: SwitchOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new SwitchOptions();\r\n\r\n        if (options.labelOff == null) options.labelOff = \"\";\r\n        if (typeof (options.labelOff) == \"string\")\r\n        {\r\n            let labelOffText = options.labelOff;\r\n            options.labelOff = new SwitchLabelSettings();\r\n            options.labelOff.text = labelOffText;\r\n        }\r\n\r\n        if (options.labelOn == null) options.labelOn = \"\";\r\n        if (typeof (options.labelOn) == \"string\")\r\n        {\r\n            let labelOnText = options.labelOn;\r\n            options.labelOn = new SwitchLabelSettings();\r\n            options.labelOn.text = labelOnText;\r\n        }\r\n\r\n        if (options.checked == null) options.checked = false;\r\n        //#endregion\r\n\r\n        super(element, options, ControlTypeEnum.Switch);\r\n\r\n        //#region Label off\r\n        let colorOff = (options.labelOff.color != null) ? \"color: \" + options.labelOff.color + \";\" : \"\";\r\n        let boldOff = (options.labelOff.bold) ? \"font-weight: 600;\" : \"\";\r\n\r\n        let labelOff = puma(\"<label title='\" + options.labelOff.tooltip + \"'\"\r\n            + \" style='\" + colorOff + boldOff + options.labelOff.css + \";'\"\r\n            + \" class='vrSwitchLabelOff'>\"\r\n            + options.labelOff.text\r\n            + \"</label>\").vrAppendToPuma(this.element());\r\n\r\n        labelOff.click((e: any) => \r\n        {\r\n            if ((options!.labelOff as SwitchLabelSettings).onClick != null)\r\n            {\r\n                let event = new SwitchLabelSettingsOnClickEvent();\r\n                event.sender = this;\r\n                event.checked = this.checked();\r\n                (options!.labelOff as SwitchLabelSettings)!.onClick!(event);\r\n\r\n                if (event.isDefaultPrevented())\r\n                {\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (this.enabled())\r\n                this.checked(false);\r\n        });\r\n        //#endregion\r\n\r\n        //#region Switch slider\r\n        let checkedProperty = (options.checked) ? \"checked='checked'\" : \"\";\r\n        puma(\"<label class='vrSwitchLabel'><input type='checkbox' \" + checkedProperty + \" class='vrSwitchInput'><span class='vrSwitchSlider'></span></label>\").vrAppendToPuma(this.element());\r\n        puma(this.element()).find(\".vrSwitchInput\").change((e: any) => this.checked(e.target.checked));\r\n        //#endregion\r\n\r\n        //#region Label on\r\n        let colorOn = (options.labelOn.color != null) ? \"color: \" + options.labelOn.color + \";\" : \"\";\r\n        let boldOn = (options.labelOn.bold) ? \"font-weight: 600;\" : \"\";\r\n\r\n        let labelOn = puma(\"<label title='\" + options.labelOn.tooltip + \"'\"\r\n            + \" style='\" + colorOn + boldOn + options.labelOn.css + \";'\"\r\n            + \" class='vrSwitchLabelOn'>\"\r\n            + options.labelOn.text\r\n            + \"</label>\").vrAppendToPuma(this.element());\r\n\r\n        labelOn.click((e: any) => \r\n        {\r\n            if ((options!.labelOn as SwitchLabelSettings).onClick != null)\r\n            {\r\n                let event = new SwitchLabelSettingsOnClickEvent();\r\n                event.sender = this;\r\n                event.checked = this.checked();\r\n                (options!.labelOn as SwitchLabelSettings)!.onClick!(event);\r\n\r\n                if (event.isDefaultPrevented())\r\n                {\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (this.enabled())\r\n                this.checked(true);\r\n        });\r\n        //#endregion\r\n\r\n        //#region Checked\r\n        this.checked(options.checked, false);\r\n        //#endregion\r\n    }\r\n\r\n    //#region Methods\r\n    checked(state?: boolean, triggerChange = true): boolean\r\n    {\r\n        let options = this.getOptions();\r\n        if (state != null)\r\n        {\r\n            //#region Label off/on\r\n            let labelOff = puma(this.element()).find(\".vrSwitchLabelOff\")[0];\r\n            let labelOn = puma(this.element()).find(\".vrSwitchLabelOn\")[0];\r\n            let input = puma(this.element()).find(\".vrSwitchInput\");\r\n            input[0].checked = state;\r\n\r\n            if (state)\r\n            {\r\n                labelOff.style.cssText += \"border-bottom: solid 2px transparent;\";\r\n                labelOn.style.cssText += \"border-bottom: solid 2px #51B3E1;\";\r\n                input.prop(\"checked\", \"checked\");\r\n            }\r\n            else\r\n            {\r\n                labelOff.style.cssText += \"border-bottom: solid 2px #51B3E1;\";\r\n                labelOn.style.cssText += \"border-bottom: solid 2px transparent;\";\r\n                input.removeProp(\"checked\");\r\n            }\r\n            //#endregion\r\n\r\n            //#region Change event\r\n            if (triggerChange)\r\n            {\r\n                if (options.onChange != null)\r\n                {\r\n                    let changeEvent = new SwitchChangeEvent();\r\n                    changeEvent.sender = this;\r\n                    changeEvent.checked = state;\r\n                    window.setTimeout(() => options!.onChange!(changeEvent));\r\n                }\r\n            }\r\n            //#endregion\r\n        }\r\n        return puma(this.element()).find(\".vrSwitchInput\")[0].checked;\r\n    }\r\n\r\n    clear(triggerChange = false): void\r\n    {\r\n        this.checked(false, triggerChange);\r\n    }\r\n\r\n    labelOff(text?: string): string\r\n    {\r\n        if (text != null)\r\n            puma(this.element()).find(\".vrSwitchLabelOff\").html(text);\r\n\r\n        return puma(this.element()).find(\".vrSwitchLabelOff\").html();\r\n    }\r\n\r\n    labelOn(text?: string): string\r\n    {\r\n        if (text != null)\r\n            puma(this.element()).find(\".vrSwitchLabelOn\").html(text);\r\n\r\n        return puma(this.element()).find(\".vrSwitchLabelOn\").html();\r\n    }\r\n\r\n    getOptions(): SwitchOptions\r\n    {\r\n        return this.options<SwitchOptions>();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Overrides\r\n    enable(): void\r\n    {\r\n        super.enable();\r\n        puma(this.element()).find(\".vrSwitchInput\").prop(\"disabled\", false);\r\n        puma(this.element()).find(\".vrSwitchLabelOn\").removeClass(\"vrSwitchLabelDisabled\");\r\n        puma(this.element()).find(\".vrSwitchLabelOff\").removeClass(\"vrSwitchLabelDisabled\");\r\n    }\r\n\r\n    disable(): void\r\n    {\r\n        super.disable();\r\n        puma(this.element()).find(\".vrSwitchInput\").prop(\"disabled\", true);\r\n        puma(this.element()).find(\".vrSwitchLabelOn\").addClass(\"vrSwitchLabelDisabled\");\r\n        puma(this.element()).find(\".vrSwitchLabelOff\").addClass(\"vrSwitchLabelDisabled\");\r\n    }\r\n    //#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass SwitchEvent extends VrControlsEvent\r\n{\r\n    sender: Switch;\r\n}\r\n\r\nclass SwitchChangeEvent extends SwitchEvent\r\n{\r\n    checked: boolean;\r\n}\r\n//#endregion","import { UtilityManager } from \"../../../src/managers/utilityManager\";\r\nimport { VrControlOptions, VrControl, VrControlsEvent } from \"../common\";\r\nimport { ControlTypeEnum, OrientationEnum, createCheckBox, puma } from \"../vr\";\r\nimport { CheckBoxCheckEvent, CheckBox } from \"./checkbox\";\r\n\r\n//#region Options\r\nexport class CheckBoxListOptions extends VrControlOptions\r\n{\r\n    items?: CheckBoxItem[];\r\n    orientation?: OrientationEnum;\r\n    allChecked?: boolean;\r\n    listName?: string;\r\n    marginBetween?: number;\r\n    // Gestione required e validation\r\n    // Single check or multi\r\n\r\n    onBeforeSelect?(e: CheckBoxListSelectEvent): void;\r\n    onSelect?(e: CheckBoxListSelectEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class CheckBoxList extends VrControl\r\n{\r\n    private _checkboxControls: CheckBox[];\r\n    private _items: CheckBoxItem[];\r\n\r\n    constructor(element: HTMLElement, options?: CheckBoxListOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new CheckBoxListOptions();\r\n\r\n        if (options.orientation == null) options.orientation = OrientationEnum.Horizontal;\r\n        if (options.items == null) options.items = [];\r\n        if (options.listName == null) options.listName = element.id + \"_CheckboxListName\";\r\n        if (options.marginBetween == null) options.marginBetween = 10;\r\n        //#endregion\r\n\r\n        super(element, options, ControlTypeEnum.CheckBoxList);\r\n        this._checkboxControls = [];\r\n\r\n        this.items(options.items);\r\n    }\r\n\r\n    //#region Methos\r\n    items(items?: CheckBoxItem[]): CheckBoxItem[]\r\n    {\r\n        let options = this.getOptions();\r\n        if (items != null)\r\n        {\r\n            this._items = items;\r\n            let i = 0;\r\n            for (let item of items)\r\n            {\r\n                let checkBox = createCheckBox(\r\n                    {\r\n                        text: item.text,\r\n                        value: (item.value == null) ? item.text : String(item.value),\r\n                        name: options.listName,\r\n                        checked: (options.allChecked) ? true : item.checked,\r\n                        tag: item.tag,\r\n                        cssContainer: (options.orientation == OrientationEnum.Horizontal && i > 0) ? \"margin-left: \" + options.marginBetween + \"px;\" : ((options.orientation == OrientationEnum.Vertical) ? \"width: 100%\" : \"\"),\r\n                        onCheck: (e) => \r\n                        {\r\n                            if (options!.onBeforeSelect != null)\r\n                            {\r\n                                let selectEvent = new CheckBoxListSelectEvent();\r\n                                selectEvent.sender = this;\r\n                                selectEvent.value = String(item.value);\r\n                                selectEvent.checked = e.checked;\r\n                                selectEvent.checkedValues = this.value();\r\n                                options!.onBeforeSelect(selectEvent);\r\n\r\n                                if (selectEvent.isDefaultPrevented())\r\n                                    return;\r\n                            }\r\n\r\n                            if (item.onCheck != null)\r\n                                item.onCheck(e);\r\n\r\n                            if (options!.onSelect != null)\r\n                            {\r\n                                let selectEvent = new CheckBoxListSelectEvent();\r\n                                selectEvent.sender = this;\r\n                                selectEvent.value = String(item.value);\r\n                                selectEvent.checked = e.checked;\r\n                                selectEvent.checkedValues = this.value();\r\n                                options!.onSelect(selectEvent);\r\n                            }\r\n                        }\r\n                    }, this.element());\r\n\r\n                this._checkboxControls.push(checkBox);\r\n                i++;\r\n            }\r\n        }\r\n        return this._items;\r\n    }\r\n\r\n    checkAll(triggerChange = false): void\r\n    {\r\n        for (let checkbox of this._checkboxControls)\r\n            checkbox.checked(true, triggerChange);\r\n    }\r\n\r\n    unCheckAll(triggerChange = false): void\r\n    {\r\n        for (let checkbox of this._checkboxControls)\r\n            checkbox.checked(false, triggerChange);\r\n    }\r\n\r\n    value(values?: string[], state = true, triggerChange = true): string[]\r\n    {\r\n        if (values != null)\r\n        {\r\n            for (let value of values)\r\n            {\r\n                let checkbox = this._checkboxControls.filter(k => puma(k.element()).attr(\"value\") == value)[0];\r\n                if (checkbox != null)\r\n                    checkbox.checked(state, triggerChange);\r\n            }\r\n        }\r\n        return this._checkboxControls.filter(k => k.checked()).map(k => puma(k.element()).attr(\"value\"));\r\n    }\r\n\r\n    valueTag(tagList?: any[], state = true, triggerChange = true)\r\n    {\r\n        if (tagList != null)\r\n        {\r\n            for (let tag of tagList)\r\n            {\r\n                let checkbox = this._checkboxControls.filter(k => UtilityManager.equals(k.tag(), tag))[0];\r\n                if (checkbox != null)\r\n                    checkbox.checked(state, triggerChange);\r\n            }\r\n        }\r\n        return this._checkboxControls.filter(k => k.checked()).map(k => k.tag());\r\n    }\r\n\r\n    isChecked(value: string): boolean\r\n    {\r\n        let checkBox = this._checkboxControls.filter(k => puma(k.element()).attr(\"value\") == value)[0];\r\n        if (checkBox != null)\r\n            return checkBox.checked();\r\n\r\n        return false;\r\n    }\r\n\r\n    text(value: string, text?: string): string\r\n    {\r\n        let checkBox = this._checkboxControls.filter(k => puma(k.element()).attr(\"value\") == value)[0];\r\n        if (checkBox != null)\r\n            return checkBox.text(text);\r\n\r\n        return \"\";\r\n    }\r\n\r\n    clear(checkAll = false, triggerChange = false): void\r\n    {\r\n        if (checkAll)\r\n            this.checkAll(triggerChange);\r\n        else\r\n            this.unCheckAll(triggerChange);\r\n    }\r\n\r\n    clearItems()\r\n    {\r\n        this._checkboxControls = [];\r\n        puma(this.element()).empty();\r\n    }\r\n\r\n    getOptions(): CheckBoxListOptions\r\n    {\r\n        return this.options<CheckBoxListOptions>();\r\n    }\r\n\r\n    enable(): void\r\n    {\r\n        super.enable();\r\n        for (let checkbox of this._checkboxControls)\r\n            checkbox.enable();\r\n    }\r\n\r\n    disable(): void\r\n    {\r\n        super.disable();\r\n        for (let checkbox of this._checkboxControls)\r\n            checkbox.disable();\r\n    }\r\n    //#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass CheckBoxItem\r\n{\r\n    text?: string;\r\n    value?: string | number;\r\n    checked?: boolean;\r\n    threeState?: boolean;\r\n    tag?: any;\r\n\r\n    onCheck?: (e: CheckBoxCheckEvent) => void;\r\n}\r\n\r\nclass CheckBoxListSelectEvent extends VrControlsEvent\r\n{\r\n    sender: CheckBoxList;\r\n    checkedValues?: string[];\r\n    value?: string;\r\n    checked?: boolean;\r\n}\r\n//#endregion","import { VrControlOptions, VrControl } from \"../common\";\r\nimport { ControlTypeEnum, puma } from \"../vr\";\r\n\r\n//#region Options\r\nexport class RadioButtonOptions extends VrControlOptions\r\n{\r\n    text?: string;\r\n    value?: string;\r\n    checked?: boolean;\r\n    name?: string;\r\n\r\n    onCheck?(e: RadioButtonCheckEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class RadioButton extends VrControl\r\n{\r\n    constructor(element: HTMLElement, options?: RadioButtonOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new RadioButtonOptions();\r\n\r\n        if (options.text == null) options.text = \"\";\r\n        if (options.checked == null) options.checked = false;\r\n        //#endregion\r\n\r\n        puma(element).attr(\"type\", \"radio\");\r\n        super(element, options, ControlTypeEnum.RadioButton);\r\n\r\n        //#region Value & Name\r\n        if (options.value == null) options.value = options.text;\r\n        if (options.value != null)\r\n            puma(this.element()).attr(\"value\", options.value);\r\n\r\n        if (options.name != null)\r\n            puma(this.element()).attr(\"name\", options.name);\r\n        //#endregion\r\n\r\n        //#region Structure\r\n        let labelContainer = puma(\"<label class='vrRadioButtonLabelContainer'></label>\").vrAppendToPuma(this.container());\r\n        puma(this.element()).vrAppendToPuma(labelContainer);\r\n        puma(\"<span class='vrRadioButtonCheckMark'></span>\").vrAppendToPuma(labelContainer);\r\n        let lblRadioButton = puma(\"<label class='vrRadioButtonLabel'>\" + options.text + \"</label>\").vrAppendToPuma(this.container());\r\n        //#endregion\r\n\r\n        //#region Checked\r\n        if (options.checked === true)\r\n            this.checked(true, false);\r\n        //#endregion\r\n\r\n        //#region Events\r\n        puma(this.element()).on(\"click\", (e: JQuery.ClickEvent) =>\r\n        {\r\n            let radioButton = e.currentTarget as HTMLInputElement;\r\n            let checked = radioButton.checked;\r\n            this.checked(checked);\r\n        });\r\n\r\n        puma(lblRadioButton).on(\"click\", (e: JQuery.ClickEvent) =>\r\n        {\r\n            let lblRadioButtonContainer = puma(lblRadioButton).prev();\r\n            let input = lblRadioButtonContainer.find(\"input\")[0];\r\n            if (!input.checked)\r\n                input.checked = true;\r\n\r\n            let checked = input.checked;\r\n            this.checked(checked);\r\n        });\r\n        //#endregion\r\n    }\r\n\r\n    //#region Methods\r\n    checked(state?: boolean, triggerChange = true): boolean\r\n    {\r\n        if (state != null)\r\n        {\r\n            (this.element() as HTMLInputElement).checked = state;\r\n\r\n            if (triggerChange)\r\n            {\r\n                let options = this.getOptions();\r\n                if (options!.onCheck != null)\r\n                {\r\n                    let event = new RadioButtonCheckEvent();\r\n                    event.sender = this;\r\n                    event.checked = state;\r\n                    options!.onCheck(event);\r\n                }\r\n            }\r\n        }\r\n        return (this.element() as HTMLInputElement).checked;\r\n    }\r\n\r\n    text(text?: string): string\r\n    {\r\n        if (text != null)\r\n            puma(this.container()).find(\".vrRadioButtonLabel\").html(text);\r\n\r\n        return puma(this.container()).find(\".vrRadioButtonLabel\").html();\r\n    }\r\n\r\n    clear(triggerChange = false): void\r\n    {\r\n        this.checked(false, triggerChange);\r\n    }\r\n\r\n    getOptions(): RadioButtonOptions\r\n    {\r\n        return this.options<RadioButtonOptions>();\r\n    }\r\n\r\n    enable(): void\r\n    {\r\n        super.enable();\r\n        puma(this.container()).removeClass(\"vrRadioButtonListDisabled\");\r\n    }\r\n\r\n    disable(): void\r\n    {\r\n        super.disable();\r\n        puma(this.container()).addClass(\"vrRadioButtonListDisabled\");\r\n    }\r\n    //#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Events\r\nclass RadioButtonEvent\r\n{\r\n    sender: RadioButton;\r\n}\r\n\r\nexport class RadioButtonCheckEvent extends RadioButtonEvent\r\n{\r\n    checked: boolean;\r\n}\r\n//#endregion","import { UtilityManager } from \"../../../src/managers/utilityManager\";\r\nimport { VrControlOptions, VrControl, VrControlsEvent } from \"../common\";\r\nimport { ControlTypeEnum, OrientationEnum, createRadioButton, puma } from \"../vr\";\r\nimport { RadioButtonCheckEvent, RadioButton } from \"./radioButton\";\r\n\r\n//#region Options\r\nexport class RadioButtonListOptions extends VrControlOptions\r\n{\r\n    items?: RadioButtonItem[];\r\n    orientation?: OrientationEnum;\r\n    listName?: string;\r\n    // Gestione validation\r\n\r\n    onBeforeSelect?(e: RadioButtonListSelectEvent): void;\r\n    onSelect?(e: RadioButtonListSelectEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class RadioButtonList extends VrControl\r\n{\r\n    private _radioControls: RadioButton[];\r\n    private _items: RadioButtonItem[];\r\n\r\n    constructor(element: HTMLElement, options?: RadioButtonListOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new RadioButtonListOptions();\r\n\r\n        if (options.orientation == null) options.orientation = OrientationEnum.Horizontal;\r\n        if (options.items == null) options.items = [];\r\n        if (options.listName == null) options.listName = element.id + \"_RadioButtonListName\";\r\n        //#endregion\r\n\r\n        super(element, options, ControlTypeEnum.RadioButtonList);\r\n        this._radioControls = [];\r\n\r\n        this.items(options.items);\r\n        if (this.value() == \"\")\r\n            this.clear();\r\n    }\r\n\r\n    //#region Methods\r\n    items(items?: RadioButtonItem[]): RadioButtonItem[]\r\n    {\r\n        let options = this.getOptions();\r\n        if (items != null)\r\n        {\r\n            this._items = items;\r\n            let i = 0;\r\n            for (let item of items)\r\n            {\r\n                let radioButton = createRadioButton(\r\n                    {\r\n                        text: item.text,\r\n                        value: (item.value == null) ? item.text : String(item.value),\r\n                        name: options.listName,\r\n                        checked: item.checked,\r\n                        tag: item.tag,\r\n                        cssContainer: (options.orientation == OrientationEnum.Horizontal && i > 0) ? \"margin-left: 10px;\" : ((options.orientation == OrientationEnum.Vertical) ? \"width: 100%\" : \"\"),\r\n                        onCheck: (e) => \r\n                        {\r\n                            if (options!.onBeforeSelect != null)\r\n                            {\r\n                                let selectEvent = new RadioButtonListSelectEvent();\r\n                                selectEvent.sender = this;\r\n                                selectEvent.value = String(item.value);\r\n                                options!.onBeforeSelect(selectEvent);\r\n\r\n                                if (selectEvent.isDefaultPrevented())\r\n                                    return;\r\n                            }\r\n\r\n                            if (item.onCheck != null)\r\n                                item.onCheck(e);\r\n\r\n                            if (options!.onSelect != null)\r\n                            {\r\n                                let selectEvent = new RadioButtonListSelectEvent();\r\n                                selectEvent.sender = this;\r\n                                selectEvent.value = String(item.value);\r\n                                options!.onSelect(selectEvent);\r\n                            }\r\n                        }\r\n                    }, this.element());\r\n\r\n                this._radioControls.push(radioButton);\r\n                i++;\r\n            }\r\n        }\r\n        return this._items;\r\n    }\r\n\r\n    value(value?: string | number, triggerChange = true): string\r\n    {\r\n        if (value != null)\r\n        {\r\n            let radioButton = this._radioControls.filter(k => puma(k.element()).attr(\"value\") == String(value))[0];\r\n            if (radioButton != null)\r\n                radioButton.checked(true, triggerChange);\r\n        }\r\n\r\n        let checkedRadio = this._radioControls.filter(k => k.checked())[0];\r\n        if (checkedRadio != null)\r\n            return puma(checkedRadio.element()).attr(\"value\");\r\n        else\r\n            return \"\";\r\n    }\r\n\r\n    valueTag(tag?: any, triggerChange = true)\r\n    {\r\n        if (tag != null)\r\n        {\r\n            let radioButton = this._radioControls.filter(k => UtilityManager.equals(k.tag(), tag))[0];\r\n            if (radioButton != null)\r\n                radioButton.checked(true, triggerChange);\r\n        }\r\n\r\n        let checkedRadio = this._radioControls.filter(k => k.checked())[0];\r\n        if (checkedRadio != null)\r\n            return checkedRadio.tag();\r\n        else\r\n            return \"\";\r\n    }\r\n\r\n    text(value: string, text?: string): string\r\n    {\r\n        let radioButton = this._radioControls.filter(k => puma(k.element()).attr(\"value\") == value)[0];\r\n        if (radioButton != null)\r\n            return radioButton.text(text);\r\n\r\n        return \"\";\r\n    }\r\n\r\n    clear(triggerChange = false): void\r\n    {\r\n        for (let radioButton of this._radioControls)\r\n            radioButton.checked(false, triggerChange);\r\n    }\r\n\r\n    clearItems()\r\n    {\r\n        this._radioControls = [];\r\n        puma(this.element()).empty();\r\n    }\r\n\r\n    getOptions(): RadioButtonListOptions\r\n    {\r\n        return this.options<RadioButtonListOptions>();\r\n    }\r\n\r\n    enable(): void\r\n    {\r\n        super.enable();\r\n        for (let radio of this._radioControls)\r\n            radio.enable();\r\n    }\r\n\r\n    disable(): void\r\n    {\r\n        super.disable();\r\n        for (let radio of this._radioControls)\r\n            radio.disable();\r\n    }\r\n    //#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass RadioButtonItem\r\n{\r\n    text?: string;\r\n    value?: string | number;\r\n    checked?: boolean;\r\n    tag?: any;\r\n\r\n    onCheck?: (e: RadioButtonCheckEvent) => void;\r\n}\r\n\r\nclass RadioButtonListSelectEvent extends VrControlsEvent\r\n{\r\n    sender: RadioButtonList;\r\n    value?: string;\r\n}\r\n//#endregion","import { VrControlOptions, VrControl } from \"../common\";\r\nimport { ControlTypeEnum, GridToolbarItem, GridHeightModeEnum, GridCheckboxModeEnum, GridModeEnum, createGrid, GridColumnTypeEnum, puma, GridAlignEnum, createLabel, TextAlignEnum, GridSortDirectionEnum, GridGroupBySettings, ControlPositionEnum, GridGroupByItem, GridSortSettings } from \"../vr\";\r\nimport { GridRebindRequest, GridFooterSettings, GridOnDataBoundEvent, GridOnRowDataBoundEvent, GridSelectRowEvent, GridSelectAllRowsEvent, GridUnselectRowEvent, GridUnselectAllRowsEvent, GridTemplateEvent, GridCustomSettings, Grid, GridFilterSettings, GridRow } from \"./grid\";\r\nimport { Button } from \"./button\";\r\nimport { SplitButton } from \"./splitButton\";\r\nimport { Switch } from \"./switch\";\r\nimport { UtilityManager } from \"../../../src/managers/utilityManager\";\r\n\r\n//#region Options\r\nexport class RepeaterOptions extends VrControlOptions\r\n{\r\n    toolbar?: GridToolbarItem[];\r\n    height?: string | number | GridHeightModeEnum;\r\n    dataSource?: any[];\r\n    rebind?: GridRebindRequest;\r\n    checkboxes?: boolean | GridCheckboxModeEnum;\r\n    dataSourceFieldId?: string;\r\n    rowHeight?: number;\r\n    hideEditButton?: boolean;\r\n    mode?: GridModeEnum;\r\n    filterable?: boolean;\r\n    pageSize?: number | boolean;\r\n    largePageSize?: boolean;\r\n    footer?: boolean | GridFooterSettings;\r\n    padding?: number | PaddingSettings;\r\n    alternateRowColors?: boolean | string;\r\n    hoverRowColor?: boolean;\r\n    customFilterProperties?: string[];\r\n    emptyMessage?: string;\r\n    groupBy?: string[] | GridGroupBySettings | null;\r\n    title?: string | boolean;\r\n    groupable?: boolean;\r\n\r\n    template?: (templateEvent: GridTemplateEvent) => string;\r\n    onDataSourceChanged?: () => void;\r\n    onDataBound?: (e: GridOnDataBoundEvent) => void;\r\n    onRowDataBound?: (e: RepeaterOnRowDataBoundEvent) => void | string;\r\n    onSelectRow?: (e: GridSelectRowEvent) => void;\r\n    onSelectAllRows?: (e: GridSelectAllRowsEvent) => void;\r\n    onUnselectRow?: (e: GridUnselectRowEvent) => void;\r\n    onUnselectAllRows?: (e: GridUnselectAllRowsEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Repeater extends VrControl\r\n{\r\n    private _grid: Grid;\r\n\r\n    constructor(element: HTMLElement, options?: RepeaterOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new RepeaterOptions();\r\n\r\n        options.hideEditButton = true;\r\n        if (options.pageSize == null) options.pageSize = false;\r\n        if (options.alternateRowColors == null) options.alternateRowColors = true;\r\n\r\n        if (options.footer == null || options.footer === true) options.footer = new GridFooterSettings();\r\n        if (options.footer !== false)\r\n        {\r\n            if (options.footer.showPagination == null) options.footer.showPagination = true;\r\n            if (options.footer.showSettings == null) options.footer.showSettings = false;\r\n            if (options.pageSize === false) options.pageSize = 50;\r\n        }\r\n\r\n        if (options.padding == null) options.padding = 10;\r\n        if (typeof (options.padding) != \"number\")\r\n        {\r\n            if (options.padding.left == null) options.padding.left = 10;\r\n            if (options.padding.top == null) options.padding.top = 10;\r\n            if (options.padding.right == null) options.padding.right = 10;\r\n            if (options.padding.bottom == null) options.padding.bottom = 10;\r\n        }\r\n\r\n        if (options.emptyMessage == null) options.emptyMessage = \"Nessun risultato\";\r\n        if (options.title == null) options.title = false;\r\n        if (options.title === true) options.title = \"\";\r\n        //#endregion\r\n\r\n        let internalHeight = UtilityManager.duplicate(options.height);\r\n        options.height = undefined;\r\n\r\n        let datasource = options.dataSource;\r\n        options.dataSource = undefined;\r\n\r\n        super(element, options, ControlTypeEnum.Repeater);\r\n\r\n        this.container().id = this.container().id + \"_Repeater\";\r\n\r\n        //#region Repeater\r\n        this._grid = createGrid(\r\n            {\r\n                addToControlList: options.addToControlList,\r\n                toolbar: options.toolbar,\r\n                classContainer: \"vrRepeaterContainer\",\r\n                columns: [\r\n                    {\r\n                        field: \"custom\" + this.element().id, type: GridColumnTypeEnum.Custom, cellSettings: { textAlign: GridAlignEnum.Left },\r\n                        filterable: true, customFilterProperties: options.customFilterProperties, fitSpace: true, title: (options.title !== false) ? options.title : \"\",\r\n                        customSettings: (e) =>\r\n                        {\r\n                            //#region Padding\r\n                            if (typeof (options!.padding) == \"number\")\r\n                                e.element!.style.cssText += \"padding: \" + options!.padding + \"px;\";\r\n                            else\r\n                                e.element!.style.cssText += \"padding-left: \" + options!.padding!.left + \"px; padding-top: \" + options!.padding!.top + \"px; padding-right: \" + options!.padding!.right + \"px; padding-bottom: \" + options!.padding!.bottom + \"px;\";\r\n                            //#endregion\r\n\r\n                            if (options!.template != null)\r\n                                return { template: options!.template(e) };\r\n                            else\r\n                                return undefined;\r\n                        }\r\n                    }\r\n                ],\r\n                height: internalHeight,\r\n                rebind: options.rebind,\r\n                checkboxes: options.checkboxes,\r\n                dataSourceFieldId: options.dataSourceFieldId,\r\n                rowHeight: options.rowHeight,\r\n                hideEditButton: options.hideEditButton,\r\n                mode: options.mode,\r\n                filterable: options.filterable,\r\n                pageSize: options.pageSize,\r\n                largePageSize: options.largePageSize,\r\n                footer: options.footer,\r\n                header: options.title !== false,\r\n                alternateRowColors: options.alternateRowColors,\r\n                hoverRowColor: options.hoverRowColor,\r\n                multilineRows: true,\r\n                resizable: false,\r\n                reorderable: false,\r\n                groupable: true,\r\n                groupBy: options.groupBy,\r\n                layoutSettings: false,\r\n                tooltip: false,\r\n                onDataSourceChanged: options.onDataSourceChanged,\r\n                onDataBound: options.onDataBound,\r\n                onRowDataBound: (e) =>\r\n                {\r\n                    //#region Empty\r\n                    puma(this.element()).find(\".toRemove\").parent().remove();\r\n                    if (e.empty)\r\n                    {\r\n                        puma(e.rowElement).empty();\r\n                        createLabel(\r\n                            {\r\n                                text: options!.emptyMessage,\r\n                                fontSize: 14,\r\n                                width: \"100%\",\r\n                                align: TextAlignEnum.Center,\r\n                                class: \"toRemove\"\r\n                            }, puma(this.element()).find(\".grid_Body\"), ControlPositionEnum.Before);\r\n                        return;\r\n                    }\r\n                    //#endregion\r\n\r\n                    if (options!.onRowDataBound != null)\r\n                    {\r\n                        let dataSourceIdList = this.dataSource().map(k => k[options!.dataSourceFieldId!]);\r\n                        let index = dataSourceIdList.indexOf(e.dataItem[options!.dataSourceFieldId!]);\r\n                        if (index == -1 || options!.dataSourceFieldId == null)\r\n                            index = puma(e.rowElement).index();\r\n\r\n                        let event = new RepeaterOnRowDataBoundEvent();\r\n                        event.dataItem = e.dataItem;\r\n                        event.realDataItem = e.realDataItem;\r\n                        event.empty = e.empty;\r\n                        event.rowElement = e.rowElement;\r\n                        event.sender = e.sender;\r\n                        event.cell = puma(e.rowElement).find(\"td[field='custom\" + this.element().id + \"']\")[0];\r\n                        event.index = index;\r\n                        options!.onRowDataBound(event);\r\n                    }\r\n                },\r\n                onSelectRow: (e) =>\r\n                {\r\n                    if (options!.onSelectRow != null && !e.empty)\r\n                        options!.onSelectRow(e);\r\n                },\r\n                onSelectAllRows: options.onSelectAllRows,\r\n                onUnselectRow: options.onUnselectRow,\r\n                onUnselectAllRows: options.onUnselectAllRows\r\n            }, this.element());\r\n        //#endregion\r\n\r\n        if (datasource != null)\r\n            this._grid.dataSource(datasource);\r\n    }\r\n\r\n    //#region Methods\r\n    rebind(parameters?: any | null, keepInfo = true)\r\n    {\r\n        this._grid.rebind(parameters, false, keepInfo);\r\n    }\r\n\r\n    rebindSpecificRows(itemIdList: number[], update = true)\r\n    {\r\n        this._grid.rebindSpecificRows(itemIdList, update);\r\n    }\r\n\r\n    clear()\r\n    {\r\n        this._grid.clear();\r\n    }\r\n\r\n    //#region Items\r\n    originalDataSource()\r\n    {\r\n        return this._grid.originalDataSource();\r\n    }\r\n\r\n    dataSource(dataItems?: any[], clearFilters = false)\r\n    {\r\n        return this._grid.dataSource(dataItems, clearFilters);\r\n    }\r\n\r\n    update(triggerDataBound = true, keepInfo = true)\r\n    {\r\n        this._grid.update(triggerDataBound, keepInfo);\r\n    }\r\n\r\n    updateRow(dataItem: any, rebind = true)\r\n    {\r\n        this._grid.updateRow(dataItem, rebind);\r\n    }\r\n\r\n    updateRows(dataItems: any[], rebind = true)\r\n    {\r\n        this._grid.updateRows(dataItems, rebind);\r\n    }\r\n\r\n    addRow(dataItem: any, rebind = true)\r\n    {\r\n        this._grid.addRow(dataItem, rebind);\r\n    }\r\n\r\n    addRows(dataItems: any[], rebind = true)\r\n    {\r\n        this._grid.addRows(dataItems, rebind);\r\n    }\r\n\r\n    deleteRow(dataItemId: any, rebind = false)\r\n    {\r\n        this._grid.deleteRow(dataItemId, rebind);\r\n    }\r\n\r\n    deleteRows(dataItemIdList: any[], rebind = false)\r\n    {\r\n        this._grid.deleteRows(dataItemIdList, rebind);\r\n    }\r\n\r\n    rows(): GridRow[]\r\n    {\r\n        return this._grid.rows();\r\n    }\r\n\r\n    getAllItems()\r\n    {\r\n        return this._grid.getAllItems();\r\n    }\r\n\r\n    getCheckedItems()\r\n    {\r\n        return this._grid.getCheckedItems();\r\n    }\r\n\r\n    getCheckedValues()\r\n    {\r\n        return this._grid.getCheckedValues();\r\n    }\r\n\r\n    getDeletedItems()\r\n    {\r\n        return this._grid.getDeletedItems();\r\n    }\r\n\r\n    getDeletedItemValues(key?: string)\r\n    {\r\n        return this._grid.getDeletedItemValues(key);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Selection\r\n    clearSelection(triggerChange = true)\r\n    {\r\n        this._grid.clearSelection(triggerChange);\r\n    }\r\n\r\n    checkAllRows(triggerChange = true)\r\n    {\r\n        this._grid.checkAllRows(triggerChange);\r\n    }\r\n\r\n    unCheckAllRows(triggerChange = true)\r\n    {\r\n        this._grid.unCheckAllRows(triggerChange);\r\n    }\r\n\r\n    selectRowsByIndexes(indexes: number[], triggerChange = true)\r\n    {\r\n        this.selectRowsByIndexes(indexes, triggerChange);\r\n    }\r\n\r\n    selectRowByIndex(index: number, triggerChange = true)\r\n    {\r\n        this.selectRowByIndex(index, triggerChange);\r\n    }\r\n\r\n    selectRows(itemIdList: string[], property?: string, triggerChange = true)\r\n    {\r\n        this.selectRows(itemIdList, property, triggerChange);\r\n    }\r\n\r\n    selectRow(itemId: string, triggerChange = true)\r\n    {\r\n        this._grid.selectRow(itemId, triggerChange);\r\n    }\r\n\r\n    unselectRows(itemIdList: string[], property?: string, triggerChange = true)\r\n    {\r\n        this._grid.unselectRows(itemIdList, property, triggerChange);\r\n    }\r\n\r\n    unselectRow(itemId: string)\r\n    {\r\n        this._grid.unselectRow(itemId);\r\n    }\r\n    //#endregion\r\n\r\n    //#region GroupBy\r\n    removeGroup(field: string, updateDataSource = true)\r\n    {\r\n        this.removeGroups([field], updateDataSource);\r\n    }\r\n\r\n    removeGroups(fields: string[], updateDataSource = true)\r\n    {\r\n        this._grid.removeGroups(fields, updateDataSource);\r\n    }\r\n\r\n    removeAllGroups(updateDataSource = true)\r\n    {\r\n        this._grid.removeAllGroups(updateDataSource);\r\n    }\r\n\r\n    addGroup(field: string | GridGroupByItem, updateDataSource = true, sortBySettings?: GridSortSettings, internalSortBy?: GridSortSettings)\r\n    {\r\n        this.addGroups([field], updateDataSource, sortBySettings, internalSortBy);\r\n    }\r\n\r\n    addGroups(fields: (string | GridGroupByItem)[], updateDataSource = true, sortBy?: GridSortSettings, internalSortBy?: GridSortSettings)\r\n    {\r\n        this._grid.addGroups(fields, updateDataSource, sortBy, internalSortBy);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Sort\r\n    removeSort(updateDataSource = true)\r\n    {\r\n        this._grid.removeSort(updateDataSource);\r\n    }\r\n\r\n    sort(field: string, tableSortModeEnum?: GridSortDirectionEnum)\r\n    {\r\n        this._grid.sort(field, tableSortModeEnum);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Filter\r\n    clearFilters(updateDataSource = true)\r\n    {\r\n        this._grid.clearFilters(updateDataSource);\r\n    }\r\n\r\n    addFilter(field: string, filterCondition: GridFilterSettings, applyFilters = true)\r\n    {\r\n        this._grid.addFilter(field, filterCondition, applyFilters);\r\n    }\r\n\r\n    removeFilter(field: string, applyFilters = true)\r\n    {\r\n        this._grid.removeFilter(field, applyFilters);\r\n    }\r\n\r\n    updateFilter(field: string, filterCondition: GridFilterSettings, applyFilters = true)\r\n    {\r\n        this._grid.updateFilter(field, filterCondition, applyFilters);\r\n    }\r\n    //#endregion\r\n\r\n    pageSelected(page?: number, update = true)\r\n    {\r\n        return this._grid.pageSelected(page, update);\r\n    }\r\n\r\n    //#region Height\r\n    height(height?: number | string)\r\n    {\r\n        return this._grid.height(height);\r\n    }\r\n\r\n    recalculateHeight(afterFilter = false)\r\n    {\r\n        this._grid.recalculateHeight(afterFilter);\r\n    }\r\n\r\n    recalculateWidth()\r\n    {\r\n        this._grid.recalculateWidth();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Visible toolbar\r\n    visibleToolbar(state?: boolean)\r\n    {\r\n        return this._grid.visibleToolbar(state);\r\n    }\r\n\r\n    showToolbar()\r\n    {\r\n        this._grid.showToolbar();\r\n    }\r\n\r\n    hideToolbar()\r\n    {\r\n        this._grid.hideToolbar();\r\n    }\r\n\r\n    toolbarItem<T extends Button | SplitButton | Switch>(value: string)\r\n    {\r\n        return this._grid.toolbarItem<T>(value);\r\n    }\r\n\r\n    showToolbarItem(value: string)\r\n    {\r\n        this._grid.showToolbarItem(value);\r\n    }\r\n\r\n    hideToolbarItem(value: string)\r\n    {\r\n        this._grid.hideToolbarItem(value);\r\n    }\r\n\r\n    enableToolbarItem<T extends VrControl>(value: string)\r\n    {\r\n        this._grid.enableToolbarItem<T>(value);\r\n    }\r\n\r\n    disableToolbarItem<T extends VrControl>(value: string)\r\n    {\r\n        this._grid.disableToolbarItem<T>(value);\r\n    }\r\n\r\n    removeToolbarItem(value: string)\r\n    {\r\n        this._grid.removeToolbarItem(value);\r\n    }\r\n\r\n    addToolbarItem(toolbarItem: GridToolbarItem)\r\n    {\r\n        this._grid.addToolbarItem(toolbarItem);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Column\r\n    hideCheckboxColumn(updateDataSource = false)\r\n    {\r\n        this._grid.hideColumn(\"vrGridCheckboxColumn\", updateDataSource);\r\n    }\r\n\r\n    showCheckboxColumn(updateDataSource = false)\r\n    {\r\n        this._grid.showColumn(\"vrGridCheckboxColumn\", updateDataSource);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Utility\r\n    pageSize(pageSize?: number, update = false, triggerDataBound = false)\r\n    {\r\n        return this._grid.pageSize(pageSize, update, triggerDataBound);\r\n    }\r\n    //#endregion\r\n\r\n    //#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass PaddingSettings\r\n{\r\n    left?: number;\r\n    top?: number;\r\n    right?: number;\r\n    bottom?: number;\r\n}\r\n\r\nclass RepeaterOnRowDataBoundEvent extends GridOnRowDataBoundEvent\r\n{\r\n    cell: HTMLElement;\r\n    index: number;\r\n}\r\n//#endregion","import { ControlTypeEnum, MapMarker, MapModeEnum, puma } from \"../vr\";\r\nimport { VrControlOptions, VrControl, VrControlsEvent } from \"../common\";\r\ndeclare var L: any;\r\n\r\n//#region Options\r\nexport class MapsOptions extends VrControlOptions\r\n{\r\n    latitude?: number;\r\n    longitude?: number;\r\n    zoom?: number;\r\n    maxZoom?: number;\r\n    credits?: boolean | string;\r\n    marker?: boolean | MapMarker[];\r\n    mode?: MapModeEnum;\r\n\r\n    onClick?: (e: MapClickEvent) => void;\r\n    onPinClick?: (e: MapPinClickEvent) => void;\r\n    onHover?: (e: MapPinHoverEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Maps extends VrControl\r\n{\r\n    private _map: any;\r\n    private _internalMarkerList: any[];\r\n\r\n    constructor(element: HTMLElement, options?: MapsOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new MapsOptions();\r\n\r\n        if (options.zoom == null) options.zoom = 15;\r\n        if (options.maxZoom == null) options.maxZoom = 18;\r\n        if (options.marker == null) options.marker = true;\r\n        if (options.latitude == null) options.latitude = 0;\r\n        if (options.longitude == null) options.longitude = 0;\r\n        if (options.height == null) options.height = 200;\r\n        if (options.width == null) options.width = \"100%\";\r\n        if (options.mode == null) options.mode = MapModeEnum.Light;\r\n        if (options.tabIndex == null) options.tabIndex = -1;\r\n\r\n        if (options.credits == null) options.credits = true;\r\n        if (options.credits)\r\n            options.credits = `<span style='font-size: 10px'><a href='https://www.openstreetmap.org/'>OpenStreetMap</a> contributors`;\r\n        else\r\n            options.credits = \"\";\r\n        //#endregion\r\n\r\n        let enable = options.enable;\r\n        if (options.enable == false)\r\n            options.enable = undefined;\r\n\r\n        super(element, options, ControlTypeEnum.Map);\r\n\r\n        this._internalMarkerList = [];\r\n        puma(this.element()).height(\"100%\");\r\n\r\n        let accessToken = \"pk.eyJ1IjoibWF0dGV1enppc3RlZmFubyIsImEiOiJja3I3aHp2bzIwNHNpMnBtYzVndGN5YzFxIn0.tEqLhXaDn9FC9Mrqu8o-lQ\";\r\n        this._map = L.map(this.element(), { preferCanvas: true }).setView([options.latitude, options.longitude], options.zoom);\r\n        L.tileLayer(\"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=\" + accessToken, {\r\n            maxZoom: options.maxZoom,\r\n            attribution: options.credits,\r\n            id: options.mode,\r\n            tileSize: 512,\r\n            zoomOffset: -1\r\n        }).addTo(this._map);\r\n\r\n        //#region Click\r\n        if (options!.onClick != null)\r\n        {\r\n            puma(this._map).on(\"click\", (e: JQuery.ClickEvent) =>\r\n            {\r\n                let clickEvent = new MapPinClickEvent();\r\n                clickEvent.sender = this;\r\n                options!.onClick!(clickEvent);\r\n            });\r\n        }\r\n        //#endregion\r\n\r\n        if (typeof (options.marker) == \"boolean\" && options.marker)\r\n        {\r\n            let defaultMarker = new MapMarker();\r\n            defaultMarker.latitude = options.latitude;\r\n            defaultMarker.longitude = options.longitude;\r\n            options.marker = [defaultMarker];\r\n            this.marker([defaultMarker]);\r\n        }\r\n        else if (Array.isArray(options.marker))\r\n            this.marker(options.marker);\r\n\r\n        if (enable === false)\r\n            this.disable();\r\n        else\r\n            this.enable();\r\n    }\r\n\r\n    //#region Methods\r\n    map()\r\n    {\r\n        return this._map;\r\n    }\r\n\r\n    locate(latitude: number, longitude: number): void\r\n    {\r\n        L.latLng(latitude, longitude).addTo(this._map);\r\n    }\r\n\r\n    marker(markers?: MapMarker[])\r\n    {\r\n        let options = this.getOptions();\r\n        if (markers != null)\r\n        {\r\n            options.marker = markers;\r\n            for (let marker of markers)\r\n            {\r\n                let pin = L.circleMarker([marker.latitude, marker.longitude], {\r\n                    color: '#3388ff'\r\n                });\r\n\r\n                if (marker.title != null)\r\n                    pin.bindPopup(marker.title)\r\n\r\n                pin.addTo(this._map);\r\n                this._internalMarkerList.push(pin);\r\n\r\n                //#region Pin click\r\n                if (options!.onPinClick != null)\r\n                {\r\n                    puma(pin).on(\"click\", (e: JQuery.ClickEvent) =>\r\n                    {\r\n\r\n                        let clickEvent = new MapPinClickEvent();\r\n                        clickEvent.sender = this;\r\n                        clickEvent.coordinate = { latitude: pin._latlng.lat, longitude: pin._latlng.lng };\r\n                        clickEvent.point = { x: pin._point.x, y: pin._point.y };\r\n                        clickEvent.color = pin.options.color;\r\n                        clickEvent.dataItem = marker;\r\n                        clickEvent.element = pin;\r\n                        options!.onPinClick!(clickEvent);\r\n                    });\r\n                }\r\n                //#endregion\r\n\r\n                //#region Tooltip\r\n                puma(pin).on(\"mouseover\", (e: JQuery.MouseOverEvent) =>\r\n                {\r\n                    // Show tooltip/title\r\n                    if (marker.title != null)\r\n                        e.target.openPopup();\r\n\r\n                    if (options!.onHover != null)\r\n                    {\r\n                        let clickEvent = new MapPinHoverEvent();\r\n                        clickEvent.sender = this;\r\n                        clickEvent.coordinate = { latitude: pin._latlng.lat, longitude: pin._latlng.lng };\r\n                        clickEvent.point = { x: pin._point.x, y: pin._point.y };\r\n                        clickEvent.color = pin.options.color;\r\n                        clickEvent.dataItem = marker;\r\n                        clickEvent.element = pin;\r\n                        options!.onHover(clickEvent);\r\n                    }\r\n                })\r\n                //#endregion\r\n            }\r\n        }\r\n        return options.marker as MapMarker[];\r\n    }\r\n\r\n    clear()\r\n    {\r\n        let options = this.getOptions();\r\n        if (options.marker != null && Array.isArray(options.marker))\r\n        {\r\n            for (let marker of this._internalMarkerList)\r\n                this._map.removeLayer(marker);\r\n        }\r\n        this._internalMarkerList = [];\r\n    }\r\n\r\n    disable()\r\n    {\r\n        super.disable();\r\n\r\n        this._map.dragging.disable();\r\n        this._map.touchZoom.disable();\r\n        this._map.doubleClickZoom.disable();\r\n        this._map.scrollWheelZoom.disable();\r\n        this._map.boxZoom.disable();\r\n        this._map.keyboard.disable();\r\n        puma(this.container()).find(\".leaflet-control-zoom\").hide();\r\n\r\n        if (this._map.tap)\r\n            this._map.tap.disable();\r\n\r\n        this.element().style.cursor = \"default\";\r\n    }\r\n\r\n    enable()\r\n    {\r\n        super.enable();\r\n\r\n        this._map.dragging.enable();\r\n        this._map.touchZoom.enable();\r\n        this._map.doubleClickZoom.enable();\r\n        this._map.scrollWheelZoom.enable();\r\n        this._map.boxZoom.enable();\r\n        this._map.keyboard.enable();\r\n        puma(this.container()).find(\".leaflet-control-zoom\").show();\r\n\r\n        if (this._map.tap)\r\n            this._map.tap.enable();\r\n\r\n        this.element().style.cursor = \"grab\";\r\n    }\r\n\r\n    invalidateSize()\r\n    {\r\n        this._map.invalidateSize();\r\n    }\r\n\r\n    getOptions()\r\n    {\r\n        return this.options<MapsOptions>();\r\n    }\r\n    //#endregion    \r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass MapEvent extends VrControlsEvent\r\n{\r\n    sender: Maps;\r\n    coordinate: MapCoordinate;\r\n    point: MapPoint;\r\n    color: string;\r\n    dataItem: any;\r\n    element: any;\r\n}\r\n\r\nclass MapPinClickEvent extends MapEvent\r\n{\r\n}\r\n\r\nclass MapPinHoverEvent extends MapEvent\r\n{\r\n}\r\n\r\nclass MapClickEvent extends VrControlsEvent\r\n{\r\n    sender: Maps;\r\n}\r\n\r\nclass MapCoordinate\r\n{\r\n    latitude: number;\r\n    longitude: number;\r\n}\r\n\r\nclass MapPoint\r\n{\r\n    x: number;\r\n    y: number;\r\n}\r\n//#endregion","import { ControlTypeEnum, puma } from \"../vr\";\r\nimport { VrControlOptions, VrControl, VrControlsEvent } from \"../common\";\r\n\r\n//#region Options\r\nexport class PainterOptions extends VrControlOptions\r\n{\r\n    imagePath?: string;\r\n    size?: number;\r\n    color?: string;\r\n    saveSettings?: PainterSaveSettings;\r\n\r\n    onMouseDown?: (e: PainterMouseDownEvent) => void;\r\n    onMouseMove?: (e: PainterMouseMoveEvent) => void;\r\n    onMouseUp?: (e: PainterMouseUpEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Painter extends VrControl\r\n{\r\n    private _color: string;\r\n    private _size: number;\r\n    private _points: [Point[]];\r\n    private _ctx: CanvasRenderingContext2D;\r\n    private _image: any;\r\n    private _isMoving: boolean;\r\n    private _pointTag?: any;\r\n\r\n    constructor(element: HTMLElement, options?: PainterOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new PainterOptions();\r\n\r\n        if (options.imagePath == null) options.imagePath = \"\";\r\n        if (options.size == null) options.size = 10;\r\n        if (options.color == null) options.color = \"rgba(255, 0, 0, 0.25)\";\r\n\r\n        if (options.height == null) options.height = 200;\r\n        if (options.width == null) options.width = 200;\r\n        let canvasHeight = Number(options.height);\r\n        let canvasWidth = Number(options.width);\r\n        options.height = undefined;\r\n        options.width = undefined;\r\n\r\n        if (options.saveSettings == null) options.saveSettings = new PainterSaveSettings();\r\n        if (options.saveSettings.legendWidth == null) options.saveSettings.legendWidth = 550;\r\n        if (options.saveSettings.legendHeight == null) options.saveSettings.legendHeight = 400;\r\n        if (options.tabIndex == null) options.tabIndex = -1;\r\n        //#endregion\r\n\r\n        super(element, options, ControlTypeEnum.Painter);\r\n\r\n        puma(this.element()).attr(\"width\", canvasWidth);\r\n        puma(this.element()).attr(\"height\", canvasHeight);\r\n        this._image = new Image();\r\n        this.image(options.imagePath);\r\n\r\n        this._ctx = (this.element() as HTMLCanvasElement).getContext(\"2d\")!;\r\n        this._ctx.clearRect(0, 0, (this._ctx as any).width, (this._ctx as any).height);\r\n        this._ctx.drawImage(this.image(), 0, 0);\r\n\r\n        (this._points as any) = [];\r\n        this.color(options.color);\r\n        this.size(options.size);\r\n        window.setTimeout(() => this.draw(), 1000);\r\n        this._isMoving = false;\r\n\r\n        puma(this.element()).mousemove((e: JQuery.MouseMoveEvent) =>\r\n        {\r\n            if (!this._isMoving)\r\n                return;\r\n\r\n            let point = this.getPoint(e);\r\n            if (this._points[this._points.length - 1] != null)\r\n                this._points[this._points.length - 1].push(point);\r\n\r\n            //#region Event\r\n            if (options!.onMouseMove != null)\r\n            {\r\n                let event = new PainterMouseMoveEvent();\r\n                event.sender = this;\r\n                event.event = e;\r\n                event.points = this._points;\r\n                options!.onMouseMove(event);\r\n\r\n                if (event.isDefaultPrevented())\r\n                {\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n            }\r\n            //#endregion\r\n\r\n            this.draw();\r\n        });\r\n        puma(this.element()).mousedown((e: JQuery.MouseDownEvent) =>\r\n        {\r\n            this._isMoving = true;\r\n            let point = this.getPoint(e);\r\n\r\n            //#region Event\r\n            if (options!.onMouseDown != null)\r\n            {\r\n                let event = new PainterMouseDownEvent();\r\n                event.sender = this;\r\n                event.event = e;\r\n                event.points = this._points;\r\n                options!.onMouseDown(event);\r\n\r\n                if (event.isDefaultPrevented())\r\n                {\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n            }\r\n            //#endregion\r\n\r\n            this._points.push([point]);\r\n        });\r\n        puma(this.element()).mouseup((e: JQuery.MouseUpEvent) =>\r\n        {\r\n            this._isMoving = false;\r\n\r\n            //#region Event\r\n            if (options!.onMouseUp != null)\r\n            {\r\n                let event = new PainterMouseUpEvent();\r\n                event.sender = this;\r\n                event.event = e;\r\n                event.points = this._points;\r\n                options!.onMouseUp(event);\r\n\r\n                if (event.isDefaultPrevented())\r\n                {\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n            }\r\n            //#endregion\r\n        });\r\n    }\r\n\r\n    color(color?: string): string\r\n    {\r\n        if (color != null)\r\n            this._color = color;\r\n\r\n        return this._color;\r\n    }\r\n\r\n    size(size?: number): number\r\n    {\r\n        if (size != null)\r\n            this._size = size;\r\n\r\n        return this._size;\r\n    }\r\n\r\n    image(imagePath?: string): any\r\n    {\r\n        if (imagePath != null)\r\n            this._image.src = imagePath;\r\n\r\n        return this._image;\r\n    }\r\n\r\n    pointTag(tag?: any): any\r\n    {\r\n        if (tag != null)\r\n            this._pointTag = tag;\r\n\r\n        return this._pointTag;\r\n    }\r\n\r\n    points(points?: [Point[]]): [Point[]]\r\n    {\r\n        if (points != null)\r\n        {\r\n            this._points = points;\r\n            this.draw();\r\n        }\r\n\r\n        return this._points;\r\n    }\r\n\r\n    draw(): any\r\n    {\r\n        this._ctx.clearRect(0, 0, (this._ctx as any).width, (this._ctx as any).height);\r\n        this._ctx.drawImage(this.image(), 0, 0);\r\n\r\n        for (let i = 0; i < this._points.length; ++i)\r\n        {\r\n            let points = this._points[i] as any;\r\n            if (points.length < 1)\r\n                continue;\r\n\r\n            this._ctx.strokeStyle = points[0].color;\r\n            this._ctx.lineCap = \"round\";\r\n            this._ctx.lineJoin = \"round\";\r\n            this._ctx.lineWidth = points[0].size;\r\n            this._ctx.beginPath();\r\n            this._ctx.moveTo(points[0].x, points[0].y);\r\n\r\n            for (let j = 1; j < points.length; ++j)\r\n                this._ctx.lineTo(points[j].x, points[j].y);\r\n\r\n            this._ctx.stroke();\r\n        }\r\n    }\r\n\r\n    private getPoint(e: JQuery.MouseEventBase)\r\n    {\r\n        let point = new Point();\r\n        point.x = e.clientX - this.element().getBoundingClientRect().x;\r\n        point.y = e.clientY - this.element().getBoundingClientRect().y;\r\n        point.color = this.color();\r\n        point.size = this.size();\r\n        point.tag = this._pointTag;\r\n        return point;\r\n    }\r\n\r\n    clear(imagePath?: string)\r\n    {\r\n        (this._points as any) = [];\r\n        if (imagePath != null)\r\n            this.image(imagePath);\r\n\r\n        window.setTimeout(() => this.draw(), 200);\r\n    }\r\n\r\n    clearLastRoute()\r\n    {\r\n        this._points.pop();\r\n        this.draw();\r\n    }\r\n\r\n    clearRoute(tag: any)\r\n    {\r\n        let pointsToDelete = [];\r\n        for (let point of this.points())\r\n        {\r\n            for (let singlePoint of point)\r\n            {\r\n                if (singlePoint.tag == tag)\r\n                {\r\n                    pointsToDelete.push(point);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let pointToDelete of pointsToDelete)\r\n            this._points.vrDelete(pointToDelete);\r\n\r\n        this.draw();\r\n    }\r\n\r\n    save(legendItems?: LegendItem[])\r\n    {\r\n        let dataURL: string;\r\n        if (legendItems != null)\r\n        {\r\n            let options = this.getOptions();\r\n\r\n            let legendCanvas: HTMLCanvasElement = puma(\"<canvas>\")[0] as HTMLCanvasElement;\r\n            legendCanvas.width = options.saveSettings!.legendWidth!;\r\n            legendCanvas.height = options.saveSettings!.legendHeight!;\r\n            let context = legendCanvas.getContext(\"2d\")!;\r\n            context.drawImage(this.element() as HTMLCanvasElement, 0, 0);\r\n\r\n            let fontSize = 18;\r\n            let y = 10;\r\n            for (let legendItem of legendItems)\r\n            {\r\n                let textWidth = legendItem.color == null ? 100 : 130;\r\n                let textSize = context.measureText(legendItem.text);\r\n                let lines = Math.ceil(textSize.width / textWidth);\r\n                let realHeight = fontSize * lines;\r\n\r\n                context.font = fontSize.toString() + \"px Arial\";\r\n                if (legendItem.color != null)\r\n                {\r\n                    context.fillStyle = legendItem.color;\r\n                    context.fillRect(410, y, 20, 20);\r\n\r\n                    context.fillStyle = \"#000000\";\r\n                    context.fillText(legendItem.text, 440, y + realHeight, 100);\r\n                }\r\n                else\r\n                    context.fillText(legendItem.text, 410, y + realHeight, 130);\r\n\r\n                y += realHeight + 10;\r\n            }\r\n            dataURL = legendCanvas.toDataURL();\r\n        }\r\n        else\r\n            dataURL = (this.element() as HTMLCanvasElement).toDataURL();\r\n\r\n        return dataURL;\r\n    }\r\n\r\n    //#region Enable/Disable\r\n    enable()\r\n    {\r\n        super.enable();\r\n        puma(this.element()).removeClass(\"vrPainterDisabled\");\r\n    }\r\n\r\n    disable()\r\n    {\r\n        super.disable();\r\n        puma(this.element()).addClass(\"vrPainterDisabled\");\r\n    }\r\n    //#endregion\r\n\r\n    getOptions()\r\n    {\r\n        return (this.options() as PainterOptions);\r\n    }\r\n}\r\n\r\n//#region Classes\r\nclass Point\r\n{\r\n    public x: number;\r\n    public y: number;\r\n    public color: string;\r\n    public size: number;\r\n    public tag?: any;\r\n}\r\n\r\nclass LegendItem\r\n{\r\n    color?: string;\r\n    text: string;\r\n}\r\n\r\nclass PainterSaveSettings\r\n{\r\n    legendWidth?: number;\r\n    legendHeight?: number;\r\n}\r\n\r\nclass PainterEvent extends VrControlsEvent\r\n{\r\n    sender: Painter;\r\n    event: any\r\n    points: [Point[]];\r\n}\r\n\r\nclass PainterMouseDownEvent extends PainterEvent { }\r\nclass PainterMouseMoveEvent extends PainterEvent { }\r\nclass PainterMouseUpEvent extends PainterEvent { }\r\n//#endregion","import { VrControlOptions, VrControl, VrControlsEvent } from \"../common\";\r\nimport { ControlTypeEnum, puma, createLabel, createButton, IconClassLight, TextAlignEnum, DateDepthEnum } from \"../vr\";\r\nimport { ActualViewEnum } from \"./datePicker\";\r\nimport { Label } from \"./label\";\r\n\r\n//#region Options\r\nexport class CalendarOptions extends VrControlOptions\r\n{\r\n    value?: Date;\r\n    selectedColor?: string;\r\n    todayLabel?: boolean;\r\n    otherMonthDays?: boolean;\r\n    disabledDates?: Date[];\r\n    highlightedDates?: Date[];\r\n    dateSlotWidth?: number;\r\n    depth?: DateDepthEnum;\r\n    availableFrom?: Date;\r\n    availableTo?: Date;\r\n\r\n    onBeforeChange?(e: CalendarChangingEvent): void;\r\n    onAfterChange?(e: CalendarChangeEvent): void;\r\n    onDisableDate?(e: CalendarDisableDateEvent): boolean;\r\n    onDayDraw?(e: CalendarDayDrawEvent): void;\r\n    onFinishedDraw?(e: CalendarFinishedDrawEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Calendar extends VrControl\r\n{\r\n    private _value: Date | null;\r\n    private _actualView: ActualViewEnum;\r\n    private _tempNavigationDate: Date;\r\n    private _lblNavigation: Label;\r\n\r\n    constructor(element: HTMLElement, options?: CalendarOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new CalendarOptions();\r\n\r\n        if (options.selectedColor == null) options.selectedColor = \"#51B3E1\";\r\n        if (!options.selectedColor.startsWith(\"#\")) options.selectedColor = \"#\" + options.selectedColor;\r\n        if (options.todayLabel == null) options.todayLabel = true;\r\n        if (options.otherMonthDays == null) options.otherMonthDays = true;\r\n        if (options.dateSlotWidth == null) options.dateSlotWidth = 40;\r\n        if (options.depth == null) options.depth = DateDepthEnum.Day;\r\n        //#endregion\r\n\r\n        super(element, options, ControlTypeEnum.Calendar);\r\n        this.draw();\r\n\r\n        //#region Value\r\n        if (options.value != null)\r\n            this.value(options.value, false);\r\n        //#endregion\r\n    }\r\n\r\n    //#region Methods\r\n    private draw()\r\n    {\r\n        let options = this.getOptions();\r\n\r\n        //#region Value\r\n        let value = this.value();\r\n        if (value == null)\r\n            value = new Date();\r\n\r\n        this._tempNavigationDate = value;\r\n\r\n        const months = [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"];\r\n        let month = this._tempNavigationDate.getMonth();\r\n        let monthString = months[month];\r\n        let year = this._tempNavigationDate.getFullYear();\r\n        //#endregion\r\n\r\n        //#region Header\r\n        let divHeader = puma(\"<div class='vrDivPickerPopup_Header'></div>\").vrAppendToPuma(this.element())[0];\r\n        this._lblNavigation = createLabel(\r\n            {\r\n                text: monthString + \" \" + year,\r\n                noBr: true,\r\n                width: \"Calc(100% - 65px)\",\r\n                align: TextAlignEnum.Left,\r\n                class: \"vrDatePickerNavigationLabel\",\r\n                css: \"padding-left: 10px;\",\r\n                onClick: (e) =>\r\n                {\r\n                    switch (this._actualView)\r\n                    {\r\n                        case ActualViewEnum.Day: this.drawMonths(); break;\r\n                        case ActualViewEnum.Month: this.drawYears(); break;\r\n                        case ActualViewEnum.Year: this.drawDecades(); break;\r\n                    }\r\n                }\r\n            }, divHeader);\r\n\r\n        let prevButton = createButton(\r\n            {\r\n                icon: IconClassLight.CaretLeft,\r\n                css: \"border: none;\",\r\n                cssContainer: \"top: 2px;\",\r\n                width: 30,\r\n                onClick: (e) => \r\n                {\r\n                    switch (this._actualView)\r\n                    {\r\n                        case ActualViewEnum.Day:\r\n                            {\r\n                                this._tempNavigationDate = this._tempNavigationDate.vrAddMonths(-1);\r\n                                this.drawDays();\r\n                            }\r\n                            break;\r\n                        case ActualViewEnum.Month:\r\n                            {\r\n                                this._tempNavigationDate = this._tempNavigationDate.vrAddYears(-1);\r\n                                this.drawMonths();\r\n                            }\r\n                            break;\r\n                        case ActualViewEnum.Year:\r\n                            {\r\n                                this._tempNavigationDate = this._tempNavigationDate.vrAddYears(-10);\r\n                                this.drawYears();\r\n                            }\r\n                            break;\r\n                        case ActualViewEnum.Decade:\r\n                            {\r\n                                this._tempNavigationDate = this._tempNavigationDate.vrAddYears(-100);\r\n                                this.drawDecades();\r\n                            }\r\n                            break;\r\n                    }\r\n                }\r\n            }, divHeader);\r\n\r\n        let nextButton = createButton(\r\n            {\r\n                icon: IconClassLight.CaretRight,\r\n                css: \"border: none;\",\r\n                cssContainer: \"top: 2px;\",\r\n                width: 30,\r\n                onClick: (e) => \r\n                {\r\n                    switch (this._actualView)\r\n                    {\r\n                        case ActualViewEnum.Day:\r\n                            {\r\n                                this._tempNavigationDate = this._tempNavigationDate.vrAddMonths(1);\r\n                                this.drawDays();\r\n                            }\r\n                            break;\r\n                        case ActualViewEnum.Month:\r\n                            {\r\n                                this._tempNavigationDate = this._tempNavigationDate.vrAddYears(1);\r\n                                this.drawMonths();\r\n                            }\r\n                            break;\r\n                        case ActualViewEnum.Year:\r\n                            {\r\n                                this._tempNavigationDate = this._tempNavigationDate.vrAddYears(10);\r\n                                this.drawYears();\r\n                            }\r\n                            break;\r\n                        case ActualViewEnum.Decade:\r\n                            {\r\n                                this._tempNavigationDate = this._tempNavigationDate.vrAddYears(100);\r\n                                this.drawDecades();\r\n                            }\r\n                            break;\r\n                    }\r\n                }\r\n            }, divHeader);\r\n        //#endregion\r\n\r\n        //#region Days\r\n        puma(\"<table class='vrDatePickerPopup_table'></table>\").vrAppendToPuma(this.element())[0];\r\n        //#endregion\r\n\r\n        //#region Depth\r\n        switch (options.depth)\r\n        {\r\n            case DateDepthEnum.Day: this.drawDays(); break;\r\n            case DateDepthEnum.Month: this.drawMonths(); break;\r\n            case DateDepthEnum.Year: this.drawYears(); break;\r\n            default:\r\n                this.drawDays(); break;\r\n        }\r\n        //#endregion\r\n\r\n        //#region Today\r\n        let weekDaysLong = [\"Domenica\", \"Lunedì\", \"Martedì\", \"Mercoledì\", \"Giovedì\", \"Venerdì\", \"Sabato\"];\r\n        let today = new Date();\r\n        let todayDay = today.getDate();\r\n        let todayWeek = weekDaysLong[today.getDay()];\r\n        let todayMonth = today.getMonth();\r\n        let todayYear = today.getFullYear();\r\n\r\n        let divToday = puma(\"<div style='padding: 5px; border-top: solid 1px #CCC; margin-top: 5px; text-align: center;'></div>\").vrAppendToPuma(this.element())[0];\r\n        createLabel(\r\n            {\r\n                text: todayWeek + \" \" + todayDay + \" \" + months[todayMonth] + \" \" + todayYear,\r\n                colorSettings: { textColor: options.selectedColor },\r\n                css: \"text-decoration: underline;\",\r\n                visible: (options.todayLabel) ? true : false,\r\n                onClick: (e) =>\r\n                {\r\n                    this.value(new Date());\r\n                }\r\n            }, divToday);\r\n        //#endregion\r\n    }\r\n\r\n    private drawDays(): void\r\n    {\r\n        let options = this.getOptions();\r\n        this._actualView = ActualViewEnum.Day;\r\n        this._lblNavigation.enable();\r\n\r\n        let table = puma(this.element()).find(\".vrDatePickerPopup_table\")[0];\r\n        puma(table).empty();\r\n\r\n        //#region WeekDays\r\n        let weekDays = [\"LU\", \"MA\", \"ME\", \"GI\", \"VE\", \"SA\", \"DO\"];\r\n        let trWeekDays = puma(\"<tr class='vrPicker_tableWeekDays'></tr>\").vrAppendToPuma(table)[0];\r\n        for (let weekDay of weekDays)\r\n            puma(\"<td style='font-size: 14px; text-align: center; color: #7a7a7a;'>\" + weekDay + \"</td>\").vrAppendToPuma(trWeekDays);\r\n        //#endregion\r\n\r\n        let year = this._tempNavigationDate.getFullYear();\r\n        let month = this._tempNavigationDate.getMonth();\r\n\r\n        const months = [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"];\r\n        let monthString = months[month];\r\n        this._lblNavigation.value(monthString + \" \" + year);\r\n\r\n        let firstDayOfTheMonth = new Date(year, month, 1);\r\n        let lastDayOfTheMonth = new Date(year, month + 1, 0);\r\n        let offset = firstDayOfTheMonth.getDay();\r\n        if (offset == 0)\r\n            offset = 7;\r\n        offset -= 1;\r\n\r\n        //#region Today/Actual value\r\n        let today = new Date();\r\n        let todayMonth = today.getMonth();\r\n        let todayYear = today.getFullYear();\r\n        let todayDay = (todayMonth == month && todayYear == year) ? today.getDate() : null;\r\n\r\n        let actualValueDay = null;\r\n        let actualValue = this.value();\r\n\r\n        if (actualValue != null)\r\n        {\r\n            let actualValueMonth = actualValue.getMonth();\r\n            let actualValueYear = actualValue.getFullYear();\r\n            actualValueDay = (actualValueMonth == month && actualValueYear == year) ? actualValue.getDate() : null;\r\n        }\r\n        //#endregion\r\n\r\n        let prevMonthLastDay = Date.vrGetLastDayOfMonthByDate(new Date(year, month - 1, 1)).getDate() + 1 - offset;\r\n        let dayCount = 1;\r\n        let reachLimit = false;\r\n        for (let i = 0; i < 6; i++)\r\n        {\r\n            puma(table).vrAppendPuma(\"<tr class='vrDatePickerPopup_rowDays' row='\" + i + \"'></tr>\");\r\n            for (let j = 0; j < 7; j++)\r\n            {\r\n                if (offset == 0)\r\n                {\r\n                    //#region Day\r\n                    let css = \"\";\r\n                    if (actualValueDay != null && actualValueDay == dayCount && !reachLimit)\r\n                        css += \"background-color: \" + options.selectedColor + \"; color: #FFF; border: none;\";\r\n                    else if (todayDay != null && todayDay == dayCount && !reachLimit)\r\n                        css += \"border: solid 1px \" + options.selectedColor + \";\";\r\n                    else if (reachLimit)\r\n                    {\r\n                        css = \"color: #CCC; border: none;\";\r\n                        if (!options.otherMonthDays)\r\n                            css += \"display: none;\";\r\n                    }\r\n                    else\r\n                        css = \"box-shadow: 0 0px 2px rgba(0, 0, 0, .3); border: none;\"\r\n\r\n                    let td = puma(\"<td day='\" + dayCount + \"'></td>\").vrAppendToPuma(puma(table).find(\"tr[row='\" + i + \"']\"))[0];\r\n                    this.createTdDay(dayCount, year, month, td, css);\r\n                    //#endregion\r\n\r\n                    if (dayCount >= lastDayOfTheMonth.getDate())\r\n                    {\r\n                        month++;\r\n                        dayCount = 0;\r\n                        reachLimit = true;\r\n                    }\r\n                    dayCount++;\r\n                }\r\n                else\r\n                {\r\n                    let css = \"color: #CCC; border: none;\";\r\n                    if (!options.otherMonthDays)\r\n                        css += \"display: none;\";\r\n\r\n                    let td = puma(\"<td day='\" + prevMonthLastDay + \"'></td>\").vrAppendToPuma(puma(table).find(\"tr[row='\" + i + \"']\"))[0];\r\n                    this.createTdDay(prevMonthLastDay++, year, month - 1, td, css);\r\n                    offset--;\r\n                }\r\n            }\r\n        }\r\n\r\n        //#region On finished draw\r\n        if (options.onFinishedDraw != null)\r\n        {\r\n            let event = new CalendarFinishedDrawEvent();\r\n            event.sender = this;\r\n            options.onFinishedDraw(event);\r\n        }\r\n        //#endregion\r\n    }\r\n\r\n    private createTdDay(day: number, year: number, month: number, td: HTMLElement, css: string): void\r\n    {\r\n        let options = this.getOptions();\r\n        let enable = this.checkAvailability(year, month, day);\r\n\r\n        let button = createButton(\r\n            {\r\n                text: String(day),\r\n                width: options.dateSlotWidth,\r\n                css: css,\r\n                enable: enable,\r\n                onClick: (e) =>\r\n                {\r\n                    let dateToSelect = new Date(year, month, Number(button.text()), 0, 0, 0);\r\n                    this.value(dateToSelect);\r\n                }\r\n            }, td);\r\n\r\n        let date = new Date(year, month, day, 0, 0, 0);\r\n\r\n        //#region Disable date\r\n        if (options.onDisableDate != null)\r\n        {\r\n            let event = new CalendarDisableDateEvent();\r\n            event.sender = this;\r\n            event.day = date;\r\n\r\n            let disable = options.onDisableDate(event);\r\n            button.enabled(disable);\r\n        }\r\n        //#endregion\r\n\r\n        //#region On day draw\r\n        if (options.onDayDraw != null)\r\n        {\r\n            let event = new CalendarDayDrawEvent();\r\n            event.sender = this;\r\n            event.day = date;\r\n            options.onDayDraw(event);\r\n        }\r\n        //#endregion\r\n\r\n        //#region Disabled/Highlighted\r\n        if (options.disabledDates != null)\r\n        {\r\n            let millisecondDates = options.disabledDates.map(k => k.getTime());\r\n            if (millisecondDates.includes(date.getTime()))\r\n                button.disable();\r\n        }\r\n\r\n        if (options.highlightedDates != null)\r\n        {\r\n            let millisecondDates = options.highlightedDates.map(k => k.getTime());\r\n            if (millisecondDates.includes(date.getTime()))\r\n                button.element().style.cssText += \"background-color: \" + options.selectedColor + \"; color: #FFF; border: none; border-radius: 15px;\";\r\n        }\r\n        //#endregion\r\n    }\r\n\r\n    private checkAvailability(year: number, month?: number, day?: number)\r\n    {\r\n        let options = this.getOptions();\r\n        let enable = true;\r\n\r\n        if (options.availableFrom != null)\r\n        {\r\n            if (year < options.availableFrom.getFullYear())\r\n                enable = false;\r\n            else if (year == options.availableFrom.getFullYear() && month != null)\r\n            {\r\n                if (month < options.availableFrom.getMonth())\r\n                    enable = false;\r\n                else if (month == options.availableFrom.getMonth() && day != null\r\n                    && day < options.availableFrom.getDate())\r\n                    enable = false;\r\n            }\r\n        }\r\n\r\n        if (options.availableTo != null)\r\n        {\r\n            if (year > options.availableTo.getFullYear())\r\n                enable = false;\r\n            else if (year == options.availableTo.getFullYear() && month != null)\r\n            {\r\n                if (month > options.availableTo.getMonth())\r\n                    enable = false;\r\n                else if (month == options.availableTo.getMonth() && day != null\r\n                    && day > options.availableTo.getDate())\r\n                    enable = false;\r\n            }\r\n        }\r\n        return enable;\r\n    }\r\n\r\n    disabledDates(dates?: Date[])\r\n    {\r\n        let options = this.getOptions();\r\n        if (dates != null)\r\n            options.disabledDates = dates;\r\n\r\n        return options.disabledDates;\r\n    }\r\n\r\n    highlightedDates(dates?: Date[])\r\n    {\r\n        let options = this.getOptions();\r\n        if (dates != null)\r\n            options.highlightedDates = dates;\r\n\r\n        return options.highlightedDates;\r\n    }\r\n\r\n    private drawMonths()\r\n    {\r\n        this._actualView = ActualViewEnum.Month;\r\n        this._lblNavigation.enable();\r\n\r\n        let table = puma(this.element()).find(\".vrDatePickerPopup_table\")[0];\r\n        puma(table).empty();\r\n\r\n        this._lblNavigation.value(this._tempNavigationDate.getFullYear());\r\n        const months = [\"GEN\", \"FEB\", \"MAR\", \"APR\", \"MAG\", \"GIU\", \"LUG\", \"AGO\", \"SET\", \"OTT\", \"NOV\", \"DIC\"];\r\n\r\n        for (let i = 0; i < 3; i++)\r\n        {\r\n            puma(table).vrAppendPuma(\"<tr class='vrDatePickerPopup_rowMonths' row='\" + i + \"'></tr>\");\r\n            for (let j = 0; j < 4; j++)\r\n            {\r\n                let monthIndex = (i * 4 + j);\r\n                let td = puma(\"<td month='\" + monthIndex + \"'></td>\").vrAppendToPuma(puma(table).find(\"tr[row='\" + i + \"']\"))[0];\r\n                let monthAttribute = monthIndex;\r\n                let enable = this.checkAvailability(this._tempNavigationDate.getFullYear(), monthAttribute);\r\n\r\n                createButton(\r\n                    {\r\n                        text: \"<span style='color: #CCC;'>\" + (monthIndex + 1) + \"</span><br />\" + months[monthIndex],\r\n                        width: 55,\r\n                        height: 58,\r\n                        enable: enable,\r\n                        css: \"height: 100%; border: none;\" + ((this.value() != null && monthIndex == this.value()!.getMonth()) ? \"background-color: #e3f1fa;\" : \"\"),\r\n                        onClick: (e) =>\r\n                        {\r\n                            let newMonth = monthIndex;\r\n                            this._tempNavigationDate.setMonth(newMonth);\r\n\r\n                            if (this.depth() == DateDepthEnum.Month)\r\n                            {\r\n                                let dateToSelect = new Date(this._tempNavigationDate.getFullYear(), newMonth, 1);\r\n                                this.value(dateToSelect);\r\n                            }\r\n                            else\r\n                                this.drawDays();\r\n                        }\r\n                    }, td);\r\n            }\r\n        }\r\n    }\r\n\r\n    private drawYears()\r\n    {\r\n        this._actualView = ActualViewEnum.Year;\r\n        this._lblNavigation.enable();\r\n\r\n        let table = puma(this.element()).find(\".vrDatePickerPopup_table\")[0];\r\n        puma(table).empty();\r\n\r\n        let year = this._tempNavigationDate.getFullYear();\r\n        let year2digitsFirst = Number(year.toString().substring(0, 2));\r\n        let year2digitsLast = Number(year.toString().substr(-2));\r\n        let lastYear2Digits = Math.ceil((year2digitsLast + 1) / 10) * 10; // Nearest multiple of 10\r\n\r\n        let firstYear = (year2digitsFirst * 100) + lastYear2Digits - 10 - 1;\r\n        let lastYear = (year2digitsFirst * 100) + lastYear2Digits;\r\n        this._lblNavigation.value((firstYear + 1) + \"-\" + (lastYear - 1));\r\n\r\n        let tdYear = firstYear;\r\n        for (let i = 0; i < 3; i++)\r\n        {\r\n            puma(table).vrAppendPuma(\"<tr class='vrDatePickerPopup_rowMonths' row='\" + i + \"'></tr>\");\r\n            for (let j = 0; j < 4; j++)\r\n            {\r\n                let td = puma(\"<td year='\" + tdYear + \"'></td>\").vrAppendToPuma(puma(table).find(\"tr[row='\" + i + \"']\"))[0];\r\n                let yearAttribute = Number(puma(td).attr(\"year\"));\r\n                let enable = this.checkAvailability(yearAttribute);\r\n\r\n                createButton(\r\n                    {\r\n                        text: String(tdYear),\r\n                        width: 55,\r\n                        height: 58,\r\n                        enable: enable,\r\n                        css: \"height: 100%; border: none;\" + ((this.value() != null && tdYear == this.value()!.getFullYear()) ? \"background-color: #e3f1fa;\" : \"\") + ((yearAttribute == firstYear || yearAttribute == lastYear) ? \"color: #CCC;\" : \"\"),\r\n                        onClick: (e) =>\r\n                        {\r\n                            let newYear = Number(puma(td).attr(\"year\"));\r\n                            this._tempNavigationDate.setFullYear(newYear);\r\n\r\n                            if (this.depth() == DateDepthEnum.Year)\r\n                            {\r\n                                let dateToSelect = new Date(newYear, 0, 1);\r\n                                this.value(dateToSelect);\r\n                            }\r\n                            else\r\n                                this.drawMonths();\r\n                        }\r\n                    }, td);\r\n                tdYear++;\r\n            }\r\n        }\r\n    }\r\n\r\n    private drawDecades()\r\n    {\r\n        this._actualView = ActualViewEnum.Decade;\r\n        this._lblNavigation.disable();\r\n\r\n        let table = puma(this.element()).find(\".vrDatePickerPopup_table\")[0];\r\n        puma(table).empty();\r\n\r\n        let year = this._tempNavigationDate.getFullYear();\r\n        let year2digitsFirst = Number(year.toString().substring(0, 2));\r\n        let year2digitsLast = Number(year.toString().substr(-2));\r\n\r\n        let firstYear = year2digitsFirst * 100;\r\n        let lastYear = year2digitsFirst * 100 + 99;\r\n        let firstYearCycle = year2digitsFirst * 100 - 10;\r\n        let lastYearCycle = year2digitsFirst * 100 + 109;\r\n        this._lblNavigation.value(firstYear + \"-\" + lastYear);\r\n\r\n        let tdDecade = firstYearCycle;\r\n        for (let i = 0; i < 3; i++)\r\n        {\r\n            puma(table).vrAppendPuma(\"<tr class='vrDatePickerPopup_rowMonths' row='\" + i + \"'></tr>\");\r\n            for (let j = 0; j < 4; j++)\r\n            {\r\n                let td = puma(\"<td decade='\" + tdDecade + \"'></td>\").vrAppendToPuma(puma(table).find(\"tr[row='\" + i + \"']\"))[0];\r\n                let yearAttribute = Number(puma(td).attr(\"decade\"));\r\n                createButton(\r\n                    {\r\n                        text: tdDecade + \"<br />\" + (tdDecade + 9),\r\n                        width: 55,\r\n                        height: 58,\r\n                        css: \"height: 100%; border: none;\" + ((this.value() != null && this.value()!.getFullYear() >= tdDecade && this.value()!.getFullYear() <= (tdDecade + 9)) ? \"background-color: #e3f1fa;\" : \"\") + ((yearAttribute == firstYearCycle || yearAttribute == (lastYearCycle - 9)) ? \"color: #CCC;\" : \"\"),\r\n                        onClick: (e) =>\r\n                        {\r\n                            let year = Number(puma(td).attr(\"decade\"));\r\n                            this._tempNavigationDate.setFullYear(year);\r\n                            this.drawYears();\r\n                        }\r\n                    }, td);\r\n                tdDecade += 10;\r\n            }\r\n        }\r\n    }\r\n\r\n    getOptions()\r\n    {\r\n        return this.options<CalendarOptions>();\r\n    }\r\n\r\n    depth()\r\n    {\r\n        return this.getOptions().depth!;\r\n    }\r\n\r\n    value(date?: Date | null, triggerChange: boolean = true): Date | null\r\n    {\r\n        let options = this.getOptions();\r\n        if (date === null)\r\n        {\r\n            this.clear();\r\n            return null;\r\n        }\r\n\r\n        if (date != null)\r\n        {\r\n            if (typeof (date) == \"string\")\r\n                date = Date.vrFixDateString(date);\r\n\r\n            if (date == null)\r\n                throw Error(\"Formato data non valido!\");\r\n\r\n            if (triggerChange)\r\n            {\r\n                let changingEvent = new CalendarChangingEvent();\r\n                if (options.onBeforeChange != null)\r\n                {\r\n                    changingEvent.sender = this;\r\n                    changingEvent.value = date;\r\n                    changingEvent.previousValue = this._value;\r\n                    options.onBeforeChange(changingEvent);\r\n                }\r\n\r\n                if (!changingEvent.isDefaultPrevented())\r\n                {\r\n                    this._value = date;\r\n                    this.change();\r\n                }\r\n            }\r\n            else\r\n                this._value = date;\r\n\r\n            this._tempNavigationDate = date;\r\n\r\n            //#region Set value\r\n            const months = [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"];\r\n            let year = date.getFullYear();\r\n            let month = date.getMonth();\r\n\r\n            switch (options.depth)\r\n            {\r\n                case DateDepthEnum.Day: this.drawDays(); break;\r\n                case DateDepthEnum.Month: this.drawMonths(); break;\r\n                case DateDepthEnum.Year: this.drawYears(); break;\r\n                default:\r\n                    this.drawDays(); break;\r\n            }\r\n\r\n            let monthString = months[month];\r\n            this._lblNavigation.value(monthString + \" \" + year);\r\n            //#endregion\r\n        }\r\n        return this._value;\r\n    }\r\n\r\n    clear(triggerChange = false): void\r\n    {\r\n        this._value = null;\r\n\r\n        if (triggerChange)\r\n            this.change();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Events\r\n    change(): void\r\n    {\r\n        let changeCallBack = this.getOptions().onAfterChange;\r\n        if (changeCallBack != null)\r\n        {\r\n            let changeEvent = new CalendarChangeEvent();\r\n            changeEvent.sender = this;\r\n            changeEvent.value = this.value();\r\n            changeCallBack(changeEvent);\r\n        }\r\n    }\r\n    //#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass CalendarEvent extends VrControlsEvent\r\n{\r\n    sender: Calendar;\r\n    value: Date | null;\r\n}\r\n\r\nclass CalendarChangeEvent extends CalendarEvent\r\n{\r\n\r\n}\r\n\r\nclass CalendarChangingEvent extends CalendarEvent\r\n{\r\n    previousValue?: Date | null;\r\n}\r\n\r\nclass CalendarDayDrawEvent extends VrControlsEvent\r\n{\r\n    sender: Calendar;\r\n    day: Date;\r\n    element: HTMLElement;\r\n}\r\n\r\nclass CalendarFinishedDrawEvent extends VrControlsEvent\r\n{\r\n    sender: Calendar;\r\n}\r\n\r\nclass CalendarDisableDateEvent extends VrControlsEvent\r\n{\r\n    sender: Calendar;\r\n    day: Date;\r\n}\r\n//#endregion","import { ControlTypeEnum, puma, RatingPrecisionEnum, vrEditorItemEnum, createLabel } from \"../vr\";\r\nimport { VrControlOptions, VrControl } from \"../common\";\r\nimport { UtilityManager } from \"../../../src/managers/utilityManager\";\r\nimport { Label } from \"./label\";\r\n\r\n//#region Options\r\nexport class RatingOptions extends VrControlOptions\r\n{\r\n    value?: number;\r\n    max?: number;\r\n    size?: string | number;\r\n    precision?: RatingPrecisionEnum;\r\n    tooltip?: boolean;\r\n    colorSettings?: RatingColorSettings;\r\n    total?: number;\r\n\r\n    onSelect?: (e: RatingSelectEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Rating extends VrControl\r\n{\r\n    private _value?: number | null;\r\n    private _lblTotal: Label;\r\n\r\n    constructor(element: HTMLElement, options?: RatingOptions | null)\r\n    {\r\n        //#region Options\r\n        if (options == null)\r\n            options = new RatingOptions();\r\n\r\n        if (options.max == null) options.max = 5;\r\n        if (options.size == null) options.size = 20;\r\n        if (options.precision == null) options.precision = RatingPrecisionEnum.Full;\r\n        if (options.tooltip == null) options.tooltip = false;\r\n        if (options.enable == null) options.enable = true;\r\n\r\n        if (options.colorSettings == null)\r\n            options.colorSettings = new RatingColorSettings();\r\n\r\n        if (options.colorSettings.selected == null) options.colorSettings.selected = \"#FFD700\";\r\n        if (options.colorSettings.hover == null) options.colorSettings.hover = \"#FFED85\";\r\n        if (options.colorSettings.notSelected == null) options.colorSettings.notSelected = \"#DDD\";\r\n        //#endregion\r\n\r\n        super(element, options, ControlTypeEnum.Rating);\r\n\r\n        //#region Color \r\n        this.color(options.colorSettings);\r\n        //#endregion\r\n\r\n        //#region Stars\r\n        let radioName = this.element().id + \"vrRating\";\r\n        for (let i = options.max; i > 0; i--)\r\n        {\r\n            let radioFullId = this.element().id + \"_star\" + i;\r\n            let titleFull = (options.tooltip) ? \"title='\" + i + \"'\" : \"\";\r\n\r\n            let radioFull = puma(`<input id='` + radioFullId + `' type='radio' name='` + radioName + `' value='` + i + `' />`\r\n                + `<label class='vrRatingFull' for='` + radioFullId + `' ` + titleFull + `></label>`).vrAppendToPuma(this.element());\r\n\r\n            if (options.precision == RatingPrecisionEnum.Half)\r\n            {\r\n                let radioHalfId = this.element().id + \"_star\" + (i - 0.5);\r\n                let titleHalf = (options.tooltip) ? \"title='\" + i + \"'\" : \"\";\r\n                let radioHalf = puma(`<input id='` + radioHalfId + `' type='radio' name='` + radioName + `' value='` + (i - 0.5) + `' />`\r\n                    + `<label class='vrRatingHalf' for='` + radioHalfId + `' ` + titleHalf + `></label>`).vrAppendToPuma(this.element());\r\n            }\r\n        }\r\n        //#endregion\r\n\r\n        //#region Total\r\n        this._lblTotal = createLabel(\r\n            {\r\n                cssContainer: \"margin-left: 5px; margin-top: -6px;\"\r\n            }, this.container());\r\n\r\n        if (options.total != null)\r\n            this.total(options.total);\r\n        //#endregion\r\n\r\n        //#region Size\r\n        this.size(options.size);\r\n        //#endregion\r\n\r\n        //#region Enable/Disable\r\n        if (options.enable) this.enable();\r\n        else this.disable();\r\n        //#endregion\r\n\r\n        //#region Select\r\n        puma(this.element()).find(\"input\").click((e: any) =>\r\n        {\r\n            let currentValue = e.currentTarget.value;\r\n            if (options!.onSelect != null)\r\n            {\r\n                let selectEvent = new RatingSelectEvent();\r\n                selectEvent.sender = this;\r\n                selectEvent.oldValue = this._value;\r\n                selectEvent.value = currentValue;\r\n                options!.onSelect(selectEvent);\r\n            }\r\n            this._value = currentValue;\r\n        });\r\n        //#endregion\r\n\r\n        if (options.value != null)\r\n            this.value(options.value);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Methods\r\n    value(value?: number, triggerChange = true)\r\n    {\r\n        if (value != null)\r\n        {\r\n            let realValue = 0;\r\n            let decimalPart = value % 1;\r\n            let integerPart = Math.trunc(value);\r\n            if (decimalPart == 0 || (decimalPart > integerPart && decimalPart < 0.2))\r\n                realValue = integerPart;\r\n            else if (decimalPart > 0.2 && decimalPart < 0.7)\r\n                realValue = integerPart + 0.5;\r\n            else if (decimalPart > 0.7)\r\n                realValue = integerPart + 1;\r\n\r\n            puma(this.element()).find(\"input[value='\" + realValue + \"']\").attr(\"checked\", true);\r\n            this._value = realValue;\r\n        }\r\n\r\n        let checkedInput = puma(this.element()).find(\"input:checked\")[0];\r\n        return (checkedInput != null) ? checkedInput.value : null;\r\n    }\r\n\r\n    color(colorSettings?: RatingColorSettings)\r\n    {\r\n        let options = this.getOptions();\r\n        if (colorSettings != null)\r\n        {\r\n            if (colorSettings.hover != null) options.colorSettings!.hover = colorSettings.hover;\r\n            if (colorSettings.selected != null) options.colorSettings!.selected = colorSettings.selected;\r\n            if (colorSettings.notSelected != null) options.colorSettings!.notSelected = colorSettings.notSelected;\r\n\r\n            UtilityManager.addCssStyle(\r\n                `.vrRating>label {\r\n                    color: ` + options.colorSettings!.notSelected + `;\r\n                    float: right;\r\n                    cursor: pointer;\r\n                }\r\n\r\n                .vrRating>input:checked~label, .vrRating.hover:not(:checked)>label:hover, .vrRating.hover:not(:checked)>label:hover~label {\r\n                    color: ` + options.colorSettings!.selected + `;\r\n                }\r\n\r\n                .vrRating.hover>input:checked+label:hover, .vrRating.hover>input:checked~label:hover, .vrRating.hover>label:hover~input:checked~label, .vrRating.hover>input:checked~label:hover~label {\r\n                    color: ` + options.colorSettings!.hover + `;\r\n                }`\r\n            );\r\n        }\r\n        return options.colorSettings;\r\n    }\r\n\r\n    size(size?: string | number)\r\n    {\r\n        if (size != null)\r\n        {\r\n            if (typeof (size) == \"number\")\r\n                size = size + \"px\";\r\n\r\n            UtilityManager.addCssStyle(\r\n                `.vrRating>label:before {\r\n                    font-size: ` + size + `;\r\n                }`\r\n            );\r\n        }\r\n\r\n        let firstInput = puma(this.element()).find(\"input\")[0];\r\n        if (firstInput != null)\r\n        {\r\n            let firstInputId = firstInput.id;\r\n            let fistLabel = puma(this.element()).find(\"label[for='\" + firstInputId + \"']\")[0];\r\n            return window.getComputedStyle(fistLabel, ':before').fontSize.vrGetNumericPart();\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    total(total?: number)\r\n    {\r\n        if (total != null)\r\n            this._lblTotal.value(\"(\" + total + \")\");\r\n\r\n        return this._lblTotal.value().vrGetNumericPart();\r\n    }\r\n\r\n    enable()\r\n    {\r\n        super.enable();\r\n        puma(this.element()).addClass(\"hover\");\r\n        puma(this.element()).find(\"input\").removeAttr(\"disabled\");\r\n    }\r\n\r\n    disable()\r\n    {\r\n        super.disable();\r\n        puma(this.element()).removeClass(\"hover\");\r\n        puma(this.element()).find(\"input\").attr(\"disabled\", true);\r\n    }\r\n\r\n    getOptions()\r\n    {\r\n        return this.options<RatingOptions>();\r\n    }\r\n    //#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass RatingSelectEvent\r\n{\r\n    sender: Rating;\r\n    value: number;\r\n    oldValue?: number | null;\r\n}\r\n\r\nclass RatingColorSettings\r\n{\r\n    selected?: string;\r\n    hover?: string;\r\n    notSelected?: string;\r\n}\r\n//#endregion","import { ControlManager } from \"../../../src/managers/controlManager\";\r\nimport { VrControlOptions, VrControl } from \"../common\";\r\nimport { ControlTypeEnum, createButton, createCheckBox, div, IconClassLight, IconClass, puma } from \"../vr\";\r\nimport { Button, ButtonOptions } from \"./button\";\r\nimport { CheckBox } from \"./checkbox\";\r\n\r\n//#region Options\r\nexport class GroupBoxOptions extends VrControlOptions\r\n{\r\n\ttitle?: string;\r\n\tcontent?: string | HTMLElement | JQuery;\r\n\tcollapsable?: boolean;\r\n\tcheckbox?: boolean | string;\r\n\tstartingCollapsed?: boolean;\r\n\tstartingChecked?: boolean;\r\n\titems?: GroupBoxItem[];\r\n\tscrollable?: boolean;\r\n\r\n\tonCheckboxClick?: (e: GroupBoxOnCheckboxClickEvent) => void;\r\n\tonCollapse?: (e: GroupBoxOnCollapseEvent) => void;\r\n\tonExpand?: (e: GroupBoxOnExpandEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class GroupBox extends VrControl\r\n{\r\n\tprivate _contentContainer: HTMLElement;\r\n\tprivate _btnCollapse: Button;\r\n\tprivate _chkCheckbox: CheckBox;\r\n\r\n\tconstructor(element: HTMLElement, options?: GroupBoxOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new GroupBoxOptions();\r\n\r\n\t\tif (options.width == null) options.width = \"100%\";\r\n\t\tif (options.title == null) options.title = \"\";\r\n\t\tif (options.collapsable == null) options.collapsable = false;\r\n\t\tif (options.startingCollapsed == null) options.startingCollapsed = false;\r\n\t\tif (options.startingCollapsed === true) options.collapsable = true;\r\n\t\tif (options.checkbox == null) options.checkbox = false;\r\n\t\tif (options.startingChecked == null) options.startingChecked = false;\r\n\t\tif (options.startingChecked === true && typeof (options.checkbox) != \"string\") options.checkbox = true;\r\n\t\tif (options.scrollable == null) options.scrollable = false;\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.GroupBox);\r\n\t\tlet htmlContent = puma(this.element()).html();\r\n\t\tpuma(this.element()).empty();\r\n\r\n\t\tlet h1 = puma(\"<h1 class='vrGroupBoxH1'></h1>\").vrAppendToPuma(this.element());\r\n\r\n\t\t//#region Collapse/Expand\r\n\t\tif (options.collapsable)\r\n\t\t{\r\n\t\t\tthis._btnCollapse = createButton({\r\n\t\t\t\ticon: IconClassLight.CaretUp,\r\n\t\t\t\tcssContainer: \"float: left; margin-top: -2px;\",\r\n\t\t\t\tcss: \"border: none; background: none;\",\r\n\t\t\t\tonClick: (e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (this.collapsed())\r\n\t\t\t\t\t\tthis.expand();\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthis.collapse();\r\n\t\t\t\t}\r\n\t\t\t}, h1);\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Checkbox\r\n\t\tif (options.checkbox !== false)\r\n\t\t{\r\n\t\t\tthis._chkCheckbox = createCheckBox({\r\n\t\t\t\tchecked: options.startingChecked,\r\n\t\t\t\tcssContainer: \"float: left; margin-top: -1px;\",\r\n\t\t\t\tonCheck: (e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (options!.onCheckboxClick != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet checkboxClickEvent = new GroupBoxOnCheckboxClickEvent();\r\n\t\t\t\t\t\tcheckboxClickEvent.checked = e.checked;\r\n\t\t\t\t\t\tcheckboxClickEvent.sender = this;\r\n\t\t\t\t\t\toptions!.onCheckboxClick(checkboxClickEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, h1);\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Title\r\n\t\tpuma(\"<span class='vrGroupBoxTitle'>\" + options.title + \"</span>\").vrAppendToPuma(h1);\r\n\t\t//#endregion\r\n\r\n\t\t//#region Items\r\n\t\tif (options.items != null)\r\n\t\t{\r\n\t\t\tlet divItems = div(h1, { class: \"vrGroupBoxDivItems\" });\r\n\t\t\tfor (let item of options.items)\r\n\t\t\t{\r\n\t\t\t\tif (item.cssContainer != null) item.cssContainer = \"\";\r\n\t\t\t\titem.cssContainer += \"; margin-left: 5px;\";\r\n\t\t\t\tcreateButton(item, divItems);\r\n\t\t\t}\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Content\r\n\t\tthis._contentContainer = div(this.element(), { class: \"vrGroupBoxContentContainer\" });\r\n\t\tif (options.scrollable)\r\n\t\t\tthis._contentContainer.style.cssText += \"max-height: 100%; overflow-y: auto;\";\r\n\r\n\t\tthis.content((htmlContent != null && htmlContent != \"\") ? htmlContent : options.content);\r\n\t\t//#endregion\r\n\r\n\t\tif (options.startingCollapsed)\r\n\t\t\tthis.collapse();\r\n\t}\r\n\r\n\t//#region Content/Title\r\n\tcontent(content?: string | JQuery | HTMLElement)\r\n\t{\r\n\t\tif (content != null)\r\n\t\t{\r\n\t\t\tpuma(this._contentContainer).empty();\r\n\t\t\tpuma(this._contentContainer).append((typeof (content) == \"string\") ? content : puma(content));\r\n\t\t}\r\n\t\treturn this._contentContainer;\r\n\t}\r\n\r\n\ttitle(title?: string)\r\n\t{\r\n\t\tif (title != null)\r\n\t\t\tpuma(this.element()).find(\".vrGroupBoxTitle\").html(title);\r\n\r\n\t\treturn puma(this.element()).find(\".vrGroupBoxTitle\").html();\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Expand/Collapse\r\n\tcollapse()\r\n\t{\r\n\t\tthis._btnCollapse.tag(\"collapsed\");\r\n\t\tpuma(this._contentContainer).hide();\r\n\t\tthis._btnCollapse.icon(IconClassLight.CaretDown);\r\n\r\n\t\tlet options = this.getOptions();\r\n\t\tif (options.onCollapse != null) \r\n\t\t{\r\n\t\t\tlet GroupBoxOnExpandEvent = new GroupBoxOnCollapseEvent();\r\n\t\t\tGroupBoxOnExpandEvent.sender = this;\r\n\t\t\toptions.onCollapse(GroupBoxOnExpandEvent);\r\n\t\t}\r\n\t}\r\n\r\n\texpand()\r\n\t{\r\n\t\tthis._btnCollapse.tag(\"\");\r\n\t\tpuma(this._contentContainer).show();\r\n\t\tthis._btnCollapse.icon(IconClassLight.CaretUp);\r\n\r\n\t\tlet options = this.getOptions();\r\n\t\tif (options.onExpand != null) \r\n\t\t{\r\n\t\t\tlet expandEvent = new GroupBoxOnExpandEvent();\r\n\t\t\texpandEvent.sender = this;\r\n\t\t\toptions.onExpand(expandEvent);\r\n\t\t}\r\n\t}\r\n\r\n\tcollapsed(state?: boolean)\r\n\t{\r\n\t\tif (state != null)\r\n\t\t{\r\n\t\t\tif (state) this.collapse();\r\n\t\t\telse this.expand();\r\n\t\t}\r\n\t\treturn this._btnCollapse.tag() == \"collapsed\";\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Items\r\n\titem(value: string): Button | null\r\n\t{\r\n\t\tlet element = puma(this.element()).find(\".vrGroupBoxDivItems button[value='\" + value + \"']\")[0];\r\n\t\tif (element != null)\r\n\t\t{\r\n\t\t\treturn ControlManager.get<Button>(puma(element).attr(\"id\"));\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tenableItem(value: string)\r\n\t{\r\n\t\tlet item = this.item(value);\r\n\t\tif (item != null)\r\n\t\t\titem.enable();\r\n\t}\r\n\r\n\tdisableItem(value: string)\r\n\t{\r\n\t\tlet item = this.item(value);\r\n\t\tif (item != null)\r\n\t\t\titem.disable();\r\n\t}\r\n\r\n\tshowItem(value: string)\r\n\t{\r\n\t\tlet item = this.item(value);\r\n\t\tif (item != null)\r\n\t\t\titem.show();\r\n\t}\r\n\r\n\thideItem(value: string)\r\n\t{\r\n\t\tlet item = this.item(value);\r\n\t\tif (item != null)\r\n\t\t\titem.hide();\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Checkbox\r\n\tcheck(triggerChange = true)\r\n\t{\r\n\t\tthis._chkCheckbox.checked(true, triggerChange);\r\n\t}\r\n\r\n\tunCheck(triggerChange = true)\r\n\t{\r\n\t\tthis._chkCheckbox.checked(false, triggerChange);\r\n\t}\r\n\r\n\tchecked(state?: boolean, triggerChange = true)\r\n\t{\r\n\t\tif (state != null)\r\n\t\t{\r\n\t\t\tif (state) this.check(triggerChange);\r\n\t\t\telse this.unCheck(triggerChange);\r\n\t\t}\r\n\t\treturn this._chkCheckbox.checked();\r\n\t}\r\n\t//#endregion\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.options<GroupBoxOptions>();\r\n\t}\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass GroupBoxOnCheckboxClickEvent\r\n{\r\n\tsender: GroupBox;\r\n\tchecked: boolean;\r\n}\r\n\r\nclass GroupBoxOnCollapseEvent\r\n{\r\n\tsender: GroupBox;\r\n}\r\n\r\nclass GroupBoxOnExpandEvent\r\n{\r\n\tsender: GroupBox;\r\n}\r\n\r\nclass GroupBoxItem extends ButtonOptions\r\n{\r\n\r\n}\r\n//#endregion","import { ControlTypeEnum, createWindow, puma, IconClassLight, IconClass, div, createButton, span, createTextBox, createLabel, TextModeEnum, PdfViewerToolbarAreaEnum, PdfViewerToolbarSettings, ToolbarItemOnClickEvent, PdfViewerToolbarItem, notify, notifyError } from \"../vr\";\r\nimport { VrControlOptions, VrControl, AttributeSettings } from \"../common\";\r\nimport { PDFDocumentProxy } from \"types/pdfjs\";\r\nimport { Window, WindowOpenEvent } from \"../controls/window\";\r\nimport { LoaderManager } from \"../../../src/managers/loaderManager\";\r\nimport { TextBox } from \"./textbox\";\r\nimport { Label } from \"./label\";\r\nimport { PrintManager } from \"../../../src/managers/printManager\";\r\nimport { UtilityManager } from \"../../../src/managers/utilityManager\";\r\nimport { DeviceManager } from \"../../../src/managers/deviceManager\";\r\n\r\ndeclare var pdfjsLib: any;\r\n\r\n//#region Options\r\nexport class PdfViewerOptions extends VrControlOptions\r\n{\r\n\tcontent?: string;\r\n\tbase64?: boolean;\r\n\tpopup?: boolean | PdfViewerWindowSettings;\r\n\tscale?: number;\r\n\ttextSelection?: boolean;\r\n\ttoolbar?: boolean | PdfViewerToolbarSettings;\r\n\tfileName?: string;\r\n\r\n\tonContentRendered?: (e: OnContentRenderedEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class PdfViewer extends VrControl\r\n{\r\n\tprivate _state: PdfState;\r\n\tprivate _window: Window;\r\n\tprivate _currentPage: number;\r\n\tprivate _pdfViewerCanvasContainer: HTMLElement;\r\n\tprivate _divToolbar: HTMLElement;\r\n\tprivate _txtCurrentPage: TextBox;\r\n\tprivate _lblPagesNumber: Label;\r\n\r\n\tconstructor(element: HTMLElement, options?: PdfViewerOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new PdfViewerOptions();\r\n\r\n\t\tif (options.base64 == null) options.base64 = false;\r\n\t\tif (options.scale == null) (DeviceManager.isMobile()) ? options.scale = 0.5 : options.scale = 1.3;\r\n\t\tif (options.textSelection == null) options.textSelection = true;\r\n\t\tif (options.fileName == null) options.fileName = \"Documento\";\r\n\t\tif (options.tabIndex == null) options.tabIndex = -1;\r\n\r\n\t\tif (options.popup == null) options.popup = false;\r\n\t\tif (options.popup !== false) \r\n\t\t{\r\n\t\t\tif (options.popup === true)\r\n\t\t\t\toptions.popup = new PdfViewerWindowSettings();\r\n\r\n\t\t\tif (options.popup.maximize == null) options.popup.maximize = false;\r\n\t\t\tif (options.popup.title == null) options.popup.title = \"Documento\";\r\n\t\t}\r\n\r\n\t\tif (options.toolbar == null) options.toolbar = true;\r\n\t\tif (options.toolbar !== false)\r\n\t\t{\r\n\t\t\tif (options.toolbar === true)\r\n\t\t\t\toptions.toolbar = new PdfViewerToolbarSettings();\r\n\r\n\t\t\tif (options.toolbar.navigation == null) options.toolbar.navigation = true;\r\n\t\t\tif (options.toolbar.print == null) options.toolbar.print = true;\r\n\t\t\tif (options.toolbar.zoom == null) options.toolbar.zoom = true;\r\n\t\t\tif (options.toolbar.download == null) options.toolbar.download = true;\r\n\t\t\tif (options.toolbar.items == null) options.toolbar.items = [];\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.PdfViewer);\r\n\t\tthis.container().style.cssText += \"display: flex;\";\r\n\t\tthis._state = new PdfState(1, options.scale);\r\n\r\n\t\t//#region Window\r\n\t\tif (options.popup !== false)\r\n\t\t{\r\n\t\t\tthis._window = createWindow({\r\n\t\t\t\taddToControlList: false,\r\n\t\t\t\ttitle: options.popup.title,\r\n\t\t\t\tfooter: false,\r\n\t\t\t\tcloseable: options.popup.closeable,\r\n\t\t\t\tclass: \"vrWindowPdfViewer\",\r\n\t\t\t\tclassContainer: this.element().id + \"_wndUtility\",\r\n\t\t\t\tonOpen: options.popup.onOpen\r\n\t\t\t});\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\tlet elementToAppend = (options.popup === false) ? this.element() : this._window.element();\r\n\t\tthis._divToolbar = div(elementToAppend, { class: \"vrPdfViewerDivToolbar\" });\r\n\t\tif (options.toolbar !== false)\r\n\t\t\tthis.createToolbar();\r\n\r\n\t\tthis._pdfViewerCanvasContainer = puma(\"<div class='vrPdfViewerCanvasContainer'></div>\").vrAppendToPuma(elementToAppend)[0];\r\n\t\tpuma(this._pdfViewerCanvasContainer).on(\"scroll\", (e: JQuery.ScrollEvent) =>\r\n\t\t{\r\n\t\t\t//#region Scroll\r\n\t\t\tlet canvasHeight = Number(puma(this.canvasContainer()).find(\"canvas\").attr(\"height\")) + 25;\r\n\t\t\tlet diff = Math.trunc(puma(this._pdfViewerCanvasContainer).scrollTop() / canvasHeight) + 1;\r\n\r\n\t\t\tif (this._txtCurrentPage != null)\r\n\t\t\t\tthis._txtCurrentPage.value(diff, false);\r\n\r\n\t\t\tthis._currentPage = diff;\r\n\t\t\t//#endregion\r\n\t\t});\r\n\r\n\t\tif (options.toolbar === false)\r\n\t\t{\r\n\t\t\tpuma(this._divToolbar).hide();\r\n\t\t\tpuma(this.canvasContainer()).css(\"height\", \"Calc(100% - 25px)\");\r\n\t\t}\r\n\t\telse\r\n\t\t\tpuma(this.canvasContainer()).css(\"height\", \"Calc(100% - 62px)\");\r\n\r\n\t\tthis.content(options.content);\r\n\t}\r\n\r\n\t//#region Toolbar\r\n\tprivate createToolbar()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\toptions.toolbar = (options.toolbar as PdfViewerToolbarSettings);\r\n\r\n\t\t//#region Navigations info\r\n\t\tlet spanLeftArea = span(this.toolbar(), { class: \"vrPdfViewer_toolbarLeftArea\" });\r\n\t\tif (options.toolbar.navigation)\r\n\t\t{\r\n\t\t\tcreateButton({\r\n\t\t\t\ticon: IconClassLight.Backward,\r\n\t\t\t\tcss: \"background: none; border: none;\",\r\n\t\t\t\tonClick: (e) => this._txtCurrentPage.value(1)\r\n\t\t\t}, spanLeftArea);\r\n\r\n\t\t\tcreateButton({\r\n\t\t\t\ticon: IconClassLight.CaretLeft,\r\n\t\t\t\tcss: \"background: none; border: none; margin-right: 5px; font-size: 20px; margin-top: 1px;\",\r\n\t\t\t\tonClick: (e) => this._txtCurrentPage.value(this._currentPage - 1)\r\n\t\t\t}, spanLeftArea);\r\n\r\n\t\t\tthis._txtCurrentPage = createTextBox({\r\n\t\t\t\tmode: TextModeEnum.Numeric,\r\n\t\t\t\tvalue: 1,\r\n\t\t\t\twidth: 38,\r\n\t\t\t\tonChanged: (e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tlet currentPage = Number(e.value);\r\n\t\t\t\t\tif (Number(e.value) > this._state.pdf.numPages)\r\n\t\t\t\t\t\tcurrentPage = this._state.pdf.numPages\r\n\r\n\t\t\t\t\tif (Number(e.value) < 1)\r\n\t\t\t\t\t\tcurrentPage = 1;\r\n\r\n\t\t\t\t\tthis._currentPage = currentPage;\r\n\t\t\t\t\tthis._txtCurrentPage.value(currentPage, false);\r\n\t\t\t\t\tlet canvasHeight = Number(puma(this.canvasContainer()).find(\"canvas\").attr(\"height\"));\r\n\t\t\t\t\tpuma(this.canvasContainer()).scrollTop((canvasHeight + 54) * (currentPage - 1));\r\n\t\t\t\t}\r\n\t\t\t}, spanLeftArea);\r\n\t\t\tthis._currentPage = 1;\r\n\r\n\t\t\tthis._lblPagesNumber = createLabel({\r\n\t\t\t\ttext: \"/ 3\",\r\n\t\t\t\tcssContainer: \"margin-left: 5px; margin-right: 10px; min-width: 20px;\"\r\n\t\t\t}, spanLeftArea);\r\n\r\n\t\t\tcreateButton({\r\n\t\t\t\ticon: IconClassLight.CaretRight,\r\n\t\t\t\tcss: \"background: none; border: none; font-size: 20px; margin-top: 1px;\",\r\n\t\t\t\tonClick: (e) => this._txtCurrentPage.value(this._currentPage + 1)\r\n\t\t\t}, spanLeftArea);\r\n\r\n\t\t\tcreateButton({\r\n\t\t\t\ticon: IconClassLight.Forward,\r\n\t\t\t\tcss: \"background: none; border: none;\",\r\n\t\t\t\tonClick: (e) => this._txtCurrentPage.value(this._state.pdf.numPages)\r\n\t\t\t}, spanLeftArea);\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Zoom\r\n\t\tlet spanCenterArea = span(this.toolbar(), { css: \"justify-content: center;\", class: \"vrPdfViewer_toolbarCenterArea\" });\r\n\t\tif (options.toolbar.zoom)\r\n\t\t{\r\n\t\t\tcreateButton({\r\n\t\t\t\ticon: IconClassLight.MagnifyingGlassMinus,\r\n\t\t\t\tcss: \"border: none; background: none; font-size: 16px;\",\r\n\t\t\t\tcssContainer: \"margin-right: 5px;\",\r\n\t\t\t\ttooltip: \"Togli zoom\",\r\n\t\t\t\tonClick: (e) => \r\n\t\t\t\t{\r\n\t\t\t\t\tthis._state.scale -= 0.2;\r\n\t\t\t\t\tthis.content();\r\n\t\t\t\t}\r\n\t\t\t}, spanCenterArea);\r\n\r\n\t\t\tcreateButton({\r\n\t\t\t\ticon: IconClassLight.MagnifyingGlassPlus,\r\n\t\t\t\tcss: \"border: none; background: none; font-size: 16px;\",\r\n\t\t\t\tcssContainer: \"margin-right: 5px;\",\r\n\t\t\t\ttooltip: \"Aumenta zoom\",\r\n\t\t\t\tonClick: (e) => \r\n\t\t\t\t{\r\n\t\t\t\t\tthis._state.scale += 0.2;\r\n\t\t\t\t\tthis.content();\r\n\t\t\t\t}\r\n\t\t\t}, spanCenterArea);\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Buttons\r\n\t\tlet spanRightArea = span(this.toolbar(), { css: \"justify-content: flex-end;\", class: \"vrPdfViewer_toolbarRightArea\" });\r\n\t\tif (options.toolbar.download)\r\n\t\t{\r\n\t\t\tcreateButton({\r\n\t\t\t\ticon: IconClassLight.Download,\r\n\t\t\t\tcss: \"border: none; background: none; font-size: 16px;\",\r\n\t\t\t\tcssContainer: \"margin-right: 5px;\",\r\n\t\t\t\ttooltip: \"Scarica\",\r\n\t\t\t\tonClick: (e) => this.download()\r\n\t\t\t}, spanRightArea);\r\n\t\t}\r\n\r\n\t\tif (options.toolbar.print)\r\n\t\t{\r\n\t\t\tcreateButton({\r\n\t\t\t\ticon: IconClassLight.Print,\r\n\t\t\t\tcss: \"border: none; background: none; font-size: 16px;\",\r\n\t\t\t\ttooltip: \"Stampa\",\r\n\t\t\t\tonClick: (e) => this.print()\r\n\t\t\t}, spanRightArea);\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\tthis.addToolbarItems(options.toolbar.items!);\r\n\t}\r\n\r\n\taddToolbarItems(toolbarItems: PdfViewerToolbarItem[])\r\n\t{\r\n\t\tfor (let toolbarItem of toolbarItems)\r\n\t\t{\r\n\t\t\tlet area = this.toolbarRightArea();\r\n\t\t\tswitch (toolbarItem.area)\r\n\t\t\t{\r\n\t\t\t\tcase PdfViewerToolbarAreaEnum.Left: area = this.toolbarLeftArea(); break;\r\n\t\t\t\tcase PdfViewerToolbarAreaEnum.Center: area = this.toolbarCenterArea(); break;\r\n\t\t\t\tcase PdfViewerToolbarAreaEnum.Right: area = this.toolbarRightArea(); break;\r\n\t\t\t}\r\n\r\n\t\t\tlet css = (toolbarItem.css != null) ? toolbarItem.css : \"\";\r\n\t\t\tlet attributes: AttributeSettings[] | undefined = (toolbarItem.value != null) ? [{ name: \"value\", value: toolbarItem.value }] : undefined;\r\n\t\t\tcreateButton({\r\n\t\t\t\ticon: toolbarItem.icon,\r\n\t\t\t\ttext: toolbarItem.text,\r\n\t\t\t\tattributes: attributes,\r\n\t\t\t\tcss: \"background: none; border: none;\" + css,\r\n\t\t\t\tcssContainer: toolbarItem.cssContainer,\r\n\t\t\t\tonClick: (e) => \r\n\t\t\t\t{\r\n\t\t\t\t\tif (toolbarItem.onClick != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet clickEvent = new ToolbarItemOnClickEvent();\r\n\t\t\t\t\t\tclickEvent.sender = this;\r\n\t\t\t\t\t\tclickEvent.text = toolbarItem.text;\r\n\t\t\t\t\t\tclickEvent.value = toolbarItem.value;\r\n\t\t\t\t\t\ttoolbarItem.onClick(clickEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, area);\r\n\t\t}\r\n\t}\r\n\r\n\ttoolbar()\r\n\t{\r\n\t\treturn this._divToolbar;\r\n\t}\r\n\r\n\ttoolbarLeftArea()\r\n\t{\r\n\t\treturn this.toolbarArea(PdfViewerToolbarAreaEnum.Left);\r\n\t}\r\n\r\n\ttoolbarCenterArea()\r\n\t{\r\n\t\treturn this.toolbarArea(PdfViewerToolbarAreaEnum.Center);\r\n\t}\r\n\r\n\ttoolbarRightArea()\r\n\t{\r\n\t\treturn this.toolbarArea(PdfViewerToolbarAreaEnum.Right);\r\n\t}\r\n\r\n\ttoolbarArea(area: PdfViewerToolbarAreaEnum)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tlet elementWhereSearch = (options.popup === false) ? this.container() : this._window.container();\r\n\r\n\t\tlet areaClass = \"\";\r\n\t\tswitch (area)\r\n\t\t{\r\n\t\t\tcase PdfViewerToolbarAreaEnum.Left: areaClass = \"vrPdfViewer_toolbarLeftArea\"; break;\r\n\t\t\tcase PdfViewerToolbarAreaEnum.Center: areaClass = \"vrPdfViewer_toolbarCenterArea\"; break;\r\n\t\t\tcase PdfViewerToolbarAreaEnum.Right: areaClass = \"vrPdfViewer_toolbarRightArea\"; break;\r\n\t\t}\r\n\t\treturn puma(elementWhereSearch).find(\".\" + areaClass)[0];\r\n\t}\r\n\t//#endregion\r\n\r\n\tcontent(content?: string)\r\n\t{\r\n\t\tlet promise = new Promise((callback?: Function) =>\r\n\t\t{\r\n\t\t\tpuma(this.canvasContainer()).empty();\r\n\t\t\tlet options = this.getOptions();\r\n\r\n\t\t\tif (content != null)\r\n\t\t\t{\r\n\t\t\t\tLoaderManager.show(this.element());\r\n\t\t\t\toptions.content = content;\r\n\r\n\t\t\t\t//#region Load document\r\n\t\t\t\tconst loadingTask = pdfjsLib.getDocument((!options.base64) ? content : { data: atob(content) });\r\n\t\t\t\tloadingTask.promise.then((pdf: PDFDocumentProxy) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._state.pdf = pdf;\r\n\t\t\t\t\tthis.internalRender();\r\n\t\t\t\t\tLoaderManager.hide();\r\n\r\n\t\t\t\t\tlet options = this.getOptions();\r\n\t\t\t\t\tif (options.onContentRendered != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet event = new OnContentRenderedEvent();\r\n\t\t\t\t\t\tevent.sender = this;\r\n\t\t\t\t\t\tevent.pdf = this._state.pdf;\r\n\t\t\t\t\t\toptions.onContentRendered(event);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (callback != null)\r\n\t\t\t\t\t\tcallback();\r\n\t\t\t\t},\r\n\t\t\t\t\t(error: any) => \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnotifyError(error);\r\n\t\t\t\t\t});\r\n\t\t\t\t//#endregion\r\n\t\t\t}\r\n\t\t\telse if (options.content != null)\r\n\t\t\t\tthis.internalRender();\r\n\t\t});\r\n\t\treturn promise;\r\n\t}\r\n\r\n\tprivate internalRender()\r\n\t{\r\n\t\tlet pagesNumber = this._state.pdf.numPages;\r\n\r\n\t\tif (this._lblPagesNumber != null)\r\n\t\t\tthis._lblPagesNumber.value(\"/ \" + pagesNumber);\r\n\r\n\t\tlet options = this.getOptions();\r\n\t\tfor (let i = 1; i <= pagesNumber; i++)\r\n\t\t{\r\n\t\t\tif (this._state.pdf == null)\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tthis._state.pdf.getPage(i).then((page) => \r\n\t\t\t{\r\n\t\t\t\t//#region Structure\r\n\t\t\t\tlet divCanvasTextContainer = div(this.canvasContainer(), { class: \"vrPdfViewer_divCanvasTextContainer\" });\r\n\t\t\t\tlet canvas = puma(\"<canvas style='border-top: solid 50px #e8e8e8;'></canvas>\").vrAppendToPuma(divCanvasTextContainer)[0] as HTMLCanvasElement;\r\n\t\t\t\tlet ctx = canvas.getContext('2d');\r\n\r\n\t\t\t\tlet divTextLayer: HTMLElement | null = null;\r\n\t\t\t\tif (options.textSelection)\r\n\t\t\t\t\tdivTextLayer = puma(\"<div class='vrPdfViewer_divTextLayer'></div>\").vrAppendToPuma(divCanvasTextContainer)[0];\r\n\t\t\t\t//#endregion\r\n\r\n\t\t\t\tlet viewport = page.getViewport({ scale: this._state.scale });\r\n\t\t\t\tcanvas.width = viewport.width;\r\n\t\t\t\tcanvas.height = viewport.height;\r\n\r\n\t\t\t\tif (DeviceManager.isMobile())\r\n\t\t\t\t{\r\n\t\t\t\t\tcanvas.width = (viewport.width > window.innerWidth) ? window.innerWidth : viewport.width;\r\n\t\t\t\t\tcanvas.height = (viewport.height > window.innerHeight) ? window.innerHeight : viewport.height;\r\n\r\n\t\t\t\t\t// this._state.scale = divCanvasTextContainer.clientWidth / (viewport.width * 1);\r\n\t\t\t\t\t// viewport = page.getViewport({ scale: this._state.scale });\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//#region Popup\r\n\t\t\t\tif (options.popup !== false)\r\n\t\t\t\t{\r\n\t\t\t\t\toptions.popup = (options.popup! as PdfViewerWindowSettings);\r\n\t\t\t\t\tif (options.popup.maximize)\r\n\t\t\t\t\t\tthis._window.maximize();\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet width = 957;\r\n\t\t\t\t\t\tif (options.popup.width != null)\r\n\t\t\t\t\t\t\twidth = options.popup.width;\r\n\r\n\t\t\t\t\t\tlet height = document.body.clientHeight - 60;\r\n\t\t\t\t\t\tif (options.popup.height != null)\r\n\t\t\t\t\t\t\theight = options.popup.height;\r\n\r\n\t\t\t\t\t\tthis._window.width(width);\r\n\t\t\t\t\t\tthis._window.element().style.cssText += \"height: \" + height + \"px;\";\r\n\t\t\t\t\t\tthis._window.container().style.cssText += \"height: \" + (height + 30) + \"px;\";\r\n\t\t\t\t\t\tthis._window.center();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\r\n\r\n\t\t\t\tpage.render({\r\n\t\t\t\t\tcanvasContext: ctx!,\r\n\t\t\t\t\tviewport: viewport\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//#region Text selection\r\n\t\t\t\tif (options.textSelection)\r\n\t\t\t\t{\r\n\t\t\t\t\tpage.getTextContent().then((textContent) =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpdfjsLib.renderTextLayer({\r\n\t\t\t\t\t\t\ttextContent: textContent,\r\n\t\t\t\t\t\t\tcontainer: divTextLayer,\r\n\t\t\t\t\t\t\tviewport: viewport\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\r\n\t\t\t}, (error: any) => notifyError(error));\r\n\t\t}\r\n\t}\r\n\r\n\tpage(page?: number)\r\n\t{\r\n\t\tif (page != null)\r\n\t\t\tthis._txtCurrentPage.value(page);\r\n\r\n\t\treturn this._currentPage;\r\n\t}\r\n\r\n\tfileName(name?: string)\r\n\t{\r\n\t\tif (name != null)\r\n\t\t\tthis.getOptions().fileName = name;\r\n\r\n\t\treturn this.getOptions().fileName;\r\n\t}\r\n\r\n\tdownload()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tthis.getData().then((base64bytes) => UtilityManager.downloadPdfBytes(base64bytes, options.fileName))\r\n\t}\r\n\r\n\tprint()\r\n\t{\r\n\t\tthis.getData().then((base64bytes) => PrintManager.printBytes(base64bytes))\r\n\t}\r\n\r\n\tasync getData(): Promise<string>\r\n\t{\r\n\t\tlet data = await this._state.pdf.getData();\r\n\t\tlet base64string = UtilityManager.bytesToBase64(data);\r\n\t\treturn base64string;\r\n\t}\r\n\r\n\t//#region Window\r\n\topen(content?: string)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (options.popup === false)\r\n\t\t\treturn;\r\n\r\n\t\tif (content != null)\r\n\t\t\tthis.content(content);\r\n\r\n\t\tthis._window.open();\r\n\t}\r\n\r\n\tclose()\r\n\t{\r\n\t\tthis._window.close();\r\n\t}\r\n\r\n\twindow()\r\n\t{\r\n\t\treturn this._window;\r\n\t}\r\n\r\n\twindowTitle(title: string)\r\n\t{\r\n\t\tthis._window.title(title);\r\n\t}\r\n\r\n\twindowCloseCallback(callback: Function)\r\n\t{\r\n\t\tif (this.window() != null)\r\n\t\t{\r\n\t\t\tthis.window().close\r\n\t\t}\r\n\t}\r\n\t//#endregion\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.options<PdfViewerOptions>();\r\n\t}\r\n\r\n\tprivate canvasContainer(): HTMLElement\r\n\t{\r\n\t\treturn this._pdfViewerCanvasContainer;\r\n\t}\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass PdfState\r\n{\r\n\tpdf: PDFDocumentProxy;\r\n\tcurrentPage: number;\r\n\tscale: number;\r\n\r\n\tconstructor(currentPage: number, scale: number)\r\n\t{\r\n\t\tthis.currentPage = currentPage;\r\n\t\tthis.scale = scale;\r\n\t}\r\n}\r\n\r\nclass PdfViewerWindowSettings\r\n{\r\n\tmaximize?: boolean;\r\n\twidth?: number;\r\n\theight?: number;\r\n\ttitle?: string;\r\n\tcloseable?: boolean;\r\n\tonOpen?(e: WindowOpenEvent): void;\r\n}\r\n\r\nclass OnContentRenderedEvent\r\n{\r\n\tsender: PdfViewer;\r\n\tpdf: any;\r\n\tbase64bytes: string;\r\n}\r\n\r\nclass OnWindowOpenEvent\r\n{\r\n\tsender: PdfViewer;\r\n}\r\n//#endregion","import { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { ControlTypeEnum, div, puma, confirm, createLabel, icon, IconClassLight, createButton, span, notify, NotifierTypeEnum, IconClassRegular, UploadValidationErrorTypeEnum } from \"../vr\";\r\n\r\n//#region Options\r\nexport class UploadOptions extends VrControlOptions\r\n{\r\n\tdropArea?: boolean | HTMLElement | string | JQuery;\r\n\tdropAreaText?: boolean | string;\r\n\twebApiSettings?: UploadWebApiSettings;\r\n\tmultiple?: boolean;\r\n\tprogressBar?: boolean;\r\n\tfileList?: boolean;\r\n\tfileListMaxHeight?: number;\r\n\tuploadButton?: boolean | string;\r\n\tautoUpload?: boolean;\r\n\tconfirmToRemoveFile?: boolean;\r\n\tcanRemoveFile?: boolean;\r\n\tvalidation?: UploadValidation;\r\n\tasync?: boolean;\r\n\r\n\tonProgress?: (e: UploadProgressEvent) => void;\r\n\tonError?: (e: UploadErrorEvent) => void;\r\n\tonValidationError?: (e: UploadValidationErrorEvent) => void;\r\n\tonSuccess?: (e: UploadSuccessEvent) => void;\r\n\tonDragEnter?: (e: UploadDragEnterEvent) => void;\r\n\tonDragOver?: (e: UploadDragOverEvent) => void;\r\n\tonDragLeave?: (e: UploadDragLeaveEvent) => void;\r\n\tonDrop?: (e: UploadDropEvent) => void;\r\n\tonAbort?: (e: UploadAbortEvent) => void;\r\n\tonStart?: (e: UploadStartEvent) => void;\r\n\tonRemove?: (e: UploadRemoveEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Upload extends VrControl\r\n{\r\n\tprivate _uploadProgress: number[];\r\n\tprivate _divProgressBar: HTMLProgressElement;\r\n\tprivate _divFileList: HTMLElement;\r\n\tprivate _divDropArea: HTMLElement | null;\r\n\tprivate _files: File[];\r\n\tprivate _inputFile: HTMLInputElement;\r\n\tprivate _dicFileXhr: Map<File, XMLHttpRequest>;\r\n\r\n\tconstructor(element: HTMLElement, options?: UploadOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new UploadOptions();\r\n\r\n\t\tif (options.width == null) options.width = \"100%\";\r\n\t\tif (options.webApiSettings == null) options.webApiSettings = new UploadWebApiSettings();\r\n\t\tif (options.multiple == null) options.multiple = false;\r\n\t\tif (options.fileList == null) options.fileList = true;\r\n\t\tif (options.fileListMaxHeight == null) options.fileListMaxHeight = 200;\r\n\t\tif (options.async == null) options.async = true;\r\n\r\n\t\tif (options.dropArea == null) options.dropArea = true;\r\n\t\tif (options.dropArea !== true && options.progressBar == null) options.progressBar = false;\r\n\t\tif (options.dropAreaText == null) options.dropAreaText = \"Trascina qui il file\";\r\n\t\tif (typeof (options.dropArea) == \"boolean\")\r\n\t\t{\r\n\t\t\tif (options.dropArea) options.dropAreaText = \"Trascina qui il file\";\r\n\t\t\telse options.dropAreaText = \"\";\r\n\t\t}\r\n\r\n\t\tif (options.progressBar == null) options.progressBar = true;\r\n\t\tif (options.uploadButton == null) options.uploadButton = true;\r\n\t\tif (options.uploadButton === true) options.uploadButton = \"Seleziona...\";\r\n\t\tif (options.autoUpload == null) options.autoUpload = true;\r\n\t\tif (options.confirmToRemoveFile == null) options.confirmToRemoveFile = false;\r\n\t\tif (options.canRemoveFile == null) options.canRemoveFile = true;\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.Upload);\r\n\t\tlet uploadContainer = null;\r\n\t\tthis._files = [];\r\n\t\tthis._dicFileXhr = new Map<File, XMLHttpRequest>();\r\n\r\n\t\t//#region Drop area\r\n\t\tthis._divDropArea = null;\r\n\t\tif (options.dropArea !== false)\r\n\t\t{\r\n\t\t\t//#region Drop area element\r\n\t\t\tif (typeof (options.dropArea) == \"boolean\" && options.dropArea)\r\n\t\t\t{\r\n\t\t\t\tthis._divDropArea = div(this.element(), { class: \"vrUploadDropArea\" });\r\n\t\t\t\tuploadContainer = this._divDropArea;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tuploadContainer = this.element();\r\n\t\t\t\tif (typeof (options.dropArea) == \"string\")\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!options.dropArea.startsWith(\"#\"))\r\n\t\t\t\t\t\toptions.dropArea = \"#\" + options.dropArea;\r\n\r\n\t\t\t\t\tthis._divDropArea = puma(options.dropArea)[0];\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tthis._divDropArea = puma(options.dropArea)[0];\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\t//#region Events\r\n\t\t\t[\"dragenter\", \"dragover\", \"dragleave\", \"drop\"].forEach(eventName =>\r\n\t\t\t{\r\n\t\t\t\tthis._divDropArea!.addEventListener(eventName, (e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t}, false);\r\n\t\t\t});\r\n\r\n\t\t\tpuma(this._divDropArea).on(\"dragenter\", (e: JQuery.DragEnterEvent) =>\r\n\t\t\t{\r\n\t\t\t\t//#region DragEnter event\r\n\t\t\t\tif (options!.onDragEnter != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet dragEnterEvent = new UploadDragEnterEvent();\r\n\t\t\t\t\tdragEnterEvent.sender = this;\r\n\t\t\t\t\tdragEnterEvent.element = e.currentTarget;\r\n\t\t\t\t\tdragEnterEvent.event = e;\r\n\t\t\t\t\toptions!.onDragEnter(dragEnterEvent);\r\n\r\n\t\t\t\t\tif (e.isDefaultPrevented())\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\r\n\r\n\t\t\t\tpuma(e.currentTarget).addClass(\"highlight\");\r\n\t\t\t});\r\n\r\n\t\t\tpuma(this._divDropArea).on(\"dragover\", (e: JQuery.DragOverEvent) =>\r\n\t\t\t{\r\n\t\t\t\t//#region DragEnter event\r\n\t\t\t\tif (options!.onDragOver != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet dragOverEvent = new UploadDragOverEvent();\r\n\t\t\t\t\tdragOverEvent.sender = this;\r\n\t\t\t\t\tdragOverEvent.element = e.currentTarget;\r\n\t\t\t\t\tdragOverEvent.event = e;\r\n\t\t\t\t\toptions!.onDragOver(dragOverEvent);\r\n\r\n\t\t\t\t\tif (e.isDefaultPrevented())\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\r\n\r\n\t\t\t\tpuma(e.currentTarget).addClass(\"highlight\");\r\n\t\t\t});\r\n\r\n\t\t\tpuma(this._divDropArea).on(\"dragleave\", (e: JQuery.DragLeaveEvent) =>\r\n\t\t\t{\r\n\t\t\t\t//#region DragEnter event\r\n\t\t\t\tif (options!.onDragLeave != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet dragLeaveEvent = new UploadDragLeaveEvent();\r\n\t\t\t\t\tdragLeaveEvent.sender = this;\r\n\t\t\t\t\tdragLeaveEvent.element = e.currentTarget;\r\n\t\t\t\t\tdragLeaveEvent.event = e;\r\n\t\t\t\t\toptions!.onDragLeave(dragLeaveEvent);\r\n\r\n\t\t\t\t\tif (e.isDefaultPrevented())\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\r\n\r\n\t\t\t\tpuma(e.currentTarget).removeClass(\"highlight\");\r\n\t\t\t});\r\n\r\n\t\t\tpuma(this._divDropArea).on(\"drop\", (e: JQuery.DropEvent) =>\r\n\t\t\t{\r\n\t\t\t\tlet dataTransfer = e.originalEvent!.dataTransfer!;\r\n\t\t\t\tlet files: File[] = [...dataTransfer.files as any];\r\n\r\n\t\t\t\t//#region Drop event\r\n\t\t\t\tif (options!.onDrop != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet dropEvent = new UploadDropEvent();\r\n\t\t\t\t\tdropEvent.sender = this;\r\n\t\t\t\t\tdropEvent.files = files;\r\n\t\t\t\t\tdropEvent.event = e;\r\n\t\t\t\t\toptions!.onDrop(dropEvent);\r\n\r\n\t\t\t\t\tif (e.isDefaultPrevented())\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\r\n\r\n\t\t\t\tpuma(e.currentTarget).removeClass(\"highlight\");\r\n\t\t\t\tthis.manageLoadingFiles(files);\r\n\t\t\t});\r\n\t\t\t//#endregion\r\n\t\t}\r\n\t\telse\r\n\t\t\tuploadContainer = this.element();\r\n\t\t//#endregion\r\n\r\n\t\t//#region Input\r\n\t\tlet multiple = \"\";\r\n\t\tif (options.multiple)\r\n\t\t\tmultiple = \"multiple\";\r\n\r\n\t\tlet labelInput = puma(\"<label for='\" + this.element().id + \"_vrUpload' class='vrUploadInput'><i class='\" + IconClassLight.CloudArrowUp + \" vrUploadBtnIcon'></i>\" + options.uploadButton + \"</label>\").vrAppendToPuma(uploadContainer);\r\n\t\tthis._inputFile = puma(\"<input \" + multiple + \" id='\" + this.element().id + \"_vrUpload' type='file' style='display: none;'/>\").vrAppendToPuma(uploadContainer)[0];\r\n\t\tif (!options.uploadButton)\r\n\t\t\tpuma(labelInput).hide();\r\n\r\n\t\tif (options.dropArea === true)\r\n\t\t{\r\n\t\t\tcreateLabel({\r\n\t\t\t\ttext: String(options.dropAreaText),\r\n\t\t\t\tcssContainer: \"margin-left: 5px;\",\r\n\t\t\t\tcss: \"text-align: left; font-style: italic; color: #a0a0a0;\"\r\n\t\t\t}, this._divDropArea);\r\n\t\t}\r\n\r\n\t\tpuma(this._inputFile).on(\"change\", (e: JQuery.ChangeEvent) =>\r\n\t\t{\r\n\t\t\tlet files: File[] = [...e.currentTarget.files as any];\r\n\t\t\tthis.manageLoadingFiles(files);\r\n\t\t});\r\n\t\t//#endregion\r\n\r\n\t\t//#region Progress bar\r\n\t\tthis._divProgressBar = puma(\"<progress class='vrUploadProgressBar' max=100 value=0></progress>\").vrAppendToPuma(this.element())[0];\r\n\t\tpuma(this._divProgressBar).hide();\r\n\t\t//#endregion\r\n\r\n\t\t//#region File list\r\n\t\tthis._divFileList = div(this.container(), { class: \"vrUploadDivFileList\", css: \"display: none; max-height: \" + options.fileListMaxHeight + \"px;\" });\r\n\t\t//#endregion\r\n\t}\r\n\r\n\t//#region Methods\r\n\r\n\t//#region Files management\r\n\tuploadFiles()\r\n\t{\r\n\t\tfor (let i = 0; i < this._files.length; i++)\r\n\t\t{\r\n\t\t\tlet file = this._files[i];\r\n\t\t\tthis.uploadFile(file, i, false);\r\n\t\t}\r\n\t}\r\n\r\n\taddFile(file: File)\r\n\t{\r\n\t\tthis.addFiles([file]);\r\n\t}\r\n\r\n\taddFiles(files: File[])\r\n\t{\r\n\t\tthis.manageLoadingFiles(files);\r\n\t}\r\n\r\n\tgetFiles()\r\n\t{\r\n\t\treturn this._files;\r\n\t}\r\n\r\n\tremoveFileAtIndex(index: number)\r\n\t{\r\n\t\tlet divFile = puma(this.divFileList()).find(\".vrUploadDivFile:nth-child(\" + (index + 1) + \")\")[0];\r\n\t\tpuma(divFile).remove();\r\n\t\tthis._dicFileXhr.delete(this._files[index]);\r\n\r\n\t\tthis._files.splice(index, 1);\r\n\t\tif (this._files.length == 0)\r\n\t\t\tthis.clear();\r\n\t}\r\n\r\n\tprivate manageLoadingFiles(files: File[])\r\n\t{\r\n\t\tif (!this.enabled())\r\n\t\t\treturn;\r\n\r\n\t\tlet options = this.getOptions();\r\n\t\tthis.initializeProgress(files.length);\r\n\r\n\t\t//#region On start\r\n\t\tif (options!.onStart != null)\r\n\t\t{\r\n\t\t\tlet startEvent = new UploadStartEvent();\r\n\t\t\tstartEvent.sender = this;\r\n\t\t\tstartEvent.files = files;\r\n\t\t\toptions!.onStart(startEvent);\r\n\r\n\t\t\tif (startEvent.isDefaultPrevented())\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\tif (options.fileList)\r\n\t\t{\r\n\t\t\tpuma(this.divFileList()).show();\r\n\r\n\t\t\tif (options.multiple == false)\r\n\t\t\t\tpuma(this.element()).hide();\r\n\t\t}\r\n\r\n\t\tlet filesAdded = [];\r\n\t\tfor (let i = 0; i < files.length; i++)\r\n\t\t{\r\n\t\t\tlet file = files[i];\r\n\r\n\t\t\t//#region Validation\r\n\t\t\tif (options.validation != null)\r\n\t\t\t{\r\n\t\t\t\tif (options.validation.showFileIfError == null) options.validation.showFileIfError = true;\r\n\t\t\t\tif (options.validation.checkMimeType == null) options.validation.checkMimeType = false;\r\n\r\n\t\t\t\tif (options.validation.minSize != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (file.size < options.validation.minSize)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet errorMessage = (options.validation.minSizeErrorMessage == null) ? \"Dimensione minima consentita: \" + this.formatBytes(options.validation.minSize) : options.validation.minSizeErrorMessage;\r\n\t\t\t\t\t\tnotify(errorMessage, { type: NotifierTypeEnum.Error });\r\n\r\n\t\t\t\t\t\tif (options.validation.showFileIfError)\r\n\t\t\t\t\t\t\tthis.drawFile(file, UploadDrawTypeEnum.ErrorValidationMinSize);\r\n\r\n\t\t\t\t\t\tif (!options.fileList)\r\n\t\t\t\t\t\t\tthis.manageValidationError(UploadValidationErrorTypeEnum.MinSize, file);\r\n\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options.validation.maxSize != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (file.size > options.validation.maxSize)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet errorMessage = (options.validation.maxSizeErrorMessage == null) ? \"Dimensione massima consentita: \" + this.formatBytes(options.validation.maxSize) : options.validation.maxSizeErrorMessage;\r\n\t\t\t\t\t\tnotify(errorMessage, { type: NotifierTypeEnum.Error });\r\n\r\n\t\t\t\t\t\tif (options.validation.showFileIfError)\r\n\t\t\t\t\t\t\tthis.drawFile(file, UploadDrawTypeEnum.ErrorValidationMaxSize);\r\n\r\n\t\t\t\t\t\tif (!options.fileList)\r\n\t\t\t\t\t\t\tthis.manageValidationError(UploadValidationErrorTypeEnum.MaxSize, file);\r\n\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options.validation.extensions != null && options.validation.extensions[0] != \".\" && options.validation.extensions[0] != \"*\")\r\n\t\t\t\t{\r\n\t\t\t\t\tlet isValid = true;\r\n\r\n\t\t\t\t\tif (options.validation.checkMimeType)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//#region Mime Type\r\n\t\t\t\t\t\tlet mimeTypes: string[] = [];\r\n\t\t\t\t\t\tfor (let extension of options.validation.extensions)\r\n\t\t\t\t\t\t\tmimeTypes.vrPushRange(this.getMimeTypeFromExtension(extension.toLowerCase()));\r\n\r\n\t\t\t\t\t\tisValid = mimeTypes.includes(file.type.toLowerCase());\r\n\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//#region Extension\r\n\t\t\t\t\t\tlet extensionsArray = file.name.split(\".\");\r\n\t\t\t\t\t\tlet extension = extensionsArray[extensionsArray.length - 1].toLowerCase();\r\n\t\t\t\t\t\tisValid = options.validation.extensions.map(k => k.replace(\".\", \"\").toLowerCase()).includes(extension);\r\n\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!isValid)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet errorMessage = (options.validation.extensionsErrorMessage == null) ? \"Estensioni consentite: \" + options.validation.extensions : options.validation.extensionsErrorMessage;\r\n\t\t\t\t\t\tnotify(errorMessage, { type: NotifierTypeEnum.Error });\r\n\r\n\t\t\t\t\t\tif (options.validation.showFileIfError)\r\n\t\t\t\t\t\t\tthis.drawFile(file, UploadDrawTypeEnum.ErrorValidationExtensions);\r\n\r\n\t\t\t\t\t\tif (!options.fileList)\r\n\t\t\t\t\t\t\tthis.manageValidationError(UploadValidationErrorTypeEnum.Extensions, file);\r\n\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\tfilesAdded.push(file);\r\n\r\n\t\t\tif (options.autoUpload)\r\n\t\t\t\tthis.uploadFile(file, i, true);\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis._files.push(file);\r\n\t\t\t\tthis.drawFile(file, UploadDrawTypeEnum.Default);\r\n\t\t\t\tpuma(this.progressBar()).hide();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (filesAdded.length == 0)\r\n\t\t\tpuma(this.progressBar()).hide();\r\n\r\n\t\tfilesAdded = [];\r\n\t}\r\n\r\n\tprivate drawFile(file: File, drawTypeEnum: UploadDrawTypeEnum)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (options.fileList)\r\n\t\t{\r\n\t\t\tlet divFile = div(this._divFileList, { class: \"vrUploadDivFile\" });\r\n\t\t\tlet size = this.formatBytes(file.size);\r\n\t\t\tlet fileInfo = this.getFileInfo(file.type);\r\n\r\n\t\t\ticon(fileInfo.icon, divFile, { css: \"color: \" + fileInfo.color + \";\", class: \"vrUploadFileIcon\" });\r\n\r\n\t\t\tlet underLabel = \"<span class='vrUploadLblUnderFileName' style='color: #a0a0a0;'>\" + size + \"</span>\";\r\n\r\n\t\t\t//#region Error message\r\n\t\t\tif (drawTypeEnum == UploadDrawTypeEnum.ErrorValidationExtensions || drawTypeEnum == UploadDrawTypeEnum.ErrorValidationMaxSize\r\n\t\t\t\t|| drawTypeEnum == UploadDrawTypeEnum.ErrorValidationMinSize)\r\n\t\t\t{\r\n\t\t\t\tlet validationErrorTypeEnum = UploadValidationErrorTypeEnum.MinSize;\r\n\t\t\t\tswitch (drawTypeEnum)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase UploadDrawTypeEnum.ErrorValidationMinSize: validationErrorTypeEnum = UploadValidationErrorTypeEnum.MinSize; break;\r\n\t\t\t\t\tcase UploadDrawTypeEnum.ErrorValidationMaxSize: validationErrorTypeEnum = UploadValidationErrorTypeEnum.MaxSize; break;\r\n\t\t\t\t\tcase UploadDrawTypeEnum.ErrorValidationExtensions: validationErrorTypeEnum = UploadValidationErrorTypeEnum.Extensions; break;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet errorMessage = this.manageValidationError(validationErrorTypeEnum, file);\r\n\t\t\t\tif (errorMessage != \"\")\r\n\t\t\t\t\tunderLabel = \"<span class='vrUploadLblUnderFileName' style='color: red;'>\" + errorMessage + \"</span>\";\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\tcreateLabel({\r\n\t\t\t\twidth: \"Calc(100% - 53px)\",\r\n\t\t\t\ttext: \"<span class='vrUploadFileName' style='font-size: 14px; font-weight: 600;'>\" + file.name + \"</span>\" + underLabel,\r\n\t\t\t\tnoBr: 4,\r\n\t\t\t\tclass: \"vrUploadFileDescription\"\r\n\t\t\t}, divFile);\r\n\r\n\t\t\t//#region Percentage/Spinner\r\n\t\t\tlet spanPercentageSpinner = span(divFile, { class: \"vrUploadDivFilePercentage\" });\r\n\t\t\tcreateLabel({\r\n\t\t\t\tvisible: drawTypeEnum == UploadDrawTypeEnum.TempLoading,\r\n\t\t\t\tclass: \"vrUploadFilePercentage\",\r\n\t\t\t\tfontSize: 11\r\n\t\t\t}, spanPercentageSpinner);\r\n\r\n\t\t\tlet iconSpinner = icon(IconClassLight.Spinner, spanPercentageSpinner, { class: \"vrUploadFileSpinner\" });\r\n\t\t\tif (drawTypeEnum != UploadDrawTypeEnum.TempLoading)\r\n\t\t\t\tpuma(iconSpinner).hide();\r\n\t\t\t//#endregion\r\n\r\n\t\t\tcreateButton({\r\n\t\t\t\ticon: (drawTypeEnum == UploadDrawTypeEnum.TempLoading) ? IconClassLight.Trash : IconClassRegular.Xmark,\r\n\t\t\t\tcssContainer: \"width: 14px; margin-left: 5px;\",\r\n\t\t\t\tcss: \"border: none; background: none; font-size: 18px; color: red; width: 14px; padding: 0px;\",\r\n\t\t\t\tclass: \"vrUploadFileButtonAction\",\r\n\t\t\t\tvisible: options.canRemoveFile,\r\n\t\t\t\tonClick: (e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (e.sender.icon()!.classList.contains(\"fa-trash\"))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//#region On abort\r\n\t\t\t\t\t\tif (options!.onAbort != null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlet abortEvent = new UploadAbortEvent();\r\n\t\t\t\t\t\t\tabortEvent.sender = this;\r\n\t\t\t\t\t\t\tabortEvent.xhr = this._dicFileXhr.get(file)!;\r\n\t\t\t\t\t\t\tabortEvent.file = file;\r\n\t\t\t\t\t\t\toptions!.onAbort(abortEvent);\r\n\r\n\t\t\t\t\t\t\tif (abortEvent.isDefaultPrevented())\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\tthis._dicFileXhr.get(file)!.abort();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (options.confirmToRemoveFile)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tconfirm(\"Confermi di voler rimuovere il file?\").then(() =>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpuma(divFile).remove();\r\n\t\t\t\t\t\t\t\tthis.removeFile(divFile, file);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tpuma(divFile).remove();\r\n\t\t\t\t\t\t\tthis.removeFile(divFile, file);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, divFile);\r\n\t\t\treturn divFile;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate manageValidationError(typeEnum: UploadValidationErrorTypeEnum, file: File)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\r\n\t\tlet errorMessage = \"\";\r\n\t\tif (typeEnum == UploadValidationErrorTypeEnum.MinSize)\r\n\t\t\terrorMessage = (options.validation!.minSizeErrorMessage == null) ? \"Dimensione minima consentita: \" + this.formatBytes(options.validation!.minSize!) : options.validation!.minSizeErrorMessage;\r\n\t\tif (typeEnum == UploadValidationErrorTypeEnum.MaxSize)\r\n\t\t\terrorMessage = (options.validation!.maxSizeErrorMessage == null) ? \"Dimensione massima consentita: \" + this.formatBytes(options.validation!.maxSize!) : options.validation!.maxSizeErrorMessage;\r\n\t\tif (typeEnum == UploadValidationErrorTypeEnum.Extensions)\r\n\t\t\terrorMessage = (options.validation!.extensionsErrorMessage == null) ? \"Estensioni consentite: \" + options.validation!.extensions : options.validation!.extensionsErrorMessage;\r\n\r\n\t\tif (errorMessage != \"\")\r\n\t\t{\r\n\t\t\tif (options.onValidationError != null)\r\n\t\t\t{\r\n\t\t\t\tlet errorEvent = new UploadValidationErrorEvent();\r\n\t\t\t\terrorEvent.sender = this;\r\n\t\t\t\terrorEvent.file = file;\r\n\t\t\t\terrorEvent.message = errorMessage;\r\n\t\t\t\terrorEvent.type = typeEnum;\r\n\t\t\t\toptions.onValidationError(errorEvent);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn errorMessage;\r\n\t}\r\n\r\n\tprivate removeFile(divFile: HTMLElement, file: File)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\r\n\t\t//#region Remove event\r\n\t\tif (options!.onRemove != null)\r\n\t\t{\r\n\t\t\tlet removeEvent = new UploadRemoveEvent();\r\n\t\t\tremoveEvent.sender = this;\r\n\t\t\tremoveEvent.element = divFile;\r\n\t\t\tremoveEvent.file = file;\r\n\t\t\tremoveEvent.index = this.getFiles().indexOf(file);\r\n\t\t\toptions!.onRemove(removeEvent);\r\n\r\n\t\t\tif (removeEvent.isDefaultPrevented())\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\tthis._files.vrDelete(file);\r\n\t\tthis._dicFileXhr.delete(file);\r\n\r\n\t\tif (this._files.length == 0)\r\n\t\t\tthis.clear();\r\n\t}\r\n\r\n\tprivate uploadFile(file: File, i: number, drawFile = true)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\r\n\t\tvar url = options.webApiSettings!.url!;\r\n\t\tvar xhr = new XMLHttpRequest();\r\n\t\txhr.open(\"POST\", url, options.async!);\r\n\r\n\t\t//#region Header parameters\r\n\t\tif (options.webApiSettings!.parameters != null)\r\n\t\t{\r\n\t\t\tlet parameters = [];\r\n\t\t\tif (Array.isArray(options.webApiSettings!.parameters))\r\n\t\t\t\tparameters = options.webApiSettings!.parameters;\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tlet parametersEvent = new UploadParametersEvent();\r\n\t\t\t\tparametersEvent.sender = this;\r\n\t\t\t\tparametersEvent.file = file;\r\n\t\t\t\tparameters = options.webApiSettings!.parameters(parametersEvent);\r\n\t\t\t}\r\n\r\n\t\t\tfor (let headerParameter of parameters)\r\n\t\t\t\txhr.setRequestHeader(headerParameter.key, headerParameter.value);\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Draw file\r\n\t\tlet divFile: HTMLElement | null = null;\r\n\t\tif (drawFile)\r\n\t\t{\r\n\t\t\tthis._files.push(file);\r\n\t\t\tthis._dicFileXhr.set(file, xhr);\r\n\t\t\tdivFile = this.drawFile(file, UploadDrawTypeEnum.TempLoading);\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Progress bar\r\n\t\txhr.upload.addEventListener(\"progress\", (e) =>\r\n\t\t{\r\n\t\t\t//#region On progress\r\n\t\t\tif (options!.onProgress != null)\r\n\t\t\t{\r\n\t\t\t\tlet progressEvent = new UploadProgressEvent();\r\n\t\t\t\tprogressEvent.sender = this;\r\n\t\t\t\tprogressEvent.loaded = e.loaded;\r\n\t\t\t\tprogressEvent.total = e.total;\r\n\t\t\t\tprogressEvent.event = e;\r\n\t\t\t\toptions!.onProgress(progressEvent);\r\n\r\n\t\t\t\tif (progressEvent.isDefaultPrevented())\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\tif (options!.progressBar)\r\n\t\t\t\tthis.updateProgress(i, (e.loaded * 100.0 / e.total) || 100);\r\n\r\n\t\t\tlet percentage = Math.round(((e.loaded * 100.0 / e.total) || 99));\r\n\t\t\tif (percentage == 100)\r\n\t\t\t\tpercentage = 99;\r\n\r\n\t\t\tpuma(divFile).find(\".vrUploadFilePercentage\").html(percentage + \"%\");\r\n\t\t});\r\n\t\t//#endregion\r\n\r\n\t\txhr.addEventListener(\"readystatechange\", (e) =>\r\n\t\t{\r\n\t\t\tif (xhr.readyState == 4 && xhr.status == 200)\r\n\t\t\t{\r\n\t\t\t\t//#region Success\r\n\t\t\t\tif (options.onSuccess != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet successEvent = new UploadSuccessEvent();\r\n\t\t\t\t\tsuccessEvent.sender = this;\r\n\t\t\t\t\tsuccessEvent.status = xhr.status;\r\n\t\t\t\t\tsuccessEvent.statusText = xhr.statusText;\r\n\t\t\t\t\tsuccessEvent.response = JSON.parse(xhr.response);\r\n\t\t\t\t\tsuccessEvent.xhr = xhr;\r\n\t\t\t\t\tsuccessEvent.event = e;\r\n\t\t\t\t\tsuccessEvent.file = file;\r\n\t\t\t\t\toptions.onSuccess(successEvent);\r\n\r\n\t\t\t\t\tif (successEvent.isDefaultPrevented())\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\t\r\n\r\n\t\t\t\tpuma(this.progressBar()).hide();\r\n\r\n\t\t\t\t//#region Update div file\r\n\t\t\t\tif (divFile != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet fileButtonActionIcon = puma(divFile).find(\".vrUploadFileButtonAction\").find(\".vrIcon\")[0];\r\n\t\t\t\t\tlet classList: string[] = fileButtonActionIcon.className.split(/\\s+/);\r\n\t\t\t\t\tlet iconClassList = classList.filter(k => k.startsWith(\"fa-\"));\r\n\t\t\t\t\tfor (let iconClass of iconClassList)\r\n\t\t\t\t\t\tfileButtonActionIcon.classList.remove(iconClass);\r\n\r\n\t\t\t\t\tpuma(fileButtonActionIcon).addClass(IconClassRegular.Xmark);\r\n\r\n\t\t\t\t\tpuma(divFile).find(\".vrUploadDivFilePercentage\").remove();\r\n\t\t\t\t\tpuma(divFile).find(\".vrUploadFileName\").vrAppendPuma(\"<i class='\" + IconClassLight.Check + \"' style='color: green; margin-left: 5px;' title='File caricato correttamente'></i>\");\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\r\n\t\t\t}\r\n\t\t\telse if (xhr.readyState == 4 && xhr.status != 200)\r\n\t\t\t{\r\n\t\t\t\t//#region Error\r\n\t\t\t\tif (options.onError != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet errorEvent = new UploadErrorEvent();\r\n\t\t\t\t\terrorEvent.sender = this;\r\n\t\t\t\t\terrorEvent.status = xhr.status;\r\n\t\t\t\t\terrorEvent.statusText = xhr.statusText;\r\n\t\t\t\t\terrorEvent.response = (xhr.status != 0) ? JSON.parse(xhr.response) : {};\r\n\t\t\t\t\terrorEvent.xhr = xhr;\r\n\t\t\t\t\terrorEvent.event = e;\r\n\t\t\t\t\terrorEvent.file = file;\r\n\t\t\t\t\toptions.onError(errorEvent);\r\n\r\n\t\t\t\t\tif (errorEvent.isDefaultPrevented())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\r\n\r\n\t\t\t\tpuma(this.progressBar()).hide();\r\n\r\n\t\t\t\t//#region Update div file\r\n\t\t\t\tif (divFile != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet fileButtonActionIcon = puma(divFile).find(\".vrUploadFileButtonAction\").find(\".vrIcon\")[0];\r\n\t\t\t\t\tlet classList: string[] = fileButtonActionIcon.className.split(/\\s+/);\r\n\t\t\t\t\tlet iconClassList = classList.filter(k => k.startsWith(\"fa-\"));\r\n\t\t\t\t\tfor (let iconClass of iconClassList)\r\n\t\t\t\t\t\tfileButtonActionIcon.classList.remove(iconClass);\r\n\r\n\t\t\t\t\tpuma(fileButtonActionIcon).addClass(IconClassRegular.Xmark);\r\n\r\n\t\t\t\t\tlet uploadFileIcon = puma(divFile).find(\"i.vrUploadFileIcon\");\r\n\t\t\t\t\tuploadFileIcon.removeClass();\r\n\t\t\t\t\tuploadFileIcon.addClass(IconClassLight.TriangleExclamation + \" vrUploadFileIcon\");\r\n\t\t\t\t\tuploadFileIcon[0].style.cssText += \"color: red; margin-left: -3px;\";\r\n\r\n\t\t\t\t\tpuma(divFile).find(\".vrUploadDivFilePercentage\").remove();\r\n\t\t\t\t\tpuma(divFile).find(\".vrUploadFileDescription\").html(\"<span class='vrUploadFileName' style='font-weight: 600; font-size: 14px;'>\" + file.name + \"</span><span class='vrUploadLblUnderFileName' style='color: red;'>File non caricato correttamente, o procedura interrotta</span>\");\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tvar formData = new FormData();\r\n\t\tformData.append(\"file\", file);\r\n\t\txhr.send(formData);\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Progress bar\r\n\tprivate initializeProgress(numFiles: number)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (options.progressBar)\r\n\t\t\tpuma(this.progressBar()).show();\r\n\r\n\t\tpuma(this.progressBar())[0].value = 0;\r\n\t\tthis._uploadProgress = [];\r\n\r\n\t\tfor (let i = numFiles; i > 0; i--)\r\n\t\t\tthis._uploadProgress.push(0);\r\n\t}\r\n\r\n\tprivate updateProgress(fileNumber: number, percentage: number)\r\n\t{\r\n\t\tthis._uploadProgress[fileNumber] = percentage;\r\n\t\tlet total = this._uploadProgress.reduce((tot, curr) => tot + curr, 0) / this._uploadProgress.length;\r\n\t\tpuma(this.progressBar())[0].value = total;\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Utility\r\n\tdropArea()\r\n\t{\r\n\t\treturn this._divDropArea;\r\n\t}\r\n\r\n\tdivFileList()\r\n\t{\r\n\t\treturn this._divFileList;\r\n\t}\r\n\r\n\tprogressBar()\r\n\t{\r\n\t\treturn this._divProgressBar;\r\n\t}\r\n\r\n\tuploadButton()\r\n\t{\r\n\t\treturn this._inputFile;\r\n\t}\r\n\r\n\tprivate formatBytes(bytes: number)\r\n\t{\r\n\t\tconst thresh = 1024;\r\n\t\tif (Math.abs(bytes) < thresh)\r\n\t\t\treturn bytes + \" B\";\r\n\r\n\t\tconst units = [\"kB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\r\n\t\tlet u = -1;\r\n\t\tconst r = 10 ** 2;\r\n\r\n\t\tdo\r\n\t\t{\r\n\t\t\tbytes /= thresh;\r\n\t\t\t++u;\r\n\t\t}\r\n\t\twhile (Math.round(Math.abs(bytes) * r) / r >= thresh && u < units.length - 1);\r\n\r\n\t\treturn bytes.toFixed(2) + ' ' + units[u];\r\n\t}\r\n\r\n\tprivate getFileInfo(mimeType: string)\r\n\t{\r\n\t\t//#region Icon\r\n\t\tlet icon = IconClassLight.File;\r\n\t\tlet color = \"#51B3E1\";\r\n\r\n\t\tswitch (mimeType)\r\n\t\t{\r\n\t\t\tcase \"application/pdf\":\r\n\t\t\t\t{\r\n\t\t\t\t\ticon = IconClassLight.FilePdf;\r\n\t\t\t\t\tcolor = \"coral\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"image/png\":\r\n\t\t\tcase \"image/jpeg\":\r\n\t\t\t\t{\r\n\t\t\t\t\ticon = IconClassLight.FileImage;\r\n\t\t\t\t\tcolor = \"#adbd29\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"application/msword\":\r\n\t\t\tcase \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\":\r\n\t\t\t\t{\r\n\t\t\t\t\ticon = IconClassLight.FileWord;\r\n\t\t\t\t\tcolor = \"#01A6F0\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"application/vnd.ms-excel\":\r\n\t\t\tcase \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\":\r\n\t\t\t\t{\r\n\t\t\t\t\ticon = IconClassLight.FileExcel;\r\n\t\t\t\t\tcolor = \"#1D6F42\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"text/plain\":\r\n\t\t\t\t{\r\n\t\t\t\t\ticon = IconClassLight.FileLines;\r\n\t\t\t\t\tcolor = \"#bdbdbd\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"application/zip\":\r\n\t\t\tcase \"application/x-zip-compressed\":\r\n\t\t\tcase \"application/x-compressed\":\r\n\t\t\tcase \"multipart/x-zip\":\r\n\t\t\t\t{\r\n\t\t\t\t\ticon = IconClassLight.FileZipper;\r\n\t\t\t\t\tcolor = \"#b1b4d3\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"video/mp4\":\r\n\t\t\tcase \"video/3gpp\":\r\n\t\t\tcase \"video/x-flv\":\r\n\t\t\tcase \"video/quicktime\":\r\n\t\t\tcase \"video/x-msvideo\":\r\n\t\t\tcase \"video/x-ms-wmv\":\r\n\t\t\t\t{\r\n\t\t\t\t\ticon = IconClassLight.FileVideo;\r\n\t\t\t\t\tcolor = \"purple\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn { icon: <IconClassLight>icon, color: color };\r\n\t}\r\n\r\n\tprivate getMimeTypeFromExtension(extension: string)\r\n\t{\r\n\t\tlet mimeType: string[] = [];\r\n\t\tlet extensionsArray = extension.split(\".\")\r\n\t\textension = extensionsArray[extensionsArray.length - 1]\r\n\r\n\t\tswitch (extension)\r\n\t\t{\r\n\t\t\tcase \"html\":\r\n\t\t\tcase \"htm\":\r\n\t\t\tcase \"shtml\":\r\n\t\t\t\tmimeType = [\"\"];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"css\": mimeType = [\"text/css\"]; break;\r\n\t\t\tcase \"xml\": mimeType = [\"text/xml\"]; break;\r\n\t\t\tcase \"gif\": mimeType = [\"image/gif\"]; break;\r\n\r\n\t\t\tcase \"jpeg\":\r\n\t\t\tcase \"jpg\":\r\n\t\t\t\tmimeType = [\"image/jpeg\"];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"js\": mimeType = [\"application/x-javascript\"]; break;\r\n\t\t\tcase \"txt\": mimeType = [\"text/plain\"]; break;\r\n\t\t\tcase \"png\": mimeType = [\"image/png\"]; break;\r\n\r\n\t\t\tcase \"tif\":\r\n\t\t\tcase \"tiff\":\r\n\t\t\t\tmimeType = [\"image/tiff\"];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"ico\": mimeType = [\"image/x-icon\"]; break;\r\n\t\t\tcase \"bmp\": mimeType = [\"image/x-ms-bmp\"]; break;\r\n\t\t\tcase \"svg\": mimeType = [\"image/svg+xml\"]; break;\r\n\r\n\t\t\tcase \"doc\":\r\n\t\t\tcase \"dot\":\r\n\t\t\t\tmimeType = [\"application/msword\"];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"docx\": mimeType = [\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"]; break;\r\n\t\t\tcase \"dotx\": mimeType = [\"application/vnd.openxmlformats-officedocument.wordprocessingml.template\"]; break;\r\n\t\t\tcase \"docm\": mimeType = [\"application/vnd.ms-word.document.macroEnabled.12\"]; break;\r\n\t\t\tcase \"dotm\": mimeType = [\"application/vnd.ms-word.template.macroEnabled.12\"]; break;\r\n\r\n\t\t\tcase \"pdf\": mimeType = [\"application/pdf\"]; break;\r\n\t\t\tcase \"rtf\": mimeType = [\"application/rtf\"]; break;\r\n\r\n\t\t\tcase \"csv\": mimeType = [\"application/vnd.ms-excel\", \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", \"text/csv\"]; break;\r\n\r\n\t\t\tcase \"mdb\": mimeType = [\"application/vnd.ms-access\"]; break;\r\n\r\n\t\t\tcase \"xls\":\r\n\t\t\tcase \"xlt\":\r\n\t\t\tcase \"xla\":\r\n\t\t\t\tmimeType = [\"application/vnd.ms-excel\"];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"xlsx\": mimeType = [\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"]; break;\r\n\t\t\tcase \"xltx\": mimeType = [\"application/vnd.openxmlformats-officedocument.spreadsheetml.template\"]; break;\r\n\t\t\tcase \"xlsm\": mimeType = [\"application/vnd.ms-excel.sheet.macroEnabled.12\"]; break;\r\n\t\t\tcase \"xltm\": mimeType = [\"application/vnd.ms-excel.template.macroEnabled.12\"]; break;\r\n\t\t\tcase \"xlam\": mimeType = [\"application/vnd.ms-excel.addin.macroEnabled.12\"]; break;\r\n\t\t\tcase \"xlsb\": mimeType = [\"application/vnd.ms-excel.sheet.binary.macroEnabled.12\"]; break;\r\n\r\n\t\t\tcase \"ppt\":\r\n\t\t\tcase \"pot\":\r\n\t\t\tcase \"pps\":\r\n\t\t\tcase \"ppa\":\r\n\t\t\t\tmimeType = [\"application/vnd.ms-powerpoint\"];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"pptx\": mimeType = [\"application/vnd.openxmlformats-officedocument.presentationml.presentation\"]; break;\r\n\t\t\tcase \"potx\": mimeType = [\"application/vnd.openxmlformats-officedocument.presentationml.template\"]; break;\r\n\t\t\tcase \"ppsx\": mimeType = [\"application/vnd.openxmlformats-officedocument.presentationml.slideshow\"]; break;\r\n\t\t\tcase \"ppam\": mimeType = [\"application/vnd.ms-powerpoint.addin.macroEnabled.12\"]; break;\r\n\t\t\tcase \"pptm\": mimeType = [\"application/vnd.ms-powerpoint.presentation.macroEnabled.12\"]; break;\r\n\t\t\tcase \"potm\": mimeType = [\"application/vnd.ms-powerpoint.template.macroEnabled.12\"]; break;\r\n\t\t\tcase \"ppsm\": mimeType = [\"application/vnd.ms-powerpoint.slideshow.macroEnabled.12\"]; break;\r\n\r\n\t\t\tcase \"p7m\": mimeType = [\"application/pkcs7-mime\", \"application/x-pkcs7-mime\"]; break;\r\n\t\t\tcase \"p12\": mimeType = [\"application/pkcs-12\", \"application/x-pkcs12\"]; break;\r\n\r\n\t\t\tcase \"7z\": mimeType = [\"application/x-7z-compressed\"]; break;\r\n\t\t\tcase \"rar\": mimeType = [\"application/x-rar-compressed\"]; break;\r\n\t\t\tcase \"zip\": mimeType = [\"application/x-zip-compressed\"]; break;\r\n\r\n\t\t\tcase \"bin\":\r\n\t\t\tcase \"exe\":\r\n\t\t\tcase \"dll\":\r\n\t\t\tcase \"deb\":\r\n\t\t\tcase \"dmg\":\r\n\t\t\tcase \"eot\":\r\n\t\t\tcase \"iso\":\r\n\t\t\tcase \"img\":\r\n\t\t\tcase \"msi\":\r\n\t\t\tcase \"msp\":\r\n\t\t\tcase \"msm\":\r\n\t\t\t\tmimeType = [\"application/octet-stream\"];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"mp3\": mimeType = [\"audio/mpeg\"]; break;\r\n\r\n\t\t\tcase \"3ggp\":\r\n\t\t\tcase \"3gp\":\r\n\t\t\t\tmimeType = [\"video/3gpp\"];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"mpeg\":\r\n\t\t\tcase \"mpg\":\r\n\t\t\t\tmimeType = [\"video/mpeg\"];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"mov\": mimeType = [\"video/quicktime\"]; break;\r\n\t\t\tcase \"flv\": mimeType = [\"video/x-flv\"]; break;\r\n\t\t\tcase \"wmv\": mimeType = [\"video/x-ms-wmv\"]; break;\r\n\t\t\tcase \"avi\": mimeType = [\"video/x-msvideo\"]; break;\r\n\r\n\t\t\tcase \"m4v\":\r\n\t\t\tcase \"m4p\":\r\n\t\t\t\tmimeType = [\"video/mp4\"];\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn mimeType;\r\n\t}\r\n\r\n\tclear()\r\n\t{\r\n\t\tthis._files = [];\r\n\t\tpuma(this.divFileList()).hide();\r\n\t\tpuma(this.divFileList()).empty();\r\n\t\tthis.uploadButton().value = \"\";\r\n\t\tpuma(this.progressBar()).hide();\r\n\t\tthis.progressBar().value = 0;\r\n\r\n\t\tpuma(this.element()).show();\r\n\t}\r\n\r\n\topen()\r\n\t{\r\n\t\tpuma(this.uploadButton()).click();\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Overrides\r\n\tenable()\r\n\t{\r\n\t\tsuper.enable();\r\n\t\twindow.setTimeout(() => this.uploadButton().removeAttribute(\"disabled\"));\r\n\t}\r\n\r\n\tdisable()\r\n\t{\r\n\t\tsuper.disable();\r\n\t\twindow.setTimeout(() => this.uploadButton().setAttribute(\"disabled\", \"disabled\"));\r\n\t}\r\n\t//#endregion\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.options<UploadOptions>();\r\n\t}\r\n\t//#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass UploadWebApiSettings\r\n{\r\n\turl?: string;\r\n\tparameters?: UploadWebApiParameter[] | ((e: UploadParametersEvent) => UploadWebApiParameter[]);\r\n}\r\n\r\nclass UploadWebApiParameter\r\n{\r\n\tkey: string;\r\n\tvalue: any;\r\n}\r\n\r\nclass UploadEvent extends VrControlsEvent\r\n{\r\n\tsender: Upload;\r\n}\r\n\r\nclass UploadParametersEvent extends UploadEvent\r\n{\r\n\tfile: File;\r\n}\r\n\r\nclass UploadDragEvent extends UploadEvent\r\n{\r\n\telement: HTMLElement;\r\n\tevent: any;\r\n}\r\n\r\nclass UploadDragEnterEvent extends UploadDragEvent\r\n{ }\r\n\r\nclass UploadDragOverEvent extends UploadDragEvent\r\n{ }\r\n\r\nclass UploadDragLeaveEvent extends UploadDragEvent\r\n{ }\r\n\r\nclass UploadDropEvent extends UploadEvent\r\n{\r\n\tfiles: File[];\r\n\tevent: any;\r\n}\r\n\r\nclass UploadProgressEvent extends UploadEvent\r\n{\r\n\tloaded: number;\r\n\ttotal: number;\r\n\tevent: any;\r\n}\r\n\r\nclass UploadLoadEvent extends UploadEvent\r\n{\r\n\tevent: Event;\r\n\tstatus: number;\r\n\tstatusText: string;\r\n\txhr: XMLHttpRequest;\r\n\tresponse: any;\r\n\tfile: File;\r\n}\r\n\r\nclass UploadErrorEvent extends UploadLoadEvent\r\n{ }\r\n\r\nclass UploadSuccessEvent extends UploadLoadEvent\r\n{\r\n}\r\n\r\nclass UploadValidationErrorEvent extends UploadEvent\r\n{\r\n\tfile: File;\r\n\tmessage: string;\r\n\ttype: UploadValidationErrorTypeEnum;\r\n}\r\n\r\nclass UploadAbortEvent extends UploadEvent\r\n{\r\n\tfile: File;\r\n\txhr: XMLHttpRequest;\r\n}\r\n\r\nclass UploadStartEvent extends UploadEvent\r\n{\r\n\tfiles: File[];\r\n}\r\n\r\nclass UploadValidation\r\n{\r\n\tminSize?: number;\r\n\tminSizeErrorMessage?: string;\r\n\tmaxSize?: number;\r\n\tmaxSizeErrorMessage?: string;\r\n\textensions?: string[];\r\n\textensionsErrorMessage?: string;\r\n\tcheckMimeType?: boolean;\r\n\tshowFileIfError?: boolean;\r\n}\r\n\r\nenum UploadDrawTypeEnum\r\n{\r\n\tDefault,\r\n\tTempLoading,\r\n\tErrorValidationMinSize,\r\n\tErrorValidationMaxSize,\r\n\tErrorValidationExtensions\r\n}\r\n\r\nclass UploadRemoveEvent extends UploadEvent\r\n{\r\n\tfile: File;\r\n\telement: HTMLElement;\r\n\tindex: number;\r\n}\r\n//#endregion","import { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { ControlTypeEnum, hideLoader, NotifierTypeEnum, notify, PaypalStyleColorEnum, PaypalStyleLabelEnum, PaypalStyleLayoutEnum, PaypalStyleShapeEnum, PaypalStyleSizeEnum, puma, showLoader } from \"../vr\";\r\ndeclare var paypal: any;\r\n\r\n//#region Options\r\nexport class PaypalButtonOptions extends VrControlOptions\r\n{\r\n\tsetupUrl?: PaypalSetupUrl;\r\n\tstyle?: PaypalStyle;\r\n\tintent?: string;\r\n\tcreateOrderRequest?: SetupPaymentRequest;\r\n\tapproveRequest?: ExecutePaymentRequest;\r\n\tenableStandardCardFields?: boolean;\r\n\r\n\tonRendered?: (e: OnPaypalRenderedEvent) => void;\r\n\tonCancel?: (e: OnPaypalCancelEvent) => void;\r\n\tonBeforePayment?: (e: OnPaypalBeforePaymentEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class PaypalButton extends VrControl\r\n{\r\n\tconstructor(element: HTMLElement, options?: PaypalButtonOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new PaypalButtonOptions();\r\n\r\n\t\tif (options.style == null) options.style = new PaypalStyle();\r\n\t\tif (options.style.color == null) options.style.color = PaypalStyleColorEnum.Gold;\r\n\t\tif (options.style.size == null) options.style.size = PaypalStyleSizeEnum.Responsive;\r\n\t\tif (options.style.shape == null) options.style.shape = PaypalStyleShapeEnum.Rect;\r\n\t\tif (options.style.height == null) options.style.height = 30;\r\n\t\tif (options.style.tagline == null) options.style.tagline = false;\r\n\t\tif (options.style.fundingicons == null) options.style.fundingicons = true;\r\n\t\tif (options.style.layout == null) options.style.layout = PaypalStyleLayoutEnum.Horizontal;\r\n\t\tif (options.enableStandardCardFields == null) options.enableStandardCardFields = true;\r\n\t\tif (options.intent == null) options.intent = \"CAPTURE\";\r\n\r\n\t\tif (options.createOrderRequest == null) options.createOrderRequest = new SetupPaymentRequest();\r\n\t\tif (options.createOrderRequest.authKey == null) options.createOrderRequest.authKey = \"1D7822D72F5397BEF65D677C89E85\";\r\n\t\tif (options.createOrderRequest.method == null) options.createOrderRequest.method = \"/api/PaypalWebApi/CreatePayment/\";\r\n\r\n\t\tif (options.approveRequest == null) options.approveRequest = new ExecutePaymentRequest();\r\n\t\tif (options.approveRequest.authKey == null) options.approveRequest.authKey = \"1D7822D72F5397BEF65D677C89E85\";\r\n\t\tif (options.approveRequest.method == null) options.approveRequest.method = \"/api/PaypalWebApi/ExecutePayment/\";\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.PaypalButton);\r\n\r\n\t\tif (options.setupUrl != null)\r\n\t\t{\r\n\t\t\tif (options.setupUrl.clientId == null)\r\n\t\t\t\tthrow Error(\"PayPal clientId obbligatorio\");\r\n\r\n\t\t\tif (options.setupUrl.currency == null) options.setupUrl.currency = \"EUR\";\r\n\t\t\tif (options.setupUrl.intent == null) options.setupUrl.intent = \"capture\";\r\n\t\t\tif (options.setupUrl.commit == null) options.setupUrl.commit = false;\r\n\t\t\tif (options.setupUrl.locale == null) options.setupUrl.locale = \"it_IT\";\r\n\r\n\t\t\t(puma as any).getScript(`<script src='https://www.paypal.com/sdk/js?client-id=` + options.setupUrl.clientId\r\n\t\t\t\t+ `&currency=` + options.setupUrl.currency + `&intent=` + options.setupUrl.intent\r\n\t\t\t\t+ `&commit=` + options.setupUrl.commit + `&locale=` + options.setupUrl.locale + `'></script>`)\r\n\t\t\t\t.then(() => this.renderButton());\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.renderButton();\r\n\t}\r\n\r\n\t//#region Methods\r\n\tprivate renderButton()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tpaypal.Buttons({\r\n\t\t\tenableStandardCardFields: options!.enableStandardCardFields,\r\n\t\t\tstyle: options!.style,\r\n\t\t\tcreateOrder: (data: any, actions: any) =>\r\n\t\t\t{\r\n\t\t\t\tshowLoader(options!.createOrderRequest!.loader);\r\n\r\n\t\t\t\tif (options!.onBeforePayment != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet beforePaymentEvent = new OnPaypalBeforePaymentEvent();\r\n\t\t\t\t\tbeforePaymentEvent.sender = this;\r\n\t\t\t\t\toptions!.onBeforePayment(beforePaymentEvent);\r\n\r\n\t\t\t\t\tif (beforePaymentEvent.isDefaultPrevented())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\thideLoader();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet json = this.prepareWebApiCall(options!.createOrderRequest!, PaypalWebApiTypeEnum.CreateOrder);\r\n\t\t\t\treturn fetch(options!.createOrderRequest!.method!,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmethod: \"post\",\r\n\t\t\t\t\t\theaders: { \"content-type\": \"application/json\" },\r\n\t\t\t\t\t\tbody: JSON.stringify(json)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((res) =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet json = res.json() as any;\r\n\t\t\t\t\t\treturn json;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((data) =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (data.token != null && data.token != \"\")\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (options!.createOrderRequest!.successNotificationMessage != null)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (options!.createOrderRequest!.successNotificationMessage === true)\r\n\t\t\t\t\t\t\t\t\toptions!.createOrderRequest!.successNotificationMessage = \"Pagamento creato correttamente\";\r\n\r\n\t\t\t\t\t\t\t\tif (options!.createOrderRequest!.successNotificationMessage !== false)\r\n\t\t\t\t\t\t\t\t\tnotify(options!.createOrderRequest!.successNotificationMessage);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (options!.createOrderRequest!.callback != null)\r\n\t\t\t\t\t\t\t\toptions!.createOrderRequest!.callback(data);\r\n\r\n\t\t\t\t\t\t\treturn data.token;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tthis.manageError(options!.createOrderRequest!, PaypalWebApiTypeEnum.SetupError, data);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\t(exception: any) =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\thideLoader();\r\n\t\t\t\t\t\t\tthis.manageError(options!.createOrderRequest!, PaypalWebApiTypeEnum.CreateOrder);\r\n\t\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tonApprove: (data: any, actions: any) =>\r\n\t\t\t{\r\n\t\t\t\tlet json = this.prepareWebApiCall(options!.approveRequest!, PaypalWebApiTypeEnum.OnApprove, data);\r\n\t\t\t\tshowLoader(options!.approveRequest!.loader);\r\n\r\n\t\t\t\treturn fetch(options!.approveRequest!.method!,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmethod: \"post\",\r\n\t\t\t\t\t\theaders: { \"content-type\": \"application/json\" },\r\n\t\t\t\t\t\tbody: JSON.stringify(json)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((response: any) =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\thideLoader();\r\n\t\t\t\t\t\tif (response.ok == true)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (options!.approveRequest!.successNotificationMessage != null)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (options!.approveRequest!.successNotificationMessage === true)\r\n\t\t\t\t\t\t\t\t\toptions!.approveRequest!.successNotificationMessage = \"Pagamento creato correttamente\";\r\n\r\n\t\t\t\t\t\t\t\tif (options!.approveRequest!.successNotificationMessage !== false)\r\n\t\t\t\t\t\t\t\t\tnotify(options!.approveRequest!.successNotificationMessage);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (options!.approveRequest!.callback != null)\r\n\t\t\t\t\t\t\t\toptions!.approveRequest!.callback(response);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tthis.manageError(options!.createOrderRequest!, PaypalWebApiTypeEnum.OnApprove, response);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\t(exception: any) =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\thideLoader();\r\n\t\t\t\t\t\t\tthis.manageError(options!.createOrderRequest!, PaypalWebApiTypeEnum.OnApprove, exception);\r\n\t\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tonCancel: (data: any, actions: any) =>\r\n\t\t\t{\r\n\t\t\t\thideLoader();\r\n\t\t\t\tif (options!.onCancel != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet cancelEvent = new OnPaypalCancelEvent();\r\n\t\t\t\t\tcancelEvent.sender = this;\r\n\t\t\t\t\tcancelEvent.data = data;\r\n\t\t\t\t\tcancelEvent.actions = actions;\r\n\t\t\t\t\toptions!.onCancel(cancelEvent);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonError: (data: any) =>\r\n\t\t\t{\r\n\t\t\t\thideLoader();\r\n\t\t\t\tnotify(\"Si è verificato un errore\", { type: NotifierTypeEnum.Error });\r\n\t\t\t}\r\n\t\t}).render(this.element()).then(() =>\r\n\t\t{\r\n\t\t\tif (options!.onRendered != null)\r\n\t\t\t{\r\n\t\t\t\tlet renderedEvent = new OnPaypalRenderedEvent();\r\n\t\t\t\trenderedEvent.sender = this;\r\n\t\t\t\toptions!.onRendered(renderedEvent);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate prepareWebApiCall(request: PaypalWebApiRequest, requestType: PaypalWebApiTypeEnum, data: any = null)\r\n\t{\r\n\t\tlet json: any = {};\r\n\t\tjson.AuthKey = request.authKey;\r\n\r\n\t\t//#region Method\r\n\t\tif (request.method!.startsWith(\"api/\"))\r\n\t\t\trequest.method = \"/\" + request.method;\r\n\r\n\t\tif (!request.method!.endsWith(\"/\"))\r\n\t\t\trequest.method! = request.method + \"/\";\r\n\t\t//#endregion\r\n\r\n\t\t//#region Type\r\n\t\tif (requestType == PaypalWebApiTypeEnum.CreateOrder)\r\n\t\t{\r\n\t\t\tif ((request as SetupPaymentRequest).cancelUrl != null)\r\n\t\t\t\tjson[(request as SetupPaymentRequest).cancelUrl!] = (request as SetupPaymentRequest).cancelUrl;\r\n\r\n\t\t\tif ((request as SetupPaymentRequest).returnUrl != null)\r\n\t\t\t\tjson[(request as SetupPaymentRequest).returnUrl!] = (request as SetupPaymentRequest).returnUrl;\r\n\t\t}\r\n\t\telse if (requestType == PaypalWebApiTypeEnum.OnApprove && data != null)\r\n\t\t{\r\n\t\t\tif ((request as ExecutePaymentRequest).paymentIdPropertyName == null)\r\n\t\t\t\t(request as ExecutePaymentRequest).paymentIdPropertyName = \"paymentId\";\r\n\t\t\tjson[(request as ExecutePaymentRequest).paymentIdPropertyName!] = data.paymentID;\r\n\r\n\t\t\tif ((request as ExecutePaymentRequest).payerIdPropertyName == null)\r\n\t\t\t\t(request as ExecutePaymentRequest).payerIdPropertyName = \"payerId\";\r\n\t\t\tjson[(request as ExecutePaymentRequest).payerIdPropertyName!] = data.payerID;\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Paramaters\r\n\t\tif (request.otherParameters != null)\r\n\t\t{\r\n\t\t\tlet jsonParameters = Object.getOwnPropertyNames(request.otherParameters);\r\n\t\t\tfor (let param of jsonParameters)\r\n\t\t\t\tjson[param] = request.otherParameters[param];\r\n\t\t}\r\n\r\n\t\tif (request.parameters != null)\r\n\t\t{\r\n\t\t\tlet parameters = request.parameters();\r\n\t\t\tlet jsonParameters = Object.getOwnPropertyNames(parameters);\r\n\t\t\tfor (let param of jsonParameters)\r\n\t\t\t\tjson[param] = parameters[param];\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\treturn json;\r\n\t}\r\n\r\n\tprivate manageError(request: PaypalWebApiRequest, requestType: PaypalWebApiTypeEnum, data: any = undefined)\r\n\t{\r\n\t\tif (request.errorNotificationMessage != null)\r\n\t\t{\r\n\t\t\tif (request.errorNotificationMessage === true)\r\n\t\t\t{\r\n\t\t\t\tlet error = \"\";\r\n\t\t\t\tswitch (requestType)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase PaypalWebApiTypeEnum.SetupError: error = String(data.Result.Response); break;\r\n\t\t\t\t\tcase PaypalWebApiTypeEnum.CreateOrder: error = \"Si è verificato un errore nella creazione del pagamento\"; break;\r\n\t\t\t\t\tcase PaypalWebApiTypeEnum.OnApprove: error = \"Il pagamento della transazione non è andato a buon fine\"; break;\r\n\t\t\t\t}\r\n\t\t\t\trequest.errorNotificationMessage = error;\r\n\t\t\t}\r\n\r\n\t\t\tif (request.errorNotificationMessage !== false)\r\n\t\t\t\tnotify(request.errorNotificationMessage, { type: NotifierTypeEnum.Error });\r\n\t\t}\r\n\t\telse if (data != null)\r\n\t\t{\r\n\t\t\tif (data.Result.Response != null)\r\n\t\t\t\tnotify(data.Result.Response, { type: NotifierTypeEnum.Error });\r\n\t\t\telse\r\n\t\t\t\tnotify(data.Result.Message, { type: NotifierTypeEnum.Error });\r\n\t\t}\r\n\t\telse\r\n\t\t\tnotify(\"Si è verificato un errore\", { type: NotifierTypeEnum.Error });\r\n\r\n\t\tif (request.errorCallback != null)\r\n\t\t\trequest.errorCallback(data);\r\n\t}\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.options<PaypalButtonOptions>();\r\n\t}\r\n\t//#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass PaypalSetupUrl\r\n{\r\n\tclientId?: string;\r\n\tlocale?: string;\r\n\tcurrency?: string;\r\n\tintent?: string;\r\n\tcommit?: boolean;\r\n}\r\n\r\nclass PaypalStyle\r\n{\r\n\tsize?: PaypalStyleSizeEnum;\r\n\tcolor?: PaypalStyleColorEnum;\r\n\tshape?: PaypalStyleShapeEnum;\r\n\theight?: number;\r\n\ttagline?: boolean;\r\n\tlayout?: PaypalStyleLayoutEnum;\r\n\tfundingicons?: boolean;\r\n}\r\n\r\nclass PaypalWebApiRequest\r\n{\r\n\tauthKey?: string;\r\n\tmethod?: string;\r\n\tsuccessNotificationMessage?: boolean | string;\r\n\terrorNotificationMessage?: boolean | string;\r\n\totherParameters?: any;\r\n\tloader?: HTMLElement | JQuery | string;\r\n\r\n\tcallback?: (response?: any) => void;\r\n\terrorCallback?: (message?: string) => void;\r\n\tparameters?: () => any;\r\n}\r\n\r\nclass SetupPaymentRequest extends PaypalWebApiRequest\r\n{\r\n\tcancelUrl?: string;\r\n\treturnUrl?: string;\r\n}\r\n\r\nclass ExecutePaymentRequest extends PaypalWebApiRequest\r\n{\r\n\tpaymentIdPropertyName?: string;\r\n\tpayerIdPropertyName?: string;\r\n}\r\n\r\nenum PaypalWebApiTypeEnum\r\n{\r\n\tCreateOrder,\r\n\tSetupError,\r\n\tOnApprove\r\n}\r\n\r\nclass OnPaypalCancelEvent extends VrControlsEvent\r\n{\r\n\tsender: PaypalButton;\r\n\tdata: any;\r\n\tactions: any;\r\n}\r\n\r\nclass OnPaypalBeforePaymentEvent extends VrControlsEvent\r\n{\r\n\tsender: PaypalButton;\r\n}\r\n\r\nclass OnPaypalRenderedEvent extends VrControlsEvent\r\n{\r\n\tsender: PaypalButton;\r\n}\r\n//#endregion","import { ControlManager } from \"../../../src/managers/controlManager\";\r\nimport { UtilityManager } from \"../../../src/managers/utilityManager\";\r\nimport { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { alert, ButtonModeEnum, ControlPositionEnum, confirm, ControlTypeEnum, createButton, createLabel, createSeparator, createTextBox, DateModeEnum, div, hideLoader, icon, IconClassLight, IconClass, notify, OrientationEnum, puma, shadowRoot, showLoader, span, TextAlignEnum, TreeModeEnum, TreeViewAlignEnum, TreeViewColumn, TreeViewColumnTypeEnum, TreeViewContextMenuItem, TreeViewFilterSettings, TreeViewItem, TreeViewItemExtraCell, TreeViewNumericTypeEnum, TreeViewToolbarClickEvent, TreeViewToolbarItem, TreeViewToolbarItemType, createSplitButton, TreeViewToolbarSwitchEvent, createSwitch, TreeViewToolbarSwitchSettings, createDatePicker, createComboBox, createCheckBox, createButtonGroup, SelectionModeEnum, IconClassSolid, NumberFormatSettings, addCssStyle } from \"../vr\";\r\nimport { Button } from \"./button\";\r\nimport { ComboBoxOptions } from \"./comboBox\";\r\nimport { DatePickerOptions } from \"./datePicker\";\r\nimport { Label } from \"./label\";\r\nimport { TextBox, TextBoxOptions } from \"./textbox\";\r\n\r\n//#region Options\r\nexport class TreeViewOptions extends VrControlOptions\r\n{\r\n\tcheckboxes?: boolean;\r\n\ttreeMode?: TreeModeEnum;\r\n\tdatasource?: any[];\r\n\trebind?: TreeViewRebindRequest;\r\n\tdataSourceFieldId?: string;\r\n\tfilter?: boolean | TreeViewFilterSettings;\r\n\tshowLink?: boolean;\r\n\ttitle?: string;\r\n\trightClickForContextMenu?: boolean;\r\n\tleftClickForContextMenu?: boolean;\r\n\tparentClickable?: boolean;\r\n\tcontextMenuItems?: TreeViewContextMenuItem[];\r\n\tshowEditButton?: boolean;\r\n\tdraggable?: boolean;\r\n\tselectable?: boolean;\r\n\talternateColor?: boolean;\r\n\tspaceBetweenGroups?: boolean;\r\n\trowHeight?: number;\r\n\trowLine?: number;\r\n\texport?: boolean | TreeViewExportSettings;\r\n\tcolumns?: TreeViewColumn[];\r\n\ttoolbar?: TreeViewToolbarItem[];\r\n\r\n\ttemplate?: (e: TreeViewTemplateEvent) => void | string;\r\n\tonBeforeSelect?(e: TreeViewChangingEvent): void;\r\n\tonAfterSelect?(e: TreeViewChangeEvent): void;\r\n\tonDoubleClick?(e: TreeViewDoubleClickEvent): void;\r\n\tonEdit?(e: TreeViewEditEvent): void;\r\n\tonDragStart?(e: TreeViewDragStartEvent): void;\r\n\tonDragMove?(e: TreeViewDragMoveEvent): void;\r\n\tonDragEnd?(e: TreeViewDragEndEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class TreeView extends VrControl\r\n{\r\n\tprivate _items: any[];\r\n\tprivate _dictionaryValueLi: Map<string, HTMLElement[]>;\r\n\tprivate _dictionaryLiValue: Map<HTMLElement, string>;\r\n\tprivate _checkedValues: string[];\r\n\tprivate _isChecked: boolean;\r\n\tprivate _tempCheckedValue: string | null;\r\n\tprivate _value?: string[] | null;\r\n\tprivate _divContextMenu: HTMLElement;\r\n\tprivate _dataItemContextMenu: any;\r\n\tprivate _actualDraggedItem: TreeViewItem | null;\r\n\tprivate _lblTitle: Label;\r\n\tprivate _tempRebindInfo: TempRebindInfo | null;\r\n\tprivate _divContent: HTMLElement;\r\n\tprivate _divHeaderSpace: HTMLElement;\r\n\tprivate _divTitle: HTMLElement;\r\n\tprivate _divToolbar: HTMLElement;\r\n\tprivate _timeoutClick: number;\r\n\tprivate _txtSearchFilter: TextBox;\r\n\r\n\tconstructor(element: HTMLElement, options?: TreeViewOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new TreeViewOptions();\r\n\r\n\t\tif (options.checkboxes == null) options.checkboxes = false;\r\n\t\tif (options.treeMode == null) options.treeMode = TreeModeEnum.AllExpanded;\r\n\t\tif (options.showLink == null) options.showLink = true;\r\n\t\tif (options.rightClickForContextMenu == null) options.rightClickForContextMenu = false;\r\n\t\tif (options.leftClickForContextMenu == null) options.leftClickForContextMenu = false;\r\n\t\tif (options.parentClickable == null) options.parentClickable = false;\r\n\t\tif (options.contextMenuItems == null) options.contextMenuItems = [];\r\n\t\tif (options.showEditButton == null) options.showEditButton = false;\r\n\t\tif (options.onEdit != null) options.showEditButton = true;\r\n\t\tif (options.draggable == null) options.draggable = false;\r\n\t\tif (options.onDragStart != null || options.onDragMove != null || options.onDragEnd != null) options.draggable = true;\r\n\t\tif (options.alternateColor == null) options.alternateColor = false;\r\n\t\tif (options.spaceBetweenGroups == null) options.spaceBetweenGroups = false;\r\n\t\tif (options.rowLine != null && options.rowLine > 1 && options.rowHeight == null) options.rowHeight = 20 * options.rowLine;\r\n\t\tif (options.rowLine == 1) options.rowLine = undefined;\r\n\t\tif (options.rowHeight == null) options.rowHeight = 27;\r\n\t\tif (options.selectable == null) options.selectable = true;\r\n\t\tif (options.dataSourceFieldId == null) options.dataSourceFieldId = \"id\";\r\n\r\n\t\tif (options.export == null) options.export = false;\r\n\t\tif (options.export !== false && options.title == null) options.title = \"\";\r\n\t\tif (options.export === true) options.export = new TreeViewExportSettings();\r\n\r\n\t\tif (options.filter == null) options.filter = false;\r\n\t\tif (options.filter === true) options.filter = new TreeViewFilterSettings();\r\n\t\tif (options.filter !== false)\r\n\t\t\tif (options.filter.onlyParents == null) options.filter.onlyParents = false;\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.TreeView);\r\n\t\tthis.element().style.cssText += \"height: 100%;\";\r\n\t\tthis._checkedValues = [];\r\n\r\n\t\t//#region Title\r\n\t\tif (options.columns != null && options.title == null) options.title = \"\";\r\n\t\tif (options.title != null || options.columns != null || options.export !== false)\r\n\t\t{\r\n\t\t\tthis._divTitle = puma(\"<div style='position: relative; display: flex;' class='vrTreeView_divTitle'></div>\")[0];\r\n\t\t\tpuma(this.element()).vrPrependPuma(this._divTitle);\r\n\r\n\t\t\tcreateButton({\r\n\t\t\t\ttext: \"Excel\",\r\n\t\t\t\ticon: IconClassLight.FileExcel,\r\n\t\t\t\tcss: \"height: 24px;\",\r\n\t\t\t\tcolorSettings: { background: \"#008a00\", textColor: \"#FFF\" },\r\n\t\t\t\tcssContainer: \"position: absolute; z-index: 9; top: 3px; left: 5px;\",\r\n\t\t\t\tvisible: options.export !== false,\r\n\t\t\t\tonClick: (e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.excelExport();\r\n\t\t\t\t}\r\n\t\t\t}, this._divTitle)\r\n\r\n\t\t\tif (options.title != null)\r\n\t\t\t{\r\n\t\t\t\tthis._lblTitle = createLabel({\r\n\t\t\t\t\ttext: options.title,\r\n\t\t\t\t\tcss: \"padding: 5px; height: 19px; border-radius: unset; width: Calc(100% - 10px);\",\r\n\t\t\t\t\tcolorSettings: { background: \"#e3f1fa\", textColor: \"#000\" },\r\n\t\t\t\t\talign: TextAlignEnum.Center,\r\n\t\t\t\t\twidth: \"Calc(100% - \" + this.widthColumns() + \"px)\",\r\n\t\t\t\t\tcssContainer: \"display: block !important; height: 29px;\"\r\n\t\t\t\t}, this._divTitle);\r\n\t\t\t}\r\n\r\n\t\t\tif (options.columns != null)\r\n\t\t\t{\r\n\t\t\t\tfor (let column of options.columns)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet width = (column.width != null) ? column.width : 100;\r\n\t\t\t\t\tlet divColumn = div(this._divTitle, { css: \"width: \" + width + \"px;\", class: \"vrTreeViewColumn\", attributes: [{ name: \"field\", value: column.field }] });\r\n\r\n\t\t\t\t\tcreateLabel({\r\n\t\t\t\t\t\ttext: (column.title != null) ? column.title : \"\",\r\n\t\t\t\t\t\tcssContainer: \"padding-left: 5px; padding-right: 5px;\"\r\n\t\t\t\t\t}, divColumn)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._divHeaderSpace = div(this._divTitle, { css: \"background-color: #e3f1fa; width: 17px; display: none;\" })\r\n\t\t\t}\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Toolbar\r\n\t\tif (options.toolbar != null)\r\n\t\t{\r\n\t\t\tthis._divToolbar = puma(\"<div id='\" + element.id + \"Toolbar' class='treeView_divToolbar'></div>\").vrPrependToPuma(this.element())[0] as HTMLDivElement;\r\n\r\n\t\t\tfor (let toolbarItem of options.toolbar)\r\n\t\t\t\tthis.addToolbarItem(toolbarItem);\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Filter\r\n\t\tlet timeout = 0;\r\n\t\tthis._txtSearchFilter = createTextBox(\r\n\t\t\t{\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\ticon: IconClassLight.Search,\r\n\t\t\t\tplaceholder: \"Cerca...\",\r\n\t\t\t\tclass: \"vrTreeViewFilter\",\r\n\t\t\t\tvisible: options.filter !== false,\r\n\t\t\t\tcssContainer: \"margin-top: 1px;\",\r\n\t\t\t\tonKeyDown: (e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.limitInputByDataSource(e.sender.element() as HTMLInputElement, e);\r\n\t\t\t\t},\r\n\t\t\t\tonKeyUp: (e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.limitInputByDataSource(e.sender.element() as HTMLInputElement, e);\r\n\t\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\t\ttimeout = window.setTimeout(() => \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet text: string = e.sender.value();\r\n\t\t\t\t\t\tthis.filter(text);\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t}\r\n\t\t\t}, this.element());\r\n\t\t//#endregion\r\n\r\n\t\tlet titleHeight = (options.title != null) ? 29 : 0;\r\n\t\tlet filterHeight = (options.filter !== false) ? 27 : 0;\r\n\t\tlet toolbarHeight = (options.toolbar != null) ? 34 : 0;\r\n\t\tthis._divContent = div(this.element(), { css: \"display: flex; height: Calc(100% - \" + (titleHeight + filterHeight + toolbarHeight) + \"px);\", class: \"vrTreeViewDivContent\" })\r\n\r\n\t\tif (options.rowHeight != 27)\r\n\t\t{\r\n\t\t\taddCssStyle(`\r\n\t\t\t\t#` + this.element().id + ` .vrTreeViewLiLink::after {\r\n\t\t\t\t\ttop: ` + (options.rowHeight / 2) + `px !important;\r\n\t\t\t\t}\r\n\t\t\t\t#` + this.element().id + ` .vrTreeViewLiLink:last-child::before {\r\n\t\t\t\t\theight: ` + ((options.rowHeight / 2) + 1) + `px !important;\r\n\t\t\t\t}\r\n\t\t\t\t#` + this.element().id + ` .vrTreeViewLiLink.vrTreeViewLiFirstChild:last-child::before {\r\n\t\t\t\t\theight: 0px !important;\r\n\t\t\t\t}\r\n\t\t\t`);\r\n\t\t}\r\n\r\n\t\t//#region Datasource\r\n\t\tif (options.datasource != null)\r\n\t\t\tthis.datasource(options.datasource);\r\n\t\t//#endregion\r\n\r\n\t\t//#region Rebind\r\n\t\tif (options.rebind != null && options.rebind.rebindAtStartup === true)\r\n\t\t\tthis.doWebApiCall(options.rebind, TreeViewRequestTypeEnum.Rebind);\r\n\t\t//#endregion\r\n\t}\r\n\r\n\t//#region Methods\r\n\tdatasource(items?: any[]): any[]\r\n\t{\r\n\t\tif (items != null)\r\n\t\t{\r\n\t\t\tthis._items = items;\r\n\t\t\tif (this.getRootItems().length == 0)\r\n\t\t\t\tpuma(this.element()).addClass(\"vrTreeViewFlat\");\r\n\t\t\telse\r\n\t\t\t\tpuma(this.element()).removeClass(\"vrTreeViewFlat\");\r\n\r\n\t\t\t//#region Get info before rebind\r\n\t\t\tthis._tempRebindInfo = new TempRebindInfo();\r\n\t\t\tthis._tempRebindInfo.selectedValue = this.value();\r\n\r\n\t\t\tlet parentExpandedValueList: string[] = [];\r\n\t\t\tlet expandedList = puma(this.container()).find(\".vrTreeViewLi .caret-down\");\r\n\t\t\tfor (let expanded of Array.from(expandedList))\r\n\t\t\t\tparentExpandedValueList.push((expanded as any).parentElement!.getAttribute(\"value\")!);\r\n\r\n\t\t\tthis._tempRebindInfo.parentExpandedValueList = parentExpandedValueList;\r\n\r\n\t\t\tlet firstUl = puma(this.container()).find(\".vrTreeViewUl\").first();\r\n\t\t\tif (firstUl[0] != null)\r\n\t\t\t\tthis._tempRebindInfo.yPosition = firstUl[0].scrollTop;\r\n\t\t\t//#endregion\r\n\r\n\t\t\tthis.drawDataSource();\r\n\r\n\t\t\t//#region Keep info after rebind\r\n\t\t\tfor (let parentExpandedValue of this._tempRebindInfo!.parentExpandedValueList)\r\n\t\t\t{\r\n\t\t\t\tlet li = this._dictionaryValueLi.get(parentExpandedValue);\r\n\t\t\t\tif (li != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet divIconExpandCollpase = puma(li).find(\".vrTreeViewDivIconExpand\")[0];\r\n\t\t\t\t\tif (divIconExpandCollpase != null && puma(divIconExpandCollpase).hasClass(\"caret-right\"))\r\n\t\t\t\t\t\tpuma(divIconExpandCollpase).click();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this._tempRebindInfo.selectedValue != null && this._tempRebindInfo.selectedValue != \"\" && this._tempRebindInfo.selectedValue.length > 0)\r\n\t\t\t\tthis.value(this._tempRebindInfo.selectedValue, false);\r\n\r\n\t\t\tpuma(this.container()).find(\".vrTreeViewUl\").first().scrollTop(this._tempRebindInfo!.yPosition);\r\n\t\t\t//#endregion\r\n\t\t}\r\n\t\treturn this._items;\r\n\t}\r\n\r\n\trebind(parameters?: any | null, loadingElement?: boolean | HTMLElement | JQuery | string): any\r\n\t{\r\n\t\tlet promise = new Promise((callback: Function) =>\r\n\t\t{\r\n\t\t\tlet options = this.getOptions();\r\n\t\t\tif (options.rebind != null)\r\n\t\t\t{\r\n\t\t\t\toptions.rebind.otherParameters = undefined;\r\n\t\t\t\tif (parameters != null)\r\n\t\t\t\t\toptions.rebind.otherParameters = parameters;\r\n\r\n\t\t\t\t(options.rebind as any).tempLoadingElement = loadingElement;\r\n\r\n\t\t\t\tthis.doWebApiCall(options.rebind, TreeViewRequestTypeEnum.Rebind, callback);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn promise;\r\n\t}\r\n\r\n\tupdate()\r\n\t{\r\n\t\tthis.datasource(this.datasource());\r\n\t}\r\n\r\n\tprivate drawDataSource(): void\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tpuma(this._divContent).empty();\r\n\r\n\t\tlet items = this.datasource();\r\n\t\tif (items.length == 1 && items[0] == null)\r\n\t\t\treturn;\r\n\r\n\t\tlet divTreeView = div(this._divContent, { css: \"width: 100%;\" });\r\n\r\n\t\tthis._dictionaryValueLi = new Map<string, HTMLElement[]>();\r\n\t\tthis._dictionaryLiValue = new Map<HTMLElement, string>();\r\n\t\titems = items.filter(k => k.parentValue == null || k.parentValue == \"0\" || k.parentValue == \"\");\r\n\t\tthis.drawItems(items, divTreeView);\r\n\r\n\t\t//#region Alternate color\r\n\t\tif (options.alternateColor)\r\n\t\t{\r\n\t\t\twindow.setTimeout(() =>\r\n\t\t\t{\r\n\t\t\t\tlet odd = true;\r\n\t\t\t\tfor (let item of Array.from<HTMLElement>(puma(this.container()).find(\".vrTreeViewDivItemContainer\")))\r\n\t\t\t\t{\r\n\t\t\t\t\todd = !odd;\r\n\t\t\t\t\tif (odd)\r\n\t\t\t\t\t\t$(item).css(\"background-color\", \"#fff\");\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\t$(item).css(\"background-color\", \"#f3f3f3\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\tif (this._lblTitle != null)\r\n\t\t{\r\n\t\t\tthis._lblTitle.width(\"Calc(100% - \" + (this.widthColumns()) + \"px)\");\r\n\t\t\tthis._lblTitle.element().style.cssText += \"width: Calc(100% - 10px) !important;\";\r\n\t\t}\r\n\r\n\t\t//Scrollbar\r\n\t\tthis.manageScrollbar();\r\n\r\n\t\t//Filter\r\n\t\tif (this._txtSearchFilter.value() != null && this._txtSearchFilter.value() != \"\")\r\n\t\t\tthis.filter(this._txtSearchFilter.value());\r\n\t}\r\n\r\n\tprivate manageScrollbar()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (puma(this.container()).find(\".vrTreeViewUl\").first().vrHasScrollBar())\r\n\t\t{\r\n\t\t\tif (options.columns != null)\r\n\t\t\t{\r\n\t\t\t\tpuma(this._divHeaderSpace).show();\r\n\r\n\t\t\t\tif (this._lblTitle != null)\r\n\t\t\t\t\tthis._lblTitle.width(\"Calc(100% - \" + (this.widthColumns() + 17) + \"px)\");\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t\tpuma(this._divHeaderSpace).hide();\r\n\t}\r\n\r\n\tprivate drawItems(items: any[], elementToAppend: HTMLElement): void\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (items.length == 0)\r\n\t\t\treturn;\r\n\r\n\t\tlet ul = puma(\"<ul class='vrTreeViewUl' style='height: 100%; overflow-y: auto;'></ul>\").vrAppendToPuma(elementToAppend);\r\n\t\tlet i = 0;\r\n\t\tfor (let item of items)\r\n\t\t{\r\n\t\t\tif (item.value == null)\r\n\t\t\t\titem.value = item.text;\r\n\r\n\t\t\tlet liClassShowLink = (options.showLink) ? \"vrTreeViewLiLink\" : \"\";\r\n\t\t\tlet li = puma(\"<li class='vrTreeViewLi \" + liClassShowLink + \"' tabindex='-1' parentValue='\" + item.parentValue + \"' value='\" + item.value + \"'></li>\").vrAppendToPuma(ul);\r\n\r\n\t\t\tthis._dictionaryLiValue.set(li[0], item.value);\r\n\t\t\tif (this._dictionaryValueLi.has(item.value))\r\n\t\t\t{\r\n\t\t\t\tlet actualLiList = this._dictionaryValueLi.get(item.value)!;\r\n\t\t\t\tactualLiList.push(li[0]);\r\n\t\t\t\tthis._dictionaryValueLi.set(item.value, actualLiList);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tthis._dictionaryValueLi.set(item.value, [li[0]]);\r\n\r\n\t\t\t//#region Tree mode\r\n\t\t\tif (options.treeMode == TreeModeEnum.AllCollapsed)\r\n\t\t\t{\r\n\t\t\t\tif (item.parentValue != null && item.parentValue != \"0\")\r\n\t\t\t\t\tpuma(li).closest(\".vrTreeViewUl\").hide();\r\n\t\t\t}\r\n\t\t\telse if (options.treeMode == TreeModeEnum.OnlyFirstLevelExpanded)\r\n\t\t\t{\r\n\t\t\t\tif (puma(li).parents(\".vrTreeViewUl\").length > 2)\r\n\t\t\t\t\tpuma(li).closest(\".vrTreeViewUl\").hide();\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\tlet children = this.getOnlyChildrenItems(item);\r\n\t\t\tif (children.length > 0)\r\n\t\t\t{\r\n\t\t\t\tif (options.spaceBetweenGroups && i > 0)\r\n\t\t\t\t\tli[0].style.cssText += \"margin-top: 20px;\";\r\n\r\n\t\t\t\t//#region Icon expand/collapse\r\n\t\t\t\tlet iconClassForDiv = \"\";\r\n\t\t\t\tlet iconClass = IconClassLight.CaretRight;\r\n\t\t\t\tif (options.treeMode == TreeModeEnum.AllCollapsed)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (item.parentValue != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticonClass = IconClassLight.CaretRight;\r\n\t\t\t\t\t\ticonClassForDiv = \"caret-right\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (options.treeMode == TreeModeEnum.OnlyFirstLevelExpanded)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (puma(li).parents(\".vrTreeViewUl\").length == 1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticonClass = IconClassLight.CaretDown;\r\n\t\t\t\t\t\ticonClassForDiv = \"caret-down\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticonClass = IconClassLight.CaretRight;\r\n\t\t\t\t\t\ticonClassForDiv = \"caret-right\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\ticonClass = IconClassLight.CaretDown;\r\n\t\t\t\t\ticonClassForDiv = \"caret-down\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet divIcon = puma(\"<div class='vrTreeViewDivIconExpand \" + iconClassForDiv + \"' style='height: \" + options.rowHeight + \"px;'></div>\").vrAppendToPuma(li);\r\n\t\t\t\tpuma(UtilityManager.createIcon(iconClass)).vrAppendToPuma(divIcon);\r\n\t\t\t\tpuma(divIcon).click((e: any) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tpuma(e.currentTarget).children(\"i\").removeClass(IconClassLight.CaretRight + \" \" + IconClassLight.CaretDown);\r\n\t\t\t\t\tpuma(e.currentTarget).removeClass(\"caret-right caret-down\");\r\n\r\n\t\t\t\t\tlet ulChildren = puma(e.currentTarget).siblings(\".vrTreeViewUl\");\r\n\t\t\t\t\tif (ulChildren.first().is(\":visible\"))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tulChildren.hide();\r\n\t\t\t\t\t\tpuma(e.currentTarget).children(\"i\").addClass(IconClassLight.CaretRight);\r\n\t\t\t\t\t\tpuma(e.currentTarget).addClass(\"caret-right\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tulChildren.show();\r\n\t\t\t\t\t\tpuma(e.currentTarget).children(\"i\").addClass(IconClassLight.CaretDown);\r\n\t\t\t\t\t\tpuma(e.currentTarget).addClass(\"caret-down\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.manageScrollbar();\r\n\t\t\t\t});\r\n\t\t\t\t//#endregion\r\n\t\t\t}\r\n\r\n\t\t\tlet treeViewDivItemContainer = puma(\"<div class='vrTreeViewDivItemContainer' style='height: \" + options.rowHeight + \"px;'></div>\").vrAppendToPuma(li);\r\n\t\t\tif (options.checkboxes)\r\n\t\t\t{\r\n\t\t\t\tlet checkBox = puma(\"<input type='checkbox' class='vrCheckBox'></input>\").vrAppendToPuma(treeViewDivItemContainer);\r\n\t\t\t\tpuma(checkBox).click((e: JQuery.ClickEvent) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tlet isChecked = e.currentTarget.checked;\r\n\t\t\t\t\tlet value = this._dictionaryLiValue.get(puma(e.currentTarget).closest(\"li\")[0])!;\r\n\r\n\t\t\t\t\tif (isChecked)\r\n\t\t\t\t\t\tthis._checkedValues.push(value);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthis._checkedValues.vrDelete(value);\r\n\r\n\t\t\t\t\tlet targetItem = this.datasource().filter(k => k.value == value)[0];\r\n\t\t\t\t\tif (targetItem != null && this.getOnlyChildrenItems(targetItem).length > 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet childrenItems = this.getAllChildrenItems(targetItem);\r\n\t\t\t\t\t\tif (e.currentTarget.checked)\r\n\t\t\t\t\t\t\tthis._checkedValues.vrPushRange(childrenItems.map(k => k.value));\r\n\r\n\t\t\t\t\t\tlet childrenCheckboxes = this.getChildrenCheckboxElements<JQuery>(targetItem, false);\r\n\t\t\t\t\t\tpuma(childrenCheckboxes).prop(\"checked\", e.currentTarget.checked);\r\n\r\n\t\t\t\t\t\tfor (let childItem of childrenItems)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (!e.currentTarget.checked)\r\n\t\t\t\t\t\t\t\tthis._checkedValues.vrDelete(childItem.value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\tthis._isChecked = e.currentTarget.checked;\r\n\r\n\t\t\t\t\tif (!this._isChecked)\r\n\t\t\t\t\t\tthis._checkedValues.vrDelete(item.value);\r\n\r\n\t\t\t\t\t//#region Other checkboxes same value\r\n\t\t\t\t\tlet comboItemTexts: HTMLSpanElement[] = [];\r\n\t\t\t\t\tlet liList = this._dictionaryValueLi.get(item.value)!;\r\n\t\t\t\t\tfor (let li of liList)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet comboItemText = puma(li).find(\".vrTreeViewItemText\")[0];\r\n\t\t\t\t\t\tcomboItemTexts.push(comboItemText);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (let comboItemText of comboItemTexts)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet checkBox = puma(comboItemText).siblings(\"input\");\r\n\t\t\t\t\t\tpuma(checkBox).prop(\"checked\", this._isChecked);\r\n\t\t\t\t\t\tcheckBox[0].checked = this._isChecked;\r\n\t\t\t\t\t\tpuma(checkBox).removeClass(\"indeterminateVrCheckbox\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (let otherItem of this.datasource().filter(k => k.value == item.value))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet parentChecked = this.manageCheckParent(otherItem);\r\n\t\t\t\t\t\tif (!parentChecked && otherItem.parentValue != null)\r\n\t\t\t\t\t\t\tthis._checkedValues.vrDelete(otherItem.parentValue);\r\n\t\t\t\t\t\telse if (parentChecked && otherItem.parentValue != null && !this._checkedValues.includes(otherItem.parentValue))\r\n\t\t\t\t\t\t\tthis._checkedValues.push(otherItem.parentValue);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\tlet parentChecked = this.manageCheckParent(item);\r\n\t\t\t\t\tif (!parentChecked && item.parentValue != null)\r\n\t\t\t\t\t\tthis._checkedValues.vrDelete(item.parentValue);\r\n\t\t\t\t\telse if (parentChecked && item.parentValue != null && !this._checkedValues.includes(item.parentValue))\r\n\t\t\t\t\t\tthis._checkedValues.push(item.parentValue);\r\n\r\n\t\t\t\t\tthis._tempCheckedValue = item.value;\r\n\t\t\t\t\tthis._checkedValues = this._checkedValues.vrDistinct();\r\n\t\t\t\t\tthis.value(this._checkedValues);\r\n\t\t\t\t\tthis._tempCheckedValue = null;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tlet classIfCheckbox = (options.checkboxes) ? \"vrTreeViewItemTextCheckbox\" : \"\";\r\n\r\n\t\t\tlet spanTreeItemTextContainer = puma(\"<span class='vrTreeViewItemTextContainer'></span>\").vrAppendToPuma(treeViewDivItemContainer);\r\n\t\t\tspanTreeItemTextContainer[0].style.cssText += \"width: Calc(100% - \" + (this.widthColumns() + 1) + \"px);\";\r\n\r\n\t\t\tlet treeViewItemText = puma(\"<span title='\" + item.text + \"' text='\" + item.text.replace(/'/g, \"&#39;\") + \"' class='vrTreeViewItemText \" + classIfCheckbox + \"'></span>\").vrAppendToPuma(spanTreeItemTextContainer);\r\n\r\n\t\t\t//#region Text\r\n\t\t\tif (options.template == null)\r\n\t\t\t{\r\n\t\t\t\tlet rowText = item.text.replace(/'/g, \"&#39;\");\r\n\t\t\t\tif (item.icon != null)\r\n\t\t\t\t\trowText = \"<i class='\" + item.icon + \"' style='margin-right: 5px;'></i>\" + rowText;\r\n\r\n\t\t\t\tlet styleRow = \"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: inline-block;\";\r\n\t\t\t\tif (options.rowLine != null && options.rowLine > 1)\r\n\t\t\t\t\tstyleRow = \"display: -webkit-inline-box; overflow: hidden; -webkit-line-clamp: \" + options.rowLine + \"; -webkit-box-orient: vertical;white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;\";\r\n\r\n\t\t\t\trowText = \"<span style='\" + styleRow + \"'>\" + rowText + \"</span>\";\r\n\t\t\t\tpuma(rowText).vrAppendToPuma(treeViewItemText);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tlet templateEvent = new TreeViewTemplateEvent();\r\n\t\t\t\ttemplateEvent.sender = this;\r\n\t\t\t\ttemplateEvent.dataItem = item;\r\n\t\t\t\ttemplateEvent.container = treeViewItemText[0];\r\n\r\n\t\t\t\tlet templateResult = options.template(templateEvent);\r\n\t\t\t\tif (typeof (templateResult) == \"string\")\r\n\t\t\t\t{\r\n\t\t\t\t\tlet rowText = templateResult;\r\n\t\t\t\t\tif (item.icon != null)\r\n\t\t\t\t\t\trowText = \"<i class='\" + item.icon + \"' style='margin-right: 5px;'></i>\" + rowText;\r\n\r\n\t\t\t\t\tlet styleRow = \"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: inline-block;\";\r\n\t\t\t\t\tif (options.rowLine != null && options.rowLine > 1)\r\n\t\t\t\t\t\tstyleRow = \"display: -webkit-inline-box; overflow: hidden; -webkit-line-clamp: \" + options.rowLine + \"; -webkit-box-orient: vertical;white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;\";\r\n\r\n\t\t\t\t\trowText = \"<span style='\" + styleRow + \"'>\" + rowText + \"</span>\";\r\n\t\t\t\t\tpuma(rowText).vrAppendToPuma(treeViewItemText);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\tif (item.bold === true)\r\n\t\t\t\ttreeViewItemText[0].style.cssText += \"font-weight: 600;\";\r\n\r\n\t\t\tif (options.showEditButton)\r\n\t\t\t{\r\n\t\t\t\tcreateButton({\r\n\t\t\t\t\ticon: IconClassLight.Edit,\r\n\t\t\t\t\tcssContainer: \"margin-right: 5px;\",\r\n\t\t\t\t\tcss: \"background: none; border: none;\",\r\n\t\t\t\t\tonClick: (e) =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (options.onEdit != null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlet event = new TreeViewEditEvent();\r\n\t\t\t\t\t\t\tevent.sender = this;\r\n\t\t\t\t\t\t\tevent.text = item.text;\r\n\t\t\t\t\t\t\tevent.value = item.value;\r\n\t\t\t\t\t\t\tevent.dataItem = item;\r\n\t\t\t\t\t\t\toptions.onEdit(event);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, treeViewItemText, ControlPositionEnum.Before);\r\n\t\t\t}\r\n\r\n\t\t\t//#region Click\r\n\t\t\tif (options.selectable)\r\n\t\t\t{\r\n\t\t\t\tpuma(treeViewItemText).on(\"mousedown\", (e: JQuery.MouseDownEvent) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tswitch (e.button)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcase 0: // Left\r\n\t\t\t\t\t\tcase 1: // Middle\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlet value = this._dictionaryLiValue.get(puma(e.currentTarget).closest(\"li\")[0]);\r\n\t\t\t\t\t\t\t\tlet item = this.datasource().filter(k => k.value == value)[0];\r\n\t\t\t\t\t\t\t\tif (item != null && (options.parentClickable || !this.getRootValues().includes(item.value))) \r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tif (!options.checkboxes)\r\n\t\t\t\t\t\t\t\t\t\tthis.value(item.value);\r\n\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\tpuma(e.currentTarget).siblings(\".vrCheckBox\").click();\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (options.leftClickForContextMenu)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.showContextMenu(item, e.clientX, puma(e.currentTarget).parent().offset().top + puma(e.currentTarget).parent().height());\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 2: // Right\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (options.rightClickForContextMenu)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.showContextMenu(item, e.clientX, puma(e.currentTarget).parent().offset().top + puma(e.currentTarget).parent().height());\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (options.onDoubleClick != null)\r\n\t\t\t{\r\n\t\t\t\tpuma(treeViewItemText).on(\"dblclick\", (e: JQuery.DoubleClickEvent) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tlet event = new TreeViewDoubleClickEvent();\r\n\t\t\t\t\tevent.sender = this;\r\n\t\t\t\t\tevent.text = item.text;\r\n\t\t\t\t\tevent.value = item.value;\r\n\t\t\t\t\tevent.dataItem = item;\r\n\t\t\t\t\toptions.onDoubleClick!(event);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\t//#region Ellipsis for context menu\r\n\t\t\tif (options.contextMenuItems!.length > 0 && !options.rightClickForContextMenu && !options.leftClickForContextMenu)\r\n\t\t\t{\r\n\t\t\t\tlet btnContextMenu: Button | null = null;\r\n\t\t\t\tpuma(treeViewDivItemContainer).on(\"mouseenter\", (e: JQuery.MouseEnterEvent) => \r\n\t\t\t\t{\r\n\t\t\t\t\tbtnContextMenu = createButton({\r\n\t\t\t\t\t\ticon: IconClassSolid.EllipsisVertical,\r\n\t\t\t\t\t\tcss: \"background: none; border: none;\",\r\n\t\t\t\t\t\tcssContainer: \"margin-left: 10px; margin-top: 2px; height: 17px;\",\r\n\t\t\t\t\t\twidth: 25,\r\n\t\t\t\t\t\tclass: \"vrTreeViewBtnContextMenu\",\r\n\t\t\t\t\t\tonClick: (e) => \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tpuma(treeViewDivItemContainer).addClass(\"hover\");\r\n\t\t\t\t\t\t\tthis.showContextMenu(item, puma(e.sender.container()).offset().left, puma(e.sender.container()).offset().top + puma(e.sender.container()).height())\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, treeViewItemText);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tpuma(treeViewDivItemContainer).on(\"mouseleave\", (e: JQuery.MouseEnterEvent) => \r\n\t\t\t\t{\r\n\t\t\t\t\tif (!puma(treeViewDivItemContainer).hasClass(\"hover\") && btnContextMenu != null)\r\n\t\t\t\t\t\t$(btnContextMenu.container()).remove();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\tif (options.columns != null)\r\n\t\t\t{\r\n\t\t\t\tlet dataItemId = item[options.dataSourceFieldId!];\r\n\t\t\t\tlet rowId = \"row\" + i + \"_\" + dataItemId;\r\n\r\n\t\t\t\t//#region Columns\r\n\t\t\t\tfor (let column of options.columns)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (column.hidden)\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\tlet width = (column.width != null) ? column.width : 100;\r\n\t\t\t\t\twidth -= 10; // Padding\r\n\t\t\t\t\tlet divItem = div(treeViewDivItemContainer, { class: \"vrTreeViewColumnItem\", css: \"height: \" + options.rowHeight + \"px; width: \" + width + \"px;\" })\r\n\r\n\t\t\t\t\tlet field = column.field;\r\n\t\t\t\t\tpuma(divItem).attr(\"field\", field);\r\n\r\n\t\t\t\t\tlet textHTML = (item as any)[field];\r\n\t\t\t\t\tif (textHTML == null)\r\n\t\t\t\t\t\ttextHTML = \"\";\r\n\r\n\t\t\t\t\tif (column.type == null) column.type = TreeViewColumnTypeEnum.String;\r\n\r\n\t\t\t\t\tlet textAlign = TreeViewAlignEnum.Left;\r\n\t\t\t\t\tswitch (column.type)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//#region Number, Currency, Percentage & Duration\r\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Number:\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlet decimalDigits = (column.decimalDigits != null) ? column.decimalDigits : 0;\r\n\t\t\t\t\t\t\t\ttextAlign = TreeViewAlignEnum.Right;\r\n\r\n\t\t\t\t\t\t\t\tif (column.cellSettings == null) column.cellSettings = new TreeViewCellSettings();\r\n\t\t\t\t\t\t\t\tif (column.cellSettings.zeroIfNull == null) column.cellSettings.zeroIfNull = false;\r\n\r\n\t\t\t\t\t\t\t\tif (textHTML === \"\" && column.cellSettings.zeroIfNull === false)\r\n\t\t\t\t\t\t\t\t\ttextHTML = \"\";\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlet formatSettings = new NumberFormatSettings();\r\n\t\t\t\t\t\t\t\t\tformatSettings.useGrouping = column.milesSeparator;\r\n\t\t\t\t\t\t\t\t\tformatSettings.minimumFractionDigits = decimalDigits;\r\n\t\t\t\t\t\t\t\t\tformatSettings.maximumFractionDigits = decimalDigits;\r\n\t\t\t\t\t\t\t\t\ttextHTML = Number(textHTML).vrToNumberString(formatSettings);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Currency:\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlet decimalDigits = (column.decimalDigits != null) ? column.decimalDigits : 2;\r\n\t\t\t\t\t\t\t\ttextAlign = TreeViewAlignEnum.Right;\r\n\r\n\t\t\t\t\t\t\t\tif (column.cellSettings == null) column.cellSettings = new TreeViewCellSettings();\r\n\t\t\t\t\t\t\t\tif (column.cellSettings.zeroIfNull == null) column.cellSettings.zeroIfNull = false;\r\n\r\n\t\t\t\t\t\t\t\tif (textHTML === \"\" && column.cellSettings.zeroIfNull === false)\r\n\t\t\t\t\t\t\t\t\ttextHTML = \"\";\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlet formatSettings = new NumberFormatSettings();\r\n\t\t\t\t\t\t\t\t\tformatSettings.minimumFractionDigits = decimalDigits;\r\n\t\t\t\t\t\t\t\t\tformatSettings.maximumFractionDigits = decimalDigits;\r\n\t\t\t\t\t\t\t\t\ttextHTML = Number(textHTML).vrToCurrencyString(formatSettings);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Percentage:\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlet decimalDigits = (column.decimalDigits != null) ? column.decimalDigits : 2;\r\n\t\t\t\t\t\t\t\ttextAlign = TreeViewAlignEnum.Right;\r\n\r\n\t\t\t\t\t\t\t\tif (column.cellSettings == null) column.cellSettings = new TreeViewCellSettings();\r\n\t\t\t\t\t\t\t\tif (column.cellSettings.zeroIfNull == null) column.cellSettings.zeroIfNull = false;\r\n\r\n\t\t\t\t\t\t\t\tif (textHTML === \"\" && column.cellSettings.zeroIfNull === false)\r\n\t\t\t\t\t\t\t\t\ttextHTML = \"\";\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlet formatSettings = new NumberFormatSettings();\r\n\t\t\t\t\t\t\t\t\tformatSettings.minimumFractionDigits = decimalDigits;\r\n\t\t\t\t\t\t\t\t\tformatSettings.maximumFractionDigits = decimalDigits;\r\n\t\t\t\t\t\t\t\t\ttextHTML = (Number(textHTML) / 100).vrToPercentageString(formatSettings);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Duration:\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (column.cellSettings == null) column.cellSettings = new TreeViewCellSettings();\r\n\t\t\t\t\t\t\t\tif (column.cellSettings.zeroIfNull == null) column.cellSettings.zeroIfNull = false;\r\n\r\n\t\t\t\t\t\t\t\tif (textHTML === \"\" && column.cellSettings.zeroIfNull === false)\r\n\t\t\t\t\t\t\t\t\ttextHTML = \"\";\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlet hours: number = Math.trunc(Number(textHTML) / 60);\r\n\t\t\t\t\t\t\t\t\tlet hoursString = String(hours);\r\n\t\t\t\t\t\t\t\t\tif (hours < 10)\r\n\t\t\t\t\t\t\t\t\t\thoursString = \"0\" + hoursString;\r\n\r\n\t\t\t\t\t\t\t\t\tlet minutes: number = Math.trunc(Number(textHTML) % 60);\r\n\t\t\t\t\t\t\t\t\tlet minutesString = String(minutes);\r\n\t\t\t\t\t\t\t\t\tif (minutes < 10)\r\n\t\t\t\t\t\t\t\t\t\tminutesString = \"0\" + minutesString;\r\n\r\n\t\t\t\t\t\t\t\t\ttextAlign = TreeViewAlignEnum.Center;\r\n\t\t\t\t\t\t\t\t\ttextHTML = hoursString + \":\" + minutesString;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t//#region Date, Time, DateTime\r\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Date:\r\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.DateTime:\r\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Time:\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttextAlign = TreeViewAlignEnum.Center;\r\n\t\t\t\t\t\t\t\tif (column.type == TreeViewColumnTypeEnum.Date)\r\n\t\t\t\t\t\t\t\t\ttextHTML = (textHTML == \"\") ? \"\" : new Date(textHTML).vrToItalyString(DateModeEnum.Date);\r\n\t\t\t\t\t\t\t\telse if (column.type == TreeViewColumnTypeEnum.DateTime)\r\n\t\t\t\t\t\t\t\t\ttextHTML = (textHTML == \"\") ? \"\" : new Date(textHTML).vrToItalyString(DateModeEnum.DateTime, column.showSeconds);\r\n\t\t\t\t\t\t\t\telse if (column.type == TreeViewColumnTypeEnum.Time)\r\n\t\t\t\t\t\t\t\t\ttextHTML = (textHTML == \"\") ? \"\" : new Date(textHTML).vrToItalyString(DateModeEnum.Time, column.showSeconds);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t//#region Checkbox\r\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Checkbox:\r\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Boolean:\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlet checked = (item[field] != null && Boolean(item[field]) == true) ? \"checked='checked'\" : \"\";\r\n\r\n\t\t\t\t\t\t\t\ttextAlign = TreeViewAlignEnum.Center;\r\n\t\t\t\t\t\t\t\ttextHTML = \"<input \" + checked + \" disabled='disabled' dataItemId='\" + dataItemId + \"' id='\" + rowId + \"_\" + column.field + \"' class='vrCheckBox' type='checkbox'></input>\"\r\n\t\t\t\t\t\t\t\t\t+ \"<label class='vrLabel vrCheckBoxLabel' for='\" + rowId + \"_\" + column.field + \"'></label>\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t//#region Color\r\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Color:\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttextAlign = TreeViewAlignEnum.Center;\r\n\t\t\t\t\t\t\t\tif (textHTML.isNotNullOrEmpty())\r\n\t\t\t\t\t\t\t\t\ttextHTML = \"<i class='\" + IconClassLight.Circle + \"' style='width: 20px; height: 20px; color: \" + textHTML + \"; display: inline-flex; align-items: center;'></i>\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdivItem.innerHTML = textHTML;\r\n\r\n\t\t\t\t\t//#region Color\r\n\t\t\t\t\tif (column.cellSettings != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (column.cellSettings.backgroundColor != null)\r\n\t\t\t\t\t\t\tpuma(divItem).css(\"background-color\", column.cellSettings.backgroundColor);\r\n\r\n\t\t\t\t\t\tif (column.cellSettings.color != null)\r\n\t\t\t\t\t\t\tpuma(divItem).css(\"color\", column.cellSettings.color);\r\n\r\n\t\t\t\t\t\tif (column.cellSettings.css != null)\r\n\t\t\t\t\t\t\tdivItem.style.cssText += column.cellSettings.css;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t//#region Text align\r\n\t\t\t\t\tif (column.cellSettings != null)\r\n\t\t\t\t\t\ttextAlign = (column.cellSettings.textAlign != null) ? column.cellSettings.textAlign : textAlign;\r\n\r\n\t\t\t\t\tpuma(divItem).css(\"text-align\", textAlign);\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t//#region Bold\r\n\t\t\t\t\tif ((children.length > 0 && column.boldRoot === true) || column.bold === true)\r\n\t\t\t\t\t\tpuma(divItem).css(\"font-weight\", \"500\");\r\n\t\t\t\t\t//#endregion\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\r\n\t\t\t}\r\n\r\n\t\t\t//#region Right click Context menu\r\n\t\t\tif (options.rightClickForContextMenu || options.leftClickForContextMenu)\r\n\t\t\t{\r\n\t\t\t\tpuma(treeViewDivItemContainer).on(\"contextmenu\", (e: JQuery.ContextMenuEvent) => \r\n\t\t\t\t{\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\t//#region Draggable\r\n\t\t\tif (options.draggable)\r\n\t\t\t{\r\n\t\t\t\tpuma(treeViewDivItemContainer).attr(\"draggable\", \"true\");\r\n\t\t\t\tpuma(treeViewDivItemContainer).on(\"dragstart\", (e: JQuery.DragStartEvent) =>\r\n\t\t\t\t{\r\n\t\t\t\t\twindow.clearTimeout(this._timeoutClick);\r\n\t\t\t\t\tthis._actualDraggedItem = item;\r\n\r\n\t\t\t\t\t//#region Drag Start Event\r\n\t\t\t\t\tif (options.onDragStart != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet dragStartEvent = new TreeViewDragStartEvent();\r\n\t\t\t\t\t\tdragStartEvent.sender = this;\r\n\t\t\t\t\t\tdragStartEvent.target = puma(e.target).closest(\"li\")[0];\r\n\t\t\t\t\t\tdragStartEvent.source = item;\r\n\t\t\t\t\t\toptions.onDragStart(dragStartEvent);\r\n\r\n\t\t\t\t\t\tif (dragStartEvent.isDefaultPrevented())\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\tpuma(e.target).closest(\"li\").addClass(\"vrTreeViewDragStart\");\r\n\t\t\t\t});\r\n\r\n\t\t\t\tpuma(treeViewDivItemContainer).on(\"dragover\", (e: JQuery.DragOverEvent) =>\r\n\t\t\t\t{\r\n\t\t\t\t\t//#region Drag Move Event\r\n\t\t\t\t\tif (options.onDragMove != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet destination = this.datasource().filter(k => k.value == puma(e.target).closest(\"li\").attr(\"value\"))[0];\r\n\t\t\t\t\t\tlet li = puma(e.target).closest(\"li\")[0];\r\n\r\n\t\t\t\t\t\tlet dragMoveEvent = new TreeViewDragMoveEvent();\r\n\t\t\t\t\t\tdragMoveEvent.sender = this;\r\n\t\t\t\t\t\tdragMoveEvent.target = li;\r\n\t\t\t\t\t\tdragMoveEvent.source = item;\r\n\t\t\t\t\t\tdragMoveEvent.destination = destination;\r\n\t\t\t\t\t\toptions.onDragMove(dragMoveEvent);\r\n\r\n\t\t\t\t\t\tif (dragMoveEvent.isDefaultPrevented())\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\tpuma(e.target).closest(\".vrTreeViewDivItemContainer\").addClass(\"vrTreeViewDragOver\");\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tpuma(treeViewDivItemContainer).on(\"dragleave\", (e: JQuery.DragLeaveEvent) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tpuma(e.target).closest(\".vrTreeViewDivItemContainer\").removeClass(\"vrTreeViewDragOver\");\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tpuma(treeViewDivItemContainer).on(\"drop\", (e: JQuery.DropEvent) =>\r\n\t\t\t\t{\r\n\t\t\t\t\t//#region Drag End Event\r\n\t\t\t\t\tif (options.onDragEnd != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet destination = this.datasource().filter(k => k.value == puma(e.target).closest(\"li\").attr(\"value\"))[0];\r\n\t\t\t\t\t\tlet liDestination = puma(e.target).closest(\"li\")[0];\r\n\t\t\t\t\t\tlet ul = puma(liDestination).find(\"ul\");\r\n\t\t\t\t\t\tul.remove();\r\n\r\n\t\t\t\t\t\tlet dragMoveEvent = new TreeViewDragEndEvent();\r\n\t\t\t\t\t\tdragMoveEvent.sender = this;\r\n\t\t\t\t\t\tdragMoveEvent.target = li;\r\n\t\t\t\t\t\tdragMoveEvent.source = this._actualDraggedItem!;\r\n\t\t\t\t\t\tdragMoveEvent.destination = destination;\r\n\t\t\t\t\t\toptions.onDragEnd(dragMoveEvent);\r\n\r\n\t\t\t\t\t\tif (dragMoveEvent.isDefaultPrevented())\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet liSource = this._dictionaryValueLi.get(this._actualDraggedItem!.value);\r\n\t\t\t\t\t\tpuma(liSource).remove();\r\n\r\n\t\t\t\t\t\tlet childrenItems = this.getOnlyChildrenItems(destination);\r\n\t\t\t\t\t\tthis._actualDraggedItem!.parentValue = destination.value;\r\n\t\t\t\t\t\tchildrenItems.push(this._actualDraggedItem!);\r\n\r\n\t\t\t\t\t\tthis.drawItems(childrenItems, liDestination);\r\n\t\t\t\t\t\tpuma(liDestination).find(\"ul\").show();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\tthis._actualDraggedItem = null;\r\n\t\t\t\t\tpuma(this.container()).find(\".vrTreeViewDragOver\").removeClass(\"vrTreeViewDragOver\");\r\n\t\t\t\t\tpuma(this.container()).find(\".vrTreeViewDragStart\").removeClass(\"vrTreeViewDragStart\");\r\n\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\tif (children.length > 0)\r\n\t\t\t\tthis.drawItems(this.getOnlyChildrenItems(item), li);\r\n\r\n\t\t\ti++;\r\n\t\t}\r\n\r\n\t\tlet firstLiChild = puma(this.container()).find(\".vrTreeViewUl\").first().find(\".vrTreeViewLiLink\").first();\r\n\t\tfirstLiChild.addClass(\"vrTreeViewLiFirstChild\");\r\n\t}\r\n\r\n\tprivate getOnlyChildrenItems(parentItem: TreeViewItem): TreeViewItem[]\r\n\t{\r\n\t\treturn this.datasource().filter(k => k.parentValue != null && k.parentValue == parentItem.value);\r\n\t}\r\n\r\n\tgetRootItems(): TreeViewItem[]\r\n\t{\r\n\t\tlet parentItems: TreeViewItem[] = [];\r\n\t\tfor (let item of this.datasource())\r\n\t\t{\r\n\t\t\tif (item == null)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tlet parentValue = item.parentValue;\r\n\t\t\twhile (parentValue != null)\r\n\t\t\t{\r\n\t\t\t\tlet parentItem = this.datasource().filter(k => k.value == parentValue)[0];\r\n\t\t\t\tif (!parentItems.includes(parentItem))\r\n\t\t\t\t\tparentItems.push(parentItem);\r\n\r\n\t\t\t\tparentValue = (parentItem != null) ? parentItem.parentValue : undefined;\r\n\t\t\t\tif (parentItem != null && parentValue == parentItem.value)\r\n\t\t\t\t\tparentValue = undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn parentItems;\r\n\t}\r\n\tgetRootValues(): string[]\r\n\t{\r\n\t\treturn this.getRootItems().filter(k => k != null).map(k => k.value);\r\n\t}\r\n\r\n\tprivate getAllChildrenItems(parentItem: TreeViewItem): TreeViewItem[]\r\n\t{\r\n\t\treturn this.getDataChildrenItems(parentItem);\r\n\t}\r\n\r\n\tprivate getAllChildrenValues(parentItem: TreeViewItem): string[]\r\n\t{\r\n\t\treturn this.getAllChildrenItems(parentItem).map(k => k.value);\r\n\t}\r\n\r\n\tprivate getDataChildrenItems(parentItem?: TreeViewItem | null): TreeViewItem[]\r\n\t{\r\n\t\tlet dataItems = (parentItem == null) ? this.datasource() : this.getOnlyChildrenItems(parentItem);\r\n\t\tlet items: TreeViewItem[] = [];\r\n\t\tfor (let dataElement of dataItems)\r\n\t\t{\r\n\t\t\titems.push(dataElement);\r\n\t\t\tif (this.getOnlyChildrenItems(dataElement).length > 0)\r\n\t\t\t\titems.vrPushRange(this.getDataChildrenItems(dataElement));\r\n\t\t}\r\n\t\treturn items;\r\n\t}\r\n\r\n\tprivate getChildrenCheckboxElements<T extends HTMLInputElement[] | JQuery>(parentItem: TreeViewItem, checked = false, arrayMode = false): T\r\n\t{\r\n\t\tlet liParent = this._dictionaryValueLi.get(parentItem.value);\r\n\t\tlet parentComboItemText = puma(liParent).find(\".vrTreeViewItemText\")[0];\r\n\t\tlet parentCheckbox = puma(parentComboItemText).siblings(\"input\");\r\n\r\n\t\tlet childrenCheckboxElements = puma(parentCheckbox).parent().parent().find(\"input\" + ((checked) ? \":checked\" : \"\"));\r\n\t\tif (puma(childrenCheckboxElements[0]).siblings(\".vrTreeViewItemText\").html() == parentItem.text)\r\n\t\t\tchildrenCheckboxElements.splice(0, 1);\r\n\r\n\t\tif (arrayMode)\r\n\t\t\tchildrenCheckboxElements = Array.from<HTMLInputElement>(childrenCheckboxElements);\r\n\r\n\t\treturn childrenCheckboxElements as T;\r\n\t}\r\n\r\n\tgetCheckedItems(): TreeViewItem[]\r\n\t{\r\n\t\tlet items = this.datasource().filter(k => this._checkedValues.includes(k.value));\r\n\t\treturn items.vrDistinctBy(k => k.value);\r\n\t}\r\n\r\n\tgetCheckedValues(): string[]\r\n\t{\r\n\t\treturn this._checkedValues.vrDistinct();\r\n\t}\r\n\r\n\tgetSelectedItem<T extends TreeViewItem>(): T\r\n\t{\r\n\t\treturn this.datasource().filter(k => k.value == this.value())[0] as T;\r\n\t}\r\n\r\n\tprivate getParentItem(childItem: TreeViewItem): TreeViewItem | null\r\n\t{\r\n\t\tif (childItem.parentValue != null)\r\n\t\t\treturn this.datasource().filter(k => k.value == childItem.parentValue)[0];\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate manageCheckParent(item: TreeViewItem): boolean | void\r\n\t{\r\n\t\tlet parentItem = this.getParentItem(item);\r\n\t\tif (parentItem != null)\r\n\t\t{\r\n\t\t\tlet children = this.getChildrenCheckboxElements<HTMLInputElement[]>(parentItem, true, true);\r\n\t\t\tlet tempCheckedElements = children.filter(k => k != null && k.checked);\r\n\r\n\t\t\tlet liParent = this._dictionaryValueLi.get(parentItem.value)!;\r\n\t\t\tlet parentInputElement = puma(liParent).find(\"input\")[0];\r\n\t\t\tif (parentInputElement != null)\r\n\t\t\t{\r\n\t\t\t\tpuma(parentInputElement).removeClass(\"indeterminateVrCheckbox\");\r\n\t\t\t\tparentInputElement.checked = false;\r\n\r\n\t\t\t\tif (this.getAllChildrenItems(parentItem).length == tempCheckedElements.length)\r\n\t\t\t\t{\r\n\t\t\t\t\tparentInputElement.checked = true;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\telse if (tempCheckedElements.length == 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tparentInputElement.checked = false;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tpuma(parentInputElement).addClass(\"indeterminateVrCheckbox\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\r\n\tprivate limitInputByDataSource(element: HTMLInputElement, e: any): void\r\n\t{\r\n\t\tlet filtered = this.getFilteredArrayByInputText(element.value);\r\n\t\tif (filtered.length == 0)\r\n\t\t{\r\n\t\t\tlet newText = element.value;\r\n\t\t\telement.value = newText.substring(0, newText.length - 1);\r\n\t\t\te.preventDefault();\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getFilteredArrayByInputText(value: string): TreeViewItem[]\r\n\t{\r\n\t\tvalue = value.toLowerCase();\r\n\t\tlet filteredArray: TreeViewItem[] = [];\r\n\t\tlet arrayWhereSearch = this.datasource().map(k => String(k.text).toLowerCase());\r\n\t\tarrayWhereSearch!.forEach((k, index) => \r\n\t\t{\r\n\t\t\tif (k.indexOf(value) != -1)\r\n\t\t\t\tfilteredArray.push(this.datasource()[index]);\r\n\t\t});\r\n\t\treturn filteredArray;\r\n\t}\r\n\r\n\tprivate filter(text: string): void\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\r\n\t\tlet element = this._txtSearchFilter.element();\r\n\t\tlet selectionStart = (element as HTMLInputElement).selectionStart;\r\n\t\tlet selectionEnd = (element as HTMLInputElement).selectionEnd;\r\n\r\n\t\tif (text == \"\")\r\n\t\t\tpuma(this.element()).find(\"li\").show();\r\n\t\telse if (!(selectionStart == 0 && selectionEnd == (element as HTMLInputElement).value.length))\r\n\t\t{\r\n\t\t\tpuma(this.element()).find(\"li\").hide();\r\n\r\n\t\t\tlet items = this.getFilteredArrayByInputText(text);\r\n\t\t\tlet values = items.map(k => k.value);\r\n\t\t\tlet texts = items.map(k => k.text);\r\n\r\n\t\t\tfor (let item of items)\r\n\t\t\t{\r\n\t\t\t\tlet parentValue = item.parentValue;\r\n\t\t\t\twhile (parentValue != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet parentItem = this.datasource().filter(k => k.value == parentValue)[0];\r\n\t\t\t\t\tif (!values.includes(parentValue))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalues.push(parentValue);\r\n\t\t\t\t\t\ttexts.push((parentItem != null) ? parentItem.text : \"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparentValue = (parentItem != null) ? parentItem.parentValue : undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!(options.filter as TreeViewFilterSettings).onlyParents)\r\n\t\t\t{\r\n\t\t\t\t//#region Filter all\r\n\t\t\t\tfor (let comboItemText of Array.from<HTMLSpanElement>(puma(this.element()).find(\".vrTreeViewItemText\")))\r\n\t\t\t\t{\r\n\t\t\t\t\tif (texts.includes(puma(comboItemText).attr(\"text\")))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpuma(comboItemText).closest(\".vrTreeViewLi\").show();\r\n\t\t\t\t\t\tpuma(comboItemText).closest(\".vrTreeViewLi\").closest(\".vrTreeViewUl\").show();\r\n\r\n\t\t\t\t\t\tpuma(comboItemText).closest(\".vrTreeViewLi\").find(\".vrTreeViewDivIconExpand\").removeClass(\"caret-right caret-down\");\r\n\t\t\t\t\t\tpuma(comboItemText).closest(\".vrTreeViewLi\").find(\".vrTreeViewDivIconExpand\").children(\"i\").removeClass(IconClassLight.CaretRight + \" \" + IconClassLight.CaretDown);\r\n\t\t\t\t\t\tpuma(comboItemText).closest(\".vrTreeViewLi\").find(\".vrTreeViewDivIconExpand\").addClass(\"caret-down\");\r\n\t\t\t\t\t\tpuma(comboItemText).closest(\".vrTreeViewLi\").find(\".vrTreeViewDivIconExpand\").children(\"i\").addClass(IconClassLight.CaretDown);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t//#region Filter only parents\r\n\t\t\t\tfor (let li of Array.from<HTMLLIElement>(puma(this.element()).find(\".vrTreeViewLi\")))\r\n\t\t\t\t{\r\n\t\t\t\t\tlet value = puma(li).attr(\"value\");\r\n\t\t\t\t\tif (this.isParent(value))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet text = puma(li).find(\".vrTreeViewItemText\").attr(\"text\");\r\n\t\t\t\t\t\tif (texts.includes(text))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tpuma(li).show();\r\n\t\t\t\t\t\t\tpuma(li).find(\"ul\").show();\r\n\t\t\t\t\t\t\tpuma(li).find(\"li\").show();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tisParent(value: string)\r\n\t{\r\n\t\treturn this.getRootValues().includes(value);\r\n\t}\r\n\r\n\tfocus()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (options.filter !== false && puma(this.element()).find(\".vrTreeViewFilter\")[0] != null)\r\n\t\t\tpuma(this.element()).find(\".vrTreeViewFilter\").focus();\r\n\t}\r\n\r\n\tvalue<T extends string | string[] | number>(value?: TreeViewItem | string | number | string[] | number[] | null, triggerChange: boolean = true): T | null\r\n\t{\r\n\t\tif (value === null)\r\n\t\t{\r\n\t\t\tthis.clear();\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tlet options = this.getOptions();\r\n\t\tif (value != null)\r\n\t\t{\r\n\t\t\tif (!options.checkboxes)\r\n\t\t\t\tpuma(this.element()).find(\".vrTreeViewSelectedComboValue\").removeClass(\"vrTreeViewSelectedComboValue\");\r\n\r\n\t\t\tif (typeof (value) == \"string\" || typeof (value) == \"number\")\r\n\t\t\t\tvalue = [String(value)];\r\n\r\n\t\t\tlet comboItem = null;\r\n\t\t\tif (Array.isArray(value))\r\n\t\t\t{\r\n\t\t\t\tvalue = value.vrDistinct();\r\n\t\t\t\tvalue = value.vrToStringArrayList();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tcomboItem = new TreeViewItem();\r\n\t\t\t\tcomboItem.text = value.text;\r\n\t\t\t\tcomboItem.value = value.value;\r\n\t\t\t\tvalue = [comboItem.value];\r\n\t\t\t}\r\n\r\n\t\t\tlet prevValue = UtilityManager.duplicate(this._value);\r\n\t\t\tthis._value = [];\r\n\t\t\tfor (let singleValue of value)\r\n\t\t\t{\r\n\t\t\t\tlet singleItem = this.datasource().filter(k => k.value == singleValue)[0];\r\n\t\t\t\tif (singleItem != null)\r\n\t\t\t\t\tthis._value.push(singleItem.value);\r\n\t\t\t}\r\n\r\n\t\t\tthis._checkedValues = value;\r\n\t\t\tpuma(puma(this.container()).find(\".vrTreeViewLi[value='\" + value + \"'] .vrTreeViewDivItemContainer\")[0]).addClass(\"vrTreeViewSelectedComboValue\");\r\n\r\n\t\t\tif (triggerChange)\r\n\t\t\t{\r\n\t\t\t\tlet changingEvent = new TreeViewChangingEvent();\r\n\t\t\t\tif (options.onBeforeSelect != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet isParent = this.isParent(this._value[0]);\r\n\t\t\t\t\tlet parentItem = null;\r\n\t\t\t\t\tif (isParent)\r\n\t\t\t\t\t\tparentItem = this.datasource().filter(k => k.value == value)[0];\r\n\r\n\t\t\t\t\tchangingEvent.sender = this;\r\n\t\t\t\t\tchangingEvent.previousValue = prevValue;\r\n\t\t\t\t\tchangingEvent.previousCheckedValues = prevValue;\r\n\t\t\t\t\tchangingEvent.value = this._value[0];\r\n\t\t\t\t\tchangingEvent.childrenValues = (isParent) ? this.getAllChildrenValues(parentItem!) : [];\r\n\t\t\t\t\tchangingEvent.checked = this._isChecked;\r\n\t\t\t\t\tchangingEvent.isParent = isParent;\r\n\t\t\t\t\toptions.onBeforeSelect(changingEvent);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!changingEvent.isDefaultPrevented())\r\n\t\t\t\t\tthis.change();\r\n\t\t\t\telse\r\n\t\t\t\t\tthis._value = prevValue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._value == null)\r\n\t\t\treturn null;\r\n\t\telse if (options.checkboxes === true)\r\n\t\t\treturn this._value as T;\r\n\t\telse\r\n\t\t\treturn this._value[0] as T;\r\n\t}\r\n\r\n\ttitle(title?: string)\r\n\t{\r\n\t\tif (title != null)\r\n\t\t{\r\n\t\t\tif (this._lblTitle != null)\r\n\t\t\t\tthis._lblTitle.value(title);\r\n\t\t}\r\n\t\treturn (this._lblTitle != null) ? this._lblTitle.value() : \"\";\r\n\t}\r\n\r\n\tclear(triggerChange = false): void\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tpuma(this.element()).find(\".vrTreeViewSelectedComboValue\").removeClass(\"vrTreeViewSelectedComboValue\");\r\n\t\tthis.unCheckAll(false);\r\n\r\n\t\tpuma(this.element()).find(\"li\").show();\r\n\r\n\t\tthis._value = null;\r\n\t\tif (options.filter !== false && puma(this.element()).find(\".vrTreeViewFilter\")[0] != null)\r\n\t\t\tpuma(this.element()).find(\".vrTreeViewFilter\")[0].value = \"\";\r\n\r\n\t\tif (triggerChange)\r\n\t\t\tthis.change();\r\n\t}\r\n\r\n\tclearItems(): void\r\n\t{\r\n\t\tthis._items = [];\r\n\t\tthis.clear();\r\n\t\tpuma(this.element()).find(\".vrTreeViewUl\").remove();\r\n\t}\r\n\r\n\texcelExport()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (typeof (options.export) == \"boolean\")\r\n\t\t\toptions.export = new TreeViewExportSettings();\r\n\r\n\t\tlet exportSettings = options.export as TreeViewExportSettings;\r\n\r\n\t\tif (exportSettings.numericValueTypeEnum == null) exportSettings.numericValueTypeEnum = TreeViewNumericTypeEnum.Default;\r\n\t\tif (exportSettings.decimalDigits == null)\r\n\t\t{\r\n\t\t\tif (exportSettings.numericValueTypeEnum == TreeViewNumericTypeEnum.Currency\r\n\t\t\t\t|| exportSettings.numericValueTypeEnum == TreeViewNumericTypeEnum.Percentage)\r\n\t\t\t\texportSettings.decimalDigits = 2;\r\n\t\t\telse\r\n\t\t\t\texportSettings.decimalDigits = 0;\r\n\t\t}\r\n\r\n\t\t//#region Generate Excel\r\n\t\tlet generateExcelRequest = new GenerateExcelRequest();\r\n\r\n\t\tlet dataSource: TreeViewItem[] = [];\r\n\t\tif (options.columns != null)\r\n\t\t{\r\n\t\t\tfor (let data of this.datasource())\r\n\t\t\t{\r\n\t\t\t\tlet extraCells: TreeViewItemExtraCell[] = [];\r\n\t\t\t\tfor (let column of options.columns)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet extraCell: TreeViewItemExtraCell = UtilityManager.duplicate(column);\r\n\r\n\t\t\t\t\tlet textHTML = data[column.field];\r\n\t\t\t\t\tswitch (column.type)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//#region Date, DateTime, Time\r\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Date:\r\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.DateTime:\r\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Time:\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (column.type == TreeViewColumnTypeEnum.Date || column.type == TreeViewColumnTypeEnum.DateTime || column.type == TreeViewColumnTypeEnum.Time)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tif (column.type == TreeViewColumnTypeEnum.Date)\r\n\t\t\t\t\t\t\t\t\t\ttextHTML = (textHTML == \"\") ? \"\" : new Date(new Date(textHTML)).vrToItalyString(DateModeEnum.Date);\r\n\t\t\t\t\t\t\t\t\telse if (column.type == TreeViewColumnTypeEnum.DateTime)\r\n\t\t\t\t\t\t\t\t\t\ttextHTML = (textHTML == \"\") ? \"\" : new Date(new Date(textHTML)).vrToItalyString(DateModeEnum.DateTime, column.showSeconds);\r\n\t\t\t\t\t\t\t\t\telse if (column.type == TreeViewColumnTypeEnum.Time)\r\n\t\t\t\t\t\t\t\t\t\ttextHTML = (textHTML == \"\") ? \"\" : new Date(new Date(textHTML)).vrToItalyString(DateModeEnum.Time, column.showSeconds);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t//#region CheckBox\r\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Checkbox:\r\n\t\t\t\t\t\tcase TreeViewColumnTypeEnum.Boolean:\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttextHTML = (data[column.field] == true) ? \"true\" : \"false\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\textraCell.value = textHTML;\r\n\t\t\t\t\textraCells.push(extraCell);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdata.extraCells = extraCells;\r\n\t\t\t\tdataSource.push(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t\tdataSource = this.datasource();\r\n\r\n\t\tgenerateExcelRequest.datasource = dataSource;\r\n\t\tgenerateExcelRequest.title = options.title;\r\n\t\tgenerateExcelRequest.sheetName = exportSettings.sheetName;\r\n\t\tgenerateExcelRequest.fileName = (exportSettings.fileName != null) ? exportSettings.fileName : (\"excel_\" + new Date().vrToItalyString().replace(/\\//g, \"\"));\r\n\t\tgenerateExcelRequest.AuthKey = \"10(P9m+U3a@Mtt-Oeo\";\r\n\t\tgenerateExcelRequest.numericValueTypeEnum = exportSettings.numericValueTypeEnum;\r\n\t\tgenerateExcelRequest.decimalDigits = exportSettings.decimalDigits;\r\n\t\tlet jsonString = JSON.stringify(generateExcelRequest);\r\n\r\n\t\t//#region Multipart\r\n\t\tlet formDataMultipart = null;\r\n\t\tformDataMultipart = new FormData();\r\n\t\tformDataMultipart.append(\"file\", new Blob([jsonString], { type: \"application/json\" }));\r\n\t\t//#endregion\r\n\r\n\t\tshowLoader();\r\n\t\t$.ajax(\r\n\t\t\t{\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t\tbeforeSend: (xhr: any) =>\r\n\t\t\t\t{\r\n\t\t\t\t\t//#region Header parameters\r\n\t\t\t\t\txhr.setRequestHeader(\"Accept-Language\", \"it\");\r\n\t\t\t\t\txhr.setRequestHeader(\"AuthKey\", \"10(P9m+U3a@Mtt-Oeo\");\r\n\t\t\t\t\t//#endregion\r\n\t\t\t\t},\r\n\t\t\t\tcontentType: false,\r\n\t\t\t\tdata: formDataMultipart,\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\tprocessData: false,\r\n\t\t\t\tdataType: \"JSON\",\r\n\t\t\t\turl: \"/api/UtilityWebApi/GenerateExcelTreeView\",\r\n\t\t\t\tsuccess: (response: GenerateExcelResponse, textStatus: string, jqXHR: JQueryXHR) =>\r\n\t\t\t\t{\r\n\t\t\t\t\thideLoader();\r\n\r\n\t\t\t\t\tif (response.downloadUrl != null && response.downloadUrl.length > 0)\r\n\t\t\t\t\t\tlocation.replace(response.downloadUrl);\r\n\r\n\t\t\t\t\tif (!(response as any).Success)\r\n\t\t\t\t\t\talert((response as any).ErrorMessage + \"<br />\" + (response as any).StackTrace, { width: 600, css: \"overflow: auto;\" });\r\n\t\t\t\t},\r\n\t\t\t\terror: (response: JQueryXHR, textStatus: string, errorThrown: string) =>\r\n\t\t\t\t{\r\n\t\t\t\t\thideLoader();\r\n\t\t\t\t\talert(\"Errore nell'esportazione Excel. Contattare l'assistenza.\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t//#endregion\r\n\t}\r\n\r\n\t//#region Columns\r\n\tcolumn(field: string)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tlet column = options.columns!.filter(k => k.field == field)[0];\r\n\t\tlet columnIndex = options.columns!.indexOf(column);\r\n\t\treturn options.columns![columnIndex];\r\n\t}\r\n\r\n\tcolumnTitle(field: string, title?: string)\r\n\t{\r\n\t\tlet column = this.column(field);\r\n\t\tif (column != null)\r\n\t\t{\r\n\t\t\tif (title != null)\r\n\t\t\t{\r\n\t\t\t\tcolumn.title = title;\r\n\t\t\t\tpuma(this._divTitle).find(\"div.vrTreeViewColumn[field='\" + field + \"']\").find(\"label\").html(title);\r\n\t\t\t}\r\n\t\t\treturn column.title;\r\n\t\t}\r\n\t\telse\r\n\t\t\treturn \"\";\r\n\t}\r\n\r\n\tshowColumns(fields: string[], update = true)\r\n\t{\r\n\t\tfor (let field of fields)\r\n\t\t\tthis.showColumn(field, false);\r\n\r\n\t\tif (update)\r\n\t\t\tthis.update();\r\n\t}\r\n\r\n\tshowColumn(field: string, update = true)\r\n\t{\r\n\t\tpuma(this._divTitle).find(\"div.vrTreeViewColumn[field='\" + field + \"']\").show();\r\n\t\tpuma(this._divContent).find(\"div.vrTreeViewDivItemContainer .vrTreeViewColumnItem[field='\" + field + \"']\").show();\r\n\r\n\t\tthis.column(field).hidden = false;\r\n\r\n\t\tif (update)\r\n\t\t\tthis.update();\r\n\t}\r\n\r\n\thideColumns(fields: string[], update = true)\r\n\t{\r\n\t\tfor (let field of fields)\r\n\t\t\tthis.hideColumn(field, false);\r\n\r\n\t\tif (update)\r\n\t\t\tthis.update();\r\n\t}\r\n\r\n\thideColumn(field: string, update = true)\r\n\t{\r\n\t\tpuma(this._divTitle).find(\"div.vrTreeViewColumn[field='\" + field + \"']\").hide();\r\n\t\tpuma(this._divContent).find(\"div.vrTreeViewColumnItem[field='\" + field + \"']\").hide();\r\n\r\n\t\tthis.column(field).hidden = true;\r\n\r\n\t\tif (update)\r\n\t\t\tthis.update();\r\n\t}\r\n\r\n\tshowOnlyThisColumns(fieldList: string[], update = true)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tfor (let column of options.columns!)\r\n\t\t\tthis.hideColumn(column.field, false);\r\n\r\n\t\tfor (let field of fieldList)\r\n\t\t\tthis.showColumn(field, false);\r\n\r\n\t\tif (update)\r\n\t\t\tthis.update();\r\n\t}\r\n\r\n\tprivate widthColumns()\r\n\t{\r\n\t\tlet widthColumns = 0;\r\n\t\tlet options = this.getOptions();\r\n\t\tif (options.columns != null)\r\n\t\t{\r\n\t\t\tfor (let column of options.columns)\r\n\t\t\t{\r\n\t\t\t\tif (column.hidden === true)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\twidthColumns += (column.width != null) ? column.width : 100;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn widthColumns;\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Check\r\n\tcheckAll(triggerChange = true): void\r\n\t{\r\n\t\tthis._checkedValues = this.datasource().map(k => k.value);\r\n\t\tthis._checkedValues = this._checkedValues.vrDistinct();\r\n\t\tthis.value(this.datasource().map(k => k.value), triggerChange);\r\n\t}\r\n\r\n\tunCheckAll(triggerChange = true): void\r\n\t{\r\n\t\tthis._checkedValues = [];\r\n\t\tpuma(this.element()).find(\".vrTreeViewSelectedComboValue\").removeClass(\"vrTreeViewSelectedComboValue\");\r\n\t\tpuma(this.element()).find(\"input\").removeClass(\"indeterminateVrCheckbox\");\r\n\t\tfor (let input of Array.from<HTMLInputElement>(puma(this.element()).find(\"input\")))\r\n\t\t{\r\n\t\t\tpuma(input).prop(\"checked\", false);\r\n\t\t\tinput.checked = false;\r\n\t\t}\r\n\t\tthis.value([], triggerChange);\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Context menu\r\n\tprivate createContextMenu()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (options.contextMenuItems!.length == 0)\r\n\t\t\treturn;\r\n\r\n\t\tif (this._divContextMenu == null)\r\n\t\t\tthis._divContextMenu = div(document.body, { class: \"vrTreeViewContextMenu\", id: this.element().id + \"_divPopup\" });\r\n\r\n\t\tfor (let contextMenuItem of options.contextMenuItems!)\r\n\t\t{\r\n\t\t\tlet divContextMenuItem = div(this._divContextMenu, { class: \"vrTreeViewContextMenuItem\" });\r\n\t\t\tif (contextMenuItem.separator === true)\r\n\t\t\t{\r\n\t\t\t\tcreateSeparator({\r\n\t\t\t\t\torientation: OrientationEnum.Horizontal,\r\n\t\t\t\t\tcssContainer: \"display: flex !important; margin-top: 5px !important; margin-bottom: 5px !important;\"\r\n\t\t\t\t}, divContextMenuItem);\r\n\r\n\t\t\t\tdivContextMenuItem.style.cssText += \"padding-bottom: 0px;\";\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (contextMenuItem.icon != null)\r\n\t\t\t\ticon(contextMenuItem.icon, divContextMenuItem, { css: \"margin-right: 5px;\" });\r\n\r\n\t\t\tcreateLabel({\r\n\t\t\t\ttext: contextMenuItem.text,\r\n\t\t\t\tcssContainer: \"cursor: pointer;\",\r\n\t\t\t\tcss: \"cursor: pointer;\"\r\n\t\t\t}, divContextMenuItem);\r\n\r\n\t\t\tif (contextMenuItem.onClick != null)\r\n\t\t\t{\r\n\t\t\t\tpuma(divContextMenuItem).on(\"click\", (e: JQuery.ClickEvent) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (contextMenuItem.confirmationMessage != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconfirm(contextMenuItem.confirmationMessage).then(() =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.clickOnContextMenuItem(contextMenuItem);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthis.clickOnContextMenuItem(contextMenuItem);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate clickOnContextMenuItem(contextMenuItem: TreeViewContextMenuItem)\r\n\t{\r\n\t\tlet event = new TreeViewContextMenuClickEvent();\r\n\t\tevent.sender = this;\r\n\t\tevent.text = contextMenuItem.text;\r\n\t\tevent.value = contextMenuItem.value;\r\n\t\tevent.dataItem = this._dataItemContextMenu;\r\n\t\tevent.targets = this._dictionaryValueLi.get(this._dataItemContextMenu.value);\r\n\t\tcontextMenuItem.onClick!(event);\r\n\r\n\t\tthis.closeContextMenu();\r\n\t}\r\n\r\n\tprivate showContextMenu(dataItem: any, leftPosition: number, topPosition: number)\r\n\t{\r\n\t\tthis.createContextMenu();\r\n\r\n\t\tif (this._divContextMenu != null)\r\n\t\t{\r\n\t\t\tthis._dataItemContextMenu = dataItem;\r\n\t\t\tpuma(this._divContextMenu).show(200);\r\n\t\t\tpuma(this._divContextMenu).offset({ left: leftPosition, top: topPosition });\r\n\r\n\t\t\tlet zIndex = puma(this._divContextMenu).css(\"z-index\") - 1;\r\n\t\t\tlet background = puma(\"<div class='vrTreeViewBackground' id='vrTreeViewBackground_\" + this.element().id + \"' style='background-color: transparent; display: block; z-index: \" + zIndex + \";'></div>\").vrAppendToPuma(this.container())[0];\r\n\r\n\t\t\tpuma(background).click((e: any) => this.closeContextMenu());\r\n\t\t\tpuma(background).on(\"contextmenu\", (e: JQuery.ContextMenuEvent) =>\r\n\t\t\t{\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprivate closeContextMenu()\r\n\t{\r\n\t\tif (this._divContextMenu != null)\r\n\t\t{\r\n\t\t\tpuma(this.container()).find(\".vrTreeViewDivItemContainer\").removeClass(\"hover\");\r\n\t\t\tpuma(this.container()).find(\".vrTreeViewBtnContextMenu\").parent().remove();\r\n\r\n\t\t\tthis._dataItemContextMenu = null;\r\n\t\t\tpuma(this._divContextMenu).remove();\r\n\t\t\t(this._divContextMenu as any) = null;\r\n\t\t\tpuma(\"#vrTreeViewBackground_\" + this.element().id).remove();\r\n\t\t}\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Manage rows\r\n\tupdateRow(dataItem: any, rebind = true)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tlet dataItemId = dataItem[options.dataSourceFieldId!];\r\n\r\n\t\tlet itemDatasource = this.datasource().filter(k => k[options.dataSourceFieldId!] == dataItemId)[0];\r\n\t\tlet itemDatasourceIndex = this.datasource().indexOf(itemDatasource);\r\n\t\tif (itemDatasource != null)\r\n\t\t{\r\n\t\t\tthis.datasource()[itemDatasourceIndex] = dataItem;\r\n\t\t\tif (rebind)\r\n\t\t\t\tthis.update();\r\n\t\t}\r\n\t}\r\n\r\n\tupdateRows(dataItems: any[], rebind = true)\r\n\t{\r\n\t\tfor (let dataItem of dataItems)\r\n\t\t\tthis.updateRow(dataItem, false);\r\n\r\n\t\tif (rebind)\r\n\t\t\tthis.update();\r\n\t}\r\n\r\n\taddItem(item: TreeViewItem, rebind = true)\r\n\t{\r\n\t\tlet parentItem = this.datasource().filter(k => k.value == item.parentValue)[0];\r\n\t\tif (parentItem != null)\r\n\t\t{\r\n\t\t\tlet childrenItems = this.getOnlyChildrenItems(parentItem);\r\n\t\t\tchildrenItems.push(item);\r\n\t\t\tthis.datasource().push(item);\r\n\r\n\t\t\tlet liDestination = this._dictionaryValueLi.get(parentItem.value)![0];\r\n\t\t\tthis.manageAddUpdateItem(childrenItems, liDestination, rebind);\r\n\t\t}\r\n\t}\r\n\r\n\tupdateItem(item: TreeViewItem, rebind = true)\r\n\t{\r\n\t\tlet parentItem = this.datasource().filter(k => k.value == item.parentValue)[0];\r\n\t\tif (parentItem != null)\r\n\t\t{\r\n\t\t\tlet childrenItems = this.getOnlyChildrenItems(parentItem);\r\n\t\t\tchildrenItems.vrDeleteAllBy(k => k.value == item.value);\r\n\t\t\tchildrenItems.push(item);\r\n\t\t\tthis.updateRow(item, false);\r\n\r\n\t\t\tlet liDestination = this._dictionaryValueLi.get(parentItem.value)![0];\r\n\t\t\tthis.manageAddUpdateItem(childrenItems, liDestination, rebind);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate manageAddUpdateItem(childrenItems: TreeViewItem[], liDestination: HTMLElement, rebind = true)\r\n\t{\r\n\t\tlet ul = puma(liDestination).find(\"ul\");\r\n\t\tul.remove();\r\n\r\n\t\tthis.drawItems(childrenItems, liDestination);\r\n\t\tpuma(liDestination).find(\"ul\").show();\r\n\r\n\t\tif (rebind)\r\n\t\t\tthis.rebind();\r\n\t}\r\n\r\n\tdeleteItem(value: number | string)\r\n\t{\r\n\t\tthis.datasource().vrDeleteAllBy(k => k.value == value);\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Toolbar\r\n\tvisibleToolbar(state?: boolean)\r\n\t{\r\n\t\tif (state != null)\r\n\t\t{\r\n\t\t\tif (state) puma(this._divToolbar).show();\r\n\t\t\telse puma(this._divToolbar).hide();\r\n\t\t}\r\n\t\treturn puma(this._divToolbar).is(\":visible\");\r\n\t}\r\n\r\n\tshowToolbar()\r\n\t{\r\n\t\tthis.visibleToolbar(true);\r\n\t}\r\n\r\n\thideToolbar()\r\n\t{\r\n\t\tthis.visibleToolbar(false);\r\n\t}\r\n\r\n\ttoolbar()\r\n\t{\r\n\t\treturn this._divToolbar;\r\n\t}\r\n\r\n\ttoolbarItem<T extends VrControl>(value: string)\r\n\t{\r\n\t\treturn ControlManager.get<T>(\"treeView-\" + value + \"_\" + this.element().id);\r\n\t}\r\n\r\n\tshowToolbarItem<T extends VrControl>(value: string)\r\n\t{\r\n\t\tthis.toolbarItem<T>(value).show();\r\n\t}\r\n\r\n\thideToolbarItem<T extends VrControl>(value: string)\r\n\t{\r\n\t\tthis.toolbarItem<T>(value).hide();\r\n\t}\r\n\r\n\tenableToolbarItem<T extends VrControl>(value: string)\r\n\t{\r\n\t\tthis.toolbarItem<T>(value).enable();\r\n\t}\r\n\r\n\tdisableToolbarItem<T extends VrControl>(value: string)\r\n\t{\r\n\t\tthis.toolbarItem<T>(value).disable();\r\n\t}\r\n\r\n\tremoveToolbarItem(value: string)\r\n\t{\r\n\t\tlet item = this.toolbarItem(value);\r\n\t\tpuma(item.container()).remove();\r\n\t}\r\n\r\n\taddToolbarItem(toolbarItem: TreeViewToolbarItem)\r\n\t{\r\n\t\tif (toolbarItem.visible == null) toolbarItem.visible = true;\r\n\t\tif (toolbarItem.type == null) toolbarItem.type = TreeViewToolbarItemType.Custom;\r\n\r\n\t\t//#region Toolbar control settings\r\n\t\tlet text = \"\";\r\n\t\tlet iconClass: IconClass | undefined = undefined;\r\n\t\tlet buttonClass = \"\";\r\n\t\tlet enabled = true;\r\n\t\tlet vrButton = false;\r\n\t\tif (toolbarItem.css == null) toolbarItem.css = \"\";\r\n\t\tif (toolbarItem.cssContainer == null) toolbarItem.cssContainer = \"\";\r\n\t\tlet toolbarItemValue = (toolbarItem.value == null) ? ((toolbarItem.text != null) ? toolbarItem.text.replace(/[^a-z0-9\\s]/gi, \"\").replace(/[_\\s]/g, \"\") : \"noValue\") : toolbarItem.value;\r\n\r\n\t\t//#region Toolbar item type\r\n\t\tswitch (toolbarItem.type)\r\n\t\t{\r\n\t\t\tcase TreeViewToolbarItemType.Custom:\r\n\t\t\t\t{\r\n\t\t\t\t\ttext = (toolbarItem.text != null) ? toolbarItem.text : \"\";\r\n\t\t\t\t\ticonClass = (toolbarItem.icon != null) ? toolbarItem.icon : undefined;\r\n\t\t\t\t\tbuttonClass = \"treeView-\" + toolbarItemValue;\r\n\t\t\t\t\tvrButton = true;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase TreeViewToolbarItemType.SplitButton:\r\n\t\t\t\t{\r\n\t\t\t\t\ttext = (toolbarItem.text != null) ? toolbarItem.text : \"\";\r\n\t\t\t\t\ticonClass = (toolbarItem.icon != null) ? toolbarItem.icon : undefined;\r\n\t\t\t\t\tvrButton = false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase TreeViewToolbarItemType.Switch:\r\n\t\t\tcase TreeViewToolbarItemType.ButtonGroup:\r\n\t\t\tcase TreeViewToolbarItemType.CheckBox:\r\n\t\t\tcase TreeViewToolbarItemType.ComboBox:\r\n\t\t\tcase TreeViewToolbarItemType.DatePicker:\r\n\t\t\tcase TreeViewToolbarItemType.Label:\r\n\t\t\tcase TreeViewToolbarItemType.TextBox:\r\n\t\t\t\t{\r\n\t\t\t\t\tvrButton = false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase TreeViewToolbarItemType.Excel:\r\n\t\t\t\t{\r\n\t\t\t\t\ttext = (toolbarItem.text != null) ? toolbarItem.text : \"Excel\";\r\n\t\t\t\t\ticonClass = (toolbarItem.icon != null) ? toolbarItem.icon : IconClassLight.FileExcel;\r\n\t\t\t\t\tbuttonClass = (toolbarItem.value != null) ? \"treeView-\" + toolbarItem.value : \"treeView-excel\";\r\n\t\t\t\t\tvrButton = true;\r\n\t\t\t\t\ttoolbarItem.backgroundColor = \"#008a00\";\r\n\t\t\t\t\ttoolbarItem.textColor = \"#FFF\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase TreeViewToolbarItemType.Separator:\r\n\t\t\t\t{\r\n\t\t\t\t\tbuttonClass = (toolbarItem.value != null) ? \"treeView-\" + toolbarItem.value : \"treeView-separator\";\r\n\t\t\t\t\tenabled = false;\r\n\t\t\t\t\tvrButton = true;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase TreeViewToolbarItemType.Rebind:\r\n\t\t\t\t{\r\n\t\t\t\t\ttext = (toolbarItem.text != null) ? toolbarItem.text : \"Aggiorna\";\r\n\t\t\t\t\ticonClass = (toolbarItem.icon != null) ? toolbarItem.icon : IconClassLight.Refresh;\r\n\t\t\t\t\tbuttonClass = (toolbarItem.value != null) ? \"treeView-\" + toolbarItem.value : \"treeView-rebind\";\r\n\t\t\t\t\tvrButton = true;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#endregion\r\n\r\n\t\tif (vrButton)\r\n\t\t{\r\n\t\t\t//#region Create button\r\n\t\t\tcreateButton(\r\n\t\t\t\t{\r\n\t\t\t\t\ticon: iconClass,\r\n\t\t\t\t\timageUrl: toolbarItem.imageUrl,\r\n\t\t\t\t\tenable: enabled,\r\n\t\t\t\t\ttext: text,\r\n\t\t\t\t\tcolorSettings: { background: toolbarItem.backgroundColor, textColor: toolbarItem.textColor },\r\n\t\t\t\t\tvisible: toolbarItem.visible,\r\n\t\t\t\t\tcssContainer: toolbarItem.cssContainer,\r\n\t\t\t\t\tcss: toolbarItem.css,\r\n\t\t\t\t\tmode: (toolbarItem.primary === true) ? ButtonModeEnum.Primary : undefined,\r\n\t\t\t\t\tclassContainer: \"treeView-toolbarItemsContainer \" + ((toolbarItem.classContainer != null) ? toolbarItem.classContainer : \"\"),\r\n\t\t\t\t\tclass: ((toolbarItem.type == TreeViewToolbarItemType.Separator) ? \"treeView-separator\" : \"\") + \" treeView-toolbarItems \" + buttonClass,\r\n\t\t\t\t\tbadgeSettings: toolbarItem.badge,\r\n\t\t\t\t\tonClick: (e) =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//#region Event\r\n\t\t\t\t\t\tlet toolbarClickEvent = new TreeViewToolbarClickEvent();\r\n\t\t\t\t\t\ttoolbarClickEvent.sender = e.sender;\r\n\t\t\t\t\t\ttoolbarClickEvent.type = toolbarItem.type!;\r\n\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t//#region Confirmation message\r\n\t\t\t\t\t\tif (toolbarItem.confirmationMessage != null && toolbarItem.confirmationMessage.length > 0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tconfirm(toolbarItem.confirmationMessage).then(() =>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this._divToolbar, null, buttonClass + \"_\" + this.element().id);\r\n\t\t\t//#endregion\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t//#region SplitButton\r\n\t\t\tif (toolbarItem.type == TreeViewToolbarItemType.SplitButton)\r\n\t\t\t{\r\n\t\t\t\tlet value = (toolbarItem.value != null) ? toolbarItem.value : \"splitButton\";\r\n\t\t\t\tif (toolbarItem.value == null && toolbarItem.text != null)\r\n\t\t\t\t\tvalue = toolbarItem.text.replace(/[^a-z0-9\\s]/gi, \"\").replace(/[_\\s]/g, \"\") + \"splitButton\";\r\n\r\n\t\t\t\tlet itemClass = \"treeView-\" + value;\r\n\t\t\t\tcreateSplitButton(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: text,\r\n\t\t\t\t\t\ticon: iconClass,\r\n\t\t\t\t\t\timageUrl: toolbarItem.imageUrl,\r\n\t\t\t\t\t\titems: toolbarItem.splitButtonItems!,\r\n\t\t\t\t\t\tvisible: toolbarItem.visible,\r\n\t\t\t\t\t\tcssContainer: toolbarItem.cssContainer + \" vertical-align: top;\",\r\n\t\t\t\t\t\tcss: toolbarItem.css,\r\n\t\t\t\t\t\tclassContainer: \"treeView-toolbarItemsContainer \" + ((toolbarItem.classContainer != null) ? toolbarItem.classContainer : \"\"),\r\n\t\t\t\t\t\tclass: \"treeView-toolbarItems treeView-splitButton \" + itemClass,\r\n\t\t\t\t\t\tonClick: (toolbarItem.onClick == null) ? undefined : (e) =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t//#region Event\r\n\t\t\t\t\t\t\tlet toolbarClickEvent = new TreeViewToolbarClickEvent();\r\n\t\t\t\t\t\t\ttoolbarClickEvent.sender = e.sender;\r\n\t\t\t\t\t\t\ttoolbarClickEvent.type = toolbarItem.type!;\r\n\t\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t\t//#region Confirmation message\r\n\t\t\t\t\t\t\tif (toolbarItem.confirmationMessage != null && toolbarItem.confirmationMessage.length > 0)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tconfirm(toolbarItem.confirmationMessage).then(() =>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n\t\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, this._divToolbar, null, itemClass + \"_\" + this.element().id);\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\t//#region ButtonGroup\r\n\t\t\tif (toolbarItem.type == TreeViewToolbarItemType.ButtonGroup)\r\n\t\t\t{\r\n\t\t\t\tlet itemClass = \"treeView-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"buttonGroup\");\r\n\t\t\t\tcreateButtonGroup(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tselectionMode: SelectionModeEnum.Single,\r\n\t\t\t\t\t\titems: toolbarItem.buttonGroupItems!,\r\n\t\t\t\t\t\tvisible: toolbarItem.visible,\r\n\t\t\t\t\t\tcssContainer: \"top: -1px; \" + toolbarItem.cssContainer,\r\n\t\t\t\t\t\tcss: toolbarItem.css,\r\n\t\t\t\t\t\tclassContainer: \"treeView-toolbarItemsContainer \" + toolbarItem.classContainer,\r\n\t\t\t\t\t\tclass: \"treeView-toolbarItems treeView-buttonGroup \" + itemClass,\r\n\t\t\t\t\t\twidth: \"auto\",\r\n\t\t\t\t\t\tonSelect: (e) => \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t//#region Event\r\n\t\t\t\t\t\t\tlet toolbarClickEvent = new TreeViewToolbarClickEvent();\r\n\t\t\t\t\t\t\ttoolbarClickEvent.sender = e.sender;\r\n\t\t\t\t\t\t\ttoolbarClickEvent.type = toolbarItem.type!;\r\n\t\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t\t//#region Confirmation message\r\n\t\t\t\t\t\t\tif (toolbarItem.confirmationMessage != null && toolbarItem.confirmationMessage.length > 0)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tconfirm(toolbarItem.confirmationMessage).then(() =>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n\t\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, this._divToolbar, null, itemClass + \"_\" + this.element().id);\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\t//#region CheckBox\r\n\t\t\tif (toolbarItem.type == TreeViewToolbarItemType.CheckBox)\r\n\t\t\t{\r\n\t\t\t\tlet itemClass = \"treeView-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"checkbox\");\r\n\t\t\t\tcreateCheckBox(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: toolbarItem.text,\r\n\t\t\t\t\t\tvisible: toolbarItem.visible,\r\n\t\t\t\t\t\tcssContainer: \"top: 3px; \" + toolbarItem.cssContainer,\r\n\t\t\t\t\t\tcss: toolbarItem.css,\r\n\t\t\t\t\t\tclassContainer: \"treeView-toolbarItemsContainer \" + toolbarItem.classContainer,\r\n\t\t\t\t\t\tclass: \"treeView-toolbarItems treeView-checkBox \" + itemClass,\r\n\t\t\t\t\t\tonCheck: (e) => \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t//#region Event\r\n\t\t\t\t\t\t\tlet toolbarClickEvent = new TreeViewToolbarClickEvent();\r\n\t\t\t\t\t\t\ttoolbarClickEvent.sender = e.sender;\r\n\t\t\t\t\t\t\ttoolbarClickEvent.type = toolbarItem.type!;\r\n\t\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t\t//#region Confirmation message\r\n\t\t\t\t\t\t\tif (toolbarItem.confirmationMessage != null && toolbarItem.confirmationMessage.length > 0)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tconfirm(toolbarItem.confirmationMessage).then(() =>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n\t\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, this._divToolbar, null, itemClass + \"_\" + this.element().id);\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\t//#region Label\r\n\t\t\tif (toolbarItem.type == TreeViewToolbarItemType.Label)\r\n\t\t\t{\r\n\t\t\t\tlet itemClass = \"treeView-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"label\");\r\n\t\t\t\tcreateLabel(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: toolbarItem.text,\r\n\t\t\t\t\t\tvisible: toolbarItem.visible,\r\n\t\t\t\t\t\tcssContainer: toolbarItem.cssContainer,\r\n\t\t\t\t\t\tcss: toolbarItem.css,\r\n\t\t\t\t\t\tclassContainer: \"treeView-toolbarItemsContainer \" + toolbarItem.classContainer,\r\n\t\t\t\t\t\tclass: \"treeView-toolbarItems treeView-label \" + itemClass,\r\n\t\t\t\t\t\tcolorSettings:\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tbackground: toolbarItem.backgroundColor,\r\n\t\t\t\t\t\t\ttextColor: toolbarItem.textColor\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonClick: (e) => \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t//#region Event\r\n\t\t\t\t\t\t\tlet toolbarClickEvent = new TreeViewToolbarClickEvent();\r\n\t\t\t\t\t\t\ttoolbarClickEvent.sender = e.sender;\r\n\t\t\t\t\t\t\ttoolbarClickEvent.type = toolbarItem.type!;\r\n\t\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t\t//#region Confirmation message\r\n\t\t\t\t\t\t\tif (toolbarItem.confirmationMessage != null && toolbarItem.confirmationMessage.length > 0)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tconfirm(toolbarItem.confirmationMessage).then(() =>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tthis.toolbarCustomLogic(toolbarItem, toolbarClickEvent);\r\n\t\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, this._divToolbar, null, itemClass + \"_\" + this.element().id);\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\t//#region ComboBox\r\n\t\t\tif (toolbarItem.type == TreeViewToolbarItemType.ComboBox)\r\n\t\t\t{\r\n\t\t\t\tlet itemClass = \"treeView-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"comboBox\");\r\n\r\n\t\t\t\tif (toolbarItem.comboBoxOptions == null) toolbarItem.comboBoxOptions = new ComboBoxOptions();\r\n\t\t\t\ttoolbarItem.comboBoxOptions.classContainer = \"treeView-toolbarItemsContainer \" + toolbarItem.comboBoxOptions.classContainer;\r\n\t\t\t\ttoolbarItem.comboBoxOptions.class = \"treeView-toolbarItems treeView-comboBox \" + itemClass + \" \" + toolbarItem.comboBoxOptions.class;\r\n\t\t\t\tif (toolbarItem.comboBoxOptions.visible == null) toolbarItem.comboBoxOptions.visible = toolbarItem.visible;\r\n\t\t\t\tif (toolbarItem.comboBoxOptions.css == null) toolbarItem.comboBoxOptions.css = toolbarItem.css;\r\n\t\t\t\tif (toolbarItem.comboBoxOptions.cssContainer == null) toolbarItem.comboBoxOptions.cssContainer = toolbarItem.cssContainer + \";\";\r\n\t\t\t\ttoolbarItem.comboBoxOptions.cssContainer += \"vertical-align: top;\";\r\n\r\n\t\t\t\tcreateComboBox(toolbarItem.comboBoxOptions, this._divToolbar, null, itemClass + \"_\" + this.element().id);\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\t//#region DatePicker\r\n\t\t\tif (toolbarItem.type == TreeViewToolbarItemType.DatePicker)\r\n\t\t\t{\r\n\t\t\t\tlet itemClass = \"treeView-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"datePicker\");\r\n\r\n\t\t\t\tif (toolbarItem.datePickerOptions == null) toolbarItem.datePickerOptions = new DatePickerOptions();\r\n\t\t\t\ttoolbarItem.datePickerOptions.classContainer = \"treeView-toolbarItemsContainer \" + toolbarItem.datePickerOptions.classContainer;\r\n\t\t\t\ttoolbarItem.datePickerOptions.class = \"treeView-toolbarItems treeView-datePicker \" + itemClass + \" \" + toolbarItem.datePickerOptions.class;\r\n\t\t\t\tif (toolbarItem.datePickerOptions.visible == null) toolbarItem.datePickerOptions.visible = toolbarItem.visible;\r\n\t\t\t\tif (toolbarItem.datePickerOptions.css == null) toolbarItem.datePickerOptions.css = toolbarItem.css;\r\n\t\t\t\tif (toolbarItem.datePickerOptions.cssContainer == null) toolbarItem.datePickerOptions.cssContainer = toolbarItem.cssContainer;\r\n\t\t\t\ttoolbarItem.datePickerOptions.cssContainer += \"top: -1px; \" + toolbarItem.datePickerOptions.cssContainer;\r\n\r\n\t\t\t\tcreateDatePicker(toolbarItem.datePickerOptions, this._divToolbar, null, itemClass + \"_\" + this.element().id);\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\t//#region TextBox\r\n\t\t\tif (toolbarItem.type == TreeViewToolbarItemType.TextBox)\r\n\t\t\t{\r\n\t\t\t\tlet itemClass = \"treeView-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"textBox\");\r\n\r\n\t\t\t\tif (toolbarItem.textBoxOptions == null) toolbarItem.textBoxOptions = new TextBoxOptions();\r\n\t\t\t\ttoolbarItem.textBoxOptions.classContainer = \"treeView-toolbarItemsContainer \" + toolbarItem.textBoxOptions.classContainer;\r\n\t\t\t\ttoolbarItem.textBoxOptions.class = \"treeView-toolbarItems treeView-textBox \" + itemClass + \" \" + toolbarItem.textBoxOptions.class;\r\n\t\t\t\tif (toolbarItem.textBoxOptions.visible == null) toolbarItem.textBoxOptions.visible = toolbarItem.visible;\r\n\t\t\t\tif (toolbarItem.textBoxOptions.css == null) toolbarItem.textBoxOptions.css = toolbarItem.css;\r\n\t\t\t\tif (toolbarItem.textBoxOptions.cssContainer == null) toolbarItem.textBoxOptions.cssContainer = toolbarItem.cssContainer;\r\n\t\t\t\ttoolbarItem.textBoxOptions.cssContainer += \"top: -1px; \" + toolbarItem.textBoxOptions.cssContainer;\r\n\r\n\t\t\t\tcreateTextBox(toolbarItem.textBoxOptions, this._divToolbar, null, itemClass + \"_\" + this.element().id);\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\t//#region Switch\r\n\t\t\telse if (toolbarItem.type == TreeViewToolbarItemType.Switch)\r\n\t\t\t{\r\n\t\t\t\tif (toolbarItem.switchSettings == null)\r\n\t\t\t\t{\r\n\t\t\t\t\ttoolbarItem.switchSettings = new TreeViewToolbarSwitchSettings();\r\n\t\t\t\t\ttoolbarItem.switchSettings.labelOff = \"\";\r\n\t\t\t\t\ttoolbarItem.switchSettings.labelOn = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (toolbarItem.switchSettings.checked == null) toolbarItem.switchSettings.checked = false;\r\n\t\t\t\tlet itemClass = \"treeView-\" + ((toolbarItem.value != null) ? toolbarItem.value : \"switch\");\r\n\t\t\t\tpuma(this._divToolbar).vrAppendPuma(\"<div id='\" + itemClass + \"_\" + this.element().id + \"' class='treeView-toolbarItems-switch'></div>\");\r\n\t\t\t\tcreateSwitch(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlabelOff: toolbarItem.switchSettings!.labelOff,\r\n\t\t\t\t\t\tlabelOn: toolbarItem.switchSettings!.labelOn,\r\n\t\t\t\t\t\tchecked: toolbarItem.switchSettings.checked,\r\n\t\t\t\t\t\tcssContainer: \"top: -2px; \" + toolbarItem.cssContainer,\r\n\t\t\t\t\t\tcss: toolbarItem.css,\r\n\t\t\t\t\t\tclassContainer: \"treeView-toolbarItemsContainer \" + toolbarItem.classContainer,\r\n\t\t\t\t\t\tvisible: toolbarItem.visible,\r\n\t\t\t\t\t\tonChange: (e) =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (toolbarItem.switchSettings!.onCheck != null)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlet tableSwitchEvent = new TreeViewToolbarSwitchEvent();\r\n\t\t\t\t\t\t\t\ttableSwitchEvent.checked = e.checked;\r\n\t\t\t\t\t\t\t\ttoolbarItem.switchSettings!.onCheck(tableSwitchEvent);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, null, null, itemClass + \"_\" + this.element().id);\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\t\t}\r\n\t}\r\n\r\n\tprivate toolbarCustomLogic(toolbarItem: TreeViewToolbarItem, toolbarClickEvent: TreeViewToolbarClickEvent)\r\n\t{\r\n\t\tswitch (toolbarItem.type)\r\n\t\t{\r\n\t\t\tcase TreeViewToolbarItemType.Rebind:\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.rebind();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase TreeViewToolbarItemType.Excel:\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.excelExport();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif (toolbarItem.onClick != null)\r\n\t\t\ttoolbarItem.onClick(toolbarClickEvent);\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region WebApi\r\n\tprivate doWebApiCall(request: TreeViewWebApiRequest, requestType: TreeViewRequestTypeEnum, promiseCallback?: Function)\r\n\t{\r\n\t\tlet json: any = {};\r\n\t\tjson.AuthKey = request.authKey;\r\n\r\n\t\tif (requestType == TreeViewRequestTypeEnum.Rebind || requestType == TreeViewRequestTypeEnum.Excel)\r\n\t\t{\r\n\t\t\tif (requestType == TreeViewRequestTypeEnum.Rebind)\r\n\t\t\t{\r\n\t\t\t\tif ((request as TreeViewRebindRequest).itemsPropertyName == null)\r\n\t\t\t\t\t(request as TreeViewRebindRequest).itemsPropertyName = \"items\";\r\n\t\t\t}\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Method\r\n\t\tif (!request.method!.startsWith(\"/api/\"))\r\n\t\t{\r\n\t\t\tif (request.method!.startsWith(\"/\"))\r\n\t\t\t\trequest.method!.substring(1);\r\n\r\n\t\t\trequest.method = \"/api/\" + request.method;\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Paramaters\r\n\t\tif (request.otherParameters != null)\r\n\t\t{\r\n\t\t\tlet jsonParameters = Object.getOwnPropertyNames(request.otherParameters);\r\n\t\t\tfor (let param of jsonParameters)\r\n\t\t\t\tjson[param] = request.otherParameters[param];\r\n\t\t}\r\n\r\n\t\tif (request.parameters != null)\r\n\t\t{\r\n\t\t\tlet parameters = request.parameters();\r\n\t\t\tlet jsonParameters = Object.getOwnPropertyNames(parameters);\r\n\t\t\tfor (let param of jsonParameters)\r\n\t\t\t\tjson[param] = parameters[param];\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\tlet jsonS = JSON.stringify(json);\r\n\r\n\t\tif (typeof (request.loadingElement) == \"boolean\")\r\n\t\t{\r\n\t\t\tif (request.loadingElement === false) request.loadingElement = undefined;\r\n\t\t\telse request.loadingElement = document.body;\r\n\t\t}\r\n\t\tshowLoader((request as any).tempLoadingElement != null ? (request as any).tempLoadingElement : request.loadingElement);\r\n\t\t(request as any).tempLoadingElement = undefined;\r\n\r\n\t\t$.ajax({\r\n\t\t\ttype: \"POST\",\r\n\t\t\tcontentType: \"application/json\",\r\n\t\t\tdata: jsonS,\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tprocessData: false,\r\n\t\t\tdataType: \"json\",\r\n\t\t\turl: request.method,\r\n\t\t\tsuccess: (response: any, textStatus: string, jqXHR: JQueryXHR) =>\r\n\t\t\t{\r\n\t\t\t\thideLoader();\r\n\r\n\t\t\t\tif (response != null && (response.Success || response.success))\r\n\t\t\t\t{\r\n\t\t\t\t\t//#region Success notification message\r\n\t\t\t\t\tlet successMessage = request!.successNotificationMessage;\r\n\t\t\t\t\tsuccessMessage = (successMessage == null) ? false : successMessage;\r\n\r\n\t\t\t\t\tif (typeof (successMessage) == \"string\")\r\n\t\t\t\t\t\tsuccessMessage = successMessage;\r\n\r\n\t\t\t\t\tif (typeof (successMessage) == \"string\")\r\n\t\t\t\t\t\tnotify(successMessage);\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t//#region Rebind\r\n\t\t\t\t\tlet rebindAfterSave = request!.rebindGridAfterSave;\r\n\t\t\t\t\trebindAfterSave = (rebindAfterSave == null) ? false : rebindAfterSave;\r\n\r\n\t\t\t\t\tif (rebindAfterSave)\r\n\t\t\t\t\t\tthis.rebind();\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\tif (request!.callbackBeforeDatasourceChange != null)\r\n\t\t\t\t\t\trequest!.callbackBeforeDatasourceChange(response);\r\n\r\n\t\t\t\t\t//#region Set data source if rebind\r\n\t\t\t\t\tif (requestType == TreeViewRequestTypeEnum.Rebind && response[(request as TreeViewRebindRequest).itemsPropertyName!] != null)\r\n\t\t\t\t\t\tthis.datasource(response[(request as TreeViewRebindRequest).itemsPropertyName!]);\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\tif (request!.callback != null)\r\n\t\t\t\t\t\trequest!.callback(response);\r\n\r\n\t\t\t\t\tif (promiseCallback != null)\r\n\t\t\t\t\t\tpromiseCallback();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tlet exception = (response.Exception || response.exception);\r\n\t\t\t\t\tlet exceptionCode = (exception.Code || exception.code);\r\n\t\t\t\t\tif (response != null && exceptionCode == \"403\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlocation.replace(\"/Default.aspx\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//#region Error notification message\r\n\t\t\t\t\tlet errorMessage = request!.errorNotificationMessage;\r\n\t\t\t\t\terrorMessage = (errorMessage == null) ? true : errorMessage;\r\n\r\n\t\t\t\t\tif (errorMessage == true || typeof (errorMessage) == \"string\")\r\n\t\t\t\t\t\tnotify((typeof (errorMessage) == \"string\") ? errorMessage! : ((response != null) ? (response.ExceptionMessage! || response.exceptionMessage) : \"Errore nel salvataggio\"));\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t//#region Rebind\r\n\t\t\t\t\tlet rebindAfterError = request!.rebindGridAfterError;\r\n\t\t\t\t\trebindAfterError = (rebindAfterError == null) ? false : rebindAfterError;\r\n\r\n\t\t\t\t\tif (rebindAfterError)\r\n\t\t\t\t\t\tthis.rebind();\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\tlet closeWindowAfterError = request!.closeWindowAfterError;\r\n\t\t\t\t\tcloseWindowAfterError = (closeWindowAfterError == null) ? false : closeWindowAfterError;\r\n\r\n\t\t\t\t\tif (request!.errorCallback != null)\r\n\t\t\t\t\t\trequest!.errorCallback((response != null) ? (response.ExceptionMessage! || response.exceptionMessage) : \"Errore nel salvataggio\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: (response: JQueryXHR, textStatus: string, errorThrown: string) =>\r\n\t\t\t{\r\n\t\t\t\thideLoader();\r\n\r\n\t\t\t\t//#region Error notification message\r\n\t\t\t\tlet errorMessage = request!.errorNotificationMessage;\r\n\t\t\t\terrorMessage = (errorMessage == null) ? true : errorMessage;\r\n\r\n\t\t\t\tlet message = \"Errore nel salvataggio\";\r\n\t\t\t\tif (response.responseJSON != null)\r\n\t\t\t\t\tmessage = (response.responseJSON.errorMessage != null) ? response.responseJSON.errorMessage : ((response.responseJSON.Message || response.responseJSON.message) + \"<br />\" + (response.responseJSON.ExceptionMessage || response.responseJSON.exceptionMessage));\r\n\t\t\t\telse if (response.responseText != null && response.responseText != \"\")\r\n\t\t\t\t\tmessage = response.responseText;\r\n\t\t\t\telse if (response.statusText != null && response.statusText != \"\")\r\n\t\t\t\t\tmessage = response.statusText;\r\n\t\t\t\telse\r\n\t\t\t\t\tmessage = \"Si è verificato un problema\";\r\n\r\n\t\t\t\tif (response.status == 401)\r\n\t\t\t\t\tmessage = \"Auth key errata\";\r\n\t\t\t\telse if (response.status == 404)\r\n\t\t\t\t\tmessage = \"Web Api non trovata\";\r\n\t\t\t\telse if (response.status == 403)\r\n\t\t\t\t{\r\n\t\t\t\t\tlocation.replace(\"/Default.aspx\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet finalMessage = \"Errore nel salvataggio\";\r\n\t\t\t\tif (errorMessage == true || typeof (errorMessage) == \"string\")\r\n\t\t\t\t{\r\n\t\t\t\t\tfinalMessage = (errorMessage == true) ? message : errorMessage;\r\n\t\t\t\t\tnotify(finalMessage);\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\r\n\r\n\t\t\t\t//#region Rebind\r\n\t\t\t\tlet rebindAfterError = request!.rebindGridAfterError;\r\n\t\t\t\trebindAfterError = (rebindAfterError == null) ? false : rebindAfterError;\r\n\r\n\t\t\t\tif (rebindAfterError)\r\n\t\t\t\t\tthis.rebind();\r\n\t\t\t\t//#endregion\r\n\r\n\t\t\t\tlet closeWindowAfterError = request!.closeWindowAfterError;\r\n\t\t\t\tcloseWindowAfterError = (closeWindowAfterError == null) ? false : closeWindowAfterError;\r\n\r\n\t\t\t\tif (request!.errorCallback != null)\r\n\t\t\t\t\trequest!.errorCallback(finalMessage);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Events\r\n\tchange(callBack?: Function): void\r\n\t{\r\n\t\tlet changeCallBack = this.getOptions().onAfterSelect;\r\n\t\tif (changeCallBack != null)\r\n\t\t{\r\n\t\t\tlet options = this.getOptions();\r\n\t\t\tlet value = (options.checkboxes && this._tempCheckedValue != null) ? this._tempCheckedValue : this.value<string>()!;\r\n\r\n\t\t\tlet isParent = this.isParent(value);\r\n\t\t\tlet parentItem = null;\r\n\t\t\tif (isParent)\r\n\t\t\t\tparentItem = this.datasource().filter(k => k.value == value)[0];\r\n\r\n\t\t\tlet changeEvent = new TreeViewChangeEvent();\r\n\t\t\tchangeEvent.sender = this;\r\n\t\t\tchangeEvent.value = value;\r\n\t\t\tchangeEvent.childrenValues = (isParent) ? this.getAllChildrenValues(parentItem!) : [];\r\n\t\t\tchangeEvent.selectedItem = this.getSelectedItem();\r\n\t\t\tchangeEvent.checked = this._isChecked;\r\n\t\t\tchangeEvent.isParent = isParent;\r\n\t\t\tchangeCallBack!(changeEvent);\r\n\t\t}\r\n\r\n\t\tif (callBack != null)\r\n\t\t\tcallBack();\r\n\t}\r\n\t//#endregion\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.options<TreeViewOptions>();\r\n\t}\r\n\t//#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass TreeViewTemplateEvent\r\n{\r\n\tsender: TreeView;\r\n\tdataItem: any;\r\n\tcontainer: HTMLElement;\r\n}\r\n\r\nclass TreeViewEvent extends VrControlsEvent\r\n{\r\n\tsender: TreeView;\r\n\tvalue: any;\r\n\tchildrenValues: string[];\r\n\tselectedItem?: TreeViewItem;\r\n\tchecked: boolean;\r\n\tisParent?: boolean;\r\n}\r\n\r\nclass TreeViewChangeEvent extends TreeViewEvent\r\n{\r\n\r\n}\r\n\r\nclass TreeViewChangingEvent extends TreeViewEvent\r\n{\r\n\tpreviousValue?: string | null;\r\n\tpreviousCheckedValues?: string[] | null;\r\n}\r\n\r\nexport class TreeViewContextMenuClickEvent extends VrControlsEvent\r\n{\r\n\tsender: TreeView;\r\n\ttext?: string;\r\n\tvalue?: string;\r\n\tdataItem: any;\r\n\ttargets?: HTMLElement[];\r\n}\r\n\r\nclass TreeViewDoubleClickEvent extends VrControlsEvent\r\n{\r\n\tsender: TreeView;\r\n\ttext?: string;\r\n\tvalue?: string;\r\n\tdataItem: any;\r\n}\r\n\r\nclass TreeViewEditEvent extends VrControlsEvent\r\n{\r\n\tsender: TreeView;\r\n\ttext?: string;\r\n\tvalue?: string;\r\n\tdataItem: any;\r\n}\r\n\r\nclass TreeViewDragEvent extends VrControlsEvent\r\n{\r\n\tsender: TreeView;\r\n\ttarget: HTMLElement;\r\n\tsource: TreeViewItem;\r\n\tdestination?: TreeViewItem;\r\n}\r\n\r\nclass TreeViewDragStartEvent extends TreeViewDragEvent { }\r\nclass TreeViewDragMoveEvent extends TreeViewDragEvent { }\r\nclass TreeViewDragEndEvent extends TreeViewDragEvent { }\r\n\r\nclass TreeViewExportSettings\r\n{\r\n\tfileName?: string;\r\n\tsheetName?: string;\r\n\tnumericValueTypeEnum?: TreeViewNumericTypeEnum;\r\n\tdecimalDigits?: number;\r\n}\r\n\r\nclass TreeViewSumSettings\r\n{\r\n\tautoCalc?: boolean;\r\n}\r\n\r\nclass GenerateExcelRequest\r\n{\r\n\tpublic sheetName?: string;\r\n\tpublic fileName: string;\r\n\tpublic AuthKey: string;\r\n\tpublic datasource: TreeViewItem[];\r\n\tpublic numericValueTypeEnum: TreeViewNumericTypeEnum;\r\n\tpublic decimalDigits: number;\r\n\tpublic title?: string;\r\n}\r\n\r\nclass GenerateExcelResponse\r\n{\r\n\tpublic downloadUrl: string;\r\n}\r\n\r\nclass TempRebindInfo\r\n{\r\n\tyPosition: number;\r\n\tselectedValue: any;\r\n\tparentExpandedValueList: string[];\r\n}\r\n\r\nexport class TreeViewHeaderAndCellSettings\r\n{\r\n\ttextAlign?: TreeViewAlignEnum;\r\n\tbackgroundColor?: string;\r\n\tcolor?: string;\r\n\tcss?: string;\r\n}\r\n\r\nexport class TreeViewHeaderSettings extends TreeViewHeaderAndCellSettings\r\n{\r\n\ticon?: IconClass;\r\n}\r\n\r\nexport class TreeViewCellSettings extends TreeViewHeaderAndCellSettings\r\n{\r\n\tzeroIfNull?: boolean;\r\n}\r\n\r\nclass TreeViewWebApiRequest\r\n{\r\n\tauthKey?: string;\r\n\tmethod?: string;\r\n\tsuccessNotificationMessage?: boolean | string;\r\n\terrorNotificationMessage?: boolean | string;\r\n\trebindGridAfterSave?: boolean;\r\n\trebindGridAfterError?: boolean;\r\n\tcloseWindowAfterError?: boolean;\r\n\totherParameters?: any;\r\n\tloadingElement?: boolean | HTMLElement | JQuery | string;\r\n\r\n\tcallback?: (response?: any) => void;\r\n\tcallbackBeforeDatasourceChange?: (response?: any) => void;\r\n\terrorCallback?: (message?: string) => void;\r\n\tparameters?: () => any;\r\n}\r\n\r\nclass TreeViewRebindRequest extends TreeViewWebApiRequest\r\n{\r\n\titemsPropertyName?: string;\r\n\trebindAtStartup?: boolean;\r\n}\r\n\r\nenum TreeViewRequestTypeEnum\r\n{\r\n\tRebind = 1,\r\n\tExcel = 3\r\n}\r\n//#endregion","import { UtilityManager } from \"../../../src/managers/utilityManager\";\r\nimport { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { confirm, ButtonGroupItem, ComboBoxTypeEnum, ControlTypeEnum, createButton, createButtonGroup, createComboBox, createDatePicker, DateFormatEnum, DayOfWeekEnum, div, IconClassLight, IconClass, NotifierTypeEnum, notify, puma, SchedulerData, SchedulerNavigateActionEnum, SchedulerResource, SchedulerSlotElement, SchedulerView, SchedulerViewEnum, createSwitch, showLoader, hideLoader, SchedulerSaturationInfo, SchedulerSaturationDay, SchedulerSaturationWeekByResource, SchedulerSaturationFourWeeks, SaturationResource } from \"../vr\";\r\nimport { Button } from \"./button\";\r\nimport { ButtonGroup } from \"./buttonGroup\";\r\nimport { ComboBox } from \"./comboBox\";\r\nimport { DatePicker } from \"./datePicker\";\r\nimport { Switch } from \"./switch\";\r\n\r\ndeclare var html2canvas: any;\r\ndeclare var jsPDF: any;\r\n\r\n//#region Options\r\nexport class SchedulerOptions extends VrControlOptions\r\n{\r\n\tdate?: Date;\r\n\tstartTime?: Date;\r\n\tendTime?: Date;\r\n\ttimeslotIntervalDuration?: number;\r\n\tnumberOfWorkDays?: number;\r\n\tresources?: SchedulerResource[];\r\n\tfirstDayOfWeek?: DayOfWeekEnum;\r\n\tviews?: SchedulerView[];\r\n\tdaysOfWeekNames?: string[];\r\n\texportPdf?: boolean;\r\n\tmaxResourcesNumber?: SchedulerMaxResourceNumber;\r\n\tavailabilities?: SchedulerData[];\r\n\tdatasource?: SchedulerData[];\r\n\tsaturation?: SchedulerSaturationInfo;\r\n\teditable?: SchedulerEditable;\r\n\ttimeColumn?: boolean;\r\n\tshowHeader?: boolean;\r\n\tshowToolbar?: boolean;\r\n\r\n\tonNavigate?: (e: SchedulerNavigateEvent) => void;\r\n\tonViewChange?: (e: SchedulerViewChangeEvent) => void;\r\n\tonIntervalChange?: (e: SchedulerIntervalChangeEvent) => void;\r\n\tonResourcesChange?: (e: SchedulerResourcesChangeEvent) => void;\r\n\tonTimeslotClick?: (e: SchedulerTimeslotClickEvent) => void;\r\n\tonAvailabilityClick?: (e: SchedulerAvailabilityClickEvent) => void;\r\n\tonAppointmentClick?: (e: SchedulerAppointmentClickEvent) => void;\r\n\tonMoveStart?: (e: SchedulerMoveStartEvent) => void;\r\n\tonMoving?: (e: SchedulerMovingEvent) => void;\r\n\tonMoveEnd?: (e: SchedulerMoveEndEvent) => void;\r\n\tonExpand?: (e: SchedulerExpandEvent) => void;\r\n\tonCollapse?: (e: SchedulerCollapseEvent) => void;\r\n\tonResizeStart?: (e: SchedulerResizeStartEvent) => void;\r\n\tonResizing?: (e: SchedulerResizingEvent) => void;\r\n\tonResizeEnd?: (e: SchedulerResizeEndEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Scheduler extends VrControl\r\n{\r\n\tprivate _dtpSchedulerDate: DatePicker;\r\n\tprivate _swtGroupByDateResource: Switch;\r\n\tprivate _btgMenuView: ButtonGroup;\r\n\tprivate _btnExpand: Button;\r\n\tprivate _btnCollapse: Button;\r\n\tprivate _cmbInterval: ComboBox;\r\n\r\n\tprivate _actualView: SchedulerViewEnum;\r\n\tprivate _actualNavigateAction: SchedulerNavigateActionEnum | null;\r\n\tprivate _isMoving: boolean;\r\n\tprivate _isResizing: boolean;\r\n\tprivate _timeColumnWidth: number;\r\n\tprivate _saturationData?: SchedulerSaturationInfo;\r\n\tprivate _saturationVisible: boolean;\r\n\r\n\tprivate _datasource: any[];\r\n\tprivate _slotElementList: SchedulerSlotElement[];\r\n\tprivate _availabilities: SchedulerData[];\r\n\r\n\tconstructor(element: HTMLElement, options?: SchedulerOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new SchedulerOptions();\r\n\r\n\t\tif (options.startTime == null) options.startTime = new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate(), 8, 0);\r\n\t\tif (options.endTime == null) options.endTime = new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate(), 19, 0);\r\n\t\tif (options.maxResourcesNumber == null) options.maxResourcesNumber = new SchedulerMaxResourceNumber();\r\n\t\tif (options.views == null) options.views = [{ type: SchedulerViewEnum.Day, selected: true }];\r\n\t\tif (options.timeslotIntervalDuration == null) options.timeslotIntervalDuration = 30;\r\n\t\tif (options.firstDayOfWeek == null) options.firstDayOfWeek = DayOfWeekEnum.Monday;\r\n\t\tif (options.daysOfWeekNames == null) options.daysOfWeekNames = [\"DOM\", \"LUN\", \"MAR\", \"MER\", \"GIO\", \"VEN\", \"SAB\"];\r\n\t\tif (options.numberOfWorkDays == null) options.numberOfWorkDays = 6;\r\n\t\tif (options.exportPdf == null) options.exportPdf = true;\r\n\t\tif (options.date == null) options.date = new Date();\r\n\t\tif (options.timeColumn == null) options.timeColumn = true;\r\n\t\tif (options.showHeader == null) options.showHeader = true;\r\n\t\tif (options.showToolbar == null) options.showToolbar = true;\r\n\t\tif (options.editable == null) options.editable = new SchedulerEditable();\r\n\t\tif (options.editable.move == null) options.editable.move = true;\r\n\t\tif (options.editable.resize == null) options.editable.resize = true;\r\n\t\t//#endregion\r\n\r\n\t\toptions.width = \"100%\";\r\n\t\tsuper(element, options, ControlTypeEnum.Scheduler);\r\n\r\n\t\tpuma(this.container()).css({ \"flex-direction\": \"column\" });\r\n\t\tthis._timeColumnWidth = (options.timeColumn) ? 63 : 0; // 63 = time column width + border\r\n\t\tthis._saturationData = undefined;\r\n\r\n\t\tif (options.resources == null)\r\n\t\t\toptions.resources = [{ value: \"\", text: \"\" }];\r\n\r\n\t\t//#region View\r\n\t\tlet viewSelected = options.views!.filter(k => k.selected === true)[0];\r\n\t\tif (viewSelected == null)\r\n\t\t\tviewSelected = { type: SchedulerViewEnum.Day, selected: true };\r\n\r\n\t\tthis._actualView = viewSelected.type;\r\n\t\t//#endregion\r\n\r\n\t\t//#region Structure\r\n\t\tthis.drawToolbar();\r\n\t\tthis.drawScheduler();\r\n\t\tthis.manageSchedulerClick();\r\n\t\t//#endregion\r\n\r\n\t\t//#region Datasource/Availabilities\r\n\t\tif (options.datasource != null)\r\n\t\t\tthis.datasource(options.datasource);\r\n\r\n\t\tif (options.availabilities != null)\r\n\t\t\tthis.availabilities(options.availabilities);\r\n\t\t//#endregion\r\n\r\n\t\t//#region Saturation\r\n\t\tif (options.saturation != null)\r\n\t\t\tthis.saturation(options.saturation);\r\n\t\t//#endregion\r\n\r\n\t\tpuma(window).resize(() =>\r\n\t\t{\r\n\t\t\tthis.drawScheduler();\r\n\t\t\tthis.rebind();\r\n\r\n\t\t\tif (this._saturationData != null)\r\n\t\t\t\tthis.saturation(this._saturationData);\r\n\t\t});\r\n\t}\r\n\r\n\t//#region Methods\r\n\r\n\t//#region Draw \r\n\tdrawToolbar()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tlet divToolbar = div(this.container(), { class: \"vrSchedulerDivToolbar\" }, true);\r\n\r\n\t\tif (!options.showToolbar)\r\n\t\t\tdivToolbar.style.cssText += \"display: none;\";\r\n\r\n\t\tlet timeout = 0;\r\n\t\tcreateButton({\r\n\t\t\ticon: IconClassLight.CaretLeft,\r\n\t\t\twidth: 30,\r\n\t\t\tonClick: (e) =>\r\n\t\t\t{\r\n\t\t\t\tlet date = this.date()!.vrAddDays((this.view() == SchedulerViewEnum.Day) ? -1 : -7);\r\n\t\t\t\tthis._dtpSchedulerDate.value(date, false);\r\n\r\n\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\ttimeout = window.setTimeout(() =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._actualNavigateAction = SchedulerNavigateActionEnum.PrevDate;\r\n\t\t\t\t\tthis.date(date);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}, divToolbar);\r\n\r\n\t\tcreateButton({\r\n\t\t\ticon: IconClassLight.CaretRight,\r\n\t\t\twidth: 30,\r\n\t\t\tcssContainer: \"margin-left: 5px;\",\r\n\t\t\tonClick: (e) =>\r\n\t\t\t{\r\n\t\t\t\tlet date = this.date()!.vrAddDays((this.view() == SchedulerViewEnum.Day) ? 1 : 7);\r\n\t\t\t\tthis._dtpSchedulerDate.value(date, false);\r\n\r\n\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\ttimeout = window.setTimeout(() =>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._actualNavigateAction = SchedulerNavigateActionEnum.NextDate;\r\n\t\t\t\t\tthis.date(date);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}, divToolbar);\r\n\r\n\t\tcreateButton({\r\n\t\t\ttext: \"Oggi\",\r\n\t\t\tcssContainer: \"margin-left: 5px;\",\r\n\t\t\tonClick: (e) =>\r\n\t\t\t{\r\n\t\t\t\tthis._actualNavigateAction = SchedulerNavigateActionEnum.Today;\r\n\t\t\t\tlet today = new Date();\r\n\t\t\t\ttoday.setHours(0, 0, 0);\r\n\t\t\t\tthis.date(today);\r\n\t\t\t}\r\n\t\t}, divToolbar);\r\n\r\n\t\tthis._dtpSchedulerDate = createDatePicker({\r\n\t\t\tformat: DateFormatEnum.LongDate,\r\n\t\t\tvalue: options.date,\r\n\t\t\twidth: 250,\r\n\t\t\tcssContainer: \"margin-left: 5px;\",\r\n\t\t\tonBeforeChange: (e) =>\r\n\t\t\t{\r\n\t\t\t\tif (e.value == null)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t},\r\n\t\t\tonAfterChange: (e) => \r\n\t\t\t{\r\n\t\t\t\tthis._actualNavigateAction = SchedulerNavigateActionEnum.ChangeDate;\r\n\t\t\t\tthis.date(this._dtpSchedulerDate.value()!);\r\n\t\t\t}\r\n\t\t}, divToolbar);\r\n\r\n\t\tthis._swtGroupByDateResource = createSwitch({\r\n\t\t\tlabelSettings: { colorSettings: { textColor: \"#000\" } },\r\n\t\t\tlabelOff: \"Risorsa\",\r\n\t\t\tlabelOn: \"Data\",\r\n\t\t\tcssContainer: \"border-left: solid 1px #000; margin-left: 10px; padding-left: 10px; flex-direction: row; height: 24px;\",\r\n\t\t\tclassContainer: \"vrSchedulerSwitchGroupByDateResource\",\r\n\t\t\tvisible: this.view() == SchedulerViewEnum.Week,\r\n\t\t\tonChange: (e) => window.setTimeout(() => this.groupWeekByDate(e.checked), 50)\r\n\t\t}, divToolbar);\r\n\r\n\t\tthis._btnExpand = createButton({\r\n\t\t\ticon: IconClassLight.Expand,\r\n\t\t\tcssContainer: \"float: right; margin-left: 5px;\",\r\n\t\t\tonClick: (e) => \r\n\t\t\t{\r\n\t\t\t\tif (options.onExpand != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet expandEvent = new SchedulerExpandEvent();\r\n\t\t\t\t\texpandEvent.sender = this;\r\n\t\t\t\t\texpandEvent.buttonExpand = this._btnExpand;\r\n\t\t\t\t\texpandEvent.buttonCollpase = this._btnCollapse;\r\n\t\t\t\t\toptions.onExpand(expandEvent);\r\n\r\n\t\t\t\t\tif (expandEvent.isDefaultPrevented())\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tUtilityManager.enterFullScreen(this.container(), () => notify(\"Modalità fullScreen non supportata\", { type: NotifierTypeEnum.Error }));\r\n\t\t\t\tthis._btnCollapse.show();\r\n\t\t\t\tthis._btnExpand.hide();\r\n\t\t\t\twindow.setTimeout(() => this.adaptHeight(), 100);\r\n\t\t\t}\r\n\t\t}, divToolbar);\r\n\r\n\t\tthis._btnCollapse = createButton({\r\n\t\t\ticon: IconClassLight.Collapse,\r\n\t\t\tcssContainer: \"float: right; margin-left: 5px;\",\r\n\t\t\tvisible: false,\r\n\t\t\tonClick: (e) => \r\n\t\t\t{\r\n\t\t\t\tif (options.onCollapse != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet collapseEvent = new SchedulerCollapseEvent();\r\n\t\t\t\t\tcollapseEvent.sender = this;\r\n\t\t\t\t\tcollapseEvent.buttonExpand = this._btnExpand;\r\n\t\t\t\t\tcollapseEvent.buttonCollpase = this._btnCollapse;\r\n\t\t\t\t\toptions.onCollapse(collapseEvent);\r\n\r\n\t\t\t\t\tif (collapseEvent.isDefaultPrevented())\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tUtilityManager.exitFullScreen();\r\n\t\t\t\tthis._btnCollapse.hide();\r\n\t\t\t\tthis._btnExpand.show();\r\n\t\t\t\twindow.setTimeout(() => this.adaptHeight(), 100);\r\n\t\t\t}\r\n\t\t}, divToolbar);\r\n\r\n\t\tlet viewItems: ButtonGroupItem[] = [];\r\n\t\tlet viewTypes = options.views!.map(k => k.type);\r\n\t\tif (viewTypes.includes(SchedulerViewEnum.Day))\r\n\t\t\tviewItems.push({ text: \"Giorno\", value: SchedulerViewEnum.Day, selected: (this.view() == SchedulerViewEnum.Day) });\r\n\t\tif (viewTypes.includes(SchedulerViewEnum.Week))\r\n\t\t\tviewItems.push({ text: \"Settimana\", value: SchedulerViewEnum.Week, selected: (this.view() == SchedulerViewEnum.Week) });\r\n\t\tif (viewTypes.includes(SchedulerViewEnum.FourWeeks))\r\n\t\t\tviewItems.push({ text: \"Mese\", value: SchedulerViewEnum.FourWeeks, selected: (this.view() == SchedulerViewEnum.FourWeeks) });\r\n\r\n\t\tthis._btgMenuView = createButtonGroup({\r\n\t\t\titems: viewItems,\r\n\t\t\tcssContainer: \"float: right;\",\r\n\t\t\twidth: \"auto\",\r\n\t\t\tonSelect: (e) => \r\n\t\t\t{\r\n\t\t\t\tlet maxResourceNumberBasedOnView: number | null | undefined = null;\r\n\t\t\t\tswitch (Number(e.value))\r\n\t\t\t\t{\r\n\t\t\t\t\tcase SchedulerViewEnum.Day: maxResourceNumberBasedOnView = options.maxResourcesNumber!.dayView; break;\r\n\t\t\t\t\tcase SchedulerViewEnum.Week: maxResourceNumberBasedOnView = options.maxResourcesNumber!.weekView; break;\r\n\t\t\t\t\tcase SchedulerViewEnum.FourWeeks: maxResourceNumberBasedOnView = options.maxResourcesNumber!.fourWeeksView; break;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (maxResourceNumberBasedOnView != null && this.resources().length > maxResourceNumberBasedOnView)\r\n\t\t\t\t{\r\n\t\t\t\t\tconfirm(\"Verranno visualizzate un numero di risorse maggiore<br /> del limite massimo impostato (\" + maxResourceNumberBasedOnView + \").<br /> Continuare comunque?\")\r\n\t\t\t\t\t\t.then(() => this.view(Number(e.value!)),\r\n\t\t\t\t\t\t\t() => e.sender.select([this.view()], false)); // If not\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.view(Number(e.value!));\r\n\r\n\t\t\t}\r\n\t\t}, divToolbar);\r\n\t}\r\n\r\n\tprivate drawScheduler()\r\n\t{\r\n\t\tthis.drawHeader();\r\n\t\tthis.drawContent();\r\n\r\n\t\tif (this._saturationData != null)\r\n\t\t\tthis.saturation(this._saturationData);\r\n\r\n\t\tlet divContent = puma(this.getDivContent());\r\n\t\tif (divContent.vrHasScrollBar())\r\n\t\t\tpuma(this.container()).find(\".vrSchedulerDivHeader\").find(\"table\").css({ \"width\": \"Calc(100% - 17px)\" });\r\n\t\telse\r\n\t\t\tpuma(this.container()).find(\".vrSchedulerDivHeader\").find(\"table\").css({ \"width\": \"100%\" });\r\n\r\n\t\tif (this.view() == SchedulerViewEnum.Week)\r\n\t\t\tthis._swtGroupByDateResource.show();\r\n\t}\r\n\r\n\tprivate drawHeader()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tlet divHeader = puma(this.container()).find(\".vrSchedulerDivHeader\")[0];\r\n\t\tif (divHeader == null)\r\n\t\t\tdivHeader = div(this.element(), { class: \"vrSchedulerDivHeader\" });\r\n\r\n\t\tif (!options.showHeader)\r\n\t\t\tdivHeader.style.cssText += \"display: none;\";\r\n\r\n\t\tpuma(divHeader).empty();\r\n\t\tlet contentFragment = document.createDocumentFragment();\r\n\r\n\t\tlet table = document.createElement(\"table\");\r\n\t\ttable.style.cssText += \"width: 100%; table-layout: fixed; border-spacing: 0;\";\r\n\t\tcontentFragment.appendChild(table);\r\n\r\n\t\tswitch (this.view())\r\n\t\t{\r\n\t\t\tcase SchedulerViewEnum.Day:\r\n\t\t\t\t{\r\n\t\t\t\t\t//#region Day\r\n\t\t\t\t\tlet rowHeader = document.createElement(\"tr\");\r\n\t\t\t\t\ttable.appendChild(rowHeader);\r\n\r\n\t\t\t\t\tlet thInterval = document.createElement(\"th\");\r\n\t\t\t\t\tthInterval.className = \"vrSchedulerThInterval\";\r\n\t\t\t\t\trowHeader.appendChild(thInterval);\r\n\t\t\t\t\tthis.createIntervalCombo(thInterval);\r\n\r\n\t\t\t\t\tfor (let resource of this.resources())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet resourceText = (resource.text != null) ? resource.text : \"\";\r\n\r\n\t\t\t\t\t\tlet th = document.createElement(\"th\");\r\n\t\t\t\t\t\tth.title = resourceText.toUpperCase();\r\n\t\t\t\t\t\tth.className = \"vrSchedulerDayResource\";\r\n\t\t\t\t\t\tth.setAttribute(\"resourceId\", resource.value);\r\n\t\t\t\t\t\tth.setAttribute(\"resourceName\", resourceText.replace(\" \", \"~\"));\r\n\t\t\t\t\t\trowHeader.appendChild(th);\r\n\r\n\t\t\t\t\t\t//#region Text\r\n\t\t\t\t\t\tlet spanResouceText = document.createElement(\"span\");\r\n\t\t\t\t\t\tspanResouceText.innerHTML = resourceText.toUpperCase();\r\n\t\t\t\t\t\tth.appendChild(spanResouceText);\r\n\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t//#region Saturation\r\n\t\t\t\t\t\tlet divSaturation = document.createElement(\"div\");\r\n\t\t\t\t\t\tdivSaturation.classList.add(\"vrSchedulerDivSaturation\");\r\n\t\t\t\t\t\tth.appendChild(divSaturation);\r\n\r\n\t\t\t\t\t\tif (this.saturationVisible())\r\n\t\t\t\t\t\t\tdivSaturation.style.cssText += \"display: flex;\";\r\n\r\n\t\t\t\t\t\tlet spanSaturationBar = document.createElement(\"span\");\r\n\t\t\t\t\t\tspanSaturationBar.classList.add(\"vrSchedulerSpanSaturation\");\r\n\t\t\t\t\t\tdivSaturation.appendChild(spanSaturationBar);\r\n\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//#endregion\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase SchedulerViewEnum.Week:\r\n\t\t\tcase SchedulerViewEnum.FourWeeks:\r\n\t\t\t\t{\r\n\t\t\t\t\t//#region Week/FourWeeks\r\n\t\t\t\t\tlet numberOfDays = (this.view() == SchedulerViewEnum.FourWeeks) ? options.numberOfWorkDays! * 4 : options.numberOfWorkDays!;\r\n\r\n\t\t\t\t\tif (!this.groupWeekByDate())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//#region GroupedByResources\r\n\t\t\t\t\t\tlet rowResources = document.createElement(\"tr\");\r\n\t\t\t\t\t\ttable.appendChild(rowResources);\r\n\r\n\t\t\t\t\t\tlet thInterval = document.createElement(\"th\");\r\n\t\t\t\t\t\tthInterval.className = \"vrSchedulerThInterval\";\r\n\t\t\t\t\t\trowResources.appendChild(thInterval);\r\n\t\t\t\t\t\tthis.createIntervalCombo(thInterval);\r\n\r\n\t\t\t\t\t\tlet rowDays = rowResources;\r\n\t\t\t\t\t\tif (this.groupedByResource())\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tfor (let resource of this.resources())\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlet resourceText = (resource.text != null) ? resource.text : \"\";\r\n\r\n\t\t\t\t\t\t\t\tlet th = document.createElement(\"th\");\r\n\t\t\t\t\t\t\t\tth.title = resourceText.toUpperCase();\r\n\t\t\t\t\t\t\t\tth.className = \"vrSchedulerDayResource\";\r\n\t\t\t\t\t\t\t\tth.setAttribute(\"resourceId\", resource.value);\r\n\t\t\t\t\t\t\t\tth.setAttribute(\"resourceName\", resourceText.replace(\" \", \"~\"));\r\n\t\t\t\t\t\t\t\tth.colSpan = numberOfDays;\r\n\t\t\t\t\t\t\t\trowResources.appendChild(th);\r\n\r\n\t\t\t\t\t\t\t\t//#region Text\r\n\t\t\t\t\t\t\t\tlet spanResouceText = document.createElement(\"span\");\r\n\t\t\t\t\t\t\t\tspanResouceText.innerHTML = resourceText.toUpperCase();\r\n\t\t\t\t\t\t\t\tth.appendChild(spanResouceText);\r\n\t\t\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t\t\t//#region Saturation\r\n\t\t\t\t\t\t\t\tlet spanSaturationPercentage = document.createElement(\"span\");\r\n\t\t\t\t\t\t\t\tspanSaturationPercentage.classList.add(\"vrSchedulerSaturationPercentage\");\r\n\t\t\t\t\t\t\t\tth.appendChild(spanSaturationPercentage);\r\n\t\t\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\trowDays = document.createElement(\"tr\");\r\n\t\t\t\t\t\t\ttable.appendChild(rowDays);\r\n\r\n\t\t\t\t\t\t\tlet thInterval2 = document.createElement(\"th\");\r\n\t\t\t\t\t\t\tthInterval2.className = \"vrSchedulerThInterval\";\r\n\t\t\t\t\t\t\trowDays.appendChild(thInterval2);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (let resource of this.resources())\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlet firstDayOfWeek = Date.vrGetFirstDayOfWeekByDate(this.date()!);\r\n\t\t\t\t\t\t\tlet addingDays = 0;\r\n\t\t\t\t\t\t\tfor (let i = 0; i < numberOfDays; i++)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\taddingDays = (i % options.numberOfWorkDays! == 0 && i > 0) ? addingDays + (7 - options.numberOfWorkDays!) : addingDays;\r\n\t\t\t\t\t\t\t\tlet dayOfWeek = firstDayOfWeek.vrAddDays(addingDays);\r\n\t\t\t\t\t\t\t\tlet dayName = options.daysOfWeekNames![dayOfWeek.getDay()];\r\n\t\t\t\t\t\t\t\tlet dayNumber = dayOfWeek.getDate();\r\n\r\n\t\t\t\t\t\t\t\tlet th = document.createElement(\"th\");\r\n\t\t\t\t\t\t\t\tth.title = dayNumber + \" \" + dayName;\r\n\t\t\t\t\t\t\t\tth.className = \"vrSchedulerWeekDay\";\r\n\t\t\t\t\t\t\t\tth.setAttribute(\"day\", String(dayNumber));\r\n\t\t\t\t\t\t\t\tth.setAttribute(\"month\", String(dayOfWeek.getMonth()));\r\n\t\t\t\t\t\t\t\tth.setAttribute(\"year\", String(dayOfWeek.getFullYear()));\r\n\t\t\t\t\t\t\t\tth.setAttribute(\"resourceId\", resource.value);\r\n\t\t\t\t\t\t\t\trowDays.appendChild(th);\r\n\r\n\t\t\t\t\t\t\t\t//#region Text\r\n\t\t\t\t\t\t\t\tlet spanResouceText = document.createElement(\"span\");\r\n\t\t\t\t\t\t\t\tspanResouceText.innerHTML = dayNumber + \" \" + dayName;\r\n\t\t\t\t\t\t\t\tth.appendChild(spanResouceText);\r\n\t\t\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t\t\t//#region Saturation\r\n\t\t\t\t\t\t\t\tlet divSaturation = document.createElement(\"div\");\r\n\t\t\t\t\t\t\t\tdivSaturation.classList.add(\"vrSchedulerDivSaturation\");\r\n\t\t\t\t\t\t\t\tth.appendChild(divSaturation);\r\n\r\n\t\t\t\t\t\t\t\tif (this.saturationVisible())\r\n\t\t\t\t\t\t\t\t\tdivSaturation.style.cssText += \"display: flex;\";\r\n\r\n\t\t\t\t\t\t\t\tlet spanSaturationBar = document.createElement(\"span\");\r\n\t\t\t\t\t\t\t\tspanSaturationBar.classList.add(\"vrSchedulerSpanSaturation\");\r\n\t\t\t\t\t\t\t\tdivSaturation.appendChild(spanSaturationBar);\r\n\t\t\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t\t\taddingDays++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//#region GroupedByDate\r\n\t\t\t\t\t\tlet rowDays = document.createElement(\"tr\");\r\n\t\t\t\t\t\ttable.appendChild(rowDays);\r\n\r\n\t\t\t\t\t\tlet thInterval = document.createElement(\"th\");\r\n\t\t\t\t\t\tthInterval.className = \"vrSchedulerThInterval\";\r\n\t\t\t\t\t\trowDays.appendChild(thInterval);\r\n\t\t\t\t\t\tthis.createIntervalCombo(thInterval);\r\n\r\n\t\t\t\t\t\tlet firstDayOfWeek = Date.vrGetFirstDayOfWeekByDate(this.date()!);\r\n\t\t\t\t\t\tlet addingDays = 0;\r\n\t\t\t\t\t\tfor (let i = 0; i < numberOfDays; i++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\taddingDays = (i % options.numberOfWorkDays! == 0 && i > 0) ? addingDays + (7 - options.numberOfWorkDays!) : addingDays;\r\n\t\t\t\t\t\t\tlet dayOfWeek = firstDayOfWeek.vrAddDays(addingDays);\r\n\t\t\t\t\t\t\tlet dayName = options.daysOfWeekNames![dayOfWeek.getDay()];\r\n\t\t\t\t\t\t\tlet dayNumber = dayOfWeek.getDate();\r\n\r\n\t\t\t\t\t\t\tlet th = document.createElement(\"th\");\r\n\t\t\t\t\t\t\tth.title = dayNumber + \" \" + dayName;\r\n\t\t\t\t\t\t\tth.colSpan = this.resources().length;\r\n\t\t\t\t\t\t\tth.className = \"vrSchedulerWeekDay\";\r\n\t\t\t\t\t\t\tth.setAttribute(\"day\", String(dayNumber));\r\n\t\t\t\t\t\t\tth.setAttribute(\"month\", String(dayOfWeek.getMonth()));\r\n\t\t\t\t\t\t\tth.setAttribute(\"year\", String(dayOfWeek.getFullYear()));\r\n\t\t\t\t\t\t\tth.innerHTML = dayNumber + \" \" + dayName;\r\n\t\t\t\t\t\t\tth.innerHTML = dayNumber + \" \" + dayName;\r\n\t\t\t\t\t\t\trowDays.appendChild(th);\r\n\r\n\t\t\t\t\t\t\taddingDays++;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet rowResources = document.createElement(\"tr\");\r\n\t\t\t\t\t\ttable.appendChild(rowResources);\r\n\r\n\t\t\t\t\t\tlet thInterval2 = document.createElement(\"th\");\r\n\t\t\t\t\t\tthInterval2.className = \"vrSchedulerThInterval\";\r\n\t\t\t\t\t\trowResources.appendChild(thInterval2);\r\n\r\n\t\t\t\t\t\tlet addingDaysForResources = 0;\r\n\t\t\t\t\t\tfor (let i = 0; i < numberOfDays; i++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\taddingDaysForResources = (i % options.numberOfWorkDays! == 0 && i > 0) ? addingDaysForResources + (7 - options.numberOfWorkDays!) : addingDaysForResources;\r\n\t\t\t\t\t\t\tlet dayOfWeek = firstDayOfWeek.vrAddDays(addingDaysForResources);\r\n\t\t\t\t\t\t\tlet dayNumber = dayOfWeek.getDate();\r\n\r\n\t\t\t\t\t\t\tfor (let resource of this.resources())\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlet resourceText = (resource.text != null) ? resource.text : \"\";\r\n\r\n\t\t\t\t\t\t\t\tlet th = document.createElement(\"th\");\r\n\t\t\t\t\t\t\t\tth.title = resourceText.toUpperCase();\r\n\t\t\t\t\t\t\t\tth.className = \"vrSchedulerDayResource\";\r\n\t\t\t\t\t\t\t\tth.setAttribute(\"resourceId\", resource.value);\r\n\t\t\t\t\t\t\t\tth.setAttribute(\"resourceName\", resourceText.replace(\" \", \"~\"));\r\n\t\t\t\t\t\t\t\tth.setAttribute(\"day\", String(dayNumber));\r\n\t\t\t\t\t\t\t\tth.setAttribute(\"month\", String(dayOfWeek.getMonth()));\r\n\t\t\t\t\t\t\t\tth.setAttribute(\"year\", String(dayOfWeek.getFullYear()));\r\n\t\t\t\t\t\t\t\trowResources.appendChild(th);\r\n\r\n\t\t\t\t\t\t\t\t//#region Text\r\n\t\t\t\t\t\t\t\tlet spanResouceText = document.createElement(\"span\");\r\n\t\t\t\t\t\t\t\tspanResouceText.innerHTML = resourceText.toUpperCase();;\r\n\t\t\t\t\t\t\t\tth.appendChild(spanResouceText);\r\n\t\t\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t\t\t//#region Saturation\r\n\t\t\t\t\t\t\t\tlet divSaturation = document.createElement(\"div\");\r\n\t\t\t\t\t\t\t\tdivSaturation.classList.add(\"vrSchedulerDivSaturation\");\r\n\t\t\t\t\t\t\t\tth.appendChild(divSaturation);\r\n\r\n\t\t\t\t\t\t\t\tif (this.saturationVisible())\r\n\t\t\t\t\t\t\t\t\tdivSaturation.style.cssText += \"display: flex;\";\r\n\r\n\t\t\t\t\t\t\t\tlet spanSaturationBar = document.createElement(\"span\");\r\n\t\t\t\t\t\t\t\tspanSaturationBar.classList.add(\"vrSchedulerSpanSaturation\");\r\n\t\t\t\t\t\t\t\tdivSaturation.appendChild(spanSaturationBar);\r\n\t\t\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\taddingDaysForResources++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//#endregion\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tdivHeader.appendChild(contentFragment);\r\n\t}\r\n\r\n\tprivate createIntervalCombo(th: HTMLTableCellElement)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\r\n\t\tif (this._cmbInterval != null)\r\n\t\t\tthis._cmbInterval.container().parentNode!.removeChild(this._cmbInterval.container());\r\n\r\n\t\tthis._cmbInterval = createComboBox({\r\n\t\t\tmode: ComboBoxTypeEnum.DropDown,\r\n\t\t\tvalue: options.timeslotIntervalDuration,\r\n\t\t\tcssContainer: \"top: 2px;\",\r\n\t\t\tpopupSettings: { width: 50 },\r\n\t\t\twidth: 60,\r\n\t\t\titems: [\r\n\t\t\t\t{ text: \"5 min\", value: \"5\" },\r\n\t\t\t\t{ text: \"10 min\", value: \"10\" },\r\n\t\t\t\t{ text: \"15 min\", value: \"15\" },\r\n\t\t\t\t{ text: \"25 min\", value: \"25\" },\r\n\t\t\t\t{ text: \"30 min\", value: \"30\" },\r\n\t\t\t\t{ text: \"60 min\", value: \"60\" }\r\n\t\t\t],\r\n\t\t\tonAfterChange: (e) => window.setTimeout(() => this.timeslotInterval(Number(e.sender.value()!)))\r\n\t\t}, th);\r\n\t}\r\n\r\n\tprivate drawContent()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tlet divContent = this.getDivContent();\r\n\t\tif (divContent == null)\r\n\t\t{\r\n\t\t\tdivContent = div(this.element(), { class: \"vrSchedulerDivContent\" });\r\n\r\n\t\t\tlet height: number | string = 0;\r\n\t\t\tif (options.height == null)\r\n\t\t\t{\r\n\t\t\t\tlet schedulerOffset = puma(this.container()).offset().top;\r\n\t\t\t\tlet contentHeight = window.innerHeight - schedulerOffset;\r\n\r\n\t\t\t\tlet toolbarHeight = puma(this.container()).find(\".vrSchedulerDivToolbar\").outerHeight();\r\n\t\t\t\tif (!options.showToolbar)\r\n\t\t\t\t\ttoolbarHeight = 0;\r\n\r\n\t\t\t\tlet headerHeight = puma(this.container()).find(\".vrSchedulerDivHeader\").outerHeight();\r\n\t\t\t\tif (!options.showHeader)\r\n\t\t\t\t\theaderHeight = 0;\r\n\r\n\t\t\t\theight = contentHeight - toolbarHeight - headerHeight;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\theight = options.height;\r\n\r\n\t\t\tpuma(divContent).height(height);\r\n\t\t}\r\n\r\n\t\tpuma(divContent).empty();\r\n\t\tlet contentFragment = document.createDocumentFragment();\r\n\r\n\t\tlet table = document.createElement(\"table\");\r\n\t\ttable.style.cssText += \"width: 100%; table-layout: fixed; border-spacing: 0;\";\r\n\t\tcontentFragment.appendChild(table);\r\n\r\n\t\tlet schedulerTotalMinutes = Date.vrDifferenceBetweenDatesInMinutes(options.startTime!, options.endTime!);\r\n\t\tlet numberOfRows = schedulerTotalMinutes / options.timeslotIntervalDuration!;\r\n\t\tthis._slotElementList = [];\r\n\r\n\t\tswitch (this.view())\r\n\t\t{\r\n\t\t\tcase SchedulerViewEnum.Day:\r\n\t\t\t\t{\r\n\t\t\t\t\t//#region Day\r\n\t\t\t\t\tlet date = new Date(this.date()!.setHours(options.startTime!.getHours(), options.startTime!.getMinutes()));\r\n\t\t\t\t\tfor (let i = 0; i < numberOfRows; i++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet row = document.createElement(\"tr\");\r\n\t\t\t\t\t\ttable.appendChild(row);\r\n\r\n\t\t\t\t\t\tlet realDate = new Date(date);\r\n\t\t\t\t\t\trealDate.setSeconds(0, 0);\r\n\r\n\t\t\t\t\t\t// Time\r\n\t\t\t\t\t\tlet timeString = realDate.toTimeString();\r\n\t\t\t\t\t\tlet textTime = (i % 2 == 0) ? timeString : \"\";\r\n\r\n\t\t\t\t\t\tlet thTime = document.createElement(\"th\");\r\n\t\t\t\t\t\tthTime.innerHTML = textTime;\r\n\t\t\t\t\t\tthTime.classList.add(\"vrSchedulerThTime\");\r\n\t\t\t\t\t\tif (i % 2 == 0 && i > 0) thTime.classList.add(\"borderTopSolid\");\r\n\t\t\t\t\t\trow.appendChild(thTime);\r\n\r\n\t\t\t\t\t\tif (!options.timeColumn)\r\n\t\t\t\t\t\t\tthTime.style.cssText += \"display: none;\";\r\n\r\n\t\t\t\t\t\tlet endSlot = new Date(date);\r\n\t\t\t\t\t\tendSlot.vrAddMinutes(options.timeslotIntervalDuration!);\r\n\t\t\t\t\t\tendSlot.setSeconds(0, 0);\r\n\r\n\t\t\t\t\t\t// Slots\r\n\t\t\t\t\t\tlet columnIndex = 0;\r\n\t\t\t\t\t\tlet borderTopClass = (i == 0) ? \"\" : ((i % 2 == 0) ? \"borderTopSolid\" : \"borderTopDotted\");\r\n\t\t\t\t\t\tlet borderBottomClass = ((i == (numberOfRows - 1)) ? \"borderBottomSolid\" : \"\");\r\n\t\t\t\t\t\tfor (let resource of this.resources())\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlet td = document.createElement(\"td\");\r\n\t\t\t\t\t\t\tif (borderTopClass != \"\") td.classList.add(borderTopClass);\r\n\t\t\t\t\t\t\tif (borderBottomClass != \"\") td.classList.add(borderBottomClass);\r\n\t\t\t\t\t\t\ttd.title = timeString;\r\n\t\t\t\t\t\t\trow.appendChild(td);\r\n\r\n\t\t\t\t\t\t\t// To fast appointment collocation\r\n\t\t\t\t\t\t\tlet slotElement = new SchedulerSlotElement();\r\n\t\t\t\t\t\t\tslotElement.resourceId = (resource != null) ? resource.value : \"0\";\r\n\t\t\t\t\t\t\tslotElement.start = realDate;\r\n\t\t\t\t\t\t\tslotElement.end = endSlot;\r\n\t\t\t\t\t\t\tslotElement.columnIndex = columnIndex;\r\n\t\t\t\t\t\t\tslotElement.rowIndex = i;\r\n\t\t\t\t\t\t\tthis._slotElementList.push(slotElement);\r\n\r\n\t\t\t\t\t\t\tcolumnIndex++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdate.vrAddMinutes(options.timeslotIntervalDuration!);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//#endregion\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase SchedulerViewEnum.Week:\r\n\t\t\tcase SchedulerViewEnum.FourWeeks:\r\n\t\t\t\t{\r\n\t\t\t\t\t//#region Week/FourWeeks\r\n\t\t\t\t\tlet numberOfDays = (this.view() == SchedulerViewEnum.FourWeeks) ? options.numberOfWorkDays! * 4 : options.numberOfWorkDays!;\r\n\t\t\t\t\tlet firstDayOfWeek = Date.vrGetFirstDayOfWeekByDate(this.date()!);\r\n\r\n\t\t\t\t\tlet minutes = Date.vrDifferenceBetweenDatesInMinutes(options.startTime!, options.endTime!);\r\n\t\t\t\t\tlet numberOfRows = minutes / options.timeslotIntervalDuration!;\r\n\r\n\t\t\t\t\tif (!this.groupWeekByDate())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//#region GroupedByResources\r\n\t\t\t\t\t\tlet date = new Date(options.startTime!);\r\n\t\t\t\t\t\tfor (let i = 0; i < numberOfRows; i++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlet row = document.createElement(\"tr\");\r\n\t\t\t\t\t\t\ttable.appendChild(row);\r\n\r\n\t\t\t\t\t\t\t// Time\r\n\t\t\t\t\t\t\tlet timeString = date.toTimeString();\r\n\t\t\t\t\t\t\tlet textTime = (i % 2 == 0) ? timeString : \"\";\r\n\r\n\t\t\t\t\t\t\tlet thTime = document.createElement(\"th\");\r\n\t\t\t\t\t\t\tthTime.innerHTML = textTime;\r\n\t\t\t\t\t\t\tthTime.classList.add(\"vrSchedulerThTime\");\r\n\t\t\t\t\t\t\tif (i % 2 == 0 && i > 0) thTime.classList.add(\"borderTopSolid\");\r\n\t\t\t\t\t\t\trow.appendChild(thTime);\r\n\r\n\t\t\t\t\t\t\tif (!options.timeColumn)\r\n\t\t\t\t\t\t\t\tthTime.style.cssText += \"display: none;\";\r\n\r\n\t\t\t\t\t\t\tlet borderTopClass = (i == 0) ? \"\" : ((i % 2 == 0) ? \"borderTopSolid\" : \"borderTopDotted\");\r\n\t\t\t\t\t\t\tlet borderBottomClass = (i == (numberOfRows - 1)) ? \"borderBottomSolid\" : \"\";\r\n\r\n\t\t\t\t\t\t\t// Slots\r\n\t\t\t\t\t\t\tlet columnIndex = 0;\r\n\t\t\t\t\t\t\tfor (let resource of this.resources())\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tfirstDayOfWeek.setHours(date.getHours(), date.getMinutes(), 0, 0);\r\n\r\n\t\t\t\t\t\t\t\tlet addingDays = 0;\r\n\t\t\t\t\t\t\t\tfor (let j = 0; j < numberOfDays; j++)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\taddingDays = (j % options.numberOfWorkDays! == 0 && j > 0) ? addingDays + (7 - options.numberOfWorkDays!) : addingDays;\r\n\t\t\t\t\t\t\t\t\tlet dayOfWeek = firstDayOfWeek.vrAddDays(addingDays);\r\n\t\t\t\t\t\t\t\t\tlet endSlot = new Date(dayOfWeek);\r\n\t\t\t\t\t\t\t\t\tendSlot.vrAddMinutes(options.timeslotIntervalDuration!);\r\n\r\n\t\t\t\t\t\t\t\t\tlet td = document.createElement(\"td\");\r\n\t\t\t\t\t\t\t\t\tif (borderTopClass != \"\") td.classList.add(borderTopClass);\r\n\t\t\t\t\t\t\t\t\tif (borderBottomClass != \"\") td.classList.add(borderBottomClass);\r\n\t\t\t\t\t\t\t\t\ttd.title = timeString;\r\n\t\t\t\t\t\t\t\t\trow.appendChild(td);\r\n\r\n\t\t\t\t\t\t\t\t\tif (j == numberOfDays - 1)\r\n\t\t\t\t\t\t\t\t\t\ttd.classList.add(\"borderRightSolid\");\r\n\r\n\t\t\t\t\t\t\t\t\taddingDays++;\r\n\r\n\t\t\t\t\t\t\t\t\t// To fast appointment collocation\r\n\t\t\t\t\t\t\t\t\tlet slotElement = new SchedulerSlotElement();\r\n\t\t\t\t\t\t\t\t\tslotElement.resourceId = (resource != null) ? resource.value : \"0\";\r\n\t\t\t\t\t\t\t\t\tslotElement.start = dayOfWeek;\r\n\t\t\t\t\t\t\t\t\tslotElement.end = endSlot;\r\n\t\t\t\t\t\t\t\t\tslotElement.columnIndex = columnIndex;\r\n\t\t\t\t\t\t\t\t\tslotElement.rowIndex = i;\r\n\t\t\t\t\t\t\t\t\tthis._slotElementList.push(slotElement);\r\n\r\n\t\t\t\t\t\t\t\t\tcolumnIndex++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdate.vrAddMinutes(options.timeslotIntervalDuration!);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//#region GroupedByDate\r\n\t\t\t\t\t\tlet date = new Date(options.startTime!);\r\n\t\t\t\t\t\tfor (let i = 0; i < numberOfRows; i++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlet row = document.createElement(\"tr\");\r\n\t\t\t\t\t\t\ttable.appendChild(row);\r\n\r\n\t\t\t\t\t\t\t// Time\r\n\t\t\t\t\t\t\tlet timeString = date.toTimeString();\r\n\t\t\t\t\t\t\tlet textTime = (i % 2 == 0) ? timeString : \"\";\r\n\r\n\t\t\t\t\t\t\tlet thTime = document.createElement(\"th\");\r\n\t\t\t\t\t\t\tthTime.innerHTML = textTime;\r\n\t\t\t\t\t\t\tthTime.classList.add(\"vrSchedulerThTime\");\r\n\t\t\t\t\t\t\tif (i % 2 == 0 && i > 0) thTime.classList.add(\"borderTopSolid\");\r\n\t\t\t\t\t\t\trow.appendChild(thTime);\r\n\r\n\t\t\t\t\t\t\tif (!options.timeColumn)\r\n\t\t\t\t\t\t\t\tthTime.style.cssText += \"display: none;\";\r\n\r\n\t\t\t\t\t\t\tlet borderTopClass = (i == 0) ? \"\" : ((i % 2 == 0) ? \"borderTopSolid\" : \"borderTopDotted\");\r\n\t\t\t\t\t\t\tlet borderBottomClass = (i == (numberOfRows - 1)) ? \"borderBottomSolid\" : \"\";\r\n\r\n\t\t\t\t\t\t\t// Slots\r\n\t\t\t\t\t\t\tlet columnIndex = 0;\r\n\t\t\t\t\t\t\tfor (let j = 0; j < numberOfDays; j++)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlet dayOfWeek = new Date(firstDayOfWeek);\r\n\t\t\t\t\t\t\t\tdayOfWeek.setHours(date.getHours(), date.getMinutes(), 0, 0);\r\n\t\t\t\t\t\t\t\tdayOfWeek = dayOfWeek.vrAddDays(j);\r\n\r\n\t\t\t\t\t\t\t\tfor (let resource of this.resources())\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlet endSlot = new Date(dayOfWeek);\r\n\t\t\t\t\t\t\t\t\tendSlot.vrAddMinutes(options.timeslotIntervalDuration!);\r\n\r\n\t\t\t\t\t\t\t\t\tlet td = document.createElement(\"td\");\r\n\t\t\t\t\t\t\t\t\tif (borderTopClass != \"\") td.classList.add(borderTopClass);\r\n\t\t\t\t\t\t\t\t\tif (borderBottomClass != \"\") td.classList.add(borderBottomClass);\r\n\t\t\t\t\t\t\t\t\ttd.title = timeString;\r\n\t\t\t\t\t\t\t\t\trow.appendChild(td);\r\n\r\n\t\t\t\t\t\t\t\t\tif (((columnIndex + 1) % this.resources().length) == 0)\r\n\t\t\t\t\t\t\t\t\t\ttd.classList.add(\"borderRightSolid\");\r\n\r\n\t\t\t\t\t\t\t\t\t// To fast appointment collocation\r\n\t\t\t\t\t\t\t\t\tlet slotElement = new SchedulerSlotElement();\r\n\t\t\t\t\t\t\t\t\tslotElement.resourceId = (resource != null) ? resource.value : \"0\";\r\n\t\t\t\t\t\t\t\t\tslotElement.start = dayOfWeek;\r\n\t\t\t\t\t\t\t\t\tslotElement.end = endSlot;\r\n\t\t\t\t\t\t\t\t\tslotElement.columnIndex = columnIndex;\r\n\t\t\t\t\t\t\t\t\tslotElement.rowIndex = i;\r\n\t\t\t\t\t\t\t\t\tthis._slotElementList.push(slotElement);\r\n\r\n\t\t\t\t\t\t\t\t\tcolumnIndex++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdate.vrAddMinutes(options.timeslotIntervalDuration!);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//#endregion\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tdivContent.appendChild(contentFragment);\r\n\r\n\t\t//#region Now line\r\n\t\tpuma(this.getDivContent()).remove(\".vrSchedulerNowLine\");\r\n\t\tlet nowDate = this.date()!;\r\n\t\tnowDate.setHours(new Date().getHours(), new Date().getMinutes(), 0, 0);\r\n\r\n\t\tlet nowTimeslot = this._slotElementList.filter(k => Date.vrArePeriodsOverlapped(k.start, k.end, nowDate, nowDate, true))[0];\r\n\t\tif (nowTimeslot != null)\r\n\t\t{\r\n\t\t\tlet divNowLine = puma(\"<div class='vrSchedulerNowLine'><i class='fa fa-caret-left'></i></div>\").vrAppendToPuma(this.getDivContent())[0];\r\n\t\t\tdivNowLine.style.cssText += \"left: \" + this._timeColumnWidth + \"px; top: \" + ((nowTimeslot.rowIndex * 33) - 1) + \"px; width: Calc(100% - \" + this._timeColumnWidth + \"px);\";\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\tthis.adaptHeight();\r\n\t}\r\n\r\n\tadaptHeight()\r\n\t{\r\n\t\tlet divContent = this.getDivContent();\r\n\t\tlet options = this.getOptions();\r\n\r\n\t\tlet height: number | string = 0;\r\n\t\tif (options.height == null)\r\n\t\t{\r\n\t\t\tlet schedulerOffset = puma(this.container()).offset().top;\r\n\t\t\tlet contentHeight = (window.innerHeight - schedulerOffset);\r\n\r\n\t\t\tlet toolbarHeight = puma(this.container()).find(\".vrSchedulerDivToolbar\").outerHeight();\r\n\t\t\tif (!options.showToolbar)\r\n\t\t\t\ttoolbarHeight = 0;\r\n\r\n\t\t\tlet headerHeight = puma(this.container()).find(\".vrSchedulerDivHeader\").outerHeight();\r\n\t\t\tif (!options.showHeader)\r\n\t\t\t\theaderHeight = 0;\r\n\r\n\t\t\tlet diff = toolbarHeight + headerHeight;\r\n\t\t\theight = contentHeight - diff;\r\n\t\t}\r\n\t\telse\r\n\t\t\theight = options.height;\r\n\r\n\t\tpuma(divContent).height(height);\r\n\t}\r\n\r\n\theight(value?: string | number)\r\n\t{\r\n\t\tlet height = super.height(value);\r\n\t\tpuma(this.getDivContent()).height(\"100%\");\r\n\t\treturn height;\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Properties\r\n\tview(view?: SchedulerViewEnum): SchedulerViewEnum\r\n\t{\r\n\t\tif (view != null)\r\n\t\t{\r\n\t\t\t//#region Event\r\n\t\t\tlet options = this.getOptions();\r\n\t\t\tif (options.onViewChange != null)\r\n\t\t\t{\r\n\t\t\t\tlet viewChangeEvent = new SchedulerViewChangeEvent();\r\n\t\t\t\tviewChangeEvent.sender = this;\r\n\t\t\t\tviewChangeEvent.previousView = this._actualView;\r\n\t\t\t\tviewChangeEvent.view = view;\r\n\t\t\t\toptions.onViewChange(viewChangeEvent);\r\n\r\n\t\t\t\tif (viewChangeEvent.isDefaultPrevented())\r\n\t\t\t\t\treturn this._actualView;\r\n\t\t\t}\r\n\r\n\t\t\tthis._actualView = view;\r\n\t\t\tthis._btgMenuView.select([view], false);\r\n\t\t\tthis.drawScheduler();\r\n\t\t\t//#endregion\t\t\t\r\n\r\n\t\t\tswitch (view)\r\n\t\t\t{\r\n\t\t\t\tcase SchedulerViewEnum.Day:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis._swtGroupByDateResource.hide();\r\n\t\t\t\t\t\tthis._dtpSchedulerDate.format(DateFormatEnum.LongDate);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase SchedulerViewEnum.Week:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis._swtGroupByDateResource.show();\r\n\t\t\t\t\t\tthis._dtpSchedulerDate.format(DateFormatEnum.WeekRange);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase SchedulerViewEnum.FourWeeks:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis._swtGroupByDateResource.hide();\r\n\t\t\t\t\t\tthis._dtpSchedulerDate.format(DateFormatEnum.FourWeeksRange);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.groupedByResource())\r\n\t\t\t\tthis._swtGroupByDateResource.hide();\r\n\t\t}\r\n\t\treturn this._actualView;\r\n\t}\r\n\r\n\tdate(date?: Date, triggerChange = true): Date | null\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (date != null)\r\n\t\t{\r\n\t\t\tif (this._dtpSchedulerDate.value() != date)\r\n\t\t\t\tthis._dtpSchedulerDate.value(date, false);\r\n\r\n\t\t\tif (this._dtpSchedulerDate.value() != null)\r\n\t\t\t\tthis.drawScheduler();\r\n\r\n\t\t\tif (options.onNavigate != null)\r\n\t\t\t{\r\n\t\t\t\tif (this._actualNavigateAction == null)\r\n\t\t\t\t\tthis._actualNavigateAction = SchedulerNavigateActionEnum.ChangeDate;\r\n\r\n\t\t\t\tif (triggerChange)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet navigateEvent = new SchedulerNavigateEvent();\r\n\t\t\t\t\tnavigateEvent.sender = this;\r\n\t\t\t\t\tnavigateEvent.action = this._actualNavigateAction;\r\n\t\t\t\t\tnavigateEvent.previousDate = this._dtpSchedulerDate.value();\r\n\t\t\t\t\tnavigateEvent.date = date;\r\n\t\t\t\t\tnavigateEvent.view = this.view();\r\n\t\t\t\t\toptions.onNavigate!(navigateEvent);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._actualNavigateAction = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this._dtpSchedulerDate.value();\r\n\t}\r\n\r\n\tresources(resources?: SchedulerResource[])\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (resources != null)\r\n\t\t{\r\n\t\t\tlet maxResourceNumberBasedOnView: number | null | undefined = null;\r\n\t\t\tswitch (this.view())\r\n\t\t\t{\r\n\t\t\t\tcase SchedulerViewEnum.Day: maxResourceNumberBasedOnView = options.maxResourcesNumber!.dayView; break;\r\n\t\t\t\tcase SchedulerViewEnum.Week: maxResourceNumberBasedOnView = options.maxResourcesNumber!.weekView; break;\r\n\t\t\t\tcase SchedulerViewEnum.FourWeeks: maxResourceNumberBasedOnView = options.maxResourcesNumber!.fourWeeksView; break;\r\n\t\t\t}\r\n\r\n\t\t\tif (maxResourceNumberBasedOnView != null && resources.length > maxResourceNumberBasedOnView)\r\n\t\t\t{\r\n\t\t\t\tconfirm(\"Stai impostando un numero di risorse maggiore<br /> del limite massimo impostato (\" + maxResourceNumberBasedOnView + \").<br /> Continuare comunque?\")\r\n\t\t\t\t\t.then(() =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\toptions.resources = resources;\r\n\t\t\t\t\t\tthis.drawScheduler();\r\n\t\t\t\t\t\tthis.triggerResourceChangeEvent();\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\t() => this.triggerResourceChangeEvent()); // If not\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\toptions.resources = resources;\r\n\t\t\t\tthis.drawScheduler();\r\n\t\t\t\tthis.triggerResourceChangeEvent();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn options.resources!;\r\n\t}\r\n\r\n\tgroupedByResource()\r\n\t{\r\n\t\treturn (this.resources().length > 1 || (this.resources()[0] != null && this.resources()[0].value != \"\"));\r\n\t}\r\n\r\n\tprivate triggerResourceChangeEvent()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (options.onResourcesChange != null)\r\n\t\t{\r\n\t\t\tlet resourcesChangeEvent = new SchedulerResourcesChangeEvent();\r\n\t\t\tresourcesChangeEvent.resources = options.resources!;\r\n\t\t\tresourcesChangeEvent.view = this.view();\r\n\t\t\tresourcesChangeEvent.sender = this;\r\n\t\t\toptions.onResourcesChange(resourcesChangeEvent);\r\n\t\t}\r\n\t}\r\n\r\n\ttimeslotInterval(timeslotIntervalDuration?: number): number\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (timeslotIntervalDuration != null)\r\n\t\t{\r\n\t\t\tif (options.onIntervalChange != null)\r\n\t\t\t{\r\n\t\t\t\tlet intervalChangeEvent = new SchedulerIntervalChangeEvent();\r\n\t\t\t\tintervalChangeEvent.sender = this;\r\n\t\t\t\tintervalChangeEvent.previousValue = options.timeslotIntervalDuration;\r\n\t\t\t\tintervalChangeEvent.value = timeslotIntervalDuration;\r\n\t\t\t\tintervalChangeEvent.view = this.view();\r\n\t\t\t\toptions.onIntervalChange(intervalChangeEvent);\r\n\r\n\t\t\t\tif (intervalChangeEvent.isDefaultPrevented())\r\n\t\t\t\t\treturn options.timeslotIntervalDuration!;\r\n\t\t\t}\r\n\r\n\t\t\toptions.timeslotIntervalDuration = timeslotIntervalDuration;\r\n\t\t\tthis.drawScheduler();\r\n\t\t}\r\n\t\treturn options.timeslotIntervalDuration!;\r\n\t}\r\n\r\n\tfirstDayOfWeek(): DayOfWeekEnum\r\n\t{\r\n\t\treturn this.getOptions().firstDayOfWeek!;\r\n\t}\r\n\r\n\tstartTime(): Date\r\n\t{\r\n\t\treturn this.getOptions().startTime!;\r\n\t}\r\n\r\n\tendTime(): Date\r\n\t{\r\n\t\treturn this.getOptions().endTime!;\r\n\t}\r\n\r\n\tgroupWeekByDate(group?: boolean): boolean\r\n\t{\r\n\t\tif (group != null)\r\n\t\t{\r\n\t\t\tthis._swtGroupByDateResource.checked(group, false);\r\n\t\t\tthis.drawScheduler();\r\n\t\t\tthis.rebind();\r\n\t\t}\r\n\r\n\t\tif (this.view() != SchedulerViewEnum.Week)\r\n\t\t\treturn false;\r\n\r\n\t\treturn this._swtGroupByDateResource.checked();\r\n\t}\r\n\r\n\tfullscreen(state?: boolean)\r\n\t{\r\n\t\tif (state != null)\r\n\t\t{\r\n\t\t\tif (state) this._btnExpand.click();\r\n\t\t\telse this._btnCollapse.click();\r\n\t\t}\r\n\r\n\t\tlet doc = window.document as any;\r\n\t\treturn !(!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement);\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Datasource\r\n\tdatasource<T extends SchedulerData>(datasource?: T[]): T[]\r\n\t{\r\n\t\tif (datasource != null && this._slotElementList.length > 0)\r\n\t\t{\r\n\t\t\tif (datasource.length == 0)\r\n\t\t\t{\r\n\t\t\t\tthis._datasource = datasource;\r\n\t\t\t\tpuma(this.container()).find(\".vrSchedulerAppointment\").remove();\r\n\t\t\t\treturn datasource;\r\n\t\t\t}\r\n\r\n\t\t\t//#region Appointments on several days\r\n\t\t\tlet realDatasource = [];\r\n\t\t\tfor (let appointment of datasource)\r\n\t\t\t{\r\n\t\t\t\t(appointment as InternalSchedulerAppointment).positioned = false;\r\n\t\t\t\trealDatasource.push(appointment);\r\n\r\n\t\t\t\tlet end = new Date(appointment.end);\r\n\t\t\t\tlet start = new Date(appointment.start);\r\n\t\t\t\tlet daysDifference = Date.vrDifferenceBetweenDatesInDays(end, start);\r\n\t\t\t\tif (daysDifference > 1)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (appointment.attributes == null) appointment.attributes = [];\r\n\t\t\t\t\tappointment.attributes.push({ key: \"multiday\", value: \"true\" });\r\n\r\n\t\t\t\t\tfor (let i = 1; i <= daysDifference; i++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet newApp = UtilityManager.duplicate(appointment) as T;\r\n\r\n\t\t\t\t\t\tlet newStart = start.vrAddDays(i);\r\n\t\t\t\t\t\tnewStart.setHours(this.startTime().getHours());\r\n\t\t\t\t\t\tnewApp.start = newStart;\r\n\t\t\t\t\t\tnewApp.end = new Date(newApp.start).vrAddHours(1);\r\n\r\n\t\t\t\t\t\tif (newApp.attributes == null) newApp.attributes = [];\r\n\t\t\t\t\t\tnewApp.attributes.push({ key: \"multiday\", value: \"true\" });\r\n\r\n\t\t\t\t\t\trealDatasource.push(newApp);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\tdatasource = realDatasource;\r\n\r\n\t\t\tthis.checkMandatorySchedulerDataFields(datasource[0]);\r\n\t\t\tthis._datasource = datasource;\r\n\t\t\tpuma(this.container()).find(\".vrSchedulerAppointment\").remove();\r\n\r\n\t\t\tlet appointmentFragment = document.createDocumentFragment();\r\n\t\t\tlet slotWidthList: number[] = Array.from(puma(this.container()).find(\".vrSchedulerDivContent table tr:first-child td\")).map(k => { return puma(k).outerWidth() });\r\n\t\t\tlet slotWidth = slotWidthList[0];\r\n\r\n\t\t\t//#region Draw appointments\r\n\t\t\tlet dictionaryResourceAppointments: any = datasource.vrGroupBy(k => k.resourceId);\r\n\t\t\tfor (let appointment of datasource)\r\n\t\t\t{\r\n\t\t\t\tif ((appointment as InternalSchedulerAppointment).positioned == true)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (appointment.resourceId != \"0\" && (this.resources()[0] == null || !this.resources().map(k => k.value).includes(String(appointment.resourceId))))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t//#region Overlapped appointments\r\n\t\t\t\tlet resourceAppointments = dictionaryResourceAppointments[appointment.resourceId];\r\n\t\t\t\tlet appointmentsOverlapped = this.findOverlappedAppointments(appointment, resourceAppointments);\r\n\r\n\t\t\t\tlet maxOverlapped = 1;\r\n\t\t\t\tfor (let apt of appointmentsOverlapped)\r\n\t\t\t\t{\r\n\t\t\t\t\t// Find how many appointments in same slots per row\r\n\t\t\t\t\tfor (let slot of (apt as InternalSchedulerAppointment).slotsOccupied!)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tslot.columnPosition = [];\r\n\t\t\t\t\t\tlet maxOverlappedSlot = 1;\r\n\t\t\t\t\t\tlet overlappedList: any[] = [];\r\n\t\t\t\t\t\tfor (let apt2 of appointmentsOverlapped)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (apt2.id == apt.id)\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\t\t\tfor (let slot2 of (apt2 as InternalSchedulerAppointment).slotsOccupied!)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (Date.vrArePeriodsOverlapped(slot.start, slot.end, slot2.start, slot2.end))\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\toverlappedList.push(appointment);\r\n\t\t\t\t\t\t\t\t\tmaxOverlappedSlot++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Get max overlapped number\r\n\t\t\t\t\t\tif (maxOverlappedSlot > maxOverlapped)\r\n\t\t\t\t\t\t\tmaxOverlapped = maxOverlappedSlot;\r\n\r\n\t\t\t\t\t\t(apt as InternalSchedulerAppointment).overlappedList = overlappedList.vrDistinctBy(k => k.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\r\n\r\n\t\t\t\tappointmentsOverlapped.vrSortDesc(\"duration\");\r\n\t\t\t\tfor (let apt of appointmentsOverlapped)\r\n\t\t\t\t{\r\n\t\t\t\t\t// Set correct dates based on timeslotInterval\r\n\t\t\t\t\tlet start = new Date(apt.start);\r\n\t\t\t\t\tthis.adaptDateToTimeslotDuration(start, SchedulerDateTypeEnum.Start);\r\n\r\n\t\t\t\t\tlet end = new Date(apt.end);\r\n\t\t\t\t\tthis.adaptDateToTimeslotDuration(end, SchedulerDateTypeEnum.End);\r\n\r\n\t\t\t\t\t// Find slot to position appointment\r\n\t\t\t\t\tlet slotFiltered: SchedulerSlotElement = (apt as InternalSchedulerAppointment).slotsOccupied![0];\r\n\t\t\t\t\tif (slotFiltered != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//#region Position appointment\r\n\t\t\t\t\t\tlet duration = Date.vrDifferenceBetweenDatesInMinutes(start, end);\r\n\t\t\t\t\t\tlet timeslotInterval = this.timeslotInterval();\r\n\t\t\t\t\t\tlet height = Math.round(duration / timeslotInterval) * 33 + duration / timeslotInterval - 6;\r\n\t\t\t\t\t\theight -= Math.round(duration / timeslotInterval);\r\n\r\n\t\t\t\t\t\t//#region Fix max height\r\n\t\t\t\t\t\tlet maxPositionY = this._slotElementList[this._slotElementList.length - 1].rowIndex * 33 + 33;\r\n\t\t\t\t\t\tlet finalAppointmentPositionY = (slotFiltered.rowIndex * 33) + height;\r\n\t\t\t\t\t\tif (finalAppointmentPositionY > maxPositionY)\r\n\t\t\t\t\t\t\theight = height - (finalAppointmentPositionY - maxPositionY) - 1;\r\n\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t//#region Know if a piece of slot is already occupied\r\n\t\t\t\t\t\tlet occupiedSlotList = (apt as InternalSchedulerAppointment).slotsOccupied!.map(k => k.columnPosition);\r\n\t\t\t\t\t\tlet index = 0;\r\n\t\t\t\t\t\tfor (let i = 0; i < maxOverlapped; i++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlet goTo = true;\r\n\t\t\t\t\t\t\tindex = i;\r\n\t\t\t\t\t\t\tfor (let occupiedSlot of occupiedSlotList)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (occupiedSlot[i] == true)\r\n\t\t\t\t\t\t\t\t\tgoTo = false;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (goTo)\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t// Fix width\r\n\t\t\t\t\t\tlet width = (slotWidth * 85 / 100) / maxOverlapped;\r\n\t\t\t\t\t\twidth = width;\r\n\t\t\t\t\t\tif (width <= 0)\r\n\t\t\t\t\t\t\twidth = 1;\r\n\r\n\t\t\t\t\t\t// Get xPosition\r\n\t\t\t\t\t\tlet slotFilteredWidth = slotWidthList.slice(0, slotFiltered.columnIndex).vrSum();\r\n\t\t\t\t\t\tlet newSlotFilteredWidth = slotWidthList[0] * slotFiltered.columnIndex; // 21/06/2021 - old: slotFilteredWidth + this._timeColumnWidth\r\n\t\t\t\t\t\tlet positionX = newSlotFilteredWidth + (index * width) + index + this._timeColumnWidth;\r\n\r\n\t\t\t\t\t\t// Set slot as occupied at specified index\r\n\t\t\t\t\t\tfor (let slot of (apt as InternalSchedulerAppointment).slotsOccupied!)\r\n\t\t\t\t\t\t\tslot.columnPosition[index] = true;\r\n\r\n\t\t\t\t\t\t// Draw appointment\r\n\t\t\t\t\t\tlet divAppointment = document.createElement(\"div\");\r\n\t\t\t\t\t\tdivAppointment.style.cssText += \"top: \" + (slotFiltered.rowIndex * 33) + \"px; left: \" + positionX + \"px;\";\r\n\t\t\t\t\t\tdivAppointment.className = \"vrSchedulerAppointment\";\r\n\r\n\t\t\t\t\t\t//#region Width/Height\r\n\t\t\t\t\t\tdivAppointment.style.cssText += \"width: \" + width + \"px; height: \" + height + \"px;\";\r\n\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\tthis.managePropertiesSchedulerData(divAppointment, apt);\r\n\t\t\t\t\t\tappointmentFragment.appendChild(divAppointment);\r\n\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t//#region Move appointment\r\n\t\t\t\t\t\tlet options = this.getOptions();\r\n\t\t\t\t\t\tpuma(divAppointment).on(\"mousedown\", (emd: JQuery.MouseDownEvent) =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (!this.enabled() || !options.editable!.move || this._isResizing)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\temd.preventDefault();\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Main mouse button (usually left)\r\n\t\t\t\t\t\t\tif (emd.button != 0)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\temd.preventDefault();\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tlet schedulerOffsetTop = puma(this.getDivContent()).offset().top;\r\n\t\t\t\t\t\t\tlet schedulerScrollOffset = this.getDivContent().scrollTop;\r\n\t\t\t\t\t\t\tlet schedulerOffsetLeft = puma(this.getDivContent()).offset().left;\r\n\r\n\t\t\t\t\t\t\tlet slotToMove: SchedulerSlotElement | null = null;\r\n\r\n\t\t\t\t\t\t\t//#region Starting position\r\n\t\t\t\t\t\t\tlet startingXPosition = emd.clientX;\r\n\t\t\t\t\t\t\tlet startingYPosition = emd.clientY;\r\n\t\t\t\t\t\t\tlet slotStartingPosition: SchedulerSlotElement | null = null;\r\n\t\t\t\t\t\t\tlet sum = 0;\r\n\t\t\t\t\t\t\tlet slotColumnIndex = 0;\r\n\t\t\t\t\t\t\tfor (let slotsss of slotWidthList)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tsum += slotsss;\r\n\t\t\t\t\t\t\t\tif ((sum + this._timeColumnWidth) > startingXPosition)\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tslotColumnIndex++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tslotStartingPosition = this._slotElementList[slotColumnIndex];\r\n\t\t\t\t\t\t\tlet diffYMouseAppointment = Math.abs(divAppointment.offsetTop - (emd.clientY + schedulerScrollOffset - schedulerOffsetTop));\r\n\t\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t\tpuma(document).on(\"mousemove\", (emm: MouseEvent) =>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (!this.enabled() || !options.editable!.move || this._isResizing)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\temm.preventDefault();\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// Position of the mouse\r\n\t\t\t\t\t\t\t\tlet xPositionMouse = emm.clientX - schedulerOffsetLeft;\r\n\t\t\t\t\t\t\t\tlet yPositionMouse = emm.clientY + schedulerScrollOffset - schedulerOffsetTop;\r\n\r\n\t\t\t\t\t\t\t\t// Position of appointment\r\n\t\t\t\t\t\t\t\tlet appointmentYPosition = divAppointment.offsetTop;\r\n\t\t\t\t\t\t\t\tlet appointmentHeight = divAppointment.clientHeight;\r\n\t\t\t\t\t\t\t\tlet appointmentXPosition = divAppointment.offsetLeft;\r\n\t\t\t\t\t\t\t\tlet appointmentWidth = divAppointment.clientWidth;\r\n\r\n\t\t\t\t\t\t\t\t// Sensibility\r\n\t\t\t\t\t\t\t\tif (yPositionMouse >= appointmentYPosition && yPositionMouse <= (appointmentYPosition + appointmentHeight)\r\n\t\t\t\t\t\t\t\t\t&& xPositionMouse >= appointmentXPosition && xPositionMouse <= (appointmentXPosition + appointmentWidth)\r\n\t\t\t\t\t\t\t\t\t&& slotToMove == null)\r\n\t\t\t\t\t\t\t\t\tslotToMove = null;\r\n\t\t\t\t\t\t\t\t// If it is only a click\r\n\t\t\t\t\t\t\t\telse if (emm.clientX == startingXPosition && emm.clientY == startingYPosition)\r\n\t\t\t\t\t\t\t\t\tslotToMove = null;\r\n\t\t\t\t\t\t\t\t// If you are moving\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlet appointmentDataSource = null;\r\n\t\t\t\t\t\t\t\t\tif (apt.resourceId != null)\r\n\t\t\t\t\t\t\t\t\t\tappointmentDataSource = this.datasource().filter(k => k.id == divAppointment.id && k.resourceId == apt.resourceId)[0];\r\n\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\tappointmentDataSource = this.datasource().filter(k => k.id == divAppointment.id)[0];\r\n\r\n\t\t\t\t\t\t\t\t\tlet appointmentIndex = this.datasource().indexOf(appointmentDataSource);\r\n\t\t\t\t\t\t\t\t\tappointmentDataSource = this.datasource()[appointmentIndex];\r\n\r\n\t\t\t\t\t\t\t\t\t//#region Find slot\r\n\t\t\t\t\t\t\t\t\tlet sum = 0;\r\n\t\t\t\t\t\t\t\t\tlet slotColumnIndex = 0;\r\n\t\t\t\t\t\t\t\t\tfor (let slotsss of slotWidthList)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tsum += slotsss;\r\n\t\t\t\t\t\t\t\t\t\tif ((sum + this._timeColumnWidth) > xPositionMouse)\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\t\tslotColumnIndex++;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tslotToMove = this._slotElementList.filter(k => k.columnIndex == slotColumnIndex && k.rowIndex == Math.trunc((yPositionMouse - diffYMouseAppointment) / 33))[0];\r\n\t\t\t\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t\t\t\tlet duration = Date.vrDifferenceBetweenDatesInMinutes(apt.end, apt.start);\r\n\t\t\t\t\t\t\t\t\tlet start = new Date(apt.start);\r\n\t\t\t\t\t\t\t\t\tlet end = new Date(start).vrAddMinutes(duration);\r\n\r\n\t\t\t\t\t\t\t\t\tlet options = this.getOptions();\r\n\t\t\t\t\t\t\t\t\tif (options.onMoveStart != null && !this._isMoving)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t//#region Move start event\r\n\t\t\t\t\t\t\t\t\t\tthis._isMoving = true;\r\n\r\n\t\t\t\t\t\t\t\t\t\tlet moveAppointmentEvent = new SchedulerMoveStartEvent();\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.sender = this;\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.divElement = divAppointment;\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.start = start;\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.end = end;\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.dataItem = appointmentDataSource;\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.resourceId = slotStartingPosition!.resourceId;\r\n\t\t\t\t\t\t\t\t\t\toptions.onMoveStart(moveAppointmentEvent);\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (moveAppointmentEvent.isDefaultPrevented())\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\temm.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\tpuma(document).unbind(\"mouseup\");\r\n\t\t\t\t\t\t\t\t\t\t\tpuma(document).unbind(\"mousemove\");\r\n\t\t\t\t\t\t\t\t\t\t\tslotToMove = null;\r\n\t\t\t\t\t\t\t\t\t\t\tthis._isMoving = false;\r\n\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse if (options.onMoving != null)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t//#region Moving event\r\n\t\t\t\t\t\t\t\t\t\tstart = slotToMove.start;\r\n\t\t\t\t\t\t\t\t\t\tend = slotToMove.start.vrAddMinutes(duration);\r\n\r\n\t\t\t\t\t\t\t\t\t\tlet moveAppointmentEvent = new SchedulerMovingEvent();\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.sender = this;\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.divElement = divAppointment;\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.start = start;\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.end = end;\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.dataItem = appointmentDataSource;\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.resourceId = slotToMove.resourceId;\r\n\t\t\t\t\t\t\t\t\t\toptions.onMoving(moveAppointmentEvent);\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (moveAppointmentEvent.isDefaultPrevented())\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\temm.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\tpuma(document).unbind(\"mouseup\");\r\n\t\t\t\t\t\t\t\t\t\t\tpuma(document).unbind(\"mousemove\");\r\n\t\t\t\t\t\t\t\t\t\t\tslotToMove = null;\r\n\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tlet yMovePosition = Math.trunc((yPositionMouse - diffYMouseAppointment) / 33) * 33;\r\n\t\t\t\t\t\t\t\t\tlet xMovePosition = slotWidthList.slice(0, slotToMove.columnIndex).vrSum() + this._timeColumnWidth;\r\n\r\n\t\t\t\t\t\t\t\t\tdivAppointment.style.top = yMovePosition + \"px\";\r\n\t\t\t\t\t\t\t\t\tdivAppointment.style.left = xMovePosition + \"px\";\r\n\r\n\t\t\t\t\t\t\t\t\tdivAppointment.classList.add(\"vrSchedulerAppointmentMoving\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t// Stop moving\r\n\t\t\t\t\t\t\tpuma(document).on(\"mouseup\", () =>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (!this.enabled() || !options.editable!.move || this._isResizing)\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\t\t\tpuma(document).unbind(\"mouseup\");\r\n\t\t\t\t\t\t\t\tpuma(document).unbind(\"mousemove\");\r\n\r\n\t\t\t\t\t\t\t\tpuma(divAppointment).removeClass(\"vrSchedulerAppointmentMoving\");\r\n\t\t\t\t\t\t\t\tpuma(this.getDivContent()).remove(\".vrSchedulerAppointmentMoving\");\r\n\r\n\t\t\t\t\t\t\t\twindow.setTimeout(() => this._isMoving = false, 100);\r\n\t\t\t\t\t\t\t\tif (slotToMove != null)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlet duration = Date.vrDifferenceBetweenDatesInMinutes(apt.end, apt.start);\r\n\t\t\t\t\t\t\t\t\tlet start = slotToMove.start;\r\n\t\t\t\t\t\t\t\t\tlet end = new Date(start).vrAddMinutes(duration);\r\n\r\n\t\t\t\t\t\t\t\t\tlet appointmentDataSource = null;\r\n\t\t\t\t\t\t\t\t\tif (apt.resourceId != null)\r\n\t\t\t\t\t\t\t\t\t\tappointmentDataSource = this.datasource().filter(k => k.id == divAppointment.id && k.resourceId == apt.resourceId)[0];\r\n\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\tappointmentDataSource = this.datasource().filter(k => k.id == divAppointment.id)[0];\r\n\r\n\t\t\t\t\t\t\t\t\t//#region Move end event\r\n\t\t\t\t\t\t\t\t\tlet options = this.getOptions();\r\n\t\t\t\t\t\t\t\t\tif (options.onMoveEnd != null)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tlet moveAppointmentEvent = new SchedulerMoveEndEvent();\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.sender = this;\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.divElement = divAppointment;\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.start = start;\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.end = end;\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.dataItem = appointmentDataSource;\r\n\t\t\t\t\t\t\t\t\t\tmoveAppointmentEvent.resourceId = slotToMove.resourceId;\r\n\t\t\t\t\t\t\t\t\t\toptions.onMoveEnd(moveAppointmentEvent);\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (moveAppointmentEvent.isDefaultPrevented())\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tslotToMove = null;\r\n\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t\t\t\t//#region Update appointment into datasource\r\n\t\t\t\t\t\t\t\t\tlet appointmentIndex = this.datasource().indexOf(appointmentDataSource);\r\n\t\t\t\t\t\t\t\t\tappointmentDataSource = this.datasource()[appointmentIndex];\r\n\t\t\t\t\t\t\t\t\tappointmentDataSource.start = start;\r\n\t\t\t\t\t\t\t\t\tappointmentDataSource.end = end;\r\n\t\t\t\t\t\t\t\t\tappointmentDataSource.resourceId = slotToMove.resourceId;\r\n\t\t\t\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t\t\t\tslotToMove = null;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t\t//#region Resize appointment\r\n\t\t\t\t\t\tthis.setResizing(divAppointment, apt);\r\n\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.getDivContent().appendChild(appointmentFragment);\r\n\t\t\t//#endregion\r\n\t\t}\r\n\t\treturn (this._datasource == null) ? [] : this._datasource as T[];\r\n\t}\r\n\r\n\tprivate setResizing(divAppointment: HTMLDivElement, apt: SchedulerData)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (!this.enabled() || !options.editable!.resize)\r\n\t\t\treturn;\r\n\r\n\t\tlet divResizable = document.createElement(\"div\");\r\n\t\tdivResizable.classList.add(\"vrSchedulerDivResize\");\r\n\r\n\t\tlet divInside = document.createElement(\"div\");\r\n\t\tdivInside.classList.add(\"vrSchedulerDivResizeInside\");\r\n\t\tdivResizable.appendChild(divInside);\r\n\t\tdivAppointment.appendChild(divResizable);\r\n\r\n\t\tpuma(divAppointment).on(\"mouseover\", (e: JQuery.MouseOverEvent) => divResizable.style.display = \"block\");\r\n\t\tpuma(divAppointment).on(\"mouseout\", (e: JQuery.MouseOutEvent) => divResizable.style.display = \"none\");\r\n\r\n\t\tlet pageY: number | null = null;\r\n\t\tlet slotToResize: SchedulerSlotElement | null;\r\n\r\n\t\tlet schedulerOffsetTop = puma(this.getDivContent()).offset().top;\r\n\t\tlet schedulerScrollOffset = this.getDivContent().scrollTop;\r\n\t\tlet schedulerOffsetLeft = puma(this.getDivContent()).offset().left;\r\n\r\n\t\tlet resizing = false;\r\n\r\n\t\t//#region Div events\r\n\t\tpuma(divResizable).on(\"mousedown\", (e: JQuery.MouseDownEvent) =>\r\n\t\t{\r\n\t\t\t// Main mouse button (usually left)\r\n\t\t\tif (e.button != 0)\r\n\t\t\t{\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._isResizing = true;\r\n\t\t\tpageY = e.pageY;\r\n\t\t\tlet divAppointmentHeight = divAppointment!.offsetHeight;\r\n\r\n\t\t\t//#region Document events\r\n\t\t\tpuma(document).on(\"mousemove\", (e: JQuery.MouseMoveEvent) =>\r\n\t\t\t{\r\n\t\t\t\tif (divAppointment != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet appointmentDataSource = null;\r\n\t\t\t\t\tif (apt.resourceId != null)\r\n\t\t\t\t\t\tappointmentDataSource = this.datasource().filter(k => k.id == divAppointment.id && k.resourceId == apt.resourceId)[0];\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tappointmentDataSource = this.datasource().filter(k => k.id == divAppointment.id)[0];\r\n\r\n\t\t\t\t\tlet appointmentIndex = this.datasource().indexOf(appointmentDataSource);\r\n\t\t\t\t\tappointmentDataSource = this.datasource()[appointmentIndex];\r\n\r\n\t\t\t\t\t// Position of the mouse\r\n\t\t\t\t\tlet xPositionMouse = e.clientX - schedulerOffsetLeft;\r\n\t\t\t\t\tlet yPositionMouse = e.clientY + schedulerScrollOffset - schedulerOffsetTop;\r\n\r\n\t\t\t\t\tslotToResize = this._slotElementList.filter(k => k.resourceId == apt.resourceId && k.rowIndex == Math.trunc(yPositionMouse / 33))[0];\r\n\r\n\t\t\t\t\tif (options.onResizeStart != null && !resizing)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//#region Move start event\r\n\t\t\t\t\t\tthis._isResizing = true;\r\n\t\t\t\t\t\tresizing = true;\r\n\r\n\t\t\t\t\t\tlet resizeStartEvent = new SchedulerResizeStartEvent();\r\n\t\t\t\t\t\tresizeStartEvent.sender = this;\r\n\t\t\t\t\t\tresizeStartEvent.divElement = divAppointment;\r\n\t\t\t\t\t\tresizeStartEvent.start = apt.start;\r\n\t\t\t\t\t\tresizeStartEvent.end = apt.end;\r\n\t\t\t\t\t\tresizeStartEvent.dataItem = appointmentDataSource;\r\n\t\t\t\t\t\tresizeStartEvent.resourceId = apt.resourceId;\r\n\t\t\t\t\t\toptions.onResizeStart(resizeStartEvent);\r\n\r\n\t\t\t\t\t\tif (resizeStartEvent.isDefaultPrevented())\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\tpuma(document).unbind(\"mouseup\");\r\n\t\t\t\t\t\t\tpuma(document).unbind(\"mousemove\");\r\n\t\t\t\t\t\t\tslotToResize = null;\r\n\t\t\t\t\t\t\tthis._isResizing = false;\r\n\t\t\t\t\t\t\tresizing = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (options.onResizing != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//#region Moving event\r\n\t\t\t\t\t\tlet resizingEvent = new SchedulerResizingEvent();\r\n\t\t\t\t\t\tresizingEvent.sender = this;\r\n\t\t\t\t\t\tresizingEvent.divElement = divAppointment;\r\n\t\t\t\t\t\tresizingEvent.start = apt.start;\r\n\t\t\t\t\t\tresizingEvent.end = slotToResize.end;\r\n\t\t\t\t\t\tresizingEvent.dataItem = appointmentDataSource;\r\n\t\t\t\t\t\tresizingEvent.resourceId = apt.resourceId;\r\n\t\t\t\t\t\toptions.onResizing(resizingEvent);\r\n\r\n\t\t\t\t\t\tif (resizingEvent.isDefaultPrevented())\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\tpuma(document).unbind(\"mouseup\");\r\n\t\t\t\t\t\t\tpuma(document).unbind(\"mousemove\");\r\n\t\t\t\t\t\t\tslotToResize = null;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet diffY = e.pageY - pageY!;\r\n\t\t\t\t\tlet diffToAdd = Math.trunc(diffY / 33) * 33;\r\n\t\t\t\t\tlet height = (divAppointmentHeight! + diffToAdd);\r\n\t\t\t\t\theight -= height % 33;\r\n\t\t\t\t\tdivAppointment.style.height = height + \"px\";\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tpuma(document).on(\"mouseup\", () =>\r\n\t\t\t{\r\n\t\t\t\tpuma(document).unbind(\"mouseup\");\r\n\t\t\t\tpuma(document).unbind(\"mousemove\");\r\n\t\t\t\twindow.setTimeout(() => this._isResizing = false, 100);\r\n\r\n\t\t\t\tif (slotToResize != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet appointmentDataSource = null;\r\n\t\t\t\t\tif (apt.resourceId != null)\r\n\t\t\t\t\t\tappointmentDataSource = this.datasource().filter(k => k.id == divAppointment.id && k.resourceId == apt.resourceId)[0];\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tappointmentDataSource = this.datasource().filter(k => k.id == divAppointment.id)[0];\r\n\r\n\t\t\t\t\t//#region Move end event\r\n\t\t\t\t\tlet options = this.getOptions();\r\n\t\t\t\t\tif (options.onResizeEnd != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet moveAppointmentEvent = new SchedulerMoveEndEvent();\r\n\t\t\t\t\t\tmoveAppointmentEvent.sender = this;\r\n\t\t\t\t\t\tmoveAppointmentEvent.divElement = divAppointment;\r\n\t\t\t\t\t\tmoveAppointmentEvent.start = apt.start;\r\n\t\t\t\t\t\tmoveAppointmentEvent.end = slotToResize.end;\r\n\t\t\t\t\t\tmoveAppointmentEvent.dataItem = apt;\r\n\t\t\t\t\t\tmoveAppointmentEvent.resourceId = apt.resourceId;\r\n\t\t\t\t\t\toptions.onResizeEnd(moveAppointmentEvent);\r\n\r\n\t\t\t\t\t\tif (moveAppointmentEvent.isDefaultPrevented())\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tslotToResize = null;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t//#region Update appointment into datasource\r\n\t\t\t\t\tlet appointmentIndex = this.datasource().indexOf(appointmentDataSource);\r\n\t\t\t\t\tappointmentDataSource = this.datasource()[appointmentIndex];\r\n\t\t\t\t\tappointmentDataSource.start = apt.start;\r\n\t\t\t\t\tappointmentDataSource.end = slotToResize.end;\r\n\t\t\t\t\tappointmentDataSource.resourceId = apt.resourceId;\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\tslotToResize = null;\r\n\t\t\t\t\tpageY = null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t//#endregion\r\n\t\t});\r\n\t}\r\n\r\n\tavailabilities<T extends SchedulerData>(availabilities?: T[]): T[]\r\n\t{\r\n\t\tif (availabilities != null && availabilities.length > 0)\r\n\t\t{\r\n\t\t\tlet options = this.getOptions();\r\n\t\t\tthis.checkMandatorySchedulerDataFields(availabilities[0]);\r\n\t\t\tthis._availabilities = availabilities;\r\n\r\n\t\t\tpuma(this.container()).find(\".vrSchedulerAvailability\").remove();\r\n\r\n\t\t\tlet availabilityFragment = document.createDocumentFragment();\r\n\t\t\tlet slotWidthList = Array.from(puma(this.container()).find(\".vrSchedulerDivContent table tr:first-child td\")).map(k => { return puma(k).outerWidth() });\r\n\t\t\tlet totalMinutes = Date.vrDifferenceBetweenDatesInMinutes(options.startTime!, options.endTime!);\r\n\r\n\t\t\tlet contentHeight = puma(this.getDivContent()).find(\"table\").height();\r\n\t\t\tfor (let availability of availabilities)\r\n\t\t\t{\r\n\t\t\t\t// Fixed date\r\n\t\t\t\tlet dateFrom = Date.vrConvertDateFromServer(new Date(availability.start));\r\n\t\t\t\tlet dateTo = Date.vrConvertDateFromServer(new Date(availability.end));\r\n\r\n\t\t\t\tlet slotForAvailability: SchedulerSlotElement = this._slotElementList.filter(k => (availability.resourceId == k.resourceId || availability.resourceId == null) && Date.vrArePeriodsOverlapped(k.start, k.end, dateFrom, dateTo))[0];\r\n\t\t\t\tif (slotForAvailability != null)\r\n\t\t\t\t{\r\n\t\t\t\t\t// Get xPosition\r\n\t\t\t\t\tlet newSlotFilteredWidth = slotWidthList[0] * slotForAvailability.columnIndex;\r\n\t\t\t\t\tlet positionX = newSlotFilteredWidth + this._timeColumnWidth;\r\n\t\t\t\t\tlet positionY = slotForAvailability.rowIndex * 33;\r\n\r\n\t\t\t\t\t//#region Height\r\n\t\t\t\t\tlet duration = Date.vrDifferenceBetweenDatesInMinutes(slotForAvailability.start, availability.end);\r\n\t\t\t\t\tif (duration > totalMinutes)\r\n\t\t\t\t\t\tduration = totalMinutes;\r\n\r\n\t\t\t\t\tlet height = Math.round(duration / this.timeslotInterval()) * 33;\r\n\t\t\t\t\theight = height - (height % 33);\r\n\t\t\t\t\tif (height <= 0)\r\n\t\t\t\t\t\theight = 33;\r\n\r\n\t\t\t\t\tif ((positionY + height) > contentHeight)\r\n\t\t\t\t\t\theight -= ((positionY + height) - contentHeight);\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t// Draw availability\r\n\t\t\t\t\tlet divAvailability = document.createElement(\"div\");\r\n\t\t\t\t\tdivAvailability.style.cssText = \"top: \" + positionY + \"px; left: \" + positionX + \"px;\";\r\n\t\t\t\t\tdivAvailability.className = \"vrSchedulerAvailability\";\r\n\r\n\t\t\t\t\t//#region Width/Height\r\n\t\t\t\t\tdivAvailability.style.cssText += \"width: \" + slotWidthList[slotForAvailability.columnIndex] + \"px; height: \" + height + \"px;\";\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\tthis.managePropertiesSchedulerData(divAvailability, availability);\r\n\t\t\t\t\tavailabilityFragment.appendChild(divAvailability);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.getDivContent().appendChild(availabilityFragment);\r\n\t\t}\r\n\t\treturn this._availabilities as T[];\r\n\t}\r\n\r\n\tprivate checkMandatorySchedulerDataFields(schedulerData: SchedulerData)\r\n\t{\r\n\t\tlet error = [];\r\n\t\tif (schedulerData.id == null)\r\n\t\t\terror.push(\"id\");\r\n\t\tif (schedulerData.start == null)\r\n\t\t\terror.push(\"start\");\r\n\t\tif (schedulerData.end == null)\r\n\t\t\terror.push(\"end\");\r\n\r\n\t\tif (error.length > 0)\r\n\t\t\tthrow Error(\"Prevedere i seguenti campi: \" + error.toString());\r\n\t}\r\n\r\n\tprivate managePropertiesSchedulerData(divElement: HTMLElement, schedulerData: SchedulerData)\r\n\t{\r\n\t\tdivElement.id = schedulerData.id;\r\n\r\n\t\t//#region Color\r\n\t\tif (schedulerData.tooltip != null)\r\n\t\t\tdivElement.setAttribute(\"title\", schedulerData.tooltip);\r\n\r\n\t\tif (schedulerData.backgroundColor != null)\r\n\t\t\tdivElement.style.backgroundColor = schedulerData.backgroundColor;\r\n\r\n\t\tif (schedulerData.textColor != null)\r\n\t\t\tdivElement.style.color = schedulerData.textColor;\r\n\t\t//#endregion\r\n\r\n\t\t//#region Text\r\n\t\tif (schedulerData.text != null)\r\n\t\t\tdivElement.insertAdjacentHTML(\"afterbegin\", schedulerData.text);\r\n\t\t//#endregion\r\n\r\n\t\t//#region Custom CSS/Class\r\n\t\tif (schedulerData.css != null && schedulerData.css != \"\")\r\n\t\t\tdivElement.style.cssText += schedulerData.css;\r\n\r\n\t\tif (schedulerData.class != null && schedulerData.class != \"\")\r\n\t\t\tdivElement.classList.add(schedulerData.class);\r\n\t\t//#endregion\r\n\r\n\t\t//#region Attributes\r\n\t\tdivElement.setAttribute(\"resourceId\", schedulerData.resourceId);\r\n\t\tdivElement.setAttribute(\"start\", schedulerData.start.toString());\r\n\t\tdivElement.setAttribute(\"end\", schedulerData.end.toString());\r\n\r\n\t\tif (schedulerData.attributes != null)\r\n\t\t{\r\n\t\t\tfor (let attribute of schedulerData.attributes)\r\n\t\t\t\tdivElement.setAttribute(attribute.key, attribute.value);\r\n\t\t}\r\n\t\t//#endregion\r\n\t}\r\n\r\n\trebind(appointments = true, availabilities = true)\r\n\t{\r\n\t\tif (appointments) this.rebindAppointments();\r\n\t\tif (availabilities) this.rebindAvailabilities();\r\n\t}\r\n\r\n\trebindAppointments()\r\n\t{\r\n\t\tthis.datasource(this._datasource);\r\n\t}\r\n\r\n\trebindAvailabilities()\r\n\t{\r\n\t\tthis.availabilities(this._availabilities);\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Saturation\r\n\tsaturation(saturationData?: SchedulerSaturationInfo)\r\n\t{\r\n\t\tif (saturationData != null)\r\n\t\t{\r\n\t\t\tif (saturationData.manual == null) saturationData.manual = false;\r\n\t\t\tthis._saturationData = saturationData;\r\n\r\n\t\t\tthis._saturationVisible = true;\r\n\t\t\tif (!saturationData.manual)\r\n\t\t\t\tthis.internalHideSaturation();\r\n\r\n\t\t\tswitch (this.view())\r\n\t\t\t{\r\n\t\t\t\tcase SchedulerViewEnum.Day:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//#region Day\r\n\t\t\t\t\t\tlet saturationDay = saturationData.dayMode;\r\n\t\t\t\t\t\tif (saturationDay != null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tfor (let saturation of saturationDay)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (saturation.date != null && typeof (saturation.date) == \"string\")\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tsaturation.date = new Date(saturation.date);\r\n\t\t\t\t\t\t\t\t\tsaturation.date.setHours(0, 0, 0);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tlet schedulerDate = this.date();\r\n\t\t\t\t\t\t\t\tschedulerDate!.setHours(0, 0, 0);\r\n\t\t\t\t\t\t\t\tif (saturation.date != null && !Date.vrEquals(saturation.date, schedulerDate!))\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tlet divSaturation = puma(\".vrSchedulerDayResource[resourceId='\" + saturation.resourceId + \"'] .vrSchedulerDivSaturation\")[0];\r\n\t\t\t\t\t\t\t\tlet spanPercentage = puma(\".vrSchedulerDayResource[resourceId='\" + saturation.resourceId + \"'] .vrSchedulerSpanSaturation\")[0];\r\n\t\t\t\t\t\t\t\tthis.manageSaturationPercentage(saturation, divSaturation, spanPercentage);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.adaptHeight();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase SchedulerViewEnum.Week:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//#region Week\r\n\t\t\t\t\t\tlet saturationWeek = saturationData.weekMode;\r\n\t\t\t\t\t\tif (saturationWeek != null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (!this.groupWeekByDate())\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t//#region GroupedByResources\r\n\t\t\t\t\t\t\t\tlet saturationWeekGroupedByResource = saturationWeek.groupedByResource;\r\n\t\t\t\t\t\t\t\tif (saturationWeekGroupedByResource != null)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tfor (let saturation of saturationWeekGroupedByResource)\r\n\t\t\t\t\t\t\t\t\t\tthis.manageWeekDateList(saturation);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t//#region GroupedByDate\r\n\t\t\t\t\t\t\t\tlet saturationWeekGroupedByDate = saturationWeek.groupedByDate;\r\n\t\t\t\t\t\t\t\tif (saturationWeekGroupedByDate != null)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tfor (let saturation of saturationWeekGroupedByDate)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tif (typeof (saturation.date) == \"string\")\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tsaturation.date = new Date(saturation.date);\r\n\t\t\t\t\t\t\t\t\t\t\tsaturation.date.setHours(0, 0, 0);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tlet day = saturation.date.getDate();\r\n\t\t\t\t\t\t\t\t\t\tlet month = saturation.date.getMonth();\r\n\t\t\t\t\t\t\t\t\t\tlet year = saturation.date.getFullYear();\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (saturation.resourceList != null)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tfor (let saturationResource of saturation.resourceList)\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet thResource = puma(\".vrSchedulerDayResource[resourceId='\" + saturationResource.id + \"'][day='\" + day + \"'][month='\" + month + \"'][year='\" + year + \"']\")[0];\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (thResource != null)\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet divSaturation = puma(thResource).find(\".vrSchedulerDivSaturation\")[0];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet spanPercentage = puma(thResource).find(\".vrSchedulerSpanSaturation\")[0];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.manageSaturationPercentage(saturationResource, divSaturation, spanPercentage);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.adaptHeight();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase SchedulerViewEnum.FourWeeks:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//#region FourWeeks\r\n\t\t\t\t\t\tlet saturationFourWeeks = saturationData.fourWeeksMode;\r\n\t\t\t\t\t\tif (saturationFourWeeks != null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tfor (let saturation of saturationFourWeeks)\r\n\t\t\t\t\t\t\t\tthis.manageWeekDateList(saturation);\r\n\r\n\t\t\t\t\t\t\tthis.adaptHeight();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this._saturationData;\r\n\t}\r\n\r\n\tprivate manageSaturationPercentage(saturation: SchedulerSaturationDay | SaturationResource, divSaturation: HTMLElement, spanPercentage: HTMLElement)\r\n\t{\r\n\t\tlet borderColor = (saturation.borderColor != null) ? saturation.borderColor : \"#CCC\";\r\n\t\tif (divSaturation != null)\r\n\t\t\tdivSaturation.style.cssText += \"border-color: \" + borderColor + \";\";\r\n\r\n\t\tlet color = (saturation.color != null) ? saturation.color : \"#bbb8b8\";\r\n\t\tif (spanPercentage != null)\r\n\t\t{\r\n\t\t\tpuma(spanPercentage).width(saturation.percentageValue + \"%\");\r\n\t\t\tspanPercentage.style.cssText += \"background-color: \" + color + \";\";\r\n\t\t\tspanPercentage.parentElement!.title = saturation.percentageValue + \"%\";\r\n\r\n\t\t\tif (saturation.percentageValue != null)\r\n\t\t\t\tpuma(spanPercentage).parent().css(\"display\", \"flex\");\r\n\t\t}\r\n\t}\r\n\r\n\tprivate manageWeekDateList(saturation: SchedulerSaturationWeekByResource | SchedulerSaturationFourWeeks)\r\n\t{\r\n\t\tlet spanPercentageResource = puma(\".vrSchedulerDayResource[resourceId='\" + saturation.resourceId + \"'] .vrSchedulerSaturationPercentage\")[0];\r\n\t\tif (spanPercentageResource != null)\r\n\t\t{\r\n\t\t\tpuma(spanPercentageResource).show();\r\n\t\t\tspanPercentageResource.innerHTML = \" \" + ((saturation.percentageValue != null) ? saturation.percentageValue : \"\") + \"%\";\r\n\r\n\t\t\tif (saturation.titleColor == null) saturation.titleColor = \"#000\";\r\n\t\t\tspanPercentageResource.style.cssText += \"color: \" + saturation.titleColor;\r\n\t\t}\r\n\r\n\t\tif (saturation.dateList != null)\r\n\t\t{\r\n\t\t\tfor (let saturationDate of saturation.dateList)\r\n\t\t\t{\r\n\t\t\t\tif (typeof (saturationDate.date) == \"string\")\r\n\t\t\t\t{\r\n\t\t\t\t\tsaturationDate.date = new Date(saturationDate.date);\r\n\t\t\t\t\tsaturationDate.date.setHours(0, 0, 0);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet color = (saturationDate.color != null) ? saturationDate.color : \"#bbb8b8\";\r\n\t\t\t\tlet day = saturationDate.date.getDate();\r\n\t\t\t\tlet month = saturationDate.date.getMonth();\r\n\t\t\t\tlet year = saturationDate.date.getFullYear();\r\n\r\n\t\t\t\tlet thWeekDay = puma(\".vrSchedulerWeekDay[resourceId='\" + saturation.resourceId + \"'][day='\" + day + \"'][month='\" + month + \"'][year='\" + year + \"']\")[0];\r\n\t\t\t\tif (thWeekDay != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet divSaturation = puma(thWeekDay).find(\".vrSchedulerDivSaturation\")[0];\r\n\t\t\t\t\tlet borderColor = (saturationDate.borderColor != null) ? saturationDate.borderColor : \"#CCC\";\r\n\t\t\t\t\tif (divSaturation != null)\r\n\t\t\t\t\t\tdivSaturation.style.cssText += \"border-color: \" + borderColor + \";\";\r\n\r\n\t\t\t\t\tlet spanPercentage = puma(thWeekDay).find(\".vrSchedulerSpanSaturation\")[0];\r\n\t\t\t\t\tif (spanPercentage != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpuma(spanPercentage).width(saturationDate.percentageValue + \"%\");\r\n\t\t\t\t\t\tspanPercentage.style.cssText += \"background-color: \" + color + \";\";\r\n\t\t\t\t\t\tspanPercentage.parentElement!.title = saturationDate.percentageValue + \"%\";\r\n\r\n\t\t\t\t\t\tif (saturationDate.percentageValue != null)\r\n\t\t\t\t\t\t\tpuma(spanPercentage).parent().css(\"display\", \"flex\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tclearSaturation()\r\n\t{\r\n\t\tthis._saturationData = undefined;\r\n\t\tthis.hideSaturation();\r\n\t}\r\n\r\n\tshowSaturation()\r\n\t{\r\n\t\tthis.internalShowSaturation();\r\n\t\tthis._saturationVisible = true;\r\n\t}\r\n\r\n\tprivate internalShowSaturation()\r\n\t{\r\n\t\tfor (let divSaturation of Array.from<HTMLElement>(puma(\".vrSchedulerDivSaturation\")))\r\n\t\t\tdivSaturation.style.cssText += \"display: flex;\";\r\n\r\n\t\tpuma(\".vrSchedulerSaturationPercentage\").show();\r\n\t\tthis.adaptHeight();\r\n\t}\r\n\r\n\thideSaturation()\r\n\t{\r\n\t\tthis.internalHideSaturation();\r\n\t\tthis._saturationVisible = false;\r\n\t}\r\n\r\n\tprivate internalHideSaturation()\r\n\t{\r\n\t\tpuma(\".vrSchedulerDivSaturation\").hide();\r\n\t\tpuma(\".vrSchedulerSaturationPercentage\").hide();\r\n\t\tthis.adaptHeight();\r\n\t}\r\n\r\n\tsaturationVisible()\r\n\t{\r\n\t\treturn this._saturationVisible;\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Methods\r\n\tbounceAppointment(divElementId: string)\r\n\t{\r\n\t\tif (!divElementId.startsWith(\"#\"))\r\n\t\t\tdivElementId = \"#\" + divElementId;\r\n\r\n\t\tlet divAppointment = puma(divElementId)[0];\r\n\t\tif (divAppointment != null)\r\n\t\t{\r\n\t\t\tdivAppointment.classList.add(\"vrSchedulerAppointmentAnimated\");\r\n\t\t\tdivAppointment.classList.add(\"vrSchedulerAppointmentBounce\");\r\n\t\t}\r\n\t}\r\n\r\n\tprivate manageSchedulerClick()\r\n\t{\r\n\t\tpuma(this.element()).on(\"click\", \".vrSchedulerDivContent td, .vrSchedulerAppointment, .vrSchedulerAvailability\", (e: any) =>\r\n\t\t{\r\n\t\t\tlet options = this.getOptions();\r\n\t\t\tif (!this.enabled())\r\n\t\t\t\treturn;\r\n\r\n\t\t\tlet target = puma(e.currentTarget);\r\n\t\t\tlet schedulerOffsetTop = puma(this.getDivContent()).offset().top;\r\n\t\t\tlet schedulerScrollOffset = this.getDivContent().scrollTop;\r\n\t\t\tlet schedulerOffsetLeft = puma(this.getDivContent()).offset().left;\r\n\r\n\t\t\tlet slotWidth = puma(this.container()).find(\".vrSchedulerDivContent table td\").outerWidth();\r\n\t\t\tlet xPositionMouse = e.clientX - schedulerOffsetLeft;\r\n\t\t\tlet yPositionMouse = e.clientY + schedulerScrollOffset - schedulerOffsetTop;\r\n\t\t\tlet slotElement = this._slotElementList.filter(k => k.columnIndex == (Math.trunc((xPositionMouse - 63) / slotWidth)) && k.rowIndex == Math.trunc(yPositionMouse / 33))[0];\r\n\t\t\tif (slotElement == null)\r\n\t\t\t\treturn;\r\n\r\n\t\t\t// 0 = Main mouse button (usually left)\r\n\t\t\tif (e.button == 0 && !this._isMoving && !this._isResizing)\r\n\t\t\t{\r\n\t\t\t\tif (target.hasClass(\"vrSchedulerAppointment\"))\r\n\t\t\t\t{\r\n\t\t\t\t\tlet appointmentDataSource = this.datasource().filter(k => k.id == target[0].id)[0];\r\n\t\t\t\t\tlet duration = Date.vrDifferenceBetweenDatesInMinutes(appointmentDataSource.end, appointmentDataSource.start);\r\n\t\t\t\t\tlet start = new Date(appointmentDataSource.start);\r\n\t\t\t\t\tlet end = new Date(start).vrAddMinutes(duration);\r\n\r\n\t\t\t\t\t//#region Click on appointment\r\n\t\t\t\t\tif (options.onAppointmentClick != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet clickOnAppointmentEvent = new SchedulerAppointmentClickEvent();\r\n\t\t\t\t\t\tclickOnAppointmentEvent.sender = this;\r\n\t\t\t\t\t\tclickOnAppointmentEvent.slotElement = slotElement;\r\n\t\t\t\t\t\tclickOnAppointmentEvent.start = start;\r\n\t\t\t\t\t\tclickOnAppointmentEvent.end = end;\r\n\t\t\t\t\t\tclickOnAppointmentEvent.resourceId = appointmentDataSource.resourceId;\r\n\t\t\t\t\t\tclickOnAppointmentEvent.dataItem = appointmentDataSource;\r\n\t\t\t\t\t\tclickOnAppointmentEvent.element = target[0];\r\n\t\t\t\t\t\toptions.onAppointmentClick(clickOnAppointmentEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//#endregion\r\n\t\t\t\t}\r\n\t\t\t\telse if (target.hasClass(\"vrSchedulerAvailability\"))\r\n\t\t\t\t{\r\n\t\t\t\t\tlet availabilityDataSource = this.availabilities().filter(k => k.id == target[0].id)[0];\r\n\t\t\t\t\tlet duration = Date.vrDifferenceBetweenDatesInMinutes(availabilityDataSource.end, availabilityDataSource.start);\r\n\t\t\t\t\tlet start = new Date(availabilityDataSource.start);\r\n\t\t\t\t\tlet end = new Date(start).vrAddMinutes(duration);\r\n\r\n\t\t\t\t\t//#region Click on availability\r\n\t\t\t\t\tif (options.onAvailabilityClick != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet clickOnAvailabilityEvent = new SchedulerAvailabilityClickEvent();\r\n\t\t\t\t\t\tclickOnAvailabilityEvent.sender = this;\r\n\t\t\t\t\t\tclickOnAvailabilityEvent.slotElement = slotElement;\r\n\t\t\t\t\t\tclickOnAvailabilityEvent.start = start;\r\n\t\t\t\t\t\tclickOnAvailabilityEvent.end = end;\r\n\t\t\t\t\t\tclickOnAvailabilityEvent.resourceId = availabilityDataSource.resourceId;\r\n\t\t\t\t\t\tclickOnAvailabilityEvent.dataItem = availabilityDataSource;\r\n\t\t\t\t\t\tclickOnAvailabilityEvent.element = target[0];\r\n\t\t\t\t\t\toptions.onAvailabilityClick(clickOnAvailabilityEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//#endregion\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t//#region Click on timeslot\r\n\t\t\t\t\tif (options.onTimeslotClick != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet clickOnTimeslotEvent = new SchedulerTimeslotClickEvent();\r\n\t\t\t\t\t\tclickOnTimeslotEvent.sender = this;\r\n\t\t\t\t\t\tclickOnTimeslotEvent.slotElement = slotElement;\r\n\t\t\t\t\t\tclickOnTimeslotEvent.start = slotElement.start;\r\n\t\t\t\t\t\tclickOnTimeslotEvent.end = slotElement.end;\r\n\t\t\t\t\t\tclickOnTimeslotEvent.resourceId = slotElement.resourceId;\r\n\t\t\t\t\t\tclickOnTimeslotEvent.element = target[0];\r\n\t\t\t\t\t\toptions.onTimeslotClick(clickOnTimeslotEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//#endregion\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis._isMoving = false;\r\n\t\t\t\tthis._isResizing = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tpuma(this.element()).on(\"click\", \".vrSchedulerDayResource\", (e: any) =>\r\n\t\t{\r\n\t\t\t// Only if left key\r\n\t\t\tif (e.button == 0)\r\n\t\t\t{\r\n\t\t\t\tlet target = puma(e.currentTarget);\r\n\t\t\t\tlet resourceId = target[0].getAttribute(\"resourceId\")!;\r\n\t\t\t\tlet resourceName = target[0].getAttribute(\"resourceName\")!.replace(\"~\", \" \");\r\n\r\n\t\t\t\tlet resource = new SchedulerResource();\r\n\t\t\t\tresource.value = resourceId;\r\n\t\t\t\tresource.text = resourceName;\r\n\t\t\t\tthis.resources([resource]);\r\n\r\n\t\t\t\tthis.view(SchedulerViewEnum.FourWeeks);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tpuma(this.element()).on(\"click\", \".vrSchedulerWeekDay\", (e: any) =>\r\n\t\t{\r\n\t\t\t// Only if left key\r\n\t\t\tif (e.button == 0)\r\n\t\t\t{\r\n\t\t\t\tlet target = puma(e.currentTarget);\r\n\t\t\t\tlet day = target[0].getAttribute(\"day\")!;\r\n\t\t\t\tlet month = target[0].getAttribute(\"month\")!;\r\n\t\t\t\tlet year = target[0].getAttribute(\"year\")!;\r\n\r\n\t\t\t\tthis.view(SchedulerViewEnum.Day);\r\n\t\t\t\tlet date = new Date(year, month, day);\r\n\t\t\t\tthis.date(date);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getDivContent(): HTMLElement\r\n\t{\r\n\t\treturn puma(this.container()).find(\".vrSchedulerDivContent\")[0];\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Utilities\r\n\tprivate findOverlappedAppointments(appointment: SchedulerData, resourceAppointments: SchedulerData[]): SchedulerData[]\r\n\t{\r\n\t\t// Set correct dates based on timeslotInterval\r\n\t\tlet start = new Date(appointment.start);\r\n\t\tthis.adaptDateToTimeslotDuration(start, SchedulerDateTypeEnum.Start);\r\n\r\n\t\tlet end = new Date(appointment.end);\r\n\t\tthis.adaptDateToTimeslotDuration(end, SchedulerDateTypeEnum.End);\r\n\r\n\t\t// Get appointment slots\r\n\t\tlet appointmentSlots = this.getAppointmentSlots(appointment);\r\n\r\n\t\tlet appointmentsOverlapped: any[] = [];\r\n\t\t(appointment as InternalSchedulerAppointment).positioned = true;\r\n\t\t(appointment as InternalSchedulerAppointment).slotsOccupied = appointmentSlots;\r\n\t\tappointmentsOverlapped.push(appointment);\r\n\r\n\t\t// Get overlapped appointments\r\n\t\tfor (let resAppointment of resourceAppointments)\r\n\t\t{\r\n\t\t\tif ((resAppointment as InternalSchedulerAppointment).positioned)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t// Set dates based on timeslotInterval\r\n\t\t\tlet resAppointmentStart = new Date(resAppointment.start);\r\n\t\t\tthis.adaptDateToTimeslotDuration(resAppointmentStart, SchedulerDateTypeEnum.Start);\r\n\r\n\t\t\tlet resAppointmentEnd = new Date(resAppointment.end);\r\n\t\t\tthis.adaptDateToTimeslotDuration(resAppointmentEnd, SchedulerDateTypeEnum.End);\r\n\r\n\t\t\t// If overlap\r\n\t\t\tif (/*start.getDate() == resAppointmentStart.getDate() && end.getDate() == resAppointmentEnd.getDate()\r\n\t\t\t\t&&*/ start < resAppointmentEnd && end > resAppointmentStart)\r\n\t\t\t{\r\n\t\t\t\tlet overlappedList = this.findOverlappedAppointments(resAppointment, resourceAppointments);\r\n\t\t\t\tfor (let overlappedApt of overlappedList)\r\n\t\t\t\t\tappointmentsOverlapped.push(overlappedApt);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn appointmentsOverlapped;\r\n\t}\r\n\r\n\tprivate adaptDateToTimeslotDuration(date: Date, dateType: SchedulerDateTypeEnum)\r\n\t{\r\n\t\tlet minutes = date.getMinutes();\r\n\t\tlet timeslotInterval = this.timeslotInterval();\r\n\r\n\t\tif (dateType == SchedulerDateTypeEnum.Start)\r\n\t\t{\r\n\t\t\tif (minutes % timeslotInterval > 0)\r\n\t\t\t\tdate.setMinutes(minutes - (minutes % timeslotInterval));\r\n\t\t}\r\n\t\telse if (dateType == SchedulerDateTypeEnum.End)\r\n\t\t{\r\n\t\t\tif (minutes % timeslotInterval > 0)\r\n\t\t\t\tdate.setMinutes(minutes + (timeslotInterval - (minutes % timeslotInterval)));\r\n\t\t}\r\n\t\treturn date;\r\n\t}\r\n\r\n\tprivate getAppointmentSlots(appointment: SchedulerData): SchedulerSlotElement[]\r\n\t{\r\n\t\tlet start = new Date(appointment.start);\r\n\t\tlet end = new Date(appointment.end);\r\n\t\treturn this._slotElementList.filter(k => (appointment.resourceId == k.resourceId || appointment.resourceId == null) && k.start.getDate() == start.getDate() && Date.vrArePeriodsOverlapped(k.start, k.end, start, end));\r\n\t}\r\n\r\n\texportPdf(fileName = \"Calendario.pdf\", onlyVisible = false, autoPrint = false, loader = true)\r\n\t{\r\n\t\tif (loader)\r\n\t\t\tshowLoader();\r\n\r\n\t\tif (!onlyVisible)\r\n\t\t\tpuma(this.container()).find(\".vrSchedulerDivContent\")[0].style.cssText += \"height: unset;\";\r\n\r\n\t\twindow.setTimeout(() =>\r\n\t\t{\r\n\t\t\thtml2canvas(this.container()).then((canvas: any) =>\r\n\t\t\t{\r\n\t\t\t\t//#region Height and Width\r\n\t\t\t\tlet elementWidth = $(this.container()).width();\r\n\t\t\t\tlet elementHeight = $(this.container()).height();\r\n\t\t\t\tlet topLeftMargin = 0;\r\n\t\t\t\tlet pdfWidth = elementWidth! + (topLeftMargin * 2);\r\n\t\t\t\tlet pdfHeight = (pdfWidth * 1) + (topLeftMargin * 2);\r\n\t\t\t\tlet totalPDFPages = Math.ceil(elementHeight! / pdfHeight) - 1;\r\n\t\t\t\t//#endregion\r\n\r\n\t\t\t\tlet pdf = new jsPDF({\r\n\t\t\t\t\torientation: \"landscape\",\r\n\t\t\t\t\tunit: \"pt\",\r\n\t\t\t\t\tformat: [pdfWidth, pdfHeight]\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar imgData = canvas.toDataURL(\"image/png\", 1.0);\r\n\t\t\t\tpdf.addImage(imgData, \"png\", topLeftMargin, topLeftMargin, elementWidth, elementHeight);\r\n\r\n\t\t\t\tfor (let i = 1; i <= totalPDFPages; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tpdf.addPage([pdfWidth, pdfHeight], \"landscape\");\r\n\t\t\t\t\tpdf.addImage(imgData, \"png\", topLeftMargin, -(pdfHeight * i) + (topLeftMargin * 4), elementWidth, elementHeight);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (autoPrint)\r\n\t\t\t\t\tpdf.autoPrint();\r\n\r\n\t\t\t\tpdf.save(fileName);\r\n\r\n\t\t\t\tif (loader)\r\n\t\t\t\t\thideLoader();\r\n\t\t\t});\r\n\t\t}, 100);\r\n\t}\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.options<SchedulerOptions>();\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass SchedulerEvent extends VrControlsEvent\r\n{\r\n\tsender: Scheduler;\r\n}\r\n\r\nclass SchedulerNavigateEvent extends SchedulerEvent\r\n{\r\n\taction?: SchedulerNavigateActionEnum;\r\n\tdate?: Date;\r\n\tview?: SchedulerViewEnum;\r\n\tpreviousDate: Date | null;\r\n}\r\n\r\nclass SchedulerViewChangeEvent extends SchedulerEvent\r\n{\r\n\tpreviousView: SchedulerViewEnum;\r\n\tview: SchedulerViewEnum;\r\n}\r\n\r\nclass SchedulerIntervalChangeEvent extends SchedulerEvent\r\n{\r\n\tvalue?: number;\r\n\tview?: SchedulerViewEnum;\r\n\tpreviousValue: number | undefined;\r\n}\r\n\r\nclass SchedulerResourcesChangeEvent extends SchedulerEvent\r\n{\r\n\tresources: SchedulerResource[];\r\n\tview?: SchedulerViewEnum;\r\n}\r\n\r\nenum SchedulerDateTypeEnum\r\n{\r\n\tStart = 0,\r\n\tEnd = 1\r\n}\r\n\r\n//#region Click events\r\nclass SchedulerClickEvent extends SchedulerEvent\r\n{\r\n\tstart: Date;\r\n\tend: Date;\r\n\tresourceId: string;\r\n\telement: HTMLElement;\r\n\tslotElement: SchedulerSlotElement;\r\n}\r\n\r\nexport class SchedulerTimeslotClickEvent extends SchedulerClickEvent\r\n{\r\n}\r\n\r\nexport class SchedulerAppointmentClickEvent extends SchedulerClickEvent\r\n{\r\n\tdataItem: SchedulerData;\r\n}\r\n\r\nexport class SchedulerAvailabilityClickEvent extends SchedulerClickEvent\r\n{\r\n\tdataItem: SchedulerData;\r\n}\r\n//#endregion\r\n\r\n//#region Move events\r\nclass SchedulerMoveEvent extends SchedulerEvent\r\n{\r\n\tstart: Date;\r\n\tend: Date;\r\n\tresourceId: string;\r\n\tdivElement: HTMLDivElement;\r\n\tdataItem: SchedulerData;\r\n}\r\n\r\nclass SchedulerMoveStartEvent extends SchedulerMoveEvent\r\n{\r\n}\r\n\r\nclass SchedulerMovingEvent extends SchedulerMoveEvent\r\n{\r\n\r\n}\r\n\r\nclass SchedulerMoveEndEvent extends SchedulerMoveEvent\r\n{\r\n}\r\n//#endregion\r\n\r\n//#region Resize events\r\nclass SchedulerResizeEvent extends SchedulerEvent\r\n{\r\n\tstart: Date;\r\n\tend: Date;\r\n\tresourceId: string;\r\n\tdivElement: HTMLDivElement;\r\n\tdataItem: SchedulerData;\r\n}\r\n\r\nclass SchedulerResizeStartEvent extends SchedulerResizeEvent\r\n{\r\n}\r\n\r\nclass SchedulerResizingEvent extends SchedulerResizeEvent\r\n{\r\n\r\n}\r\n\r\nclass SchedulerResizeEndEvent extends SchedulerResizeEvent\r\n{\r\n}\r\n//#endregion\r\n\r\nclass SchedulerMaxResourceNumber\r\n{\r\n\tdayView?: number;\r\n\tweekView?: number;\r\n\tfourWeeksView?: number;\r\n}\r\n\r\nclass InternalSchedulerAppointment\r\n{\r\n\tslotsOccupied?: SchedulerSlotElement[];\r\n\tpositioned?: boolean;\r\n\toverlappedList?: SchedulerData[];\r\n}\r\n\r\nclass SchedulerExpandCollapseEvent extends SchedulerEvent\r\n{\r\n\tbuttonExpand: Button;\r\n\tbuttonCollpase: Button;\r\n}\r\n\r\nclass SchedulerExpandEvent extends SchedulerExpandCollapseEvent\r\n{\r\n}\r\n\r\nclass SchedulerCollapseEvent extends SchedulerExpandCollapseEvent\r\n{\r\n}\r\n\r\nclass SchedulerEditable\r\n{\r\n\tmove?: boolean;\r\n\tresize?: boolean;\r\n\t//delete?: boolean;\r\n}\r\n//#endregion","import { Ecc, QrCodeManager } from \"../../../src/managers/qrCodeManager\";\r\nimport { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { BorderStyleEnum, ControlTypeEnum, puma } from \"../vr\";\r\n\r\n//#region Options\r\nexport class QrCodeOptions extends VrControlOptions\r\n{\r\n\tvalue?: string | number;\r\n\tcolor?: string;\r\n\tborder?: boolean | QrCodeBorderSettings;\r\n\twrap?: boolean;\r\n\r\n\tonClick?: (e: QrCodeClickEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class QrCode extends VrControl\r\n{\r\n\t//#region Variables\r\n\tprivate _value: string | number;\r\n\tprivate _svg: SVGElement;\r\n\t//#endregion\r\n\r\n\tconstructor(element: HTMLElement, options?: QrCodeOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new QrCodeOptions();\r\n\r\n\t\tif (options.width == null) options.width = 200;\r\n\t\tif (options.color == null) options.color = \"#000000\";\r\n\t\tif (options.wrap == null) options.wrap = true;\r\n\t\tif (options.tabIndex == null) options.tabIndex = -1;\r\n\r\n\t\tif (options.border == null) options.border = false;\r\n\t\tif (options.border === true) options.border = new QrCodeBorderSettings();\r\n\t\tif (options.border !== false)\r\n\t\t{\r\n\t\t\tif (options.border.color == null) options.border.color = options.color;\r\n\t\t\tif (options.border.size == null) options.border.size = 1;\r\n\t\t\tif (options.border.style == null) options.border.style = BorderStyleEnum.Solid;\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.QrCode);\r\n\r\n\t\tif (options.value != null)\r\n\t\t\tthis.value(options.value);\r\n\r\n\t\t//#region Events\r\n\t\tif (options.onClick != null)\r\n\t\t{\r\n\t\t\tthis.element().style.cssText += \"cursor: pointer;\";\r\n\t\t\tpuma(this.element()).on(\"click\", (e: JQuery.ClickEvent) => \r\n\t\t\t{\r\n\t\t\t\tlet clickEvent = new QrCodeClickEvent();\r\n\t\t\t\tclickEvent.sender = this;\r\n\t\t\t\tclickEvent.value = this.value();\r\n\t\t\t\toptions!.onClick!(clickEvent);\r\n\t\t\t})\r\n\t\t}\r\n\t\t//#endregion\r\n\t}\r\n\r\n\t//#region Methods\r\n\tvalue(value?: string | number)\r\n\t{\r\n\t\tif (value != null) \r\n\t\t{\r\n\t\t\tif (value === \"\")\r\n\t\t\t{\r\n\t\t\t\tthis.clear();\r\n\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\r\n\t\t\tlet options = this.getOptions();\r\n\t\t\tpuma(this.element()).empty();\r\n\r\n\t\t\tlet qr0: QrCodeManager = QrCodeManager.encodeText(String(value), Ecc.MEDIUM);\r\n\t\t\tlet svg = qr0.toSvgString(4, options.color!);\r\n\t\t\tpuma(this.element()).vrAppendPuma(svg);\r\n\r\n\t\t\tthis._svg = puma(this.element()).find(\"svg\")[0];\r\n\r\n\t\t\tif (!options.wrap)\r\n\t\t\t\tpuma(this._svg).find(\"rect\")[0].style.cssText += \"fill: transparent;\";\r\n\r\n\t\t\tif (options.border !== false)\r\n\t\t\t{\r\n\t\t\t\tlet border = options.border as QrCodeBorderSettings;\r\n\t\t\t\tthis._svg.style.cssText += \"border-style: \" + border.style + \"; border-width: \" + border.size + \"px; border-color: \" + border.color + \";\";\r\n\t\t\t}\r\n\r\n\t\t\tthis._value = value;\r\n\t\t\tthis.tooltip(String(value));\r\n\t\t}\r\n\t\treturn String(this._value);\r\n\t}\r\n\r\n\tsvg()\r\n\t{\r\n\t\treturn this._svg;\r\n\t}\r\n\r\n\tclear()\r\n\t{\r\n\t\tpuma(this.element()).empty();\r\n\t\tthis._value = \"\";\r\n\t\tthis.tooltip(\"\");\r\n\t}\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.options<QrCodeOptions>();\r\n\t}\r\n\t//#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass QrCodeBorderSettings\r\n{\r\n\tsize?: number;\r\n\tcolor?: string;\r\n\tstyle?: string | BorderStyleEnum;\r\n}\r\n\r\nclass QrCodeClickEvent extends VrControlsEvent\r\n{\r\n\tsender: QrCode;\r\n\tvalue: string;\r\n}\r\n//#endregion","type bit = number;\r\ntype byte = number;\r\ntype int = number;\r\n\r\nexport class QrCodeManager\r\n{\r\n\t// Returns a QR Code representing the given Unicode text string at the given error correction level.\r\n\tpublic static encodeText(text: string, ecl: Ecc): QrCodeManager\r\n\t{\r\n\t\tconst segs: Array<QrSegment> = QrSegment.makeSegments(text);\r\n\t\treturn QrCodeManager.encodeSegments(segs, ecl);\r\n\t}\r\n\r\n\t// Returns a QR Code representing the given binary data at the given error correction level.\r\n\tpublic static encodeBinary(data: Array<byte>, ecl: Ecc): QrCodeManager\r\n\t{\r\n\t\tconst seg: QrSegment = QrSegment.makeBytes(data);\r\n\t\treturn QrCodeManager.encodeSegments([seg], ecl);\r\n\t}\r\n\r\n\t// Returns a QR Code representing the given segments with the given encoding parameters.\r\n\tpublic static encodeSegments(segs: Array<QrSegment>, ecl: Ecc,\r\n\t\tminVersion: int = 1, maxVersion: int = 40,\r\n\t\tmask: int = -1, boostEcl: boolean = true): QrCodeManager\r\n\t{\r\n\t\tif (!(QrCodeManager.MIN_VERSION <= minVersion && minVersion <= maxVersion && maxVersion <= QrCodeManager.MAX_VERSION)\r\n\t\t\t|| mask < -1 || mask > 7)\r\n\t\t\tthrow \"Invalid value\";\r\n\r\n\t\t// Find the minimal version number to use\r\n\t\tlet version: int;\r\n\t\tlet dataUsedBits: int;\r\n\t\tfor (version = minVersion; ; version++)\r\n\t\t{\r\n\t\t\tconst dataCapacityBits: int = QrCodeManager.getNumDataCodewords(version, ecl) * 8;  // Number of data bits available\r\n\t\t\tconst usedBits: number = QrSegment.getTotalBits(segs, version);\r\n\t\t\tif (usedBits <= dataCapacityBits)\r\n\t\t\t{\r\n\t\t\t\tdataUsedBits = usedBits;\r\n\t\t\t\tbreak;  // This version number is found to be suitable\r\n\t\t\t}\r\n\t\t\tif (version >= maxVersion)  // All versions in the range could not fit the given data\r\n\t\t\t\tthrow \"Data too long\";\r\n\t\t}\r\n\r\n\t\t// Increase the error correction level while the data still fits in the current version number\r\n\t\tfor (const newEcl of [Ecc.MEDIUM, Ecc.QUARTILE, Ecc.HIGH])\r\n\t\t{  // From low to high\r\n\t\t\tif (boostEcl && dataUsedBits <= QrCodeManager.getNumDataCodewords(version, newEcl) * 8)\r\n\t\t\t\tecl = newEcl;\r\n\t\t}\r\n\r\n\t\t// Concatenate all segments to create the data bit string\r\n\t\tlet bb: Array<bit> = []\r\n\t\tfor (const seg of segs)\r\n\t\t{\r\n\t\t\tappendBits(seg.mode.modeBits, 4, bb);\r\n\t\t\tappendBits(seg.numChars, seg.mode.numCharCountBits(version), bb);\r\n\t\t\tfor (const b of seg.getData())\r\n\t\t\t\tbb.push(b);\r\n\t\t}\r\n\t\tif (bb.length != dataUsedBits)\r\n\t\t\tthrow \"Assertion error\";\r\n\r\n\t\t// Add terminator and pad up to a byte if applicable\r\n\t\tconst dataCapacityBits: int = QrCodeManager.getNumDataCodewords(version, ecl) * 8;\r\n\t\tif (bb.length > dataCapacityBits)\r\n\t\t\tthrow \"Assertion error\";\r\n\t\tappendBits(0, Math.min(4, dataCapacityBits - bb.length), bb);\r\n\t\tappendBits(0, (8 - bb.length % 8) % 8, bb);\r\n\t\tif (bb.length % 8 != 0)\r\n\t\t\tthrow \"Assertion error\";\r\n\r\n\t\t// Pad with alternating bytes until data capacity is reached\r\n\t\tfor (let padByte = 0xEC; bb.length < dataCapacityBits; padByte ^= 0xEC ^ 0x11)\r\n\t\t\tappendBits(padByte, 8, bb);\r\n\r\n\t\t// Pack bits into bytes in big endian\r\n\t\tlet dataCodewords: Array<byte> = [];\r\n\t\twhile (dataCodewords.length * 8 < bb.length)\r\n\t\t\tdataCodewords.push(0);\r\n\t\tbb.forEach((b: bit, i: int) =>\r\n\t\t\tdataCodewords[i >>> 3] |= b << (7 - (i & 7)));\r\n\r\n\t\t// Create the QR Code object\r\n\t\treturn new QrCodeManager(version, ecl, dataCodewords, mask);\r\n\t}\r\n\r\n\t// The width and height of this QR Code, measured in modules, between\r\n\t// 21 and 177 (inclusive). This is equal to version * 4 + 17.\r\n\tpublic readonly size: int;\r\n\r\n\t// The modules of this QR Code (false = white, true = black).\r\n\t// Immutable after constructor finishes. Accessed through getModule().\r\n\tprivate readonly modules: Array<Array<boolean>> = [];\r\n\r\n\t// Indicates function modules that are not subjected to masking. Discarded when constructor finishes.\r\n\tprivate readonly isFunction: Array<Array<boolean>> = [];\r\n\r\n\r\n\t/*-- Constructor (low level) and fields --*/\r\n\r\n\t// Creates a new QR Code with the given version number,\r\n\t// error correction level, data codeword bytes, and mask number.\r\n\t// This is a low-level API that most users should not use directly.\r\n\t// A mid-level API is the encodeSegments() function.\r\n\tpublic constructor(\r\n\t\t// The version number of this QR Code, which is between 1 and 40 (inclusive).\r\n\t\t// This determines the size of this barcode.\r\n\t\tpublic readonly version: int,\r\n\r\n\t\t// The error correction level used in this QR Code.\r\n\t\tpublic readonly errorCorrectionLevel: Ecc,\r\n\r\n\t\tdataCodewords: Array<byte>,\r\n\r\n\t\t// The index of the mask pattern used in this QR Code, which is between 0 and 7 (inclusive).\r\n\t\t// Even if a QR Code is created with automatic masking requested (mask = -1),\r\n\t\t// the resulting object still has a mask value between 0 and 7.\r\n\t\tpublic readonly mask: int)\r\n\t{\r\n\r\n\t\t// Check scalar arguments\r\n\t\tif (version < QrCodeManager.MIN_VERSION || version > QrCodeManager.MAX_VERSION)\r\n\t\t\tthrow \"Version value out of range\";\r\n\t\tif (mask < -1 || mask > 7)\r\n\t\t\tthrow \"Mask value out of range\";\r\n\t\tthis.size = version * 4 + 17;\r\n\r\n\t\t// Initialize both grids to be size*size arrays of Boolean false\r\n\t\tlet row: Array<boolean> = [];\r\n\t\tfor (let i = 0; i < this.size; i++)\r\n\t\t\trow.push(false);\r\n\t\tfor (let i = 0; i < this.size; i++)\r\n\t\t{\r\n\t\t\tthis.modules.push(row.slice());  // Initially all white\r\n\t\t\tthis.isFunction.push(row.slice());\r\n\t\t}\r\n\r\n\t\t// Compute ECC, draw modules\r\n\t\tthis.drawFunctionPatterns();\r\n\t\tconst allCodewords: Array<byte> = this.addEccAndInterleave(dataCodewords);\r\n\t\tthis.drawCodewords(allCodewords);\r\n\r\n\t\t// Do masking\r\n\t\tif (mask == -1)\r\n\t\t{  // Automatically choose best mask\r\n\t\t\tlet minPenalty: int = 1000000000;\r\n\t\t\tfor (let i = 0; i < 8; i++)\r\n\t\t\t{\r\n\t\t\t\tthis.applyMask(i);\r\n\t\t\t\tthis.drawFormatBits(i);\r\n\t\t\t\tconst penalty: int = this.getPenaltyScore();\r\n\t\t\t\tif (penalty < minPenalty)\r\n\t\t\t\t{\r\n\t\t\t\t\tmask = i;\r\n\t\t\t\t\tminPenalty = penalty;\r\n\t\t\t\t}\r\n\t\t\t\tthis.applyMask(i);  // Undoes the mask due to XOR\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (mask < 0 || mask > 7)\r\n\t\t\tthrow \"Assertion error\";\r\n\t\tthis.mask = mask;\r\n\t\tthis.applyMask(mask);  // Apply the final choice of mask\r\n\t\tthis.drawFormatBits(mask);  // Overwrite old format bits\r\n\r\n\t\tthis.isFunction = [];\r\n\t}\r\n\r\n\r\n\t/*-- Accessor methods --*/\r\n\r\n\t// Returns the color of the module (pixel) at the given coordinates, which is false\r\n\t// for white or true for black. The top left corner has the coordinates (x=0, y=0).\r\n\t// If the given coordinates are out of bounds, then false (white) is returned.\r\n\tpublic getModule(x: int, y: int): boolean\r\n\t{\r\n\t\treturn 0 <= x && x < this.size && 0 <= y && y < this.size && this.modules[y][x];\r\n\t}\r\n\r\n\r\n\t/*-- Public instance methods --*/\r\n\r\n\t// Draws this QR Code, with the given module scale and border modules, onto the given HTML\r\n\t// canvas element. The canvas's width and height is resized to (this.size + border * 2) * scale.\r\n\t// The drawn image is be purely black and white, and fully opaque.\r\n\t// The scale must be a positive integer and the border must be a non-negative integer.\r\n\tpublic drawCanvas(scale: int, border: int, canvas: HTMLCanvasElement): void\r\n\t{\r\n\t\tif (scale <= 0 || border < 0)\r\n\t\t\tthrow \"Value out of range\";\r\n\t\tconst width: int = (this.size + border * 2) * scale;\r\n\t\tcanvas.width = width;\r\n\t\tcanvas.height = width;\r\n\t\tlet ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\r\n\t\tfor (let y = -border; y < this.size + border; y++)\r\n\t\t{\r\n\t\t\tfor (let x = -border; x < this.size + border; x++)\r\n\t\t\t{\r\n\t\t\t\tctx.fillStyle = this.getModule(x, y) ? \"#000000\" : \"#FFFFFF\";\r\n\t\t\t\tctx.fillRect((x + border) * scale, (y + border) * scale, scale, scale);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Returns a string of SVG code for an image depicting this QR Code, with the given number\r\n\t// of border modules. The string always uses Unix newlines (\\n), regardless of the platform.\r\n\tpublic toSvgString(border: int, color: string): string\r\n\t{\r\n\t\tif (border < 0)\r\n\t\t\tthrow \"Border must be non-negative\";\r\n\t\tlet parts: Array<string> = [];\r\n\t\tfor (let y = 0; y < this.size; y++)\r\n\t\t{\r\n\t\t\tfor (let x = 0; x < this.size; x++)\r\n\t\t\t{\r\n\t\t\t\tif (this.getModule(x, y))\r\n\t\t\t\t\tparts.push(`M${x + border},${y + border}h1v1h-1z`);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 ${this.size + border * 2} ${this.size + border * 2}\" stroke=\"none\">\r\n\t<rect width=\"100%\" height=\"100%\" fill=\"#FFFFFF\"/>\r\n\t<path d=\"${parts.join(\" \")}\" fill=\"` + color + `\"/>\r\n</svg>\r\n`\r\n\t}\r\n\r\n\t// Reads this object's version field, and draws and marks all function modules.\r\n\tprivate drawFunctionPatterns(): void\r\n\t{\r\n\t\t// Draw horizontal and vertical timing patterns\r\n\t\tfor (let i = 0; i < this.size; i++)\r\n\t\t{\r\n\t\t\tthis.setFunctionModule(6, i, i % 2 == 0);\r\n\t\t\tthis.setFunctionModule(i, 6, i % 2 == 0);\r\n\t\t}\r\n\r\n\t\t// Draw 3 finder patterns (all corners except bottom right; overwrites some timing modules)\r\n\t\tthis.drawFinderPattern(3, 3);\r\n\t\tthis.drawFinderPattern(this.size - 4, 3);\r\n\t\tthis.drawFinderPattern(3, this.size - 4);\r\n\r\n\t\t// Draw numerous alignment patterns\r\n\t\tconst alignPatPos: Array<int> = this.getAlignmentPatternPositions();\r\n\t\tconst numAlign: int = alignPatPos.length;\r\n\t\tfor (let i = 0; i < numAlign; i++)\r\n\t\t{\r\n\t\t\tfor (let j = 0; j < numAlign; j++)\r\n\t\t\t{\r\n\t\t\t\t// Don't draw on the three finder corners\r\n\t\t\t\tif (!(i == 0 && j == 0 || i == 0 && j == numAlign - 1 || i == numAlign - 1 && j == 0))\r\n\t\t\t\t\tthis.drawAlignmentPattern(alignPatPos[i], alignPatPos[j]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Draw configuration data\r\n\t\tthis.drawFormatBits(0);  // Dummy mask value; overwritten later in the constructor\r\n\t\tthis.drawVersion();\r\n\t}\r\n\r\n\t// Draws two copies of the format bits (with its own error correction code)\r\n\t// based on the given mask and this object's error correction level field.\r\n\tprivate drawFormatBits(mask: int): void\r\n\t{\r\n\t\t// Calculate error correction code and pack bits\r\n\t\tconst data: int = this.errorCorrectionLevel.formatBits << 3 | mask;  // errCorrLvl is uint2, mask is uint3\r\n\t\tlet rem: int = data;\r\n\t\tfor (let i = 0; i < 10; i++)\r\n\t\t\trem = (rem << 1) ^ ((rem >>> 9) * 0x537);\r\n\t\tconst bits = (data << 10 | rem) ^ 0x5412;  // uint15\r\n\t\tif (bits >>> 15 != 0)\r\n\t\t\tthrow \"Assertion error\";\r\n\r\n\t\t// Draw first copy\r\n\t\tfor (let i = 0; i <= 5; i++)\r\n\t\t\tthis.setFunctionModule(8, i, getBit(bits, i));\r\n\t\tthis.setFunctionModule(8, 7, getBit(bits, 6));\r\n\t\tthis.setFunctionModule(8, 8, getBit(bits, 7));\r\n\t\tthis.setFunctionModule(7, 8, getBit(bits, 8));\r\n\t\tfor (let i = 9; i < 15; i++)\r\n\t\t\tthis.setFunctionModule(14 - i, 8, getBit(bits, i));\r\n\r\n\t\t// Draw second copy\r\n\t\tfor (let i = 0; i < 8; i++)\r\n\t\t\tthis.setFunctionModule(this.size - 1 - i, 8, getBit(bits, i));\r\n\t\tfor (let i = 8; i < 15; i++)\r\n\t\t\tthis.setFunctionModule(8, this.size - 15 + i, getBit(bits, i));\r\n\t\tthis.setFunctionModule(8, this.size - 8, true);  // Always black\r\n\t}\r\n\r\n\t// Draws two copies of the version bits (with its own error correction code),\r\n\t// based on this object's version field, iff 7 <= version <= 40.\r\n\tprivate drawVersion(): void\r\n\t{\r\n\t\tif (this.version < 7)\r\n\t\t\treturn;\r\n\r\n\t\t// Calculate error correction code and pack bits\r\n\t\tlet rem: int = this.version;  // version is uint6, in the range [7, 40]\r\n\t\tfor (let i = 0; i < 12; i++)\r\n\t\t\trem = (rem << 1) ^ ((rem >>> 11) * 0x1F25);\r\n\t\tconst bits: int = this.version << 12 | rem;  // uint18\r\n\t\tif (bits >>> 18 != 0)\r\n\t\t\tthrow \"Assertion error\";\r\n\r\n\t\t// Draw two copies\r\n\t\tfor (let i = 0; i < 18; i++)\r\n\t\t{\r\n\t\t\tconst color: boolean = getBit(bits, i);\r\n\t\t\tconst a: int = this.size - 11 + i % 3;\r\n\t\t\tconst b: int = Math.floor(i / 3);\r\n\t\t\tthis.setFunctionModule(a, b, color);\r\n\t\t\tthis.setFunctionModule(b, a, color);\r\n\t\t}\r\n\t}\r\n\r\n\t// Draws a 9*9 finder pattern including the border separator,\r\n\t// with the center module at (x, y). Modules can be out of bounds.\r\n\tprivate drawFinderPattern(x: int, y: int): void\r\n\t{\r\n\t\tfor (let dy = -4; dy <= 4; dy++)\r\n\t\t{\r\n\t\t\tfor (let dx = -4; dx <= 4; dx++)\r\n\t\t\t{\r\n\t\t\t\tconst dist: int = Math.max(Math.abs(dx), Math.abs(dy));  // Chebyshev/infinity norm\r\n\t\t\t\tconst xx: int = x + dx;\r\n\t\t\t\tconst yy: int = y + dy;\r\n\t\t\t\tif (0 <= xx && xx < this.size && 0 <= yy && yy < this.size)\r\n\t\t\t\t\tthis.setFunctionModule(xx, yy, dist != 2 && dist != 4);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Draws a 5*5 alignment pattern, with the center module\r\n\t// at (x, y). All modules must be in bounds.\r\n\tprivate drawAlignmentPattern(x: int, y: int): void\r\n\t{\r\n\t\tfor (let dy = -2; dy <= 2; dy++)\r\n\t\t{\r\n\t\t\tfor (let dx = -2; dx <= 2; dx++)\r\n\t\t\t\tthis.setFunctionModule(x + dx, y + dy, Math.max(Math.abs(dx), Math.abs(dy)) != 1);\r\n\t\t}\r\n\t}\r\n\r\n\t// Sets the color of a module and marks it as a function module.\r\n\t// Only used by the constructor. Coordinates must be in bounds.\r\n\tprivate setFunctionModule(x: int, y: int, isBlack: boolean): void\r\n\t{\r\n\t\tthis.modules[y][x] = isBlack;\r\n\t\tthis.isFunction[y][x] = true;\r\n\t}\r\n\r\n\t// Returns a new byte string representing the given data with the appropriate error correction\r\n\t// codewords appended to it, based on this object's version and error correction level.\r\n\tprivate addEccAndInterleave(data: Array<byte>): Array<byte>\r\n\t{\r\n\t\tconst ver: int = this.version;\r\n\t\tconst ecl: Ecc = this.errorCorrectionLevel;\r\n\t\tif (data.length != QrCodeManager.getNumDataCodewords(ver, ecl))\r\n\t\t\tthrow \"Invalid argument\";\r\n\r\n\t\t// Calculate parameter numbers\r\n\t\tconst numBlocks: int = QrCodeManager.NUM_ERROR_CORRECTION_BLOCKS[ecl.ordinal][ver];\r\n\t\tconst blockEccLen: int = QrCodeManager.ECC_CODEWORDS_PER_BLOCK[ecl.ordinal][ver];\r\n\t\tconst rawCodewords: int = Math.floor(QrCodeManager.getNumRawDataModules(ver) / 8);\r\n\t\tconst numShortBlocks: int = numBlocks - rawCodewords % numBlocks;\r\n\t\tconst shortBlockLen: int = Math.floor(rawCodewords / numBlocks);\r\n\r\n\t\t// Split data into blocks and append ECC to each block\r\n\t\tlet blocks: Array<Array<byte>> = [];\r\n\t\tconst rsDiv: Array<byte> = QrCodeManager.reedSolomonComputeDivisor(blockEccLen);\r\n\t\tfor (let i = 0, k = 0; i < numBlocks; i++)\r\n\t\t{\r\n\t\t\tlet dat: Array<byte> = data.slice(k, k + shortBlockLen - blockEccLen + (i < numShortBlocks ? 0 : 1));\r\n\t\t\tk += dat.length;\r\n\t\t\tconst ecc: Array<byte> = QrCodeManager.reedSolomonComputeRemainder(dat, rsDiv);\r\n\t\t\tif (i < numShortBlocks)\r\n\t\t\t\tdat.push(0);\r\n\t\t\tblocks.push(dat.concat(ecc));\r\n\t\t}\r\n\r\n\t\t// Interleave (not concatenate) the bytes from every block into a single sequence\r\n\t\tlet result: Array<byte> = [];\r\n\t\tfor (let i = 0; i < blocks[0].length; i++)\r\n\t\t{\r\n\t\t\tblocks.forEach((block, j) =>\r\n\t\t\t{\r\n\t\t\t\t// Skip the padding byte in short blocks\r\n\t\t\t\tif (i != shortBlockLen - blockEccLen || j >= numShortBlocks)\r\n\t\t\t\t\tresult.push(block[i]);\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (result.length != rawCodewords)\r\n\t\t\tthrow \"Assertion error\";\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// Draws the given sequence of 8-bit codewords (data and error correction) onto the entire\r\n\t// data area of this QR Code. Function modules need to be marked off before this is called.\r\n\tprivate drawCodewords(data: Array<byte>): void\r\n\t{\r\n\t\tif (data.length != Math.floor(QrCodeManager.getNumRawDataModules(this.version) / 8))\r\n\t\t\tthrow \"Invalid argument\";\r\n\t\tlet i: int = 0;  // Bit index into the data\r\n\t\t// Do the funny zigzag scan\r\n\t\tfor (let right = this.size - 1; right >= 1; right -= 2)\r\n\t\t{  // Index of right column in each column pair\r\n\t\t\tif (right == 6)\r\n\t\t\t\tright = 5;\r\n\t\t\tfor (let vert = 0; vert < this.size; vert++)\r\n\t\t\t{  // Vertical counter\r\n\t\t\t\tfor (let j = 0; j < 2; j++)\r\n\t\t\t\t{\r\n\t\t\t\t\tconst x: int = right - j;  // Actual x coordinate\r\n\t\t\t\t\tconst upward: boolean = ((right + 1) & 2) == 0;\r\n\t\t\t\t\tconst y: int = upward ? this.size - 1 - vert : vert;  // Actual y coordinate\r\n\t\t\t\t\tif (!this.isFunction[y][x] && i < data.length * 8)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.modules[y][x] = getBit(data[i >>> 3], 7 - (i & 7));\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// If this QR Code has any remainder bits (0 to 7), they were assigned as\r\n\t\t\t\t\t// 0/false/white by the constructor and are left unchanged by this method\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (i != data.length * 8)\r\n\t\t\tthrow \"Assertion error\";\r\n\t}\r\n\r\n\t// XORs the codeword modules in this QR Code with the given mask pattern.\r\n\t// The function modules must be marked and the codeword bits must be drawn\r\n\t// before masking. Due to the arithmetic of XOR, calling applyMask() with\r\n\t// the same mask value a second time will undo the mask. A final well-formed\r\n\t// QR Code needs exactly one (not zero, two, etc.) mask applied.\r\n\tprivate applyMask(mask: int): void\r\n\t{\r\n\t\tif (mask < 0 || mask > 7)\r\n\t\t\tthrow \"Mask value out of range\";\r\n\t\tfor (let y = 0; y < this.size; y++)\r\n\t\t{\r\n\t\t\tfor (let x = 0; x < this.size; x++)\r\n\t\t\t{\r\n\t\t\t\tlet invert: boolean;\r\n\t\t\t\tswitch (mask)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 0: invert = (x + y) % 2 == 0; break;\r\n\t\t\t\t\tcase 1: invert = y % 2 == 0; break;\r\n\t\t\t\t\tcase 2: invert = x % 3 == 0; break;\r\n\t\t\t\t\tcase 3: invert = (x + y) % 3 == 0; break;\r\n\t\t\t\t\tcase 4: invert = (Math.floor(x / 3) + Math.floor(y / 2)) % 2 == 0; break;\r\n\t\t\t\t\tcase 5: invert = x * y % 2 + x * y % 3 == 0; break;\r\n\t\t\t\t\tcase 6: invert = (x * y % 2 + x * y % 3) % 2 == 0; break;\r\n\t\t\t\t\tcase 7: invert = ((x + y) % 2 + x * y % 3) % 2 == 0; break;\r\n\t\t\t\t\tdefault: throw \"Assertion error\";\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.isFunction[y][x] && invert)\r\n\t\t\t\t\tthis.modules[y][x] = !this.modules[y][x];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Calculates and returns the penalty score based on state of this QR Code's current modules.\r\n\t// This is used by the automatic mask choice algorithm to find the mask pattern that yields the lowest score.\r\n\tprivate getPenaltyScore(): int\r\n\t{\r\n\t\tlet result: int = 0;\r\n\r\n\t\t// Adjacent modules in row having same color, and finder-like patterns\r\n\t\tfor (let y = 0; y < this.size; y++)\r\n\t\t{\r\n\t\t\tlet runColor = false;\r\n\t\t\tlet runX = 0;\r\n\t\t\tlet runHistory = [0, 0, 0, 0, 0, 0, 0];\r\n\t\t\tfor (let x = 0; x < this.size; x++)\r\n\t\t\t{\r\n\t\t\t\tif (this.modules[y][x] == runColor)\r\n\t\t\t\t{\r\n\t\t\t\t\trunX++;\r\n\t\t\t\t\tif (runX == 5)\r\n\t\t\t\t\t\tresult += QrCodeManager.PENALTY_N1;\r\n\t\t\t\t\telse if (runX > 5)\r\n\t\t\t\t\t\tresult++;\r\n\t\t\t\t} else\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.finderPenaltyAddHistory(runX, runHistory);\r\n\t\t\t\t\tif (!runColor)\r\n\t\t\t\t\t\tresult += this.finderPenaltyCountPatterns(runHistory) * QrCodeManager.PENALTY_N3;\r\n\t\t\t\t\trunColor = this.modules[y][x];\r\n\t\t\t\t\trunX = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresult += this.finderPenaltyTerminateAndCount(runColor, runX, runHistory) * QrCodeManager.PENALTY_N3;\r\n\t\t}\r\n\t\t// Adjacent modules in column having same color, and finder-like patterns\r\n\t\tfor (let x = 0; x < this.size; x++)\r\n\t\t{\r\n\t\t\tlet runColor = false;\r\n\t\t\tlet runY = 0;\r\n\t\t\tlet runHistory = [0, 0, 0, 0, 0, 0, 0];\r\n\t\t\tfor (let y = 0; y < this.size; y++)\r\n\t\t\t{\r\n\t\t\t\tif (this.modules[y][x] == runColor)\r\n\t\t\t\t{\r\n\t\t\t\t\trunY++;\r\n\t\t\t\t\tif (runY == 5)\r\n\t\t\t\t\t\tresult += QrCodeManager.PENALTY_N1;\r\n\t\t\t\t\telse if (runY > 5)\r\n\t\t\t\t\t\tresult++;\r\n\t\t\t\t} else\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.finderPenaltyAddHistory(runY, runHistory);\r\n\t\t\t\t\tif (!runColor)\r\n\t\t\t\t\t\tresult += this.finderPenaltyCountPatterns(runHistory) * QrCodeManager.PENALTY_N3;\r\n\t\t\t\t\trunColor = this.modules[y][x];\r\n\t\t\t\t\trunY = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresult += this.finderPenaltyTerminateAndCount(runColor, runY, runHistory) * QrCodeManager.PENALTY_N3;\r\n\t\t}\r\n\r\n\t\t// 2*2 blocks of modules having same color\r\n\t\tfor (let y = 0; y < this.size - 1; y++)\r\n\t\t{\r\n\t\t\tfor (let x = 0; x < this.size - 1; x++)\r\n\t\t\t{\r\n\t\t\t\tconst color: boolean = this.modules[y][x];\r\n\t\t\t\tif (color == this.modules[y][x + 1] &&\r\n\t\t\t\t\tcolor == this.modules[y + 1][x] &&\r\n\t\t\t\t\tcolor == this.modules[y + 1][x + 1])\r\n\t\t\t\t\tresult += QrCodeManager.PENALTY_N2;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Balance of black and white modules\r\n\t\tlet black: int = 0;\r\n\t\tfor (const row of this.modules)\r\n\t\t\tblack = row.reduce((sum, color) => sum + (color ? 1 : 0), black);\r\n\t\tconst total: int = this.size * this.size;  // Note that size is odd, so black/total != 1/2\r\n\t\t// Compute the smallest integer k >= 0 such that (45-5k)% <= black/total <= (55+5k)%\r\n\t\tconst k: int = Math.ceil(Math.abs(black * 20 - total * 10) / total) - 1;\r\n\t\tresult += k * QrCodeManager.PENALTY_N4;\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// Returns an ascending list of positions of alignment patterns for this version number.\r\n\t// Each position is in the range [0,177), and are used on both the x and y axes.\r\n\t// This could be implemented as lookup table of 40 variable-length lists of integers.\r\n\tprivate getAlignmentPatternPositions(): Array<int>\r\n\t{\r\n\t\tif (this.version == 1)\r\n\t\t\treturn [];\r\n\t\telse\r\n\t\t{\r\n\t\t\tconst numAlign: int = Math.floor(this.version / 7) + 2;\r\n\t\t\tconst step: int = (this.version == 32) ? 26 :\r\n\t\t\t\tMath.ceil((this.size - 13) / (numAlign * 2 - 2)) * 2;\r\n\t\t\tlet result: Array<int> = [6];\r\n\t\t\tfor (let pos = this.size - 7; result.length < numAlign; pos -= step)\r\n\t\t\t\tresult.splice(1, 0, pos);\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\r\n\t// Returns the number of data bits that can be stored in a QR Code of the given version number, after\r\n\t// all function modules are excluded. This includes remainder bits, so it might not be a multiple of 8.\r\n\t// The result is in the range [208, 29648]. This could be implemented as a 40-entry lookup table.\r\n\tprivate static getNumRawDataModules(ver: int): int\r\n\t{\r\n\t\tif (ver < QrCodeManager.MIN_VERSION || ver > QrCodeManager.MAX_VERSION)\r\n\t\t\tthrow \"Version number out of range\";\r\n\t\tlet result: int = (16 * ver + 128) * ver + 64;\r\n\t\tif (ver >= 2)\r\n\t\t{\r\n\t\t\tconst numAlign: int = Math.floor(ver / 7) + 2;\r\n\t\t\tresult -= (25 * numAlign - 10) * numAlign - 55;\r\n\t\t\tif (ver >= 7)\r\n\t\t\t\tresult -= 36;\r\n\t\t}\r\n\t\tif (!(208 <= result && result <= 29648))\r\n\t\t\tthrow \"Assertion error\";\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// Returns the number of 8-bit data (i.e. not error correction) codewords contained in any\r\n\t// QR Code of the given version number and error correction level, with remainder bits discarded.\r\n\t// This stateless pure function could be implemented as a (40*4)-cell lookup table.\r\n\tprivate static getNumDataCodewords(ver: int, ecl: Ecc): int\r\n\t{\r\n\t\treturn Math.floor(QrCodeManager.getNumRawDataModules(ver) / 8) -\r\n\t\t\tQrCodeManager.ECC_CODEWORDS_PER_BLOCK[ecl.ordinal][ver] *\r\n\t\t\tQrCodeManager.NUM_ERROR_CORRECTION_BLOCKS[ecl.ordinal][ver];\r\n\t}\r\n\r\n\t// Returns a Reed-Solomon ECC generator polynomial for the given degree. This could be\r\n\t// implemented as a lookup table over all possible parameter values, instead of as an algorithm.\r\n\tprivate static reedSolomonComputeDivisor(degree: int): Array<byte>\r\n\t{\r\n\t\tif (degree < 1 || degree > 255)\r\n\t\t\tthrow \"Degree out of range\";\r\n\t\t// Polynomial coefficients are stored from highest to lowest power, excluding the leading term which is always 1.\r\n\t\t// For example the polynomial x^3 + 255x^2 + 8x + 93 is stored as the uint8 array [255, 8, 93].\r\n\t\tlet result: Array<byte> = [];\r\n\t\tfor (let i = 0; i < degree - 1; i++)\r\n\t\t\tresult.push(0);\r\n\t\tresult.push(1);  // Start off with the monomial x^0\r\n\r\n\t\t// Compute the product polynomial (x - r^0) * (x - r^1) * (x - r^2) * ... * (x - r^{degree-1}),\r\n\t\t// and drop the highest monomial term which is always 1x^degree.\r\n\t\t// Note that r = 0x02, which is a generator element of this field GF(2^8/0x11D).\r\n\t\tlet root = 1;\r\n\t\tfor (let i = 0; i < degree; i++)\r\n\t\t{\r\n\t\t\t// Multiply the current product by (x - r^i)\r\n\t\t\tfor (let j = 0; j < result.length; j++)\r\n\t\t\t{\r\n\t\t\t\tresult[j] = QrCodeManager.reedSolomonMultiply(result[j], root);\r\n\t\t\t\tif (j + 1 < result.length)\r\n\t\t\t\t\tresult[j] ^= result[j + 1];\r\n\t\t\t}\r\n\t\t\troot = QrCodeManager.reedSolomonMultiply(root, 0x02);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// Returns the Reed-Solomon error correction codeword for the given data and divisor polynomials.\r\n\tprivate static reedSolomonComputeRemainder(data: Array<byte>, divisor: Array<byte>): Array<byte>\r\n\t{\r\n\t\tlet result: Array<byte> = divisor.map(_ => 0);\r\n\t\tfor (const b of data)\r\n\t\t{  // Polynomial division\r\n\t\t\tconst factor: byte = b ^ (result.shift() as byte);\r\n\t\t\tresult.push(0);\r\n\t\t\tdivisor.forEach((coef, i) =>\r\n\t\t\t\tresult[i] ^= QrCodeManager.reedSolomonMultiply(coef, factor));\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// Returns the product of the two given field elements modulo GF(2^8/0x11D). The arguments and result\r\n\t// are unsigned 8-bit integers. This could be implemented as a lookup table of 256*256 entries of uint8.\r\n\tprivate static reedSolomonMultiply(x: byte, y: byte): byte\r\n\t{\r\n\t\tif (x >>> 8 != 0 || y >>> 8 != 0)\r\n\t\t\tthrow \"Byte out of range\";\r\n\t\t// Russian peasant multiplication\r\n\t\tlet z: int = 0;\r\n\t\tfor (let i = 7; i >= 0; i--)\r\n\t\t{\r\n\t\t\tz = (z << 1) ^ ((z >>> 7) * 0x11D);\r\n\t\t\tz ^= ((y >>> i) & 1) * x;\r\n\t\t}\r\n\t\tif (z >>> 8 != 0)\r\n\t\t\tthrow \"Assertion error\";\r\n\t\treturn z as byte;\r\n\t}\r\n\r\n\t// Can only be called immediately after a white run is added, and\r\n\t// returns either 0, 1, or 2. A helper function for getPenaltyScore().\r\n\tprivate finderPenaltyCountPatterns(runHistory: Array<int>): int\r\n\t{\r\n\t\tconst n: int = runHistory[1];\r\n\t\tif (n > this.size * 3)\r\n\t\t\tthrow \"Assertion error\";\r\n\t\tconst core: boolean = n > 0 && runHistory[2] == n && runHistory[3] == n * 3 && runHistory[4] == n && runHistory[5] == n;\r\n\t\treturn (core && runHistory[0] >= n * 4 && runHistory[6] >= n ? 1 : 0)\r\n\t\t\t+ (core && runHistory[6] >= n * 4 && runHistory[0] >= n ? 1 : 0);\r\n\t}\r\n\r\n\t// Must be called at the end of a line (row or column) of modules. A helper function for getPenaltyScore().\r\n\tprivate finderPenaltyTerminateAndCount(currentRunColor: boolean, currentRunLength: int, runHistory: Array<int>): int\r\n\t{\r\n\t\tif (currentRunColor)\r\n\t\t{  // Terminate black run\r\n\t\t\tthis.finderPenaltyAddHistory(currentRunLength, runHistory);\r\n\t\t\tcurrentRunLength = 0;\r\n\t\t}\r\n\t\tcurrentRunLength += this.size;  // Add white border to final run\r\n\t\tthis.finderPenaltyAddHistory(currentRunLength, runHistory);\r\n\t\treturn this.finderPenaltyCountPatterns(runHistory);\r\n\t}\r\n\r\n\t// Pushes the given value to the front and drops the last value. A helper function for getPenaltyScore().\r\n\tprivate finderPenaltyAddHistory(currentRunLength: int, runHistory: Array<int>): void\r\n\t{\r\n\t\tif (runHistory[0] == 0)\r\n\t\t\tcurrentRunLength += this.size;  // Add white border to initial run\r\n\t\trunHistory.pop();\r\n\t\trunHistory.unshift(currentRunLength);\r\n\t}\r\n\r\n\t// The minimum version number supported in the QR Code Model 2 standard.\r\n\tpublic static readonly MIN_VERSION: int = 1;\r\n\t// The maximum version number supported in the QR Code Model 2 standard.\r\n\tpublic static readonly MAX_VERSION: int = 40;\r\n\r\n\t// For use in getPenaltyScore(), when evaluating which mask is best.\r\n\tprivate static readonly PENALTY_N1: int = 3;\r\n\tprivate static readonly PENALTY_N2: int = 3;\r\n\tprivate static readonly PENALTY_N3: int = 40;\r\n\tprivate static readonly PENALTY_N4: int = 10;\r\n\r\n\tprivate static readonly ECC_CODEWORDS_PER_BLOCK: Array<Array<int>> = [\r\n\t\t// Version: (note that index 0 is for padding, and is set to an illegal value)\r\n\t\t//0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40    Error correction level\r\n\t\t[-1, 7, 10, 15, 20, 26, 18, 20, 24, 30, 18, 20, 24, 26, 30, 22, 24, 28, 30, 28, 28, 28, 28, 30, 30, 26, 28, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30],  // Low\r\n\t\t[-1, 10, 16, 26, 18, 24, 16, 18, 22, 22, 26, 30, 22, 22, 24, 24, 28, 28, 26, 26, 26, 26, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28],  // Medium\r\n\t\t[-1, 13, 22, 18, 26, 18, 24, 18, 22, 20, 24, 28, 26, 24, 20, 30, 24, 28, 28, 26, 30, 28, 30, 30, 30, 30, 28, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30],  // Quartile\r\n\t\t[-1, 17, 28, 22, 16, 22, 28, 26, 26, 24, 28, 24, 28, 22, 24, 24, 30, 28, 28, 26, 28, 30, 24, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30],  // High\r\n\t];\r\n\r\n\tprivate static readonly NUM_ERROR_CORRECTION_BLOCKS: Array<Array<int>> = [\r\n\t\t// Version: (note that index 0 is for padding, and is set to an illegal value)\r\n\t\t//0, 1, 2, 3, 4, 5, 6, 7, 8, 9,10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40    Error correction level\r\n\t\t[-1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 4, 4, 4, 4, 4, 6, 6, 6, 6, 7, 8, 8, 9, 9, 10, 12, 12, 12, 13, 14, 15, 16, 17, 18, 19, 19, 20, 21, 22, 24, 25],  // Low\r\n\t\t[-1, 1, 1, 1, 2, 2, 4, 4, 4, 5, 5, 5, 8, 9, 9, 10, 10, 11, 13, 14, 16, 17, 17, 18, 20, 21, 23, 25, 26, 28, 29, 31, 33, 35, 37, 38, 40, 43, 45, 47, 49],  // Medium\r\n\t\t[-1, 1, 1, 2, 2, 4, 4, 6, 6, 8, 8, 8, 10, 12, 16, 12, 17, 16, 18, 21, 20, 23, 23, 25, 27, 29, 34, 34, 35, 38, 40, 43, 45, 48, 51, 53, 56, 59, 62, 65, 68],  // Quartile\r\n\t\t[-1, 1, 1, 2, 4, 4, 4, 5, 6, 8, 8, 11, 11, 16, 16, 18, 16, 19, 21, 25, 25, 25, 34, 30, 32, 35, 37, 40, 42, 45, 48, 51, 54, 57, 60, 63, 66, 70, 74, 77, 81],  // High\r\n\t];\r\n\r\n}\r\n\r\n// Appends the given number of low-order bits of the given value\r\n// to the given buffer. Requires 0 <= len <= 31 and 0 <= val < 2^len.\r\nfunction appendBits(val: int, len: int, bb: Array<bit>): void\r\n{\r\n\tif (len < 0 || len > 31 || val >>> len != 0)\r\n\t\tthrow \"Value out of range\";\r\n\tfor (let i = len - 1; i >= 0; i--)  // Append bit by bit\r\n\t\tbb.push((val >>> i) & 1);\r\n}\r\n\r\n\r\n// Returns true iff the i'th bit of x is set to 1.\r\nfunction getBit(x: int, i: int): boolean\r\n{\r\n\treturn ((x >>> i) & 1) != 0;\r\n}\r\n\r\n/*---- Data segment class ----*/\r\nexport class QrSegment\r\n{\r\n\t// Returns a segment representing the given binary data encoded in\r\n\t// byte mode. All input byte arrays are acceptable. Any text string\r\n\t// can be converted to UTF-8 bytes and encoded as a byte mode segment.\r\n\tpublic static makeBytes(data: Array<byte>): QrSegment\r\n\t{\r\n\t\tlet bb: Array<bit> = []\r\n\t\tfor (const b of data)\r\n\t\t\tappendBits(b, 8, bb);\r\n\t\treturn new QrSegment(Mode.BYTE, data.length, bb);\r\n\t}\r\n\r\n\t// Returns a segment representing the given string of decimal digits encoded in numeric mode.\r\n\tpublic static makeNumeric(digits: string): QrSegment\r\n\t{\r\n\t\tif (!this.NUMERIC_REGEX.test(digits))\r\n\t\t\tthrow \"String contains non-numeric characters\";\r\n\t\tlet bb: Array<bit> = []\r\n\t\tfor (let i = 0; i < digits.length;)\r\n\t\t{  // Consume up to 3 digits per iteration\r\n\t\t\tconst n: int = Math.min(digits.length - i, 3);\r\n\t\t\tappendBits(parseInt(digits.substr(i, n), 10), n * 3 + 1, bb);\r\n\t\t\ti += n;\r\n\t\t}\r\n\t\treturn new QrSegment(Mode.NUMERIC, digits.length, bb);\r\n\t}\r\n\r\n\t// Returns a segment representing the given text string encoded in alphanumeric mode.\r\n\t// The characters allowed are: 0 to 9, A to Z (uppercase only), space,\r\n\t// dollar, percent, asterisk, plus, hyphen, period, slash, colon.\r\n\tpublic static makeAlphanumeric(text: string): QrSegment\r\n\t{\r\n\t\tif (!this.ALPHANUMERIC_REGEX.test(text))\r\n\t\t\tthrow \"String contains unencodable characters in alphanumeric mode\";\r\n\t\tlet bb: Array<bit> = []\r\n\t\tlet i: int;\r\n\t\tfor (i = 0; i + 2 <= text.length; i += 2)\r\n\t\t{  // Process groups of 2\r\n\t\t\tlet temp: int = QrSegment.ALPHANUMERIC_CHARSET.indexOf(text.charAt(i)) * 45;\r\n\t\t\ttemp += QrSegment.ALPHANUMERIC_CHARSET.indexOf(text.charAt(i + 1));\r\n\t\t\tappendBits(temp, 11, bb);\r\n\t\t}\r\n\t\tif (i < text.length)  // 1 character remaining\r\n\t\t\tappendBits(QrSegment.ALPHANUMERIC_CHARSET.indexOf(text.charAt(i)), 6, bb);\r\n\t\treturn new QrSegment(Mode.ALPHANUMERIC, text.length, bb);\r\n\t}\r\n\r\n\t// Returns a new mutable list of zero or more segments to represent the given Unicode text string.\r\n\t// The result may use various segment modes and switch modes to optimize the length of the bit stream.\r\n\tpublic static makeSegments(text: string): Array<QrSegment>\r\n\t{\r\n\t\t// Select the most efficient segment encoding automatically\r\n\t\tif (text == \"\")\r\n\t\t\treturn [];\r\n\t\telse if (this.NUMERIC_REGEX.test(text))\r\n\t\t\treturn [QrSegment.makeNumeric(text)];\r\n\t\telse if (this.ALPHANUMERIC_REGEX.test(text))\r\n\t\t\treturn [QrSegment.makeAlphanumeric(text)];\r\n\t\telse\r\n\t\t\treturn [QrSegment.makeBytes(QrSegment.toUtf8ByteArray(text))];\r\n\t}\r\n\r\n\t// Returns a segment representing an Extended Channel Interpretation\r\n\t// (ECI) designator with the given assignment value.\r\n\tpublic static makeEci(assignVal: int): QrSegment\r\n\t{\r\n\t\tlet bb: Array<bit> = []\r\n\t\tif (assignVal < 0)\r\n\t\t\tthrow \"ECI assignment value out of range\";\r\n\t\telse if (assignVal < (1 << 7))\r\n\t\t\tappendBits(assignVal, 8, bb);\r\n\t\telse if (assignVal < (1 << 14))\r\n\t\t{\r\n\t\t\tappendBits(2, 2, bb);\r\n\t\t\tappendBits(assignVal, 14, bb);\r\n\t\t} else if (assignVal < 1000000)\r\n\t\t{\r\n\t\t\tappendBits(6, 3, bb);\r\n\t\t\tappendBits(assignVal, 21, bb);\r\n\t\t} else\r\n\t\t\tthrow \"ECI assignment value out of range\";\r\n\t\treturn new QrSegment(Mode.ECI, 0, bb);\r\n\t}\r\n\r\n\t// Creates a new QR Code segment with the given attributes and data.\r\n\t// The character count (numChars) must agree with the mode and the bit buffer length,\r\n\t// but the constraint isn't checked. The given bit buffer is cloned and stored.\r\n\tpublic constructor(\r\n\t\t// The mode indicator of this segment.\r\n\t\tpublic readonly mode: Mode,\r\n\r\n\t\t// The length of this segment's unencoded data. Measured in characters for\r\n\t\t// numeric/alphanumeric/kanji mode, bytes for byte mode, and 0 for ECI mode.\r\n\t\t// Always zero or positive. Not the same as the data's bit length.\r\n\t\tpublic readonly numChars: int,\r\n\r\n\t\t// The data bits of this segment. Accessed through getData().\r\n\t\tprivate readonly bitData: Array<bit>)\r\n\t{\r\n\r\n\t\tif (numChars < 0)\r\n\t\t\tthrow \"Invalid argument\";\r\n\t\tthis.bitData = bitData.slice();  // Make defensive copy\r\n\t}\r\n\r\n\t/*-- Methods --*/\r\n\r\n\t// Returns a new copy of the data bits of this segment.\r\n\tpublic getData(): Array<bit>\r\n\t{\r\n\t\treturn this.bitData.slice();  // Make defensive copy\r\n\t}\r\n\r\n\t// (Package-private) Calculates and returns the number of bits needed to encode the given segments at\r\n\t// the given version. The result is infinity if a segment has too many characters to fit its length field.\r\n\tpublic static getTotalBits(segs: Array<QrSegment>, version: int): number\r\n\t{\r\n\t\tlet result: number = 0;\r\n\t\tfor (const seg of segs)\r\n\t\t{\r\n\t\t\tconst ccbits: int = seg.mode.numCharCountBits(version);\r\n\t\t\tif (seg.numChars >= (1 << ccbits))\r\n\t\t\t\treturn Infinity;  // The segment's length doesn't fit the field's bit width\r\n\t\t\tresult += 4 + ccbits + seg.bitData.length;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// Returns a new array of bytes representing the given string encoded in UTF-8.\r\n\tprivate static toUtf8ByteArray(str: string): Array<byte>\r\n\t{\r\n\t\tstr = encodeURI(str);\r\n\t\tlet result: Array<byte> = [];\r\n\t\tfor (let i = 0; i < str.length; i++)\r\n\t\t{\r\n\t\t\tif (str.charAt(i) != \"%\")\r\n\t\t\t\tresult.push(str.charCodeAt(i));\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tresult.push(parseInt(str.substr(i + 1, 2), 16));\r\n\t\t\t\ti += 2;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t/*-- Constants --*/\r\n\r\n\t// Describes precisely all strings that are encodable in numeric mode. To test\r\n\t// whether a string s is encodable: let ok: boolean = NUMERIC_REGEX.test(s);\r\n\t// A string is encodable iff each character is in the range 0 to 9.\r\n\tpublic static readonly NUMERIC_REGEX: RegExp = /^[0-9]*$/;\r\n\r\n\t// Describes precisely all strings that are encodable in alphanumeric mode. To test\r\n\t// whether a string s is encodable: let ok: boolean = ALPHANUMERIC_REGEX.test(s);\r\n\t// A string is encodable iff each character is in the following set: 0 to 9, A to Z\r\n\t// (uppercase only), space, dollar, percent, asterisk, plus, hyphen, period, slash, colon.\r\n\tpublic static readonly ALPHANUMERIC_REGEX: RegExp = /^[A-Z0-9 $%*+.\\/:-]*$/;\r\n\r\n\t// The set of all legal characters in alphanumeric mode,\r\n\t// where each character value maps to the index in the string.\r\n\tprivate static readonly ALPHANUMERIC_CHARSET: string = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:\";\r\n}\r\n\r\nexport class Ecc\r\n{\r\n\tpublic static readonly LOW = new Ecc(0, 1);  // The QR Code can tolerate about  7% erroneous codewords\r\n\tpublic static readonly MEDIUM = new Ecc(1, 0);  // The QR Code can tolerate about 15% erroneous codewords\r\n\tpublic static readonly QUARTILE = new Ecc(2, 3);  // The QR Code can tolerate about 25% erroneous codewords\r\n\tpublic static readonly HIGH = new Ecc(3, 2);  // The QR Code can tolerate about 30% erroneous codewords\r\n\r\n\tprivate constructor(\r\n\t\t// In the range 0 to 3 (unsigned 2-bit integer).\r\n\t\tpublic readonly ordinal: int,\r\n\t\t// (Package-private) In the range 0 to 3 (unsigned 2-bit integer).\r\n\t\tpublic readonly formatBits: int) { }\r\n\r\n}\r\n\r\nexport class Mode\r\n{\r\n\tpublic static readonly NUMERIC = new Mode(0x1, [10, 12, 14]);\r\n\tpublic static readonly ALPHANUMERIC = new Mode(0x2, [9, 11, 13]);\r\n\tpublic static readonly BYTE = new Mode(0x4, [8, 16, 16]);\r\n\tpublic static readonly KANJI = new Mode(0x8, [8, 10, 12]);\r\n\tpublic static readonly ECI = new Mode(0x7, [0, 0, 0]);\r\n\r\n\tprivate constructor(\r\n\t\t// The mode indicator bits, which is a uint4 value (range 0 to 15).\r\n\t\tpublic readonly modeBits: int,\r\n\t\t// Number of character count bits for three different version ranges.\r\n\t\tprivate readonly numBitsCharCount: [int, int, int]) { }\r\n\r\n\t// (Package-private) Returns the bit width of the character count field for a segment in\r\n\t// this mode in a QR Code at the given version number. The result is in the range [0, 16].\r\n\tpublic numCharCountBits(ver: int): int\r\n\t{\r\n\t\treturn this.numBitsCharCount[Math.floor((ver + 7) / 17)];\r\n\t}\r\n}","import { UtilityManager } from \"../../../src/managers/utilityManager\";\r\nimport { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { ComboBoxTypeEnum, ControlTypeEnum, createButton, createComboBox, createLabel, createScheduler, DateModeEnum, DayOfWeekEnum, div, GridLabelUnderlineMode, IconClassLight, IconClass, puma, SchedulerData, SchedulerResource, SchedulerView, SchedulerViewEnum, TextAlignEnum, vrEditorCustomItem } from \"../vr\";\r\nimport { ComboBox } from \"./comboBox\";\r\nimport { Scheduler, SchedulerAppointmentClickEvent, SchedulerAvailabilityClickEvent, SchedulerTimeslotClickEvent } from \"./scheduler\";\r\n\r\n//#region Options\r\nexport class MultiSchedulerOptions extends VrControlOptions\r\n{\r\n\tresources?: SchedulerResource[];\r\n\tdatasource?: SchedulerData[];\r\n\tdates?: Date[];\r\n\tstartTime?: Date;\r\n\tendTime?: Date;\r\n\ttimeslotIntervalDuration?: number;\r\n\texportPdf?: boolean;\r\n\tshowNavigateButtons?: boolean;\r\n\tmaxDatesNumber?: number;\r\n\r\n\tonTimeslotClick?: (e: SchedulerTimeslotClickEvent) => void;\r\n\tonAvailabilityClick?: (e: SchedulerAvailabilityClickEvent) => void;\r\n\tonAppointmentClick?: (e: SchedulerAppointmentClickEvent) => void;\r\n\tonNavigate?: (e: MultiSchedulerNavigateEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class MultiScheduler extends VrControl\r\n{\r\n\t//#region Variables\r\n\tprivate _resources?: SchedulerResource[];\r\n\tprivate _datasource: any[];\r\n\tprivate _availabilities: SchedulerData[];\r\n\tprivate _dates: Date[];\r\n\tprivate _dictionaryDateScheduler: Map<Date, Scheduler>;\r\n\tprivate _cmbTimeslotIntervalDuration: ComboBox;\r\n\t//#endregion\r\n\r\n\tconstructor(element: HTMLElement, options?: MultiSchedulerOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new MultiSchedulerOptions();\r\n\r\n\t\tif (options.dates == null) options.dates = [];\r\n\t\tif (options.datasource == null) options.datasource = [];\r\n\t\tif (options.resources == null) options.resources = [];\r\n\t\tif (options.showNavigateButtons == null) options.showNavigateButtons = true;\r\n\t\tif (options.maxDatesNumber == null) options.maxDatesNumber = 6;\r\n\t\tif (options.timeslotIntervalDuration == null) options.timeslotIntervalDuration = 30;\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.MultiScheduler);\r\n\t\tthis._resources = options.resources;\r\n\t\tthis._dates = options.dates;\r\n\t\tthis._dictionaryDateScheduler = new Map();\r\n\r\n\t\tthis.element().style.cssText += \"display: flex; flex-direction: column;\";\r\n\r\n\t\tif (options.dates != null)\r\n\t\t\tthis.dates(options.dates);\r\n\r\n\t\tif (options.datasource != null)\r\n\t\t\tthis.datasource(options.datasource);\r\n\t}\r\n\r\n\t//#region Methods\r\n\tdates(dates?: Date[])\r\n\t{\r\n\t\tif (dates != null && dates.length > 0)\r\n\t\t{\r\n\t\t\tlet options = this.getOptions();\r\n\t\t\tthis._dictionaryDateScheduler.clear();\r\n\t\t\tpuma(this.element()).empty();\r\n\r\n\t\t\tdates = dates.slice(0, options.maxDatesNumber!);\r\n\r\n\t\t\t//#region Date\r\n\t\t\tlet divDates = div(this.element(), { class: \"vrMultiSchedulerDivDates\", css: \"display: flex; height: 22px;\" });\r\n\r\n\t\t\t//#region Navigation buttons\r\n\t\t\tif (options.showNavigateButtons)\r\n\t\t\t{\r\n\t\t\t\tcreateButton({\r\n\t\t\t\t\ticon: IconClassLight.ChevronLeft,\r\n\t\t\t\t\tcssContainer: \"position: absolute; left: 10px; z-index: 9999999999999;\",\r\n\t\t\t\t\tcss: \"border: none; background: none;\",\r\n\t\t\t\t\tonClick: (e) =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (options.onNavigate != null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlet navigateEvent = new MultiSchedulerNavigateEvent();\r\n\t\t\t\t\t\t\tnavigateEvent.sender = this;\r\n\t\t\t\t\t\t\tnavigateEvent.action = MultiSchedulerNavigateActionEnum.PrevDate;\r\n\t\t\t\t\t\t\tnavigateEvent.dates = this.dates();\r\n\t\t\t\t\t\t\toptions.onNavigate!(navigateEvent);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, divDates);\r\n\r\n\t\t\t\tcreateButton({\r\n\t\t\t\t\ticon: IconClassLight.ChevronRight,\r\n\t\t\t\t\tcssContainer: \"position: absolute; right: 10px; z-index: 9999999999999;\",\r\n\t\t\t\t\tcss: \"border: none; background: none;\",\r\n\t\t\t\t\tonClick: (e) =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (options.onNavigate != null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlet navigateEvent = new MultiSchedulerNavigateEvent();\r\n\t\t\t\t\t\t\tnavigateEvent.sender = this;\r\n\t\t\t\t\t\t\tnavigateEvent.action = MultiSchedulerNavigateActionEnum.NextDate;\r\n\t\t\t\t\t\t\tnavigateEvent.dates = this.dates();\r\n\t\t\t\t\t\t\toptions.onNavigate!(navigateEvent);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, divDates);\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\tlet widthPercentage = 100 / dates.length;\r\n\t\t\tfor (let i = -1; i < dates.length; i++)\r\n\t\t\t{\r\n\t\t\t\tlet lblDate = createLabel({\r\n\t\t\t\t\talign: TextAlignEnum.Center,\r\n\t\t\t\t\tclass: \"vrMultiSchedulerLblDate\",\r\n\t\t\t\t\tcss: \"width: 100%;\",\r\n\t\t\t\t\tcssContainer: ((i == -1) ? \"width: 63px; border-right: solid 1px #CCC; padding-left: 0px; padding-right: 0px;\" : \"border-right: solid 1px #CCC; width: \" + widthPercentage + \"%; padding-left: 5px; padding-right: 5px;\") + \"text-align: left; background-color: #f0f0f0; border-bottom: solid 1px #CCC; border-top: solid 1px #CCC;\"\r\n\t\t\t\t}, divDates);\r\n\r\n\t\t\t\tif (i == -1)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet divTimeslotIntervalDuration = puma(\"<div>\").vrPrependToPuma(lblDate.container())[0];\r\n\t\t\t\t\tdivTimeslotIntervalDuration.classList.add(\"vrMultiSchedulerTimeslotIntervalDuration\");\r\n\r\n\t\t\t\t\tthis._cmbTimeslotIntervalDuration = createComboBox({\r\n\t\t\t\t\t\tmode: ComboBoxTypeEnum.DropDown,\r\n\t\t\t\t\t\tvalue: options.timeslotIntervalDuration,\r\n\t\t\t\t\t\tcssContainer: \"width: 100%; top: 0px; left: 0px; height: 21px; border-right: solid 1px #CCC;\",\r\n\t\t\t\t\t\tcss: \"width: Calc(100% - 6px); border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; padding-left: 6px; padding-right: 0px; text-align: left; height: 20px; border-top-right-radius: 0px; border-top-left-radius: 0px; background-color: #f0f0f0;border-top: 0px; border-bottom: 0px; top: 0px; position: absolute; border-right: solid 1px #CCC;\",\r\n\t\t\t\t\t\tpopupSettings: { width: 50 },\r\n\t\t\t\t\t\twidth: 60,\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{ text: \"5 min\", value: \"5\" },\r\n\t\t\t\t\t\t\t{ text: \"10 min\", value: \"10\" },\r\n\t\t\t\t\t\t\t{ text: \"15 min\", value: \"15\" },\r\n\t\t\t\t\t\t\t{ text: \"25 min\", value: \"25\" },\r\n\t\t\t\t\t\t\t{ text: \"30 min\", value: \"30\" },\r\n\t\t\t\t\t\t\t{ text: \"60 min\", value: \"60\" }\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tonAfterChange: (e) => \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.timeslotInterval(e.value);\r\n\t\t\t\t\t\t\tthis.rebind();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, divTimeslotIntervalDuration);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tlet day = dates[i];\r\n\t\t\t\t\tlet dateOptions: any = {\r\n\t\t\t\t\t\tweekday: 'long',\r\n\t\t\t\t\t\tyear: 'numeric',\r\n\t\t\t\t\t\tmonth: 'long',\r\n\t\t\t\t\t\tday: '2-digit',\r\n\t\t\t\t\t\thour12: false\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet dateFormatter = new Intl.DateTimeFormat(/*navigator.language*/\"it\", dateOptions);\r\n\t\t\t\t\tlet dateString = dateFormatter.format(day);\r\n\t\t\t\t\tlblDate.value(dateString);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tdiv(divDates, { class: \"vrMultiSchedulerDivBorderOverflow\", css: \"min-width: 17px; background-color: #f0f0f0; border-bottom: solid 1px #CCC;\" });\r\n\t\t\t//#endregion\r\n\r\n\t\t\tlet divSchedulers = div(this.element(), { class: \"vrMultiSchedulerDivSchedulers\", css: \"display: flex; overflow-y: auto;\" });\r\n\t\t\tfor (let i = -1; i < dates.length; i++)\r\n\t\t\t{\r\n\t\t\t\tlet date = (i == -1) ? new Date() : dates[i];\r\n\r\n\t\t\t\t//#region Scheduler\r\n\t\t\t\tdate.setHours(0, 0, 0, 0);\r\n\t\t\t\tlet scheduler = createScheduler({\r\n\t\t\t\t\taddToControlList: false,\r\n\t\t\t\t\tresources: this._resources,\r\n\t\t\t\t\tviews: [{ type: SchedulerViewEnum.Day, selected: true }],\r\n\t\t\t\t\tdate: date,\r\n\t\t\t\t\tcssContainer: \"width: \" + ((i == -1) ? \"63px;\" : widthPercentage + \"%;\"),\r\n\t\t\t\t\tstartTime: options.startTime,\r\n\t\t\t\t\tendTime: options.endTime,\r\n\t\t\t\t\ttimeColumn: (i == -1),\r\n\t\t\t\t\ttimeslotIntervalDuration: options.timeslotIntervalDuration,\r\n\t\t\t\t\theight: \"auto\",\r\n\t\t\t\t\texportPdf: options.exportPdf,\r\n\t\t\t\t\tshowHeader: (this._resources!.length > 1),\r\n\t\t\t\t\tshowToolbar: false,\r\n\t\t\t\t\teditable: {\r\n\t\t\t\t\t\tmove: false,\r\n\t\t\t\t\t\tresize: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonTimeslotClick: options.onTimeslotClick,\r\n\t\t\t\t\tonAvailabilityClick: options.onAvailabilityClick,\r\n\t\t\t\t\tonAppointmentClick: options.onAppointmentClick\r\n\t\t\t\t}, divSchedulers);\r\n\t\t\t\tpuma(scheduler.container()).find(\".vrSchedulerDivContent\")[0].style.cssText += \"overflow-y: hidden !important;\";\r\n\t\t\t\t//#endregion\r\n\r\n\t\t\t\tif (!this._dictionaryDateScheduler.has(date))\r\n\t\t\t\t\tthis._dictionaryDateScheduler.set(date, scheduler);\r\n\t\t\t}\r\n\r\n\t\t\tthis.adaptHeight();\r\n\t\t\tthis.fixWidth();\r\n\r\n\t\t\tthis._dates = dates;\r\n\t\t}\r\n\t\treturn this._dates;\r\n\t}\r\n\r\n\tdatasource<T extends SchedulerData>(datasource?: T[]): T[]\r\n\t{\r\n\t\tif (datasource != null)\r\n\t\t{\r\n\t\t\tthis._datasource = datasource;\r\n\t\t\tthis.drawData(datasource, (scheduler, items) =>\r\n\t\t\t{\r\n\t\t\t\tscheduler.datasource(items);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this._datasource;\r\n\t}\r\n\r\n\tavailabilities<T extends SchedulerData>(availabilities?: T[]): T[]\r\n\t{\r\n\t\tif (availabilities != null)\r\n\t\t{\r\n\t\t\tthis._availabilities = availabilities;\r\n\t\t\tthis.drawData(availabilities, (scheduler, items) =>\r\n\t\t\t{\r\n\t\t\t\tscheduler.availabilities(items);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this._availabilities as T[];\r\n\t}\r\n\r\n\tprivate drawData(datasource: any[], callback: (scheduler: Scheduler, items: any[]) => void)\r\n\t{\r\n\t\t//#region Get date without hours\r\n\t\tlet newDatasource = [];\r\n\t\tfor (let data of datasource)\r\n\t\t{\r\n\t\t\tlet overlappedList: any = null;\r\n\t\t\tif (data.overlappedList != null)\r\n\t\t\t{\r\n\t\t\t\toverlappedList = data.overlappedList;\r\n\t\t\t\tdata.overlappedList = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tlet newData = UtilityManager.duplicate(data);\r\n\t\t\tlet newDataDate = new Date(newData.start);\r\n\t\t\tnewDataDate.setHours(0, 0, 0, 0);\r\n\t\t\tnewData.groupingField = newDataDate;\r\n\t\t\tnewData.overlappedList = overlappedList;\r\n\t\t\tnewDatasource.push(newData);\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t// Group by date\r\n\t\tlet datasourceGrouped = newDatasource.vrGroupBy(k => k.groupingField);\r\n\t\tfor (let keyDate in datasourceGrouped)\r\n\t\t{\r\n\t\t\tlet schedulerDataList = datasourceGrouped[keyDate];\r\n\t\t\tlet date = new Date(keyDate);\r\n\t\t\tdate.setHours(0, 0, 0, 0);\r\n\r\n\t\t\tthis._dictionaryDateScheduler.forEach((value, key) =>\r\n\t\t\t{\r\n\t\t\t\tif (Date.vrEquals(date, key))\r\n\t\t\t\t{\r\n\t\t\t\t\t// Draw data\r\n\t\t\t\t\tlet scheduler = this._dictionaryDateScheduler.get(key);\r\n\t\t\t\t\tif (scheduler != null)\r\n\t\t\t\t\t\tcallback(scheduler, schedulerDataList);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tresources(resources?: SchedulerResource[])\r\n\t{\r\n\t\tif (resources != null)\r\n\t\t{\r\n\t\t\tthis._resources = resources;\r\n\t\t\tthis.rebind();\r\n\t\t}\r\n\t\treturn this._resources;\r\n\t}\r\n\r\n\tstartTime(): Date\r\n\t{\r\n\t\treturn this.getOptions().startTime!;\r\n\t}\r\n\r\n\tendTime(): Date\r\n\t{\r\n\t\treturn this.getOptions().endTime!;\r\n\t}\r\n\r\n\ttimeslotInterval(timeslotIntervalDuration?: number): number\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (timeslotIntervalDuration != null)\r\n\t\t{\r\n\t\t\toptions.timeslotIntervalDuration = timeslotIntervalDuration;\r\n\t\t\tthis._cmbTimeslotIntervalDuration.value(timeslotIntervalDuration, false);\r\n\r\n\t\t\tthis._dictionaryDateScheduler.forEach((value, key) =>\r\n\t\t\t{\r\n\t\t\t\t// Draw data\r\n\t\t\t\tlet scheduler = this._dictionaryDateScheduler.get(key);\r\n\t\t\t\tif (scheduler != null)\r\n\t\t\t\t\tscheduler.timeslotInterval(timeslotIntervalDuration);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn options.timeslotIntervalDuration!;\r\n\t}\r\n\r\n\trebind()\r\n\t{\r\n\t\tthis.dates(this._dates);\r\n\t\tthis.datasource(this._datasource);\r\n\t\tthis.availabilities(this._availabilities);\r\n\r\n\t\tthis.adaptHeight();\r\n\t\tthis.fixWidth();\r\n\t}\r\n\r\n\tprivate adaptHeight()\r\n\t{\r\n\t\tlet divContent = puma(this.container()).find(\".vrMultiSchedulerDivSchedulers\")[0];\r\n\t\tlet options = this.getOptions();\r\n\r\n\t\tlet height: number | string = 0;\r\n\t\tif (options.height == null)\r\n\t\t{\r\n\t\t\tlet multiSchedulerOffset = puma(this.container()).offset().top;\r\n\t\t\tlet contentHeight = (window.innerHeight - multiSchedulerOffset);\r\n\r\n\t\t\tlet divDatesHeight = puma(this.container()).find(\".vrMultiSchedulerDivDates\").outerHeight();\r\n\t\t\theight = contentHeight - divDatesHeight;\r\n\t\t}\r\n\t\telse\r\n\t\t\theight = options.height;\r\n\r\n\t\tpuma(divContent).height(height);\r\n\t}\r\n\r\n\tprivate fixWidth()\r\n\t{\r\n\t\tlet divScrollable = puma(this.container()).find(\".vrMultiSchedulerDivSchedulers\")[0];\r\n\t\tif (divScrollable != null)\r\n\t\t{\r\n\t\t\tif (divScrollable.scrollHeight > divScrollable.clientHeight && divScrollable.clientHeight > 0)\r\n\t\t\t\tpuma(this.container()).find(\".vrMultiSchedulerDivBorderOverflow\").show();\r\n\t\t\telse\r\n\t\t\t\tpuma(this.container()).find(\".vrMultiSchedulerDivBorderOverflow\").hide();\r\n\t\t}\r\n\t}\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.options<MultiSchedulerOptions>();\r\n\t}\r\n\t//#endregion\r\n}\r\n\r\n//#region Classes\r\nclass MultiSchedulerNavigateEvent extends VrControlsEvent\r\n{\r\n\tsender: MultiScheduler;\r\n\taction?: MultiSchedulerNavigateActionEnum;\r\n\tdates?: Date[];\r\n}\r\n\r\nenum MultiSchedulerNavigateActionEnum\r\n{\r\n\tNextDate = 0,\r\n\tPrevDate = 1,\r\n}\r\n//#endregion","import { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { ControlTypeEnum, IconClassLight, IconClass, puma, confirm } from \"../vr\";\r\n\r\n//#region Options\r\nexport class IconOptions extends VrControlOptions\r\n{\r\n\tvalue?: string | IconClassLight;\r\n\tcolor?: string;\r\n\tfontSize?: number | string;\r\n\tcursorPointer?: boolean;\r\n\tconfirmationMessage?: string;\r\n\ttooltip?: string;\r\n\r\n\tonClick?: (e: VrIconClickEvent) => void;\r\n\tonRejectedConfirm?: () => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Icon extends VrControl\r\n{\r\n\tconstructor(element: HTMLElement, options?: IconOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new IconOptions();\r\n\r\n\t\tif (options.color == null) options.color = \"#000\";\r\n\t\tif (options.cursorPointer == null) options.cursorPointer = false;\r\n\t\tif (options.tabIndex == null) options.tabIndex = -1;\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.Icon);\r\n\r\n\t\tpuma(this.element()).attr(\"aria-hidden\", \"true\");\r\n\r\n\t\t//#region Color & Font\r\n\t\tthis.color(options.color);\r\n\r\n\t\tif (options.fontSize != null)\r\n\t\t\tthis.fontSize(options.fontSize);\r\n\t\t//#endregion\r\n\r\n\t\t//#region Value\r\n\t\tif (options.value != null)\r\n\t\t\tthis.value(options.value);\r\n\t\t//#endregion\r\n\r\n\t\t//#region Tooltip\r\n\t\tif (options.tooltip != null)\r\n\t\t\tpuma(this.element()).attr(\"title\", options.tooltip);\r\n\t\t//#endregion\r\n\r\n\t\t//#region Cursor\r\n\t\tif (options.cursorPointer || options.onClick != null)\r\n\t\t{\r\n\t\t\tthis.container().style.cssText += \"cursor: pointer;\";\r\n\t\t\tthis.element().style.cssText += \"cursor: pointer;\";\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Click\r\n\t\tpuma(this.container()).on(\"click\", (e: JQuery.ClickEvent) =>\r\n\t\t{\r\n\t\t\tthis.click();\r\n\t\t});\r\n\t\t//#endregion\r\n\t}\r\n\r\n\t//#region Methods\r\n\tvalue(value?: string | IconClassLight)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (value != null) \r\n\t\t{\r\n\t\t\tpuma(this.element()).removeClass(options.value);\r\n\t\t\tpuma(this.element()).addClass(value);\r\n\t\t\toptions.value = value;\r\n\t\t}\r\n\t\treturn options.value;\r\n\t}\r\n\r\n\tfontSize(fontSize?: number | string)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (fontSize != null)\r\n\t\t{\r\n\t\t\tif (typeof (fontSize) == \"number\")\r\n\t\t\t\tfontSize = fontSize + \"px\";\r\n\r\n\t\t\tthis.element().style.cssText += \"font-size: \" + fontSize + \";\";\r\n\t\t\toptions.fontSize = fontSize;\r\n\t\t}\r\n\t\treturn options.fontSize;\r\n\t}\r\n\r\n\tcolor(color?: string)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (color != null)\r\n\t\t{\r\n\t\t\tthis.element().style.cssText += \"color: \" + color + \";\";\r\n\t\t\toptions.color = color;\r\n\t\t}\r\n\t\treturn options.color;\r\n\t}\r\n\r\n\tclick(): void\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (options.confirmationMessage != null)\r\n\t\t\tconfirm(options.confirmationMessage).then(() => this.internalClick(), () => this.rejectedConfirm());\r\n\t\telse\r\n\t\t\tthis.internalClick();\r\n\t}\r\n\r\n\tprivate internalClick()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (options!.onClick != null)\r\n\t\t{\r\n\t\t\tlet clickEvent = new VrIconClickEvent();\r\n\t\t\tclickEvent.sender = this;\r\n\t\t\tclickEvent.value = this.value();\r\n\t\t\toptions!.onClick(clickEvent);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate rejectedConfirm()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (options.onRejectedConfirm != null)\r\n\t\t\toptions.onRejectedConfirm();\r\n\t}\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.options<IconOptions>();\r\n\t}\r\n\t//#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass VrIconClickEvent extends VrControlsEvent\r\n{\r\n\tsender: Icon;\r\n\tvalue?: string | IconClassLight;\r\n}\r\n//#endregion","import { ColorPickerManager } from \"../../../src/managers/colorPickerManager\";\r\nimport { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { ColorPickerModeEnum, ColorPickerRgbaValue, ControlTypeEnum, createIcon, div, IconClassLight, IconClass, puma } from \"../vr\";\r\n\r\ndeclare var JSColor: any;\r\n\r\n//#region Options\r\nexport class ColorPickerOptions extends VrControlOptions\r\n{\r\n\tshowInput?: boolean;\r\n\tmode?: ColorPickerModeEnum;\r\n\tpalette?: boolean | string[];\r\n\tcloseButton?: boolean | string;\r\n\talphaChannel?: boolean;\r\n\tvalue?: string | ColorPickerRgbaValue;\r\n\thexUppercase?: boolean;\r\n\tclearButton?: boolean;\r\n\thideOnPaletteClick?: boolean;\r\n\temptyMessage?: string;\r\n\r\n\tonChange?: (e: ColorPickerChangeEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class ColorPicker extends VrControl\r\n{\r\n\t//#region Variables\r\n\tprivate _picker: any;\r\n\tprivate _value: string | null;\r\n\t//#endregion\r\n\r\n\tconstructor(element: HTMLElement, options?: ColorPickerOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new ColorPickerOptions();\r\n\r\n\t\tif (options.addToControlList == null) options.addToControlList = false;\r\n\t\tif (options.showInput == null) options.showInput = true;\r\n\t\tif (options.mode == null) options.mode = ColorPickerModeEnum.Hex;\r\n\t\tif (options.alphaChannel == null) options.alphaChannel = true;\r\n\t\tif (options.hexUppercase == null) options.hexUppercase = true;\r\n\t\tif (options.clearButton == null) options.clearButton = true;\r\n\t\tif (options.hideOnPaletteClick == null) options.hideOnPaletteClick = false;\r\n\t\tif (options.emptyMessage == null) options.emptyMessage = \"Scegli...\";\r\n\r\n\t\tif (options.closeButton == null) options.closeButton = false;\r\n\t\tif (options.closeButton === true) options.closeButton = \"Chiudi\";\r\n\r\n\t\tif (options.palette == null) options.palette = true;\r\n\t\tif (options.palette === true)\r\n\t\t\toptions.palette = [\"#fff\", \"#ffffff\", \"#808080\", \"#000\", \"#996e36\", \"#ff0000\", \"#ffe438\", \"#88dd20\", \"#51B3E1\", \"#e3f1fa\", \"#bb1cd4\"];\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.ColorPicker);\r\n\t\ttry { new ColorPickerManager(); } catch (e) { } // To include js\r\n\r\n\t\tthis._picker = new JSColor(element, { format: options.mode });\r\n\t\tthis._value = null;\r\n\r\n\t\t//#region JsColor options\r\n\t\tthis._picker.option({\r\n\t\t\tshadow: false,\r\n\t\t\tpalette: (options.palette !== false) ? options.palette : undefined,\r\n\t\t\tpaletteCols: (options.palette !== false) ? options.palette.length : undefined,\r\n\t\t\tpaletteSetsAlpha: true,\r\n\t\t\thideOnPaletteClick: options.hideOnPaletteClick,\r\n\t\t\tcloseButton: (options.closeButton !== false),\r\n\t\t\tcloseText: (options.closeButton !== false) ? options.closeButton : undefined,\r\n\t\t\talphaChannel: options.alphaChannel,\r\n\t\t\trequired: true,\r\n\t\t\tuppercase: options.hexUppercase,\r\n\t\t\tonChange: () => \r\n\t\t\t{\r\n\t\t\t\tthis._value = (this.mode() == ColorPickerModeEnum.Hex) ? this.valueHex() : this.valueRgba();\r\n\t\t\t\tthis.triggerChange();\r\n\t\t\t}\r\n\t\t});\r\n\t\t//#endregion\r\n\r\n\t\t//#region Width & Height\r\n\t\tthis.element().style.cssText += \"height: \" + ((options.showInput) ? 23 : 27) + \"px;\";\r\n\t\t//#endregion\r\n\r\n\t\t//#region Input\r\n\t\tif (options.showInput)\r\n\t\t{\r\n\t\t\tlet minWidth = (options.mode == ColorPickerModeEnum.Hex) ? 60 : 120;\r\n\t\t\tthis.element().style.cssText += \"width: \" + minWidth + \"px; min-width: \" + minWidth + \"px !important;\";\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.element().style.cssText += \"width: 27px; min-width: unset !important; background-image: unset !important; position: relative;\";\r\n\t\t//#endregion\r\n\r\n\t\t//#region Value\r\n\t\tthis.clear();\r\n\r\n\t\tif (options.value != null)\r\n\t\t\tthis.value(options.value);\r\n\t\t//#endregion\r\n\r\n\t\t//#region Open elements\r\n\t\tif (!options.showInput)\r\n\t\t{\r\n\t\t\tlet divOpen = div(this.element(), { class: \"vrColorPickerDivOpen\", css: \"position: absolute; cursor: pointer; text-align: center; bottom: 0px; left: 0px; height: 5px; background-color: rgba(0, 0, 0, 0.2); width: 24px; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border: solid 1px #CCC; border-top: none;\" })\r\n\t\t\tcreateIcon({\r\n\t\t\t\tvalue: IconClassLight.CaretUp,\r\n\t\t\t\tcolor: \"rgba(255, 255, 255, 0.8)\",\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\tfontSize: 12,\r\n\t\t\t\tcursorPointer: true,\r\n\t\t\t\tcssContainer: \"top: -4px;\"\r\n\t\t\t}, divOpen);\r\n\r\n\t\t\tpuma(divOpen).on(\"click\", (e: JQuery.ClickEvent) => this.open());\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Clear icon\r\n\t\tif (options.clearButton)\r\n\t\t{\r\n\t\t\tlet clearIcon = createIcon({\r\n\t\t\t\tid: element.id + \"_someStuff\",\r\n\t\t\t\tcssContainer: \"background-color: #FFF; width: 20px; height: 20px; cursor: pointer; position: absolute; left: 13px; z-index: 9999999; top: \" + ((options.showInput) ? \"155\" : \"152\") + \"px;\",\r\n\t\t\t\tvalue: IconClassLight.Eraser,\r\n\t\t\t\tclassContainer: \"vrColorPickerClearIcon\",\r\n\t\t\t\tvisible: false,\r\n\t\t\t\tonClick: (e) => this.clear(true)\r\n\t\t\t}, document.body, null, this.element().id + \"_vrColorPickerClearIcon\");\r\n\r\n\t\t\tpuma(\"body\").on(\"DOMNodeRemoved\", \".jscolor-picker-wrap\", (e: any) =>\r\n\t\t\t{\r\n\t\t\t\te.target.style.cssText += \"z-index: 999999 !important;\";\r\n\t\t\t\tclearIcon.element().style.cssText += \"color: transparent;\";\r\n\t\t\t\tclearIcon.container().style.cssText += \"background-color: transparent;\";\r\n\r\n\t\t\t\twindow.setTimeout(() => \r\n\t\t\t\t{\r\n\t\t\t\t\tclearIcon.hide();\r\n\t\t\t\t\te.target.style.cssText += \"z-index: 999999 !important;\";\r\n\t\t\t\t}, 300);\r\n\t\t\t});\r\n\r\n\t\t\tpuma(\"body\").on(\"DOMNodeInserted\", \".jscolor-picker-wrap\", (e: any) =>\r\n\t\t\t{\r\n\t\t\t\tlet top = puma(puma(\".jscolor-picker-wrap\")[0]).position().top + 125;\r\n\t\t\t\tlet left = puma(puma(\".jscolor-picker-wrap\")[0]).position().left + 13;\r\n\t\t\t\tclearIcon.container().style.cssText += \"top: \" + top + \"px; left: \" + left + \"px;\";\r\n\r\n\t\t\t\te.target.style.cssText += \"z-index: 999999 !important;\";\r\n\t\t\t\tclearIcon.element().style.cssText += \"color: #000;\";\r\n\t\t\t\tclearIcon.container().style.cssText += \"background-color: #FFF;\";\r\n\t\t\t\tclearIcon.show();\r\n\r\n\t\t\t\twindow.setTimeout(() => \r\n\t\t\t\t{\r\n\t\t\t\t\tclearIcon.show();\r\n\t\t\t\t\te.target.style.cssText += \"z-index: 999999 !important;\";\r\n\r\n\t\t\t\t\tlet top = puma(puma(\".jscolor-picker-wrap\")[0]).position().top + 125;\r\n\t\t\t\t\tlet left = puma(puma(\".jscolor-picker-wrap\")[0]).position().left + 13;\r\n\t\t\t\t\tclearIcon.container().style.cssText += \"top: \" + top + \"px; left: \" + left + \"px;\";\r\n\t\t\t\t}, 300);\r\n\t\t\t});\r\n\t\t}\r\n\t\t//#endregion\r\n\t}\r\n\r\n\t//#region Methods\r\n\tvalue(value?: string | ColorPickerRgbaValue, triggerChange = true)\r\n\t{\r\n\t\tif (value != null)\r\n\t\t{\r\n\t\t\tif (typeof (value) == \"string\")\r\n\t\t\t\tthis.valueHex(value, triggerChange);\r\n\t\t\telse\r\n\t\t\t\tthis.valueRgba(value, triggerChange);\r\n\t\t}\r\n\t\treturn this._value;\r\n\t}\r\n\r\n\tvalueHex(value?: string, triggerChange = true)\r\n\t{\r\n\t\tif (value != null)\r\n\t\t{\r\n\t\t\tthis._picker.fromString(value);\r\n\t\t\tthis._value = this._picker.toHEXString();\r\n\r\n\t\t\tif (triggerChange)\r\n\t\t\t\tthis.triggerChange();\r\n\t\t}\r\n\t\treturn this._picker.toHEXString();\r\n\t}\r\n\r\n\tvalueRgba(value?: ColorPickerRgbaValue, triggerChange = true)\r\n\t{\r\n\t\tif (value != null)\r\n\t\t{\r\n\t\t\tthis._picker.fromRGBA(value.r, value.g, value.b, (value.a != null) ? value.a : 1);\r\n\t\t\tthis._value = this._picker.toRGBAString();\r\n\r\n\t\t\tif (triggerChange)\r\n\t\t\t\tthis.triggerChange();\r\n\t\t}\r\n\t\treturn this._picker.toRGBAString();\r\n\t}\r\n\r\n\trandomize(triggerChange = true)\r\n\t{\r\n\t\tthis._picker.randomize();\r\n\t\tthis._value = this.valueHex();\r\n\r\n\t\tif (triggerChange)\r\n\t\t\tthis.triggerChange();\r\n\r\n\t\treturn this.value();\r\n\t}\r\n\r\n\topen()\r\n\t{\r\n\t\tthis._picker.show();\r\n\t}\r\n\r\n\tclose()\r\n\t{\r\n\t\tthis._picker.hide();\r\n\t}\r\n\r\n\tmode()\r\n\t{\r\n\t\treturn this.getOptions().mode!;\r\n\t}\r\n\r\n\ttriggerChange()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\r\n\t\t//#region Change event\r\n\t\tif (options!.onChange != null)\r\n\t\t{\r\n\t\t\tlet event = new ColorPickerChangeEvent();\r\n\t\t\tevent.sender = this;\r\n\t\t\tevent.value = this.value();\r\n\t\t\tevent.valueHex = this.valueHex();\r\n\t\t\tevent.valueRgba = this.valueRgba();\r\n\t\t\toptions!.onChange(event);\r\n\t\t}\r\n\t\t//#endregion\r\n\t}\r\n\r\n\tclear(triggerChange = false)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tthis._value = null;\r\n\r\n\t\tthis.element().style.cssText += \"background-image: unset;\";\r\n\t\tthis.element().style.cssText += \"background: url('data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/wAALCAAoACgBAREA/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEG/8QAKRAAAgECBQMDBQEAAAAAAAAAAREAIWESMUFRUjJCcYGhwQJigqLC0f/aAAgBAQAAPwDbVZJIJOZGX1DYXgaKhHST2+Yokim1q9/Ebur6l3eJasFgEBA6AbG8LRIiuHjeT3eQ53i+KmWL4jfRZ/ZCqkya4eV4CQTTo83e0bvLuXxLV6Nei/2QaL8X8xRFtOqzdrRdt0xcrR6pa8LRbDfD/Ue7/eL4kqYuNpassAECoGQG4vINFUnpfd5iizKeer28Ru6LqXb4lqwAA1QaEbm8/9k=') no-repeat !important;\";\r\n\r\n\t\tif (options.showInput)\r\n\t\t{\r\n\t\t\t(this.element() as HTMLInputElement).value = \"\";\r\n\t\t\t(this.element() as HTMLInputElement).placeholder = options.emptyMessage!;\r\n\t\t\tthis.element().style.cssText += \"background-size: 30px 30px !important;\";\r\n\t\t}\r\n\t\t// else\r\n\t\t// \tthis.element().style.cssText += \"background-size: 40px 40px !important;\";\r\n\r\n\t\tif (triggerChange)\r\n\t\t\tthis.triggerChange();\r\n\t}\r\n\r\n\t//#region Overrides\r\n\tenable(): void\r\n\t{\r\n\t\tsuper.enable();\r\n\t\twindow.setTimeout(() =>\r\n\t\t{\r\n\t\t\tlet options = this.getOptions();\r\n\t\t\tif (!options.showInput)\r\n\t\t\t{\r\n\t\t\t\tthis._picker.option(\"showOnClick\", true);\r\n\t\t\t\tpuma(this.container()).find(\".vrColorPickerDivOpen\").show();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tpuma(this.element()).removeAttr(\"disabled\");\r\n\t\t});\r\n\t}\r\n\r\n\tdisable(): void\r\n\t{\r\n\t\tsuper.disable();\r\n\t\twindow.setTimeout(() => \r\n\t\t{\r\n\t\t\tlet options = this.getOptions();\r\n\t\t\tif (!options.showInput)\r\n\t\t\t{\r\n\t\t\t\tthis._picker.option(\"showOnClick\", false);\r\n\t\t\t\tpuma(this.container()).find(\".vrColorPickerDivOpen\").hide();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tpuma(this.element()).attr(\"disabled\", \"disabled\");\r\n\t\t});\r\n\t}\r\n\t//#endregion\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.options<ColorPickerOptions>();\r\n\t}\r\n\t//#endregion\r\n}\r\n\r\n//#region Classes\r\nclass ColorPickerEvent extends VrControlsEvent\r\n{\r\n\tsender: ColorPicker;\r\n}\r\n\r\nclass ColorPickerChangeEvent extends ColorPickerEvent\r\n{\r\n\tvalue: string | null;\r\n\tvalueHex: string;\r\n\tvalueRgba: string;\r\n}\r\n//#endregion","/**\r\n * jscolor - JavaScript Color Picker\r\n *\r\n * @link    http://jscolor.com\r\n * @license For open source use: GPLv3\r\n *          For commercial use: JSColor Commercial License\r\n * @author  Jan Odvarko - East Desire\r\n *\r\n * See usage examples at http://jscolor.com/examples/\r\n */\r\n\r\nexport class ColorPickerManager\r\n{\r\n\tconstructor(){}\r\n}\r\n\r\n(function (global, factory)\r\n{\r\n\r\n\t'use strict';\r\n\r\n\tif (typeof module === 'object' && typeof module.exports === 'object')\r\n\t{\r\n\t\t// Export jscolor as a module\r\n\t\tmodule.exports = global!.document ?\r\n\t\t\tfactory(global) :\r\n\t\t\tfunction (win: any)\r\n\t\t\t{\r\n\t\t\t\tif (!win.document)\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow new Error('jscolor needs a window with document');\r\n\t\t\t\t}\r\n\t\t\t\treturn factory(win);\r\n\t\t\t}\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Default use (no module export)\r\n\tfactory(global);\r\n\r\n})(typeof window !== 'undefined' ? window : this, function (window: any)\r\n{ // BEGIN factory\r\n\r\n\t// BEGIN jscolor code\r\n\r\n\r\n\t'use strict';\r\n\r\n\r\n\tvar jscolor = (function ()\r\n\t{ // BEGIN jscolor\r\n\r\n\t\tvar jsc: any = {\r\n\r\n\r\n\t\t\tinitialized: false,\r\n\r\n\t\t\tinstances: [], // created instances of jscolor\r\n\r\n\t\t\treadyQueue: [], // functions waiting to be called after init\r\n\r\n\r\n\t\t\tregister: function ()\r\n\t\t\t{\r\n\t\t\t\tif (typeof window !== 'undefined' && window.document)\r\n\t\t\t\t{\r\n\t\t\t\t\twindow.document.addEventListener('DOMContentLoaded', jsc.pub.init, false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\tinstallBySelector: function (selector: any, rootNode: any)\r\n\t\t\t{\r\n\t\t\t\trootNode = rootNode ? jsc.node(rootNode) : window.document;\r\n\t\t\t\tif (!rootNode)\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow new Error('Missing root node');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar elms = rootNode.querySelectorAll(selector);\r\n\r\n\t\t\t\t// for backward compatibility with DEPRECATED installation/configuration using className\r\n\t\t\t\tvar matchClass = new RegExp('(^|\\\\s)(' + jsc.pub.lookupClass + ')(\\\\s*(\\\\{[^}]*\\\\})|\\\\s|$)', 'i');\r\n\r\n\t\t\t\tfor (var i = 0; i < elms.length; i += 1)\r\n\t\t\t\t{\r\n\r\n\t\t\t\t\tif (elms[i].jscolor && elms[i].jscolor instanceof jsc.pub)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcontinue; // jscolor already installed on this element\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (elms[i].type !== undefined && elms[i].type.toLowerCase() == 'color' && jsc.isColorAttrSupported)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcontinue; // skips inputs of type 'color' if supported by the browser\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar dataOpts, m;\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t(dataOpts = jsc.getDataAttr(elms[i], 'jscolor')) !== null ||\r\n\t\t\t\t\t\t(elms[i].className && (m = elms[i].className.match(matchClass))) // installation using className (DEPRECATED)\r\n\t\t\t\t\t)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar targetElm = elms[i];\r\n\r\n\t\t\t\t\t\tvar optsStr = '';\r\n\t\t\t\t\t\tif (dataOpts !== null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\toptsStr = dataOpts;\r\n\r\n\t\t\t\t\t\t} else if (m)\r\n\t\t\t\t\t\t{ // installation using className (DEPRECATED)\r\n\t\t\t\t\t\t\tconsole.warn('Installation using class name is DEPRECATED. Use data-jscolor=\"\" attribute instead.' + jsc.docsRef);\r\n\t\t\t\t\t\t\tif (m[4])\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\toptsStr = m[4];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar opts = null;\r\n\t\t\t\t\t\tif (optsStr.trim())\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttry\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\topts = jsc.parseOptionsStr(optsStr);\r\n\t\t\t\t\t\t\t} catch (e)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tconsole.warn(e + '\\n' + optsStr);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttry\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnew jsc.pub(targetElm, opts);\r\n\t\t\t\t\t\t} catch (e)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\tparseOptionsStr: function (str: any)\r\n\t\t\t{\r\n\t\t\t\tvar opts = null;\r\n\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\topts = JSON.parse(str);\r\n\r\n\t\t\t\t} catch (eParse)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!jsc.pub.looseJSON)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthrow new Error('Could not parse jscolor options as JSON: ' + eParse);\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// loose JSON syntax is enabled -> try to evaluate the options string as JavaScript object\r\n\t\t\t\t\t\ttry\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\topts = (new Function('var opts = (' + str + '); return typeof opts === \"object\" ? opts : {};'))();\r\n\t\t\t\t\t\t} catch (eEval)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthrow new Error('Could not evaluate jscolor options: ' + eEval);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn opts;\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgetInstances: function ()\r\n\t\t\t{\r\n\t\t\t\tvar inst: any = [];\r\n\t\t\t\tfor (var i = 0; i < jsc.instances.length; i += 1)\r\n\t\t\t\t{\r\n\t\t\t\t\t// if the targetElement still exists, the instance is considered \"alive\"\r\n\t\t\t\t\tif (jsc.instances[i] && jsc.instances[i].targetElement)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tinst.push(jsc.instances[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn inst;\r\n\t\t\t},\r\n\r\n\r\n\t\t\tcreateEl: function (tagName: any)\r\n\t\t\t{\r\n\t\t\t\tvar el = window.document.createElement(tagName);\r\n\t\t\t\tjsc.setData(el, 'gui', true);\r\n\t\t\t\treturn el;\r\n\t\t\t},\r\n\r\n\r\n\t\t\tnode: function (nodeOrSelector: any)\r\n\t\t\t{\r\n\t\t\t\tif (!nodeOrSelector)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (typeof nodeOrSelector === 'string')\r\n\t\t\t\t{\r\n\t\t\t\t\t// query selector\r\n\t\t\t\t\tvar sel = nodeOrSelector;\r\n\t\t\t\t\tvar el = null;\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tel = window.document.querySelector(sel);\r\n\t\t\t\t\t} catch (e)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!el)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconsole.warn('No element matches the selector: %s', sel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (jsc.isNode(nodeOrSelector))\r\n\t\t\t\t{\r\n\t\t\t\t\t// DOM node\r\n\t\t\t\t\treturn nodeOrSelector;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.warn('Invalid node of type %s: %s', typeof nodeOrSelector, nodeOrSelector);\r\n\t\t\t\treturn null;\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// See https://stackoverflow.com/questions/384286/\r\n\t\t\tisNode: function (val: any)\r\n\t\t\t{\r\n\t\t\t\tif (typeof Node === 'object')\r\n\t\t\t\t{\r\n\t\t\t\t\treturn val instanceof Node;\r\n\t\t\t\t}\r\n\t\t\t\treturn val && typeof val === 'object' && typeof val.nodeType === 'number' && typeof val.nodeName === 'string';\r\n\t\t\t},\r\n\r\n\r\n\t\t\tnodeName: function (node: any)\r\n\t\t\t{\r\n\t\t\t\tif (node && node.nodeName)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn node.nodeName.toLowerCase();\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\r\n\r\n\t\t\tremoveChildren: function (node: any)\r\n\t\t\t{\r\n\t\t\t\twhile (node.firstChild)\r\n\t\t\t\t{\r\n\t\t\t\t\tnode.removeChild(node.firstChild);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\tisTextInput: function (el: any)\r\n\t\t\t{\r\n\t\t\t\treturn el && jsc.nodeName(el) === 'input' && el.type.toLowerCase() === 'text';\r\n\t\t\t},\r\n\r\n\r\n\t\t\tisButton: function (el: any)\r\n\t\t\t{\r\n\t\t\t\tif (!el)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar n = jsc.nodeName(el);\r\n\t\t\t\treturn (\r\n\t\t\t\t\t(n === 'button') ||\r\n\t\t\t\t\t(n === 'input' && ['button', 'submit', 'reset'].indexOf(el.type.toLowerCase()) > -1)\r\n\t\t\t\t);\r\n\t\t\t},\r\n\r\n\r\n\t\t\tisButtonEmpty: function (el: any)\r\n\t\t\t{\r\n\t\t\t\tswitch (jsc.nodeName(el))\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 'input': return (!el.value || el.value.trim() === '');\r\n\t\t\t\t\tcase 'button': return (el.textContent.trim() === '');\r\n\t\t\t\t}\r\n\t\t\t\treturn null; // could not determine element's text\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// See https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\r\n\t\t\tisPassiveEventSupported: (function ()\r\n\t\t\t{\r\n\t\t\t\tvar supported = false;\r\n\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\tvar opts = Object.defineProperty({}, 'passive', {\r\n\t\t\t\t\t\tget: function () { supported = true; }\r\n\t\t\t\t\t});\r\n\t\t\t\t\twindow.addEventListener('testPassive', null, opts);\r\n\t\t\t\t\twindow.removeEventListener('testPassive', null, opts);\r\n\t\t\t\t} catch (e) { }\r\n\r\n\t\t\t\treturn supported;\r\n\t\t\t})(),\r\n\r\n\r\n\t\t\tisColorAttrSupported: (function ()\r\n\t\t\t{\r\n\t\t\t\tvar elm = window.document.createElement('input');\r\n\t\t\t\tif (elm.setAttribute)\r\n\t\t\t\t{\r\n\t\t\t\t\telm.setAttribute('type', 'color');\r\n\t\t\t\t\tif (elm.type.toLowerCase() == 'color')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t})(),\r\n\r\n\r\n\t\t\tdataProp: '_data_jscolor',\r\n\r\n\r\n\t\t\t// usage:\r\n\t\t\t//   setData(obj, prop, value)\r\n\t\t\t//   setData(obj, {prop:value, ...})\r\n\t\t\t//\r\n\t\t\tsetData: function ()\r\n\t\t\t{\r\n\t\t\t\tvar obj = arguments[0];\r\n\r\n\t\t\t\tif (arguments.length === 3)\r\n\t\t\t\t{\r\n\t\t\t\t\t// setting a single property\r\n\t\t\t\t\tvar data = obj.hasOwnProperty(jsc.dataProp) ? obj[jsc.dataProp] : (obj[jsc.dataProp] = {});\r\n\t\t\t\t\tvar prop = arguments[1];\r\n\t\t\t\t\tvar value = arguments[2];\r\n\r\n\t\t\t\t\tdata[prop] = value;\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t} else if (arguments.length === 2 && typeof arguments[1] === 'object')\r\n\t\t\t\t{\r\n\t\t\t\t\t// setting multiple properties\r\n\t\t\t\t\tvar data = obj.hasOwnProperty(jsc.dataProp) ? obj[jsc.dataProp] : (obj[jsc.dataProp] = {});\r\n\t\t\t\t\tvar map: any = arguments[1];\r\n\r\n\t\t\t\t\tfor (var prop1 in map)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (map.hasOwnProperty(prop1))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdata[prop1] = map[prop1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthrow new Error('Invalid arguments');\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// usage:\r\n\t\t\t//   removeData(obj, prop, [prop...])\r\n\t\t\t//\r\n\t\t\tremoveData: function ()\r\n\t\t\t{\r\n\t\t\t\tvar obj = arguments[0];\r\n\t\t\t\tif (!obj.hasOwnProperty(jsc.dataProp))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn true; // data object does not exist\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 1; i < arguments.length; i += 1)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar prop = arguments[i];\r\n\t\t\t\t\tdelete obj[jsc.dataProp][prop];\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgetData: function (obj: any, prop: any, setDefault: any)\r\n\t\t\t{\r\n\t\t\t\tif (!obj.hasOwnProperty(jsc.dataProp))\r\n\t\t\t\t{\r\n\t\t\t\t\t// data object does not exist\r\n\t\t\t\t\tif (setDefault !== undefined)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tobj[jsc.dataProp] = {}; // create data object\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn undefined; // no value to return\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar data = obj[jsc.dataProp];\r\n\r\n\t\t\t\tif (!data.hasOwnProperty(prop) && setDefault !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tdata[prop] = setDefault;\r\n\t\t\t\t}\r\n\t\t\t\treturn data[prop];\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgetDataAttr: function (el: any, name: any)\r\n\t\t\t{\r\n\t\t\t\tvar attrName = 'data-' + name;\r\n\t\t\t\tvar attrValue = el.getAttribute(attrName);\r\n\t\t\t\treturn attrValue;\r\n\t\t\t},\r\n\r\n\r\n\t\t\tsetDataAttr: function (el: any, name: any, value: any)\r\n\t\t\t{\r\n\t\t\t\tvar attrName = 'data-' + name;\r\n\t\t\t\tel.setAttribute(attrName, value);\r\n\t\t\t},\r\n\r\n\r\n\t\t\t_attachedGroupEvents: {},\r\n\r\n\r\n\t\t\tattachGroupEvent: function (groupName: any, el: any, evnt: any, func: any)\r\n\t\t\t{\r\n\t\t\t\tif (!jsc._attachedGroupEvents.hasOwnProperty(groupName))\r\n\t\t\t\t{\r\n\t\t\t\t\tjsc._attachedGroupEvents[groupName] = [];\r\n\t\t\t\t}\r\n\t\t\t\tjsc._attachedGroupEvents[groupName].push([el, evnt, func]);\r\n\t\t\t\tel.addEventListener(evnt, func, false);\r\n\t\t\t},\r\n\r\n\r\n\t\t\tdetachGroupEvents: function (groupName: any)\r\n\t\t\t{\r\n\t\t\t\tif (jsc._attachedGroupEvents.hasOwnProperty(groupName))\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (var i = 0; i < jsc._attachedGroupEvents[groupName].length; i += 1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar evt = jsc._attachedGroupEvents[groupName][i];\r\n\t\t\t\t\t\tevt[0].removeEventListener(evt[1], evt[2], false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete jsc._attachedGroupEvents[groupName];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\tpreventDefault: function (e: any)\r\n\t\t\t{\r\n\t\t\t\tif (e.preventDefault) { e.preventDefault(); }\r\n\t\t\t\te.returnValue = false;\r\n\t\t\t},\r\n\r\n\r\n\t\t\tcaptureTarget: function (target: any)\r\n\t\t\t{\r\n\t\t\t\t// IE\r\n\t\t\t\tif (target.setCapture)\r\n\t\t\t\t{\r\n\t\t\t\t\tjsc._capturedTarget = target;\r\n\t\t\t\t\tjsc._capturedTarget.setCapture();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\treleaseTarget: function ()\r\n\t\t\t{\r\n\t\t\t\t// IE\r\n\t\t\t\tif (jsc._capturedTarget)\r\n\t\t\t\t{\r\n\t\t\t\t\tjsc._capturedTarget.releaseCapture();\r\n\t\t\t\t\tjsc._capturedTarget = null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\ttriggerEvent: function (el: any, eventName: any, bubbles: any, cancelable: any)\r\n\t\t\t{\r\n\t\t\t\tif (!el)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar ev = null;\r\n\r\n\t\t\t\tif (typeof Event === 'function')\r\n\t\t\t\t{\r\n\t\t\t\t\tev = new Event(eventName, {\r\n\t\t\t\t\t\tbubbles: bubbles,\r\n\t\t\t\t\t\tcancelable: cancelable\r\n\t\t\t\t\t});\r\n\t\t\t\t} else\r\n\t\t\t\t{\r\n\t\t\t\t\t// IE\r\n\t\t\t\t\tev = window.document.createEvent('Event');\r\n\t\t\t\t\tev.initEvent(eventName, bubbles, cancelable);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!ev)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// so that we know that the event was triggered internally\r\n\t\t\t\tjsc.setData(ev, 'internal', true);\r\n\r\n\t\t\t\tel.dispatchEvent(ev);\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\r\n\r\n\t\t\ttriggerInputEvent: function (el: any, eventName: any, bubbles: any, cancelable: any)\r\n\t\t\t{\r\n\t\t\t\tif (!el)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (jsc.isTextInput(el))\r\n\t\t\t\t{\r\n\t\t\t\t\tjsc.triggerEvent(el, eventName, bubbles, cancelable);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\teventKey: function (ev: any)\r\n\t\t\t{\r\n\t\t\t\tvar keys: any = {\r\n\t\t\t\t\t9: 'Tab',\r\n\t\t\t\t\t13: 'Enter',\r\n\t\t\t\t\t27: 'Escape',\r\n\t\t\t\t};\r\n\t\t\t\tif (typeof ev.code === 'string')\r\n\t\t\t\t{\r\n\t\t\t\t\treturn ev.code;\r\n\t\t\t\t} else if (ev.keyCode !== undefined && keys.hasOwnProperty(ev.keyCode))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn keys[ev.keyCode];\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t},\r\n\r\n\r\n\t\t\tstrList: function (str: any)\r\n\t\t\t{\r\n\t\t\t\tif (!str)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\treturn str.replace(/^\\s+|\\s+$/g, '').split(/\\s+/);\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// The className parameter (str) can only contain a single class name\r\n\t\t\thasClass: function (elm: any, className: any)\r\n\t\t\t{\r\n\t\t\t\tif (!className)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (elm.classList !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn elm.classList.contains(className);\r\n\t\t\t\t}\r\n\t\t\t\t// polyfill\r\n\t\t\t\treturn -1 != (' ' + elm.className.replace(/\\s+/g, ' ') + ' ').indexOf(' ' + className + ' ');\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// The className parameter (str) can contain multiple class names separated by whitespace\r\n\t\t\taddClass: function (elm: any, className: any)\r\n\t\t\t{\r\n\t\t\t\tvar classNames = jsc.strList(className);\r\n\r\n\t\t\t\tif (elm.classList !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (var i = 0; i < classNames.length; i += 1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\telm.classList.add(classNames[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// polyfill\r\n\t\t\t\tfor (var i = 0; i < classNames.length; i += 1)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!jsc.hasClass(elm, classNames[i]))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\telm.className += (elm.className ? ' ' : '') + classNames[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// The className parameter (str) can contain multiple class names separated by whitespace\r\n\t\t\tremoveClass: function (elm: any, className: any)\r\n\t\t\t{\r\n\t\t\t\tvar classNames = jsc.strList(className);\r\n\r\n\t\t\t\tif (elm.classList !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (var i = 0; i < classNames.length; i += 1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\telm.classList.remove(classNames[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// polyfill\r\n\t\t\t\tfor (var i = 0; i < classNames.length; i += 1)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar repl = new RegExp(\r\n\t\t\t\t\t\t'^\\\\s*' + classNames[i] + '\\\\s*|' +\r\n\t\t\t\t\t\t'\\\\s*' + classNames[i] + '\\\\s*$|' +\r\n\t\t\t\t\t\t'\\\\s+' + classNames[i] + '(\\\\s+)',\r\n\t\t\t\t\t\t'g'\r\n\t\t\t\t\t);\r\n\t\t\t\t\telm.className = elm.className.replace(repl, '$1');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgetCompStyle: function (elm: any)\r\n\t\t\t{\r\n\t\t\t\tvar compStyle = window.getComputedStyle ? window.getComputedStyle(elm) : elm.currentStyle;\r\n\r\n\t\t\t\t// Note: In Firefox, getComputedStyle returns null in a hidden iframe,\r\n\t\t\t\t// that's why we need to check if the returned value is non-empty\r\n\t\t\t\tif (!compStyle)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn {};\r\n\t\t\t\t}\r\n\t\t\t\treturn compStyle;\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// Note:\r\n\t\t\t//   Setting a property to NULL reverts it to the state before it was first set\r\n\t\t\t//   with the 'reversible' flag enabled\r\n\t\t\t//\r\n\t\t\tsetStyle: function (elm: any, styles: any, important: any, reversible: any)\r\n\t\t\t{\r\n\t\t\t\t// using '' for standard priority (IE10 apparently doesn't like value undefined)\r\n\t\t\t\tvar priority = important ? 'important' : '';\r\n\t\t\t\tvar origStyle = null;\r\n\r\n\t\t\t\tfor (var prop in styles)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (styles.hasOwnProperty(prop))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar setVal = null;\r\n\r\n\t\t\t\t\t\tif (styles[prop] === null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// reverting a property value\r\n\r\n\t\t\t\t\t\t\tif (!origStyle)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t// get the original style object, but dont't try to create it if it doesn't exist\r\n\t\t\t\t\t\t\t\torigStyle = jsc.getData(elm, 'origStyle');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (origStyle && origStyle.hasOwnProperty(prop))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t// we have property's original value -> use it\r\n\t\t\t\t\t\t\t\tsetVal = origStyle[prop];\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// setting a property value\r\n\r\n\t\t\t\t\t\t\tif (reversible)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (!origStyle)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t// get the original style object and if it doesn't exist, create it\r\n\t\t\t\t\t\t\t\t\torigStyle = jsc.getData(elm, 'origStyle', {});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (!origStyle.hasOwnProperty(prop))\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t// original property value not yet stored -> store it\r\n\t\t\t\t\t\t\t\t\torigStyle[prop] = elm.style[prop];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsetVal = styles[prop];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (setVal !== null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\telm.style.setProperty(prop, setVal, priority);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\thexColor: function (r: any, g: any, b: any)\r\n\t\t\t{\r\n\t\t\t\treturn '#' + (\r\n\t\t\t\t\t('0' + Math.round(r).toString(16)).substr(-2) +\r\n\t\t\t\t\t('0' + Math.round(g).toString(16)).substr(-2) +\r\n\t\t\t\t\t('0' + Math.round(b).toString(16)).substr(-2)\r\n\t\t\t\t).toUpperCase();\r\n\t\t\t},\r\n\r\n\r\n\t\t\thexaColor: function (r: any, g: any, b: any, a: any)\r\n\t\t\t{\r\n\t\t\t\treturn '#' + (\r\n\t\t\t\t\t('0' + Math.round(r).toString(16)).substr(-2) +\r\n\t\t\t\t\t('0' + Math.round(g).toString(16)).substr(-2) +\r\n\t\t\t\t\t('0' + Math.round(b).toString(16)).substr(-2) +\r\n\t\t\t\t\t('0' + Math.round(a * 255).toString(16)).substr(-2)\r\n\t\t\t\t).toUpperCase();\r\n\t\t\t},\r\n\r\n\r\n\t\t\trgbColor: function (r: any, g: any, b: any)\r\n\t\t\t{\r\n\t\t\t\treturn 'rgb(' +\r\n\t\t\t\t\tMath.round(r) + ',' +\r\n\t\t\t\t\tMath.round(g) + ',' +\r\n\t\t\t\t\tMath.round(b) +\r\n\t\t\t\t\t')';\r\n\t\t\t},\r\n\r\n\r\n\t\t\trgbaColor: function (r: any, g: any, b: any, a: any)\r\n\t\t\t{\r\n\t\t\t\treturn 'rgba(' +\r\n\t\t\t\t\tMath.round(r) + ',' +\r\n\t\t\t\t\tMath.round(g) + ',' +\r\n\t\t\t\t\tMath.round(b) + ',' +\r\n\t\t\t\t\t(Math.round((a === undefined || a === null ? 1 : a) * 100) / 100) +\r\n\t\t\t\t\t')';\r\n\t\t\t},\r\n\r\n\r\n\t\t\tlinearGradient: (function ()\r\n\t\t\t{\r\n\r\n\t\t\t\tfunction getFuncName()\r\n\t\t\t\t{\r\n\t\t\t\t\tvar stdName = 'linear-gradient';\r\n\t\t\t\t\tvar prefixes = ['', '-webkit-', '-moz-', '-o-', '-ms-'];\r\n\t\t\t\t\tvar helper = window.document.createElement('div');\r\n\r\n\t\t\t\t\tfor (var i = 0; i < prefixes.length; i += 1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar tryFunc = prefixes[i] + stdName;\r\n\t\t\t\t\t\tvar tryVal = tryFunc + '(to right, rgba(0,0,0,0), rgba(0,0,0,0))';\r\n\r\n\t\t\t\t\t\thelper.style.background = tryVal;\r\n\t\t\t\t\t\tif (helper.style.background)\r\n\t\t\t\t\t\t{ // CSS background successfully set -> function name is supported\r\n\t\t\t\t\t\t\treturn tryFunc;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn stdName; // fallback to standard 'linear-gradient' without vendor prefix\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar funcName = getFuncName();\r\n\r\n\t\t\t\treturn function ()\r\n\t\t\t\t{\r\n\t\t\t\t\treturn funcName + '(' + Array.prototype.join.call(arguments, ', ') + ')';\r\n\t\t\t\t};\r\n\r\n\t\t\t})(),\r\n\r\n\r\n\t\t\tsetBorderRadius: function (elm: any, value: any)\r\n\t\t\t{\r\n\t\t\t\tjsc.setStyle(elm, { 'border-radius': value || '0' });\r\n\t\t\t},\r\n\r\n\r\n\t\t\tsetBoxShadow: function (elm: any, value: any)\r\n\t\t\t{\r\n\t\t\t\tjsc.setStyle(elm, { 'box-shadow': value || 'none' });\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgetElementPos: function (e: any, relativeToViewport: any)\r\n\t\t\t{\r\n\t\t\t\tvar x = 0, y = 0;\r\n\t\t\t\tvar rect = e.getBoundingClientRect();\r\n\t\t\t\tx = rect.left;\r\n\t\t\t\ty = rect.top;\r\n\t\t\t\tif (!relativeToViewport)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar viewPos = jsc.getViewPos();\r\n\t\t\t\t\tx += viewPos[0];\r\n\t\t\t\t\ty += viewPos[1];\r\n\t\t\t\t}\r\n\t\t\t\treturn [x, y];\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgetElementSize: function (e: any)\r\n\t\t\t{\r\n\t\t\t\treturn [e.offsetWidth, e.offsetHeight];\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// get pointer's X/Y coordinates relative to viewport\r\n\t\t\tgetAbsPointerPos: function (e: any)\r\n\t\t\t{\r\n\t\t\t\tvar x = 0, y = 0;\r\n\t\t\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length)\r\n\t\t\t\t{\r\n\t\t\t\t\t// touch devices\r\n\t\t\t\t\tx = e.changedTouches[0].clientX;\r\n\t\t\t\t\ty = e.changedTouches[0].clientY;\r\n\t\t\t\t} else if (typeof e.clientX === 'number')\r\n\t\t\t\t{\r\n\t\t\t\t\tx = e.clientX;\r\n\t\t\t\t\ty = e.clientY;\r\n\t\t\t\t}\r\n\t\t\t\treturn { x: x, y: y };\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// get pointer's X/Y coordinates relative to target element\r\n\t\t\tgetRelPointerPos: function (e: any)\r\n\t\t\t{\r\n\t\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\t\tvar targetRect = target.getBoundingClientRect();\r\n\r\n\t\t\t\tvar x = 0, y = 0;\r\n\r\n\t\t\t\tvar clientX = 0, clientY = 0;\r\n\t\t\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length)\r\n\t\t\t\t{\r\n\t\t\t\t\t// touch devices\r\n\t\t\t\t\tclientX = e.changedTouches[0].clientX;\r\n\t\t\t\t\tclientY = e.changedTouches[0].clientY;\r\n\t\t\t\t} else if (typeof e.clientX === 'number')\r\n\t\t\t\t{\r\n\t\t\t\t\tclientX = e.clientX;\r\n\t\t\t\t\tclientY = e.clientY;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tx = clientX - targetRect.left;\r\n\t\t\t\ty = clientY - targetRect.top;\r\n\t\t\t\treturn { x: x, y: y };\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgetViewPos: function ()\r\n\t\t\t{\r\n\t\t\t\tvar doc = window.document.documentElement;\r\n\t\t\t\treturn [\r\n\t\t\t\t\t(window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0),\r\n\t\t\t\t\t(window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\r\n\t\t\t\t];\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgetViewSize: function ()\r\n\t\t\t{\r\n\t\t\t\tvar doc = window.document.documentElement;\r\n\t\t\t\treturn [\r\n\t\t\t\t\t(window.innerWidth || doc.clientWidth),\r\n\t\t\t\t\t(window.innerHeight || doc.clientHeight),\r\n\t\t\t\t];\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// r: 0-255\r\n\t\t\t// g: 0-255\r\n\t\t\t// b: 0-255\r\n\t\t\t//\r\n\t\t\t// returns: [ 0-360, 0-100, 0-100 ]\r\n\t\t\t//\r\n\t\t\tRGB_HSV: function (r: any, g: any, b: any)\r\n\t\t\t{\r\n\t\t\t\tr /= 255;\r\n\t\t\t\tg /= 255;\r\n\t\t\t\tb /= 255;\r\n\t\t\t\tvar n = Math.min(Math.min(r, g), b);\r\n\t\t\t\tvar v = Math.max(Math.max(r, g), b);\r\n\t\t\t\tvar m = v - n;\r\n\t\t\t\tif (m === 0) { return [null, 0, 100 * v]; }\r\n\t\t\t\tvar h = r === n ? 3 + (b - g) / m : (g === n ? 5 + (r - b) / m : 1 + (g - r) / m);\r\n\t\t\t\treturn [\r\n\t\t\t\t\t60 * (h === 6 ? 0 : h),\r\n\t\t\t\t\t100 * (m / v),\r\n\t\t\t\t\t100 * v\r\n\t\t\t\t];\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// h: 0-360\r\n\t\t\t// s: 0-100\r\n\t\t\t// v: 0-100\r\n\t\t\t//\r\n\t\t\t// returns: [ 0-255, 0-255, 0-255 ]\r\n\t\t\t//\r\n\t\t\tHSV_RGB: function (h: any, s: any, v: any)\r\n\t\t\t{\r\n\t\t\t\tvar u = 255 * (v / 100);\r\n\r\n\t\t\t\tif (h === null)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn [u, u, u];\r\n\t\t\t\t}\r\n\r\n\t\t\t\th /= 60;\r\n\t\t\t\ts /= 100;\r\n\r\n\t\t\t\tvar i = Math.floor(h);\r\n\t\t\t\tvar f = i % 2 ? h - i : 1 - (h - i);\r\n\t\t\t\tvar m = u * (1 - s);\r\n\t\t\t\tvar n = u * (1 - s * f);\r\n\t\t\t\tswitch (i)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 6:\r\n\t\t\t\t\tcase 0: return [u, n, m];\r\n\t\t\t\t\tcase 1: return [n, u, m];\r\n\t\t\t\t\tcase 2: return [m, u, n];\r\n\t\t\t\t\tcase 3: return [m, n, u];\r\n\t\t\t\t\tcase 4: return [n, m, u];\r\n\t\t\t\t\tcase 5: return [u, m, n];\r\n\t\t\t\t}\r\n\t\t\t\treturn u;\r\n\t\t\t},\r\n\r\n\r\n\t\t\tparseColorString: function (str: any)\r\n\t\t\t{\r\n\t\t\t\tvar ret: any = {\r\n\t\t\t\t\trgba: null,\r\n\t\t\t\t\tformat: null // 'hex' | 'hexa' | 'rgb' | 'rgba'\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar m;\r\n\r\n\t\t\t\tif (m = str.match(/^\\W*([0-9A-F]{3,8})\\W*$/i))\r\n\t\t\t\t{\r\n\t\t\t\t\t// HEX notation\r\n\r\n\t\t\t\t\tif (m[1].length === 8)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// 8-char notation (= with alpha)\r\n\t\t\t\t\t\tret.format = 'hexa';\r\n\t\t\t\t\t\tret.rgba = [\r\n\t\t\t\t\t\t\tparseInt(m[1].substr(0, 2), 16),\r\n\t\t\t\t\t\t\tparseInt(m[1].substr(2, 2), 16),\r\n\t\t\t\t\t\t\tparseInt(m[1].substr(4, 2), 16),\r\n\t\t\t\t\t\t\tparseInt(m[1].substr(6, 2), 16) / 255\r\n\t\t\t\t\t\t];\r\n\r\n\t\t\t\t\t} else if (m[1].length === 6)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// 6-char notation\r\n\t\t\t\t\t\tret.format = 'hex';\r\n\t\t\t\t\t\tret.rgba = [\r\n\t\t\t\t\t\t\tparseInt(m[1].substr(0, 2), 16),\r\n\t\t\t\t\t\t\tparseInt(m[1].substr(2, 2), 16),\r\n\t\t\t\t\t\t\tparseInt(m[1].substr(4, 2), 16),\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t];\r\n\r\n\t\t\t\t\t} else if (m[1].length === 3)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// 3-char notation\r\n\t\t\t\t\t\tret.format = 'hex';\r\n\t\t\t\t\t\tret.rgba = [\r\n\t\t\t\t\t\t\tparseInt(m[1].charAt(0) + m[1].charAt(0), 16),\r\n\t\t\t\t\t\t\tparseInt(m[1].charAt(1) + m[1].charAt(1), 16),\r\n\t\t\t\t\t\t\tparseInt(m[1].charAt(2) + m[1].charAt(2), 16),\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t];\r\n\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (m = str.match(/^\\W*rgba?\\(([^)]*)\\)\\W*$/i))\r\n\t\t\t\t{\r\n\t\t\t\t\t// rgb(...) or rgba(...) notation\r\n\r\n\t\t\t\t\tvar par = m[1].split(',');\r\n\t\t\t\t\tvar re = /^\\s*(\\d+|\\d*\\.\\d+|\\d+\\.\\d*)\\s*$/;\r\n\t\t\t\t\tvar mR, mG, mB, mA;\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tpar.length >= 3 &&\r\n\t\t\t\t\t\t(mR = par[0].match(re)) &&\r\n\t\t\t\t\t\t(mG = par[1].match(re)) &&\r\n\t\t\t\t\t\t(mB = par[2].match(re))\r\n\t\t\t\t\t)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tret.format = 'rgb';\r\n\t\t\t\t\t\tret.rgba = [\r\n\t\t\t\t\t\t\tparseFloat(mR[1]) || 0,\r\n\t\t\t\t\t\t\tparseFloat(mG[1]) || 0,\r\n\t\t\t\t\t\t\tparseFloat(mB[1]) || 0,\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t];\r\n\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tpar.length >= 4 &&\r\n\t\t\t\t\t\t\t(mA = par[3].match(re))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tret.format = 'rgba';\r\n\t\t\t\t\t\t\tret.rgba[3] = parseFloat(mA[1]) || 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn ret;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\r\n\r\n\t\t\tparsePaletteValue: function (mixed: any)\r\n\t\t\t{\r\n\t\t\t\tvar vals = [];\r\n\r\n\t\t\t\tif (typeof mixed === 'string')\r\n\t\t\t\t{ // input is a string of space separated color values\r\n\t\t\t\t\t// rgb() and rgba() may contain spaces too, so let's find all color values by regex\r\n\t\t\t\t\t(mixed as any).replace(/#[0-9A-F]{3}([0-9A-F]{3})?|rgba?\\(([^)]*)\\)/ig, function (val: any)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvals.push(val);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (Array.isArray(mixed))\r\n\t\t\t\t{ // input is an array of color values\r\n\t\t\t\t\tvals = mixed;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// convert all values into uniform color format\r\n\r\n\t\t\t\tvar colors = [];\r\n\r\n\t\t\t\tfor (var i = 0; i < vals.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar color = jsc.parseColorString(vals[i]);\r\n\t\t\t\t\tif (color)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcolors.push(color);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn colors;\r\n\t\t\t},\r\n\r\n\r\n\t\t\tcontainsTranparentColor: function (colors: any)\r\n\t\t\t{\r\n\t\t\t\tfor (var i = 0; i < colors.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar a = colors[i].rgba[3];\r\n\t\t\t\t\tif (a !== null && a < 1.0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\r\n\r\n\t\t\tisAlphaFormat: function (format: any)\r\n\t\t\t{\r\n\t\t\t\tswitch (format.toLowerCase())\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 'hexa':\r\n\t\t\t\t\tcase 'rgba':\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// Canvas scaling for retina displays\r\n\t\t\t//\r\n\t\t\t// adapted from https://www.html5rocks.com/en/tutorials/canvas/hidpi/\r\n\t\t\t//\r\n\t\t\tscaleCanvasForHighDPR: function (canvas: any)\r\n\t\t\t{\r\n\t\t\t\tvar dpr = window.devicePixelRatio || 1;\r\n\t\t\t\tcanvas.width *= dpr;\r\n\t\t\t\tcanvas.height *= dpr;\r\n\t\t\t\tvar ctx = canvas.getContext('2d');\r\n\t\t\t\tctx.scale(dpr, dpr);\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgenColorPreviewCanvas: function (color: any, separatorPos: any, specWidth: any, scaleForHighDPR: any)\r\n\t\t\t{\r\n\r\n\t\t\t\tvar sepW = Math.round(jsc.pub.previewSeparator.length);\r\n\t\t\t\tvar sqSize = jsc.pub.chessboardSize;\r\n\t\t\t\tvar sqColor1 = jsc.pub.chessboardColor1;\r\n\t\t\t\tvar sqColor2 = jsc.pub.chessboardColor2;\r\n\r\n\t\t\t\tvar cWidth = specWidth ? specWidth : sqSize * 2;\r\n\t\t\t\tvar cHeight = sqSize * 2;\r\n\r\n\t\t\t\tvar canvas = jsc.createEl('canvas');\r\n\t\t\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\t\t\tcanvas.width = cWidth;\r\n\t\t\t\tcanvas.height = cHeight;\r\n\t\t\t\tif (scaleForHighDPR)\r\n\t\t\t\t{\r\n\t\t\t\t\tjsc.scaleCanvasForHighDPR(canvas);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// transparency chessboard - background\r\n\t\t\t\tctx.fillStyle = sqColor1;\r\n\t\t\t\tctx.fillRect(0, 0, cWidth, cHeight);\r\n\r\n\t\t\t\t// transparency chessboard - squares\r\n\t\t\t\tctx.fillStyle = sqColor2;\r\n\t\t\t\tfor (var x = 0; x < cWidth; x += sqSize * 2)\r\n\t\t\t\t{\r\n\t\t\t\t\tctx.fillRect(x, 0, sqSize, sqSize);\r\n\t\t\t\t\tctx.fillRect(x + sqSize, sqSize, sqSize, sqSize);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (color)\r\n\t\t\t\t{\r\n\t\t\t\t\t// actual color in foreground\r\n\t\t\t\t\tctx.fillStyle = color;\r\n\t\t\t\t\tctx.fillRect(0, 0, cWidth, cHeight);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar start = null;\r\n\t\t\t\tswitch (separatorPos)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\t\tstart = 0;\r\n\t\t\t\t\t\tctx.clearRect(0, 0, sepW / 2, cHeight);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\tstart = cWidth - sepW;\r\n\t\t\t\t\t\tctx.clearRect(cWidth - (sepW / 2), 0, sepW / 2, cHeight);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (start !== null)\r\n\t\t\t\t{\r\n\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\tfor (var i = 0; i < jsc.pub.previewSeparator.length; i += 1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.strokeStyle = jsc.pub.previewSeparator[i];\r\n\t\t\t\t\t\tctx.moveTo(0.5 + start + i, 0);\r\n\t\t\t\t\t\tctx.lineTo(0.5 + start + i, cHeight);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tcanvas: canvas,\r\n\t\t\t\t\twidth: cWidth,\r\n\t\t\t\t\theight: cHeight,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// if position or width is not set => fill the entire element (0%-100%)\r\n\t\t\tgenColorPreviewGradient: function (color: any, position: any, width: any)\r\n\t\t\t{\r\n\t\t\t\tvar params = [];\r\n\r\n\t\t\t\tif (position && width)\r\n\t\t\t\t{\r\n\t\t\t\t\tparams = [\r\n\t\t\t\t\t\t'to ' + ({ 'left': 'right', 'right': 'left' } as any)[position],\r\n\t\t\t\t\t\tcolor + ' 0%',\r\n\t\t\t\t\t\tcolor + ' ' + width + 'px',\r\n\t\t\t\t\t\t'rgba(0,0,0,0) ' + (width + 1) + 'px',\r\n\t\t\t\t\t\t'rgba(0,0,0,0) 100%',\r\n\t\t\t\t\t];\r\n\t\t\t\t} else\r\n\t\t\t\t{\r\n\t\t\t\t\tparams = [\r\n\t\t\t\t\t\t'to right',\r\n\t\t\t\t\t\tcolor + ' 0%',\r\n\t\t\t\t\t\tcolor + ' 100%',\r\n\t\t\t\t\t];\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn jsc.linearGradient.apply(this, params);\r\n\t\t\t},\r\n\r\n\r\n\t\t\tredrawPosition: function ()\r\n\t\t\t{\r\n\r\n\t\t\t\tif (!jsc.picker || !jsc.picker.owner)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn; // picker is not shown\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar thisObj = jsc.picker.owner;\r\n\r\n\t\t\t\tvar tp, vp;\r\n\r\n\t\t\t\tif (thisObj.fixed)\r\n\t\t\t\t{\r\n\t\t\t\t\t// Fixed elements are positioned relative to viewport,\r\n\t\t\t\t\t// therefore we can ignore the scroll offset\r\n\t\t\t\t\ttp = jsc.getElementPos(thisObj.targetElement, true); // target pos\r\n\t\t\t\t\tvp = [0, 0]; // view pos\r\n\t\t\t\t} else\r\n\t\t\t\t{\r\n\t\t\t\t\ttp = jsc.getElementPos(thisObj.targetElement); // target pos\r\n\t\t\t\t\tvp = jsc.getViewPos(); // view pos\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar ts = jsc.getElementSize(thisObj.targetElement); // target size\r\n\t\t\t\tvar vs = jsc.getViewSize(); // view size\r\n\t\t\t\tvar pd = jsc.getPickerDims(thisObj);\r\n\t\t\t\tvar ps = [pd.borderW, pd.borderH]; // picker outer size\r\n\t\t\t\tvar a, b, c;\r\n\t\t\t\tswitch (thisObj.position.toLowerCase())\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 'left': a = 1; b = 0; c = -1; break;\r\n\t\t\t\t\tcase 'right': a = 1; b = 0; c = 1; break;\r\n\t\t\t\t\tcase 'top': a = 0; b = 1; c = -1; break;\r\n\t\t\t\t\tdefault: a = 0; b = 1; c = 1; break;\r\n\t\t\t\t}\r\n\t\t\t\tvar l = (ts[b] + ps[b]) / 2;\r\n\r\n\t\t\t\t// compute picker position\r\n\t\t\t\tif (!thisObj.smartPosition)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar pp = [\r\n\t\t\t\t\t\ttp[a],\r\n\t\t\t\t\t\ttp[b] + ts[b] - l + l * c\r\n\t\t\t\t\t];\r\n\t\t\t\t} else\r\n\t\t\t\t{\r\n\t\t\t\t\tvar pp = [\r\n\t\t\t\t\t\t-vp[a] + tp[a] + ps[a] > vs[a] ?\r\n\t\t\t\t\t\t\t(-vp[a] + tp[a] + ts[a] / 2 > vs[a] / 2 && tp[a] + ts[a] - ps[a] >= 0 ? tp[a] + ts[a] - ps[a] : tp[a]) :\r\n\t\t\t\t\t\t\ttp[a],\r\n\t\t\t\t\t\t-vp[b] + tp[b] + ts[b] + ps[b] - l + l * c > vs[b] ?\r\n\t\t\t\t\t\t\t(-vp[b] + tp[b] + ts[b] / 2 > vs[b] / 2 && tp[b] + ts[b] - l - l * c >= 0 ? tp[b] + ts[b] - l - l * c : tp[b] + ts[b] - l + l * c) :\r\n\t\t\t\t\t\t\t(tp[b] + ts[b] - l + l * c >= 0 ? tp[b] + ts[b] - l + l * c : tp[b] + ts[b] - l - l * c)\r\n\t\t\t\t\t];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar x = pp[a];\r\n\t\t\t\tvar y = pp[b];\r\n\t\t\t\tvar positionValue = thisObj.fixed ? 'fixed' : 'absolute';\r\n\t\t\t\tvar contractShadow =\r\n\t\t\t\t\t(pp[0] + ps[0] > tp[0] || pp[0] < tp[0] + ts[0]) &&\r\n\t\t\t\t\t(pp[1] + ps[1] < tp[1] + ts[1]);\r\n\r\n\t\t\t\tjsc._drawPosition(thisObj, x, y, positionValue, contractShadow);\r\n\t\t\t},\r\n\r\n\r\n\t\t\t_drawPosition: function (thisObj: any, x: any, y: any, positionValue: any, contractShadow: any)\r\n\t\t\t{\r\n\t\t\t\tvar vShadow = contractShadow ? 0 : thisObj.shadowBlur; // px\r\n\r\n\t\t\t\tjsc.picker.wrap.style.position = positionValue;\r\n\t\t\t\tjsc.picker.wrap.style.left = x + 'px';\r\n\t\t\t\tjsc.picker.wrap.style.top = y + 'px';\r\n\r\n\t\t\t\tjsc.setBoxShadow(\r\n\t\t\t\t\tjsc.picker.boxS,\r\n\t\t\t\t\tthisObj.shadow ?\r\n\t\t\t\t\t\tnew jsc.BoxShadow(0, vShadow, thisObj.shadowBlur, 0, thisObj.shadowColor) :\r\n\t\t\t\t\t\tnull);\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgetPickerDims: function (thisObj: any)\r\n\t\t\t{\r\n\t\t\t\tvar w = 2 * thisObj.controlBorderWidth + thisObj.width;\r\n\t\t\t\tvar h = 2 * thisObj.controlBorderWidth + thisObj.height;\r\n\r\n\t\t\t\tvar sliderSpace = 2 * thisObj.controlBorderWidth + 2 * jsc.getControlPadding(thisObj) + thisObj.sliderSize;\r\n\r\n\t\t\t\tif (jsc.getSliderChannel(thisObj))\r\n\t\t\t\t{\r\n\t\t\t\t\tw += sliderSpace;\r\n\t\t\t\t}\r\n\t\t\t\tif (thisObj.hasAlphaChannel())\r\n\t\t\t\t{\r\n\t\t\t\t\tw += sliderSpace;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar pal = jsc.getPaletteDims(thisObj, w);\r\n\r\n\t\t\t\tif (pal.height)\r\n\t\t\t\t{\r\n\t\t\t\t\th += pal.height + thisObj.padding;\r\n\t\t\t\t}\r\n\t\t\t\tif (thisObj.closeButton)\r\n\t\t\t\t{\r\n\t\t\t\t\th += 2 * thisObj.controlBorderWidth + thisObj.padding + thisObj.buttonHeight;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar pW = w + (2 * thisObj.padding);\r\n\t\t\t\tvar pH = h + (2 * thisObj.padding);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tcontentW: w,\r\n\t\t\t\t\tcontentH: h,\r\n\t\t\t\t\tpaddedW: pW,\r\n\t\t\t\t\tpaddedH: pH,\r\n\t\t\t\t\tborderW: pW + (2 * thisObj.borderWidth),\r\n\t\t\t\t\tborderH: pH + (2 * thisObj.borderWidth),\r\n\t\t\t\t\tpalette: pal,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgetPaletteDims: function (thisObj: any, width: any)\r\n\t\t\t{\r\n\t\t\t\tvar cols = 0, rows = 0, cellW = 0, cellH = 0, height = 0;\r\n\t\t\t\tvar sampleCount = thisObj._palette ? thisObj._palette.length : 0;\r\n\r\n\t\t\t\tif (sampleCount)\r\n\t\t\t\t{\r\n\t\t\t\t\tcols = thisObj.paletteCols;\r\n\t\t\t\t\trows = cols > 0 ? Math.ceil(sampleCount / cols) : 0;\r\n\r\n\t\t\t\t\t// color sample's dimensions (includes border)\r\n\t\t\t\t\tcellW = Math.max(1, Math.floor((width - ((cols - 1) * thisObj.paletteSpacing)) / cols));\r\n\t\t\t\t\tcellH = thisObj.paletteHeight ? Math.min(thisObj.paletteHeight, cellW) : cellW;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (rows)\r\n\t\t\t\t{\r\n\t\t\t\t\theight =\r\n\t\t\t\t\t\trows * cellH +\r\n\t\t\t\t\t\t(rows - 1) * thisObj.paletteSpacing;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tcols: cols,\r\n\t\t\t\t\trows: rows,\r\n\t\t\t\t\tcellW: cellW,\r\n\t\t\t\t\tcellH: cellH,\r\n\t\t\t\t\twidth: width,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgetControlPadding: function (thisObj: any)\r\n\t\t\t{\r\n\t\t\t\treturn Math.max(\r\n\t\t\t\t\tthisObj.padding / 2,\r\n\t\t\t\t\t(2 * thisObj.pointerBorderWidth + thisObj.pointerThickness) - thisObj.controlBorderWidth\r\n\t\t\t\t);\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgetPadYChannel: function (thisObj: any)\r\n\t\t\t{\r\n\t\t\t\tswitch (thisObj.mode.charAt(1).toLowerCase())\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 'v': return 'v'; break;\r\n\t\t\t\t}\r\n\t\t\t\treturn 's';\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgetSliderChannel: function (thisObj: any)\r\n\t\t\t{\r\n\t\t\t\tif (thisObj.mode.length > 2)\r\n\t\t\t\t{\r\n\t\t\t\t\tswitch (thisObj.mode.charAt(2).toLowerCase())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcase 's': return 's'; break;\r\n\t\t\t\t\t\tcase 'v': return 'v'; break;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// calls function specified in picker's property\r\n\t\t\ttriggerCallback: function (thisObj: any, prop: any)\r\n\t\t\t{\r\n\t\t\t\tif (!thisObj[prop])\r\n\t\t\t\t{\r\n\t\t\t\t\treturn; // callback func not specified\r\n\t\t\t\t}\r\n\t\t\t\tvar callback = null;\r\n\r\n\t\t\t\tif (typeof thisObj[prop] === 'string')\r\n\t\t\t\t{\r\n\t\t\t\t\t// string with code\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcallback = new Function(thisObj[prop]);\r\n\t\t\t\t\t} catch (e)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else\r\n\t\t\t\t{\r\n\t\t\t\t\t// function\r\n\t\t\t\t\tcallback = thisObj[prop];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (callback)\r\n\t\t\t\t{\r\n\t\t\t\t\tcallback.call(thisObj);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// Triggers a color change related event(s) on all picker instances.\r\n\t\t\t// It is possible to specify multiple events separated with a space.\r\n\t\t\ttriggerGlobal: function (eventNames: any)\r\n\t\t\t{\r\n\t\t\t\tvar inst = jsc.getInstances();\r\n\t\t\t\tfor (var i = 0; i < inst.length; i += 1)\r\n\t\t\t\t{\r\n\t\t\t\t\tinst[i].trigger(eventNames);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\t_pointerMoveEvent: {\r\n\t\t\t\tmouse: 'mousemove',\r\n\t\t\t\ttouch: 'touchmove'\r\n\t\t\t},\r\n\t\t\t_pointerEndEvent: {\r\n\t\t\t\tmouse: 'mouseup',\r\n\t\t\t\ttouch: 'touchend'\r\n\t\t\t},\r\n\r\n\r\n\t\t\t_pointerOrigin: null,\r\n\t\t\t_capturedTarget: null,\r\n\r\n\r\n\t\t\tonDocumentKeyUp: function (e: any)\r\n\t\t\t{\r\n\t\t\t\tif (['Tab', 'Escape'].indexOf(jsc.eventKey(e)) !== -1)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (jsc.picker && jsc.picker.owner)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tjsc.picker.owner.tryHide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\tonWindowResize: function (e: any)\r\n\t\t\t{\r\n\t\t\t\tjsc.redrawPosition();\r\n\t\t\t},\r\n\r\n\r\n\t\t\tonWindowScroll: function (e: any)\r\n\t\t\t{\r\n\t\t\t\tjsc.redrawPosition();\r\n\t\t\t},\r\n\r\n\r\n\t\t\tonParentScroll: function (e: any)\r\n\t\t\t{\r\n\t\t\t\t// hide the picker when one of the parent elements is scrolled\r\n\t\t\t\tif (jsc.picker && jsc.picker.owner)\r\n\t\t\t\t{\r\n\t\t\t\t\tjsc.picker.owner.tryHide();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\tonDocumentMouseDown: function (e: any)\r\n\t\t\t{\r\n\t\t\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\t\t\tif (target.jscolor && target.jscolor instanceof jsc.pub)\r\n\t\t\t\t{ // clicked targetElement -> show picker\r\n\t\t\t\t\tif (target.jscolor.showOnClick && !target.disabled)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttarget.jscolor.show();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (jsc.getData(target, 'gui'))\r\n\t\t\t\t{ // clicked jscolor's GUI element\r\n\t\t\t\t\tvar control = jsc.getData(target, 'control');\r\n\t\t\t\t\tif (control)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// jscolor's control\r\n\t\t\t\t\t\tjsc.onControlPointerStart(e, target, jsc.getData(target, 'control'), 'mouse');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else\r\n\t\t\t\t{\r\n\t\t\t\t\t// mouse is outside the picker's controls -> hide the color picker!\r\n\t\t\t\t\tif (jsc.picker && jsc.picker.owner)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tjsc.picker.owner.tryHide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\tonPickerTouchStart: function (e: any)\r\n\t\t\t{\r\n\t\t\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\t\t\tif (jsc.getData(target, 'control'))\r\n\t\t\t\t{\r\n\t\t\t\t\tjsc.onControlPointerStart(e, target, jsc.getData(target, 'control'), 'touch');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\tonControlPointerStart: function (e: any, target: any, controlName: any, pointerType: any)\r\n\t\t\t{\r\n\t\t\t\tvar thisObj = jsc.getData(target, 'instance');\r\n\r\n\t\t\t\tjsc.preventDefault(e);\r\n\t\t\t\tjsc.captureTarget(target);\r\n\r\n\t\t\t\tvar registerDragEvents = function (doc: any, offset: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerMoveEvent[pointerType],\r\n\t\t\t\t\t\tjsc.onDocumentPointerMove(e, target, controlName, pointerType, offset));\r\n\t\t\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerEndEvent[pointerType],\r\n\t\t\t\t\t\tjsc.onDocumentPointerEnd(e, target, controlName, pointerType));\r\n\t\t\t\t};\r\n\r\n\t\t\t\tregisterDragEvents(window.document, [0, 0]);\r\n\r\n\t\t\t\tif (window.parent && window.frameElement)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar rect = window.frameElement.getBoundingClientRect();\r\n\t\t\t\t\tvar ofs = [-rect.left, -rect.top];\r\n\t\t\t\t\tregisterDragEvents(window.parent.window.document, ofs);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar abs = jsc.getAbsPointerPos(e);\r\n\t\t\t\tvar rel = jsc.getRelPointerPos(e);\r\n\t\t\t\tjsc._pointerOrigin = {\r\n\t\t\t\t\tx: abs.x - rel.x,\r\n\t\t\t\t\ty: abs.y - rel.y\r\n\t\t\t\t};\r\n\r\n\t\t\t\tswitch (controlName)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 'pad':\r\n\t\t\t\t\t\t// if the value slider is at the bottom, move it up\r\n\t\t\t\t\t\tif (jsc.getSliderChannel(thisObj) === 'v' && thisObj.channels.v === 0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthisObj.fromHSVA(null, null, 100, null);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tjsc.setPad(thisObj, e, 0, 0);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'sld':\r\n\t\t\t\t\t\tjsc.setSld(thisObj, e, 0);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'asld':\r\n\t\t\t\t\t\tjsc.setASld(thisObj, e, 0);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tthisObj.trigger('input');\r\n\t\t\t},\r\n\r\n\r\n\t\t\tonDocumentPointerMove: function (e: any, target: any, controlName: any, pointerType: any, offset: any)\r\n\t\t\t{\r\n\t\t\t\treturn function (e: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar thisObj = jsc.getData(target, 'instance');\r\n\t\t\t\t\tswitch (controlName)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcase 'pad':\r\n\t\t\t\t\t\t\tjsc.setPad(thisObj, e, offset[0], offset[1]);\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'sld':\r\n\t\t\t\t\t\t\tjsc.setSld(thisObj, e, offset[1]);\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'asld':\r\n\t\t\t\t\t\t\tjsc.setASld(thisObj, e, offset[1]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthisObj.trigger('input');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\tonDocumentPointerEnd: function (e: any, target: any, controlName: any, pointerType: any)\r\n\t\t\t{\r\n\t\t\t\treturn function (e: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar thisObj = jsc.getData(target, 'instance');\r\n\t\t\t\t\tjsc.detachGroupEvents('drag');\r\n\t\t\t\t\tjsc.releaseTarget();\r\n\r\n\t\t\t\t\t// Always trigger changes AFTER detaching outstanding mouse handlers,\r\n\t\t\t\t\t// in case some color change that occured in user-defined onChange/onInput handler\r\n\t\t\t\t\t// intruded into current mouse events\r\n\t\t\t\t\tthisObj.trigger('input');\r\n\t\t\t\t\tthisObj.trigger('change');\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\r\n\t\t\tonPaletteSampleClick: function (e: any)\r\n\t\t\t{\r\n\t\t\t\tvar target = e.currentTarget;\r\n\t\t\t\tvar thisObj = jsc.getData(target, 'instance');\r\n\t\t\t\tvar color = jsc.getData(target, 'color');\r\n\r\n\t\t\t\t// when format is flexible, use the original format of this color sample\r\n\t\t\t\tif (thisObj.format.toLowerCase() === 'any')\r\n\t\t\t\t{\r\n\t\t\t\t\tthisObj._setFormat(color.format); // adapt format\r\n\t\t\t\t\tif (!jsc.isAlphaFormat(thisObj.getFormat()))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcolor.rgba[3] = 1.0; // when switching to a format that doesn't support alpha, set full opacity\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// if this color doesn't specify alpha, use alpha of 1.0 (if applicable)\r\n\t\t\t\tif (color.rgba[3] === null)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (thisObj.paletteSetsAlpha === true || (thisObj.paletteSetsAlpha === 'auto' && thisObj._paletteHasTransparency))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcolor.rgba[3] = 1.0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthisObj.fromRGBA.apply(thisObj, color.rgba);\r\n\r\n\t\t\t\tthisObj.trigger('input');\r\n\t\t\t\tthisObj.trigger('change');\r\n\r\n\t\t\t\tif (thisObj.hideOnPaletteClick)\r\n\t\t\t\t{\r\n\t\t\t\t\tthisObj.hide();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\tsetPad: function (thisObj: any, e: any, ofsX: any, ofsY: any)\r\n\t\t\t{\r\n\t\t\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\r\n\t\t\t\tvar x = ofsX + pointerAbs.x - jsc._pointerOrigin.x - thisObj.padding - thisObj.controlBorderWidth;\r\n\t\t\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.controlBorderWidth;\r\n\r\n\t\t\t\tvar xVal = x * (360 / (thisObj.width - 1));\r\n\t\t\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\r\n\r\n\t\t\t\tswitch (jsc.getPadYChannel(thisObj))\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 's': thisObj.fromHSVA(xVal, yVal, null, null); break;\r\n\t\t\t\t\tcase 'v': thisObj.fromHSVA(xVal, null, yVal, null); break;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\tsetSld: function (thisObj: any, e: any, ofsY: any)\r\n\t\t\t{\r\n\t\t\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\r\n\t\t\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.controlBorderWidth;\r\n\t\t\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\r\n\r\n\t\t\t\tswitch (jsc.getSliderChannel(thisObj))\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 's': thisObj.fromHSVA(null, yVal, null, null); break;\r\n\t\t\t\t\tcase 'v': thisObj.fromHSVA(null, null, yVal, null); break;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\tsetASld: function (thisObj: any, e: any, ofsY: any)\r\n\t\t\t{\r\n\t\t\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\r\n\t\t\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.controlBorderWidth;\r\n\t\t\t\tvar yVal = 1.0 - (y * (1.0 / (thisObj.height - 1)));\r\n\r\n\t\t\t\tif (yVal < 1.0)\r\n\t\t\t\t{\r\n\t\t\t\t\t// if format is flexible and the current format doesn't support alpha, switch to a suitable one\r\n\t\t\t\t\tvar fmt = thisObj.getFormat();\r\n\t\t\t\t\tif (thisObj.format.toLowerCase() === 'any' && !jsc.isAlphaFormat(fmt))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthisObj._setFormat(fmt === 'hex' ? 'hexa' : 'rgba');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthisObj.fromHSVA(null, null, null, yVal);\r\n\t\t\t},\r\n\r\n\r\n\t\t\tcreatePadCanvas: function ()\r\n\t\t\t{\r\n\r\n\t\t\t\tvar ret: any = {\r\n\t\t\t\t\telm: null,\r\n\t\t\t\t\tdraw: null\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar canvas = jsc.createEl('canvas');\r\n\t\t\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\t\t\tvar drawFunc = function (width: any, height: any, type: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tcanvas.width = width;\r\n\t\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\t\tvar hGrad = ctx.createLinearGradient(0, 0, canvas.width, 0);\r\n\t\t\t\t\thGrad.addColorStop(0 / 6, '#F00');\r\n\t\t\t\t\thGrad.addColorStop(1 / 6, '#FF0');\r\n\t\t\t\t\thGrad.addColorStop(2 / 6, '#0F0');\r\n\t\t\t\t\thGrad.addColorStop(3 / 6, '#0FF');\r\n\t\t\t\t\thGrad.addColorStop(4 / 6, '#00F');\r\n\t\t\t\t\thGrad.addColorStop(5 / 6, '#F0F');\r\n\t\t\t\t\thGrad.addColorStop(6 / 6, '#F00');\r\n\r\n\t\t\t\t\tctx.fillStyle = hGrad;\r\n\t\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\t\tvar vGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n\t\t\t\t\tswitch (type.toLowerCase())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcase 's':\r\n\t\t\t\t\t\t\tvGrad.addColorStop(0, 'rgba(255,255,255,0)');\r\n\t\t\t\t\t\t\tvGrad.addColorStop(1, 'rgba(255,255,255,1)');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'v':\r\n\t\t\t\t\t\t\tvGrad.addColorStop(0, 'rgba(0,0,0,0)');\r\n\t\t\t\t\t\t\tvGrad.addColorStop(1, 'rgba(0,0,0,1)');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.fillStyle = vGrad;\r\n\t\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tret.elm = canvas;\r\n\t\t\t\tret.draw = drawFunc;\r\n\r\n\t\t\t\treturn ret;\r\n\t\t\t},\r\n\r\n\r\n\t\t\tcreateSliderGradient: function ()\r\n\t\t\t{\r\n\r\n\t\t\t\tvar ret: any = {\r\n\t\t\t\t\telm: null,\r\n\t\t\t\t\tdraw: null\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar canvas = jsc.createEl('canvas');\r\n\t\t\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\t\t\tvar drawFunc = function (width: any, height: any, color1: any, color2: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tcanvas.width = width;\r\n\t\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\t\tvar grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n\t\t\t\t\tgrad.addColorStop(0, color1);\r\n\t\t\t\t\tgrad.addColorStop(1, color2);\r\n\r\n\t\t\t\t\tctx.fillStyle = grad;\r\n\t\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tret.elm = canvas;\r\n\t\t\t\tret.draw = drawFunc;\r\n\r\n\t\t\t\treturn ret;\r\n\t\t\t},\r\n\r\n\r\n\t\t\tcreateASliderGradient: function ()\r\n\t\t\t{\r\n\r\n\t\t\t\tvar ret: any = {\r\n\t\t\t\t\telm: null,\r\n\t\t\t\t\tdraw: null\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar canvas = jsc.createEl('canvas');\r\n\t\t\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\t\t\tvar drawFunc = function (width: any, height: any, color: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tcanvas.width = width;\r\n\t\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\t\tvar sqSize = canvas.width / 2;\r\n\t\t\t\t\tvar sqColor1 = jsc.pub.chessboardColor1;\r\n\t\t\t\t\tvar sqColor2 = jsc.pub.chessboardColor2;\r\n\r\n\t\t\t\t\t// dark gray background\r\n\t\t\t\t\tctx.fillStyle = sqColor1;\r\n\t\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\t\tif (sqSize > 0)\r\n\t\t\t\t\t{ // to avoid infinite loop\r\n\t\t\t\t\t\tfor (var y = 0; y < canvas.height; y += sqSize * 2)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// light gray squares\r\n\t\t\t\t\t\t\tctx.fillStyle = sqColor2;\r\n\t\t\t\t\t\t\tctx.fillRect(0, y, sqSize, sqSize);\r\n\t\t\t\t\t\t\tctx.fillRect(sqSize, y + sqSize, sqSize, sqSize);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n\t\t\t\t\tgrad.addColorStop(0, color);\r\n\t\t\t\t\tgrad.addColorStop(1, 'rgba(0,0,0,0)');\r\n\r\n\t\t\t\t\tctx.fillStyle = grad;\r\n\t\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tret.elm = canvas;\r\n\t\t\t\tret.draw = drawFunc;\r\n\r\n\t\t\t\treturn ret;\r\n\t\t\t},\r\n\r\n\r\n\t\t\tBoxShadow: (function ()\r\n\t\t\t{\r\n\t\t\t\tvar BoxShadow: any = function (hShadow: any, vShadow: any, blur: any, spread: any, color: any, inset: any)\r\n\t\t\t\t{\r\n\t\t\t\t\thShadow = hShadow;\r\n\t\t\t\t\tvShadow = vShadow;\r\n\t\t\t\t\tblur = blur;\r\n\t\t\t\t\tspread = spread;\r\n\t\t\t\t\tcolor = color;\r\n\t\t\t\t\tinset = !!inset;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tBoxShadow.prototype.toString = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\tvar vals = [\r\n\t\t\t\t\t\tMath.round(this.hShadow) + 'px',\r\n\t\t\t\t\t\tMath.round(this.vShadow) + 'px',\r\n\t\t\t\t\t\tMath.round(this.blur) + 'px',\r\n\t\t\t\t\t\tMath.round(this.spread) + 'px',\r\n\t\t\t\t\t\tthis.color\r\n\t\t\t\t\t];\r\n\t\t\t\t\tif (this.inset)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvals.push('inset');\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn vals.join(' ');\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn BoxShadow;\r\n\t\t\t})(),\r\n\r\n\r\n\t\t\tflags: {\r\n\t\t\t\tleaveValue: 1 << 0,\r\n\t\t\t\tleaveAlpha: 1 << 1,\r\n\t\t\t\tleavePreview: 1 << 2,\r\n\t\t\t},\r\n\r\n\r\n\t\t\tenumOpts: {\r\n\t\t\t\tformat: ['auto', 'any', 'hex', 'hexa', 'rgb', 'rgba'],\r\n\t\t\t\tpreviewPosition: ['left', 'right'],\r\n\t\t\t\tmode: ['hsv', 'hvs', 'hs', 'hv'],\r\n\t\t\t\tposition: ['left', 'right', 'top', 'bottom'],\r\n\t\t\t\talphaChannel: ['auto', true, false],\r\n\t\t\t\tpaletteSetsAlpha: ['auto', true, false],\r\n\t\t\t},\r\n\r\n\r\n\t\t\tdeprecatedOpts: {\r\n\t\t\t\t// <old_option>: <new_option>  (<new_option> can be null)\r\n\t\t\t\t'styleElement': 'previewElement',\r\n\t\t\t\t'onFineChange': 'onInput',\r\n\t\t\t\t'overwriteImportant': 'forceStyle',\r\n\t\t\t\t'closable': 'closeButton',\r\n\t\t\t\t'insetWidth': 'controlBorderWidth',\r\n\t\t\t\t'insetColor': 'controlBorderColor',\r\n\t\t\t\t'refine': null,\r\n\t\t\t},\r\n\r\n\r\n\t\t\tdocsRef: ' ' + 'See https://jscolor.com/docs/',\r\n\r\n\r\n\t\t\t//\r\n\t\t\t// Usage:\r\n\t\t\t// var myPicker = new JSColor(<targetElement> [, <options>])\r\n\t\t\t//\r\n\t\t\t// (constructor is accessible via both 'jscolor' and 'JSColor' name)\r\n\t\t\t//\r\n\r\n\t\t\tpub: function (targetElement: any, opts: any)\r\n\t\t\t{\r\n\r\n\t\t\t\tvar THIS = this;\r\n\r\n\t\t\t\tif (!opts)\r\n\t\t\t\t{\r\n\t\t\t\t\topts = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.channels = {\r\n\t\t\t\t\tr: 255, // red [0-255]\r\n\t\t\t\t\tg: 255, // green [0-255]\r\n\t\t\t\t\tb: 255, // blue [0-255]\r\n\t\t\t\t\th: 0, // hue [0-360]\r\n\t\t\t\t\ts: 0, // saturation [0-100]\r\n\t\t\t\t\tv: 100, // value (brightness) [0-100]\r\n\t\t\t\t\ta: 1.0, // alpha (opacity) [0.0 - 1.0]\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// General options\r\n\t\t\t\t//\r\n\t\t\t\tthis.format = 'auto'; // 'auto' | 'any' | 'hex' | 'hexa' | 'rgb' | 'rgba' - Format of the input/output value\r\n\t\t\t\tthis.value = undefined; // INITIAL color value in any supported format. To change it later, use method fromString(), fromHSVA(), fromRGBA() or channel()\r\n\t\t\t\tthis.alpha = undefined; // INITIAL alpha value. To change it later, call method channel('A', <value>)\r\n\t\t\t\tthis.random = false; // whether to randomize the initial color. Either true | false, or an array of ranges: [minV, maxV, minS, maxS, minH, maxH, minA, maxA]\r\n\t\t\t\tthis.onChange = undefined; // called when color changes. Value can be either a function or a string with JS code.\r\n\t\t\t\tthis.onInput = undefined; // called repeatedly as the color is being changed, e.g. while dragging a slider. Value can be either a function or a string with JS code.\r\n\t\t\t\tthis.valueElement = undefined; // element that will be used to display and input the color value\r\n\t\t\t\tthis.alphaElement = undefined; // element that will be used to display and input the alpha (opacity) value\r\n\t\t\t\tthis.previewElement = undefined; // element that will preview the picked color using CSS background\r\n\t\t\t\tthis.previewPosition = 'left'; // 'left' | 'right' - position of the color preview in previewElement\r\n\t\t\t\tthis.previewSize = 32; // (px) width of the color preview displayed in previewElement\r\n\t\t\t\tthis.previewPadding = 8; // (px) space between color preview and content of the previewElement\r\n\t\t\t\tthis.required = true; // whether the associated text input must always contain a color value. If false, the input can be left empty.\r\n\t\t\t\tthis.hash = true; // whether to prefix the HEX color code with # symbol (only applicable for HEX format)\r\n\t\t\t\tthis.uppercase = true; // whether to show the HEX color code in upper case (only applicable for HEX format)\r\n\t\t\t\tthis.forceStyle = true; // whether to overwrite CSS style of the previewElement using !important flag\r\n\r\n\t\t\t\t// Color Picker options\r\n\t\t\t\t//\r\n\t\t\t\tthis.width = 181; // width of the color spectrum (in px)\r\n\t\t\t\tthis.height = 101; // height of the color spectrum (in px)\r\n\t\t\t\tthis.mode = 'HSV'; // 'HSV' | 'HVS' | 'HS' | 'HV' - layout of the color picker controls\r\n\t\t\t\tthis.alphaChannel = 'auto'; // 'auto' | true | false - if alpha channel is enabled, the alpha slider will be visible. If 'auto', it will be determined according to color format\r\n\t\t\t\tthis.position = 'bottom'; // 'left' | 'right' | 'top' | 'bottom' - position relative to the target element\r\n\t\t\t\tthis.smartPosition = true; // automatically change picker position when there is not enough space for it\r\n\t\t\t\tthis.showOnClick = true; // whether to show the picker when user clicks its target element\r\n\t\t\t\tthis.hideOnLeave = true; // whether to automatically hide the picker when user leaves its target element (e.g. upon clicking the document)\r\n\t\t\t\tthis.palette = []; // colors to be displayed in the palette, specified as an array or a string of space separated color values (in any supported format)\r\n\t\t\t\tthis.paletteCols = 10; // number of columns in the palette\r\n\t\t\t\tthis.paletteSetsAlpha = 'auto'; // 'auto' | true | false - if true, palette colors that don't specify alpha will set alpha to 1.0\r\n\t\t\t\tthis.paletteHeight = 16; // maximum height (px) of a row in the palette\r\n\t\t\t\tthis.paletteSpacing = 4; // distance (px) between color samples in the palette\r\n\t\t\t\tthis.hideOnPaletteClick = false; // when set to true, clicking the palette will also hide the color picker\r\n\t\t\t\tthis.sliderSize = 16; // px\r\n\t\t\t\tthis.crossSize = 8; // px\r\n\t\t\t\tthis.closeButton = false; // whether to display the Close button\r\n\t\t\t\tthis.closeText = 'Close';\r\n\t\t\t\tthis.buttonColor = 'rgba(0,0,0,1)'; // CSS color\r\n\t\t\t\tthis.buttonHeight = 18; // px\r\n\t\t\t\tthis.padding = 12; // px\r\n\t\t\t\tthis.backgroundColor = 'rgba(255,255,255,1)'; // CSS color\r\n\t\t\t\tthis.borderWidth = 1; // px\r\n\t\t\t\tthis.borderColor = 'rgba(187,187,187,1)'; // CSS color\r\n\t\t\t\tthis.borderRadius = 8; // px\r\n\t\t\t\tthis.controlBorderWidth = 1; // px\r\n\t\t\t\tthis.controlBorderColor = 'rgba(187,187,187,1)'; // CSS color\r\n\t\t\t\tthis.shadow = true; // whether to display a shadow\r\n\t\t\t\tthis.shadowBlur = 15; // px\r\n\t\t\t\tthis.shadowColor = 'rgba(0,0,0,0.2)'; // CSS color\r\n\t\t\t\tthis.pointerColor = 'rgba(76,76,76,1)'; // CSS color\r\n\t\t\t\tthis.pointerBorderWidth = 1; // px\r\n\t\t\t\tthis.pointerBorderColor = 'rgba(255,255,255,1)'; // CSS color\r\n\t\t\t\tthis.pointerThickness = 2; // px\r\n\t\t\t\tthis.zIndex = 5000;\r\n\t\t\t\tthis.container = undefined; // where to append the color picker (BODY element by default)\r\n\r\n\t\t\t\t// Experimental\r\n\t\t\t\t//\r\n\t\t\t\tthis.minS = 0; // min allowed saturation (0 - 100)\r\n\t\t\t\tthis.maxS = 100; // max allowed saturation (0 - 100)\r\n\t\t\t\tthis.minV = 0; // min allowed value (brightness) (0 - 100)\r\n\t\t\t\tthis.maxV = 100; // max allowed value (brightness) (0 - 100)\r\n\t\t\t\tthis.minA = 0.0; // min allowed alpha (opacity) (0.0 - 1.0)\r\n\t\t\t\tthis.maxA = 1.0; // max allowed alpha (opacity) (0.0 - 1.0)\r\n\r\n\r\n\t\t\t\t// Getter: option(name)\r\n\t\t\t\t// Setter: option(name, value)\r\n\t\t\t\t//         option({name:value, ...})\r\n\t\t\t\t//\r\n\t\t\t\tthis.option = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!arguments.length)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthrow new Error('No option specified');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (arguments.length === 1 && typeof arguments[0] === 'string')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// getting a single option\r\n\t\t\t\t\t\ttry\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn getOption(arguments[0]);\r\n\t\t\t\t\t\t} catch (e)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t\t} else if (arguments.length >= 2 && typeof arguments[0] === 'string')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// setting a single option\r\n\t\t\t\t\t\ttry\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (!setOption(arguments[0], arguments[1]))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (e)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.redraw(); // immediately redraws the picker, if it's displayed\r\n\t\t\t\t\t\tthis.exposeColor(); // in case some preview-related or format-related option was changed\r\n\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t} else if (arguments.length === 1 && typeof arguments[0] === 'object')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// setting multiple options\r\n\t\t\t\t\t\tvar opts = arguments[0];\r\n\t\t\t\t\t\tvar success = true;\r\n\t\t\t\t\t\tfor (var opt in opts)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (opts.hasOwnProperty(opt))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttry\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tif (!setOption(opt, opts[opt]))\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tsuccess = false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} catch (e)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t\t\t\t\tsuccess = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.redraw(); // immediately redraws the picker, if it's displayed\r\n\t\t\t\t\t\tthis.exposeColor(); // in case some preview-related or format-related option was changed\r\n\t\t\t\t\t\treturn success;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthrow new Error('Invalid arguments');\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// Getter: channel(name)\r\n\t\t\t\t// Setter: channel(name, value)\r\n\t\t\t\t//\r\n\t\t\t\tthis.channel = function (name: any, value: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (typeof name !== 'string')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthrow new Error('Invalid value for channel name: ' + name);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (value === undefined)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// getting channel value\r\n\t\t\t\t\t\tif (!this.channels.hasOwnProperty(name.toLowerCase()))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tconsole.warn('Getting unknown channel: ' + name);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn this.channels[name.toLowerCase()];\r\n\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// setting channel value\r\n\t\t\t\t\t\tvar res = false;\r\n\t\t\t\t\t\tswitch (name.toLowerCase())\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcase 'r': res = this.fromRGBA(value, null, null, null); break;\r\n\t\t\t\t\t\t\tcase 'g': res = this.fromRGBA(null, value, null, null); break;\r\n\t\t\t\t\t\t\tcase 'b': res = this.fromRGBA(null, null, value, null); break;\r\n\t\t\t\t\t\t\tcase 'h': res = this.fromHSVA(value, null, null, null); break;\r\n\t\t\t\t\t\t\tcase 's': res = this.fromHSVA(null, value, null, null); break;\r\n\t\t\t\t\t\t\tcase 'v': res = this.fromHSVA(null, null, value, null); break;\r\n\t\t\t\t\t\t\tcase 'a': res = this.fromHSVA(null, null, null, value); break;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tconsole.warn('Setting unknown channel: ' + name);\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (res)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.redraw(); // immediately redraws the picker, if it's displayed\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// Triggers given input event(s) by:\r\n\t\t\t\t// - executing on<Event> callback specified as picker's option\r\n\t\t\t\t// - triggering standard DOM event listeners attached to the value element\r\n\t\t\t\t//\r\n\t\t\t\t// It is possible to specify multiple events separated with a space.\r\n\t\t\t\t//\r\n\t\t\t\tthis.trigger = function (eventNames: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar evs = jsc.strList(eventNames);\r\n\t\t\t\t\tfor (var i = 0; i < evs.length; i += 1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar ev = evs[i].toLowerCase();\r\n\r\n\t\t\t\t\t\t// trigger a callback\r\n\t\t\t\t\t\tvar callbackProp = null;\r\n\t\t\t\t\t\tswitch (ev)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcase 'input': callbackProp = 'onInput'; break;\r\n\t\t\t\t\t\t\tcase 'change': callbackProp = 'onChange'; break;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (callbackProp)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tjsc.triggerCallback(this, callbackProp);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// trigger standard DOM event listeners on the value element\r\n\t\t\t\t\t\tjsc.triggerInputEvent(this.valueElement, ev, true, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\t// h: 0-360\r\n\t\t\t\t// s: 0-100\r\n\t\t\t\t// v: 0-100\r\n\t\t\t\t// a: 0.0-1.0\r\n\t\t\t\t//\r\n\t\t\t\tthis.fromHSVA = function (h: any, s: any, v: any, a: any, flags: any)\r\n\t\t\t\t{ // null = don't change\r\n\t\t\t\t\tif (h === undefined) { h = null; }\r\n\t\t\t\t\tif (s === undefined) { s = null; }\r\n\t\t\t\t\tif (v === undefined) { v = null; }\r\n\t\t\t\t\tif (a === undefined) { a = null; }\r\n\r\n\t\t\t\t\tif (h !== null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (isNaN(h)) { return false; }\r\n\t\t\t\t\t\tthis.channels.h = Math.max(0, Math.min(360, h));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (s !== null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (isNaN(s)) { return false; }\r\n\t\t\t\t\t\tthis.channels.s = Math.max(0, Math.min(100, this.maxS, s), this.minS);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (v !== null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (isNaN(v)) { return false; }\r\n\t\t\t\t\t\tthis.channels.v = Math.max(0, Math.min(100, this.maxV, v), this.minV);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (a !== null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (isNaN(a)) { return false; }\r\n\t\t\t\t\t\tthis.channels.a = this.hasAlphaChannel() ?\r\n\t\t\t\t\t\t\tMath.max(0, Math.min(1, this.maxA, a), this.minA) :\r\n\t\t\t\t\t\t\t1.0; // if alpha channel is disabled, the color should stay 100% opaque\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar rgb = jsc.HSV_RGB(\r\n\t\t\t\t\t\tthis.channels.h,\r\n\t\t\t\t\t\tthis.channels.s,\r\n\t\t\t\t\t\tthis.channels.v\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.channels.r = rgb[0];\r\n\t\t\t\t\tthis.channels.g = rgb[1];\r\n\t\t\t\t\tthis.channels.b = rgb[2];\r\n\r\n\t\t\t\t\tthis.exposeColor(flags);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\t// r: 0-255\r\n\t\t\t\t// g: 0-255\r\n\t\t\t\t// b: 0-255\r\n\t\t\t\t// a: 0.0-1.0\r\n\t\t\t\t//\r\n\t\t\t\tthis.fromRGBA = function (r: any, g: any, b: any, a: any, flags: any)\r\n\t\t\t\t{ // null = don't change\r\n\t\t\t\t\tif (r === undefined) { r = null; }\r\n\t\t\t\t\tif (g === undefined) { g = null; }\r\n\t\t\t\t\tif (b === undefined) { b = null; }\r\n\t\t\t\t\tif (a === undefined) { a = null; }\r\n\r\n\t\t\t\t\tif (r !== null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (isNaN(r)) { return false; }\r\n\t\t\t\t\t\tr = Math.max(0, Math.min(255, r));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (g !== null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (isNaN(g)) { return false; }\r\n\t\t\t\t\t\tg = Math.max(0, Math.min(255, g));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (b !== null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (isNaN(b)) { return false; }\r\n\t\t\t\t\t\tb = Math.max(0, Math.min(255, b));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (a !== null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (isNaN(a)) { return false; }\r\n\t\t\t\t\t\tthis.channels.a = this.hasAlphaChannel() ?\r\n\t\t\t\t\t\t\tMath.max(0, Math.min(1, this.maxA, a), this.minA) :\r\n\t\t\t\t\t\t\t1.0; // if alpha channel is disabled, the color should stay 100% opaque\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar hsv = jsc.RGB_HSV(\r\n\t\t\t\t\t\tr === null ? this.channels.r : r,\r\n\t\t\t\t\t\tg === null ? this.channels.g : g,\r\n\t\t\t\t\t\tb === null ? this.channels.b : b\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (hsv[0] !== null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.channels.h = Math.max(0, Math.min(360, hsv[0]));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (hsv[2] !== 0)\r\n\t\t\t\t\t{ // fully black color stays black through entire saturation range, so let's not change saturation\r\n\t\t\t\t\t\tthis.channels.s = Math.max(0, this.minS, Math.min(100, this.maxS, hsv[1]));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.channels.v = Math.max(0, this.minV, Math.min(100, this.maxV, hsv[2]));\r\n\r\n\t\t\t\t\t// update RGB according to final HSV, as some values might be trimmed\r\n\t\t\t\t\tvar rgb = jsc.HSV_RGB(this.channels.h, this.channels.s, this.channels.v);\r\n\t\t\t\t\tthis.channels.r = rgb[0];\r\n\t\t\t\t\tthis.channels.g = rgb[1];\r\n\t\t\t\t\tthis.channels.b = rgb[2];\r\n\r\n\t\t\t\t\tthis.exposeColor(flags);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\t// DEPRECATED. Use .fromHSVA() instead\r\n\t\t\t\t//\r\n\t\t\t\tthis.fromHSV = function (h: any, s: any, v: any, flags: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tconsole.warn('fromHSV() method is DEPRECATED. Using fromHSVA() instead.' + jsc.docsRef);\r\n\t\t\t\t\treturn this.fromHSVA(h, s, v, null, flags);\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\t// DEPRECATED. Use .fromRGBA() instead\r\n\t\t\t\t//\r\n\t\t\t\tthis.fromRGB = function (r: any, g: any, b: any, flags: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tconsole.warn('fromRGB() method is DEPRECATED. Using fromRGBA() instead.' + jsc.docsRef);\r\n\t\t\t\t\treturn this.fromRGBA(r, g, b, null, flags);\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.fromString = function (str: any, flags: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!this.required && str.trim() === '')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// setting empty string to an optional color input\r\n\t\t\t\t\t\tthis.setPreviewElementBg(null);\r\n\t\t\t\t\t\tthis.setValueElementValue('');\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar color = jsc.parseColorString(str);\r\n\t\t\t\t\tif (!color)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn false; // could not parse\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.format.toLowerCase() === 'any')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis._setFormat(color.format); // adapt format\r\n\t\t\t\t\t\tif (!jsc.isAlphaFormat(this.getFormat()))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcolor.rgba[3] = 1.0; // when switching to a format that doesn't support alpha, set full opacity\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.fromRGBA(\r\n\t\t\t\t\t\tcolor.rgba[0],\r\n\t\t\t\t\t\tcolor.rgba[1],\r\n\t\t\t\t\t\tcolor.rgba[2],\r\n\t\t\t\t\t\tcolor.rgba[3],\r\n\t\t\t\t\t\tflags\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.randomize = function (minV: any, maxV: any, minS: any, maxS: any, minH: any, maxH: any, minA: any, maxA: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (minV === undefined) { minV = 0; }\r\n\t\t\t\t\tif (maxV === undefined) { maxV = 100; }\r\n\t\t\t\t\tif (minS === undefined) { minS = 0; }\r\n\t\t\t\t\tif (maxS === undefined) { maxS = 100; }\r\n\t\t\t\t\tif (minH === undefined) { minH = 0; }\r\n\t\t\t\t\tif (maxH === undefined) { maxH = 359; }\r\n\t\t\t\t\tif (minA === undefined) { minA = 1; }\r\n\t\t\t\t\tif (maxA === undefined) { maxA = 1; }\r\n\r\n\t\t\t\t\tthis.fromHSVA(\r\n\t\t\t\t\t\tminH + Math.floor(Math.random() * (maxH - minH + 1)),\r\n\t\t\t\t\t\tminS + Math.floor(Math.random() * (maxS - minS + 1)),\r\n\t\t\t\t\t\tminV + Math.floor(Math.random() * (maxV - minV + 1)),\r\n\t\t\t\t\t\t((100 * minA) + Math.floor(Math.random() * (100 * (maxA - minA) + 1))) / 100\r\n\t\t\t\t\t);\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.toString = function (format: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (format === undefined)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tformat = this.getFormat(); // format not specified -> use the current format\r\n\t\t\t\t\t}\r\n\t\t\t\t\tswitch (format.toLowerCase())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcase 'hex': return this.toHEXString(); break;\r\n\t\t\t\t\t\tcase 'hexa': return this.toHEXAString(); break;\r\n\t\t\t\t\t\tcase 'rgb': return this.toRGBString(); break;\r\n\t\t\t\t\t\tcase 'rgba': return this.toRGBAString(); break;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.toHEXString = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\treturn jsc.hexColor(\r\n\t\t\t\t\t\tthis.channels.r,\r\n\t\t\t\t\t\tthis.channels.g,\r\n\t\t\t\t\t\tthis.channels.b\r\n\t\t\t\t\t);\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.toHEXAString = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\treturn jsc.hexaColor(\r\n\t\t\t\t\t\tthis.channels.r,\r\n\t\t\t\t\t\tthis.channels.g,\r\n\t\t\t\t\t\tthis.channels.b,\r\n\t\t\t\t\t\tthis.channels.a\r\n\t\t\t\t\t);\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.toRGBString = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\treturn jsc.rgbColor(\r\n\t\t\t\t\t\tthis.channels.r,\r\n\t\t\t\t\t\tthis.channels.g,\r\n\t\t\t\t\t\tthis.channels.b\r\n\t\t\t\t\t);\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.toRGBAString = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\treturn jsc.rgbaColor(\r\n\t\t\t\t\t\tthis.channels.r,\r\n\t\t\t\t\t\tthis.channels.g,\r\n\t\t\t\t\t\tthis.channels.b,\r\n\t\t\t\t\t\tthis.channels.a\r\n\t\t\t\t\t);\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.toGrayscale = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t0.213 * this.channels.r +\r\n\t\t\t\t\t\t0.715 * this.channels.g +\r\n\t\t\t\t\t\t0.072 * this.channels.b\r\n\t\t\t\t\t);\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.toCanvas = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\treturn jsc.genColorPreviewCanvas(this.toRGBAString()).canvas;\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.toDataURL = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\treturn this.toCanvas().toDataURL();\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.toBackground = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\treturn jsc.pub.background(this.toRGBAString());\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.isLight = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\treturn this.toGrayscale() > 255 / 2;\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.hide = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\tif (isPickerOwner())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdetachPicker();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.show = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\tdrawPicker();\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.redraw = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\tif (isPickerOwner())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdrawPicker();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.getFormat = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\treturn this._currentFormat;\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis._setFormat = function (format: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._currentFormat = format.toLowerCase();\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.hasAlphaChannel = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\tif (this.alphaChannel === 'auto')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tthis.format.toLowerCase() === 'any' || // format can change on the fly (e.g. from hex to rgba), so let's consider the alpha channel enabled\r\n\t\t\t\t\t\t\tjsc.isAlphaFormat(this.getFormat()) || // the current format supports alpha channel\r\n\t\t\t\t\t\t\tthis.alpha !== undefined || // initial alpha value is set, so we're working with alpha channel\r\n\t\t\t\t\t\t\tthis.alphaElement !== undefined // the alpha value is redirected, so we're working with alpha channel\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn this.alphaChannel; // the alpha channel is explicitly set\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.processValueInput = function (str: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!this.fromString(str))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// could not parse the color value - let's just expose the current color\r\n\t\t\t\t\t\tthis.exposeColor();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.processAlphaInput = function (str: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!this.fromHSVA(null, null, null, parseFloat(str)))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// could not parse the alpha value - let's just expose the current color\r\n\t\t\t\t\t\tthis.exposeColor();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.exposeColor = function (flags: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar colorStr = this.toString();\r\n\t\t\t\t\tvar fmt = this.getFormat();\r\n\r\n\t\t\t\t\t// reflect current color in data- attribute\r\n\t\t\t\t\tjsc.setDataAttr(this.targetElement, 'current-color', colorStr);\r\n\r\n\t\t\t\t\tif (!(flags & jsc.flags.leaveValue) && this.valueElement)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (fmt === 'hex' || fmt === 'hexa')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (!this.uppercase) { colorStr = colorStr.toLowerCase(); }\r\n\t\t\t\t\t\t\tif (!this.hash) { colorStr = colorStr.replace(/^#/, ''); }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.setValueElementValue(colorStr);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!(flags & jsc.flags.leaveAlpha) && this.alphaElement)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar alphaVal = Math.round(this.channels.a * 100) / 100;\r\n\t\t\t\t\t\tthis.setAlphaElementValue(alphaVal);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!(flags & jsc.flags.leavePreview) && this.previewElement)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar previewPos = null; // 'left' | 'right' (null -> fill the entire element)\r\n\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tjsc.isTextInput(this.previewElement) || // text input\r\n\t\t\t\t\t\t\t(jsc.isButton(this.previewElement) && !jsc.isButtonEmpty(this.previewElement)) // button with text\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tpreviewPos = this.previewPosition;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.setPreviewElementBg(this.toRGBAString());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (isPickerOwner())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tredrawPad();\r\n\t\t\t\t\t\tredrawSld();\r\n\t\t\t\t\t\tredrawASld();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.setPreviewElementBg = function (color: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!this.previewElement)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar position = null; // color preview position:  null | 'left' | 'right'\r\n\t\t\t\t\tvar width = null; // color preview width:  px | null = fill the entire element\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tjsc.isTextInput(this.previewElement) || // text input\r\n\t\t\t\t\t\t(jsc.isButton(this.previewElement) && !jsc.isButtonEmpty(this.previewElement)) // button with text\r\n\t\t\t\t\t)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tposition = this.previewPosition;\r\n\t\t\t\t\t\twidth = this.previewSize;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar backgrounds: any[] = [];\r\n\r\n\t\t\t\t\tif (!color)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// there is no color preview to display -> let's remove any previous background image\r\n\t\t\t\t\t\tbackgrounds.push({\r\n\t\t\t\t\t\t\timage: 'none',\r\n\t\t\t\t\t\t\tposition: 'left top',\r\n\t\t\t\t\t\t\tsize: 'auto',\r\n\t\t\t\t\t\t\trepeat: 'no-repeat',\r\n\t\t\t\t\t\t\torigin: 'padding-box',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// CSS gradient for background color preview\r\n\t\t\t\t\t\tbackgrounds.push({\r\n\t\t\t\t\t\t\timage: jsc.genColorPreviewGradient(\r\n\t\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\t\tposition,\r\n\t\t\t\t\t\t\t\twidth ? width - jsc.pub.previewSeparator.length : null\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tposition: 'left top',\r\n\t\t\t\t\t\t\tsize: 'auto',\r\n\t\t\t\t\t\t\trepeat: position ? 'repeat-y' : 'repeat',\r\n\t\t\t\t\t\t\torigin: 'padding-box',\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// data URL of generated PNG image with a gray transparency chessboard\r\n\t\t\t\t\t\tvar preview = jsc.genColorPreviewCanvas(\r\n\t\t\t\t\t\t\t'rgba(0,0,0,0)',\r\n\t\t\t\t\t\t\tposition ? ({ 'left': 'right', 'right': 'left' } as any)[position] : null,\r\n\t\t\t\t\t\t\twidth,\r\n\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbackgrounds.push({\r\n\t\t\t\t\t\t\timage: 'url(\\'' + preview.canvas.toDataURL() + '\\')',\r\n\t\t\t\t\t\t\tposition: (position || 'left') + ' top',\r\n\t\t\t\t\t\t\tsize: preview.width + 'px ' + preview.height + 'px',\r\n\t\t\t\t\t\t\trepeat: position ? 'repeat-y' : 'repeat',\r\n\t\t\t\t\t\t\torigin: 'padding-box',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar bg = {\r\n\t\t\t\t\t\timage: [],\r\n\t\t\t\t\t\tposition: [],\r\n\t\t\t\t\t\tsize: [],\r\n\t\t\t\t\t\trepeat: [],\r\n\t\t\t\t\t\torigin: [],\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfor (var i = 0; i < backgrounds.length; i += 1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet background: any = backgrounds[i];\r\n\t\t\t\t\t\t(bg.image as any).push(background.image);\r\n\t\t\t\t\t\t(bg.position as any).push(background.position);\r\n\t\t\t\t\t\t(bg.size as any).push(background.size);\r\n\t\t\t\t\t\t(bg.repeat as any).push(background.repeat);\r\n\t\t\t\t\t\t(bg.origin as any).push(background.origin);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// set previewElement's background-images\r\n\t\t\t\t\tvar sty = {\r\n\t\t\t\t\t\t'background-image': bg.image.join(', '),\r\n\t\t\t\t\t\t'background-position': bg.position.join(', '),\r\n\t\t\t\t\t\t'background-size': bg.size.join(', '),\r\n\t\t\t\t\t\t'background-repeat': bg.repeat.join(', '),\r\n\t\t\t\t\t\t'background-origin': bg.origin.join(', '),\r\n\t\t\t\t\t};\r\n\t\t\t\t\tjsc.setStyle(this.previewElement, sty, this.forceStyle);\r\n\r\n\r\n\t\t\t\t\t// set/restore previewElement's padding\r\n\t\t\t\t\tvar padding: any = {\r\n\t\t\t\t\t\tleft: null,\r\n\t\t\t\t\t\tright: null,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (position)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpadding[position] = (this.previewSize + this.previewPadding) + 'px';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar sty2: any = {\r\n\t\t\t\t\t\t'padding-left': padding.left,\r\n\t\t\t\t\t\t'padding-right': padding.right,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tjsc.setStyle(this.previewElement, sty2, this.forceStyle, true);\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.setValueElementValue = function (str: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (this.valueElement)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (jsc.nodeName(this.valueElement) === 'input')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.valueElement.value = str;\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.valueElement.innerHTML = str;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.setAlphaElementValue = function (str: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (this.alphaElement)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (jsc.nodeName(this.alphaElement) === 'input')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.alphaElement.value = str;\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.alphaElement.innerHTML = str;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis._processParentElementsInDOM = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\tif (this._parentElementsProcessed) { return; }\r\n\t\t\t\t\tthis._parentElementsProcessed = true;\r\n\r\n\t\t\t\t\tvar elm = this.targetElement;\r\n\t\t\t\t\tdo\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// If the target element or one of its parent nodes has fixed position,\r\n\t\t\t\t\t\t// then use fixed positioning instead\r\n\t\t\t\t\t\tvar compStyle = jsc.getCompStyle(elm);\r\n\t\t\t\t\t\tif (compStyle.position && compStyle.position.toLowerCase() === 'fixed')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.fixed = true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (elm !== this.targetElement)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// Ensure to attach onParentScroll only once to each parent element\r\n\t\t\t\t\t\t\t// (multiple targetElements can share the same parent nodes)\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t// Note: It's not just offsetParents that can be scrollable,\r\n\t\t\t\t\t\t\t// that's why we loop through all parent nodes\r\n\t\t\t\t\t\t\tif (!jsc.getData(elm, 'hasScrollListener'))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\telm.addEventListener('scroll', jsc.onParentScroll, false);\r\n\t\t\t\t\t\t\t\tjsc.setData(elm, 'hasScrollListener', true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} while ((elm = elm.parentNode) && jsc.nodeName(elm) !== 'body');\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.tryHide = function ()\r\n\t\t\t\t{\r\n\t\t\t\t\tif (this.hideOnLeave)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tthis.set__palette = function (val: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.palette = val;\r\n\t\t\t\t\tthis._palette = jsc.parsePaletteValue(val);\r\n\t\t\t\t\tthis._paletteHasTransparency = jsc.containsTranparentColor(this._palette);\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tfunction setOption(option?: any, value?: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (typeof option !== 'string')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthrow new Error('Invalid value for option name: ' + option);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// enum option\r\n\t\t\t\t\tif (jsc.enumOpts.hasOwnProperty(option))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (typeof value === 'string')\r\n\t\t\t\t\t\t{ // enum string values are case insensitive\r\n\t\t\t\t\t\t\tvalue = value.toLowerCase();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (jsc.enumOpts[option].indexOf(value) === -1)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthrow new Error('Option \\'' + option + '\\' has invalid value: ' + value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// deprecated option\r\n\t\t\t\t\tif (jsc.deprecatedOpts.hasOwnProperty(option))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar oldOpt = option;\r\n\t\t\t\t\t\tvar newOpt = jsc.deprecatedOpts[option];\r\n\t\t\t\t\t\tif (newOpt)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// if we have a new name for this option, let's log a warning and use the new name\r\n\t\t\t\t\t\t\tconsole.warn('Option \\'%s\\' is DEPRECATED, using \\'%s\\' instead.' + jsc.docsRef, oldOpt, newOpt);\r\n\t\t\t\t\t\t\toption = newOpt;\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// new name not available for the option\r\n\t\t\t\t\t\t\tthrow new Error('Option \\'' + option + '\\' is DEPRECATED');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar setter = 'set__' + option;\r\n\r\n\t\t\t\t\tif (typeof THIS[setter] === 'function')\r\n\t\t\t\t\t{ // a setter exists for this option\r\n\t\t\t\t\t\tTHIS[setter](value);\r\n\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t} else if (option in THIS)\r\n\t\t\t\t\t{ // option exists as a property\r\n\t\t\t\t\t\tTHIS[option] = value;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthrow new Error('Unrecognized configuration option: ' + option);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfunction getOption(option?: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (typeof option !== 'string')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthrow new Error('Invalid value for option name: ' + option);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// deprecated option\r\n\t\t\t\t\tif (jsc.deprecatedOpts.hasOwnProperty(option))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar oldOpt = option;\r\n\t\t\t\t\t\tvar newOpt = jsc.deprecatedOpts[option];\r\n\t\t\t\t\t\tif (newOpt)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// if we have a new name for this option, let's log a warning and use the new name\r\n\t\t\t\t\t\t\tconsole.warn('Option \\'%s\\' is DEPRECATED, using \\'%s\\' instead.' + jsc.docsRef, oldOpt, newOpt);\r\n\t\t\t\t\t\t\toption = newOpt;\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// new name not available for the option\r\n\t\t\t\t\t\t\tthrow new Error('Option \\'' + option + '\\' is DEPRECATED');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar getter = 'get__' + option;\r\n\r\n\t\t\t\t\t// if (typeof THIS[getter] === 'function')\r\n\t\t\t\t\t// { // a getter exists for this option\r\n\t\t\t\t\t// \treturn THIS[getter](value);\r\n\r\n\t\t\t\t\t// } else if (option in THIS)\r\n\t\t\t\t\t// { // option exists as a property\r\n\t\t\t\t\t// \treturn THIS[option];\r\n\t\t\t\t\t// }\r\n\r\n\t\t\t\t\tthrow new Error('Unrecognized configuration option: ' + option);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfunction detachPicker()\r\n\t\t\t\t{\r\n\t\t\t\t\tjsc.removeClass(THIS.targetElement, jsc.pub.activeClassName);\r\n\t\t\t\t\tjsc.picker.wrap.parentNode.removeChild(jsc.picker.wrap);\r\n\t\t\t\t\tdelete jsc.picker.owner;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfunction drawPicker()\r\n\t\t\t\t{\r\n\r\n\t\t\t\t\t// At this point, when drawing the picker, we know what the parent elements are\r\n\t\t\t\t\t// and we can do all related DOM operations, such as registering events on them\r\n\t\t\t\t\t// or checking their positioning\r\n\t\t\t\t\tTHIS._processParentElementsInDOM();\r\n\r\n\t\t\t\t\tif (!jsc.picker)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tjsc.picker = {\r\n\t\t\t\t\t\t\towner: null, // owner picker instance\r\n\t\t\t\t\t\t\twrap: jsc.createEl('div'),\r\n\t\t\t\t\t\t\tbox: jsc.createEl('div'),\r\n\t\t\t\t\t\t\tboxS: jsc.createEl('div'), // shadow area\r\n\t\t\t\t\t\t\tboxB: jsc.createEl('div'), // border\r\n\t\t\t\t\t\t\tpad: jsc.createEl('div'),\r\n\t\t\t\t\t\t\tpadB: jsc.createEl('div'), // border\r\n\t\t\t\t\t\t\tpadM: jsc.createEl('div'), // mouse/touch area\r\n\t\t\t\t\t\t\tpadCanvas: jsc.createPadCanvas(),\r\n\t\t\t\t\t\t\tcross: jsc.createEl('div'),\r\n\t\t\t\t\t\t\tcrossBY: jsc.createEl('div'), // border Y\r\n\t\t\t\t\t\t\tcrossBX: jsc.createEl('div'), // border X\r\n\t\t\t\t\t\t\tcrossLY: jsc.createEl('div'), // line Y\r\n\t\t\t\t\t\t\tcrossLX: jsc.createEl('div'), // line X\r\n\t\t\t\t\t\t\tsld: jsc.createEl('div'), // slider\r\n\t\t\t\t\t\t\tsldB: jsc.createEl('div'), // border\r\n\t\t\t\t\t\t\tsldM: jsc.createEl('div'), // mouse/touch area\r\n\t\t\t\t\t\t\tsldGrad: jsc.createSliderGradient(),\r\n\t\t\t\t\t\t\tsldPtrS: jsc.createEl('div'), // slider pointer spacer\r\n\t\t\t\t\t\t\tsldPtrIB: jsc.createEl('div'), // slider pointer inner border\r\n\t\t\t\t\t\t\tsldPtrMB: jsc.createEl('div'), // slider pointer middle border\r\n\t\t\t\t\t\t\tsldPtrOB: jsc.createEl('div'), // slider pointer outer border\r\n\t\t\t\t\t\t\tasld: jsc.createEl('div'), // alpha slider\r\n\t\t\t\t\t\t\tasldB: jsc.createEl('div'), // border\r\n\t\t\t\t\t\t\tasldM: jsc.createEl('div'), // mouse/touch area\r\n\t\t\t\t\t\t\tasldGrad: jsc.createASliderGradient(),\r\n\t\t\t\t\t\t\tasldPtrS: jsc.createEl('div'), // slider pointer spacer\r\n\t\t\t\t\t\t\tasldPtrIB: jsc.createEl('div'), // slider pointer inner border\r\n\t\t\t\t\t\t\tasldPtrMB: jsc.createEl('div'), // slider pointer middle border\r\n\t\t\t\t\t\t\tasldPtrOB: jsc.createEl('div'), // slider pointer outer border\r\n\t\t\t\t\t\t\tpal: jsc.createEl('div'), // palette\r\n\t\t\t\t\t\t\tbtn: jsc.createEl('div'),\r\n\t\t\t\t\t\t\tbtnT: jsc.createEl('span'), // text\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tjsc.picker.pad.appendChild(jsc.picker.padCanvas.elm);\r\n\t\t\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.pad);\r\n\t\t\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBY);\r\n\t\t\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBX);\r\n\t\t\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLY);\r\n\t\t\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLX);\r\n\t\t\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.cross);\r\n\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padB);\r\n\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padM);\r\n\r\n\t\t\t\t\t\tjsc.picker.sld.appendChild(jsc.picker.sldGrad.elm);\r\n\t\t\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sld);\r\n\t\t\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sldPtrOB);\r\n\t\t\t\t\t\tjsc.picker.sldPtrOB.appendChild(jsc.picker.sldPtrMB);\r\n\t\t\t\t\t\tjsc.picker.sldPtrMB.appendChild(jsc.picker.sldPtrIB);\r\n\t\t\t\t\t\tjsc.picker.sldPtrIB.appendChild(jsc.picker.sldPtrS);\r\n\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldB);\r\n\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldM);\r\n\r\n\t\t\t\t\t\tjsc.picker.asld.appendChild(jsc.picker.asldGrad.elm);\r\n\t\t\t\t\t\tjsc.picker.asldB.appendChild(jsc.picker.asld);\r\n\t\t\t\t\t\tjsc.picker.asldB.appendChild(jsc.picker.asldPtrOB);\r\n\t\t\t\t\t\tjsc.picker.asldPtrOB.appendChild(jsc.picker.asldPtrMB);\r\n\t\t\t\t\t\tjsc.picker.asldPtrMB.appendChild(jsc.picker.asldPtrIB);\r\n\t\t\t\t\t\tjsc.picker.asldPtrIB.appendChild(jsc.picker.asldPtrS);\r\n\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.asldB);\r\n\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.asldM);\r\n\r\n\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.pal);\r\n\r\n\t\t\t\t\t\tjsc.picker.btn.appendChild(jsc.picker.btnT);\r\n\t\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.btn);\r\n\r\n\t\t\t\t\t\tjsc.picker.boxB.appendChild(jsc.picker.box);\r\n\t\t\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxS);\r\n\t\t\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxB);\r\n\r\n\t\t\t\t\t\tjsc.picker.wrap.addEventListener('touchstart', jsc.onPickerTouchStart,\r\n\t\t\t\t\t\t\tjsc.isPassiveEventSupported ? { passive: false } : false);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar p = jsc.picker;\r\n\r\n\t\t\t\t\tvar displaySlider = !!jsc.getSliderChannel(THIS);\r\n\t\t\t\t\tvar displayAlphaSlider = THIS.hasAlphaChannel();\r\n\t\t\t\t\tvar pickerDims = jsc.getPickerDims(THIS);\r\n\t\t\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\r\n\t\t\t\t\tvar controlPadding = jsc.getControlPadding(THIS);\r\n\t\t\t\t\tvar borderRadius = Math.min(\r\n\t\t\t\t\t\tTHIS.borderRadius,\r\n\t\t\t\t\t\tMath.round(THIS.padding * Math.PI)); // px\r\n\t\t\t\t\tvar padCursor = 'crosshair';\r\n\r\n\t\t\t\t\t// wrap\r\n\t\t\t\t\tp.wrap.className = 'jscolor-picker-wrap';\r\n\t\t\t\t\tp.wrap.style.clear = 'both';\r\n\t\t\t\t\tp.wrap.style.width = pickerDims.borderW + 'px';\r\n\t\t\t\t\tp.wrap.style.height = pickerDims.borderH + 'px';\r\n\t\t\t\t\tp.wrap.style.zIndex = THIS.zIndex;\r\n\r\n\t\t\t\t\t// picker\r\n\t\t\t\t\tp.box.className = 'jscolor-picker';\r\n\t\t\t\t\tp.box.style.width = pickerDims.paddedW + 'px';\r\n\t\t\t\t\tp.box.style.height = pickerDims.paddedH + 'px';\r\n\t\t\t\t\tp.box.style.position = 'relative';\r\n\r\n\t\t\t\t\t// picker shadow\r\n\t\t\t\t\tp.boxS.className = 'jscolor-picker-shadow';\r\n\t\t\t\t\tp.boxS.style.position = 'absolute';\r\n\t\t\t\t\tp.boxS.style.left = '0';\r\n\t\t\t\t\tp.boxS.style.top = '0';\r\n\t\t\t\t\tp.boxS.style.width = '100%';\r\n\t\t\t\t\tp.boxS.style.height = '100%';\r\n\t\t\t\t\tjsc.setBorderRadius(p.boxS, borderRadius + 'px');\r\n\r\n\t\t\t\t\t// picker border\r\n\t\t\t\t\tp.boxB.className = 'jscolor-picker-border';\r\n\t\t\t\t\tp.boxB.style.position = 'relative';\r\n\t\t\t\t\tp.boxB.style.border = THIS.borderWidth + 'px solid';\r\n\t\t\t\t\tp.boxB.style.borderColor = THIS.borderColor;\r\n\t\t\t\t\tp.boxB.style.background = THIS.backgroundColor;\r\n\t\t\t\t\tjsc.setBorderRadius(p.boxB, borderRadius + 'px');\r\n\r\n\t\t\t\t\t// IE hack:\r\n\t\t\t\t\t// If the element is transparent, IE will trigger the event on the elements under it,\r\n\t\t\t\t\t// e.g. on Canvas or on elements with border\r\n\t\t\t\t\tp.padM.style.background = 'rgba(255,0,0,.2)';\r\n\t\t\t\t\tp.sldM.style.background = 'rgba(0,255,0,.2)';\r\n\t\t\t\t\tp.asldM.style.background = 'rgba(0,0,255,.2)';\r\n\r\n\t\t\t\t\tp.padM.style.opacity =\r\n\t\t\t\t\t\tp.sldM.style.opacity =\r\n\t\t\t\t\t\tp.asldM.style.opacity =\r\n\t\t\t\t\t\t'0';\r\n\r\n\t\t\t\t\t// pad\r\n\t\t\t\t\tp.pad.style.position = 'relative';\r\n\t\t\t\t\tp.pad.style.width = THIS.width + 'px';\r\n\t\t\t\t\tp.pad.style.height = THIS.height + 'px';\r\n\r\n\t\t\t\t\t// pad - color spectrum (HSV and HVS)\r\n\t\t\t\t\tp.padCanvas.draw(THIS.width, THIS.height, jsc.getPadYChannel(THIS));\r\n\r\n\t\t\t\t\t// pad border\r\n\t\t\t\t\tp.padB.style.position = 'absolute';\r\n\t\t\t\t\tp.padB.style.left = THIS.padding + 'px';\r\n\t\t\t\t\tp.padB.style.top = THIS.padding + 'px';\r\n\t\t\t\t\tp.padB.style.border = THIS.controlBorderWidth + 'px solid';\r\n\t\t\t\t\tp.padB.style.borderColor = THIS.controlBorderColor;\r\n\r\n\t\t\t\t\t// pad mouse area\r\n\t\t\t\t\tp.padM.style.position = 'absolute';\r\n\t\t\t\t\tp.padM.style.left = 0 + 'px';\r\n\t\t\t\t\tp.padM.style.top = 0 + 'px';\r\n\t\t\t\t\tp.padM.style.width = (THIS.padding + 2 * THIS.controlBorderWidth + THIS.width + controlPadding) + 'px';\r\n\t\t\t\t\tp.padM.style.height = (2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height) + 'px';\r\n\t\t\t\t\tp.padM.style.cursor = padCursor;\r\n\t\t\t\t\tjsc.setData(p.padM, {\r\n\t\t\t\t\t\tinstance: THIS,\r\n\t\t\t\t\t\tcontrol: 'pad',\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\t// pad cross\r\n\t\t\t\t\tp.cross.style.position = 'absolute';\r\n\t\t\t\t\tp.cross.style.left =\r\n\t\t\t\t\t\tp.cross.style.top =\r\n\t\t\t\t\t\t'0';\r\n\t\t\t\t\tp.cross.style.width =\r\n\t\t\t\t\t\tp.cross.style.height =\r\n\t\t\t\t\t\tcrossOuterSize + 'px';\r\n\r\n\t\t\t\t\t// pad cross border Y and X\r\n\t\t\t\t\tp.crossBY.style.position =\r\n\t\t\t\t\t\tp.crossBX.style.position =\r\n\t\t\t\t\t\t'absolute';\r\n\t\t\t\t\tp.crossBY.style.background =\r\n\t\t\t\t\t\tp.crossBX.style.background =\r\n\t\t\t\t\t\tTHIS.pointerBorderColor;\r\n\t\t\t\t\tp.crossBY.style.width =\r\n\t\t\t\t\t\tp.crossBX.style.height =\r\n\t\t\t\t\t\t(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\r\n\t\t\t\t\tp.crossBY.style.height =\r\n\t\t\t\t\t\tp.crossBX.style.width =\r\n\t\t\t\t\t\tcrossOuterSize + 'px';\r\n\t\t\t\t\tp.crossBY.style.left =\r\n\t\t\t\t\t\tp.crossBX.style.top =\r\n\t\t\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2) - THIS.pointerBorderWidth) + 'px';\r\n\t\t\t\t\tp.crossBY.style.top =\r\n\t\t\t\t\t\tp.crossBX.style.left =\r\n\t\t\t\t\t\t'0';\r\n\r\n\t\t\t\t\t// pad cross line Y and X\r\n\t\t\t\t\tp.crossLY.style.position =\r\n\t\t\t\t\t\tp.crossLX.style.position =\r\n\t\t\t\t\t\t'absolute';\r\n\t\t\t\t\tp.crossLY.style.background =\r\n\t\t\t\t\t\tp.crossLX.style.background =\r\n\t\t\t\t\t\tTHIS.pointerColor;\r\n\t\t\t\t\tp.crossLY.style.height =\r\n\t\t\t\t\t\tp.crossLX.style.width =\r\n\t\t\t\t\t\t(crossOuterSize - 2 * THIS.pointerBorderWidth) + 'px';\r\n\t\t\t\t\tp.crossLY.style.width =\r\n\t\t\t\t\t\tp.crossLX.style.height =\r\n\t\t\t\t\t\tTHIS.pointerThickness + 'px';\r\n\t\t\t\t\tp.crossLY.style.left =\r\n\t\t\t\t\t\tp.crossLX.style.top =\r\n\t\t\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2)) + 'px';\r\n\t\t\t\t\tp.crossLY.style.top =\r\n\t\t\t\t\t\tp.crossLX.style.left =\r\n\t\t\t\t\t\tTHIS.pointerBorderWidth + 'px';\r\n\r\n\r\n\t\t\t\t\t// slider\r\n\t\t\t\t\tp.sld.style.overflow = 'hidden';\r\n\t\t\t\t\tp.sld.style.width = THIS.sliderSize + 'px';\r\n\t\t\t\t\tp.sld.style.height = THIS.height + 'px';\r\n\r\n\t\t\t\t\t// slider gradient\r\n\t\t\t\t\tp.sldGrad.draw(THIS.sliderSize, THIS.height, '#000', '#000');\r\n\r\n\t\t\t\t\t// slider border\r\n\t\t\t\t\tp.sldB.style.display = displaySlider ? 'block' : 'none';\r\n\t\t\t\t\tp.sldB.style.position = 'absolute';\r\n\t\t\t\t\tp.sldB.style.left = (THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + 2 * controlPadding) + 'px';\r\n\t\t\t\t\tp.sldB.style.top = THIS.padding + 'px';\r\n\t\t\t\t\tp.sldB.style.border = THIS.controlBorderWidth + 'px solid';\r\n\t\t\t\t\tp.sldB.style.borderColor = THIS.controlBorderColor;\r\n\r\n\t\t\t\t\t// slider mouse area\r\n\t\t\t\t\tp.sldM.style.display = displaySlider ? 'block' : 'none';\r\n\t\t\t\t\tp.sldM.style.position = 'absolute';\r\n\t\t\t\t\tp.sldM.style.left = (THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + controlPadding) + 'px';\r\n\t\t\t\t\tp.sldM.style.top = 0 + 'px';\r\n\t\t\t\t\tp.sldM.style.width = (\r\n\t\t\t\t\t\t(THIS.sliderSize + 2 * controlPadding + 2 * THIS.controlBorderWidth) +\r\n\t\t\t\t\t\t(displayAlphaSlider ? 0 : Math.max(0, THIS.padding - controlPadding)) // remaining padding to the right edge\r\n\t\t\t\t\t) + 'px';\r\n\t\t\t\t\tp.sldM.style.height = (2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height) + 'px';\r\n\t\t\t\t\tp.sldM.style.cursor = 'default';\r\n\t\t\t\t\tjsc.setData(p.sldM, {\r\n\t\t\t\t\t\tinstance: THIS,\r\n\t\t\t\t\t\tcontrol: 'sld',\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// slider pointer inner and outer border\r\n\t\t\t\t\tp.sldPtrIB.style.border =\r\n\t\t\t\t\t\tp.sldPtrOB.style.border =\r\n\t\t\t\t\t\tTHIS.pointerBorderWidth + 'px solid ' + THIS.pointerBorderColor;\r\n\r\n\t\t\t\t\t// slider pointer outer border\r\n\t\t\t\t\tp.sldPtrOB.style.position = 'absolute';\r\n\t\t\t\t\tp.sldPtrOB.style.left = -(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\r\n\t\t\t\t\tp.sldPtrOB.style.top = '0';\r\n\r\n\t\t\t\t\t// slider pointer middle border\r\n\t\t\t\t\tp.sldPtrMB.style.border = THIS.pointerThickness + 'px solid ' + THIS.pointerColor;\r\n\r\n\t\t\t\t\t// slider pointer spacer\r\n\t\t\t\t\tp.sldPtrS.style.width = THIS.sliderSize + 'px';\r\n\t\t\t\t\tp.sldPtrS.style.height = jsc.pub.sliderInnerSpace + 'px';\r\n\r\n\r\n\t\t\t\t\t// alpha slider\r\n\t\t\t\t\tp.asld.style.overflow = 'hidden';\r\n\t\t\t\t\tp.asld.style.width = THIS.sliderSize + 'px';\r\n\t\t\t\t\tp.asld.style.height = THIS.height + 'px';\r\n\r\n\t\t\t\t\t// alpha slider gradient\r\n\t\t\t\t\tp.asldGrad.draw(THIS.sliderSize, THIS.height, '#000');\r\n\r\n\t\t\t\t\t// alpha slider border\r\n\t\t\t\t\tp.asldB.style.display = displayAlphaSlider ? 'block' : 'none';\r\n\t\t\t\t\tp.asldB.style.position = 'absolute';\r\n\t\t\t\t\tp.asldB.style.left = (\r\n\t\t\t\t\t\t(THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + controlPadding) +\r\n\t\t\t\t\t\t(displaySlider ? (THIS.sliderSize + 3 * controlPadding + 2 * THIS.controlBorderWidth) : 0)\r\n\t\t\t\t\t) + 'px';\r\n\t\t\t\t\tp.asldB.style.top = THIS.padding + 'px';\r\n\t\t\t\t\tp.asldB.style.border = THIS.controlBorderWidth + 'px solid';\r\n\t\t\t\t\tp.asldB.style.borderColor = THIS.controlBorderColor;\r\n\r\n\t\t\t\t\t// alpha slider mouse area\r\n\t\t\t\t\tp.asldM.style.display = displayAlphaSlider ? 'block' : 'none';\r\n\t\t\t\t\tp.asldM.style.position = 'absolute';\r\n\t\t\t\t\tp.asldM.style.left = (\r\n\t\t\t\t\t\t(THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + controlPadding) +\r\n\t\t\t\t\t\t(displaySlider ? (THIS.sliderSize + 2 * controlPadding + 2 * THIS.controlBorderWidth) : 0)\r\n\t\t\t\t\t) + 'px';\r\n\t\t\t\t\tp.asldM.style.top = 0 + 'px';\r\n\t\t\t\t\tp.asldM.style.width = (\r\n\t\t\t\t\t\t(THIS.sliderSize + 2 * controlPadding + 2 * THIS.controlBorderWidth) +\r\n\t\t\t\t\t\tMath.max(0, THIS.padding - controlPadding) // remaining padding to the right edge\r\n\t\t\t\t\t) + 'px';\r\n\t\t\t\t\tp.asldM.style.height = (2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height) + 'px';\r\n\t\t\t\t\tp.asldM.style.cursor = 'default';\r\n\t\t\t\t\tjsc.setData(p.asldM, {\r\n\t\t\t\t\t\tinstance: THIS,\r\n\t\t\t\t\t\tcontrol: 'asld',\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\t// alpha slider pointer inner and outer border\r\n\t\t\t\t\tp.asldPtrIB.style.border =\r\n\t\t\t\t\t\tp.asldPtrOB.style.border =\r\n\t\t\t\t\t\tTHIS.pointerBorderWidth + 'px solid ' + THIS.pointerBorderColor;\r\n\r\n\t\t\t\t\t// alpha slider pointer outer border\r\n\t\t\t\t\tp.asldPtrOB.style.position = 'absolute';\r\n\t\t\t\t\tp.asldPtrOB.style.left = -(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\r\n\t\t\t\t\tp.asldPtrOB.style.top = '0';\r\n\r\n\t\t\t\t\t// alpha slider pointer middle border\r\n\t\t\t\t\tp.asldPtrMB.style.border = THIS.pointerThickness + 'px solid ' + THIS.pointerColor;\r\n\r\n\t\t\t\t\t// alpha slider pointer spacer\r\n\t\t\t\t\tp.asldPtrS.style.width = THIS.sliderSize + 'px';\r\n\t\t\t\t\tp.asldPtrS.style.height = jsc.pub.sliderInnerSpace + 'px';\r\n\r\n\r\n\t\t\t\t\t// palette\r\n\t\t\t\t\tp.pal.className = 'jscolor-palette';\r\n\t\t\t\t\tp.pal.style.display = pickerDims.palette.rows ? 'block' : 'none';\r\n\t\t\t\t\tp.pal.style.position = 'absolute';\r\n\t\t\t\t\tp.pal.style.left = THIS.padding + 'px';\r\n\t\t\t\t\tp.pal.style.top = (2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height) + 'px';\r\n\r\n\t\t\t\t\t// palette's color samples\r\n\r\n\t\t\t\t\tp.pal.innerHTML = '';\r\n\r\n\t\t\t\t\tvar chessboard = jsc.genColorPreviewCanvas('rgba(0,0,0,0)');\r\n\r\n\t\t\t\t\tvar si = 0; // color sample's index\r\n\t\t\t\t\tfor (var r = 0; r < pickerDims.palette.rows; r++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfor (var c = 0; c < pickerDims.palette.cols && si < THIS._palette.length; c++, si++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar sampleColor = THIS._palette[si];\r\n\t\t\t\t\t\t\tvar sampleCssColor = jsc.rgbaColor.apply(null, sampleColor.rgba);\r\n\r\n\t\t\t\t\t\t\tvar sc = jsc.createEl('div'); // color sample's color\r\n\t\t\t\t\t\t\tsc.style.width = (pickerDims.palette.cellW - 2 * THIS.controlBorderWidth) + 'px';\r\n\t\t\t\t\t\t\tsc.style.height = (pickerDims.palette.cellH - 2 * THIS.controlBorderWidth) + 'px';\r\n\t\t\t\t\t\t\tsc.style.backgroundColor = sampleCssColor;\r\n\r\n\t\t\t\t\t\t\tvar sw = jsc.createEl('div'); // color sample's wrap\r\n\t\t\t\t\t\t\tsw.className = 'jscolor-palette-sample';\r\n\t\t\t\t\t\t\tsw.style.display = 'block';\r\n\t\t\t\t\t\t\tsw.style.position = 'absolute';\r\n\t\t\t\t\t\t\tsw.style.left = (\r\n\t\t\t\t\t\t\t\tpickerDims.palette.cols <= 1 ? 0 :\r\n\t\t\t\t\t\t\t\t\tMath.round(10 * (c * ((pickerDims.contentW - pickerDims.palette.cellW) / (pickerDims.palette.cols - 1)))) / 10\r\n\t\t\t\t\t\t\t) + 'px';\r\n\t\t\t\t\t\t\tsw.style.top = (r * (pickerDims.palette.cellH + THIS.paletteSpacing)) + 'px';\r\n\t\t\t\t\t\t\tsw.style.border = THIS.controlBorderWidth + 'px solid';\r\n\t\t\t\t\t\t\tsw.style.borderColor = THIS.controlBorderColor;\r\n\t\t\t\t\t\t\tsw.style.cursor = 'pointer';\r\n\t\t\t\t\t\t\tif (sampleColor.rgba[3] !== null && sampleColor.rgba[3] < 1.0)\r\n\t\t\t\t\t\t\t{ // only create chessboard background if the sample has transparency\r\n\t\t\t\t\t\t\t\tsw.style.backgroundImage = 'url(\\'' + chessboard.canvas.toDataURL() + '\\')';\r\n\t\t\t\t\t\t\t\tsw.style.backgroundRepeat = 'repeat';\r\n\t\t\t\t\t\t\t\tsw.style.backgroundPosition = 'center center';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tjsc.setData(sw, {\r\n\t\t\t\t\t\t\t\tinstance: THIS,\r\n\t\t\t\t\t\t\t\tcontrol: 'palette-sample',\r\n\t\t\t\t\t\t\t\tcolor: sampleColor,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tsw.addEventListener('click', jsc.onPaletteSampleClick, false);\r\n\t\t\t\t\t\t\tsw.appendChild(sc);\r\n\t\t\t\t\t\t\tp.pal.appendChild(sw);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t// the Close button\r\n\t\t\t\t\tfunction setBtnBorder()\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar insetColors = THIS.controlBorderColor.split(/\\s+/);\r\n\t\t\t\t\t\tvar outsetColor = insetColors.length < 2 ? insetColors[0] : insetColors[1] + ' ' + insetColors[0] + ' ' + insetColors[0] + ' ' + insetColors[1];\r\n\t\t\t\t\t\tp.btn.style.borderColor = outsetColor;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar btnPadding = 15; // px\r\n\t\t\t\t\tp.btn.className = 'jscolor-btn-close';\r\n\t\t\t\t\tp.btn.style.display = THIS.closeButton ? 'block' : 'none';\r\n\t\t\t\t\tp.btn.style.position = 'absolute';\r\n\t\t\t\t\tp.btn.style.left = THIS.padding + 'px';\r\n\t\t\t\t\tp.btn.style.bottom = THIS.padding + 'px';\r\n\t\t\t\t\tp.btn.style.padding = '0 ' + btnPadding + 'px';\r\n\t\t\t\t\tp.btn.style.maxWidth = (pickerDims.contentW - 2 * THIS.controlBorderWidth - 2 * btnPadding) + 'px';\r\n\t\t\t\t\tp.btn.style.overflow = 'hidden';\r\n\t\t\t\t\tp.btn.style.height = THIS.buttonHeight + 'px';\r\n\t\t\t\t\tp.btn.style.whiteSpace = 'nowrap';\r\n\t\t\t\t\tp.btn.style.border = THIS.controlBorderWidth + 'px solid';\r\n\t\t\t\t\tsetBtnBorder();\r\n\t\t\t\t\tp.btn.style.color = THIS.buttonColor;\r\n\t\t\t\t\tp.btn.style.font = '12px sans-serif';\r\n\t\t\t\t\tp.btn.style.textAlign = 'center';\r\n\t\t\t\t\tp.btn.style.cursor = 'pointer';\r\n\t\t\t\t\tp.btn.onmousedown = function ()\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tTHIS.hide();\r\n\t\t\t\t\t};\r\n\t\t\t\t\tp.btnT.style.lineHeight = THIS.buttonHeight + 'px';\r\n\t\t\t\t\tp.btnT.innerHTML = '';\r\n\t\t\t\t\tp.btnT.appendChild(window.document.createTextNode(THIS.closeText));\r\n\r\n\t\t\t\t\t// reposition the pointers\r\n\t\t\t\t\tredrawPad();\r\n\t\t\t\t\tredrawSld();\r\n\t\t\t\t\tredrawASld();\r\n\r\n\t\t\t\t\t// If we are changing the owner without first closing the picker,\r\n\t\t\t\t\t// make sure to first deal with the old owner\r\n\t\t\t\t\tif (jsc.picker.owner && jsc.picker.owner !== THIS)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tjsc.removeClass(jsc.picker.owner.targetElement, jsc.pub.activeClassName);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Set a new picker owner\r\n\t\t\t\t\tjsc.picker.owner = THIS;\r\n\r\n\t\t\t\t\t// The redrawPosition() method needs picker.owner to be set, that's why we call it here,\r\n\t\t\t\t\t// after setting the owner\r\n\t\t\t\t\tif (THIS.container === window.document.body)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tjsc.redrawPosition();\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tjsc._drawPosition(THIS, 0, 0, 'relative', false);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (p.wrap.parentNode !== THIS.container)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tTHIS.container.appendChild(p.wrap);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tjsc.addClass(THIS.targetElement, jsc.pub.activeClassName);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfunction redrawPad()\r\n\t\t\t\t{\r\n\t\t\t\t\t// redraw the pad pointer\r\n\t\t\t\t\tvar yChannel = jsc.getPadYChannel(THIS);\r\n\t\t\t\t\tvar x = Math.round((THIS.channels.h / 360) * (THIS.width - 1));\r\n\t\t\t\t\tvar y = Math.round((1 - THIS.channels[yChannel] / 100) * (THIS.height - 1));\r\n\t\t\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\r\n\t\t\t\t\tvar ofs = -Math.floor(crossOuterSize / 2);\r\n\t\t\t\t\tjsc.picker.cross.style.left = (x + ofs) + 'px';\r\n\t\t\t\t\tjsc.picker.cross.style.top = (y + ofs) + 'px';\r\n\r\n\t\t\t\t\t// redraw the slider\r\n\t\t\t\t\tswitch (jsc.getSliderChannel(THIS))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcase 's':\r\n\t\t\t\t\t\t\tvar rgb1 = jsc.HSV_RGB(THIS.channels.h, 100, THIS.channels.v);\r\n\t\t\t\t\t\t\tvar rgb2 = jsc.HSV_RGB(THIS.channels.h, 0, THIS.channels.v);\r\n\t\t\t\t\t\t\tvar color1 = 'rgb(' +\r\n\t\t\t\t\t\t\t\tMath.round(rgb1[0]) + ',' +\r\n\t\t\t\t\t\t\t\tMath.round(rgb1[1]) + ',' +\r\n\t\t\t\t\t\t\t\tMath.round(rgb1[2]) + ')';\r\n\t\t\t\t\t\t\tvar color2 = 'rgb(' +\r\n\t\t\t\t\t\t\t\tMath.round(rgb2[0]) + ',' +\r\n\t\t\t\t\t\t\t\tMath.round(rgb2[1]) + ',' +\r\n\t\t\t\t\t\t\t\tMath.round(rgb2[2]) + ')';\r\n\t\t\t\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'v':\r\n\t\t\t\t\t\t\tvar rgb = jsc.HSV_RGB(THIS.channels.h, THIS.channels.s, 100);\r\n\t\t\t\t\t\t\tvar color1 = 'rgb(' +\r\n\t\t\t\t\t\t\t\tMath.round(rgb[0]) + ',' +\r\n\t\t\t\t\t\t\t\tMath.round(rgb[1]) + ',' +\r\n\t\t\t\t\t\t\t\tMath.round(rgb[2]) + ')';\r\n\t\t\t\t\t\t\tvar color2 = '#000';\r\n\t\t\t\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// redraw the alpha slider\r\n\t\t\t\t\tjsc.picker.asldGrad.draw(THIS.sliderSize, THIS.height, THIS.toHEXString());\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfunction redrawSld()\r\n\t\t\t\t{\r\n\t\t\t\t\tvar sldChannel = jsc.getSliderChannel(THIS);\r\n\t\t\t\t\tif (sldChannel)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// redraw the slider pointer\r\n\t\t\t\t\t\tvar y = Math.round((1 - THIS.channels[sldChannel] / 100) * (THIS.height - 1));\r\n\t\t\t\t\t\tjsc.picker.sldPtrOB.style.top = (y - (2 * THIS.pointerBorderWidth + THIS.pointerThickness) - Math.floor(jsc.pub.sliderInnerSpace / 2)) + 'px';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// redraw the alpha slider\r\n\t\t\t\t\tjsc.picker.asldGrad.draw(THIS.sliderSize, THIS.height, THIS.toHEXString());\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfunction redrawASld()\r\n\t\t\t\t{\r\n\t\t\t\t\tvar y = Math.round((1 - THIS.channels.a) * (THIS.height - 1));\r\n\t\t\t\t\tjsc.picker.asldPtrOB.style.top = (y - (2 * THIS.pointerBorderWidth + THIS.pointerThickness) - Math.floor(jsc.pub.sliderInnerSpace / 2)) + 'px';\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfunction isPickerOwner()\r\n\t\t\t\t{\r\n\t\t\t\t\treturn jsc.picker && jsc.picker.owner === THIS;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfunction onValueKeyDown(ev: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (jsc.eventKey(ev) === 'Enter')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (THIS.valueElement)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tTHIS.processValueInput(THIS.valueElement.value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tTHIS.tryHide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfunction onAlphaKeyDown(ev: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (jsc.eventKey(ev) === 'Enter')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (THIS.alphaElement)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tTHIS.processAlphaInput(THIS.alphaElement.value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tTHIS.tryHide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfunction onValueChange(ev: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (jsc.getData(ev, 'internal'))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn; // skip if the event was internally triggered by jscolor\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar oldVal = THIS.valueElement.value;\r\n\r\n\t\t\t\t\tTHIS.processValueInput(THIS.valueElement.value); // this might change the value\r\n\r\n\t\t\t\t\tjsc.triggerCallback(THIS, 'onChange');\r\n\r\n\t\t\t\t\tif (THIS.valueElement.value !== oldVal)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// value was additionally changed -> let's trigger the change event again, even though it was natively dispatched\r\n\t\t\t\t\t\tjsc.triggerInputEvent(THIS.valueElement, 'change', true, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfunction onAlphaChange(ev: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (jsc.getData(ev, 'internal'))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn; // skip if the event was internally triggered by jscolor\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar oldVal = THIS.alphaElement.value;\r\n\r\n\t\t\t\t\tTHIS.processAlphaInput(THIS.alphaElement.value); // this might change the value\r\n\r\n\t\t\t\t\tjsc.triggerCallback(THIS, 'onChange');\r\n\r\n\t\t\t\t\t// triggering valueElement's onChange (because changing alpha changes the entire color, e.g. with rgba format)\r\n\t\t\t\t\tjsc.triggerInputEvent(THIS.valueElement, 'change', true, true);\r\n\r\n\t\t\t\t\tif (THIS.alphaElement.value !== oldVal)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// value was additionally changed -> let's trigger the change event again, even though it was natively dispatched\r\n\t\t\t\t\t\tjsc.triggerInputEvent(THIS.alphaElement, 'change', true, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfunction onValueInput(ev: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (jsc.getData(ev, 'internal'))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn; // skip if the event was internally triggered by jscolor\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (THIS.valueElement)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tTHIS.fromString(THIS.valueElement.value, jsc.flags.leaveValue);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tjsc.triggerCallback(THIS, 'onInput');\r\n\r\n\t\t\t\t\t// triggering valueElement's onInput\r\n\t\t\t\t\t// (not needed, it was dispatched normally by the browser)\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfunction onAlphaInput(ev: any)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (jsc.getData(ev, 'internal'))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn; // skip if the event was internally triggered by jscolor\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (THIS.alphaElement)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tTHIS.fromHSVA(null, null, null, parseFloat(THIS.alphaElement.value), jsc.flags.leaveAlpha);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tjsc.triggerCallback(THIS, 'onInput');\r\n\r\n\t\t\t\t\t// triggering valueElement's onInput (because changing alpha changes the entire color, e.g. with rgba format)\r\n\t\t\t\t\tjsc.triggerInputEvent(THIS.valueElement, 'input', true, true);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// let's process the DEPRECATED 'options' property (this will be later removed)\r\n\t\t\t\tif (jsc.pub.options)\r\n\t\t\t\t{\r\n\t\t\t\t\t// let's set custom default options, if specified\r\n\t\t\t\t\tfor (var opt in jsc.pub.options)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (jsc.pub.options.hasOwnProperty(opt))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttry\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tsetOption(opt, jsc.pub.options[opt]);\r\n\t\t\t\t\t\t\t} catch (e)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// let's apply configuration presets\r\n\t\t\t\t//\r\n\t\t\t\tvar presetsArr = [];\r\n\r\n\t\t\t\tif (opts.preset)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (typeof opts.preset === 'string')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpresetsArr = opts.preset.split(/\\s+/);\r\n\t\t\t\t\t} else if (Array.isArray(opts.preset))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpresetsArr = opts.preset.slice(); // slice() to clone\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconsole.warn('Unrecognized preset value');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// always use the 'default' preset. If it's not listed, append it to the end.\r\n\t\t\t\tif (presetsArr.indexOf('default') === -1)\r\n\t\t\t\t{\r\n\t\t\t\t\tpresetsArr.push('default');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// let's apply the presets in reverse order, so that should there be any overlapping options,\r\n\t\t\t\t// the formerly listed preset will override the latter\r\n\t\t\t\tfor (var i = presetsArr.length - 1; i >= 0; i -= 1)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar pres = presetsArr[i];\r\n\t\t\t\t\tif (!pres)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcontinue; // preset is empty string\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!jsc.pub.presets.hasOwnProperty(pres))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconsole.warn('Unknown preset: %s', pres);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var opt in jsc.pub.presets[pres])\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (jsc.pub.presets[pres].hasOwnProperty(opt))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttry\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tsetOption(opt, jsc.pub.presets[pres][opt]);\r\n\t\t\t\t\t\t\t} catch (e)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// let's set specific options for this color picker\r\n\t\t\t\tvar nonProperties = [\r\n\t\t\t\t\t// these options won't be set as instance properties\r\n\t\t\t\t\t'preset',\r\n\t\t\t\t];\r\n\t\t\t\tfor (var opt in opts)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (opts.hasOwnProperty(opt))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (nonProperties.indexOf(opt) === -1)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttry\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tsetOption(opt, opts[opt]);\r\n\t\t\t\t\t\t\t} catch (e)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t//\r\n\t\t\t\t// Install the color picker on chosen element(s)\r\n\t\t\t\t//\r\n\r\n\r\n\t\t\t\t// Determine picker's container element\r\n\t\t\t\tif (this.container === undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.container = window.document.body; // default container is BODY element\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t{ // explicitly set to custom element\r\n\t\t\t\t\tthis.container = jsc.node(this.container);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this.container)\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow new Error('Cannot instantiate color picker without a container element');\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// Fetch the target element\r\n\t\t\t\tthis.targetElement = jsc.node(targetElement);\r\n\r\n\t\t\t\tif (!this.targetElement)\r\n\t\t\t\t{\r\n\t\t\t\t\t// temporarily customized error message to help with migrating from versions prior to 2.2\r\n\t\t\t\t\tif (typeof targetElement === 'string' && /^[a-zA-Z][\\w:.-]*$/.test(targetElement))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// targetElement looks like valid ID\r\n\t\t\t\t\t\tvar possiblyId = targetElement;\r\n\t\t\t\t\t\tthrow new Error('If \\'' + possiblyId + '\\' is supposed to be an ID, please use \\'#' + possiblyId + '\\' or any valid CSS selector.');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthrow new Error('Cannot instantiate color picker without a target element');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.targetElement.jscolor && this.targetElement.jscolor instanceof jsc.pub)\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow new Error('Color picker already installed on this element');\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// link this instance with the target element\r\n\t\t\t\tthis.targetElement.jscolor = this;\r\n\t\t\t\tjsc.addClass(this.targetElement, jsc.pub.className);\r\n\r\n\t\t\t\t// register this instance\r\n\t\t\t\tjsc.instances.push(this);\r\n\r\n\r\n\t\t\t\t// if target is BUTTON\r\n\t\t\t\tif (jsc.isButton(this.targetElement))\r\n\t\t\t\t{\r\n\r\n\t\t\t\t\tif (this.targetElement.type.toLowerCase() !== 'button')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// on buttons, always force type to be 'button', e.g. in situations the target <button> has no type\r\n\t\t\t\t\t\t// and thus defaults to 'submit' and would submit the form when clicked\r\n\t\t\t\t\t\tthis.targetElement.type = 'button';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (jsc.isButtonEmpty(this.targetElement))\r\n\t\t\t\t\t{ // empty button\r\n\t\t\t\t\t\t// it is important to clear element's contents first.\r\n\t\t\t\t\t\t// if we're re-instantiating color pickers on DOM that has been modified by changing page's innerHTML,\r\n\t\t\t\t\t\t// we would keep adding more non-breaking spaces to element's content (because element's contents survive\r\n\t\t\t\t\t\t// innerHTML changes, but picker instances don't)\r\n\t\t\t\t\t\tjsc.removeChildren(this.targetElement);\r\n\r\n\t\t\t\t\t\t// let's insert a non-breaking space\r\n\t\t\t\t\t\tthis.targetElement.appendChild(window.document.createTextNode('\\xa0'));\r\n\r\n\t\t\t\t\t\t// set min-width = previewSize, if not already greater\r\n\t\t\t\t\t\tvar compStyle = jsc.getCompStyle(this.targetElement);\r\n\t\t\t\t\t\tvar currMinWidth = parseFloat(compStyle['min-width']) || 0;\r\n\t\t\t\t\t\tif (currMinWidth < this.previewSize)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tjsc.setStyle(this.targetElement, {\r\n\t\t\t\t\t\t\t\t'min-width': this.previewSize + 'px',\r\n\t\t\t\t\t\t\t}, this.forceStyle);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Determine the value element\r\n\t\t\t\tif (this.valueElement === undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (jsc.isTextInput(this.targetElement))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// for text inputs, default valueElement is targetElement\r\n\t\t\t\t\t\tthis.valueElement = this.targetElement;\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// leave it undefined\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if (this.valueElement === null)\r\n\t\t\t\t{ // explicitly set to null\r\n\t\t\t\t\t// leave it null\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t{ // explicitly set to custom element\r\n\t\t\t\t\tthis.valueElement = jsc.node(this.valueElement);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Determine the alpha element\r\n\t\t\t\tif (this.alphaElement)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.alphaElement = jsc.node(this.alphaElement);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Determine the preview element\r\n\t\t\t\tif (this.previewElement === undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.previewElement = this.targetElement; // default previewElement is targetElement\r\n\r\n\t\t\t\t} else if (this.previewElement === null)\r\n\t\t\t\t{ // explicitly set to null\r\n\t\t\t\t\t// leave it null\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t{ // explicitly set to custom element\r\n\t\t\t\t\tthis.previewElement = jsc.node(this.previewElement);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// valueElement\r\n\t\t\t\tif (this.valueElement && jsc.isTextInput(this.valueElement))\r\n\t\t\t\t{\r\n\r\n\t\t\t\t\t// If the value element has onInput event already set, we need to detach it and attach AFTER our listener.\r\n\t\t\t\t\t// otherwise the picker instance would still contain the old color when accessed from the onInput handler.\r\n\t\t\t\t\tvar valueElementOrigEvents = {\r\n\t\t\t\t\t\tonInput: this.valueElement.oninput\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.valueElement.oninput = null;\r\n\r\n\t\t\t\t\tthis.valueElement.addEventListener('keydown', onValueKeyDown, false);\r\n\t\t\t\t\tthis.valueElement.addEventListener('change', onValueChange, false);\r\n\t\t\t\t\tthis.valueElement.addEventListener('input', onValueInput, false);\r\n\t\t\t\t\t// the original event listener must be attached AFTER our handler (to let it first set picker's color)\r\n\t\t\t\t\tif (valueElementOrigEvents.onInput)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.valueElement.addEventListener('input', valueElementOrigEvents.onInput, false);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.valueElement.setAttribute('autocomplete', 'off');\r\n\t\t\t\t\tthis.valueElement.setAttribute('autocorrect', 'off');\r\n\t\t\t\t\tthis.valueElement.setAttribute('autocapitalize', 'off');\r\n\t\t\t\t\tthis.valueElement.setAttribute('spellcheck', false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// alphaElement\r\n\t\t\t\tif (this.alphaElement && jsc.isTextInput(this.alphaElement))\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.alphaElement.addEventListener('keydown', onAlphaKeyDown, false);\r\n\t\t\t\t\tthis.alphaElement.addEventListener('change', onAlphaChange, false);\r\n\t\t\t\t\tthis.alphaElement.addEventListener('input', onAlphaInput, false);\r\n\r\n\t\t\t\t\tthis.alphaElement.setAttribute('autocomplete', 'off');\r\n\t\t\t\t\tthis.alphaElement.setAttribute('autocorrect', 'off');\r\n\t\t\t\t\tthis.alphaElement.setAttribute('autocapitalize', 'off');\r\n\t\t\t\t\tthis.alphaElement.setAttribute('spellcheck', false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// determine initial color value\r\n\t\t\t\t//\r\n\t\t\t\tvar initValue = 'FFFFFF';\r\n\r\n\t\t\t\tif (this.value !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tinitValue = this.value; // get initial color from the 'value' property\r\n\t\t\t\t} else if (this.valueElement && this.valueElement.value !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tinitValue = this.valueElement.value; // get initial color from valueElement's value\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// determine initial alpha value\r\n\t\t\t\t//\r\n\t\t\t\tvar initAlpha = undefined;\r\n\r\n\t\t\t\tif (this.alpha !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tinitAlpha = ('' + this.alpha); // get initial alpha value from the 'alpha' property\r\n\t\t\t\t} else if (this.alphaElement && this.alphaElement.value !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tinitAlpha = this.alphaElement.value; // get initial color from alphaElement's value\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// determine current format based on the initial color value\r\n\t\t\t\t//\r\n\t\t\t\tthis._currentFormat = null;\r\n\r\n\t\t\t\tif (['auto', 'any'].indexOf(this.format.toLowerCase()) > -1)\r\n\t\t\t\t{\r\n\t\t\t\t\t// format is 'auto' or 'any' -> let's auto-detect current format\r\n\t\t\t\t\tvar color = jsc.parseColorString(initValue);\r\n\t\t\t\t\tthis._currentFormat = color ? color.format : 'hex';\r\n\t\t\t\t} else\r\n\t\t\t\t{\r\n\t\t\t\t\t// format is specified\r\n\t\t\t\t\tthis._currentFormat = this.format.toLowerCase();\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// let's parse the initial color value and expose color's preview\r\n\t\t\t\tthis.processValueInput(initValue);\r\n\r\n\t\t\t\t// let's also parse and expose the initial alpha value, if any\r\n\t\t\t\t//\r\n\t\t\t\t// Note: If the initial color value contains alpha value in it (e.g. in rgba format),\r\n\t\t\t\t// this will overwrite it. So we should only process alpha input if there was initial\r\n\t\t\t\t// alpha explicitly set, otherwise we could needlessly lose initial value's alpha\r\n\t\t\t\tif (initAlpha !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.processAlphaInput(initAlpha);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.random)\r\n\t\t\t\t{\r\n\t\t\t\t\t// randomize the initial color value\r\n\t\t\t\t\tthis.randomize.apply(this, Array.isArray(this.random) ? this.random : []);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\t\t//================================\r\n\t\t// Public properties and methods\r\n\t\t//================================\r\n\r\n\t\t//\r\n\t\t// These will be publicly available via jscolor.<name> and JSColor.<name>\r\n\t\t//\r\n\r\n\r\n\t\t// class that will be set to elements having jscolor installed on them\r\n\t\tjsc.pub.className = 'jscolor';\r\n\r\n\r\n\t\t// class that will be set to elements having jscolor active on them\r\n\t\tjsc.pub.activeClassName = 'jscolor-active';\r\n\r\n\r\n\t\t// whether to try to parse the options string by evaluating it using 'new Function()'\r\n\t\t// in case it could not be parsed with JSON.parse()\r\n\t\tjsc.pub.looseJSON = true;\r\n\r\n\r\n\t\t// presets\r\n\t\tjsc.pub.presets = {};\r\n\r\n\t\t// built-in presets\r\n\t\tjsc.pub.presets['default'] = {}; // baseline for customization\r\n\r\n\t\tjsc.pub.presets['light'] = { // default color scheme\r\n\t\t\tbackgroundColor: 'rgba(255,255,255,1)',\r\n\t\t\tcontrolBorderColor: 'rgba(187,187,187,1)',\r\n\t\t\tbuttonColor: 'rgba(0,0,0,1)',\r\n\t\t};\r\n\t\tjsc.pub.presets['dark'] = {\r\n\t\t\tbackgroundColor: 'rgba(51,51,51,1)',\r\n\t\t\tcontrolBorderColor: 'rgba(153,153,153,1)',\r\n\t\t\tbuttonColor: 'rgba(240,240,240,1)',\r\n\t\t};\r\n\r\n\t\tjsc.pub.presets['small'] = { width: 101, height: 101, padding: 10, sliderSize: 14, paletteCols: 8 };\r\n\t\tjsc.pub.presets['medium'] = { width: 181, height: 101, padding: 12, sliderSize: 16, paletteCols: 10 }; // default size\r\n\t\tjsc.pub.presets['large'] = { width: 271, height: 151, padding: 12, sliderSize: 24, paletteCols: 15 };\r\n\r\n\t\tjsc.pub.presets['thin'] = { borderWidth: 1, controlBorderWidth: 1, pointerBorderWidth: 1 }; // default thickness\r\n\t\tjsc.pub.presets['thick'] = { borderWidth: 2, controlBorderWidth: 2, pointerBorderWidth: 2 };\r\n\r\n\r\n\t\t// size of space in the sliders\r\n\t\tjsc.pub.sliderInnerSpace = 3; // px\r\n\r\n\t\t// transparency chessboard\r\n\t\tjsc.pub.chessboardSize = 8; // px\r\n\t\tjsc.pub.chessboardColor1 = '#666666';\r\n\t\tjsc.pub.chessboardColor2 = '#999999';\r\n\r\n\t\t// preview separator\r\n\t\tjsc.pub.previewSeparator = ['rgba(255,255,255,.65)', 'rgba(128,128,128,.65)'];\r\n\r\n\r\n\t\t// Initializes jscolor\r\n\t\tjsc.pub.init = function ()\r\n\t\t{\r\n\t\t\tif (jsc.initialized)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// attach some necessary handlers\r\n\t\t\twindow.document.addEventListener('mousedown', jsc.onDocumentMouseDown, false);\r\n\t\t\twindow.document.addEventListener('keyup', jsc.onDocumentKeyUp, false);\r\n\t\t\twindow.addEventListener('resize', jsc.onWindowResize, false);\r\n\t\t\twindow.addEventListener('scroll', jsc.onWindowScroll, false);\r\n\r\n\t\t\t// install jscolor on current DOM\r\n\t\t\tjsc.pub.install();\r\n\r\n\t\t\tjsc.initialized = true;\r\n\r\n\t\t\t// call functions waiting in the queue\r\n\t\t\twhile (jsc.readyQueue.length)\r\n\t\t\t{\r\n\t\t\t\tvar func = jsc.readyQueue.shift();\r\n\t\t\t\tfunc();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\t// Installs jscolor on current DOM tree\r\n\t\tjsc.pub.install = function (rootNode: any)\r\n\t\t{\r\n\t\t\tvar success = true;\r\n\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tjsc.installBySelector('[data-jscolor]', rootNode);\r\n\t\t\t} catch (e)\r\n\t\t\t{\r\n\t\t\t\tsuccess = false;\r\n\t\t\t\tconsole.warn(e);\r\n\t\t\t}\r\n\r\n\t\t\t// for backward compatibility with DEPRECATED installation using class name\r\n\t\t\tif (jsc.pub.lookupClass)\r\n\t\t\t{\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\tjsc.installBySelector(\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t'input.' + jsc.pub.lookupClass + ', ' +\r\n\t\t\t\t\t\t\t'button.' + jsc.pub.lookupClass\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\trootNode\r\n\t\t\t\t\t);\r\n\t\t\t\t} catch (e) { }\r\n\t\t\t}\r\n\r\n\t\t\treturn success;\r\n\t\t};\r\n\r\n\r\n\t\t// Registers function to be called as soon as jscolor is initialized (or immediately, if it already is).\r\n\t\t//\r\n\t\tjsc.pub.ready = function (func: any)\r\n\t\t{\r\n\t\t\tif (typeof func !== 'function')\r\n\t\t\t{\r\n\t\t\t\tconsole.warn('Passed value is not a function');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (jsc.initialized)\r\n\t\t\t{\r\n\t\t\t\tfunc();\r\n\t\t\t} else\r\n\t\t\t{\r\n\t\t\t\tjsc.readyQueue.push(func);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\r\n\t\t// Triggers given input event(s) (e.g. 'input' or 'change') on all color pickers.\r\n\t\t//\r\n\t\t// It is possible to specify multiple events separated with a space.\r\n\t\t// If called before jscolor is initialized, then the events will be triggered after initialization.\r\n\t\t//\r\n\t\tjsc.pub.trigger = function (eventNames: any)\r\n\t\t{\r\n\t\t\tvar triggerNow = function ()\r\n\t\t\t{\r\n\t\t\t\tjsc.triggerGlobal(eventNames);\r\n\t\t\t};\r\n\r\n\t\t\tif (jsc.initialized)\r\n\t\t\t{\r\n\t\t\t\ttriggerNow();\r\n\t\t\t} else\r\n\t\t\t{\r\n\t\t\t\tjsc.pub.ready(triggerNow);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\t// Hides current color picker box\r\n\t\tjsc.pub.hide = function ()\r\n\t\t{\r\n\t\t\tif (jsc.picker && jsc.picker.owner)\r\n\t\t\t{\r\n\t\t\t\tjsc.picker.owner.hide();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\t// Returns a data URL of a gray chessboard image that indicates transparency\r\n\t\tjsc.pub.chessboard = function (color: any)\r\n\t\t{\r\n\t\t\tif (!color)\r\n\t\t\t{\r\n\t\t\t\tcolor = 'rgba(0,0,0,0)';\r\n\t\t\t}\r\n\t\t\tvar preview = jsc.genColorPreviewCanvas(color);\r\n\t\t\treturn preview.canvas.toDataURL();\r\n\t\t};\r\n\r\n\r\n\t\t// Returns a data URL of a gray chessboard image that indicates transparency\r\n\t\tjsc.pub.background = function (color: any)\r\n\t\t{\r\n\t\t\tvar backgrounds = [];\r\n\r\n\t\t\t// CSS gradient for background color preview\r\n\t\t\tbackgrounds.push(jsc.genColorPreviewGradient(color));\r\n\r\n\t\t\t// data URL of generated PNG image with a gray transparency chessboard\r\n\t\t\tvar preview = jsc.genColorPreviewCanvas();\r\n\t\t\tbackgrounds.push([\r\n\t\t\t\t'url(\\'' + preview.canvas.toDataURL() + '\\')',\r\n\t\t\t\t'left top',\r\n\t\t\t\t'repeat',\r\n\t\t\t].join(' '));\r\n\r\n\t\t\treturn backgrounds.join(', ');\r\n\t\t};\r\n\r\n\r\n\t\t//\r\n\t\t// DEPRECATED properties and methods\r\n\t\t//\r\n\r\n\r\n\t\t// DEPRECATED. Use jscolor.presets.default instead.\r\n\t\t//\r\n\t\t// Custom default options for all color pickers, e.g. { hash: true, width: 300 }\r\n\t\tjsc.pub.options = {};\r\n\r\n\r\n\t\t// DEPRECATED. Use data-jscolor attribute instead, which installs jscolor on given element.\r\n\t\t//\r\n\t\t// By default, we'll search for all elements with class=\"jscolor\" and install a color picker on them.\r\n\t\t//\r\n\t\t// You can change what class name will be looked for by setting the property jscolor.lookupClass\r\n\t\t// anywhere in your HTML document. To completely disable the automatic lookup, set it to null.\r\n\t\t//\r\n\t\tjsc.pub.lookupClass = 'jscolor';\r\n\r\n\r\n\t\t// DEPRECATED. Use data-jscolor attribute instead, which installs jscolor on given element.\r\n\t\t//\r\n\t\t// Install jscolor on all elements that have the specified class name\r\n\t\tjsc.pub.installByClassName = function ()\r\n\t\t{\r\n\t\t\tconsole.error('jscolor.installByClassName() is DEPRECATED. Use data-jscolor=\"\" attribute instead of a class name.' + jsc.docsRef);\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\r\n\t\tjsc.register();\r\n\r\n\r\n\t\treturn jsc.pub;\r\n\r\n\r\n\t})(); // END jscolor\r\n\r\n\r\n\tif (typeof window.jscolor === 'undefined')\r\n\t{\r\n\t\twindow.jscolor = window.JSColor = jscolor;\r\n\t}\r\n\r\n\r\n\t// END jscolor code\r\n\r\n\treturn jscolor;\r\n\r\n}); // END factory","import { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { ControlTypeEnum, createIcon, createTextBox, IconClassLight, IconClass, puma } from \"../vr\";\r\nimport { TextBox } from \"./textbox\";\r\n\r\n//#region Options\r\nexport class SearchBarOptions extends VrControlOptions\r\n{\r\n\tcollapsed?: boolean;\r\n\ticon?: IconClass | boolean;\r\n\tplaceholder?: string;\r\n\texpandOnClick?: boolean;\r\n\tcollapseOnBlur?: boolean;\r\n\r\n\tonClick?(e: SearchBarClickEvent): void;\r\n\tonKeyUp?(e: SearchBarKeyUpEvent): void;\r\n\tonEnterKey?(e: SearchBarEnterKeyEvent): void;\r\n\tonBlur?(e: SearchBarBlurEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class SearchBar extends VrControl\r\n{\r\n\t//#region Variables\r\n\tprivate _textBox: TextBox;\r\n\tprivate _previousValue: string;\r\n\t//#endregion\r\n\r\n\tconstructor(element: HTMLElement, options?: SearchBarOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new SearchBarOptions();\r\n\r\n\t\tif (options.expandOnClick == null) options.expandOnClick = true;\r\n\t\tif (options.collapseOnBlur == null) options.collapseOnBlur = false;\r\n\t\tif (options.collapsed == null) options.collapsed = false;\r\n\t\tif (options.placeholder == null) options.placeholder = \"Cerca...\";\r\n\r\n\t\tif (options.icon == null) options.icon = true;\r\n\t\tif (options.icon == true) options.icon = IconClassLight.Search;\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.SearchBar);\r\n\r\n\t\t//#region Icon\r\n\t\tif (options.icon !== false)\r\n\t\t{\r\n\t\t\tcreateIcon({\r\n\t\t\t\tvalue: options.icon,\r\n\t\t\t\tcolor: (options.onClick != null) ? \"#878787\" : \"#CCC\",\r\n\t\t\t\tonClick: (e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (options!.expandOnClick != null)\r\n\t\t\t\t\t\tthis.expand();\r\n\r\n\t\t\t\t\tif (options!.onClick != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet clickEvent = new SearchBarClickEvent();\r\n\t\t\t\t\t\tclickEvent.sender = this;\r\n\t\t\t\t\t\tclickEvent.value = this.value();\r\n\t\t\t\t\t\toptions!.onClick(clickEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, this.element())\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region TextBox\r\n\t\tthis._textBox = createTextBox({\r\n\t\t\tplaceholder: options.placeholder,\r\n\t\t\twidth: (options.icon !== false) ? \"Calc(100% - 15px)\" : \"100%\",\r\n\t\t\tonKeyDown: (e) => this._previousValue = this.value(),\r\n\t\t\tonKeyUp: (e) =>\r\n\t\t\t{\r\n\t\t\t\tif (options!.onKeyUp != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet keyUpEvent = new SearchBarKeyUpEvent();\r\n\t\t\t\t\tkeyUpEvent.sender = this;\r\n\t\t\t\t\tkeyUpEvent.value = this.value();\r\n\t\t\t\t\tkeyUpEvent.previousValue = this._previousValue;\r\n\t\t\t\t\toptions!.onKeyUp!(keyUpEvent);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonEnterKey: () =>\r\n\t\t\t{\r\n\t\t\t\tif (options!.onEnterKey != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet enterKeyPressEvent = new SearchBarEnterKeyEvent();\r\n\t\t\t\t\tenterKeyPressEvent.sender = this;\r\n\t\t\t\t\tenterKeyPressEvent.value = this.value();\r\n\t\t\t\t\toptions!.onEnterKey(enterKeyPressEvent);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonBlur: (e) =>\r\n\t\t\t{\r\n\t\t\t\tif (options!.collapseOnBlur)\r\n\t\t\t\t\tthis.collapse();\r\n\r\n\t\t\t\tif (options!.onBlur != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet blurEvent = new SearchBarBlurEvent();\r\n\t\t\t\t\tblurEvent.sender = this;\r\n\t\t\t\t\tblurEvent.value = this.value();\r\n\t\t\t\t\toptions!.onBlur(blurEvent);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this.element())\r\n\t\t//#endregion\r\n\r\n\t\t//#region Collapsed\r\n\t\tif (options.collapsed)\r\n\t\t\tthis.collapse();\r\n\t\t//#endregion\r\n\t}\r\n\r\n\t//#region Methods\r\n\tvalue(text?: string)\r\n\t{\r\n\t\treturn this._textBox.value<string>(text);\r\n\t}\r\n\r\n\tclear()\r\n\t{\r\n\t\tthis._textBox.clear();\r\n\t}\r\n\r\n\t//#region Collapse/Expand\r\n\tcollapse()\r\n\t{\r\n\t\tthis._textBox.hide();\r\n\t\tthis.container().style.cssText += \"border-bottom: none;\";\r\n\t}\r\n\r\n\texpand()\r\n\t{\r\n\t\tthis._textBox.show();\r\n\t\tthis._textBox.focus();\r\n\t\tthis.container().style.cssText += \"border-bottom: solid 1px #d9d9d9;\";\r\n\t}\r\n\r\n\tisCollapsed()\r\n\t{\r\n\t\treturn !this._textBox.visible();\r\n\t}\r\n\t//#endregion\r\n\r\n\tfocus()\r\n\t{\r\n\t\tthis._textBox.focus();\r\n\t}\r\n\t//#endregion\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass SearchBarEvent extends VrControlsEvent\r\n{\r\n\tsender: SearchBar;\r\n\tvalue: string;\r\n}\r\n\r\nclass SearchBarKeyUpEvent extends SearchBarEvent\r\n{\r\n\tpreviousValue: string;\r\n}\r\n\r\nclass SearchBarEnterKeyEvent extends SearchBarEvent\r\n{\r\n}\r\n\r\nclass SearchBarClickEvent extends SearchBarEvent\r\n{\r\n}\r\n\r\nclass SearchBarBlurEvent extends SearchBarEvent\r\n{\r\n}\r\n//#endregion","import { VrControlOptions, VrControl, VrControlsEvent } from \"../common\";\r\nimport { ControlTypeEnum, createIcon, IconClassSolid, IconClass, puma, SplitterCollapsableSettings, SplitterCollapseDirectionEnum, SplitterDirectionEnum } from \"../vr\";\r\n\r\n//#region Options\r\nexport class SplitterOptions extends VrControlOptions\r\n{\r\n\tdirection?: SplitterDirectionEnum;\r\n\tcollapsable?: boolean | SplitterCollapsableSettings;\r\n\tresizable?: boolean;\r\n\r\n\tonBeforeExpandCollapse?: (e: SplitterBeforeExpandCollapseEvent) => void;\r\n\tonAfterExpandExpandCollapse?: (e: SplitterAfterExpandCollapseEvent) => void;\r\n\tonBeforeResize?: (e: SplitterBeforeResizeEvent) => void;\r\n\tonAfterResize?: (e: SplitterAfterResizeEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Splitter extends VrControl\r\n{\r\n\t//#region Variables\r\n\tprivate _previousDiv: HTMLElement;\r\n\tprivate _nextDiv: HTMLElement;\r\n\t//#endregion\r\n\r\n\tconstructor(element: HTMLElement, options?: SplitterOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new SplitterOptions();\r\n\r\n\t\tif (options.direction == null) options.direction = SplitterDirectionEnum.Horizontal;\r\n\t\tif (options.resizable == null) options.resizable = true;\r\n\t\tif (options.tabIndex == null) options.tabIndex = -1;\r\n\r\n\t\tif (options.collapsable == null) options.collapsable = false;\r\n\t\tif (options.collapsable === true)\r\n\t\t{\r\n\t\t\toptions.collapsable = new SplitterCollapsableSettings();\r\n\t\t\tif (options.collapsable.direction == null) options.collapsable.direction = SplitterCollapseDirectionEnum.Left;\r\n\t\t\tif (options.collapsable.color == null) options.collapsable.color = \"#000\";\r\n\r\n\t\t\tif (options.direction == SplitterDirectionEnum.Horizontal) options.collapsable.direction = SplitterCollapseDirectionEnum.Left;\r\n\t\t\telse if (options.direction == SplitterDirectionEnum.Vertical) options.collapsable.direction = SplitterCollapseDirectionEnum.Up;\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.Splitter);\r\n\r\n\t\tif (options.resizable)\r\n\t\t\tvrSplitterResizable(this, options);\r\n\r\n\t\t//#region Direction\r\n\t\tswitch (options.direction)\r\n\t\t{\r\n\t\t\tcase SplitterDirectionEnum.Horizontal: puma(this.element()).attr(\"data-direction\", \"horizontal\"); break;\r\n\t\t\tcase SplitterDirectionEnum.Vertical: puma(this.element()).attr(\"data-direction\", \"vertical\"); break;\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Collapse\r\n\t\tif (options.collapsable !== false)\r\n\t\t{\r\n\t\t\tlet icon = \"\";\r\n\t\t\tlet cssContainer = \"\";\r\n\t\t\tswitch (options.collapsable.direction as SplitterCollapseDirectionEnum)\r\n\t\t\t{\r\n\t\t\t\tcase SplitterCollapseDirectionEnum.Left:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticon = IconClassSolid.CaretLeft;\r\n\t\t\t\t\t\tcssContainer = \"left: -5px; top: Calc(50% - 8px);\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase SplitterCollapseDirectionEnum.Right:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticon = IconClassSolid.CaretRight;\r\n\t\t\t\t\t\tcssContainer = \"left: 0px; top: Calc(50% - 8px);\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase SplitterCollapseDirectionEnum.Up:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticon = IconClassSolid.CaretUp;\r\n\t\t\t\t\t\tcssContainer = \"top: -10px; left: Calc(50% - 5px);\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase SplitterCollapseDirectionEnum.Down:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticon = IconClassSolid.CaretDown;\r\n\t\t\t\t\t\tcssContainer = \"top: -5px; left: Calc(50% - 5px)\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tcreateIcon({\r\n\t\t\t\tvalue: icon,\r\n\t\t\t\tcssContainer: \"position: absolute; \" + cssContainer,\r\n\t\t\t\tcolor: options.collapsable.color,\r\n\t\t\t\ttag: \"expanded\",\r\n\t\t\t\tonClick: (e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tlet tag = e.sender.tag(); // If 'expanded', you are collapsing it\r\n\r\n\t\t\t\t\t//#region Previous/Next div\r\n\t\t\t\t\tif (this._previousDiv == null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis._previousDiv = this.container().previousElementSibling as HTMLElement;\r\n\t\t\t\t\t\tthis._nextDiv = this.container().nextElementSibling as HTMLElement;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\t//#region Before collapse/expand event\r\n\t\t\t\t\tif (options!.onBeforeExpandCollapse != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet beforeExpandCollapseEvent = new SplitterBeforeExpandCollapseEvent();\r\n\t\t\t\t\t\tbeforeExpandCollapseEvent.sender = this;\r\n\t\t\t\t\t\tbeforeExpandCollapseEvent.collapse = (tag == \"expanded\");\r\n\t\t\t\t\t\tbeforeExpandCollapseEvent.previousDiv = this._previousDiv;\r\n\t\t\t\t\t\tbeforeExpandCollapseEvent.nextDiv = this._nextDiv;\r\n\t\t\t\t\t\toptions!.onBeforeExpandCollapse(beforeExpandCollapseEvent);\r\n\r\n\t\t\t\t\t\tif (beforeExpandCollapseEvent.isDefaultPrevented())\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\tswitch ((options!.collapsable as SplitterCollapsableSettings).direction)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcase SplitterCollapseDirectionEnum.Left:\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t//#region Left\r\n\t\t\t\t\t\t\t\tif (tag == \"expanded\")\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpuma(this._previousDiv).hide();\r\n\t\t\t\t\t\t\t\t\tpuma(this._nextDiv).width(\"100%\");\r\n\t\t\t\t\t\t\t\t\te.sender.value(IconClassSolid.CaretRight);\r\n\t\t\t\t\t\t\t\t\te.sender.cssContainer(\"left: 0px;\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpuma(this._previousDiv).show();\r\n\r\n\t\t\t\t\t\t\t\t\tlet width = (100 - this._previousDiv.style.width.vrGetNumericPart()) + \"%\";\r\n\t\t\t\t\t\t\t\t\tif (this._previousDiv.style.width.endsWith(\"px\"))\r\n\t\t\t\t\t\t\t\t\t\twidth = \"Calc(100% - \" + this._previousDiv.style.width.vrGetNumericPart() + \"px)\";\r\n\t\t\t\t\t\t\t\t\tpuma(this._nextDiv).width(width);\r\n\r\n\t\t\t\t\t\t\t\t\te.sender.value(IconClassSolid.CaretLeft);\r\n\t\t\t\t\t\t\t\t\te.sender.cssContainer(\"left: -5px;\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase SplitterCollapseDirectionEnum.Right:\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t//#region Right\r\n\t\t\t\t\t\t\t\tif (tag == \"expanded\")\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpuma(this._previousDiv).width(\"100%\");\r\n\t\t\t\t\t\t\t\t\tpuma(this._nextDiv).hide();\r\n\t\t\t\t\t\t\t\t\te.sender.value(IconClassSolid.CaretLeft);\r\n\t\t\t\t\t\t\t\t\te.sender.cssContainer(\"left: -5px;\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlet width = (100 - this._nextDiv.style.width.vrGetNumericPart()) + \"%\";\r\n\t\t\t\t\t\t\t\t\tif (this._nextDiv.style.width.endsWith(\"px\"))\r\n\t\t\t\t\t\t\t\t\t\twidth = \"Calc(100% - \" + this._nextDiv.style.width.vrGetNumericPart() + \"px)\";\r\n\t\t\t\t\t\t\t\t\tpuma(this._previousDiv).width(width);\r\n\r\n\t\t\t\t\t\t\t\t\tpuma(this._nextDiv).show();\r\n\t\t\t\t\t\t\t\t\te.sender.value(IconClassSolid.CaretRight);\r\n\t\t\t\t\t\t\t\t\te.sender.cssContainer(\"left: 0px;\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase SplitterCollapseDirectionEnum.Down:\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t//#region Down\r\n\t\t\t\t\t\t\t\tif (tag == \"expanded\")\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpuma(this._previousDiv).height(\"100%\");\r\n\t\t\t\t\t\t\t\t\tpuma(this._nextDiv).hide();\r\n\t\t\t\t\t\t\t\t\te.sender.value(IconClassSolid.CaretUp);\r\n\t\t\t\t\t\t\t\t\te.sender.cssContainer(\"top: -10px;\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlet height = (100 - this._nextDiv.style.height.vrGetNumericPart()) + \"%\";\r\n\t\t\t\t\t\t\t\t\tif (this._nextDiv.style.height.endsWith(\"px\"))\r\n\t\t\t\t\t\t\t\t\t\theight = \"Calc(100% - \" + this._nextDiv.style.height.vrGetNumericPart() + \"px)\";\r\n\t\t\t\t\t\t\t\t\tpuma(this._previousDiv).height(height);\r\n\r\n\t\t\t\t\t\t\t\t\tpuma(this._nextDiv).show();\r\n\t\t\t\t\t\t\t\t\te.sender.value(IconClassSolid.CaretDown);\r\n\t\t\t\t\t\t\t\t\te.sender.cssContainer(\"top: -5px;\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase SplitterCollapseDirectionEnum.Up:\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t//#region Up\r\n\t\t\t\t\t\t\t\tif (tag == \"expanded\")\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpuma(this._previousDiv).hide();\r\n\t\t\t\t\t\t\t\t\tpuma(this._nextDiv).height(\"100%\");\r\n\t\t\t\t\t\t\t\t\te.sender.value(IconClassSolid.CaretDown);\r\n\t\t\t\t\t\t\t\t\te.sender.cssContainer(\"top: -5px;\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpuma(this._previousDiv).show();\r\n\r\n\t\t\t\t\t\t\t\t\tlet height = (100 - this._previousDiv.style.height.vrGetNumericPart()) + \"%\";\r\n\t\t\t\t\t\t\t\t\tif (this._previousDiv.style.height.endsWith(\"px\"))\r\n\t\t\t\t\t\t\t\t\t\theight = \"Calc(100% - \" + this._previousDiv.style.height.vrGetNumericPart() + \"px)\";\r\n\t\t\t\t\t\t\t\t\tpuma(this._nextDiv).height(height);\r\n\r\n\t\t\t\t\t\t\t\t\te.sender.value(IconClassSolid.CaretUp);\r\n\t\t\t\t\t\t\t\t\te.sender.cssContainer(\"top: -10px;\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//#region After collapse/expand event\r\n\t\t\t\t\tif (options!.onAfterExpandExpandCollapse != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet afterExpandCollapseEvent = new SplitterAfterExpandCollapseEvent();\r\n\t\t\t\t\t\tafterExpandCollapseEvent.sender = this;\r\n\t\t\t\t\t\tafterExpandCollapseEvent.collapse = (tag == \"expanded\");\r\n\t\t\t\t\t\tafterExpandCollapseEvent.previousDiv = this._previousDiv;\r\n\t\t\t\t\t\tafterExpandCollapseEvent.nextDiv = this._nextDiv;\r\n\t\t\t\t\t\toptions!.onAfterExpandExpandCollapse(afterExpandCollapseEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//#endregion\r\n\r\n\t\t\t\t\tif (tag == \"expanded\")\r\n\t\t\t\t\t\te.sender.tag(\"collapsed\");\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\te.sender.tag(\"expanded\");\r\n\t\t\t\t}\r\n\t\t\t}, this.container())\r\n\t\t}\r\n\t\t//#endregion\r\n\t}\r\n}\r\n//#endregion\r\n\r\n//#region Resize\r\nlet vrSplitterResizable = (sender: Splitter, options: SplitterOptions) =>\r\n{\r\n\tlet resizer = sender.element() as any;\r\n\tlet direction: any = null;\r\n\tlet prevSibling: any = null;\r\n\tlet nextSibling: any = null;\r\n\r\n\tlet x = 0;\r\n\tlet y = 0;\r\n\tlet prevSiblingHeight = 0;\r\n\tlet prevSiblingWidth = 0;\r\n\r\n\tconst mouseDownHandler = (e: any) =>\r\n\t{\r\n\t\tdirection = resizer.getAttribute(\"data-direction\") || \"horizontal\";\r\n\t\tprevSibling = resizer.parentElement.previousElementSibling;\r\n\t\tnextSibling = resizer.parentElement.nextElementSibling;\r\n\r\n\t\t//#region Before resize event\r\n\t\tif (options.onBeforeResize != null)\r\n\t\t{\r\n\t\t\tlet beforeResizeEvent = new SplitterBeforeResizeEvent();\r\n\t\t\tbeforeResizeEvent.sender = sender;\r\n\t\t\tbeforeResizeEvent.previousDiv = prevSibling;\r\n\t\t\tbeforeResizeEvent.nextDiv = nextSibling;\r\n\t\t\tbeforeResizeEvent.direction = direction;\r\n\t\t\toptions!.onBeforeResize(beforeResizeEvent);\r\n\r\n\t\t\tif (beforeResizeEvent.isDefaultPrevented())\r\n\t\t\t{\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t// Current mouse position\r\n\t\tx = e.clientX;\r\n\t\ty = e.clientY;\r\n\r\n\t\t// Previous sibling size\r\n\t\tconst rect = prevSibling.getBoundingClientRect();\r\n\t\tprevSiblingHeight = rect.height;\r\n\t\tprevSiblingWidth = rect.width;\r\n\r\n\t\tdocument.addEventListener(\"mousemove\", mouseMoveHandler);\r\n\t\tdocument.addEventListener(\"mouseup\", mouseUpHandler);\r\n\t};\r\n\r\n\tconst mouseMoveHandler = (e: any) =>\r\n\t{\r\n\t\tconst dx = e.clientX - x;\r\n\t\tconst dy = e.clientY - y;\r\n\r\n\t\tswitch (direction)\r\n\t\t{\r\n\t\t\tcase \"vertical\":\r\n\t\t\t\t{\r\n\t\t\t\t\tconst h = (prevSiblingHeight + dy) * 100 / resizer.parentElement.parentNode.getBoundingClientRect().height;\r\n\t\t\t\t\tprevSibling.style.height = `${h}%`;\r\n\t\t\t\t\tnextSibling.style.height = `${100 - h}%`;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"horizontal\":\r\n\t\t\tdefault:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst w = (prevSiblingWidth + dx) * 100 / resizer.parentElement.parentNode.getBoundingClientRect().width;\r\n\t\t\t\t\tprevSibling.style.width = `${w}%`;\r\n\t\t\t\t\tnextSibling.style.width = `${100 - w}%`;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t//#region Cursor & PointerEvents\r\n\t\tconst cursor = direction === \"horizontal\" ? \"col-resize\" : \"row-resize\";\r\n\t\tresizer.style.cursor = cursor;\r\n\t\tdocument.body.style.cursor = cursor;\r\n\r\n\t\tprevSibling.style.userSelect = \"none\";\r\n\t\tprevSibling.style.pointerEvents = \"none\";\r\n\r\n\t\tnextSibling.style.userSelect = \"none\";\r\n\t\tnextSibling.style.pointerEvents = \"none\";\r\n\t\t//#endregion\r\n\t};\r\n\r\n\tconst mouseUpHandler = () =>\r\n\t{\r\n\t\tresizer.style.removeProperty(\"cursor\");\r\n\t\tdocument.body.style.removeProperty(\"cursor\");\r\n\r\n\t\tprevSibling.style.removeProperty(\"user-select\");\r\n\t\tprevSibling.style.removeProperty(\"pointer-events\");\r\n\r\n\t\tnextSibling.style.removeProperty(\"user-select\");\r\n\t\tnextSibling.style.removeProperty(\"pointer-events\");\r\n\r\n\t\tdocument.removeEventListener(\"mousemove\", mouseMoveHandler);\r\n\t\tdocument.removeEventListener(\"mouseup\", mouseUpHandler);\r\n\r\n\t\t//#region After resize event\r\n\t\tif (options.onAfterResize != null)\r\n\t\t{\r\n\t\t\tlet beforeResizeEvent = new SplitterAfterResizeEvent();\r\n\t\t\tbeforeResizeEvent.sender = sender;\r\n\t\t\tbeforeResizeEvent.previousDiv = prevSibling;\r\n\t\t\tbeforeResizeEvent.nextDiv = nextSibling;\r\n\t\t\tbeforeResizeEvent.direction = direction;\r\n\t\t\toptions!.onAfterResize(beforeResizeEvent);\r\n\t\t}\r\n\t\t//#endregion\r\n\t};\r\n\r\n\t// Attach the handler\r\n\tresizer.addEventListener(\"mousedown\", mouseDownHandler);\r\n};\r\n//#endregion\r\n\r\n//#region Classes\r\nclass SplitterEvent extends VrControlsEvent\r\n{\r\n\tsender: Splitter;\r\n}\r\n\r\nclass SplitterExpandCollapseEvent extends SplitterEvent\r\n{\r\n\tcollapse: boolean;\r\n\tpreviousDiv: HTMLElement;\r\n\tnextDiv: HTMLElement;\r\n}\r\nclass SplitterBeforeExpandCollapseEvent extends SplitterExpandCollapseEvent { }\r\nclass SplitterAfterExpandCollapseEvent extends SplitterExpandCollapseEvent { }\r\n\r\nclass SplitterResizeEvent extends SplitterEvent\r\n{\r\n\tsender: Splitter;\r\n\tpreviousDiv: HTMLElement;\r\n\tnextDiv: HTMLElement;\r\n\tdirection: SplitterDirectionEnum;\r\n}\r\nclass SplitterBeforeResizeEvent extends SplitterResizeEvent { }\r\nclass SplitterAfterResizeEvent extends SplitterResizeEvent { }\r\n//#endregion","import { UtilityManager } from \"../../../src/managers/utilityManager\";\r\nimport { VrControlOptions, VrControl, VrControlsEvent } from \"../common\";\r\nimport { AutoCompleteBoxItem, ControlTypeEnum, createTextBox, div, span, puma, createIcon, IconClassLight, IconClass, AutoCompleteBoxComboSettings, AutoCompleteBoxItemSettings, WebApiModeEnum, ComboBoxItem, ComboBoxTreeModeEnum, KeyEnum, shadowRoot, IconClassRegular } from \"../vr\";\r\nimport { TextBox } from \"./textbox\";\r\n\r\n//#region Options\r\nexport class AutoCompleteBoxOptions extends VrControlOptions\r\n{\r\n\tvalue?: string[] | AutoCompleteBoxItem[];\r\n\trows?: number;\r\n\tplaceholder?: string;\r\n\tborder?: boolean;\r\n\titemSettings?: AutoCompleteBoxItemSettings;\r\n\tcomboSettings?: AutoCompleteBoxComboSettings;\r\n\ttooltip?: boolean;\r\n\r\n\tonItemClick?: (e: AutoCompleteBoxItemClickEvent) => void;\r\n\tonItemAdded?: (e: AutoCompleteBoxItemAddedEvent) => void;\r\n\tonItemRemoved?: (e: AutoCompleteBoxItemRemovedEvent) => void;\r\n\tonFocus?: (e: AutoCompleteBoxFocusEvent) => void;\r\n\tonBlur?: (e: AutoCompleteBoxBlurEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class AutoCompleteBox extends VrControl\r\n{\r\n\t//#region Variables\r\n\tprivate _txtInput: TextBox;\r\n\tprivate _spanForWidth: HTMLElement;\r\n\tprivate _items: AutoCompleteBoxItem[];\r\n\r\n\tprivate _comboItems: ComboBoxItem[];\r\n\tprivate _popup: HTMLElement;\r\n\tprivate _lastAjaxCallGuid: string;\r\n\tprivate _typedTextWebService: string | null;\r\n\tprivate _dictionaryValueLi: Map<string, HTMLElement[]>;\r\n\tprivate _dictionaryLiValue: Map<HTMLElement, string>;\r\n\t//#endregion\r\n\r\n\tconstructor(element: HTMLElement, options?: AutoCompleteBoxOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new AutoCompleteBoxOptions();\r\n\r\n\t\tif (options.width == null) options.width = 300;\r\n\t\tif (options.border == null) options.border = true;\r\n\t\tif (options.tooltip == null) options.tooltip = true;\r\n\r\n\t\tif (options.itemSettings == null) options.itemSettings = new AutoCompleteBoxItemSettings();\r\n\t\tif (options.itemSettings.backgroundColor == null) options.itemSettings.backgroundColor = \"#FFF\";\r\n\t\tif (options.itemSettings.textColor == null) options.itemSettings.textColor = \"#5f6368\";\r\n\t\tif (options.itemSettings.border == null) options.itemSettings.border = \"solid 1px #dadce0\";\r\n\t\tif (options.itemSettings.bold == null) options.itemSettings.bold = false;\r\n\t\tif (options.itemSettings.deleteIconColor == null) options.itemSettings.deleteIconColor = \"rgb(140 140 140)\";\r\n\r\n\t\tif (options.comboSettings != null)\r\n\t\t{\r\n\t\t\tif (options.comboSettings.freeText == null) options.comboSettings.freeText = true;\r\n\t\t\tif (options.comboSettings.treeMode == null) options.comboSettings.treeMode = ComboBoxTreeModeEnum.AllExpanded;\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.AutoCompleteBox);\r\n\t\tpuma(this.element()).attr(\"tabindex\", \"1\");\r\n\t\tthis._spanForWidth = span(this.element(), { css: \"visibility: hidden;\" });\r\n\r\n\t\tthis._popup = puma(\"<div class='comboBox_divPopup vrPopup' id='\" + element.id + \"_divPopup' style='border: solid 1px #ccc; display: none; position: absolute;  border-radius: 4px; box-shadow: 0 5px 10px rgb(0 0 0 / 20%); padding: 5px; overflow-y: auto; z-index: 9999999;  background-color: #fff; height: fit-content;'></div>\").vrAppendToPuma((shadowRoot() != null) ? shadowRoot() : document.body)[0];\r\n\r\n\t\tthis._items = [];\r\n\r\n\t\tif (options.border)\r\n\t\t\tthis.element().style.cssText += \"border: solid 1px #ccc;\";\r\n\r\n\t\tlet timeout = 0;\r\n\t\tthis._txtInput = createTextBox({\r\n\t\t\tcssContainer: \"width: auto !important;\",\r\n\t\t\tcss: \"width: 20px; min-width: 20px !important; max-width: \" + this.width() + \"px; padding-left: 0px; padding-right: 0px;\",\r\n\t\t\tonKeyUp: (e) =>\r\n\t\t\t{\r\n\t\t\t\t//#region Ctrl+V (paste support)\r\n\t\t\t\tif (e.key == KeyEnum.ArrowRight || e.key == KeyEnum.ArrowLeft || e.key == KeyEnum.ArrowUp\r\n\t\t\t\t\t|| e.key == KeyEnum.Control || e.ctrlKey)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!(e.key == \"v\" && e.ctrlKey))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.manageInputWidth();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\r\n\r\n\t\t\t\tif (options!.comboSettings != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\t\ttimeout = window.setTimeout(() =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet text = String(e.value);\r\n\t\t\t\t\t\tif (options!.comboSettings == null || options!.comboSettings.webService == null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t//#region Items\r\n\t\t\t\t\t\t\tlet filteredItems = this.filter(text, this.element());\r\n\t\t\t\t\t\t\tif (filteredItems.length > 0)\r\n\t\t\t\t\t\t\t\tthis.open();\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tthis.close();\r\n\r\n\t\t\t\t\t\t\tif (e.key == \"v\" && e.ctrlKey && filteredItems.length == 1)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.valueCombo(String(filteredItems[0].value));\r\n\t\t\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (options!.comboSettings.webService != null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t//#region WebService\r\n\t\t\t\t\t\t\tif (e.key != KeyEnum.Enter)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (text == \"\")\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis._items = [];\r\n\t\t\t\t\t\t\t\t\tpuma(this._popup).find(\"ul\").remove();\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlet selectionStart = (this.element() as HTMLInputElement).selectionStart;\r\n\t\t\t\t\t\t\t\t\tlet selectionEnd = (this.element() as HTMLInputElement).selectionEnd;\r\n\t\t\t\t\t\t\t\t\tif (!(selectionStart == 0 && selectionEnd == (this.element() as HTMLInputElement).value.length))\r\n\t\t\t\t\t\t\t\t\t\tthis.doAjaxCall(text);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//#endregion\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonEnterKey: (e) => \r\n\t\t\t{\r\n\t\t\t\tif (options!.comboSettings != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (options!.comboSettings.freeText)\r\n\t\t\t\t\t\tthis.manageInput(e.sender, e.sender.value<string>());\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis._txtInput.clear();\r\n\t\t\t\t\t\tthis.placeholder(options!.placeholder);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.manageInput(e.sender, e.sender.value<string>());\r\n\t\t\t},\r\n\t\t\tonKeyDown: (e) => \r\n\t\t\t{\r\n\t\t\t\tthis.manageInputWidth()\r\n\r\n\t\t\t\tif (options!.comboSettings != null && e.key == KeyEnum.ArrowDown)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet li = puma(this._popup).find(\"li:visible\").first();\r\n\t\t\t\t\tli.focus();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this.element())\r\n\r\n\t\tif (options.comboSettings != null && options.comboSettings.items != null)\r\n\t\t\tthis.comboItems(options.comboSettings.items);\r\n\r\n\t\tpuma(document.body).on(\"click\", (e: JQuery.ClickEvent) =>\r\n\t\t{\r\n\t\t\tif (this._txtInput.value() != \"\" && e.target.id != this._txtInput.element().id && !e.target.classList.contains(\"vrAutoCompleteBoxItemText\") && !e.target.classList.contains(\"comboBox_divPopup\"))\r\n\t\t\t{\r\n\t\t\t\tthis.manageInput(this._txtInput, this._txtInput.value())\r\n\t\t\t\tthis.blurEvent();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//#region Focus\r\n\t\tpuma(this.element()).on(\"focus\", (e: JQuery.FocusEvent) => this.focus());\r\n\t\t//#endregion\r\n\r\n\t\t//#region Value & Placeholder\r\n\t\tif (options.placeholder != null)\r\n\t\t\tthis.placeholder(options.placeholder);\r\n\r\n\t\tif (options.value != null)\r\n\t\t\tthis.items(options.value);\r\n\t\t//#endregion\r\n\r\n\t\t//#region Rows\r\n\t\tif (options.rows != null)\r\n\t\t{\r\n\t\t\tlet maxHeight = 0;\r\n\t\t\tfor (let i = 0; i < options.rows; i++)\r\n\t\t\t{\r\n\t\t\t\tif (i == 0) maxHeight += 27;\r\n\t\t\t\telse maxHeight += 22;\r\n\t\t\t}\r\n\t\t\tthis.element().style.cssText += \"max-height: \" + maxHeight + \"px;\";\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\tlet baseListener = (shadowRoot() != null) ? shadowRoot() : document;\r\n\t\tbaseListener!.addEventListener(\"scroll\", (e) =>\r\n\t\t{\r\n\t\t\tif (!puma(e.target).hasClass(\"comboBox_divPopup\") && puma(this._popup).is(\":visible\"))\r\n\t\t\t\tthis.close();\r\n\t\t}, true);\r\n\t}\r\n\r\n\t//#region ManageInput\r\n\tprivate manageInput(sender: any, text: string, value?: string | null)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tsender.clear();\r\n\t\tthis.placeholder(options.placeholder);\r\n\r\n\t\tif (text != \"\")\r\n\t\t{\r\n\t\t\tfor (let txt of text.split(\",\"))\r\n\t\t\t{\r\n\t\t\t\tlet item = new AutoCompleteBoxItem();\r\n\t\t\t\titem.text = txt.trim();\r\n\t\t\t\tif (value != null) item.value = value;\r\n\t\t\t\tthis.addItem(item);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Reposition input at the end\r\n\t\tpuma(this._txtInput.container()).vrAppendToPuma(this.element());\r\n\r\n\t\twindow.setTimeout(() => this.focus());\r\n\t\tthis.close();\r\n\t}\r\n\r\n\tprivate manageInputWidth()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tlet value = this._txtInput.value<string>();\r\n\t\tif (value != \"\")\r\n\t\t\tthis._txtInput.element().style.width = (this.textWidth(value) + 20) + \"px\";\r\n\t\telse\r\n\t\t\tthis.placeholder(options.placeholder);\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Items\r\n\titems(items?: string[] | AutoCompleteBoxItem[])\r\n\t{\r\n\t\tif (items != null)\r\n\t\t{\r\n\t\t\tfor (let item of items)\r\n\t\t\t\tthis.addItem(item);\r\n\t\t}\r\n\t\treturn this._items;\r\n\t}\r\n\r\n\taddItem(item: string | AutoCompleteBoxItem)\r\n\t{\r\n\t\tif (item == null || item == \"\")\r\n\t\t\treturn;\r\n\r\n\t\tlet options = this.getOptions();\r\n\t\tthis.placeholder(\"\");\r\n\r\n\t\tlet realItem: AutoCompleteBoxItem = item as any;\r\n\t\tif (typeof (item) == \"string\")\r\n\t\t{\r\n\t\t\trealItem = new AutoCompleteBoxItem();\r\n\t\t\trealItem.text = item;\r\n\t\t\trealItem.value = item;\r\n\t\t}\r\n\r\n\t\tif (realItem.value == null)\r\n\t\t\trealItem.value = realItem.text;\r\n\r\n\t\tlet divItem = div(this.element(), { class: \"vrAutoCompleteBoxItem\", attributes: [{ name: \"value\", value: realItem.value }] });\r\n\t\tlet spanItemText = span(divItem, { content: realItem.text, class: \"vrAutoCompleteBoxItemText\" });\r\n\r\n\t\t//#region Tooltip\r\n\t\tif (options.tooltip)\r\n\t\t\tpuma(divItem).attr(\"title\", realItem.text);\r\n\t\t//#endregion\r\n\r\n\t\t//#region Color\r\n\t\tlet backgroundColor = options.itemSettings!.backgroundColor!;\r\n\t\tlet textColor = options.itemSettings!.textColor!;\r\n\t\tlet border = options.itemSettings!.border!;\r\n\t\tlet bold = options.itemSettings!.bold!;\r\n\t\tlet deleteIconColor = options.itemSettings!.deleteIconColor!;\r\n\t\tlet maxWidth = options.itemSettings!.maxWidth;\r\n\r\n\t\tif (realItem.settings != null)\r\n\t\t{\r\n\t\t\tif (realItem.settings.backgroundColor != null) backgroundColor = realItem.settings.backgroundColor;\r\n\t\t\tif (realItem.settings.textColor != null) textColor = realItem.settings.textColor;\r\n\t\t\tif (realItem.settings.border != null) border = realItem.settings.border;\r\n\t\t\tif (realItem.settings.bold != null) bold = realItem.settings.bold;\r\n\t\t\tif (realItem.settings.deleteIconColor != null) deleteIconColor = realItem.settings.deleteIconColor;\r\n\t\t\tif (realItem.settings.maxWidth != null) maxWidth = realItem.settings.maxWidth;\r\n\t\t}\r\n\r\n\t\tdivItem.style.cssText += \"background-color: \" + backgroundColor + \"; color: \" + textColor + \"; border: \" + border + \";\";\r\n\t\tif (bold)\r\n\t\t\tdivItem.style.cssText += \"font-weight: 600;\";\r\n\r\n\t\tif (maxWidth != null)\r\n\t\t\tspanItemText.style.cssText += \"max-width: \" + maxWidth + \"px;\";\r\n\t\t//#endregion\r\n\r\n\t\t//#region Click to edit\r\n\t\tpuma(divItem).on(\"click\", (e: JQuery.ClickEvent) =>\r\n\t\t{\r\n\t\t\t//#region ItemClick event\r\n\t\t\tif (options!.onItemClick != null)\r\n\t\t\t{\r\n\t\t\t\tlet itemClickEvent = new AutoCompleteBoxItemClickEvent();\r\n\t\t\t\titemClickEvent.sender = this;\r\n\t\t\t\titemClickEvent.item = { item: realItem, element: divItem };\r\n\t\t\t\titemClickEvent.text = realItem.text;\r\n\t\t\t\toptions!.onItemClick(itemClickEvent);\r\n\r\n\t\t\t\tif (itemClickEvent.isDefaultPrevented())\r\n\t\t\t\t{\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\t// Position input at the current item position\r\n\t\t\tpuma(this._txtInput.container()).vrInsertBeforePuma(divItem);\r\n\r\n\t\t\tthis.removeItem(realItem.value!);\r\n\r\n\t\t\t//#region Input value & width\r\n\t\t\tlet width = this.textWidth(realItem.text);\r\n\r\n\t\t\tthis._txtInput.value(realItem.text, false);\r\n\t\t\tthis._txtInput.element().style.width = (width + 20) + \"px\";\r\n\t\t\t(this._txtInput.element() as HTMLInputElement).select();\r\n\t\t\t//#endregion\r\n\r\n\t\t\tthis.focus();\r\n\t\t});\r\n\t\t//#endregion\r\n\r\n\t\t//#region Delete\r\n\t\tcreateIcon({\r\n\t\t\tvalue: IconClassRegular.Xmark,\r\n\t\t\tcssContainer: \"margin-left: 5px; top: -1px;\",\r\n\t\t\tcolor: deleteIconColor,\r\n\t\t\tonClick: (e) => this.removeItem(realItem.value!)\r\n\t\t}, divItem);\r\n\t\t//#endregion\r\n\r\n\t\tpuma(divItem).vrInsertBeforePuma(this._txtInput.container())\r\n\r\n\t\tif (realItem.value != null)\r\n\t\t\tpuma(divItem).attr(\"value\", realItem.value);\r\n\r\n\t\tthis._items.push(realItem);\r\n\r\n\t\t//#region Item added event\r\n\t\tif (options!.onItemAdded != null)\r\n\t\t{\r\n\t\t\tlet itemAddedEvent = new AutoCompleteBoxItemAddedEvent();\r\n\t\t\titemAddedEvent.sender = this;\r\n\t\t\titemAddedEvent.item = { item: realItem, element: divItem };\r\n\t\t\toptions!.onItemAdded(itemAddedEvent);\r\n\t\t}\r\n\t\t//#endregion\r\n\t}\r\n\r\n\tremoveItem(value: string)\r\n\t{\r\n\t\tthis._items.vrDeleteAllBy(k => k.value == value);\r\n\t\tpuma(this.container()).find(\".vrAutoCompleteBoxItem[value='\" + value + \"']\").remove();\r\n\r\n\t\tlet options = this.getOptions();\r\n\t\tif (this.items().length == 0)\r\n\t\t\tthis.placeholder(options.placeholder);\r\n\r\n\t\t//#region Item removed event\r\n\t\tif (options!.onItemRemoved != null)\r\n\t\t{\r\n\t\t\tlet itemAddedEvent = new AutoCompleteBoxItemAddedEvent();\r\n\t\t\titemAddedEvent.sender = this;\r\n\t\t\titemAddedEvent.item = this.item(value);\r\n\t\t\toptions!.onItemRemoved(itemAddedEvent);\r\n\t\t}\r\n\t\t//#endregion\r\n\t}\r\n\r\n\titem(value: string)\r\n\t{\r\n\t\tlet item = new AutoCompleteBoxItemInfo();\r\n\r\n\t\tlet realItem = this._items.filter(k => k.value == value)[0];\r\n\t\tlet index = this.items().indexOf(realItem);\r\n\t\titem.item = this.items()[index];\r\n\r\n\t\titem.element = puma(this.container()).find(\".vrAutoCompleteBoxItem[value='\" + value + \"']\")[0];\r\n\t\treturn item;\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Color\r\n\tcolor(value: string, settings: AutoCompleteBoxItemSettings)\r\n\t{\r\n\t\tlet item = this.item(value);\r\n\t\tif (item.element != null && settings != null)\r\n\t\t{\r\n\t\t\tif (settings.backgroundColor != null) item.element.style.cssText += \"background-color: \" + settings.backgroundColor + \";\";\r\n\t\t\tif (settings.textColor != null) item.element.style.cssText += \"color: \" + settings.textColor + \";\";\r\n\t\t\tif (settings.border != null) item.element.style.cssText += \"border: \" + settings.border + \";\";\r\n\t\t\tif (settings.bold) item.element.style.cssText += \"font-weight: 600;\";\r\n\t\t}\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Value\r\n\ttext()\r\n\t{\r\n\t\treturn this.items().map(k => k.text);\r\n\t}\r\n\r\n\tvalue(items?: string[] | AutoCompleteBoxItem[])\r\n\t{\r\n\t\tif (items != null)\r\n\t\t\tthis.items(items);\r\n\r\n\t\treturn this.items().map(k => k.value);\r\n\t}\r\n\r\n\tplaceholder(value?: string): string\r\n\t{\r\n\t\tif (value != null)\r\n\t\t{\r\n\t\t\tlet width = this.textWidth(value);\r\n\t\t\t(this._txtInput.element() as HTMLInputElement).placeholder = value;\r\n\t\t\tthis._txtInput.element().style.width = (width + 20) + \"px\";\r\n\t\t}\r\n\t\treturn (this._txtInput.element() as HTMLInputElement).placeholder;\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Other\r\n\tprivate textWidth(value: string)\r\n\t{\r\n\t\tlet width = 0;\r\n\t\tthis._spanForWidth.innerHTML = value.replace(/\\s/g, \"&nbsp;\");\r\n\t\twidth = this._spanForWidth.offsetWidth;\r\n\t\tthis._spanForWidth.innerHTML = \"\";\r\n\r\n\t\treturn width;\r\n\t}\r\n\r\n\tfocus()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (!puma(this.element()).vrHasScrollBar())\r\n\t\t{\r\n\t\t\tthis._txtInput.focus();\r\n\t\t\tthis.focusEvent();\r\n\r\n\t\t\tif (this._txtInput.value() == \"\")\r\n\t\t\t\tthis.placeholder(options.placeholder);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate focusEvent()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (options.onFocus != null)\r\n\t\t{\r\n\t\t\tlet focusEvent = new AutoCompleteBoxFocusEvent();\r\n\t\t\tfocusEvent.sender = this;\r\n\t\t\tfocusEvent.element = this._txtInput.element();\r\n\t\t\toptions.onFocus(focusEvent);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate blurEvent()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (options.onBlur != null)\r\n\t\t{\r\n\t\t\tlet focusEvent = new AutoCompleteBoxBlurEvent();\r\n\t\t\tfocusEvent.sender = this;\r\n\t\t\tfocusEvent.element = this._txtInput.element();\r\n\t\t\toptions.onBlur(focusEvent);\r\n\t\t}\r\n\t}\r\n\r\n\tclear()\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tthis._items = [];\r\n\r\n\t\tpuma(this.container()).find(\".vrAutoCompleteBoxItem\").remove();\r\n\t\tthis._txtInput.clear();\r\n\r\n\t\tthis.placeholder(options.placeholder);\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Popup webservice\r\n\tprivate close(): void\r\n\t{\r\n\t\tpuma(this._popup).hide();\r\n\t}\r\n\r\n\tprivate open(): void\r\n\t{\r\n\t\tpuma(this._popup).find(\".vrComboBoxSelectedComboValue\").removeClass(\"vrComboBoxSelectedComboValue\");\r\n\t\tif (!this.enabled())\r\n\t\t\treturn;\r\n\r\n\t\tif (puma(this._popup).is(\":visible\"))\r\n\t\t\treturn;\r\n\r\n\t\tpuma(this._popup).show();\r\n\t\tsuper.settingPopup(this._popup);\r\n\r\n\t\tlet minWidth = puma(this.element()).width();\r\n\t\tthis._popup.style.cssText += \"min-width: \" + minWidth + \"px;\";\r\n\t}\r\n\r\n\tprivate doAjaxCall(text = \"\"): void\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (options.comboSettings == null || options.comboSettings.webService == null)\r\n\t\t\treturn;\r\n\r\n\t\tif (options.comboSettings.webService.typedTextPropertyName == null) options.comboSettings.webService.typedTextPropertyName = \"text\";\r\n\t\tif (options.comboSettings.webService.typedValuePropertyName == null) options.comboSettings.webService.typedValuePropertyName = \"value\";\r\n\t\tif (options.comboSettings.webService.itemsPropertyName == null) options.comboSettings.webService.itemsPropertyName = \"items\";\r\n\r\n\t\tlet request: any = {};\r\n\t\trequest[options.comboSettings.webService.typedTextPropertyName] = text;\r\n\r\n\t\tif (options.comboSettings.webService.authKey == null)\r\n\t\t\toptions.comboSettings.webService.authKey = \"\";\r\n\r\n\t\tif (options.comboSettings.webService.parameters != null)\r\n\t\t{\r\n\t\t\tlet parameters = options.comboSettings.webService.parameters();\r\n\t\t\tlet jsonParameters = Object.getOwnPropertyNames(parameters);\r\n\t\t\tfor (let param of jsonParameters)\r\n\t\t\t\trequest[param] = parameters[param];\r\n\t\t}\r\n\r\n\t\tthis._lastAjaxCallGuid = UtilityManager.createGuid();\r\n\t\trequest.guid = this._lastAjaxCallGuid;\r\n\t\tUtilityManager.doAjaxCall(\r\n\t\t\t{\r\n\t\t\t\tmode: WebApiModeEnum.Async,\r\n\t\t\t\tauthKey: options.comboSettings.webService.authKey,\r\n\t\t\t\tmethod: options.comboSettings.webService.method,\r\n\t\t\t\trequest: request\r\n\t\t\t},\r\n\t\t\t(response: any) =>\r\n\t\t\t{\r\n\t\t\t\tif (this._lastAjaxCallGuid != null && response.guid != null && this._lastAjaxCallGuid != response.guid)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis._typedTextWebService = text;\r\n\t\t\t\tlet items = response[options!.comboSettings!.webService!.itemsPropertyName!];\r\n\t\t\t\tthis.comboItems(items);\r\n\r\n\t\t\t\tif (items.length > 0)\r\n\t\t\t\t\tthis.open();\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.close();\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\tprivate comboItems(items?: ComboBoxItem[])\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (items != null)\r\n\t\t{\r\n\t\t\tthis._comboItems = items;\r\n\r\n\t\t\tif (this.getRootItems().length == 0)\r\n\t\t\t\tpuma(this._popup).addClass(\"vrComboBoxFlat\");\r\n\t\t\telse\r\n\t\t\t\tpuma(this._popup).removeClass(\"vrComboBoxFlat\");\r\n\r\n\t\t\tif (options.comboSettings!.webService == null)\r\n\t\t\t{\r\n\t\t\t\tthis.drawDataSource();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif (this._typedTextWebService == null) this._items = [];\r\n\t\t\t\tthis.drawDataSource();\r\n\t\t\t\tthis._typedTextWebService = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this._comboItems;\r\n\t}\r\n\r\n\tprivate getOnlyChildrenItems(parentItem: ComboBoxItem): ComboBoxItem[]\r\n\t{\r\n\t\treturn this.comboItems().filter(k => k.parentValue != null && k.parentValue == parentItem.value);\r\n\t}\r\n\r\n\tprivate getRootItems(): ComboBoxItem[]\r\n\t{\r\n\t\tlet parentItems: ComboBoxItem[] = [];\r\n\t\tfor (let item of this.comboItems())\r\n\t\t{\r\n\t\t\tif (item == null)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tlet parentValue = item.parentValue;\r\n\t\t\twhile (parentValue != null)\r\n\t\t\t{\r\n\t\t\t\tlet parentItem = this.comboItems().filter(k => k.value == parentValue)[0];\r\n\t\t\t\tif (!parentItems.includes(parentItem))\r\n\t\t\t\t\tparentItems.push(parentItem);\r\n\r\n\t\t\t\tparentValue = (parentItem != null) ? parentItem.parentValue : undefined;\r\n\t\t\t\tif (parentItem != null && parentValue == parentItem.value)\r\n\t\t\t\t\tparentValue = undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn parentItems;\r\n\t}\r\n\r\n\tprivate getRootValues(): string[]\r\n\t{\r\n\t\treturn this.getRootItems().filter(k => k != null).map(k => String(k.value));\r\n\t}\r\n\r\n\tprivate drawDataSource(searchedText?: string | null): void\r\n\t{\r\n\t\tpuma(this._popup).find(\".vrComboBoxUl\").remove();\r\n\r\n\t\tlet items = this.comboItems();\r\n\t\tif (searchedText != null)\r\n\t\t\titems = this.getFilteredArrayByInputText(searchedText);\r\n\r\n\t\tif (items.length == 1 && items[0] == null)\r\n\t\t\treturn;\r\n\r\n\t\tthis._dictionaryValueLi = new Map<string, HTMLElement[]>();\r\n\t\tthis._dictionaryLiValue = new Map<HTMLElement, string>();\r\n\t\titems = items.filter(k => k.parentValue == null);\r\n\t\tthis.drawItems(items, this._popup);\r\n\t}\r\n\r\n\tprivate drawItems(items: ComboBoxItem[], elementToAppend: HTMLElement): void\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (items.length == 0)\r\n\t\t\treturn;\r\n\r\n\t\tlet ul = puma(\"<ul class='vrComboBoxUl'></ul>\").vrAppendToPuma(elementToAppend);\r\n\t\tfor (let item of items)\r\n\t\t{\r\n\t\t\tif (item.value == null)\r\n\t\t\t\titem.value = item.text;\r\n\r\n\t\t\tlet li = puma(\"<li class='vrComboBoxLi' tabindex='-1'></li>\").vrAppendToPuma(ul);\r\n\t\t\tthis._dictionaryLiValue.set(li[0], String(item.value));\r\n\t\t\tif (this._dictionaryValueLi.has(String(item.value)))\r\n\t\t\t{\r\n\t\t\t\tlet actualLiList = this._dictionaryValueLi.get(String(item.value))!;\r\n\t\t\t\tactualLiList.push(li[0]);\r\n\t\t\t\tthis._dictionaryValueLi.set(String(item.value), actualLiList);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tthis._dictionaryValueLi.set(String(item.value), [li[0]]);\r\n\r\n\t\t\t//#region Key support\r\n\t\t\tpuma(li).on(\"focusin\", (e: JQuery.FocusEvent) => \r\n\t\t\t{\r\n\t\t\t\tpuma(this._popup).find(\".vrComboBoxSelectedComboValue\").removeClass(\"vrComboBoxSelectedComboValue\");\r\n\t\t\t\tpuma(e.target).addClass(\"vrComboBoxSelectedComboValue keydownFocus\");\r\n\t\t\t});\r\n\t\t\tpuma(li).on(\"keydown\", (e: JQuery.KeyDownEvent) =>\r\n\t\t\t{\r\n\t\t\t\tif (e.key == KeyEnum.ArrowDown)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet next = puma(e.currentTarget).next();\r\n\t\t\t\t\tif (next.length == 0)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tpuma(this._popup).find(\".vrComboBoxSelectedComboValue\").removeClass(\"vrComboBoxSelectedComboValue\");\r\n\t\t\t\t\twhile (!next.is(\":visible\"))\r\n\t\t\t\t\t\tnext = puma(next).next();\r\n\r\n\t\t\t\t\tnext.focus();\r\n\t\t\t\t}\r\n\t\t\t\telse if (e.key == KeyEnum.ArrowUp)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet prev = puma(e.currentTarget).prev();\r\n\t\t\t\t\tif (prev.length == 0)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tpuma(this._popup).find(\".vrComboBoxSelectedComboValue\").removeClass(\"vrComboBoxSelectedComboValue\");\r\n\t\t\t\t\twhile (!prev.is(\":visible\"))\r\n\t\t\t\t\t\tprev = puma(prev).prev();\r\n\r\n\t\t\t\t\tprev.focus();\r\n\t\t\t\t}\r\n\t\t\t\telse if (e.key == KeyEnum.Enter)\r\n\t\t\t\t\tpuma(e.currentTarget).find(\".vrComboBoxItemText\").click();\r\n\t\t\t});\r\n\t\t\t//#endregion\r\n\r\n\t\t\t//#region Tree mode\r\n\t\t\tif (options.comboSettings!.treeMode == ComboBoxTreeModeEnum.AllCollapsed)\r\n\t\t\t{\r\n\t\t\t\tif (item.parentValue != null)\r\n\t\t\t\t\tpuma(li).closest(\".vrComboBoxUl\").hide();\r\n\t\t\t}\r\n\t\t\telse if (options.comboSettings!.treeMode == ComboBoxTreeModeEnum.OnlyFirstLevelExpanded)\r\n\t\t\t{\r\n\t\t\t\tif (puma(li).parents(\".vrComboBoxUl\").length > 2)\r\n\t\t\t\t\tpuma(li).closest(\".vrComboBoxUl\").hide();\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\tlet children = this.getOnlyChildrenItems(item);\r\n\t\t\tif (children.length > 0)\r\n\t\t\t{\r\n\t\t\t\t//#region Icon expand/collapse\r\n\t\t\t\tlet iconClassForDiv = \"\";\r\n\t\t\t\tlet iconClass = IconClassLight.CaretRight;\r\n\t\t\t\tif (options.comboSettings!.treeMode == ComboBoxTreeModeEnum.AllCollapsed)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (item.parentValue != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticonClass = IconClassLight.CaretRight;\r\n\t\t\t\t\t\ticonClassForDiv = \"caret-right\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (options.comboSettings!.treeMode == ComboBoxTreeModeEnum.OnlyFirstLevelExpanded)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (puma(li).parents(\".vrComboBoxUl\").length == 1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticonClass = IconClassLight.CaretDown;\r\n\t\t\t\t\t\ticonClassForDiv = \"caret-down\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticonClass = IconClassLight.CaretRight;\r\n\t\t\t\t\t\ticonClassForDiv = \"caret-right\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\ticonClass = IconClassLight.CaretDown;\r\n\t\t\t\t\ticonClassForDiv = \"caret-down\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet divIcon = puma(\"<div class='vrComboBoxDivIconExpand \" + iconClassForDiv + \"'></div>\").vrAppendToPuma(li);\r\n\t\t\t\tpuma(UtilityManager.createIcon(iconClass)).vrAppendToPuma(divIcon);\r\n\t\t\t\tpuma(divIcon).click((e: any) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tpuma(e.currentTarget).children(\"i\").removeClass(IconClassLight.CaretRight + \" \" + IconClassLight.CaretDown);\r\n\t\t\t\t\tpuma(e.currentTarget).removeClass(\"caret-right caret-down\");\r\n\r\n\t\t\t\t\tlet ulChildren = puma(e.currentTarget).siblings(\".vrComboBoxUl\");\r\n\t\t\t\t\tif (ulChildren.first().is(\":visible\"))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tulChildren.hide();\r\n\t\t\t\t\t\tpuma(e.currentTarget).children(\"i\").addClass(IconClassLight.CaretRight);\r\n\t\t\t\t\t\tpuma(e.currentTarget).addClass(\"caret-right\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tulChildren.show();\r\n\t\t\t\t\t\tpuma(e.currentTarget).children(\"i\").addClass(IconClassLight.CaretDown);\r\n\t\t\t\t\t\tpuma(e.currentTarget).addClass(\"caret-down\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//#endregion\r\n\t\t\t}\r\n\r\n\t\t\tlet comboItem = puma(\"<div class='vrComboBoxDivItemContainer'></div>\").vrAppendToPuma(li);\r\n\r\n\t\t\tlet rowText = item.text.replace(/'/g, \"&#39;\");\r\n\t\t\tif (options.comboSettings != null && options.comboSettings.template != null)\r\n\t\t\t{\r\n\t\t\t\tlet templateEvent: any = {};\r\n\t\t\t\ttemplateEvent.dataItem = item;\r\n\t\t\t\ttemplateEvent.element = comboItem[0];\r\n\t\t\t\ttemplateEvent.sender = this;\r\n\t\t\t\trowText = options.comboSettings.template(templateEvent);\r\n\t\t\t}\r\n\r\n\t\t\tlet comboItemText = puma(\"<span title='\" + item.text + \"' text='\" + item.text.replace(/'/g, \"&#39;\") + \"' class='vrComboBoxItemText'>\" + rowText + \"</span>\").vrAppendToPuma(comboItem);\r\n\t\t\tpuma(comboItemText).click((e: any) =>\r\n\t\t\t{\r\n\t\t\t\tlet value = this._dictionaryLiValue.get(puma(e.currentTarget).closest(\"li\")[0]);\r\n\t\t\t\tlet item = this.comboItems().filter(k => k.value == value)[0];\r\n\t\t\t\tif (item != null && !this.getRootValues().includes(String(item.value)))\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.valueCombo(String(item.value));\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tUtilityManager.interval(() => puma(this.element()).toggleClass(\"errorInput\"), 200, 800);\r\n\t\t\t});\r\n\r\n\t\t\tif (children.length > 0)\r\n\t\t\t\tthis.drawItems(this.getOnlyChildrenItems(item), li);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate valueCombo(value: string | null)\r\n\t{\r\n\t\tif (value === null)\r\n\t\t{\r\n\t\t\tthis.clear();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet comboItemToSelect: ComboBoxItem = this.comboItems().filter(k => k.value == value)[0];\r\n\t\tthis._txtInput.value(comboItemToSelect.text, false)\r\n\t\tthis.manageInput(this._txtInput, this._txtInput.value(), String(comboItemToSelect.value))\r\n\t}\r\n\r\n\tprivate filter(text: string, element: HTMLElement)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tlet selectionStart = (element as HTMLInputElement).selectionStart;\r\n\t\tlet selectionEnd = (element as HTMLInputElement).selectionEnd;\r\n\t\tlet itemsToReturn: ComboBoxItem[] = [];\r\n\r\n\t\tif (text == \"\")\r\n\t\t{\r\n\t\t\tpuma(this._popup).find(\"li\").show();\r\n\t\t\tif (options.comboSettings!.webService != null)\r\n\t\t\t{\r\n\t\t\t\tthis._items = [];\r\n\t\t\t\tpuma(this._popup).find(\".vrComboBoxUl\").remove();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (!(selectionStart == 0 && selectionEnd == (element as HTMLInputElement).value.length))\r\n\t\t{\r\n\t\t\tpuma(this._popup).find(\"li\").hide();\r\n\r\n\t\t\tlet items = this.getFilteredArrayByInputText(text);\r\n\t\t\titemsToReturn = items;\r\n\r\n\t\t\tlet values = items.map(k => k.value);\r\n\t\t\tlet texts = items.map(k => k.text);\r\n\r\n\t\t\tfor (let item of items)\r\n\t\t\t{\r\n\t\t\t\tlet parentValue = item.parentValue;\r\n\t\t\t\twhile (parentValue != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet parentItem = this.comboItems().filter(k => k.value == parentValue)[0];\r\n\t\t\t\t\tif (!values.includes(parentValue))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalues.push(parentValue);\r\n\t\t\t\t\t\ttexts.push(parentItem.text);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparentValue = (parentItem != null) ? parentItem.parentValue : undefined;\r\n\t\t\t\t\tif (parentValue == parentItem.value)\r\n\t\t\t\t\t\tparentValue = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (let comboItemText of Array.from<HTMLSpanElement>(puma(this._popup).find(\".vrComboBoxItemText\")))\r\n\t\t\t{\r\n\t\t\t\tif (texts.includes(String(puma(comboItemText).attr(\"text\")).trim()))\r\n\t\t\t\t{\r\n\t\t\t\t\tpuma(comboItemText).closest(\".vrComboBoxLi\").show();\r\n\t\t\t\t\tpuma(comboItemText).closest(\".vrComboBoxLi\").closest(\".vrComboBoxUl\").show();\r\n\r\n\t\t\t\t\tpuma(comboItemText).closest(\".vrComboBoxLi\").find(\".vrComboBoxDivIconExpand\").removeClass(\"caret-right caret-down\");\r\n\t\t\t\t\tpuma(comboItemText).closest(\".vrComboBoxLi\").find(\".vrComboBoxDivIconExpand\").children(\"i\").removeClass(IconClassLight.CaretRight + \" \" + IconClassLight.CaretDown);\r\n\t\t\t\t\tpuma(comboItemText).closest(\".vrComboBoxLi\").find(\".vrComboBoxDivIconExpand\").addClass(\"caret-down\");\r\n\t\t\t\t\tpuma(comboItemText).closest(\".vrComboBoxLi\").find(\".vrComboBoxDivIconExpand\").children(\"i\").addClass(IconClassLight.CaretDown);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn itemsToReturn;\r\n\t}\r\n\r\n\tprivate getFilteredArrayByInputText(value: string): ComboBoxItem[]\r\n\t{\r\n\t\tvalue = value.toLowerCase();\r\n\t\tlet filteredArray: ComboBoxItem[] = [];\r\n\t\tlet arrayWhereSearch = this.comboItems().map(k => String(k.text).toLowerCase());\r\n\t\tarrayWhereSearch!.forEach((k, index) => \r\n\t\t{\r\n\t\t\tif (k.indexOf(value) != -1)\r\n\t\t\t\tfilteredArray.push(this.comboItems()[index]);\r\n\t\t});\r\n\t\treturn filteredArray;\r\n\t}\r\n\t//#endregion\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.options<AutoCompleteBoxOptions>();\r\n\t}\r\n}\r\n\r\n//#region Classes\r\nclass AutoCompleteBoxEvent extends VrControlsEvent\r\n{\r\n\tsender: AutoCompleteBox;\r\n}\r\n\r\nclass AutoCompleteBoxItemClickEvent extends AutoCompleteBoxEvent\r\n{\r\n\titem: AutoCompleteBoxItemInfo;\r\n\ttext: string;\r\n}\r\n\r\nclass AutoCompleteBoxItemAddedEvent extends AutoCompleteBoxEvent\r\n{\r\n\titem: AutoCompleteBoxItemInfo;\r\n}\r\n\r\nclass AutoCompleteBoxItemRemovedEvent extends AutoCompleteBoxEvent\r\n{\r\n\titem: AutoCompleteBoxItemInfo;\r\n}\r\n\r\nclass AutoCompleteBoxItemInfo\r\n{\r\n\titem: AutoCompleteBoxItem;\r\n\telement: HTMLElement;\r\n}\r\n\r\nclass AutoCompleteBoxFocusEvent extends AutoCompleteBoxEvent\r\n{\r\n\tsender: AutoCompleteBox;\r\n\telement: HTMLElement;\r\n}\r\n\r\nclass AutoCompleteBoxBlurEvent extends AutoCompleteBoxEvent\r\n{\r\n\tsender: AutoCompleteBox;\r\n\telement: HTMLElement;\r\n}\r\n//#endregion","import { VrControl } from \"../common\";\r\nimport { ChartAreaSettings, ChartDataLabelAlignEnum, ChartDataLabelsAnchorEnum, ChartDataLabelsSettings, ChartLegendSettings, ChartTitleSettings, ChartTooltipSettings, ChartTypeEnum, ControlTypeEnum, ChartFont, ChartAspectRatioSettings, ChartOptions, ChartAxisFormatterEvent, ChartLegendClickEvent, ChartLegendLeaveEvent, ChartLegendHoverEvent, ChartLabelClickEvent, ChartLabelLeaveEvent, ChartLabelHoverEvent, ChartDataSource, puma } from \"../vr\";\r\n\r\ndeclare var Chart: any;\r\ndeclare var ChartDataLabels: any;\r\n\r\n//#region Control\r\nexport class ChartVr extends VrControl\r\n{\r\n\tprivate _chart: any;\r\n\tprivate _plugins: ChartPlugin;\r\n\tprivate _datasource: ChartDataSource[];\r\n\r\n\tconstructor(element: HTMLElement, options?: ChartOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new ChartOptions();\r\n\r\n\t\tif (options.width == null) options.width = 400;\r\n\t\tif (options.height == null) options.height = 400;\r\n\t\tif (options.type == null) options.type = ChartTypeEnum.Bar;\r\n\t\tif (options.padding == null) options.padding = 0;\r\n\t\tif (options.showHideDatasetOnLegendClick == null) options.showHideDatasetOnLegendClick = true;\r\n\t\tif (options.responsive == null) options.responsive = true;\r\n\r\n\t\tif (options.stacked == null) options.stacked = false;\r\n\t\tif (options.type == ChartTypeEnum.StackedBar && options.stacked === false) options.stacked = true;\r\n\t\tif (options.stacked === true) options.stacked = { x: true, y: true };\r\n\r\n\t\tif (options.title == null) options.title = false;\r\n\t\tif (options.title === true) options.title = new ChartTitleSettings();\r\n\t\tif (options.subTitle == null) options.subTitle = false;\r\n\t\tif (options.subTitle === true) options.subTitle = new ChartTitleSettings();\r\n\r\n\t\tif (options.dataLabels == null) options.dataLabels = true;\r\n\t\tif (options.dataLabels === true) options.dataLabels = new ChartDataLabelsSettings();\r\n\r\n\t\tif (options.legend == null) options.legend = false;\r\n\t\tif (options.legend === true) options.legend = new ChartLegendSettings();\r\n\r\n\t\tif (options.tooltip == null) options.tooltip = true;\r\n\t\tif (options.tooltip === true) options.tooltip = new ChartTooltipSettings();\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.Chart);\r\n\t\tthis._plugins = new ChartPlugin();\r\n\r\n\t\t//#region Title\r\n\t\tlet title: any = undefined;\r\n\t\tif (options.title !== false)\r\n\t\t{\r\n\t\t\tif (typeof (options.title) == \"string\")\r\n\t\t\t{\r\n\t\t\t\tlet text = options.title;\r\n\t\t\t\toptions.title = new ChartTitleSettings();\r\n\t\t\t\toptions.title.text = text;\r\n\t\t\t}\r\n\r\n\t\t\t(options.title as any).display = true;\r\n\t\t\tif (options.title.color == null) options.title.color = \"#51B3E1\";\r\n\t\t\tif (options.title.font == null) options.title.font = new ChartFont();\r\n\t\t\tif (options.title.font.size == null) options.title.font.size = 16;\r\n\t\t\ttitle = options.title;\r\n\t\t}\r\n\t\tthis._plugins.title = title;\r\n\t\t//#endregion\r\n\r\n\t\t//#region SubTitle\r\n\t\tlet subTitle: any = undefined;\r\n\t\tif (options.subTitle !== false)\r\n\t\t{\r\n\t\t\tif (typeof (options.subTitle) == \"string\")\r\n\t\t\t{\r\n\t\t\t\tlet text = options.subTitle;\r\n\t\t\t\toptions.subTitle = new ChartTitleSettings();\r\n\t\t\t\toptions.subTitle.text = text;\r\n\t\t\t}\r\n\r\n\t\t\t(options.subTitle as any).display = true;\r\n\t\t\tif (options.subTitle.color == null) options.subTitle.color = \"#666666\";\r\n\t\t\tsubTitle = options.subTitle;\r\n\t\t}\r\n\t\tthis._plugins.subtitle = subTitle;\r\n\t\t//#endregion\r\n\r\n\t\t//#region Data labels\r\n\t\tlet dataLabels: any = undefined;\r\n\t\tif (options.dataLabels !== false)\r\n\t\t{\r\n\t\t\tif (options.dataLabels.color == null) options.dataLabels.color = \"#666666\";\r\n\t\t\tif (options.dataLabels.anchor == null) options.dataLabels.anchor = ChartDataLabelsAnchorEnum.End;\r\n\t\t\tif (options.dataLabels.align == null) options.dataLabels.align = ChartDataLabelAlignEnum.End;\r\n\t\t\tif (options.dataLabels.padding == null) options.dataLabels.padding = { left: 5, right: 5 };\r\n\t\t\tdataLabels = options.dataLabels;\r\n\r\n\t\t\tif (options.onDataFormatter != null)\r\n\t\t\t{\r\n\t\t\t\tdataLabels.formatter = (value: any, context: any) => \r\n\t\t\t\t{\r\n\t\t\t\t\tlet axisFormatterEvent = new ChartAxisFormatterEvent();\r\n\t\t\t\t\taxisFormatterEvent.sender = this;\r\n\t\t\t\t\taxisFormatterEvent.value = value;\r\n\t\t\t\t\taxisFormatterEvent.context = context;\r\n\t\t\t\t\treturn options!.onDataFormatter!(axisFormatterEvent);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tdataLabels.listeners = {\r\n\t\t\t\tenter: (context: any) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tcontext.hovered = true;\r\n\t\t\t\t\tif (options!.onLabelHover != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet hoverEvent = new ChartLabelHoverEvent();\r\n\t\t\t\t\t\thoverEvent.sender = this;\r\n\t\t\t\t\t\thoverEvent.context = context;\r\n\t\t\t\t\t\toptions!.onLabelHover(hoverEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tleave: (context: any) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tcontext.hovered = false;\r\n\t\t\t\t\tif (options!.onLabelLeave != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet leaveEvent = new ChartLabelLeaveEvent();\r\n\t\t\t\t\t\tleaveEvent.sender = this;\r\n\t\t\t\t\t\tleaveEvent.context = context;\r\n\t\t\t\t\t\toptions!.onLabelLeave(leaveEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tclick: (context: any) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (options!.onLabelClick != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet clickEvent = new ChartLabelClickEvent();\r\n\t\t\t\t\t\tclickEvent.sender = this;\r\n\t\t\t\t\t\tclickEvent.context = context;\r\n\t\t\t\t\t\toptions!.onLabelClick(clickEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t\tdataLabels = { display: false };\r\n\r\n\t\tthis._plugins.datalabels = dataLabels;\r\n\t\t//#endregion\r\n\r\n\t\t//#region Tooltip\r\n\t\tlet tooltip: any = { enabled: false };\r\n\t\tif (options.tooltip !== false)\r\n\t\t{\r\n\t\t\t(options.tooltip as any).enabled = true;\r\n\t\t\ttooltip = options.tooltip;\r\n\t\t}\r\n\t\tthis._plugins.tooltip = tooltip;\r\n\t\t//#endregion\r\n\r\n\t\t//#region Legend\r\n\t\tlet legend: any = { display: false };\r\n\t\tif (options.legend !== false)\r\n\t\t{\r\n\t\t\tlegend = {\r\n\t\t\t\tdisplay: true,\r\n\t\t\t\tposition: options.legend.position,\r\n\t\t\t\talign: options.legend.align,\r\n\t\t\t\tlabels: options.legend.labels,\r\n\t\t\t\ttitle: options.legend.title,\r\n\t\t\t\tonHover: (e: any, legendItem: any, legend: any) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (options!.onLegendHover != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet hoverEvent = new ChartLegendHoverEvent();\r\n\t\t\t\t\t\thoverEvent.sender = this;\r\n\t\t\t\t\t\thoverEvent.event = e;\r\n\t\t\t\t\t\thoverEvent.legendItem = legendItem;\r\n\t\t\t\t\t\thoverEvent.legend = legend;\r\n\t\t\t\t\t\toptions!.onLegendHover(hoverEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tonLeave: (e: any, legendItem: any, legend: any) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (options!.onLegendLeave != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet leaveEvent = new ChartLegendLeaveEvent();\r\n\t\t\t\t\t\tleaveEvent.sender = this;\r\n\t\t\t\t\t\tleaveEvent.event = e;\r\n\t\t\t\t\t\tleaveEvent.legendItem = legendItem;\r\n\t\t\t\t\t\tleaveEvent.legend = legend;\r\n\t\t\t\t\t\toptions!.onLegendLeave(leaveEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tonClick: (e: any, legendItem: any, legend: any) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (options!.showHideDatasetOnLegendClick)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (legend.chart.config.type === ChartTypeEnum.Pie || legend.chart.config.type === ChartTypeEnum.Donut)\r\n\t\t\t\t\t\t\tChart.controllers.doughnut.overrides.plugins.legend.onClick(e, legendItem, legend)\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tChart.defaults.plugins.legend.onClick(e, legendItem, legend);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (options!.onLegendClick != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet clickEvent = new ChartLegendClickEvent();\r\n\t\t\t\t\t\tclickEvent.sender = this;\r\n\t\t\t\t\t\tclickEvent.event = e;\r\n\t\t\t\t\t\tclickEvent.legendItem = legendItem;\r\n\t\t\t\t\t\tclickEvent.legend = legend;\r\n\t\t\t\t\t\toptions!.onLegendClick(clickEvent);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._plugins.legend = legend;\r\n\t\t//#endregion\r\n\r\n\t\t//#region Scales\r\n\t\tif (options.scales == null) options.scales = {};\r\n\t\tif (options.scales.x == null) options.scales.x = {};\r\n\t\toptions.scales.x.grace = \"5%\";\r\n\t\tif (options.scales.y == null) options.scales.y = {};\r\n\t\toptions.scales.y.grace = \"5%\";\r\n\r\n\t\tif (options.type == ChartTypeEnum.Pie || options.type == ChartTypeEnum.Donut)\r\n\t\t{\r\n\t\t\toptions.scales.x.display = false;\r\n\t\t\toptions.scales.y.display = false;\r\n\t\t}\r\n\r\n\t\tif (options.stacked !== false)\r\n\t\t{\r\n\t\t\toptions.scales.x.stacked = options.stacked.x;\r\n\t\t\toptions.scales.y.stacked = options.stacked.y;\r\n\t\t}\r\n\r\n\t\tif (options.onAxisLabelFormatter != null)\r\n\t\t{\r\n\t\t\tlet callback = (value: any, context: any) => \r\n\t\t\t{\r\n\t\t\t\tlet axisFormatterEvent = new ChartAxisFormatterEvent();\r\n\t\t\t\taxisFormatterEvent.sender = this;\r\n\t\t\t\taxisFormatterEvent.value = value;\r\n\t\t\t\taxisFormatterEvent.context = context;\r\n\t\t\t\treturn options!.onAxisLabelFormatter!(axisFormatterEvent);\r\n\t\t\t};\r\n\r\n\t\t\tif (options.type == ChartTypeEnum.HorizontalBar)\r\n\t\t\t{\r\n\t\t\t\toptions.scales.x.ticks = {\r\n\t\t\t\t\tcallback: callback\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\toptions.scales.y.ticks = {\r\n\t\t\t\t\tcallback: callback\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (options.limit != null)\r\n\t\t{\r\n\t\t\toptions.scales.x.min = options.limit.minX;\r\n\t\t\toptions.scales.x.max = options.limit.maxX;\r\n\t\t\toptions.scales.y.min = options.limit.minY;\r\n\t\t\toptions.scales.y.max = options.limit.maxY;\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Aspect ratio\r\n\t\tif (options.aspectRatio == null) options.aspectRatio = new ChartAspectRatioSettings();\r\n\t\tif (options.aspectRatio.maintain == null) options.aspectRatio.maintain = false;\r\n\t\t//#endregion\r\n\r\n\t\t//#region Data\r\n\t\tif (options.datasource == null) options.datasource = [];\r\n\t\tthis.datasource(options.datasource);\r\n\t\t//#endregion\r\n\t}\r\n\r\n\t//#region Methods\r\n\tbase64Data()\r\n\t{\r\n\t\treturn (this.element() as HTMLCanvasElement).toDataURL().replace(\"data:image/png;base64,\", \"\");\r\n\t}\r\n\r\n\tdatasource(datasource?: ChartDataSource[])\r\n\t{\r\n\t\tif (this._chart != null)\r\n\t\t\tthis._chart.destroy();\r\n\r\n\t\tlet options = this.getOptions();\r\n\t\tlet labels: string[] = [];\r\n\r\n\t\tif (datasource != null)\r\n\t\t{\r\n\t\t\tfor (let dataset of datasource)\r\n\t\t\t{\r\n\t\t\t\t//#region Area settings\r\n\t\t\t\tif (options.type == ChartTypeEnum.Area || dataset.type == ChartTypeEnum.Area)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (dataset.areaSettings == null) dataset.areaSettings = new ChartAreaSettings();\r\n\t\t\t\t\tif (dataset.areaSettings.target == null) dataset.areaSettings.target = \"origin\";\r\n\t\t\t\t\tif (dataset.areaSettings.above == null) dataset.areaSettings.above = \"rgba(255, 99, 132, 0.2)\";\r\n\t\t\t\t\tif (dataset.areaSettings.below == null) dataset.areaSettings.below = \"rgba(255, 159, 64, 0.2)\";\r\n\t\t\t\t\t(dataset as any).fill = dataset.areaSettings;\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\r\n\t\t\t\telse if (options.type == ChartTypeEnum.Line)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (dataset.smoothLine == null) dataset.smoothLine = true;\r\n\t\t\t\t\tif (dataset.smoothLine) (dataset as any).tension = 0.4;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (dataset.borderWidth == null) dataset.borderWidth = 1;\r\n\t\t\t\tif (dataset.title != null)\r\n\t\t\t\t\t(dataset as any).label = dataset.title;\r\n\r\n\t\t\t\tif (dataset.labels != null)\r\n\t\t\t\t\tlabels.vrPushRange(dataset.labels);\r\n\t\t\t}\r\n\r\n\t\t\tthis._datasource = datasource;\r\n\t\t\tlet chartData = { labels: labels, datasets: datasource };\r\n\t\t\tthis.createChart(chartData);\r\n\t\t}\r\n\t\treturn this._datasource;\r\n\t}\r\n\r\n\tprivate createChart(chartData: any)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tlet type = (options.type == ChartTypeEnum.HorizontalBar || options.type == ChartTypeEnum.StackedBar) ? ChartTypeEnum.Bar : options.type;\r\n\t\tif (options.type == ChartTypeEnum.Area) type = ChartTypeEnum.Line;\r\n\r\n\t\tlet config = {\r\n\t\t\ttype: type,\r\n\t\t\tdata: chartData,\r\n\t\t\toptions: {\r\n\t\t\t\tresponsive: options.responsive,\r\n\t\t\t\tmaintainAspectRatio: options.aspectRatio!.maintain,\r\n\t\t\t\taspectRatio: options.aspectRatio!.value,\r\n\t\t\t\tscales: options.scales,\r\n\t\t\t\tparsing: options.parsing,\r\n\t\t\t\tplugins: {\r\n\t\t\t\t\tdatalabels: this._plugins.datalabels,\r\n\t\t\t\t\ttitle: this._plugins.title,\r\n\t\t\t\t\tsubtitle: this._plugins.subtitle,\r\n\t\t\t\t\tlegend: this._plugins.legend,\r\n\t\t\t\t\ttooltip: this._plugins.tooltip\r\n\t\t\t\t},\r\n\t\t\t\tindexAxis: (options.type == ChartTypeEnum.HorizontalBar) ? \"y\" : \"x\",\r\n\t\t\t},\r\n\t\t\tlayout: { padding: options.padding },\r\n\t\t\tplugins: [ChartDataLabels]\r\n\t\t};\r\n\t\tthis._chart = new Chart(this.element(), config);\r\n\t}\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.options<ChartOptions>();\r\n\t}\r\n\t//#endregion\r\n}\r\n\r\nexport class BarChart extends ChartVr { }\r\nexport class HorizontalBarChart extends ChartVr { }\r\nexport class LineChart extends ChartVr { }\r\nexport class DonutChart extends ChartVr { }\r\nexport class PieChart extends ChartVr { }\r\nexport class AreaChart extends ChartVr { }\r\nexport class StackedBarChart extends ChartVr { }\r\n//#endregion\r\n\r\n//#region Classes\r\nclass ChartPlugin\r\n{\r\n\tdatalabels: any;\r\n\ttitle: any;\r\n\tsubtitle: any;\r\n\tlegend: any;\r\n\ttooltip: any;\r\n}\r\n//#endregion","import { UtilityManager } from \"../../../src/managers/utilityManager\";\r\nimport { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { ControlTypeEnum, puma, TabStripItem, createButtonGroup, ColorSettings } from \"../vr\";\r\nimport { ButtonGroup } from \"./buttonGroup\";\r\n\r\n//#region Options\r\nexport class TabStripOptions extends VrControlOptions\r\n{\r\n\titems?: TabStripItem[];\r\n\tbackgroundColor?: string;\r\n\ttooltip?: boolean;\r\n\r\n\tonSelect?(e: TabStripSelectEvent): void;\r\n\tonItemAdded?(e: TabStripItemAddedEvent): void;\r\n\tonItemRemoved?(e: TabStripItemRemovedEvent): void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class TabStrip extends VrControl\r\n{\r\n\tprivate _buttonGroup: ButtonGroup;\r\n\r\n\tconstructor(element: HTMLElement, options?: TabStripOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new TabStripOptions();\r\n\r\n\t\tif (options.width == null) options.width = \"100%\";\r\n\t\tif (options.backgroundColor == null) options.backgroundColor = \"#e3f1fa\";\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.TabStrip);\r\n\r\n\t\t//#region Items\r\n\t\tif (options.items != null)\r\n\t\t{\r\n\t\t\tfor (let item of options.items)\r\n\t\t\t{\r\n\t\t\t\tif (item.colorSettings == null) item.colorSettings = new ColorSettings();\r\n\t\t\t\tif (item.colorSettings.background == null) item.colorSettings.background = options.backgroundColor;\r\n\r\n\t\t\t\t//#region Element to Show/Hide\r\n\t\t\t\tif (item.elementId != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!item.elementId!.startsWith(\"#\"))\r\n\t\t\t\t\t\titem.elementId = \"#\" + item.elementId;\r\n\r\n\t\t\t\t\tlet userOnClick = item.onClick;\r\n\t\t\t\t\titem.onClick = (e) =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet elementIdList = this.items().filter(k => k.elementId != null).map(k => k.elementId);\r\n\t\t\t\t\t\tfor (let elementId of elementIdList)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (!elementId!.startsWith(\"#\"))\r\n\t\t\t\t\t\t\t\telementId = \"#\" + elementId;\r\n\r\n\t\t\t\t\t\t\tpuma(elementId).hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpuma(item.elementId).show();\r\n\r\n\t\t\t\t\t\tif (userOnClick != null)\r\n\t\t\t\t\t\t\tuserOnClick(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//#endregion\r\n\t\t\t}\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\toptions.width = \"100%\";\r\n\t\toptions.cssContainer = undefined;\r\n\t\toptions.css = \"background-color: \" + options.backgroundColor + \";\";\r\n\t\toptions.margin = undefined;\r\n\t\tthis._buttonGroup = createButtonGroup(options as any, this.element())\r\n\t}\r\n\r\n\t//#region Methods\r\n\titems(items?: TabStripItem[]): TabStripItem[]\r\n\t{\r\n\t\treturn this._buttonGroup.items(items);\r\n\t}\r\n\r\n\taddItem(item: TabStripItem, show = true)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (item.colorSettings == null) item.colorSettings = new ColorSettings();\r\n\t\tif (item.colorSettings.background == null) item.colorSettings.background = options.backgroundColor;\r\n\r\n\t\tthis._buttonGroup.addItem(item);\r\n\r\n\t\tif (show)\r\n\t\t{\r\n\t\t\tif (item.elementId != null)\r\n\t\t\t{\r\n\t\t\t\tif (!item.elementId!.startsWith(\"#\"))\r\n\t\t\t\t\titem.elementId = \"#\" + item.elementId;\r\n\r\n\t\t\t\tlet userOnClick = item.onClick;\r\n\t\t\t\titem.onClick = (e) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tlet elementIdList = this.items().filter(k => k.elementId != null).map(k => k.elementId);\r\n\t\t\t\t\tfor (let elementId of elementIdList)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (!elementId!.startsWith(\"#\"))\r\n\t\t\t\t\t\t\telementId = \"#\" + elementId;\r\n\r\n\t\t\t\t\t\tpuma(elementId).hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpuma(item.elementId).show();\r\n\r\n\t\t\t\t\tif (userOnClick != null)\r\n\t\t\t\t\t\tuserOnClick(e);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpuma(item.elementId).show();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\titem(value: string)\r\n\t{\r\n\t\treturn this.items().filter(k => k.value == value)[0];\r\n\t}\r\n\r\n\tremoveItem(value: string)\r\n\t{\r\n\t\tthis._buttonGroup.removeItem(value);\r\n\r\n\t\tlet index = this.items().map(k => k.value).indexOf(value);\r\n\t\tif (index != -1)\r\n\t\t\tthis.items().splice(index, 1);\r\n\r\n\t\tlet item = this.items().filter(k => k.value == value)[0];\r\n\t\tif (item != null && item.elementId != null)\r\n\t\t{\r\n\t\t\tif (!item.elementId!.startsWith(\"#\"))\r\n\t\t\t\titem.elementId = \"#\" + item.elementId;\r\n\r\n\t\t\tpuma(item.elementId).remove();\r\n\t\t}\r\n\t}\r\n\r\n\tremoveAllItems()\r\n\t{\r\n\t\tlet items = UtilityManager.duplicate(this.items());\r\n\t\tfor (let item of items)\r\n\t\t\tthis.removeItem(String(item.value));\r\n\t}\r\n\r\n\tshowItems(values: any[])\r\n\t{\r\n\t\tthis._buttonGroup.showItems(values);\r\n\t}\r\n\r\n\tshowItem(value: any)\r\n\t{\r\n\t\tthis._buttonGroup.showItem(value);\r\n\t}\r\n\r\n\tshowAllItems()\r\n\t{\r\n\t\tthis._buttonGroup.showAllItems();\r\n\t}\r\n\r\n\thideItems(values: any[])\r\n\t{\r\n\t\tthis._buttonGroup.hideItems(values);\r\n\r\n\t\tfor (let value of values)\r\n\t\t\tthis.hideItem(value);\r\n\t}\r\n\r\n\thideItem(value: any, hide = true)\r\n\t{\r\n\t\tthis._buttonGroup.hideItem(value);\r\n\r\n\t\tif (hide)\r\n\t\t{\r\n\t\t\tlet item = this.items().filter(k => k.value == value)[0];\r\n\t\t\tif (item != null && item.elementId != null)\r\n\t\t\t\tpuma(item.elementId).hide();\r\n\t\t}\r\n\t}\r\n\r\n\thideAllItems(hideElement = true)\r\n\t{\r\n\t\tthis._buttonGroup.hideAllItems();\r\n\r\n\t\tif (hideElement)\r\n\t\t{\r\n\t\t\tfor (let item of this.items())\r\n\t\t\t{\r\n\t\t\t\tif (item != null && item.elementId != null)\r\n\t\t\t\t\tpuma(item.elementId).hide();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvisibleItem(value: any, state?: boolean): boolean\r\n\t{\r\n\t\tif (state != null)\r\n\t\t{\r\n\t\t\tif (state) this.showItem(value);\r\n\t\t\telse this.hideItem(value);\r\n\t\t}\r\n\t\treturn this._buttonGroup.visibleItem(value, state);\r\n\t}\r\n\r\n\tenableItem(value: any)\r\n\t{\r\n\t\tthis._buttonGroup.enableItem(value);\r\n\t}\r\n\r\n\tenableItems(values: any[])\r\n\t{\r\n\t\tfor (let value of values)\r\n\t\t\tthis._buttonGroup.enableItem(value);\r\n\t}\r\n\r\n\tdisableItem(value: any)\r\n\t{\r\n\t\tthis._buttonGroup.disableItem(value);\r\n\t}\r\n\r\n\tdisableItems(values: any[])\r\n\t{\r\n\t\tfor (let value of values)\r\n\t\t\tthis._buttonGroup.disableItem(value);\r\n\t}\r\n\r\n\tselect(values: string[] | number[], triggerChange = true): void\r\n\t{\r\n\t\tthis._buttonGroup.select(values, triggerChange);\r\n\t}\r\n\r\n\tselectIndex(index: number, triggerChange = true)\r\n\t{\r\n\t\tthis._buttonGroup.selectIndex(index, triggerChange);\r\n\t}\r\n\r\n\tvalue()\r\n\t{\r\n\t\treturn this._buttonGroup.value();\r\n\t}\r\n\r\n\tgetItemByValue(value: string): HTMLElement\r\n\t{\r\n\t\treturn this._buttonGroup.getItemByValue(value);\r\n\t}\r\n\r\n\tgetItemByIndex(index: number): HTMLElement\r\n\t{\r\n\t\treturn this._buttonGroup.getItemByIndex(index);\r\n\t}\r\n\r\n\titemTooltip(value: string, tooltip?: string): string\r\n\t{\r\n\t\treturn this._buttonGroup.itemTooltip(value, tooltip);\r\n\t}\r\n\r\n\titemText(value: string, text?: string, updateTooltip = true): string\r\n\t{\r\n\t\treturn this._buttonGroup.itemText(value, text, updateTooltip);\r\n\t}\r\n\r\n\titemTextByIndex(index: number, text?: string): string\r\n\t{\r\n\t\treturn this._buttonGroup.itemTextByIndex(index, text);\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Overrides\r\n\tenable()\r\n\t{\r\n\t\tsuper.enable();\r\n\t\tthis._buttonGroup.enable();\r\n\t}\r\n\r\n\tdisable()\r\n\t{\r\n\t\tsuper.disable();\r\n\t\tthis._buttonGroup.disable();\r\n\t}\r\n\t//#endregion\r\n\r\n\tgetOptions(): TabStripOptions\r\n\t{\r\n\t\treturn this.options<TabStripOptions>();\r\n\t}\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass TabStripEvent extends VrControlsEvent\r\n{\r\n\tsender: TabStrip;\r\n}\r\n\r\nclass TabStripSelectEvent extends TabStripEvent\r\n{\r\n\tvalue?: string | null;\r\n\tselectedValues: string[];\r\n\tselected?: boolean;\r\n}\r\n\r\nclass TabStripItemAddedEvent extends TabStripEvent { }\r\nclass TabStripItemRemovedEvent extends TabStripEvent { }\r\n//#endregion","import { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { AnimationHideEnum, AnimationShowEnum, ColorSettings, ControlTypeEnum, div, icon, IconClassLight, IconClass, NotifierOptions, puma, TooltipHideOnEnum, TooltipPositionEnum, TooltipShowOnEnum, TooltipTypeEnum } from \"../vr\";\r\nimport { Notifier } from \"./notifier\";\r\n\r\n//#region Options\r\nexport class TooltipOptions extends VrControlOptions\r\n{\r\n\ttarget?: HTMLElement | JQuery | string;\r\n\telementToAppend?: HTMLElement | JQuery | string;\r\n\tcontent?: string;\r\n\ttype?: TooltipTypeEnum;\r\n\tposition?: TooltipPositionEnum;\r\n\thideSettings?: TooltipHideSettings;\r\n\tshowSettings?: TooltipShowSettings;\r\n\tcolorSettings?: ColorSettings;\r\n\tshowOn?: TooltipShowOnEnum;\r\n\thideOn?: TooltipHideOnEnum;\r\n\ticon?: IconClass;\r\n\r\n\tonShow?: (e: TooltipShowEvent) => void;\r\n\tonHide?: (e: TooltipHideEvent) => void;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Tooltip extends VrControl\r\n{\r\n\t//#region Variables\r\n\tprivate _notifier: Notifier;\r\n\t//#endregion\r\n\r\n\tconstructor(element: HTMLElement, options?: TooltipOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new TooltipOptions();\r\n\r\n\t\tif (options.position == null) options.position = TooltipPositionEnum.BottomCenter;\r\n\t\tif (options.showOn == null) options.showOn = TooltipShowOnEnum.Hover;\r\n\t\tif (options.hideOn == null) options.hideOn = TooltipHideOnEnum.Default;\r\n\t\tif (options.type == null) options.type = TooltipTypeEnum.Default;\r\n\r\n\t\tif (options.colorSettings == null) options.colorSettings = new ColorSettings();\r\n\t\tif (options.colorSettings.background == null) options.colorSettings.background = \"#d9d9d9\";\r\n\t\tif (options.colorSettings.textColor == null) options.colorSettings.textColor = \"#000\";\r\n\t\tif (options.colorSettings.border == null) options.colorSettings.border = \"#CCC\";\r\n\r\n\t\tif (options.showSettings == null) options.showSettings = new TooltipShowSettings();\r\n\t\tif (options.showSettings.showAfter == null) options.showSettings.showAfter = 500;\r\n\t\tif (options.showSettings.animation == null) options.showSettings.animation = AnimationShowEnum.None;\r\n\r\n\t\tif (options.hideSettings == null) options.hideSettings = new TooltipHideSettings();\r\n\t\tif (options.hideSettings.hideAfter == null) options.hideSettings.hideAfter = 600;\r\n\t\tif (options.hideSettings.animation == null) options.hideSettings.animation = AnimationHideEnum.None;\r\n\r\n\t\tif (options.elementToAppend == null) options.elementToAppend = options.target;\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.Tooltip);\r\n\r\n\t\t//#region Show/Hide\r\n\t\tlet showOn: TooltipShowHideEnum = TooltipShowHideEnum.MouseEnter;\r\n\t\tlet hideOn: TooltipShowHideEnum = TooltipShowHideEnum.MouseLeave;\r\n\t\tswitch (options.showOn)\r\n\t\t{\r\n\t\t\tcase TooltipShowOnEnum.Hover:\r\n\t\t\t\t{\r\n\t\t\t\t\tshowOn = TooltipShowHideEnum.MouseEnter;\r\n\t\t\t\t\tif (options.hideOn == TooltipHideOnEnum.Default)\r\n\t\t\t\t\t\thideOn = TooltipShowHideEnum.MouseLeave;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase TooltipShowOnEnum.Click:\r\n\t\t\t\t{\r\n\t\t\t\t\tshowOn = TooltipShowHideEnum.Click;\r\n\t\t\t\t\tif (options.hideOn == TooltipHideOnEnum.Default)\r\n\t\t\t\t\t\thideOn = TooltipShowHideEnum.Click;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase TooltipShowOnEnum.Focus:\r\n\t\t\t\t{\r\n\t\t\t\t\tshowOn = TooltipShowHideEnum.Focus;\r\n\t\t\t\t\tif (options.hideOn == TooltipHideOnEnum.Default)\r\n\t\t\t\t\t\thideOn = TooltipShowHideEnum.Blur;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif (options.hideOn != TooltipHideOnEnum.Default)\r\n\t\t{\r\n\t\t\tswitch (options.hideOn)\r\n\t\t\t{\r\n\t\t\t\tcase TooltipHideOnEnum.Leave: hideOn = TooltipShowHideEnum.MouseLeave; break;\r\n\t\t\t\tcase TooltipHideOnEnum.Click: hideOn = TooltipShowHideEnum.Click; break;\r\n\t\t\t\tcase TooltipHideOnEnum.Blur: hideOn = TooltipShowHideEnum.Blur; break;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (options.showOn != TooltipShowOnEnum.Never)\r\n\t\t{\r\n\t\t\tpuma(this.target()).on(showOn, (e: JQuery.MouseEnterEvent) =>\r\n\t\t\t{\r\n\t\t\t\twindow.setTimeout(() => this.show(), options!.showSettings!.showAfter);\r\n\t\t\t});\r\n\r\n\t\t\tpuma(this.target()).on(hideOn, (e: JQuery.MouseLeaveEvent) =>\r\n\t\t\t{\r\n\t\t\t\tif (options!.hideOn != TooltipHideOnEnum.Never)\r\n\t\t\t\t\twindow.setTimeout(() => this.hide(), Number(options!.hideSettings!.hideAfter));\r\n\t\t\t});\r\n\r\n\t\t\tpuma(this.container()).on(hideOn, (e: JQuery.MouseLeaveEvent) =>\r\n\t\t\t{\r\n\t\t\t\tif (options!.hideOn != TooltipHideOnEnum.Never)\r\n\t\t\t\t\twindow.setTimeout(() => this.hide(), Number(options!.hideSettings!.hideAfter));\r\n\t\t\t});\r\n\r\n\t\t\tif (hideOn == TooltipShowHideEnum.Click && options.hideOn != TooltipHideOnEnum.Never)\r\n\t\t\t\tpuma(document.body).on(\"click\", () => window.setTimeout(() => this.hide(), Number(options!.hideSettings!.hideAfter)));\r\n\t\t}\r\n\t\t//#endregion\r\n\t}\r\n\r\n\tshow(content?: string)\r\n\t{\r\n\t\tif (this._notifier != null && this._notifier.visible())\r\n\t\t\treturn;\r\n\r\n\t\tlet options = this.getOptions();\r\n\r\n\t\t//#region Content\r\n\t\tif (content != null)\r\n\t\t\tthis.content(content);\r\n\r\n\t\tif (options.content == null)\r\n\t\t\toptions.content = this.target().innerText;\r\n\t\t//#endregion\r\n\r\n\t\tsuper.show();\r\n\r\n\t\t(options.hideSettings as any).autoHide = false;\r\n\t\tthis._notifier = new Notifier(options.content, options as NotifierOptions);\r\n\r\n\t\tpuma(this._notifier.container()).vrAppendToPuma(options.elementToAppend);\r\n\r\n\t\t//#region Event\r\n\t\tif (options.onShow != null)\r\n\t\t{\r\n\t\t\tlet showEvent = new TooltipShowEvent();\r\n\t\t\tshowEvent.sender = this;\r\n\t\t\tshowEvent.content = this.content()!;\r\n\t\t\toptions.onShow(showEvent);\r\n\t\t}\r\n\t\t//#endregion\r\n\t}\r\n\r\n\thide()\r\n\t{\r\n\t\tif (this._notifier == null || !this._notifier.visible())\r\n\t\t\treturn;\r\n\r\n\t\tlet options = this.getOptions();\r\n\r\n\t\tsuper.hide();\r\n\t\tthis._notifier.hide();\r\n\r\n\t\t//#region Event\r\n\t\tif (options.onHide != null)\r\n\t\t{\r\n\t\t\tlet hideEvent = new TooltipHideEvent();\r\n\t\t\thideEvent.sender = this;\r\n\t\t\thideEvent.content = this.content()!;\r\n\t\t\toptions.onHide(hideEvent);\r\n\t\t}\r\n\t\t//#endregion\r\n\t}\r\n\r\n\tvisible(state?: boolean)\r\n\t{\r\n\t\tsuper.visible(state);\r\n\t\treturn (this._notifier == null) ? false : this._notifier.visible(state);\r\n\t}\r\n\r\n\tcontent(content?: string)\r\n\t{\r\n\t\tlet options = this.getOptions();\r\n\t\tif (content != null)\r\n\t\t\toptions.content = content;\r\n\r\n\t\treturn options.content;\r\n\t}\r\n\r\n\ttarget()\r\n\t{\r\n\t\treturn puma(this.getOptions().target)[0] as HTMLElement;\r\n\t}\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.options<TooltipOptions>();\r\n\t}\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nclass TooltipHideSettings\r\n{\r\n\tclickToHide?: boolean;\r\n\thideAfter?: number;\r\n\tanimation?: AnimationHideEnum;\r\n}\r\n\r\nclass TooltipShowSettings\r\n{\r\n\tshowAfter?: number;\r\n\tanimation?: AnimationShowEnum;\r\n}\r\n\r\nenum TooltipShowHideEnum\r\n{\r\n\tClick = \"click\",\r\n\tFocus = \"focus\",\r\n\tMouseEnter = \"mouseenter\",\r\n\tBlur = \"blur\",\r\n\tMouseLeave = \"mouseleave\"\r\n}\r\n\r\nclass TooltipShowEvent extends VrControlsEvent\r\n{\r\n\tsender: Tooltip;\r\n\tcontent: string;\r\n}\r\n\r\nclass TooltipHideEvent extends VrControlsEvent\r\n{\r\n\tsender: Tooltip;\r\n\tcontent: string;\r\n}\r\n//#endregion","import { ControlTypeEnum, createButton, div, IconClassLight, puma, SpeechRecognizerOptions } from \"../vr\";\r\nimport { VrControl, VrControlsEvent } from \"../common\";\r\nimport { Button } from \"./button\";\r\n\r\ndeclare var SpeechRecognition: any;\r\ndeclare var webkitSpeechRecognition: any;\r\ndeclare var SpeechGrammarList: any;\r\ndeclare var webkitSpeechGrammarList: any;\r\n\r\n//#region Control\r\nexport class SpeechRecognizer extends VrControl\r\n{\r\n\t//#region Variables\r\n\tprivate _btnMicrophone: Button;\r\n\tprivate _recognition: any;\r\n\tprivate _allTextFromStart: string;\r\n\t//#endregion\r\n\r\n\tconstructor(element: HTMLElement, options?: SpeechRecognizerOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new SpeechRecognizerOptions();\r\n\r\n\t\tif (options.continuous == null) options.continuous = true;\r\n\t\tif (options.interimResults == null) options.interimResults = true;\r\n\t\tif (options.language == null) options.language = \"it-IT\";\r\n\t\tif (options.maxAlternatives == null) options.maxAlternatives = 1;\r\n\t\tif (options.size == null) options.size = 14;\r\n\t\tif (options.stopAtClick == null) options.stopAtClick = false;\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.SpeechRecognizer);\r\n\r\n\t\t//#region Microphone\r\n\t\tthis._btnMicrophone = createButton({\r\n\t\t\ticon: IconClassLight.Microphone,\r\n\t\t\tcss: \"border: none; background: none; border-radius: 20px; font-size: \" + options.size + \"px;\",\r\n\t\t\ttag: \"deactivated\",\r\n\t\t\ticonSettings: { fontSize: options.size },\r\n\t\t\tonClick: (e) =>\r\n\t\t\t{\r\n\t\t\t\tif (!this.enabled())\r\n\t\t\t\t{\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options!.onClick != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet clickEvent = new SpeechRecognizerClickEvent();\r\n\t\t\t\t\tclickEvent.sender = this;\r\n\t\t\t\t\toptions!.onClick(clickEvent);\r\n\r\n\t\t\t\t\tif (clickEvent.isDefaultPrevented())\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (e.sender.tag() == \"deactivated\")\r\n\t\t\t\t\tthis.start();\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.stop();\r\n\t\t\t}\r\n\t\t}, this.element());\r\n\r\n\t\tdiv(this._btnMicrophone.element(), { class: \"speechRecognizerDivPulse\" }, true)\r\n\t\t//#endregion\r\n\r\n\t\tif (!('webkitSpeechRecognition' in window) && !('speechRecognition' in window))\r\n\t\t{\r\n\t\t\t//#region Browser not supported\r\n\t\t\tthis._btnMicrophone.disable();\r\n\t\t\tthis._btnMicrophone.icon(IconClassLight.MicrophoneSlash);\r\n\t\t\tthis._btnMicrophone.tooltip(\"Il browser non supporta questa funzionalità\");\r\n\t\t\t//#endregion\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlet speechRecognition = webkitSpeechRecognition || SpeechRecognition;\r\n\t\t\tlet speechGrammarList = webkitSpeechGrammarList || SpeechGrammarList;\r\n\r\n\t\t\tthis._recognition = new speechRecognition();\r\n\t\t\tthis._recognition.continuous = options.continuous;\r\n\t\t\tthis._recognition.interimResults = options.interimResults;\r\n\t\t\tthis._recognition.lang = options.language;\r\n\t\t\tthis._recognition.maxAlternatives = options.maxAlternatives;\r\n\r\n\t\t\t//#region Grammar\r\n\t\t\tif (options.grammars != null && options.grammars.length > 0)\r\n\t\t\t{\r\n\t\t\t\tlet speechRecognitionList = new speechGrammarList();\r\n\t\t\t\tfor (let grammar of options.grammars)\r\n\t\t\t\t\tspeechRecognitionList.addFromString(grammar, 1);\r\n\t\t\t\tthis._recognition.grammars = speechRecognitionList;\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\r\n\t\t\t//#region Events\r\n\t\t\tthis._recognition.onresult = (e: any) =>\r\n\t\t\t{\r\n\t\t\t\tlet interimResults = \"\";\r\n\t\t\t\tlet finalResults = \"\";\r\n\r\n\t\t\t\tfor (var i = e.resultIndex; i < e.results.length; ++i)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (e.results[i].isFinal)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfinalResults += e.results[i][0].transcript;\r\n\t\t\t\t\t\tthis._allTextFromStart += e.results[i][0].transcript;\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tinterimResults += e.results[i][0].transcript;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options!.onResult != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet event = new SpeechRecognizerResultEvent();\r\n\t\t\t\t\tevent.sender = this;\r\n\t\t\t\t\tevent.results = e.results;\r\n\t\t\t\t\tevent.resultIndex = e.resultIndex;\r\n\t\t\t\t\tevent.interimResults = interimResults;\r\n\t\t\t\t\tevent.finalResults = finalResults;\r\n\t\t\t\t\tevent.allTextFromStart = this._allTextFromStart;\r\n\t\t\t\t\toptions!.onResult(event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._recognition.onnomatch = () =>\r\n\t\t\t{\r\n\t\t\t\tif (options!.onNoMatch != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet event = new SpeechRecognizerNoMatchEvent();\r\n\t\t\t\t\tevent.sender = this;\r\n\t\t\t\t\toptions!.onNoMatch(event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._recognition.onerror = (e: any) =>\r\n\t\t\t{\r\n\t\t\t\tif (options!.onError != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet event = new SpeechRecognizerErrorEvent();\r\n\t\t\t\t\tevent.sender = this;\r\n\t\t\t\t\tevent.error = e.error;\r\n\t\t\t\t\tevent.message = e.message;\r\n\t\t\t\t\toptions!.onError(event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._recognition.onstart = () =>\r\n\t\t\t{\r\n\t\t\t\tif (options!.onStart != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet event = new SpeechRecognizerStartEvent();\r\n\t\t\t\t\tevent.sender = this;\r\n\t\t\t\t\toptions!.onStart(event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._recognition.onend = () =>\r\n\t\t\t{\r\n\t\t\t\tlet options = this.getOptions();\r\n\t\t\t\tif (this._btnMicrophone.tag() == \"activated\" && options.stopAtClick)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._recognition.start();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._allTextFromStart = \"\";\r\n\t\t\t\tthis._btnMicrophone.tag(\"deactivated\");\r\n\t\t\t\tpuma(this._btnMicrophone.element()).removeClass(\"microphoneActive\");\r\n\r\n\t\t\t\tif (options!.onEnd != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet event = new SpeechRecognizerEndEvent();\r\n\t\t\t\t\tevent.sender = this;\r\n\t\t\t\t\toptions!.onEnd(event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._recognition.onspeechstart = () =>\r\n\t\t\t{\r\n\t\t\t\tif (options!.onSpeechStart != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet event = new SpeechRecognizerSpeechStartEvent();\r\n\t\t\t\t\tevent.sender = this;\r\n\t\t\t\t\toptions!.onSpeechStart(event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._recognition.onspeechend = () =>\r\n\t\t\t{\r\n\t\t\t\tif (options!.onSpeechEnd != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet event = new SpeechRecognizerSpeechEndEvent();\r\n\t\t\t\t\tevent.sender = this;\r\n\t\t\t\t\toptions!.onSpeechEnd(event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._recognition.onaudiostart = () =>\r\n\t\t\t{\r\n\t\t\t\tif (options!.onAudioStart != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet event = new SpeechRecognizerAudioStartEvent();\r\n\t\t\t\t\tevent.sender = this;\r\n\t\t\t\t\toptions!.onAudioStart(event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._recognition.onaudioend = () =>\r\n\t\t\t{\r\n\t\t\t\tif (options!.onAudioEnd != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet event = new SpeechRecognizerAudioEndEvent();\r\n\t\t\t\t\tevent.sender = this;\r\n\t\t\t\t\toptions!.onAudioEnd(event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._recognition.onsoundstart = () =>\r\n\t\t\t{\r\n\t\t\t\tif (options!.onSoundStart != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet event = new SpeechRecognizerSoundStartEvent();\r\n\t\t\t\t\tevent.sender = this;\r\n\t\t\t\t\toptions!.onSoundStart(event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._recognition.onsoundend = () =>\r\n\t\t\t{\r\n\t\t\t\tif (options!.onSoundEnd != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet event = new SpeechRecognizerSoundEndEvent();\r\n\t\t\t\t\tevent.sender = this;\r\n\t\t\t\t\toptions!.onSoundEnd(event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//#endregion\r\n\t\t}\r\n\t}\r\n\r\n\t//#region Methods\r\n\tstart()\r\n\t{\r\n\t\tthis._allTextFromStart = \"\";\r\n\t\tthis._btnMicrophone.tag(\"activated\");\r\n\t\tpuma(this._btnMicrophone.element()).addClass(\"microphoneActive\");\r\n\t\tthis._recognition.start();\r\n\t}\r\n\r\n\tstop()\r\n\t{\r\n\t\tthis._allTextFromStart = \"\";\r\n\t\tthis._btnMicrophone.tag(\"deactivated\");\r\n\t\tpuma(this._btnMicrophone.element()).removeClass(\"microphoneActive\");\r\n\t\tthis._recognition.stop();\r\n\t}\r\n\r\n\tisRecording()\r\n\t{\r\n\t\treturn this._btnMicrophone.tag() == \"activated\";\r\n\t}\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.options<SpeechRecognizerOptions>();\r\n\t}\r\n\t//#endregion\r\n\r\n\t//#region Overrides\r\n\tenable(): void\r\n\t{\r\n\t\tsuper.enable();\r\n\t}\r\n\r\n\tdisable(): void\r\n\t{\r\n\t\tsuper.disable();\r\n\t\tthis.stop();\r\n\t}\r\n}\r\n//#endregion\r\n\r\n//#region Classes\r\nexport class SpeechRecognizerEvent extends VrControlsEvent\r\n{\r\n\tsender: SpeechRecognizer;\r\n}\r\n\r\nexport class SpeechRecognizerNoMatchEvent extends SpeechRecognizerEvent\r\n{ }\r\n\r\nexport class SpeechRecognizerClickEvent extends SpeechRecognizerEvent\r\n{ }\r\n\r\nexport class SpeechRecognizerErrorEvent extends SpeechRecognizerEvent\r\n{\r\n\terror: string;\r\n\tmessage: string;\r\n}\r\n\r\nexport class SpeechRecognizerResultEvent extends SpeechRecognizerEvent\r\n{\r\n\tresults: any;\r\n\tresultIndex: number;\r\n\tinterimResults: string;\r\n\tfinalResults: string;\r\n\tallTextFromStart: string;\r\n}\r\n\r\nexport class SpeechRecognizerStartEvent extends SpeechRecognizerEvent\r\n{ }\r\n\r\nexport class SpeechRecognizerEndEvent extends SpeechRecognizerEvent\r\n{ }\r\n\r\nexport class SpeechRecognizerSpeechStartEvent extends SpeechRecognizerEvent\r\n{ }\r\n\r\nexport class SpeechRecognizerSpeechEndEvent extends SpeechRecognizerEvent\r\n{ }\r\n\r\nexport class SpeechRecognizerAudioStartEvent extends SpeechRecognizerEvent\r\n{ }\r\n\r\nexport class SpeechRecognizerAudioEndEvent extends SpeechRecognizerEvent\r\n{ }\r\n\r\nexport class SpeechRecognizerSoundStartEvent extends SpeechRecognizerEvent\r\n{ }\r\n\r\nexport class SpeechRecognizerSoundEndEvent extends SpeechRecognizerEvent\r\n{ }\r\n//#endregion","import { VrControl, VrControlOptions, VrControlsEvent } from \"../common\";\r\nimport { ControlTypeEnum, DivBorderSettings, DivBorderSpecificSettings, DivColorSettings } from \"../vr\";\r\n\r\n//#region Options\r\nexport class DivOptions extends VrControlOptions\r\n{\r\n\ttext?: string;\r\n\tfontSize?: number;\r\n\ttooltip?: string;\r\n\tinline?: boolean;\r\n\tcolorSettings?: DivColorSettings;\r\n\tborder?: DivBorderSettings | boolean;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Div extends VrControl\r\n{\r\n\tconstructor(element: HTMLElement, options?: DivOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new DivOptions();\r\n\r\n\t\tif (options.addToControlList == null) options.addToControlList = false;\r\n\t\tif (options.fontSize == null) options.fontSize = 14;\r\n\t\tif (options.border == null) options.border = false;\r\n\t\tif (options.inline == null) options.inline = false;\r\n\t\tif (options.tabIndex == null) options.tabIndex = -1;\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.Div);\r\n\r\n\t\t//#region Font size\r\n\t\tthis.element().style.cssText += \"font-size: \" + options.fontSize + \"px;\";\r\n\t\t//#endregion\r\n\r\n\t\t//#region Mode\r\n\t\tthis.container().style.cssText += \"display: flex;\";\r\n\t\tthis.element().style.cssText += \"width: 100%;\";\r\n\r\n\t\tif (options.inline)\r\n\t\t\tthis.container().style.cssText += \"display: inline-block;\";\r\n\t\t//#endregion\r\n\r\n\t\t//#region Content\r\n\t\tif (options.text != null)\r\n\t\t\tthis.text(options.text);\r\n\t\t//#endregion\r\n\r\n\t\t//#region Color\r\n\t\tif (options.colorSettings != null)\r\n\t\t{\r\n\t\t\tif (options.colorSettings.textColor == null) this.element().style.cssText += \"color: \" + options.colorSettings.textColor + \";\";\r\n\t\t\tif (options.colorSettings.background == null) this.element().style.cssText += \"background-color: \" + options.colorSettings.background + \";\";\r\n\t\t}\r\n\t\t//#endregion\r\n\r\n\t\t//#region Border\r\n\t\tif (options.border !== false)\r\n\t\t{\r\n\t\t\tif (options.border === true) options.border = new DivBorderSettings();\r\n\t\t\tif (options.border.type == null) options.border.type = \"solid\";\r\n\t\t\tif (options.border.color == null) options.border.color = \"#d9d9d9\";\r\n\t\t\tif (options.border.size == null) options.border.size = 1;\r\n\t\t\tthis.element().style.cssText += \"border: \" + options.border.type + \" \" + options.border.size + \"px \" + options.border.color + \";\";\r\n\r\n\t\t\tthis.setBorderTop(options.border.top, \"top\");\r\n\t\t\tthis.setBorderTop(options.border.right, \"right\");\r\n\t\t\tthis.setBorderTop(options.border.bottom, \"bottom\");\r\n\t\t\tthis.setBorderTop(options.border.left, \"left\");\r\n\t\t}\r\n\t\t//#endregion\r\n\t}\r\n\r\n\t//#region Methods\r\n\ttext(text?: string)\r\n\t{\r\n\t\tif (text != null)\r\n\t\t\tthis.element().innerHTML = text;\r\n\r\n\t\treturn this.element().innerHTML;\r\n\t}\r\n\r\n\tappendText(text: string)\r\n\t{\r\n\t\tthis.element().innerHTML = this.text() + text;\r\n\t}\r\n\r\n\tprivate setBorderTop(borderSettings?: DivBorderSpecificSettings | boolean, position?: string)\r\n\t{\r\n\t\tif (borderSettings == null) borderSettings = true;\r\n\t\tif (borderSettings === true) borderSettings = new DivBorderSpecificSettings();\r\n\t\tif (borderSettings !== false)\r\n\t\t{\r\n\t\t\tif (borderSettings.type == null) borderSettings.type = \"solid\";\r\n\t\t\tif (borderSettings.size == null) borderSettings.size = 1;\r\n\t\t\tif (borderSettings.color == null) borderSettings.color = \"d9d9d9\";\r\n\t\t\tthis.element().style.cssText += \"border-\" + position! + \": \" + borderSettings.type + \" \" + borderSettings.size + \"px \" + borderSettings.color + \";\";\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.element().style.cssText += \"border-\" + position! + \": none\";\r\n\t}\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.options<DivOptions>();\r\n\t}\r\n\t//#endregion\r\n}\r\n//#endregion","import { ControlTypeEnum, puma } from \"../vr\";\r\nimport { VrControlOptions, VrControl } from \"../common\";\r\n\r\n//#region Options\r\nexport class LegendOptions extends VrControlOptions\r\n{\r\n\ttitle?: string;\r\n\tfontSize?: number | string;\r\n\tfontFamily?: string;\r\n\tbold?: boolean;\r\n}\r\n//#endregion\r\n\r\n//#region Control\r\nexport class Legend extends VrControl\r\n{\r\n\tconstructor(element: HTMLElement, options?: LegendOptions | null)\r\n\t{\r\n\t\t//#region Options\r\n\t\tif (options == null)\r\n\t\t\toptions = new LegendOptions();\r\n\r\n\t\tif (options.fontSize == null) options.fontSize = 15;\r\n\t\tif (options.bold == null) options.bold = true;\r\n\t\tif (options.width == null) options.width = \"Calc(100% - 10px)\";\r\n\t\tif (options.tabIndex == null) options.tabIndex = -1;\r\n\t\t//#endregion\r\n\r\n\t\tsuper(element, options, ControlTypeEnum.Legend);\r\n\r\n\t\t//#region Title\r\n\t\tpuma(\"<h1><span class='vrLegendTitle'>\" + options.title + \"</span></h1>\").vrAppendToPuma(this.element());\r\n\t\t//#endregion\r\n\r\n\t\t//#region Font\r\n\t\tlet font = \"\";\r\n\t\tif (options.fontSize != null)\r\n\t\t{\r\n\t\t\tif (typeof (options.fontSize) == \"number\")\r\n\t\t\t\toptions.fontSize = options.fontSize + \"px\";\r\n\r\n\t\t\tfont += \"font-size: \" + options.fontSize + \";\";\r\n\t\t}\r\n\t\tif (options.fontFamily != null)\r\n\t\t\tfont += \"font-family: \" + options.fontFamily + \";\";\r\n\t\tif (options.bold === true)\r\n\t\t\tfont += \"font-weight: 600;\";\r\n\r\n\t\tpuma(this.element()).find(\".vrLegendTitle\")[0].style.cssText += font;\r\n\t\t//#endregion\r\n\t}\r\n}\r\n//#endregion"],"sourceRoot":""}